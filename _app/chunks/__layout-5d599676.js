var Nb=Object.defineProperty;var N_=Object.getOwnPropertySymbols;var Vb=Object.prototype.hasOwnProperty,jb=Object.prototype.propertyIsEnumerable;var V_=(o,e,n)=>e in o?Nb(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,tr=(o,e)=>{for(var n in e||(e={}))Vb.call(e,n)&&V_(o,n,e[n]);if(N_)for(var n of N_(e))jb.call(e,n)&&V_(o,n,e[n]);return o};import{F as In,G as df,H as qb,I as Gb,S as Tn,i as An,s as Sn,J as mn,C as Ct,e as _i,c as vi,a as mi,d as Qe,K as di,g as Ut,L as Ei,M as gn,N as yn,O as _n,z as en,P as Rn,q as rt,o as ft,Q as Tr,R as xi,T as Yn,v as Fo,U as Qn,V as q0,W as Zi,w as Ni,l as bn,x as $i,y as Vi,A as Xr,p as Rr,B as ji,X as Dr,r as sr,Y as eh,n as Or,Z as Kl,_ as Jl,$ as j_,a0 as Hb,E as Yo,b as ii,k as qn,m as Gn,a1 as Zb,a2 as sn,a3 as Wb,t as pa,h as fa,j as tu,a4 as Xb,a5 as Kb,a6 as Ho,a7 as $l,f as q_,a8 as eu,a9 as Cy,aa as Oh,ab as Jb,ac as Mm,ad as G_}from"./index-261df066.js";import{r as Yb,w as Yl,_ as H_}from"./preload-helper-c22bda32.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var my=function(o,e){return my=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(n[f]=s[f])},my(o,e)};function yo(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");my(o,e);function n(){this.constructor=o}o.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _r=function(){return _r=Object.assign||function(e){for(var n,s=1,f=arguments.length;s<f;s++){n=arguments[s];for(var v in n)Object.prototype.hasOwnProperty.call(n,v)&&(e[v]=n[v])}return e},_r.apply(this,arguments)};function Qb(o,e,n,s){function f(v){return v instanceof n?v:new n(function(c){c(v)})}return new(n||(n=Promise))(function(v,c){function h(D){try{P(s.next(D))}catch(R){c(R)}}function S(D){try{P(s.throw(D))}catch(R){c(R)}}function P(D){D.done?v(D.value):f(D.value).then(h,S)}P((s=s.apply(o,e||[])).next())})}function $b(o,e){var n={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},s,f,v,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(P){return function(D){return S([P,D])}}function S(P){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,f&&(v=P[0]&2?f.return:P[0]?f.throw||((v=f.return)&&v.call(f),0):f.next)&&!(v=v.call(f,P[1])).done)return v;switch(f=0,v&&(P=[P[0]&2,v.value]),P[0]){case 0:case 1:v=P;break;case 4:return n.label++,{value:P[1],done:!1};case 5:n.label++,f=P[1],P=[0];continue;case 7:P=n.ops.pop(),n.trys.pop();continue;default:if(v=n.trys,!(v=v.length>0&&v[v.length-1])&&(P[0]===6||P[0]===2)){n=0;continue}if(P[0]===3&&(!v||P[1]>v[0]&&P[1]<v[3])){n.label=P[1];break}if(P[0]===6&&n.label<v[1]){n.label=v[1],v=P;break}if(v&&n.label<v[2]){n.label=v[2],n.ops.push(P);break}v[2]&&n.ops.pop(),n.trys.pop();continue}P=e.call(o,n)}catch(D){P=[6,D],f=0}finally{s=v=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}}function lf(o){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&o[e],s=0;if(n)return n.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&s>=o.length&&(o=void 0),{value:o&&o[s++],done:!o}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ex(o,e){var n=typeof Symbol=="function"&&o[Symbol.iterator];if(!n)return o;var s=n.call(o),f,v=[],c;try{for(;(e===void 0||e-- >0)&&!(f=s.next()).done;)v.push(f.value)}catch(h){c={error:h}}finally{try{f&&!f.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}return v}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Na=function(){function o(e){e===void 0&&(e={}),this.adapter=e}return Object.defineProperty(o,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(o,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(o,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(o,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.destroy=function(){},o}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function tx(o){return o===void 0&&(o=window),ix(o)?{passive:!0}:!1}function ix(o){o===void 0&&(o=window);var e=!1;try{var n={get passive(){return e=!0,!1}},s=function(){};o.document.addEventListener("test",s,n),o.document.removeEventListener("test",s,n)}catch{e=!1}return e}var nx=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:tx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function rx(o,e){if(o.closest)return o.closest(e);for(var n=o;n;){if(G0(n,e))return n;n=n.parentElement}return null}function G0(o,e){var n=o.matches||o.webkitMatchesSelector||o.msMatchesSelector;return n.call(o,e)}function ox(o){var e=o;if(e.offsetParent!==null)return e.scrollWidth;var n=e.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);var s=n.scrollWidth;return document.documentElement.removeChild(n),s}var yf=Object.freeze(Object.defineProperty({__proto__:null,closest:rx,matches:G0,estimateScrollWidth:ox},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ax={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},sx={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},Z_={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},rm;function lx(o,e){e===void 0&&(e=!1);var n=o.CSS,s=rm;if(typeof rm=="boolean"&&!e)return rm;var f=n&&typeof n.supports=="function";if(!f)return!1;var v=n.supports("--css-vars","yes"),c=n.supports("(--css-vars: yes)")&&n.supports("color","#00000000");return s=v||c,e||(rm=s),s}function ux(o,e,n){if(!o)return{x:0,y:0};var s=e.x,f=e.y,v=s+n.left,c=f+n.top,h,S;if(o.type==="touchstart"){var P=o;h=P.changedTouches[0].pageX-v,S=P.changedTouches[0].pageY-c}else{var D=o;h=D.pageX-v,S=D.pageY-c}return{x:h,y:S}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var W_=["touchstart","pointerdown","mousedown","keydown"],X_=["touchend","pointerup","mouseup","contextmenu"],om=[],cx=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.activationAnimationHasEnded=!1,s.activationTimer=0,s.fgDeactivationRemovalTimer=0,s.fgScale="0",s.frame={width:0,height:0},s.initialSize=0,s.layoutFrame=0,s.maxRadius=0,s.unboundedCoords={left:0,top:0},s.activationState=s.defaultActivationState(),s.activationTimerCallback=function(){s.activationAnimationHasEnded=!0,s.runDeactivationUXLogicIfReady()},s.activateHandler=function(f){s.activateImpl(f)},s.deactivateHandler=function(){s.deactivateImpl()},s.focusHandler=function(){s.handleFocus()},s.blurHandler=function(){s.handleBlur()},s.resizeHandler=function(){s.layout()},s}return Object.defineProperty(e,"cssClasses",{get:function(){return ax},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return sx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Z_},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=this,s=this.supportsPressRipple();if(this.registerRootHandlers(s),s){var f=e.cssClasses,v=f.ROOT,c=f.UNBOUNDED;requestAnimationFrame(function(){n.adapter.addClass(v),n.adapter.isUnbounded()&&(n.adapter.addClass(c),n.layoutInternal())})}},e.prototype.destroy=function(){var n=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(e.cssClasses.FG_DEACTIVATION));var s=e.cssClasses,f=s.ROOT,v=s.UNBOUNDED;requestAnimationFrame(function(){n.adapter.removeClass(f),n.adapter.removeClass(v),n.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},e.prototype.activate=function(n){this.activateImpl(n)},e.prototype.deactivate=function(){this.deactivateImpl()},e.prototype.layout=function(){var n=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){n.layoutInternal(),n.layoutFrame=0})},e.prototype.setUnbounded=function(n){var s=e.cssClasses.UNBOUNDED;n?this.adapter.addClass(s):this.adapter.removeClass(s)},e.prototype.handleFocus=function(){var n=this;requestAnimationFrame(function(){return n.adapter.addClass(e.cssClasses.BG_FOCUSED)})},e.prototype.handleBlur=function(){var n=this;requestAnimationFrame(function(){return n.adapter.removeClass(e.cssClasses.BG_FOCUSED)})},e.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},e.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers=function(n){var s,f;if(n){try{for(var v=lf(W_),c=v.next();!c.done;c=v.next()){var h=c.value;this.adapter.registerInteractionHandler(h,this.activateHandler)}}catch(S){s={error:S}}finally{try{c&&!c.done&&(f=v.return)&&f.call(v)}finally{if(s)throw s.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},e.prototype.registerDeactivationHandlers=function(n){var s,f;if(n.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var v=lf(X_),c=v.next();!c.done;c=v.next()){var h=c.value;this.adapter.registerDocumentInteractionHandler(h,this.deactivateHandler)}}catch(S){s={error:S}}finally{try{c&&!c.done&&(f=v.return)&&f.call(v)}finally{if(s)throw s.error}}},e.prototype.deregisterRootHandlers=function(){var n,s;try{for(var f=lf(W_),v=f.next();!v.done;v=f.next()){var c=v.value;this.adapter.deregisterInteractionHandler(c,this.activateHandler)}}catch(h){n={error:h}}finally{try{v&&!v.done&&(s=f.return)&&s.call(f)}finally{if(n)throw n.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},e.prototype.deregisterDeactivationHandlers=function(){var n,s;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var f=lf(X_),v=f.next();!v.done;v=f.next()){var c=v.value;this.adapter.deregisterDocumentInteractionHandler(c,this.deactivateHandler)}}catch(h){n={error:h}}finally{try{v&&!v.done&&(s=f.return)&&s.call(f)}finally{if(n)throw n.error}}},e.prototype.removeCssVars=function(){var n=this,s=e.strings,f=Object.keys(s);f.forEach(function(v){v.indexOf("VAR_")===0&&n.adapter.updateCssVariable(s[v],null)})},e.prototype.activateImpl=function(n){var s=this;if(!this.adapter.isSurfaceDisabled()){var f=this.activationState;if(!f.isActivated){var v=this.previousActivationEvent,c=v&&n!==void 0&&v.type!==n.type;if(!c){f.isActivated=!0,f.isProgrammatic=n===void 0,f.activationEvent=n,f.wasActivatedByPointer=f.isProgrammatic?!1:n!==void 0&&(n.type==="mousedown"||n.type==="touchstart"||n.type==="pointerdown");var h=n!==void 0&&om.length>0&&om.some(function(S){return s.adapter.containsEventTarget(S)});if(h){this.resetActivationState();return}n!==void 0&&(om.push(n.target),this.registerDeactivationHandlers(n)),f.wasElementMadeActive=this.checkElementMadeActive(n),f.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){om=[],!f.wasElementMadeActive&&n!==void 0&&(n.key===" "||n.keyCode===32)&&(f.wasElementMadeActive=s.checkElementMadeActive(n),f.wasElementMadeActive&&s.animateActivation()),f.wasElementMadeActive||(s.activationState=s.defaultActivationState())})}}}},e.prototype.checkElementMadeActive=function(n){return n!==void 0&&n.type==="keydown"?this.adapter.isSurfaceActive():!0},e.prototype.animateActivation=function(){var n=this,s=e.strings,f=s.VAR_FG_TRANSLATE_START,v=s.VAR_FG_TRANSLATE_END,c=e.cssClasses,h=c.FG_DEACTIVATION,S=c.FG_ACTIVATION,P=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var D="",R="";if(!this.adapter.isUnbounded()){var O=this.getFgTranslationCoordinates(),Y=O.startPoint,ee=O.endPoint;D=Y.x+"px, "+Y.y+"px",R=ee.x+"px, "+ee.y+"px"}this.adapter.updateCssVariable(f,D),this.adapter.updateCssVariable(v,R),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(h),this.adapter.computeBoundingRect(),this.adapter.addClass(S),this.activationTimer=setTimeout(function(){n.activationTimerCallback()},P)},e.prototype.getFgTranslationCoordinates=function(){var n=this.activationState,s=n.activationEvent,f=n.wasActivatedByPointer,v;f?v=ux(s,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):v={x:this.frame.width/2,y:this.frame.height/2},v={x:v.x-this.initialSize/2,y:v.y-this.initialSize/2};var c={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:v,endPoint:c}},e.prototype.runDeactivationUXLogicIfReady=function(){var n=this,s=e.cssClasses.FG_DEACTIVATION,f=this.activationState,v=f.hasDeactivationUXRun,c=f.isActivated,h=v||!c;h&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(s),this.fgDeactivationRemovalTimer=setTimeout(function(){n.adapter.removeClass(s)},Z_.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses=function(){var n=e.cssClasses.FG_ACTIVATION;this.adapter.removeClass(n),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},e.prototype.resetActivationState=function(){var n=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return n.previousActivationEvent=void 0},e.numbers.TAP_DELAY_MS)},e.prototype.deactivateImpl=function(){var n=this,s=this.activationState;if(!!s.isActivated){var f=_r({},s);s.isProgrammatic?(requestAnimationFrame(function(){n.animateDeactivation(f)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){n.activationState.hasDeactivationUXRun=!0,n.animateDeactivation(f),n.resetActivationState()}))}},e.prototype.animateDeactivation=function(n){var s=n.wasActivatedByPointer,f=n.wasElementMadeActive;(s||f)&&this.runDeactivationUXLogicIfReady()},e.prototype.layoutInternal=function(){var n=this;this.frame=this.adapter.computeBoundingRect();var s=Math.max(this.frame.height,this.frame.width),f=function(){var c=Math.sqrt(Math.pow(n.frame.width,2)+Math.pow(n.frame.height,2));return c+e.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?s:f();var v=Math.floor(s*e.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&v%2!==0?this.initialSize=v-1:this.initialSize=v,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},e.prototype.updateLayoutCssVars=function(){var n=e.strings,s=n.VAR_FG_SIZE,f=n.VAR_LEFT,v=n.VAR_TOP,c=n.VAR_FG_SCALE;this.adapter.updateCssVariable(s,this.initialSize+"px"),this.adapter.updateCssVariable(c,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(f,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(v,this.unboundedCoords.top+"px"))},e}(Na);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ed={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},gm={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},hx={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ky=function(o){yo(e,o);function e(n){return o.call(this,_r(_r({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"strings",{get:function(){return hx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return Ed},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return gm},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!1,configurable:!0}),e.prototype.handleTargetScroll=function(){},e.prototype.handleWindowResize=function(){},e.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},e}(Na);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var am=0,H0=function(o){yo(e,o);function e(n){var s=o.call(this,n)||this;return s.wasDocked=!0,s.isDockedShowing=!0,s.currentAppBarOffsetTop=0,s.isCurrentlyBeingResized=!1,s.resizeThrottleId=am,s.resizeDebounceId=am,s.lastScrollPosition=s.adapter.getViewportScrollY(),s.topAppBarHeight=s.adapter.getTopAppBarHeight(),s}return e.prototype.destroy=function(){o.prototype.destroy.call(this),this.adapter.setStyle("top","")},e.prototype.handleTargetScroll=function(){var n=Math.max(this.adapter.getViewportScrollY(),0),s=n-this.lastScrollPosition;this.lastScrollPosition=n,this.isCurrentlyBeingResized||(this.currentAppBarOffsetTop-=s,this.currentAppBarOffsetTop>0?this.currentAppBarOffsetTop=0:Math.abs(this.currentAppBarOffsetTop)>this.topAppBarHeight&&(this.currentAppBarOffsetTop=-this.topAppBarHeight),this.moveTopAppBar())},e.prototype.handleWindowResize=function(){var n=this;this.resizeThrottleId||(this.resizeThrottleId=setTimeout(function(){n.resizeThrottleId=am,n.throttledResizeHandler()},gm.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized=!0,this.resizeDebounceId&&clearTimeout(this.resizeDebounceId),this.resizeDebounceId=setTimeout(function(){n.handleTargetScroll(),n.isCurrentlyBeingResized=!1,n.resizeDebounceId=am},gm.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},e.prototype.checkForUpdate=function(){var n=-this.topAppBarHeight,s=this.currentAppBarOffsetTop<0,f=this.currentAppBarOffsetTop>n,v=s&&f;if(v)this.wasDocked=!1;else if(this.wasDocked){if(this.isDockedShowing!==f)return this.isDockedShowing=f,!0}else return this.wasDocked=!0,!0;return v},e.prototype.moveTopAppBar=function(){if(this.checkForUpdate()){var n=this.currentAppBarOffsetTop;Math.abs(n)>=this.topAppBarHeight&&(n=-gm.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",n+"px")}},e.prototype.throttledResizeHandler=function(){var n=this.adapter.getTopAppBarHeight();this.topAppBarHeight!==n&&(this.wasDocked=!1,this.currentAppBarOffsetTop-=this.topAppBarHeight-n,this.topAppBarHeight=n),this.handleTargetScroll()},e}(ky);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var dx=function(o){yo(e,o);function e(){var n=o!==null&&o.apply(this,arguments)||this;return n.wasScrolled=!1,n}return e.prototype.handleTargetScroll=function(){var n=this.adapter.getViewportScrollY();n<=0?this.wasScrolled&&(this.adapter.removeClass(Ed.FIXED_SCROLLED_CLASS),this.wasScrolled=!1):this.wasScrolled||(this.adapter.addClass(Ed.FIXED_SCROLLED_CLASS),this.wasScrolled=!0)},e}(H0);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var px=function(o){yo(e,o);function e(n){var s=o.call(this,n)||this;return s.collapsed=!1,s.isAlwaysCollapsed=!1,s}return Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this.collapsed},enumerable:!1,configurable:!0}),e.prototype.init=function(){o.prototype.init.call(this),this.adapter.getTotalActionItems()>0&&this.adapter.addClass(Ed.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter.hasClass(Ed.SHORT_COLLAPSED_CLASS))},e.prototype.setAlwaysCollapsed=function(n){this.isAlwaysCollapsed=!!n,this.isAlwaysCollapsed?this.collapse():this.maybeCollapseBar()},e.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed},e.prototype.handleTargetScroll=function(){this.maybeCollapseBar()},e.prototype.maybeCollapseBar=function(){if(!this.isAlwaysCollapsed){var n=this.adapter.getViewportScrollY();n<=0?this.collapsed&&this.uncollapse():this.collapsed||this.collapse()}},e.prototype.uncollapse=function(){this.adapter.removeClass(Ed.SHORT_COLLAPSED_CLASS),this.collapsed=!1},e.prototype.collapse=function(){this.adapter.addClass(Ed.SHORT_COLLAPSED_CLASS),this.collapsed=!0},e}(ky);function wi(o){return Object.entries(o).filter(([e,n])=>e!==""&&n).map(([e])=>e).join(" ")}function Un(o,e,n,s={bubbles:!0},f=!1){if(typeof Event!="undefined"&&o){const v=new CustomEvent(e,Object.assign(Object.assign({},s),{detail:n}));if(o==null||o.dispatchEvent(v),f&&e.startsWith("SMUI")){const c=new CustomEvent(e.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},s),{detail:n}));o==null||o.dispatchEvent(c),c.defaultPrevented&&v.preventDefault()}return v}}function _s(o,e){let n=Object.getOwnPropertyNames(o);const s={};for(let f=0;f<n.length;f++){const v=n[f],c=v.indexOf("$");c!==-1&&e.indexOf(v.substring(0,c+1))!==-1||e.indexOf(v)===-1&&(s[v]=o[v])}return s}const K_=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,fx=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function $n(o){let e,n=[];o.$on=(f,v)=>{let c=f,h=()=>{};return e?h=e(c,v):n.push([c,v]),c.match(K_)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',c),()=>{h()}};function s(f){df(o,f)}return f=>{const v=[],c={};e=(h,S)=>{let P=h,D=S,R=!1;const O=P.match(K_),Y=P.match(fx),ee=O||Y;if(P.match(/^SMUI:\w+:/)){const ve=P.split(":");let se="";for(let we=0;we<ve.length;we++)se+=we===ve.length-1?":"+ve[we]:ve[we].split("-").map(Ge=>Ge.slice(0,1).toUpperCase()+Ge.slice(1)).join("");console.warn(`The event ${P.split("$")[0]} has been renamed to ${se.split("$")[0]}.`),P=se}if(ee){const ve=P.split(O?":":"$");P=ve[0];const se=Object.fromEntries(ve.slice(1).map(we=>[we,!0]));se.passive&&(R=R||{},R.passive=!0),se.nonpassive&&(R=R||{},R.passive=!1),se.capture&&(R=R||{},R.capture=!0),se.once&&(R=R||{},R.once=!0),se.preventDefault&&(D=qb(D)),se.stopPropagation&&(D=Gb(D))}const he=In(f,P,D,R),re=()=>{he();const ve=v.indexOf(re);ve>-1&&v.splice(ve,1)};return v.push(re),P in c||(c[P]=In(f,P,s)),re};for(let h=0;h<n.length;h++)e(n[h][0],n[h][1]);return{destroy:()=>{for(let h=0;h<v.length;h++)v[h]();for(let h of Object.entries(c))h[1]()}}}}function rr(o,e){let n=Object.getOwnPropertyNames(o);const s={};for(let f=0;f<n.length;f++){const v=n[f];v.substring(0,e.length)===e&&(s[v.substring(e.length)]=o[v])}return s}function Hn(o,e){let n=[];if(e)for(let s=0;s<e.length;s++){const f=e[s],v=Array.isArray(f)?f[0]:f;Array.isArray(f)&&f.length>1?n.push(v(o,f[1])):n.push(v(o))}return{update(s){if((s&&s.length||0)!=n.length)throw new Error("You must not change the length of an actions array.");if(s)for(let f=0;f<s.length;f++){const v=n[f];if(v&&v.update){const c=s[f];Array.isArray(c)&&c.length>1?v.update(c[1]):v.update()}}},destroy(){for(let s=0;s<n.length;s++){const f=n[s];f&&f.destroy&&f.destroy()}}}}const{window:J_}=q0;function mx(o){let e,n,s,f,v,c,h;const S=o[22].default,P=mn(S,o,o[21],null);let D=[{class:n=wi(tr({[o[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":o[4]==="short","mdc-top-app-bar--short-collapsed":o[0],"mdc-top-app-bar--fixed":o[4]==="fixed","smui-top-app-bar--static":o[4]==="static","smui-top-app-bar--color-secondary":o[5]==="secondary","mdc-top-app-bar--prominent":o[6],"mdc-top-app-bar--dense":o[7]},o[11]))},{style:s=Object.entries(o[12]).map(Y_).concat([o[3]]).join(" ")},o[15]],R={};for(let O=0;O<D.length;O+=1)R=Ct(R,D[O]);return{c(){e=_i("header"),P&&P.c(),this.h()},l(O){e=vi(O,"HEADER",{class:!0,style:!0});var Y=mi(e);P&&P.l(Y),Y.forEach(Qe),this.h()},h(){di(e,R)},m(O,Y){Ut(O,e,Y),P&&P.m(e,null),o[25](e),v=!0,c||(h=[In(J_,"resize",o[23]),In(J_,"scroll",o[24]),Ei(f=Hn.call(null,e,o[1])),Ei(o[13].call(null,e)),In(e,"SMUITopAppBarIconButton:nav",o[26])],c=!0)},p(O,Y){P&&P.p&&(!v||Y[0]&2097152)&&gn(P,S,O,O[21],v?_n(S,O[21],Y,null):yn(O[21]),null),di(e,R=en(D,[(!v||Y[0]&2293&&n!==(n=wi(tr({[O[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":O[4]==="short","mdc-top-app-bar--short-collapsed":O[0],"mdc-top-app-bar--fixed":O[4]==="fixed","smui-top-app-bar--static":O[4]==="static","smui-top-app-bar--color-secondary":O[5]==="secondary","mdc-top-app-bar--prominent":O[6],"mdc-top-app-bar--dense":O[7]},O[11]))))&&{class:n},(!v||Y[0]&4104&&s!==(s=Object.entries(O[12]).map(Y_).concat([O[3]]).join(" ")))&&{style:s},Y[0]&32768&&O[15]])),f&&Rn(f.update)&&Y[0]&2&&f.update.call(null,O[1])},i(O){v||(rt(P,O),v=!0)},o(O){ft(P,O),v=!1},d(O){O&&Qe(e),P&&P.d(O),o[25](null),c=!1,Tr(h)}}}const Y_=([o,e])=>`${o}: ${e};`;function gx(o,e,n){const s=["use","class","style","variant","color","collapsed","prominent","dense","scrollTarget","getPropStore","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let S=()=>{};function P(ei){return ei===S}let{use:D=[]}=e,{class:R=""}=e,{style:O=""}=e,{variant:Y="standard"}=e,{color:ee="primary"}=e,{collapsed:he=S}=e;const re=!P(he)&&!!he;P(he)&&(he=!1);let{prominent:ve=!1}=e,{dense:se=!1}=e,{scrollTarget:we=void 0}=e,Ge,Ue,He={},fe={},ut,at=Yb({variant:Y,prominent:ve,dense:se},ei=>{n(18,ut=ei)}),je,Fe=Y;Fo(()=>(n(9,Ue=Dt()),Ue.init(),()=>{Ue.destroy()}));function Dt(){const ei={static:ky,short:px,fixed:dx}[Y]||H0;return new ei({hasClass:qe,addClass:Mt,removeClass:li,setStyle:Et,getTopAppBarHeight:()=>Ge.clientHeight,notifyNavigationIconClicked:()=>Un(Ge,"SMUITopAppBar:nav",void 0,void 0,!0),getViewportScrollY:()=>we==null?window.pageYOffset:we.scrollTop,getTotalActionItems:()=>Ge.querySelectorAll(".mdc-top-app-bar__action-item").length})}function qe(ei){return ei in He?He[ei]:wt().classList.contains(ei)}function Mt(ei){He[ei]||n(11,He[ei]=!0,He)}function li(ei){(!(ei in He)||He[ei])&&n(11,He[ei]=!1,He)}function Et(ei,Jt){fe[ei]!=Jt&&(Jt===""||Jt==null?(delete fe[ei],n(12,fe),n(20,Fe),n(4,Y),n(9,Ue)):n(12,fe[ei]=Jt,fe))}function Gt(){Ue&&(Ue.handleTargetScroll(),Y==="short"&&n(0,he="isCollapsed"in Ue&&Ue.isCollapsed))}function Je(){return at}function wt(){return Ge}const Pt=()=>Y!=="short"&&Y!=="fixed"&&Ue&&Ue.handleWindowResize(),ni=()=>we==null&&Gt();function Xt(ei){Zi[ei?"unshift":"push"](()=>{Ge=ei,n(10,Ge)})}const Xi=()=>Ue&&Ue.handleNavigationClick();return o.$$set=ei=>{e=Ct(Ct({},e),Qn(ei)),n(15,f=xi(e,s)),"use"in ei&&n(1,D=ei.use),"class"in ei&&n(2,R=ei.class),"style"in ei&&n(3,O=ei.style),"variant"in ei&&n(4,Y=ei.variant),"color"in ei&&n(5,ee=ei.color),"collapsed"in ei&&n(0,he=ei.collapsed),"prominent"in ei&&n(6,ve=ei.prominent),"dense"in ei&&n(7,se=ei.dense),"scrollTarget"in ei&&n(8,we=ei.scrollTarget),"$$scope"in ei&&n(21,c=ei.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&262352&&ut&&ut({variant:Y,prominent:ve,dense:se}),o.$$.dirty[0]&1049104&&Fe!==Y&&Ue&&(n(20,Fe=Y),Ue.destroy(),n(11,He={}),n(12,fe={}),n(9,Ue=Dt()),Ue.init()),o.$$.dirty[0]&528&&Ue&&Y==="short"&&"setAlwaysCollapsed"in Ue&&Ue.setAlwaysCollapsed(re),o.$$.dirty[0]&524544&&je!==we&&(je&&je.removeEventListener("scroll",Gt),we&&we.addEventListener("scroll",Gt),n(19,je=we))},[he,D,R,O,Y,ee,ve,se,we,Ue,Ge,He,fe,h,Gt,f,Je,wt,ut,je,Fe,c,v,Pt,ni,Xt,Xi]}class yx extends Tn{constructor(e){super(),An(this,e,gx,mx,Sn,{use:1,class:2,style:3,variant:4,color:5,collapsed:0,prominent:6,dense:7,scrollTarget:8,getPropStore:16,getElement:17},null,[-1,-1])}get getPropStore(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function _x(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("div"),h&&h.c(),this.h()},l(D){e=vi(D,"DIV",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function vx(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class Z0 extends Tn{constructor(e){super(),An(this,e,vx,_x,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function bx(o){let e;const n=o[10].default,s=mn(n,o,o[12],null);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v&4096)&&gn(s,n,f,f[12],e?_n(n,f[12],v,null):yn(f[12]),null)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function xx(o){let e,n,s;const f=[{use:[o[7],...o[0]]},{class:wi(tr({[o[1]]:!0,[o[5]]:!0},o[4]))},o[6],o[8]];var v=o[2];function c(h){let S={$$slots:{default:[bx]},$$scope:{ctx:h}};for(let P=0;P<f.length;P+=1)S=Ct(S,f[P]);return{props:S}}return v&&(e=new v(c(o)),o[11](e)),{c(){e&&Ni(e.$$.fragment),n=bn()},l(h){e&&$i(e.$$.fragment,h),n=bn()},m(h,S){e&&Vi(e,h,S),Ut(h,n,S),s=!0},p(h,[S]){const P=S&499?en(f,[S&129&&{use:[h[7],...h[0]]},S&50&&{class:wi(tr({[h[1]]:!0,[h[5]]:!0},h[4]))},S&64&&Xr(h[6]),S&256&&Xr(h[8])]):{};if(S&4096&&(P.$$scope={dirty:S,ctx:h}),v!==(v=h[2])){if(e){Or();const D=e;ft(D.$$.fragment,1,0,()=>{ji(D,1)}),Rr()}v?(e=new v(c(h)),h[11](e),Ni(e.$$.fragment),rt(e.$$.fragment,1),Vi(e,n.parentNode,n)):e=null}else v&&e.$set(P)},i(h){s||(e&&rt(e.$$.fragment,h),s=!0)},o(h){e&&ft(e.$$.fragment,h),s=!1},d(h){o[11](null),h&&Qe(n),e&&ji(e,h)}}}const Dh={component:Z0,class:"",classMap:{},contexts:{},props:{}};function wx(o,e,n){const s=["use","class","component","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e,{class:S=""}=e,P;const D=Dh.class,R={},O=[],Y=Dh.contexts,ee=Dh.props;let{component:he=Dh.component}=e;Object.entries(Dh.classMap).forEach(([we,Ge])=>{const Ue=Dr(Ge);Ue&&"subscribe"in Ue&&O.push(Ue.subscribe(He=>{n(4,R[we]=He,R)}))});const re=$n(Yn());for(let we in Y)Y.hasOwnProperty(we)&&sr(we,Y[we]);eh(()=>{for(const we of O)we()});function ve(){return P.getElement()}function se(we){Zi[we?"unshift":"push"](()=>{P=we,n(3,P)})}return o.$$set=we=>{e=Ct(Ct({},e),Qn(we)),n(8,f=xi(e,s)),"use"in we&&n(0,h=we.use),"class"in we&&n(1,S=we.class),"component"in we&&n(2,he=we.component),"$$scope"in we&&n(12,c=we.$$scope)},[h,S,he,P,R,D,ee,re,f,ve,v,se,c]}class Ex extends Tn{constructor(e){super(),An(this,e,wx,xx,Sn,{use:0,class:1,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const Q_=Object.assign({},Dh);function ns(o){return new Proxy(Ex,{construct:function(e,n){return Object.assign(Dh,Q_,o),new e(...n)},get:function(e,n){return Object.assign(Dh,Q_,o),e[n]}})}function Ix(o){let e,n,s,f,v;const c=o[7].default,h=mn(c,o,o[6],null);let S=[{href:o[1]},o[4]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("a"),h&&h.c(),this.h()},l(D){e=vi(D,"A",{href:!0});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[8](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[3].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&64)&&gn(h,c,D,D[6],s?_n(c,D[6],R,null):yn(D[6]),null),di(e,P=en(S,[(!s||R&2)&&{href:D[1]},R&16&&D[4]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[8](null),f=!1,Tr(v)}}}function Sx(o,e,n){const s=["use","href","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e,{href:S="javascript:void(0);"}=e;const P=$n(Yn());let D;function R(){return D}function O(Y){Zi[Y?"unshift":"push"](()=>{D=Y,n(2,D)})}return o.$$set=Y=>{e=Ct(Ct({},e),Qn(Y)),n(4,f=xi(e,s)),"use"in Y&&n(0,h=Y.use),"href"in Y&&n(1,S=Y.href),"$$scope"in Y&&n(6,c=Y.$$scope)},[h,S,D,P,f,R,c,v,O]}class Tx extends Tn{constructor(e){super(),An(this,e,Sx,Ix,Sn,{use:0,href:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function Ax(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("button"),h&&h.c(),this.h()},l(D){e=vi(D,"BUTTON",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),e.autofocus&&e.focus(),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function Cx(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class kx extends Tn{constructor(e){super(),An(this,e,Cx,Ax,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Mx(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("h1"),h&&h.c(),this.h()},l(D){e=vi(D,"H1",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function Lx(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class Px extends Tn{constructor(e){super(),An(this,e,Lx,Mx,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function zx(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("h2"),h&&h.c(),this.h()},l(D){e=vi(D,"H2",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function Dx(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class Rx extends Tn{constructor(e){super(),An(this,e,Dx,zx,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Ox(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("h3"),h&&h.c(),this.h()},l(D){e=vi(D,"H3",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function Bx(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class Fx extends Tn{constructor(e){super(),An(this,e,Bx,Ox,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Ux(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("h5"),h&&h.c(),this.h()},l(D){e=vi(D,"H5",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function Nx(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class Vx extends Tn{constructor(e){super(),An(this,e,Nx,Ux,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function jx(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("h6"),h&&h.c(),this.h()},l(D){e=vi(D,"H6",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function qx(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class Gx extends Tn{constructor(e){super(),An(this,e,qx,jx,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Hx(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("i"),h&&h.c(),this.h()},l(D){e=vi(D,"I",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function Zx(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class Wx extends Tn{constructor(e){super(),An(this,e,Zx,Hx,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Xx(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("li"),h&&h.c(),this.h()},l(D){e=vi(D,"LI",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function Kx(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class Jx extends Tn{constructor(e){super(),An(this,e,Kx,Xx,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Yx(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("main"),h&&h.c(),this.h()},l(D){e=vi(D,"MAIN",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function Qx(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class $x extends Tn{constructor(e){super(),An(this,e,Qx,Yx,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function ew(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("nav"),h&&h.c(),this.h()},l(D){e=vi(D,"NAV",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function tw(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class iw extends Tn{constructor(e){super(),An(this,e,tw,ew,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function nw(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("span"),h&&h.c(),this.h()},l(D){e=vi(D,"SPAN",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function rw(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class W0 extends Tn{constructor(e){super(),An(this,e,rw,nw,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function ow(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=Kl("svg"),h&&h.c(),this.h()},l(D){e=Jl(D,"svg",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){j_(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),j_(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function aw(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class $_ extends Tn{constructor(e){super(),An(this,e,aw,ow,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function sw(o){let e,n,s,f,v;const c=o[6].default,h=mn(c,o,o[5],null);let S=[o[3]],P={};for(let D=0;D<S.length;D+=1)P=Ct(P,S[D]);return{c(){e=_i("ul"),h&&h.c(),this.h()},l(D){e=vi(D,"UL",{});var R=mi(e);h&&h.l(R),R.forEach(Qe),this.h()},h(){di(e,P)},m(D,R){Ut(D,e,R),h&&h.m(e,null),o[7](e),s=!0,f||(v=[Ei(n=Hn.call(null,e,o[0])),Ei(o[2].call(null,e))],f=!0)},p(D,[R]){h&&h.p&&(!s||R&32)&&gn(h,c,D,D[5],s?_n(c,D[5],R,null):yn(D[5]),null),di(e,P=en(S,[R&8&&D[3]])),n&&Rn(n.update)&&R&1&&n.update.call(null,D[0])},i(D){s||(rt(h,D),s=!0)},o(D){ft(h,D),s=!1},d(D){D&&Qe(e),h&&h.d(D),o[7](null),f=!1,Tr(v)}}}function lw(o,e,n){const s=["use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e,{use:h=[]}=e;const S=$n(Yn());let P;function D(){return P}function R(O){Zi[O?"unshift":"push"](()=>{P=O,n(1,P)})}return o.$$set=O=>{e=Ct(Ct({},e),Qn(O)),n(3,f=xi(e,s)),"use"in O&&n(0,h=O.use),"$$scope"in O&&n(5,c=O.$$scope)},[h,P,S,f,D,c,v,R]}class uw extends Tn{constructor(e){super(),An(this,e,lw,sw,Sn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const My=Tx,X0=kx,yp=Z0,cw=Px,hw=Rx,dw=Fx,pw=Vx,fw=Gx,mw=Jx,gw=$x,yw=iw,_p=W0,_w=uw;var vw=ns({class:"mdc-top-app-bar__row",component:yp});function bw(o){let e,n,s,f,v,c;const h=o[9].default,S=mn(h,o,o[8],null);let P=[{class:n=wi({[o[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":o[2]==="start","mdc-top-app-bar__section--align-end":o[2]==="end"})},o[3]?{role:"toolbar"}:{},o[6]],D={};for(let R=0;R<P.length;R+=1)D=Ct(D,P[R]);return{c(){e=_i("section"),S&&S.c(),this.h()},l(R){e=vi(R,"SECTION",{class:!0});var O=mi(e);S&&S.l(O),O.forEach(Qe),this.h()},h(){di(e,D)},m(R,O){Ut(R,e,O),S&&S.m(e,null),o[10](e),f=!0,v||(c=[Ei(s=Hn.call(null,e,o[0])),Ei(o[5].call(null,e))],v=!0)},p(R,[O]){S&&S.p&&(!f||O&256)&&gn(S,h,R,R[8],f?_n(h,R[8],O,null):yn(R[8]),null),di(e,D=en(P,[(!f||O&6&&n!==(n=wi({[R[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":R[2]==="start","mdc-top-app-bar__section--align-end":R[2]==="end"})))&&{class:n},O&8&&(R[3]?{role:"toolbar"}:{}),O&64&&R[6]])),s&&Rn(s.update)&&O&1&&s.update.call(null,R[0])},i(R){f||(rt(S,R),f=!0)},o(R){ft(S,R),f=!1},d(R){R&&Qe(e),S&&S.d(R),o[10](null),v=!1,Tr(c)}}}function xw(o,e,n){const s=["use","class","align","toolbar","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,{align:D="start"}=e,{toolbar:R=!1}=e,O;sr("SMUI:icon-button:context",R?"top-app-bar:action":"top-app-bar:navigation"),sr("SMUI:button:context",R?"top-app-bar:action":"top-app-bar:navigation");function Y(){return O}function ee(he){Zi[he?"unshift":"push"](()=>{O=he,n(4,O)})}return o.$$set=he=>{e=Ct(Ct({},e),Qn(he)),n(6,f=xi(e,s)),"use"in he&&n(0,S=he.use),"class"in he&&n(1,P=he.class),"align"in he&&n(2,D=he.align),"toolbar"in he&&n(3,R=he.toolbar),"$$scope"in he&&n(8,c=he.$$scope)},[S,P,D,R,O,h,f,Y,c,v,ee]}class ww extends Tn{constructor(e){super(),An(this,e,xw,bw,Sn,{use:0,class:1,align:2,toolbar:3,getElement:7})}get getElement(){return this.$$.ctx[7]}}var Ew=ns({class:"mdc-top-app-bar__title",component:_p});function Iw(o){let e;const n=o[11].default,s=mn(n,o,o[13],null);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v&8192)&&gn(s,n,f,f[13],e?_n(n,f[13],v,null):yn(f[13]),null)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function Sw(o){let e,n,s;const f=[{use:[o[6],...o[0]]},{class:wi({[o[1]]:!0,[o[5]]:!0})},o[7]];var v=o[2];function c(h){let S={$$slots:{default:[Iw]},$$scope:{ctx:h}};for(let P=0;P<f.length;P+=1)S=Ct(S,f[P]);return{props:S}}return v&&(e=new v(c(o)),o[12](e)),{c(){e&&Ni(e.$$.fragment),n=bn()},l(h){e&&$i(e.$$.fragment,h),n=bn()},m(h,S){e&&Vi(e,h,S),Ut(h,n,S),s=!0},p(h,[S]){const P=S&227?en(f,[S&65&&{use:[h[6],...h[0]]},S&34&&{class:wi({[h[1]]:!0,[h[5]]:!0})},S&128&&Xr(h[7])]):{};if(S&8192&&(P.$$scope={dirty:S,ctx:h}),v!==(v=h[2])){if(e){Or();const D=e;ft(D.$$.fragment,1,0,()=>{ji(D,1)}),Rr()}v?(e=new v(c(h)),h[12](e),Ni(e.$$.fragment),rt(e.$$.fragment,1),Vi(e,n.parentNode,n)):e=null}else v&&e.$set(P)},i(h){s||(e&&rt(e.$$.fragment,h),s=!0)},o(h){e&&ft(e.$$.fragment,h),s=!1},d(h){o[12](null),h&&Qe(n),e&&ji(e,h)}}}function Tw(o,e,n){let s,f;const v=["use","class","topAppBar","component","getElement"];let c=xi(e,v),h,S=Yo,P=()=>(S(),S=Hb(s,Ge=>n(10,h=Ge)),s);o.$$.on_destroy.push(()=>S());let{$$slots:D={},$$scope:R}=e;const O=$n(Yn());let{use:Y=[]}=e,{class:ee=""}=e,{topAppBar:he}=e,re,{component:ve=gw}=e;function se(){return re.getElement()}function we(Ge){Zi[Ge?"unshift":"push"](()=>{re=Ge,n(4,re)})}return o.$$set=Ge=>{e=Ct(Ct({},e),Qn(Ge)),n(7,c=xi(e,v)),"use"in Ge&&n(0,Y=Ge.use),"class"in Ge&&n(1,ee=Ge.class),"topAppBar"in Ge&&n(8,he=Ge.topAppBar),"component"in Ge&&n(2,ve=Ge.component),"$$scope"in Ge&&n(13,R=Ge.$$scope)},o.$$.update=()=>{o.$$.dirty&256&&P(n(3,s=he&&he.getPropStore())),o.$$.dirty&1032&&n(5,f=(()=>!s||h.variant==="static"?"":h.variant==="short"?"mdc-top-app-bar--short-fixed-adjust":h.prominent&&h.dense?"mdc-top-app-bar--dense-prominent-fixed-adjust":h.prominent?"mdc-top-app-bar--prominent-fixed-adjust":h.dense?"mdc-top-app-bar--dense-fixed-adjust":"mdc-top-app-bar--fixed-adjust")())},[Y,ee,ve,s,re,f,O,c,he,se,h,D,we,R]}class Aw extends Tn{constructor(e){super(),An(this,e,Tw,Sw,Sn,{use:0,class:1,topAppBar:8,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const ev=ww,Cw=Aw;/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var sm={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},Kc={ARIA_LABEL:"aria-label",ARIA_PRESSED:"aria-pressed",DATA_ARIA_LABEL_OFF:"data-aria-label-off",DATA_ARIA_LABEL_ON:"data-aria-label-on",CHANGE_EVENT:"MDCIconButtonToggle:change"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var kw=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.hasToggledAriaLabel=!1,s}return Object.defineProperty(e,"cssClasses",{get:function(){return sm},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Kc},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},getAttr:function(){return null},setAttr:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=this.adapter.getAttr(Kc.DATA_ARIA_LABEL_ON),s=this.adapter.getAttr(Kc.DATA_ARIA_LABEL_OFF);if(n&&s){if(this.adapter.getAttr(Kc.ARIA_PRESSED)!==null)throw new Error("MDCIconButtonToggleFoundation: Button should not set `aria-pressed` if it has a toggled aria label.");this.hasToggledAriaLabel=!0}else this.adapter.setAttr(Kc.ARIA_PRESSED,String(this.isOn()))},e.prototype.handleClick=function(){this.toggle(),this.adapter.notifyChange({isOn:this.isOn()})},e.prototype.isOn=function(){return this.adapter.hasClass(sm.ICON_BUTTON_ON)},e.prototype.toggle=function(n){if(n===void 0&&(n=!this.isOn()),n?this.adapter.addClass(sm.ICON_BUTTON_ON):this.adapter.removeClass(sm.ICON_BUTTON_ON),this.hasToggledAriaLabel){var s=n?this.adapter.getAttr(Kc.DATA_ARIA_LABEL_ON):this.adapter.getAttr(Kc.DATA_ARIA_LABEL_OFF);this.adapter.setAttr(Kc.ARIA_LABEL,s||"")}else this.adapter.setAttr(Kc.ARIA_PRESSED,""+n)},e}(Na);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Zg="mdc-dom-focus-sentinel",Mw=function(){function o(e,n){n===void 0&&(n={}),this.root=e,this.options=n,this.elFocusedBeforeTrapFocus=null}return o.prototype.trapFocus=function(){var e=this.getFocusableElements(this.root);if(e.length===0)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root),this.options.skipInitialFocus||this.focusInitialElement(e,this.options.initialFocusEl)},o.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+Zg)).forEach(function(e){e.parentElement.removeChild(e)}),!this.options.skipRestoreFocus&&this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},o.prototype.wrapTabFocus=function(e){var n=this,s=this.createSentinel(),f=this.createSentinel();s.addEventListener("focus",function(){var v=n.getFocusableElements(e);v.length>0&&v[v.length-1].focus()}),f.addEventListener("focus",function(){var v=n.getFocusableElements(e);v.length>0&&v[0].focus()}),e.insertBefore(s,e.children[0]),e.appendChild(f)},o.prototype.focusInitialElement=function(e,n){var s=0;n&&(s=Math.max(e.indexOf(n),0)),e[s].focus()},o.prototype.getFocusableElements=function(e){var n=[].slice.call(e.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button"));return n.filter(function(s){var f=s.getAttribute("aria-disabled")==="true"||s.getAttribute("disabled")!=null||s.getAttribute("hidden")!=null||s.getAttribute("aria-hidden")==="true",v=s.tabIndex>=0&&s.getBoundingClientRect().width>0&&!s.classList.contains(Zg)&&!f,c=!1;if(v){var h=getComputedStyle(s);c=h.display==="none"||h.visibility==="hidden"}return v&&!c})},o.prototype.createSentinel=function(){var e=document.createElement("div");return e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","true"),e.classList.add(Zg),e},o}(),Lw=Object.freeze(Object.defineProperty({__proto__:null,FocusTrap:Mw},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var yr={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},Fs=new Set;Fs.add(yr.BACKSPACE);Fs.add(yr.ENTER);Fs.add(yr.SPACEBAR);Fs.add(yr.PAGE_UP);Fs.add(yr.PAGE_DOWN);Fs.add(yr.END);Fs.add(yr.HOME);Fs.add(yr.ARROW_LEFT);Fs.add(yr.ARROW_UP);Fs.add(yr.ARROW_RIGHT);Fs.add(yr.ARROW_DOWN);Fs.add(yr.DELETE);Fs.add(yr.ESCAPE);Fs.add(yr.TAB);var rl={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Us=new Map;Us.set(rl.BACKSPACE,yr.BACKSPACE);Us.set(rl.ENTER,yr.ENTER);Us.set(rl.SPACEBAR,yr.SPACEBAR);Us.set(rl.PAGE_UP,yr.PAGE_UP);Us.set(rl.PAGE_DOWN,yr.PAGE_DOWN);Us.set(rl.END,yr.END);Us.set(rl.HOME,yr.HOME);Us.set(rl.ARROW_LEFT,yr.ARROW_LEFT);Us.set(rl.ARROW_UP,yr.ARROW_UP);Us.set(rl.ARROW_RIGHT,yr.ARROW_RIGHT);Us.set(rl.ARROW_DOWN,yr.ARROW_DOWN);Us.set(rl.DELETE,yr.DELETE);Us.set(rl.ESCAPE,yr.ESCAPE);Us.set(rl.TAB,yr.TAB);var Vh=new Set;Vh.add(yr.PAGE_UP);Vh.add(yr.PAGE_DOWN);Vh.add(yr.END);Vh.add(yr.HOME);Vh.add(yr.ARROW_LEFT);Vh.add(yr.ARROW_UP);Vh.add(yr.ARROW_RIGHT);Vh.add(yr.ARROW_DOWN);function Ca(o){var e=o.key;if(Fs.has(e))return e;var n=Us.get(o.keyCode);return n||yr.UNKNOWN}const{applyPassive:lm}=nx,{matches:Pw}=yf;function $c(o,{ripple:e=!0,surface:n=!1,unbounded:s=!1,disabled:f=!1,color:v,active:c,rippleElement:h,eventTarget:S,activeTarget:P,addClass:D=ee=>o.classList.add(ee),removeClass:R=ee=>o.classList.remove(ee),addStyle:O=(ee,he)=>o.style.setProperty(ee,he),initPromise:Y=Promise.resolve()}={}){let ee,he=Dr("SMUI:addLayoutListener"),re,ve=c,se=S,we=P;function Ge(){n?(D("mdc-ripple-surface"),v==="primary"?(D("smui-ripple-surface--primary"),R("smui-ripple-surface--secondary")):v==="secondary"?(R("smui-ripple-surface--primary"),D("smui-ripple-surface--secondary")):(R("smui-ripple-surface--primary"),R("smui-ripple-surface--secondary"))):(R("mdc-ripple-surface"),R("smui-ripple-surface--primary"),R("smui-ripple-surface--secondary")),ee&&ve!==c&&(ve=c,c?ee.activate():c===!1&&ee.deactivate()),e&&!ee?(ee=new cx({addClass:D,browserSupportsCssVars:()=>lx(window),computeBoundingRect:()=>(h||o).getBoundingClientRect(),containsEventTarget:He=>o.contains(He),deregisterDocumentInteractionHandler:(He,fe)=>document.documentElement.removeEventListener(He,fe,lm()),deregisterInteractionHandler:(He,fe)=>(S||o).removeEventListener(He,fe,lm()),deregisterResizeHandler:He=>window.removeEventListener("resize",He),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>c==null?Pw(P||o,":active"):c,isSurfaceDisabled:()=>!!f,isUnbounded:()=>!!s,registerDocumentInteractionHandler:(He,fe)=>document.documentElement.addEventListener(He,fe,lm()),registerInteractionHandler:(He,fe)=>(S||o).addEventListener(He,fe,lm()),registerResizeHandler:He=>window.addEventListener("resize",He),removeClass:R,updateCssVariable:O}),Y.then(()=>{ee&&(ee.init(),ee.setUnbounded(s))})):ee&&!e&&Y.then(()=>{ee&&(ee.destroy(),ee=void 0)}),ee&&(se!==S||we!==P)&&(se=S,we=P,ee.destroy(),requestAnimationFrame(()=>{ee&&(ee.init(),ee.setUnbounded(s))})),!e&&s&&D("mdc-ripple-upgraded--unbounded")}Ge(),he&&(re=he(Ue));function Ue(){ee&&ee.layout()}return{update(He){({ripple:e,surface:n,unbounded:s,disabled:f,color:v,active:c,rippleElement:h,eventTarget:S,activeTarget:P,addClass:D,removeClass:R,addStyle:O,initPromise:Y}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:fe=>o.classList.add(fe),removeClass:fe=>o.classList.remove(fe),addStyle:(fe,ut)=>o.style.setProperty(fe,ut),initPromise:Promise.resolve()},He)),Ge()},destroy(){ee&&(ee.destroy(),ee=void 0,R("mdc-ripple-surface"),R("smui-ripple-surface--primary"),R("smui-ripple-surface--secondary")),re&&re()}}}function tv(o){let e;return{c(){e=_i("div"),this.h()},l(n){e=vi(n,"DIV",{class:!0}),mi(e).forEach(Qe),this.h()},h(){ii(e,"class","mdc-icon-button__touch")},m(n,s){Ut(n,e,s)},d(n){n&&Qe(e)}}}function zw(o){let e,n,s,f;const v=o[32].default,c=mn(v,o,o[36],null);let h=o[8]&&tv();return{c(){e=_i("div"),n=qn(),c&&c.c(),h&&h.c(),s=bn(),this.h()},l(S){e=vi(S,"DIV",{class:!0}),mi(e).forEach(Qe),n=Gn(S),c&&c.l(S),h&&h.l(S),s=bn(),this.h()},h(){ii(e,"class","mdc-icon-button__ripple")},m(S,P){Ut(S,e,P),Ut(S,n,P),c&&c.m(S,P),h&&h.m(S,P),Ut(S,s,P),f=!0},p(S,P){c&&c.p&&(!f||P[1]&32)&&gn(c,v,S,S[36],f?_n(v,S[36],P,null):yn(S[36]),null),S[8]?h||(h=tv(),h.c(),h.m(s.parentNode,s)):h&&(h.d(1),h=null)},i(S){f||(rt(c,S),f=!0)},o(S){ft(c,S),f=!1},d(S){S&&Qe(e),S&&Qe(n),c&&c.d(S),h&&h.d(S),S&&Qe(s)}}}function Dw(o){let e,n,s;const f=[{use:[[$c,{ripple:o[4],unbounded:!0,color:o[5],disabled:!!o[28].disabled,addClass:o[25],removeClass:o[26],addStyle:o[27]}],o[21],...o[1]]},{class:wi(tr({[o[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!o[22](o[0])&&o[0],"mdc-icon-button--touch":o[8],"mdc-icon-button--display-flex":o[9],"smui-icon-button--size-button":o[10]==="button","mdc-icon-button--reduced-size":o[10]==="mini"||o[10]==="button","mdc-card__action":o[23]==="card:action","mdc-card__action--icon":o[23]==="card:action","mdc-top-app-bar__navigation-icon":o[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":o[23]==="top-app-bar:action","mdc-snackbar__dismiss":o[23]==="snackbar:actions","mdc-data-table__pagination-button":o[23]==="data-table:pagination","mdc-data-table__sort-icon-button":o[23]==="data-table:sortable-header-cell","mdc-dialog__close":o[23]==="dialog:header"&&o[12]==="close"},o[17]))},{style:Object.entries(o[18]).map(iv).concat([o[3]]).join(" ")},{"aria-pressed":o[22](o[0])?null:o[0]?"true":"false"},{"aria-label":o[0]?o[6]:o[7]},{"data-aria-label-on":o[6]},{"data-aria-label-off":o[7]},{"aria-describedby":o[24]},{href:o[11]},o[20],o[19],o[28]];var v=o[13];function c(h){let S={$$slots:{default:[zw]},$$scope:{ctx:h}};for(let P=0;P<f.length;P+=1)S=Ct(S,f[P]);return{props:S}}return v&&(e=new v(c(o)),o[33](e),e.$on("click",o[34]),e.$on("click",o[35])),{c(){e&&Ni(e.$$.fragment),n=bn()},l(h){e&&$i(e.$$.fragment,h),n=bn()},m(h,S){e&&Vi(e,h,S),Ut(h,n,S),s=!0},p(h,S){const P=S[0]&536748031?en(f,[S[0]&505413682&&{use:[[$c,{ripple:h[4],unbounded:!0,color:h[5],disabled:!!h[28].disabled,addClass:h[25],removeClass:h[26],addStyle:h[27]}],h[21],...h[1]]},S[0]&12719877&&{class:wi(tr({[h[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!h[22](h[0])&&h[0],"mdc-icon-button--touch":h[8],"mdc-icon-button--display-flex":h[9],"smui-icon-button--size-button":h[10]==="button","mdc-icon-button--reduced-size":h[10]==="mini"||h[10]==="button","mdc-card__action":h[23]==="card:action","mdc-card__action--icon":h[23]==="card:action","mdc-top-app-bar__navigation-icon":h[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":h[23]==="top-app-bar:action","mdc-snackbar__dismiss":h[23]==="snackbar:actions","mdc-data-table__pagination-button":h[23]==="data-table:pagination","mdc-data-table__sort-icon-button":h[23]==="data-table:sortable-header-cell","mdc-dialog__close":h[23]==="dialog:header"&&h[12]==="close"},h[17]))},S[0]&262152&&{style:Object.entries(h[18]).map(iv).concat([h[3]]).join(" ")},S[0]&4194305&&{"aria-pressed":h[22](h[0])?null:h[0]?"true":"false"},S[0]&193&&{"aria-label":h[0]?h[6]:h[7]},S[0]&64&&{"data-aria-label-on":h[6]},S[0]&128&&{"data-aria-label-off":h[7]},S[0]&16777216&&{"aria-describedby":h[24]},S[0]&2048&&{href:h[11]},S[0]&1048576&&Xr(h[20]),S[0]&524288&&Xr(h[19]),S[0]&268435456&&Xr(h[28])]):{};if(S[0]&256|S[1]&32&&(P.$$scope={dirty:S,ctx:h}),v!==(v=h[13])){if(e){Or();const D=e;ft(D.$$.fragment,1,0,()=>{ji(D,1)}),Rr()}v?(e=new v(c(h)),h[33](e),e.$on("click",h[34]),e.$on("click",h[35]),Ni(e.$$.fragment),rt(e.$$.fragment,1),Vi(e,n.parentNode,n)):e=null}else v&&e.$set(P)},i(h){s||(e&&rt(e.$$.fragment,h),s=!0)},o(h){e&&ft(e.$$.fragment,h),s=!1},d(h){o[33](null),h&&Qe(n),e&&ji(e,h)}}}const iv=([o,e])=>`${o}: ${e};`;function Rw(o,e,n){let s;const f=["use","class","style","ripple","color","toggle","pressed","ariaLabelOn","ariaLabelOff","touch","displayFlex","size","href","action","component","getElement"];let v=xi(e,f),{$$slots:c={},$$scope:h}=e;const S=$n(Yn());let P=()=>{};function D(St){return St===P}let{use:R=[]}=e,{class:O=""}=e,{style:Y=""}=e,{ripple:ee=!0}=e,{color:he=void 0}=e,{toggle:re=!1}=e,{pressed:ve=P}=e,{ariaLabelOn:se=void 0}=e,{ariaLabelOff:we=void 0}=e,{touch:Ge=!1}=e,{displayFlex:Ue=!0}=e,{size:He="normal"}=e,{href:fe=void 0}=e,{action:ut=void 0}=e,at,je,Fe={},Dt={},qe={},Mt=Dr("SMUI:icon-button:context"),li=Dr("SMUI:icon-button:aria-describedby"),{component:Et=fe==null?X0:My}=e,Gt=v.disabled;sr("SMUI:icon:context","icon-button");let Je=null;eh(()=>{je&&je.destroy()});function wt(St){return St in Fe?Fe[St]:bi().classList.contains(St)}function Pt(St){Fe[St]||n(17,Fe[St]=!0,Fe)}function ni(St){(!(St in Fe)||Fe[St])&&n(17,Fe[St]=!1,Fe)}function Xt(St,Ji){Dt[St]!=Ji&&(Ji===""||Ji==null?(delete Dt[St],n(18,Dt)):n(18,Dt[St]=Ji,Dt))}function Xi(St){var Ji;return St in qe?(Ji=qe[St])!==null&&Ji!==void 0?Ji:null:bi().getAttribute(St)}function ei(St,Ji){qe[St]!==Ji&&n(19,qe[St]=Ji,qe)}function Jt(St){n(0,ve=St.isOn)}function bi(){return at.getElement()}function ai(St){Zi[St?"unshift":"push"](()=>{at=St,n(15,at)})}const ht=()=>je&&je.handleClick(),It=()=>Mt==="top-app-bar:navigation"&&Un(bi(),"SMUITopAppBarIconButton:nav");return o.$$set=St=>{e=Ct(Ct({},e),Qn(St)),n(28,v=xi(e,f)),"use"in St&&n(1,R=St.use),"class"in St&&n(2,O=St.class),"style"in St&&n(3,Y=St.style),"ripple"in St&&n(4,ee=St.ripple),"color"in St&&n(5,he=St.color),"toggle"in St&&n(29,re=St.toggle),"pressed"in St&&n(0,ve=St.pressed),"ariaLabelOn"in St&&n(6,se=St.ariaLabelOn),"ariaLabelOff"in St&&n(7,we=St.ariaLabelOff),"touch"in St&&n(8,Ge=St.touch),"displayFlex"in St&&n(9,Ue=St.displayFlex),"size"in St&&n(10,He=St.size),"href"in St&&n(11,fe=St.href),"action"in St&&n(12,ut=St.action),"component"in St&&n(13,Et=St.component),"$$scope"in St&&n(36,h=St.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&4096&&n(20,s=(()=>{if(Mt==="data-table:pagination")switch(ut){case"first-page":return{"data-first-page":"true"};case"prev-page":return{"data-prev-page":"true"};case"next-page":return{"data-next-page":"true"};case"last-page":return{"data-last-page":"true"};default:return{"data-action":"true"}}else return Mt==="dialog:header"?{"data-mdc-dialog-action":ut}:{action:ut}})()),Gt!==v.disabled){const St=bi();"blur"in St&&St.blur(),n(30,Gt=v.disabled)}o.$$.dirty[0]&536969216|o.$$.dirty[1]&1&&at&&bi()&&re!==Je&&(re&&!je?(n(16,je=new kw({addClass:Pt,hasClass:wt,notifyChange:St=>{Jt(St),Un(bi(),"SMUIIconButtonToggle:change",St,void 0,!0)},removeClass:ni,getAttr:Xi,setAttr:ei})),je.init()):!re&&je&&(je.destroy(),n(16,je=void 0),n(17,Fe={}),n(19,qe={})),n(31,Je=re)),o.$$.dirty[0]&65537&&je&&!D(ve)&&je.isOn()!==ve&&je.toggle(ve)},[ve,R,O,Y,ee,he,se,we,Ge,Ue,He,fe,ut,Et,bi,at,je,Fe,Dt,qe,s,S,D,Mt,li,Pt,ni,Xt,v,re,Gt,Je,c,ai,ht,It,h]}class xm extends Tn{constructor(e){super(),An(this,e,Rw,Dw,Sn,{use:1,class:2,style:3,ripple:4,color:5,toggle:29,pressed:0,ariaLabelOn:6,ariaLabelOff:7,touch:8,displayFlex:9,size:10,href:11,action:12,component:13,getElement:14},null,[-1,-1])}get getElement(){return this.$$.ctx[14]}}function Ow(o){let e;const n=o[9].default,s=mn(n,o,o[11],null);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v&2048)&&gn(s,n,f,f[11],e?_n(n,f[11],v,null):yn(f[11]),null)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function Bw(o){let e,n,s;const f=[{use:[o[4],...o[0]]},{class:wi({[o[1]]:!0,"mdc-button__label":o[5]==="button","mdc-fab__label":o[5]==="fab","mdc-tab__text-label":o[5]==="tab","mdc-image-list__label":o[5]==="image-list","mdc-snackbar__label":o[5]==="snackbar","mdc-banner__text":o[5]==="banner","mdc-segmented-button__label":o[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":o[5]==="data-table:pagination","mdc-data-table__header-cell-label":o[5]==="data-table:sortable-header-cell"})},o[5]==="snackbar"?{"aria-atomic":"false"}:{},{tabindex:o[6]},o[7]];var v=o[2];function c(h){let S={$$slots:{default:[Ow]},$$scope:{ctx:h}};for(let P=0;P<f.length;P+=1)S=Ct(S,f[P]);return{props:S}}return v&&(e=new v(c(o)),o[10](e)),{c(){e&&Ni(e.$$.fragment),n=bn()},l(h){e&&$i(e.$$.fragment,h),n=bn()},m(h,S){e&&Vi(e,h,S),Ut(h,n,S),s=!0},p(h,[S]){const P=S&243?en(f,[S&17&&{use:[h[4],...h[0]]},S&34&&{class:wi({[h[1]]:!0,"mdc-button__label":h[5]==="button","mdc-fab__label":h[5]==="fab","mdc-tab__text-label":h[5]==="tab","mdc-image-list__label":h[5]==="image-list","mdc-snackbar__label":h[5]==="snackbar","mdc-banner__text":h[5]==="banner","mdc-segmented-button__label":h[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":h[5]==="data-table:pagination","mdc-data-table__header-cell-label":h[5]==="data-table:sortable-header-cell"})},S&32&&Xr(h[5]==="snackbar"?{"aria-atomic":"false"}:{}),S&64&&{tabindex:h[6]},S&128&&Xr(h[7])]):{};if(S&2048&&(P.$$scope={dirty:S,ctx:h}),v!==(v=h[2])){if(e){Or();const D=e;ft(D.$$.fragment,1,0,()=>{ji(D,1)}),Rr()}v?(e=new v(c(h)),h[10](e),Ni(e.$$.fragment),rt(e.$$.fragment,1),Vi(e,n.parentNode,n)):e=null}else v&&e.$set(P)},i(h){s||(e&&rt(e.$$.fragment,h),s=!0)},o(h){e&&ft(e.$$.fragment,h),s=!1},d(h){o[10](null),h&&Qe(n),e&&ji(e,h)}}}function Fw(o,e,n){const s=["use","class","component","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,D,{component:R=W0}=e;const O=Dr("SMUI:label:context"),Y=Dr("SMUI:label:tabindex");function ee(){return D.getElement()}function he(re){Zi[re?"unshift":"push"](()=>{D=re,n(3,D)})}return o.$$set=re=>{e=Ct(Ct({},e),Qn(re)),n(7,f=xi(e,s)),"use"in re&&n(0,S=re.use),"class"in re&&n(1,P=re.class),"component"in re&&n(2,R=re.component),"$$scope"in re&&n(11,c=re.$$scope)},[S,P,R,D,h,O,Y,f,ee,v,he,c]}class Uw extends Tn{constructor(e){super(),An(this,e,Fw,Bw,Sn,{use:0,class:1,component:2,getElement:8})}get getElement(){return this.$$.ctx[8]}}function Nw(o){let e;const n=o[9].default,s=mn(n,o,o[11],null);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v&2048)&&gn(s,n,f,f[11],e?_n(n,f[11],v,null):yn(f[11]),null)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function Vw(o){let e,n,s;const f=[{use:[o[5],...o[0]]},{class:wi({[o[1]]:!0,"mdc-button__icon":o[6]==="button","mdc-fab__icon":o[6]==="fab","mdc-icon-button__icon":o[6]==="icon-button","mdc-icon-button__icon--on":o[6]==="icon-button"&&o[2],"mdc-tab__icon":o[6]==="tab","mdc-banner__icon":o[6]==="banner","mdc-segmented-button__icon":o[6]==="segmented-button"})},{"aria-hidden":"true"},o[3]===$_?{focusable:"false",tabindex:"-1"}:{},o[7]];var v=o[3];function c(h){let S={$$slots:{default:[Nw]},$$scope:{ctx:h}};for(let P=0;P<f.length;P+=1)S=Ct(S,f[P]);return{props:S}}return v&&(e=new v(c(o)),o[10](e)),{c(){e&&Ni(e.$$.fragment),n=bn()},l(h){e&&$i(e.$$.fragment,h),n=bn()},m(h,S){e&&Vi(e,h,S),Ut(h,n,S),s=!0},p(h,[S]){const P=S&239?en(f,[S&33&&{use:[h[5],...h[0]]},S&70&&{class:wi({[h[1]]:!0,"mdc-button__icon":h[6]==="button","mdc-fab__icon":h[6]==="fab","mdc-icon-button__icon":h[6]==="icon-button","mdc-icon-button__icon--on":h[6]==="icon-button"&&h[2],"mdc-tab__icon":h[6]==="tab","mdc-banner__icon":h[6]==="banner","mdc-segmented-button__icon":h[6]==="segmented-button"})},f[2],S&8&&Xr(h[3]===$_?{focusable:"false",tabindex:"-1"}:{}),S&128&&Xr(h[7])]):{};if(S&2048&&(P.$$scope={dirty:S,ctx:h}),v!==(v=h[3])){if(e){Or();const D=e;ft(D.$$.fragment,1,0,()=>{ji(D,1)}),Rr()}v?(e=new v(c(h)),h[10](e),Ni(e.$$.fragment),rt(e.$$.fragment,1),Vi(e,n.parentNode,n)):e=null}else v&&e.$set(P)},i(h){s||(e&&rt(e.$$.fragment,h),s=!0)},o(h){e&&ft(e.$$.fragment,h),s=!1},d(h){o[10](null),h&&Qe(n),e&&ji(e,h)}}}function jw(o,e,n){const s=["use","class","on","component","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,{on:D=!1}=e,R,{component:O=Wx}=e;const Y=Dr("SMUI:icon:context");function ee(){return R.getElement()}function he(re){Zi[re?"unshift":"push"](()=>{R=re,n(4,R)})}return o.$$set=re=>{e=Ct(Ct({},e),Qn(re)),n(7,f=xi(e,s)),"use"in re&&n(0,S=re.use),"class"in re&&n(1,P=re.class),"on"in re&&n(2,D=re.on),"component"in re&&n(3,O=re.component),"$$scope"in re&&n(11,c=re.$$scope)},[S,P,D,O,R,h,Y,f,ee,v,he,c]}class qw extends Tn{constructor(e){super(),An(this,e,jw,Vw,Sn,{use:0,class:1,on:2,component:3,getElement:8})}get getElement(){return this.$$.ctx[8]}}const Gw=Uw,nv=qw,Sr={title:"GIS for Water",url:"https://water-gis.com",logo:"https://raw.githubusercontent.com/watergis/logo/main/logo.svg",basePath:"/sveltekit-watergis-template",attribution:"\xA9NARWASSCO",styles:[{title:"UNVT(Water)",uri:"https://narwassco.github.io/mapbox-stylefiles/unvt/style.json"},{title:"UNVT(Sewer)",uri:"https://narwassco.github.io/mapbox-stylefiles/unvt/style-sewer.json"}],center:{lng:35.87063,lat:-1.08551},zoom:13,search:{url:"https://narwassco.github.io/vt/meter.geojson",target:["connno","serialno"],format:o=>`${o.customer}, ${o.connno}, ${o.serialno}, ${o.village}`,place_type:["meter"],placeholder:"Search CONN NO or S/N",zoom:17},popup:{target:["meter","flow meter","valve","washout","firehydrant","tank","pipeline","pg-building","sewer-connection","sewer_commercial","sewer_institution","sewer_public_toilet","sewer_pipeline","sewer_treatment_plant","manhole"]},areaSwitcher:{areas:[{title:"Narok",latlng:[35.87063,-1.08551],zoom:14},{title:"Ololulung'a",latlng:[35.65072,-1.0085],zoom:13},{title:"Kilgoris",latlng:[34.87533,-1.00278],zoom:14},{title:"Suswa",latlng:[36.33078,-1.05307],zoom:13}]},legend:{targets:{pipeline:"Pipeline",pipeline_annotation:"Pipeline Label",meter:"Water Meter","flow meter":"Flow Meter",valve:"Valve",firehydrant:"Fire Hydrant",washout:"Washout",tank:"Tank",tank_annotation:"Tank Label",wtp:"WTP",wtp_annotation:"WTP Label",intake:"Intake",intake_annotation:"Intake Label",parcels:"Parcels",parcels_annotation:"Parcels Label",village:"Village",village_annotation:"Village Label",dma:"DMA","dma-annotation":"DMA Label","contour-line":"Countour","contour-label":"Contour Label",hillshade:"Hillshade",sewer_connection:"Households (Sewer)",sewer_commercial:"Commecial (Sewer)",sewer_institution:"Institution (Sewer)",sewer_public_toilet:"Public Toilet (Sewer)",manhole:"Manhole",sewer_pipeline:"Sewer pipeline",sewer_treatment_plant:"Wastewater treatment plant"}},elevation:{url:"https://narwassco.github.io/narok-terrain/tiles/{z}/{x}/{y}.png",options:{tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff",units:"kilometers"}},valhalla:{url:"https://valhalla.water-gis.com",options:{Contours:[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}]}}};function Hw(o){let e;return{c(){e=_i("link"),this.h()},l(n){e=vi(n,"LINK",{rel:!0,href:!0}),this.h()},h(){ii(e,"rel","stylesheet"),ii(e,"href",Sr.basePath+"/smui.css")},m(n,s){Ut(n,e,s)},p:Yo,d(n){n&&Qe(e)}}}function Zw(o){let e,n,s;return{c(){e=_i("link"),n=qn(),s=_i("link"),this.h()},l(f){e=vi(f,"LINK",{rel:!0,href:!0,media:!0}),n=Gn(f),s=vi(f,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){ii(e,"rel","stylesheet"),ii(e,"href",Sr.basePath+"/smui.css"),ii(e,"media","print"),ii(s,"rel","stylesheet"),ii(s,"href",Sr.basePath+"/smui-dark.css"),ii(s,"media","screen")},m(f,v){Ut(f,e,v),Ut(f,n,v),Ut(f,s,v)},p:Yo,d(f){f&&Qe(e),f&&Qe(n),f&&Qe(s)}}}function Ww(o){let e,n,s;return{c(){e=_i("link"),n=qn(),s=_i("link"),this.h()},l(f){e=vi(f,"LINK",{rel:!0,href:!0,media:!0}),n=Gn(f),s=vi(f,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){ii(e,"rel","stylesheet"),ii(e,"href",Sr.basePath+"/smui.css"),ii(e,"media","(prefers-color-scheme: light)"),ii(s,"rel","stylesheet"),ii(s,"href",Sr.basePath+"/smui-dark.css"),ii(s,"media","screen and (prefers-color-scheme: dark)")},m(f,v){Ut(f,e,v),Ut(f,n,v),Ut(f,s,v)},p:Yo,d(f){f&&Qe(e),f&&Qe(n),f&&Qe(s)}}}function Xw(o){let e;return{c(){e=pa("menu")},l(n){e=fa(n,"menu")},m(n,s){Ut(n,e,s)},d(n){n&&Qe(e)}}}function Kw(o){let e=Sr.title+"",n;return{c(){n=pa(e)},l(s){n=fa(s,e)},m(s,f){Ut(s,n,f)},p:Yo,d(s){s&&Qe(n)}}}function Jw(o){let e,n,s,f,v,c,h,S;return e=new xm({props:{class:"material-icons",$$slots:{default:[Xw]},$$scope:{ctx:o}}}),e.$on("click",o[6]),h=new Ew({props:{$$slots:{default:[Kw]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment),n=qn(),s=_i("a"),f=_i("img"),c=qn(),Ni(h.$$.fragment),this.h()},l(P){$i(e.$$.fragment,P),n=Gn(P),s=vi(P,"A",{href:!0});var D=mi(s);f=vi(D,"IMG",{src:!0,alt:!0,class:!0}),D.forEach(Qe),c=Gn(P),$i(h.$$.fragment,P),this.h()},h(){Wb(f.src,v=Sr.logo)||ii(f,"src",v),ii(f,"alt","logo"),ii(f,"class","logo svelte-1cnjkz4"),ii(s,"href",Sr.url)},m(P,D){Vi(e,P,D),Ut(P,n,D),Ut(P,s,D),sn(s,f),Ut(P,c,D),Vi(h,P,D),S=!0},p(P,D){const R={};D&256&&(R.$$scope={dirty:D,ctx:P}),e.$set(R);const O={};D&256&&(O.$$scope={dirty:D,ctx:P}),h.$set(O)},i(P){S||(rt(e.$$.fragment,P),rt(h.$$.fragment,P),S=!0)},o(P){ft(e.$$.fragment,P),ft(h.$$.fragment,P),S=!1},d(P){ji(e,P),P&&Qe(n),P&&Qe(s),P&&Qe(c),ji(h,P)}}}function Yw(o){let e;return{c(){e=pa("print")},l(n){e=fa(n,"print")},m(n,s){Ut(n,e,s)},d(n){n&&Qe(e)}}}function Qw(o){let e;return{c(){e=pa(o[3])},l(n){e=fa(n,o[3])},m(n,s){Ut(n,e,s)},p(n,s){s&8&&tu(e,n[3])},d(n){n&&Qe(e)}}}function $w(o){let e,n,s,f;return e=new xm({props:{class:"material-icons","aria-label":"Print",$$slots:{default:[Yw]},$$scope:{ctx:o}}}),s=new xm({props:{"aria-label":o[4],class:"material-icons",title:o[4],$$slots:{default:[Qw]},$$scope:{ctx:o}}}),s.$on("click",o[5]),{c(){Ni(e.$$.fragment),n=qn(),Ni(s.$$.fragment)},l(v){$i(e.$$.fragment,v),n=Gn(v),$i(s.$$.fragment,v)},m(v,c){Vi(e,v,c),Ut(v,n,c),Vi(s,v,c),f=!0},p(v,c){const h={};c&256&&(h.$$scope={dirty:c,ctx:v}),e.$set(h);const S={};c&16&&(S["aria-label"]=v[4]),c&16&&(S.title=v[4]),c&264&&(S.$$scope={dirty:c,ctx:v}),s.$set(S)},i(v){f||(rt(e.$$.fragment,v),rt(s.$$.fragment,v),f=!0)},o(v){ft(e.$$.fragment,v),ft(s.$$.fragment,v),f=!1},d(v){ji(e,v),v&&Qe(n),ji(s,v)}}}function e2(o){let e,n,s,f,v,c;return e=new ev({props:{$$slots:{default:[Jw]},$$scope:{ctx:o}}}),v=new ev({props:{align:"end",toolbar:!0,$$slots:{default:[$w]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment),n=qn(),s=_i("section"),f=qn(),Ni(v.$$.fragment)},l(h){$i(e.$$.fragment,h),n=Gn(h),s=vi(h,"SECTION",{}),mi(s).forEach(Qe),f=Gn(h),$i(v.$$.fragment,h)},m(h,S){Vi(e,h,S),Ut(h,n,S),Ut(h,s,S),Ut(h,f,S),Vi(v,h,S),c=!0},p(h,S){const P={};S&257&&(P.$$scope={dirty:S,ctx:h}),e.$set(P);const D={};S&280&&(D.$$scope={dirty:S,ctx:h}),v.$set(D)},i(h){c||(rt(e.$$.fragment,h),rt(v.$$.fragment,h),c=!0)},o(h){ft(e.$$.fragment,h),ft(v.$$.fragment,h),c=!1},d(h){ji(e,h),h&&Qe(n),h&&Qe(s),h&&Qe(f),ji(v,h)}}}function t2(o){let e,n;return e=new vw({props:{$$slots:{default:[e2]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&281&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function i2(o){let e,n,s,f,v,c;function h(R,O){return R[1]===void 0?Ww:R[1]?Zw:Hw}let S=h(o),P=S(o),D={variant:"fixed",$$slots:{default:[t2]},$$scope:{ctx:o}};return s=new yx({props:D}),o[7](s),v=new Cw({props:{topAppBar:o[2]}}),{c(){P.c(),e=bn(),n=qn(),Ni(s.$$.fragment),f=qn(),Ni(v.$$.fragment)},l(R){const O=Zb('[data-svelte="svelte-7r4yyr"]',document.head);P.l(O),e=bn(),O.forEach(Qe),n=Gn(R),$i(s.$$.fragment,R),f=Gn(R),$i(v.$$.fragment,R)},m(R,O){P.m(document.head,null),sn(document.head,e),Ut(R,n,O),Vi(s,R,O),Ut(R,f,O),Vi(v,R,O),c=!0},p(R,[O]){S===(S=h(R))&&P?P.p(R,O):(P.d(1),P=S(R),P&&(P.c(),P.m(e.parentNode,e)));const Y={};O&281&&(Y.$$scope={dirty:O,ctx:R}),s.$set(Y);const ee={};O&4&&(ee.topAppBar=R[2]),v.$set(ee)},i(R){c||(rt(s.$$.fragment,R),rt(v.$$.fragment,R),c=!0)},o(R){ft(s.$$.fragment,R),ft(v.$$.fragment,R),c=!1},d(R){P.d(R),Qe(e),R&&Qe(n),o[7](null),ji(s,R),R&&Qe(f),ji(v,R)}}}function n2(o,e,n){let s,f,{drawerOpen:v=!1}=e,c,h;Fo(()=>{n(1,c=window.matchMedia("(prefers-color-scheme: dark)").matches)});const S=()=>n(1,c=!c),P=()=>n(0,v=!v);function D(R){Zi[R?"unshift":"push"](()=>{h=R,n(2,h)})}return o.$$set=R=>{"drawerOpen"in R&&n(0,v=R.drawerOpen)},o.$$.update=()=>{o.$$.dirty&2&&n(4,s=`switch to ${c?"light":"dark"} mode`),o.$$.dirty&2&&n(3,f=c?"light_mode":"dark_mode")},[v,c,h,f,s,S,P,D]}class r2 extends Tn{constructor(e){super(),An(this,e,n2,i2,Sn,{drawerOpen:0})}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Lh,Jc,gr={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};Lh={},Lh[""+gr.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",Lh[""+gr.LIST_ITEM_CLASS]="mdc-list-item",Lh[""+gr.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",Lh[""+gr.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",Lh[""+gr.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",Lh[""+gr.ROOT]="mdc-list";var np=(Jc={},Jc[""+gr.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",Jc[""+gr.LIST_ITEM_CLASS]="mdc-deprecated-list-item",Jc[""+gr.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",Jc[""+gr.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",Jc[""+gr.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",Jc[""+gr.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",Jc[""+gr.ROOT]="mdc-deprecated-list",Jc),Ph={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+gr.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+gr.LIST_ITEM_CLASS+` a,
    .`+np[gr.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+np[gr.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+gr.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+gr.LIST_ITEM_CLASS+` a,
    .`+gr.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+gr.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+np[gr.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+np[gr.LIST_ITEM_CLASS]+` a,
    .`+np[gr.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+np[gr.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},Fa={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var o2=["input","button","textarea","select"],xd=function(o){var e=o.target;if(!!e){var n=(""+e.tagName).toLowerCase();o2.indexOf(n)===-1&&o.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function a2(){var o={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return o}function s2(o,e){for(var n=new Map,s=0;s<o;s++){var f=e(s).trim();if(!!f){var v=f[0].toLowerCase();n.has(v)||n.set(v,[]),n.get(v).push({text:f.toLowerCase(),index:s})}}return n.forEach(function(c){c.sort(function(h,S){return h.index-S.index})}),n}function gy(o,e){var n=o.nextChar,s=o.focusItemAtIndex,f=o.sortedIndexByFirstChar,v=o.focusedItemIndex,c=o.skipFocus,h=o.isItemAtIndexDisabled;clearTimeout(e.bufferClearTimeout),e.bufferClearTimeout=setTimeout(function(){J0(e)},Fa.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),e.typeaheadBuffer=e.typeaheadBuffer+n;var S;return e.typeaheadBuffer.length===1?S=l2(f,v,h,e):S=u2(f,h,e),S!==-1&&!c&&s(S),S}function l2(o,e,n,s){var f=s.typeaheadBuffer[0],v=o.get(f);if(!v)return-1;if(f===s.currentFirstChar&&v[s.sortedIndexCursor].index===e){s.sortedIndexCursor=(s.sortedIndexCursor+1)%v.length;var c=v[s.sortedIndexCursor].index;if(!n(c))return c}s.currentFirstChar=f;var h=-1,S;for(S=0;S<v.length;S++)if(!n(v[S].index)){h=S;break}for(;S<v.length;S++)if(v[S].index>e&&!n(v[S].index)){h=S;break}return h!==-1?(s.sortedIndexCursor=h,v[s.sortedIndexCursor].index):-1}function u2(o,e,n){var s=n.typeaheadBuffer[0],f=o.get(s);if(!f)return-1;var v=f[n.sortedIndexCursor];if(v.text.lastIndexOf(n.typeaheadBuffer,0)===0&&!e(v.index))return v.index;for(var c=(n.sortedIndexCursor+1)%f.length,h=-1;c!==n.sortedIndexCursor;){var S=f[c],P=S.text.lastIndexOf(n.typeaheadBuffer,0)===0,D=!e(S.index);if(P&&D){h=c;break}c=(c+1)%f.length}return h!==-1?(n.sortedIndexCursor=h,f[n.sortedIndexCursor].index):-1}function K0(o){return o.typeaheadBuffer.length>0}function J0(o){o.typeaheadBuffer=""}function rv(o,e){var n=o.event,s=o.isTargetListItem,f=o.focusedItemIndex,v=o.focusItemAtIndex,c=o.sortedIndexByFirstChar,h=o.isItemAtIndexDisabled,S=Ca(n)==="ArrowLeft",P=Ca(n)==="ArrowUp",D=Ca(n)==="ArrowRight",R=Ca(n)==="ArrowDown",O=Ca(n)==="Home",Y=Ca(n)==="End",ee=Ca(n)==="Enter",he=Ca(n)==="Spacebar";if(n.ctrlKey||n.metaKey||S||P||D||R||O||Y||ee)return-1;var re=!he&&n.key.length===1;if(re){xd(n);var ve={focusItemAtIndex:v,focusedItemIndex:f,nextChar:n.key.toLowerCase(),sortedIndexByFirstChar:c,skipFocus:!1,isItemAtIndexDisabled:h};return gy(ve,e)}if(!he)return-1;s&&xd(n);var se=s&&K0(e);if(se){var ve={focusItemAtIndex:v,focusedItemIndex:f,nextChar:" ",sortedIndexByFirstChar:c,skipFocus:!1,isItemAtIndexDisabled:h};return gy(ve,e)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function c2(o){return o instanceof Array}var h2=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.wrapFocus=!1,s.isVertical=!0,s.isSingleSelectionList=!1,s.selectedIndex=Fa.UNSET_INDEX,s.focusedItemIndex=Fa.UNSET_INDEX,s.useActivatedClass=!1,s.useSelectedAttr=!1,s.ariaCurrentAttrValue=null,s.isCheckboxList=!1,s.isRadioList=!1,s.hasTypeahead=!1,s.typeaheadState=a2(),s.sortedIndexByFirstChar=new Map,s}return Object.defineProperty(e,"strings",{get:function(){return Ph},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return gr},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Fa},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),e.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},e.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},e.prototype.setWrapFocus=function(n){this.wrapFocus=n},e.prototype.setVerticalOrientation=function(n){this.isVertical=n},e.prototype.setSingleSelection=function(n){this.isSingleSelectionList=n,n&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},e.prototype.maybeInitializeSingleSelection=function(){var n=this.getSelectedIndexFromDOM();if(n!==Fa.UNSET_INDEX){var s=this.adapter.listItemAtIndexHasClass(n,gr.LIST_ITEM_ACTIVATED_CLASS);s&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=n}},e.prototype.getSelectedIndexFromDOM=function(){for(var n=Fa.UNSET_INDEX,s=this.adapter.getListItemCount(),f=0;f<s;f++){var v=this.adapter.listItemAtIndexHasClass(f,gr.LIST_ITEM_SELECTED_CLASS),c=this.adapter.listItemAtIndexHasClass(f,gr.LIST_ITEM_ACTIVATED_CLASS);if(!!(v||c)){n=f;break}}return n},e.prototype.setHasTypeahead=function(n){this.hasTypeahead=n,n&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},e.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&K0(this.typeaheadState)},e.prototype.setUseActivatedClass=function(n){this.useActivatedClass=n},e.prototype.setUseSelectedAttribute=function(n){this.useSelectedAttr=n},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(n,s){var f=s===void 0?{}:s,v=f.forceUpdate;!this.isIndexValid(n)||(this.isCheckboxList?this.setCheckboxAtIndex(n):this.isRadioList?this.setRadioAtIndex(n):this.setSingleSelectionAtIndex(n,{forceUpdate:v}))},e.prototype.handleFocusIn=function(n){n>=0&&(this.focusedItemIndex=n,this.adapter.setAttributeForElementIndex(n,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(n,"0"))},e.prototype.handleFocusOut=function(n){var s=this;n>=0&&(this.adapter.setAttributeForElementIndex(n,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(n,"-1")),setTimeout(function(){s.adapter.isFocusInsideList()||s.setTabindexToFirstSelectedOrFocusedItem()},0)},e.prototype.handleKeydown=function(n,s,f){var v=this,c=Ca(n)==="ArrowLeft",h=Ca(n)==="ArrowUp",S=Ca(n)==="ArrowRight",P=Ca(n)==="ArrowDown",D=Ca(n)==="Home",R=Ca(n)==="End",O=Ca(n)==="Enter",Y=Ca(n)==="Spacebar",ee=n.key==="A"||n.key==="a";if(this.adapter.isRootFocused()){if(h||R?(n.preventDefault(),this.focusLastElement()):(P||D)&&(n.preventDefault(),this.focusFirstElement()),this.hasTypeahead){var he={event:n,focusItemAtIndex:function(se){v.focusItemAtIndex(se)},focusedItemIndex:-1,isTargetListItem:s,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(se){return v.adapter.listItemAtIndexHasClass(se,gr.LIST_ITEM_DISABLED_CLASS)}};rv(he,this.typeaheadState)}return}var re=this.adapter.getFocusedElementIndex();if(!(re===-1&&(re=f,re<0))){if(this.isVertical&&P||!this.isVertical&&S)xd(n),this.focusNextElement(re);else if(this.isVertical&&h||!this.isVertical&&c)xd(n),this.focusPrevElement(re);else if(D)xd(n),this.focusFirstElement();else if(R)xd(n),this.focusLastElement();else if(ee&&n.ctrlKey&&this.isCheckboxList)n.preventDefault(),this.toggleAll(this.selectedIndex===Fa.UNSET_INDEX?[]:this.selectedIndex);else if((O||Y)&&s){var ve=n.target;if(ve&&ve.tagName==="A"&&O||(xd(n),this.adapter.listItemAtIndexHasClass(re,gr.LIST_ITEM_DISABLED_CLASS)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(re),this.adapter.notifyAction(re))}if(this.hasTypeahead){var he={event:n,focusItemAtIndex:function(we){v.focusItemAtIndex(we)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:s,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(we){return v.adapter.listItemAtIndexHasClass(we,gr.LIST_ITEM_DISABLED_CLASS)}};rv(he,this.typeaheadState)}}},e.prototype.handleClick=function(n,s){n!==Fa.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(n,gr.LIST_ITEM_DISABLED_CLASS)||(this.isSelectableList()&&this.setSelectedIndexOnAction(n,s),this.adapter.notifyAction(n)))},e.prototype.focusNextElement=function(n){var s=this.adapter.getListItemCount(),f=n+1;if(f>=s)if(this.wrapFocus)f=0;else return n;return this.focusItemAtIndex(f),f},e.prototype.focusPrevElement=function(n){var s=n-1;if(s<0)if(this.wrapFocus)s=this.adapter.getListItemCount()-1;else return n;return this.focusItemAtIndex(s),s},e.prototype.focusFirstElement=function(){return this.focusItemAtIndex(0),0},e.prototype.focusLastElement=function(){var n=this.adapter.getListItemCount()-1;return this.focusItemAtIndex(n),n},e.prototype.focusInitialElement=function(){var n=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(n),n},e.prototype.setEnabled=function(n,s){!this.isIndexValid(n)||(s?(this.adapter.removeClassForElementIndex(n,gr.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(n,Ph.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(n,gr.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(n,Ph.ARIA_DISABLED,"true")))},e.prototype.setSingleSelectionAtIndex=function(n,s){var f=s===void 0?{}:s,v=f.forceUpdate;if(!(this.selectedIndex===n&&!v)){var c=gr.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(c=gr.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==Fa.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,c),this.setAriaForSingleSelectionAtIndex(n),this.setTabindexAtIndex(n),n!==Fa.UNSET_INDEX&&this.adapter.addClassForElementIndex(n,c),this.selectedIndex=n}},e.prototype.setAriaForSingleSelectionAtIndex=function(n){this.selectedIndex===Fa.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(n,Ph.ARIA_CURRENT));var s=this.ariaCurrentAttrValue!==null,f=s?Ph.ARIA_CURRENT:Ph.ARIA_SELECTED;if(this.selectedIndex!==Fa.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,f,"false"),n!==Fa.UNSET_INDEX){var v=s?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(n,f,v)}},e.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?Ph.ARIA_SELECTED:Ph.ARIA_CHECKED},e.prototype.setRadioAtIndex=function(n){var s=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(n,!0),this.selectedIndex!==Fa.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,s,"false"),this.adapter.setAttributeForElementIndex(n,s,"true"),this.selectedIndex=n},e.prototype.setCheckboxAtIndex=function(n){for(var s=this.getSelectionAttribute(),f=0;f<this.adapter.getListItemCount();f++){var v=!1;n.indexOf(f)>=0&&(v=!0),this.adapter.setCheckedCheckboxOrRadioAtIndex(f,v),this.adapter.setAttributeForElementIndex(f,s,v?"true":"false")}this.selectedIndex=n},e.prototype.setTabindexAtIndex=function(n){this.focusedItemIndex===Fa.UNSET_INDEX&&n!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==n&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==n&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),n!==Fa.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(n,"tabindex","0")},e.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},e.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var n=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(n)},e.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==Fa.UNSET_INDEX?this.selectedIndex:c2(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(n,s){return Math.min(n,s)}):0:Math.max(this.focusedItemIndex,0)},e.prototype.isIndexValid=function(n){var s=this;if(n instanceof Array){if(!this.isCheckboxList)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return n.length===0?!0:n.some(function(f){return s.isIndexInRange(f)})}else if(typeof n=="number"){if(this.isCheckboxList)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+n);return this.isIndexInRange(n)||this.isSingleSelectionList&&n===Fa.UNSET_INDEX}else return!1},e.prototype.isIndexInRange=function(n){var s=this.adapter.getListItemCount();return n>=0&&n<s},e.prototype.setSelectedIndexOnAction=function(n,s){s===void 0&&(s=!0),this.isCheckboxList?this.toggleCheckboxAtIndex(n,s):this.setSelectedIndex(n)},e.prototype.toggleCheckboxAtIndex=function(n,s){var f=this.getSelectionAttribute(),v=this.adapter.isCheckboxCheckedAtIndex(n);s&&(v=!v,this.adapter.setCheckedCheckboxOrRadioAtIndex(n,v)),this.adapter.setAttributeForElementIndex(n,f,v?"true":"false");var c=this.selectedIndex===Fa.UNSET_INDEX?[]:this.selectedIndex.slice();v?c.push(n):c=c.filter(function(h){return h!==n}),this.selectedIndex=c},e.prototype.focusItemAtIndex=function(n){this.adapter.focusItemAtIndex(n),this.focusedItemIndex=n},e.prototype.toggleAll=function(n){var s=this.adapter.getListItemCount();if(n.length===s)this.setCheckboxAtIndex([]);else{for(var f=[],v=0;v<s;v++)(!this.adapter.listItemAtIndexHasClass(v,gr.LIST_ITEM_DISABLED_CLASS)||n.indexOf(v)>-1)&&f.push(v);this.setCheckboxAtIndex(f)}},e.prototype.typeaheadMatchItem=function(n,s,f){var v=this;f===void 0&&(f=!1);var c={focusItemAtIndex:function(h){v.focusItemAtIndex(h)},focusedItemIndex:s||this.focusedItemIndex,nextChar:n,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:f,isItemAtIndexDisabled:function(h){return v.adapter.listItemAtIndexHasClass(h,gr.LIST_ITEM_DISABLED_CLASS)}};return gy(c,this.typeaheadState)},e.prototype.typeaheadInitSortedIndex=function(){return s2(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},e.prototype.clearTypeaheadBuffer=function(){J0(this.typeaheadState)},e}(Na);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var nl={ANIMATE:"mdc-drawer--animate",CLOSING:"mdc-drawer--closing",DISMISSIBLE:"mdc-drawer--dismissible",MODAL:"mdc-drawer--modal",OPEN:"mdc-drawer--open",OPENING:"mdc-drawer--opening",ROOT:"mdc-drawer"},d2={APP_CONTENT_SELECTOR:".mdc-drawer-app-content",CLOSE_EVENT:"MDCDrawer:closed",OPEN_EVENT:"MDCDrawer:opened",SCRIM_SELECTOR:".mdc-drawer-scrim",LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",LIST_ITEM_ACTIVATED_SELECTOR:".mdc-list-item--activated,.mdc-deprecated-list-item--activated"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Y0=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.animationFrame=0,s.animationTimer=0,s}return Object.defineProperty(e,"strings",{get:function(){return d2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return nl},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},elementHasClass:function(){return!1},notifyClose:function(){},notifyOpen:function(){},saveFocus:function(){},restoreFocus:function(){},focusActiveNavigationItem:function(){},trapFocus:function(){},releaseFocus:function(){}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.animationTimer&&clearTimeout(this.animationTimer)},e.prototype.open=function(){var n=this;this.isOpen()||this.isOpening()||this.isClosing()||(this.adapter.addClass(nl.OPEN),this.adapter.addClass(nl.ANIMATE),this.runNextAnimationFrame(function(){n.adapter.addClass(nl.OPENING)}),this.adapter.saveFocus())},e.prototype.close=function(){!this.isOpen()||this.isOpening()||this.isClosing()||this.adapter.addClass(nl.CLOSING)},e.prototype.isOpen=function(){return this.adapter.hasClass(nl.OPEN)},e.prototype.isOpening=function(){return this.adapter.hasClass(nl.OPENING)||this.adapter.hasClass(nl.ANIMATE)},e.prototype.isClosing=function(){return this.adapter.hasClass(nl.CLOSING)},e.prototype.handleKeydown=function(n){var s=n.keyCode,f=n.key,v=f==="Escape"||s===27;v&&this.close()},e.prototype.handleTransitionEnd=function(n){var s=nl.OPENING,f=nl.CLOSING,v=nl.OPEN,c=nl.ANIMATE,h=nl.ROOT,S=this.isElement(n.target)&&this.adapter.elementHasClass(n.target,h);!S||(this.isClosing()?(this.adapter.removeClass(v),this.closed(),this.adapter.restoreFocus(),this.adapter.notifyClose()):(this.adapter.focusActiveNavigationItem(),this.opened(),this.adapter.notifyOpen()),this.adapter.removeClass(c),this.adapter.removeClass(s),this.adapter.removeClass(f))},e.prototype.opened=function(){},e.prototype.closed=function(){},e.prototype.runNextAnimationFrame=function(n){var s=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){s.animationFrame=0,clearTimeout(s.animationTimer),s.animationTimer=setTimeout(n,0)})},e.prototype.isElement=function(n){return Boolean(n.classList)},e}(Na);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var p2=function(o){yo(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.handleScrimClick=function(){this.close()},e.prototype.opened=function(){this.adapter.trapFocus()},e.prototype.closed=function(){this.adapter.releaseFocus()},e}(Y0);function f2(o){let e,n,s,f,v,c;const h=o[15].default,S=mn(h,o,o[14],null);let P=[{class:n=wi(tr({[o[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":o[2]==="dismissible","mdc-drawer--modal":o[2]==="modal","smui-drawer__absolute":o[2]==="modal"&&!o[3]},o[6]))},o[8]],D={};for(let R=0;R<P.length;R+=1)D=Ct(D,P[R]);return{c(){e=_i("aside"),S&&S.c(),this.h()},l(R){e=vi(R,"ASIDE",{class:!0});var O=mi(e);S&&S.l(O),O.forEach(Qe),this.h()},h(){di(e,D)},m(R,O){Ut(R,e,O),S&&S.m(e,null),o[16](e),f=!0,v||(c=[Ei(s=Hn.call(null,e,o[0])),Ei(o[7].call(null,e)),In(e,"keydown",o[17]),In(e,"transitionend",o[18])],v=!0)},p(R,[O]){S&&S.p&&(!f||O&16384)&&gn(S,h,R,R[14],f?_n(h,R[14],O,null):yn(R[14]),null),di(e,D=en(P,[(!f||O&78&&n!==(n=wi(tr({[R[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":R[2]==="dismissible","mdc-drawer--modal":R[2]==="modal","smui-drawer__absolute":R[2]==="modal"&&!R[3]},R[6]))))&&{class:n},O&256&&R[8]])),s&&Rn(s.update)&&O&1&&s.update.call(null,R[0])},i(R){f||(rt(S,R),f=!0)},o(R){ft(S,R),f=!1},d(R){R&&Qe(e),S&&S.d(R),o[16](null),v=!1,Tr(c)}}}function m2(o,e,n){const s=["use","class","variant","open","fixed","setOpen","isOpen","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const{FocusTrap:h}=Lw,S=$n(Yn());let{use:P=[]}=e,{class:D=""}=e,{variant:R=void 0}=e,{open:O=!1}=e,{fixed:Y=!0}=e,ee,he,re={},ve=null,se,we=!1;sr("SMUI:list:nav",!0),sr("SMUI:list:item:nav",!0),sr("SMUI:list:wrapFocus",!0);let Ge=R;Fo(()=>{se=new h(ee,{skipInitialFocus:!0}),n(4,he=Ue()),he&&he.init()}),eh(()=>{he&&he.destroy(),we&&we.removeEventListener("SMUIDrawerScrim:click",at)});function Ue(){var Et,Gt;we&&we.removeEventListener("SMUIDrawerScrim:click",at),R==="modal"&&(we=(Gt=(Et=ee.parentNode)===null||Et===void 0?void 0:Et.querySelector(".mdc-drawer-scrim"))!==null&&Gt!==void 0?Gt:!1,we&&we.addEventListener("SMUIDrawerScrim:click",at));const Je=R==="dismissible"?Y0:R==="modal"?p2:void 0;return Je?new Je({addClass:fe,removeClass:ut,hasClass:He,elementHasClass:(wt,Pt)=>wt.classList.contains(Pt),saveFocus:()=>ve=document.activeElement,restoreFocus:()=>{ve&&"focus"in ve&&ee.contains(document.activeElement)&&ve.focus()},focusActiveNavigationItem:()=>{const wt=ee.querySelector(".mdc-list-item--activated,.mdc-deprecated-list-item--activated");wt&&wt.focus()},notifyClose:()=>{n(9,O=!1),Un(ee,"SMUIDrawer:closed",void 0,void 0,!0)},notifyOpen:()=>{n(9,O=!0),Un(ee,"SMUIDrawer:opened",void 0,void 0,!0)},trapFocus:()=>se.trapFocus(),releaseFocus:()=>se.releaseFocus()}):void 0}function He(Et){return Et in re?re[Et]:Dt().classList.contains(Et)}function fe(Et){re[Et]||n(6,re[Et]=!0,re)}function ut(Et){(!(Et in re)||re[Et])&&n(6,re[Et]=!1,re)}function at(){he&&"handleScrimClick"in he&&he.handleScrimClick()}function je(Et){n(9,O=Et)}function Fe(){return O}function Dt(){return ee}function qe(Et){Zi[Et?"unshift":"push"](()=>{ee=Et,n(5,ee)})}const Mt=Et=>he&&he.handleKeydown(Et),li=Et=>he&&he.handleTransitionEnd(Et);return o.$$set=Et=>{e=Ct(Ct({},e),Qn(Et)),n(8,f=xi(e,s)),"use"in Et&&n(0,P=Et.use),"class"in Et&&n(1,D=Et.class),"variant"in Et&&n(2,R=Et.variant),"open"in Et&&n(9,O=Et.open),"fixed"in Et&&n(3,Y=Et.fixed),"$$scope"in Et&&n(14,c=Et.$$scope)},o.$$.update=()=>{o.$$.dirty&8212&&Ge!==R&&(n(13,Ge=R),he&&he.destroy(),n(6,re={}),n(4,he=Ue()),he&&he.init()),o.$$.dirty&528&&he&&he.isOpen()!==O&&(O?he.open():he.close())},[P,D,R,Y,he,ee,re,S,f,O,je,Fe,Dt,Ge,c,v,qe,Mt,li]}class g2 extends Tn{constructor(e){super(),An(this,e,m2,f2,Sn,{use:0,class:1,variant:2,open:9,fixed:3,setOpen:10,isOpen:11,getElement:12})}get setOpen(){return this.$$.ctx[10]}get isOpen(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}var y2=ns({class:"mdc-drawer-app-content",component:yp}),_2=ns({class:"mdc-drawer__content",component:yp}),Q0=ns({class:"mdc-drawer__header",component:yp});ns({class:"mdc-drawer__title",component:cw});ns({class:"mdc-drawer__subtitle",component:hw});/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var v2={ACTIVE:"mdc-tab-indicator--active",FADE:"mdc-tab-indicator--fade",NO_TRANSITION:"mdc-tab-indicator--no-transition"},b2={CONTENT_SELECTOR:".mdc-tab-indicator__content"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Yc=function(o){yo(e,o);function e(n){return o.call(this,_r(_r({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return v2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return b2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},computeContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},setContentStyleProperty:function(){}}},enumerable:!1,configurable:!0}),e.prototype.computeContentClientRect=function(){return this.adapter.computeContentClientRect()},e}(Na);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var x2=function(o){yo(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.activate=function(){this.adapter.addClass(Yc.cssClasses.ACTIVE)},e.prototype.deactivate=function(){this.adapter.removeClass(Yc.cssClasses.ACTIVE)},e}(Yc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ov=function(o){yo(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.activate=function(n){if(!n){this.adapter.addClass(Yc.cssClasses.ACTIVE);return}var s=this.computeContentClientRect(),f=n.width/s.width,v=n.left-s.left;this.adapter.addClass(Yc.cssClasses.NO_TRANSITION),this.adapter.setContentStyleProperty("transform","translateX("+v+"px) scaleX("+f+")"),this.computeContentClientRect(),this.adapter.removeClass(Yc.cssClasses.NO_TRANSITION),this.adapter.addClass(Yc.cssClasses.ACTIVE),this.adapter.setContentStyleProperty("transform","")},e.prototype.deactivate=function(){this.adapter.removeClass(Yc.cssClasses.ACTIVE)},e}(Yc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var um={ACTIVE:"mdc-tab--active"},rf={ARIA_SELECTED:"aria-selected",CONTENT_SELECTOR:".mdc-tab__content",INTERACTED_EVENT:"MDCTab:interacted",RIPPLE_SELECTOR:".mdc-tab__ripple",TABINDEX:"tabIndex",TAB_INDICATOR_SELECTOR:".mdc-tab-indicator"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var w2=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.focusOnActivate=!0,s}return Object.defineProperty(e,"cssClasses",{get:function(){return um},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return rf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},activateIndicator:function(){},deactivateIndicator:function(){},notifyInteracted:function(){},getOffsetLeft:function(){return 0},getOffsetWidth:function(){return 0},getContentOffsetLeft:function(){return 0},getContentOffsetWidth:function(){return 0},focus:function(){}}},enumerable:!1,configurable:!0}),e.prototype.handleClick=function(){this.adapter.notifyInteracted()},e.prototype.isActive=function(){return this.adapter.hasClass(um.ACTIVE)},e.prototype.setFocusOnActivate=function(n){this.focusOnActivate=n},e.prototype.activate=function(n){this.adapter.addClass(um.ACTIVE),this.adapter.setAttr(rf.ARIA_SELECTED,"true"),this.adapter.setAttr(rf.TABINDEX,"0"),this.adapter.activateIndicator(n),this.focusOnActivate&&this.adapter.focus()},e.prototype.deactivate=function(){!this.isActive()||(this.adapter.removeClass(um.ACTIVE),this.adapter.setAttr(rf.ARIA_SELECTED,"false"),this.adapter.setAttr(rf.TABINDEX,"-1"),this.adapter.deactivateIndicator())},e.prototype.computeDimensions=function(){var n=this.adapter.getOffsetWidth(),s=this.adapter.getOffsetLeft(),f=this.adapter.getContentOffsetWidth(),v=this.adapter.getContentOffsetLeft();return{contentLeft:s+v,contentRight:s+v+f,rootLeft:s,rootRight:s+n}},e}(Na);function E2(o){let e,n,s,f,v,c,h,S,P,D,R;const O=o[21].default,Y=mn(O,o,o[20],null);let ee=[{class:s=wi({[o[6]]:!0,"mdc-tab-indicator__content":!0,"mdc-tab-indicator__content--underline":o[3]==="underline","mdc-tab-indicator__content--icon":o[3]==="icon"})},{style:f=Object.entries(o[10]).map(av).join(" ")},{"aria-hidden":v=o[3]==="icon"?"true":void 0},rr(o[12],"content$")],he={};for(let se=0;se<ee.length;se+=1)he=Ct(he,ee[se]);let re=[{class:h=wi(tr({[o[2]]:!0,"mdc-tab-indicator":!0,"mdc-tab-indicator--active":o[0],"mdc-tab-indicator--fade":o[4]==="fade"},o[9]))},_s(o[12],["content$"])],ve={};for(let se=0;se<re.length;se+=1)ve=Ct(ve,re[se]);return{c(){e=_i("span"),n=_i("span"),Y&&Y.c(),this.h()},l(se){e=vi(se,"SPAN",{class:!0});var we=mi(e);n=vi(we,"SPAN",{class:!0,style:!0,"aria-hidden":!0});var Ge=mi(n);Y&&Y.l(Ge),Ge.forEach(Qe),we.forEach(Qe),this.h()},h(){di(n,he),di(e,ve)},m(se,we){Ut(se,e,we),sn(e,n),Y&&Y.m(n,null),o[22](n),o[23](e),P=!0,D||(R=[Ei(c=Hn.call(null,n,o[5])),Ei(S=Hn.call(null,e,o[1])),Ei(o[11].call(null,e))],D=!0)},p(se,[we]){Y&&Y.p&&(!P||we&1048576)&&gn(Y,O,se,se[20],P?_n(O,se[20],we,null):yn(se[20]),null),di(n,he=en(ee,[(!P||we&72&&s!==(s=wi({[se[6]]:!0,"mdc-tab-indicator__content":!0,"mdc-tab-indicator__content--underline":se[3]==="underline","mdc-tab-indicator__content--icon":se[3]==="icon"})))&&{class:s},(!P||we&1024&&f!==(f=Object.entries(se[10]).map(av).join(" ")))&&{style:f},(!P||we&8&&v!==(v=se[3]==="icon"?"true":void 0))&&{"aria-hidden":v},we&4096&&rr(se[12],"content$")])),c&&Rn(c.update)&&we&32&&c.update.call(null,se[5]),di(e,ve=en(re,[(!P||we&533&&h!==(h=wi(tr({[se[2]]:!0,"mdc-tab-indicator":!0,"mdc-tab-indicator--active":se[0],"mdc-tab-indicator--fade":se[4]==="fade"},se[9]))))&&{class:h},we&4096&&_s(se[12],["content$"])])),S&&Rn(S.update)&&we&2&&S.update.call(null,se[1])},i(se){P||(rt(Y,se),P=!0)},o(se){ft(Y,se),P=!1},d(se){se&&Qe(e),Y&&Y.d(se),o[22](null),o[23](null),D=!1,Tr(R)}}}const av=([o,e])=>`${o}: ${e};`;function I2(o,e,n){const s=["use","class","active","type","transition","content$use","content$class","activate","deactivate","computeContentClientRect","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,{active:D=!1}=e,{type:R="underline"}=e,{transition:O="slide"}=e,{content$use:Y=[]}=e,{content$class:ee=""}=e,he,re,ve,se={},we={},Ge=[],Ue=O;Fo(()=>(n(17,re=He()),re.init(),()=>{re.destroy()}));function He(){const Gt={fade:x2,slide:ov}[O]||ov;return new Gt({addClass:(...Je)=>fe(()=>ut(...Je)),removeClass:(...Je)=>fe(()=>at(...Je)),computeContentClientRect:qe,setContentStyleProperty:(...Je)=>fe(()=>je(...Je))})}function fe(Gt){Ge.length?Ge[Ge.length-1].push(Gt):Gt()}function ut(Gt){se[Gt]||n(9,se[Gt]=!0,se)}function at(Gt){(!(Gt in se)||se[Gt])&&n(9,se[Gt]=!1,se)}function je(Gt,Je){we[Gt]!=Je&&(Je===""||Je==null?(delete we[Gt],n(10,we),n(19,Ue),n(4,O),n(17,re)):n(10,we[Gt]=Je,we))}function Fe(Gt){n(0,D=!0),re.activate(Gt)}function Dt(){n(0,D=!1),re.deactivate()}function qe(){return Ge.push([]),n(18,Ge),ve.getBoundingClientRect()}function Mt(){return he}function li(Gt){Zi[Gt?"unshift":"push"](()=>{ve=Gt,n(8,ve)})}function Et(Gt){Zi[Gt?"unshift":"push"](()=>{he=Gt,n(7,he)})}return o.$$set=Gt=>{e=Ct(Ct({},e),Qn(Gt)),n(12,f=xi(e,s)),"use"in Gt&&n(1,S=Gt.use),"class"in Gt&&n(2,P=Gt.class),"active"in Gt&&n(0,D=Gt.active),"type"in Gt&&n(3,R=Gt.type),"transition"in Gt&&n(4,O=Gt.transition),"content$use"in Gt&&n(5,Y=Gt.content$use),"content$class"in Gt&&n(6,ee=Gt.content$class),"$$scope"in Gt&&n(20,c=Gt.$$scope)},o.$$.update=()=>{o.$$.dirty&655376&&Ue!==O&&(n(19,Ue=O),re&&re.destroy(),n(9,se={}),n(10,we={}),n(17,re=He()),re.init()),o.$$.dirty&262144&&Ge.length&&requestAnimationFrame(()=>{var Gt;const Je=(Gt=Ge.shift())!==null&&Gt!==void 0?Gt:[];n(18,Ge);for(const wt of Je)wt()})},[D,S,P,R,O,Y,ee,he,ve,se,we,h,f,Fe,Dt,qe,Mt,re,Ge,Ue,c,v,li,Et]}class $0 extends Tn{constructor(e){super(),An(this,e,I2,E2,Sn,{use:1,class:2,active:0,type:3,transition:4,content$use:5,content$class:6,activate:13,deactivate:14,computeContentClientRect:15,getElement:16})}get activate(){return this.$$.ctx[13]}get deactivate(){return this.$$.ctx[14]}get computeContentClientRect(){return this.$$.ctx[15]}get getElement(){return this.$$.ctx[16]}}const S2=o=>({}),sv=o=>({}),T2=o=>({}),lv=o=>({});function uv(o){let e,n;const s=[{active:o[18]},rr(o[24],"tabIndicator$")];let f={$$slots:{default:[A2]},$$scope:{ctx:o}};for(let v=0;v<s.length;v+=1)f=Ct(f,s[v]);return e=new $0({props:f}),o[31](e),{c(){Ni(e.$$.fragment)},l(v){$i(e.$$.fragment,v)},m(v,c){Vi(e,v,c),n=!0},p(v,c){const h=c[0]&17039360?en(s,[c[0]&262144&&{active:v[18]},c[0]&16777216&&Xr(rr(v[24],"tabIndicator$"))]):{};c[1]&32&&(h.$$scope={dirty:c,ctx:v}),e.$set(h)},i(v){n||(rt(e.$$.fragment,v),n=!0)},o(v){ft(e.$$.fragment,v),n=!1},d(v){o[31](null),ji(e,v)}}}function A2(o){let e;const n=o[30]["tab-indicator"],s=mn(n,o,o[36],lv);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v[1]&32)&&gn(s,n,f,f[36],e?_n(n,f[36],v,T2):yn(f[36]),lv)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function cv(o){let e,n;const s=[{active:o[18]},rr(o[24],"tabIndicator$")];let f={$$slots:{default:[C2]},$$scope:{ctx:o}};for(let v=0;v<s.length;v+=1)f=Ct(f,s[v]);return e=new $0({props:f}),o[33](e),{c(){Ni(e.$$.fragment)},l(v){$i(e.$$.fragment,v)},m(v,c){Vi(e,v,c),n=!0},p(v,c){const h=c[0]&17039360?en(s,[c[0]&262144&&{active:v[18]},c[0]&16777216&&Xr(rr(v[24],"tabIndicator$"))]):{};c[1]&32&&(h.$$scope={dirty:c,ctx:v}),e.$set(h)},i(v){n||(rt(e.$$.fragment,v),n=!0)},o(v){ft(e.$$.fragment,v),n=!1},d(v){o[33](null),ji(e,v)}}}function C2(o){let e;const n=o[30]["tab-indicator"],s=mn(n,o,o[36],sv);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v[1]&32)&&gn(s,n,f,f[36],e?_n(n,f[36],v,S2):yn(f[36]),sv)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function k2(o){let e,n,s,f,v,c,h,S,P,D;const R=o[30].default,O=mn(R,o,o[36],null);let Y=o[6]&&uv(o),ee=[{class:s=wi({[o[9]]:!0,"mdc-tab__content":!0})},rr(o[24],"content$")],he={};for(let ve=0;ve<ee.length;ve+=1)he=Ct(he,ee[ve]);let re=!o[6]&&cv(o);return{c(){e=_i("span"),O&&O.c(),n=qn(),Y&&Y.c(),v=qn(),re&&re.c(),c=qn(),h=_i("span"),this.h()},l(ve){e=vi(ve,"SPAN",{class:!0});var se=mi(e);O&&O.l(se),n=Gn(se),Y&&Y.l(se),se.forEach(Qe),v=Gn(ve),re&&re.l(ve),c=Gn(ve),h=vi(ve,"SPAN",{class:!0}),mi(h).forEach(Qe),this.h()},h(){di(e,he),ii(h,"class","mdc-tab__ripple")},m(ve,se){Ut(ve,e,se),O&&O.m(e,null),sn(e,n),Y&&Y.m(e,null),o[32](e),Ut(ve,v,se),re&&re.m(ve,se),Ut(ve,c,se),Ut(ve,h,se),S=!0,P||(D=Ei(f=Hn.call(null,e,o[8])),P=!0)},p(ve,se){O&&O.p&&(!S||se[1]&32)&&gn(O,R,ve,ve[36],S?_n(R,ve[36],se,null):yn(ve[36]),null),ve[6]?Y?(Y.p(ve,se),se[0]&64&&rt(Y,1)):(Y=uv(ve),Y.c(),rt(Y,1),Y.m(e,null)):Y&&(Or(),ft(Y,1,1,()=>{Y=null}),Rr()),di(e,he=en(ee,[(!S||se[0]&512&&s!==(s=wi({[ve[9]]:!0,"mdc-tab__content":!0})))&&{class:s},se[0]&16777216&&rr(ve[24],"content$")])),f&&Rn(f.update)&&se[0]&256&&f.update.call(null,ve[8]),ve[6]?re&&(Or(),ft(re,1,1,()=>{re=null}),Rr()):re?(re.p(ve,se),se[0]&64&&rt(re,1)):(re=cv(ve),re.c(),rt(re,1),re.m(c.parentNode,c))},i(ve){S||(rt(O,ve),rt(Y),rt(re),S=!0)},o(ve){ft(O,ve),ft(Y),ft(re),S=!1},d(ve){ve&&Qe(e),O&&O.d(ve),Y&&Y.d(),o[32](null),ve&&Qe(v),re&&re.d(ve),ve&&Qe(c),ve&&Qe(h),P=!1,D()}}}function M2(o){let e,n,s;const f=[{use:[[$c,{ripple:o[3],unbounded:!1,addClass:o[21],removeClass:o[22],addStyle:o[23]}],o[20],...o[0]]},{class:wi(tr({[o[1]]:!0,"mdc-tab":!0,"mdc-tab--active":o[18],"mdc-tab--stacked":o[4],"mdc-tab--min-width":o[5]},o[15]))},{style:Object.entries(o[16]).map(hv).concat([o[2]]).join(" ")},{role:"tab"},{"aria-selected":o[18]?"true":"false"},{tabindex:o[18]||o[19]?"0":"-1"},{href:o[7]},o[17],_s(o[24],["content$","tabIndicator$"])];var v=o[10];function c(h){let S={$$slots:{default:[k2]},$$scope:{ctx:h}};for(let P=0;P<f.length;P+=1)S=Ct(S,f[P]);return{props:S}}return v&&(e=new v(c(o)),o[34](e),e.$on("click",o[35])),{c(){e&&Ni(e.$$.fragment),n=bn()},l(h){e&&$i(e.$$.fragment,h),n=bn()},m(h,S){e&&Vi(e,h,S),Ut(h,n,S),s=!0},p(h,S){const P=S[0]&33521855?en(f,[S[0]&15728649&&{use:[[$c,{ripple:h[3],unbounded:!1,addClass:h[21],removeClass:h[22],addStyle:h[23]}],h[20],...h[0]]},S[0]&294962&&{class:wi(tr({[h[1]]:!0,"mdc-tab":!0,"mdc-tab--active":h[18],"mdc-tab--stacked":h[4],"mdc-tab--min-width":h[5]},h[15]))},S[0]&65540&&{style:Object.entries(h[16]).map(hv).concat([h[2]]).join(" ")},f[3],S[0]&262144&&{"aria-selected":h[18]?"true":"false"},S[0]&786432&&{tabindex:h[18]||h[19]?"0":"-1"},S[0]&128&&{href:h[7]},S[0]&131072&&Xr(h[17]),S[0]&16777216&&Xr(_s(h[24],["content$","tabIndicator$"]))]):{};if(S[0]&17064768|S[1]&32&&(P.$$scope={dirty:S,ctx:h}),v!==(v=h[10])){if(e){Or();const D=e;ft(D.$$.fragment,1,0,()=>{ji(D,1)}),Rr()}v?(e=new v(c(h)),h[34](e),e.$on("click",h[35]),Ni(e.$$.fragment),rt(e.$$.fragment,1),Vi(e,n.parentNode,n)):e=null}else v&&e.$set(P)},i(h){s||(e&&rt(e.$$.fragment,h),s=!0)},o(h){e&&ft(e.$$.fragment,h),s=!1},d(h){o[34](null),h&&Qe(n),e&&ji(e,h)}}}const hv=([o,e])=>`${o}: ${e};`;function L2(o,e,n){const s=["use","class","style","tab","ripple","stacked","minWidth","indicatorSpanOnlyContent","href","content$use","content$class","component","activate","deactivate","focus","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,{style:D=""}=e,{tab:R}=e,{ripple:O=!0}=e,{stacked:Y=!1}=e,{minWidth:ee=!1}=e,{indicatorSpanOnlyContent:he=!1}=e,{href:re=void 0}=e,{content$use:ve=[]}=e,{content$class:se=""}=e,we,Ge,Ue,He,fe={},ut={},at={},je=Dr("SMUI:tab:focusOnActivate"),Fe=R===Dr("SMUI:tab:initialActive"),Dt=!1,{component:qe=re==null?X0:My}=e;if(sr("SMUI:label:context","tab"),sr("SMUI:icon:context","tab"),!R)throw new Error("The tab property is required! It should be passed down from the TabBar to the Tab.");Fo(()=>{n(11,Ge=new w2({setAttr:Je,addClass:li,removeClass:Et,hasClass:Mt,activateIndicator:It=>He.activate(It),deactivateIndicator:()=>He.deactivate(),notifyInteracted:()=>Un(Xt(),"SMUITab:interacted",{tabId:R},void 0,!0),getOffsetLeft:()=>Xt().offsetLeft,getOffsetWidth:()=>Xt().offsetWidth,getContentOffsetLeft:()=>Ue.offsetLeft,getContentOffsetWidth:()=>Ue.offsetWidth,focus:ni}));const ht={tabId:R,get element(){return Xt()},get active(){return Fe},forceAccessible(It){n(19,Dt=It)},computeIndicatorClientRect:()=>He.computeContentClientRect(),computeDimensions:()=>Ge.computeDimensions(),focus:ni,activate:wt,deactivate:Pt};return Un(Xt(),"SMUITab:mount",ht),Ge.init(),()=>{Un(Xt(),"SMUITab:unmount",ht),Ge.destroy()}});function Mt(ht){return ht in fe?fe[ht]:Xt().classList.contains(ht)}function li(ht){fe[ht]||n(15,fe[ht]=!0,fe)}function Et(ht){(!(ht in fe)||fe[ht])&&n(15,fe[ht]=!1,fe)}function Gt(ht,It){ut[ht]!=It&&(It===""||It==null?(delete ut[ht],n(16,ut)):n(16,ut[ht]=It,ut))}function Je(ht,It){at[ht]!==It&&n(17,at[ht]=It,at)}function wt(ht,It){n(18,Fe=!0),It&&Ge.setFocusOnActivate(!1),Ge.activate(ht),It&&Ge.setFocusOnActivate(je)}function Pt(){n(18,Fe=!1),Ge.deactivate()}function ni(){Xt().focus()}function Xt(){return we.getElement()}function Xi(ht){Zi[ht?"unshift":"push"](()=>{He=ht,n(14,He)})}function ei(ht){Zi[ht?"unshift":"push"](()=>{Ue=ht,n(13,Ue)})}function Jt(ht){Zi[ht?"unshift":"push"](()=>{He=ht,n(14,He)})}function bi(ht){Zi[ht?"unshift":"push"](()=>{we=ht,n(12,we)})}const ai=()=>Ge&&Ge.handleClick();return o.$$set=ht=>{e=Ct(Ct({},e),Qn(ht)),n(24,f=xi(e,s)),"use"in ht&&n(0,S=ht.use),"class"in ht&&n(1,P=ht.class),"style"in ht&&n(2,D=ht.style),"tab"in ht&&n(25,R=ht.tab),"ripple"in ht&&n(3,O=ht.ripple),"stacked"in ht&&n(4,Y=ht.stacked),"minWidth"in ht&&n(5,ee=ht.minWidth),"indicatorSpanOnlyContent"in ht&&n(6,he=ht.indicatorSpanOnlyContent),"href"in ht&&n(7,re=ht.href),"content$use"in ht&&n(8,ve=ht.content$use),"content$class"in ht&&n(9,se=ht.content$class),"component"in ht&&n(10,qe=ht.component),"$$scope"in ht&&n(36,c=ht.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&2048&&Ge&&Ge.setFocusOnActivate(je)},[S,P,D,O,Y,ee,he,re,ve,se,qe,Ge,we,Ue,He,fe,ut,at,Fe,Dt,h,li,Et,Gt,f,R,wt,Pt,ni,Xt,v,Xi,ei,Jt,bi,ai,c]}class P2 extends Tn{constructor(e){super(),An(this,e,L2,M2,Sn,{use:0,class:1,style:2,tab:25,ripple:3,stacked:4,minWidth:5,indicatorSpanOnlyContent:6,href:7,content$use:8,content$class:9,component:10,activate:26,deactivate:27,focus:28,getElement:29},null,[-1,-1])}get activate(){return this.$$.ctx[26]}get deactivate(){return this.$$.ctx[27]}get focus(){return this.$$.ctx[28]}get getElement(){return this.$$.ctx[29]}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var e1={ANIMATING:"mdc-tab-scroller--animating",SCROLL_AREA_SCROLL:"mdc-tab-scroller__scroll-area--scroll",SCROLL_TEST:"mdc-tab-scroller__test"},z2={AREA_SELECTOR:".mdc-tab-scroller__scroll-area",CONTENT_SELECTOR:".mdc-tab-scroller__scroll-content"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ly=function(){function o(e){this.adapter=e}return o}();/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var D2=function(o){yo(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.getScrollPositionRTL=function(){var n=this.adapter.getScrollAreaScrollLeft(),s=this.calculateScrollEdges().right;return Math.round(s-n)},e.prototype.scrollToRTL=function(n){var s=this.calculateScrollEdges(),f=this.adapter.getScrollAreaScrollLeft(),v=this.clampScrollValue(s.right-n);return{finalScrollPosition:v,scrollDelta:v-f}},e.prototype.incrementScrollRTL=function(n){var s=this.adapter.getScrollAreaScrollLeft(),f=this.clampScrollValue(s-n);return{finalScrollPosition:f,scrollDelta:f-s}},e.prototype.getAnimatingScrollPosition=function(n){return n},e.prototype.calculateScrollEdges=function(){var n=this.adapter.getScrollContentOffsetWidth(),s=this.adapter.getScrollAreaOffsetWidth();return{left:0,right:n-s}},e.prototype.clampScrollValue=function(n){var s=this.calculateScrollEdges();return Math.min(Math.max(s.left,n),s.right)},e}(Ly);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var R2=function(o){yo(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.getScrollPositionRTL=function(n){var s=this.adapter.getScrollAreaScrollLeft();return Math.round(n-s)},e.prototype.scrollToRTL=function(n){var s=this.adapter.getScrollAreaScrollLeft(),f=this.clampScrollValue(-n);return{finalScrollPosition:f,scrollDelta:f-s}},e.prototype.incrementScrollRTL=function(n){var s=this.adapter.getScrollAreaScrollLeft(),f=this.clampScrollValue(s-n);return{finalScrollPosition:f,scrollDelta:f-s}},e.prototype.getAnimatingScrollPosition=function(n,s){return n-s},e.prototype.calculateScrollEdges=function(){var n=this.adapter.getScrollContentOffsetWidth(),s=this.adapter.getScrollAreaOffsetWidth();return{left:s-n,right:0}},e.prototype.clampScrollValue=function(n){var s=this.calculateScrollEdges();return Math.max(Math.min(s.right,n),s.left)},e}(Ly);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var O2=function(o){yo(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.getScrollPositionRTL=function(n){var s=this.adapter.getScrollAreaScrollLeft();return Math.round(s-n)},e.prototype.scrollToRTL=function(n){var s=this.adapter.getScrollAreaScrollLeft(),f=this.clampScrollValue(n);return{finalScrollPosition:f,scrollDelta:s-f}},e.prototype.incrementScrollRTL=function(n){var s=this.adapter.getScrollAreaScrollLeft(),f=this.clampScrollValue(s+n);return{finalScrollPosition:f,scrollDelta:s-f}},e.prototype.getAnimatingScrollPosition=function(n,s){return n+s},e.prototype.calculateScrollEdges=function(){var n=this.adapter.getScrollContentOffsetWidth(),s=this.adapter.getScrollAreaOffsetWidth();return{left:n-s,right:0}},e.prototype.clampScrollValue=function(n){var s=this.calculateScrollEdges();return Math.min(Math.max(s.right,n),s.left)},e}(Ly);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var B2=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.isAnimating=!1,s}return Object.defineProperty(e,"cssClasses",{get:function(){return e1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return z2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{eventTargetMatchesSelector:function(){return!1},addClass:function(){},removeClass:function(){},addScrollAreaClass:function(){},setScrollAreaStyleProperty:function(){},setScrollContentStyleProperty:function(){},getScrollContentStyleValue:function(){return""},setScrollAreaScrollLeft:function(){},getScrollAreaScrollLeft:function(){return 0},getScrollContentOffsetWidth:function(){return 0},getScrollAreaOffsetWidth:function(){return 0},computeScrollAreaClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeScrollContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeHorizontalScrollbarHeight:function(){return 0}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=this.adapter.computeHorizontalScrollbarHeight();this.adapter.setScrollAreaStyleProperty("margin-bottom",-n+"px"),this.adapter.addScrollAreaClass(e.cssClasses.SCROLL_AREA_SCROLL)},e.prototype.getScrollPosition=function(){if(this.isRTL())return this.computeCurrentScrollPositionRTL();var n=this.calculateCurrentTranslateX(),s=this.adapter.getScrollAreaScrollLeft();return s-n},e.prototype.handleInteraction=function(){!this.isAnimating||this.stopScrollAnimation()},e.prototype.handleTransitionEnd=function(n){var s=n.target;!this.isAnimating||!this.adapter.eventTargetMatchesSelector(s,e.strings.CONTENT_SELECTOR)||(this.isAnimating=!1,this.adapter.removeClass(e.cssClasses.ANIMATING))},e.prototype.incrementScroll=function(n){n!==0&&this.animate(this.getIncrementScrollOperation(n))},e.prototype.incrementScrollImmediate=function(n){if(n!==0){var s=this.getIncrementScrollOperation(n);s.scrollDelta!==0&&(this.stopScrollAnimation(),this.adapter.setScrollAreaScrollLeft(s.finalScrollPosition))}},e.prototype.scrollTo=function(n){if(this.isRTL()){this.scrollToImplRTL(n);return}this.scrollToImpl(n)},e.prototype.getRTLScroller=function(){return this.rtlScrollerInstance||(this.rtlScrollerInstance=this.rtlScrollerFactory()),this.rtlScrollerInstance},e.prototype.calculateCurrentTranslateX=function(){var n=this.adapter.getScrollContentStyleValue("transform");if(n==="none")return 0;var s=/\((.+?)\)/.exec(n);if(!s)return 0;var f=s[1],v=ex(f.split(","),6);v[0],v[1],v[2],v[3];var c=v[4];return v[5],parseFloat(c)},e.prototype.clampScrollValue=function(n){var s=this.calculateScrollEdges();return Math.min(Math.max(s.left,n),s.right)},e.prototype.computeCurrentScrollPositionRTL=function(){var n=this.calculateCurrentTranslateX();return this.getRTLScroller().getScrollPositionRTL(n)},e.prototype.calculateScrollEdges=function(){var n=this.adapter.getScrollContentOffsetWidth(),s=this.adapter.getScrollAreaOffsetWidth();return{left:0,right:n-s}},e.prototype.scrollToImpl=function(n){var s=this.getScrollPosition(),f=this.clampScrollValue(n),v=f-s;this.animate({finalScrollPosition:f,scrollDelta:v})},e.prototype.scrollToImplRTL=function(n){var s=this.getRTLScroller().scrollToRTL(n);this.animate(s)},e.prototype.getIncrementScrollOperation=function(n){if(this.isRTL())return this.getRTLScroller().incrementScrollRTL(n);var s=this.getScrollPosition(),f=n+s,v=this.clampScrollValue(f),c=v-s;return{finalScrollPosition:v,scrollDelta:c}},e.prototype.animate=function(n){var s=this;n.scrollDelta!==0&&(this.stopScrollAnimation(),this.adapter.setScrollAreaScrollLeft(n.finalScrollPosition),this.adapter.setScrollContentStyleProperty("transform","translateX("+n.scrollDelta+"px)"),this.adapter.computeScrollAreaClientRect(),requestAnimationFrame(function(){s.adapter.addClass(e.cssClasses.ANIMATING),s.adapter.setScrollContentStyleProperty("transform","none")}),this.isAnimating=!0)},e.prototype.stopScrollAnimation=function(){this.isAnimating=!1;var n=this.getAnimatingScrollPosition();this.adapter.removeClass(e.cssClasses.ANIMATING),this.adapter.setScrollContentStyleProperty("transform","translateX(0px)"),this.adapter.setScrollAreaScrollLeft(n)},e.prototype.getAnimatingScrollPosition=function(){var n=this.calculateCurrentTranslateX(),s=this.adapter.getScrollAreaScrollLeft();return this.isRTL()?this.getRTLScroller().getAnimatingScrollPosition(s,n):s-n},e.prototype.rtlScrollerFactory=function(){var n=this.adapter.getScrollAreaScrollLeft();this.adapter.setScrollAreaScrollLeft(n-1);var s=this.adapter.getScrollAreaScrollLeft();if(s<0)return this.adapter.setScrollAreaScrollLeft(n),new R2(this.adapter);var f=this.adapter.computeScrollAreaClientRect(),v=this.adapter.computeScrollContentClientRect(),c=Math.round(v.right-f.right);return this.adapter.setScrollAreaScrollLeft(n),c===s?new O2(this.adapter):new D2(this.adapter)},e.prototype.isRTL=function(){return this.adapter.getScrollContentStyleValue("direction")==="rtl"},e}(Na);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Wg;function F2(o,e){if(e===void 0&&(e=!0),e&&typeof Wg!="undefined")return Wg;var n=o.createElement("div");n.classList.add(e1.SCROLL_TEST),o.body.appendChild(n);var s=n.offsetHeight-n.clientHeight;return o.body.removeChild(n),e&&(Wg=s),s}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ka={ARROW_LEFT_KEY:"ArrowLeft",ARROW_RIGHT_KEY:"ArrowRight",END_KEY:"End",ENTER_KEY:"Enter",HOME_KEY:"Home",SPACE_KEY:"Space",TAB_ACTIVATED_EVENT:"MDCTabBar:activated",TAB_SCROLLER_SELECTOR:".mdc-tab-scroller",TAB_SELECTOR:".mdc-tab"},Ou={ARROW_LEFT_KEYCODE:37,ARROW_RIGHT_KEYCODE:39,END_KEYCODE:35,ENTER_KEYCODE:13,EXTRA_SCROLL_AMOUNT:20,HOME_KEYCODE:36,SPACE_KEYCODE:32};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ad=new Set;Ad.add(ka.ARROW_LEFT_KEY);Ad.add(ka.ARROW_RIGHT_KEY);Ad.add(ka.END_KEY);Ad.add(ka.HOME_KEY);Ad.add(ka.ENTER_KEY);Ad.add(ka.SPACE_KEY);var Cd=new Map;Cd.set(Ou.ARROW_LEFT_KEYCODE,ka.ARROW_LEFT_KEY);Cd.set(Ou.ARROW_RIGHT_KEYCODE,ka.ARROW_RIGHT_KEY);Cd.set(Ou.END_KEYCODE,ka.END_KEY);Cd.set(Ou.HOME_KEYCODE,ka.HOME_KEY);Cd.set(Ou.ENTER_KEYCODE,ka.ENTER_KEY);Cd.set(Ou.SPACE_KEYCODE,ka.SPACE_KEY);var U2=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.useAutomaticActivation=!1,s}return Object.defineProperty(e,"strings",{get:function(){return ka},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Ou},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{scrollTo:function(){},incrementScroll:function(){},getScrollPosition:function(){return 0},getScrollContentWidth:function(){return 0},getOffsetWidth:function(){return 0},isRTL:function(){return!1},setActiveTab:function(){},activateTabAtIndex:function(){},deactivateTabAtIndex:function(){},focusTabAtIndex:function(){},getTabIndicatorClientRectAtIndex:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getTabDimensionsAtIndex:function(){return{rootLeft:0,rootRight:0,contentLeft:0,contentRight:0}},getPreviousActiveTabIndex:function(){return-1},getFocusedTabIndex:function(){return-1},getIndexOfTabById:function(){return-1},getTabListLength:function(){return 0},notifyTabActivated:function(){}}},enumerable:!1,configurable:!0}),e.prototype.setUseAutomaticActivation=function(n){this.useAutomaticActivation=n},e.prototype.activateTab=function(n){var s=this.adapter.getPreviousActiveTabIndex();if(!(!this.indexIsInRange(n)||n===s)){var f;s!==-1&&(this.adapter.deactivateTabAtIndex(s),f=this.adapter.getTabIndicatorClientRectAtIndex(s)),this.adapter.activateTabAtIndex(n,f),this.scrollIntoView(n),this.adapter.notifyTabActivated(n)}},e.prototype.handleKeyDown=function(n){var s=this.getKeyFromEvent(n);if(s!==void 0)if(this.isActivationKey(s)||n.preventDefault(),this.useAutomaticActivation){if(this.isActivationKey(s))return;var f=this.determineTargetFromKey(this.adapter.getPreviousActiveTabIndex(),s);this.adapter.setActiveTab(f),this.scrollIntoView(f)}else{var v=this.adapter.getFocusedTabIndex();if(this.isActivationKey(s))this.adapter.setActiveTab(v);else{var f=this.determineTargetFromKey(v,s);this.adapter.focusTabAtIndex(f),this.scrollIntoView(f)}}},e.prototype.handleTabInteraction=function(n){this.adapter.setActiveTab(this.adapter.getIndexOfTabById(n.detail.tabId))},e.prototype.scrollIntoView=function(n){if(!!this.indexIsInRange(n)){if(n===0){this.adapter.scrollTo(0);return}if(n===this.adapter.getTabListLength()-1){this.adapter.scrollTo(this.adapter.getScrollContentWidth());return}if(this.isRTL()){this.scrollIntoViewImplRTL(n);return}this.scrollIntoViewImpl(n)}},e.prototype.determineTargetFromKey=function(n,s){var f=this.isRTL(),v=this.adapter.getTabListLength()-1,c=s===ka.END_KEY,h=s===ka.ARROW_LEFT_KEY&&!f||s===ka.ARROW_RIGHT_KEY&&f,S=s===ka.ARROW_RIGHT_KEY&&!f||s===ka.ARROW_LEFT_KEY&&f,P=n;return c?P=v:h?P-=1:S?P+=1:P=0,P<0?P=v:P>v&&(P=0),P},e.prototype.calculateScrollIncrement=function(n,s,f,v){var c=this.adapter.getTabDimensionsAtIndex(s),h=c.contentLeft-f-v,S=c.contentRight-f,P=S-Ou.EXTRA_SCROLL_AMOUNT,D=h+Ou.EXTRA_SCROLL_AMOUNT;return s<n?Math.min(P,0):Math.max(D,0)},e.prototype.calculateScrollIncrementRTL=function(n,s,f,v,c){var h=this.adapter.getTabDimensionsAtIndex(s),S=c-h.contentLeft-f,P=c-h.contentRight-f-v,D=P+Ou.EXTRA_SCROLL_AMOUNT,R=S-Ou.EXTRA_SCROLL_AMOUNT;return s>n?Math.max(D,0):Math.min(R,0)},e.prototype.findAdjacentTabIndexClosestToEdge=function(n,s,f,v){var c=s.rootLeft-f,h=s.rootRight-f-v,S=c+h,P=c<0||S<0,D=h>0||S>0;return P?n-1:D?n+1:-1},e.prototype.findAdjacentTabIndexClosestToEdgeRTL=function(n,s,f,v,c){var h=c-s.rootLeft-v-f,S=c-s.rootRight-f,P=h+S,D=h>0||P>0,R=S<0||P<0;return D?n+1:R?n-1:-1},e.prototype.getKeyFromEvent=function(n){return Ad.has(n.key)?n.key:Cd.get(n.keyCode)},e.prototype.isActivationKey=function(n){return n===ka.SPACE_KEY||n===ka.ENTER_KEY},e.prototype.indexIsInRange=function(n){return n>=0&&n<this.adapter.getTabListLength()},e.prototype.isRTL=function(){return this.adapter.isRTL()},e.prototype.scrollIntoViewImpl=function(n){var s=this.adapter.getScrollPosition(),f=this.adapter.getOffsetWidth(),v=this.adapter.getTabDimensionsAtIndex(n),c=this.findAdjacentTabIndexClosestToEdge(n,v,s,f);if(!!this.indexIsInRange(c)){var h=this.calculateScrollIncrement(n,c,s,f);this.adapter.incrementScroll(h)}},e.prototype.scrollIntoViewImplRTL=function(n){var s=this.adapter.getScrollPosition(),f=this.adapter.getOffsetWidth(),v=this.adapter.getTabDimensionsAtIndex(n),c=this.adapter.getScrollContentWidth(),h=this.findAdjacentTabIndexClosestToEdgeRTL(n,v,s,f,c);if(!!this.indexIsInRange(h)){var S=this.calculateScrollIncrementRTL(n,h,s,f,c);this.adapter.incrementScroll(S)}},e}(Na);function N2(o){let e,n,s,f,v,c,h,S,P,D,R,O,Y,ee;const he=o[23].default,re=mn(he,o,o[22],null);let ve=[{class:f=wi({[o[6]]:!0,"mdc-tab-scroller__scroll-content":!0})},{style:v=Object.entries(o[14]).map(dv).join(" ")},rr(o[16],"scrollContent$")],se={};for(let fe=0;fe<ve.length;fe+=1)se=Ct(se,ve[fe]);let we=[{class:h=wi(tr({[o[4]]:!0,"mdc-tab-scroller__scroll-area":!0},o[12]))},{style:S=Object.entries(o[13]).map(pv).join(" ")},rr(o[16],"scrollArea$")],Ge={};for(let fe=0;fe<we.length;fe+=1)Ge=Ct(Ge,we[fe]);let Ue=[{class:D=wi(tr({[o[1]]:!0,"mdc-tab-scroller":!0,"mdc-tab-scroller--align-start":o[2]==="start","mdc-tab-scroller--align-end":o[2]==="end","mdc-tab-scroller--align-center":o[2]==="center"},o[11]))},_s(o[16],["scrollArea$","scrollContent$"])],He={};for(let fe=0;fe<Ue.length;fe+=1)He=Ct(He,Ue[fe]);return{c(){e=_i("div"),n=_i("div"),s=_i("div"),re&&re.c(),this.h()},l(fe){e=vi(fe,"DIV",{class:!0});var ut=mi(e);n=vi(ut,"DIV",{class:!0,style:!0});var at=mi(n);s=vi(at,"DIV",{class:!0,style:!0});var je=mi(s);re&&re.l(je),je.forEach(Qe),at.forEach(Qe),ut.forEach(Qe),this.h()},h(){di(s,se),di(n,Ge),di(e,He)},m(fe,ut){Ut(fe,e,ut),sn(e,n),sn(n,s),re&&re.m(s,null),o[24](s),o[26](n),o[32](e),O=!0,Y||(ee=[Ei(c=Hn.call(null,s,o[5])),In(s,"transitionend",o[25]),Ei(P=Hn.call(null,n,o[3])),In(n,"wheel",o[27],{passive:!0}),In(n,"touchstart",o[28],{passive:!0}),In(n,"pointerdown",o[29]),In(n,"mousedown",o[30]),In(n,"keydown",o[31]),Ei(R=Hn.call(null,e,o[0])),Ei(o[15].call(null,e))],Y=!0)},p(fe,ut){re&&re.p&&(!O||ut[0]&4194304)&&gn(re,he,fe,fe[22],O?_n(he,fe[22],ut,null):yn(fe[22]),null),di(s,se=en(ve,[(!O||ut[0]&64&&f!==(f=wi({[fe[6]]:!0,"mdc-tab-scroller__scroll-content":!0})))&&{class:f},(!O||ut[0]&16384&&v!==(v=Object.entries(fe[14]).map(dv).join(" ")))&&{style:v},ut[0]&65536&&rr(fe[16],"scrollContent$")])),c&&Rn(c.update)&&ut[0]&32&&c.update.call(null,fe[5]),di(n,Ge=en(we,[(!O||ut[0]&4112&&h!==(h=wi(tr({[fe[4]]:!0,"mdc-tab-scroller__scroll-area":!0},fe[12]))))&&{class:h},(!O||ut[0]&8192&&S!==(S=Object.entries(fe[13]).map(pv).join(" ")))&&{style:S},ut[0]&65536&&rr(fe[16],"scrollArea$")])),P&&Rn(P.update)&&ut[0]&8&&P.update.call(null,fe[3]),di(e,He=en(Ue,[(!O||ut[0]&2054&&D!==(D=wi(tr({[fe[1]]:!0,"mdc-tab-scroller":!0,"mdc-tab-scroller--align-start":fe[2]==="start","mdc-tab-scroller--align-end":fe[2]==="end","mdc-tab-scroller--align-center":fe[2]==="center"},fe[11]))))&&{class:D},ut[0]&65536&&_s(fe[16],["scrollArea$","scrollContent$"])])),R&&Rn(R.update)&&ut[0]&1&&R.update.call(null,fe[0])},i(fe){O||(rt(re,fe),O=!0)},o(fe){ft(re,fe),O=!1},d(fe){fe&&Qe(e),re&&re.d(fe),o[24](null),o[26](null),o[32](null),Y=!1,Tr(ee)}}}const dv=([o,e])=>`${o}: ${e};`,pv=([o,e])=>`${o}: ${e};`;function V2(o,e,n){const s=["use","class","align","scrollArea$use","scrollArea$class","scrollContent$use","scrollContent$class","getScrollPosition","getScrollContentWidth","incrementScroll","scrollTo","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const{matches:h}=yf,S=$n(Yn());let{use:P=[]}=e,{class:D=""}=e,{align:R=void 0}=e,{scrollArea$use:O=[]}=e,{scrollArea$class:Y=""}=e,{scrollContent$use:ee=[]}=e,{scrollContent$class:he=""}=e,re,ve,se,we,Ge={},Ue={},He={},fe={};Fo(()=>(n(8,ve=new B2({eventTargetMatchesSelector:(ht,It)=>h(ht,It),addClass:ut,removeClass:at,addScrollAreaClass:je,setScrollAreaStyleProperty:Fe,setScrollContentStyleProperty:Dt,getScrollContentStyleValue:qe,setScrollAreaScrollLeft:ht=>n(9,se.scrollLeft=ht,se),getScrollAreaScrollLeft:()=>se.scrollLeft,getScrollContentOffsetWidth:()=>we.offsetWidth,getScrollAreaOffsetWidth:()=>se.offsetWidth,computeScrollAreaClientRect:()=>se.getBoundingClientRect(),computeScrollContentClientRect:()=>we.getBoundingClientRect(),computeHorizontalScrollbarHeight:()=>F2(document)})),ve.init(),()=>{ve.destroy()}));function ut(ht){Ge[ht]||n(11,Ge[ht]=!0,Ge)}function at(ht){(!(ht in Ge)||Ge[ht])&&n(11,Ge[ht]=!1,Ge)}function je(ht){Ue[ht]||n(12,Ue[ht]=!0,Ue)}function Fe(ht,It){He[ht]!=It&&(It===""||It==null?(delete He[ht],n(13,He)):n(13,He[ht]=It,He))}function Dt(ht,It){fe[ht]!=It&&(It===""||It==null?(delete fe[ht],n(14,fe)):n(14,fe[ht]=It,fe))}function qe(ht){return ht in fe?fe[ht]:getComputedStyle(we).getPropertyValue(ht)}function Mt(){return ve.getScrollPosition()}function li(){return we.offsetWidth}function Et(ht){ve.incrementScroll(ht)}function Gt(ht){ve.scrollTo(ht)}function Je(){return re}function wt(ht){Zi[ht?"unshift":"push"](()=>{we=ht,n(10,we)})}const Pt=ht=>ve&&ve.handleTransitionEnd(ht);function ni(ht){Zi[ht?"unshift":"push"](()=>{se=ht,n(9,se)})}const Xt=()=>ve&&ve.handleInteraction(),Xi=()=>ve&&ve.handleInteraction(),ei=()=>ve&&ve.handleInteraction(),Jt=()=>ve&&ve.handleInteraction(),bi=()=>ve&&ve.handleInteraction();function ai(ht){Zi[ht?"unshift":"push"](()=>{re=ht,n(7,re)})}return o.$$set=ht=>{e=Ct(Ct({},e),Qn(ht)),n(16,f=xi(e,s)),"use"in ht&&n(0,P=ht.use),"class"in ht&&n(1,D=ht.class),"align"in ht&&n(2,R=ht.align),"scrollArea$use"in ht&&n(3,O=ht.scrollArea$use),"scrollArea$class"in ht&&n(4,Y=ht.scrollArea$class),"scrollContent$use"in ht&&n(5,ee=ht.scrollContent$use),"scrollContent$class"in ht&&n(6,he=ht.scrollContent$class),"$$scope"in ht&&n(22,c=ht.$$scope)},[P,D,R,O,Y,ee,he,re,ve,se,we,Ge,Ue,He,fe,S,f,Mt,li,Et,Gt,Je,c,v,wt,Pt,ni,Xt,Xi,ei,Jt,bi,ai]}class j2 extends Tn{constructor(e){super(),An(this,e,V2,N2,Sn,{use:0,class:1,align:2,scrollArea$use:3,scrollArea$class:4,scrollContent$use:5,scrollContent$class:6,getScrollPosition:17,getScrollContentWidth:18,incrementScroll:19,scrollTo:20,getElement:21},null,[-1,-1])}get getScrollPosition(){return this.$$.ctx[17]}get getScrollContentWidth(){return this.$$.ctx[18]}get incrementScroll(){return this.$$.ctx[19]}get scrollTo(){return this.$$.ctx[20]}get getElement(){return this.$$.ctx[21]}}function fv(o,e,n){const s=o.slice();return s[30]=e[n],s}const q2=o=>({tab:o[0]&4}),mv=o=>({tab:o[30]});function gv(o,e){let n,s;const f=e[20].default,v=mn(f,e,e[25],mv);return{key:o,first:null,c(){n=bn(),v&&v.c(),this.h()},l(c){n=bn(),v&&v.l(c),this.h()},h(){this.first=n},m(c,h){Ut(c,n,h),v&&v.m(c,h),s=!0},p(c,h){e=c,v&&v.p&&(!s||h[0]&33554436)&&gn(v,f,e,e[25],s?_n(f,e[25],h,q2):yn(e[25]),mv)},i(c){s||(rt(v,c),s=!0)},o(c){ft(v,c),s=!1},d(c){c&&Qe(n),v&&v.d(c)}}}function G2(o){let e=[],n=new Map,s,f,v=o[2];const c=h=>h[3](h[30]);for(let h=0;h<v.length;h+=1){let S=fv(o,v,h),P=c(S);n.set(P,e[h]=gv(P,S))}return{c(){for(let h=0;h<e.length;h+=1)e[h].c();s=bn()},l(h){for(let S=0;S<e.length;S+=1)e[S].l(h);s=bn()},m(h,S){for(let P=0;P<e.length;P+=1)e[P].m(h,S);Ut(h,s,S),f=!0},p(h,S){S[0]&33554444&&(v=h[2],Or(),e=Xb(e,S,c,1,h,v,n,s.parentNode,Kb,gv,s,fv),Rr())},i(h){if(!f){for(let S=0;S<v.length;S+=1)rt(e[S]);f=!0}},o(h){for(let S=0;S<e.length;S+=1)ft(e[S]);f=!1},d(h){for(let S=0;S<e.length;S+=1)e[S].d(h);h&&Qe(s)}}}function H2(o){let e,n,s,f,v,c,h;const S=[rr(o[10],"tabScroller$")];let P={$$slots:{default:[G2]},$$scope:{ctx:o}};for(let O=0;O<S.length;O+=1)P=Ct(P,S[O]);n=new j2({props:P}),o[21](n);let D=[{class:s=wi({[o[1]]:!0,"mdc-tab-bar":!0})},{role:"tablist"},_s(o[10],["tabScroller$"])],R={};for(let O=0;O<D.length;O+=1)R=Ct(R,D[O]);return{c(){e=_i("div"),Ni(n.$$.fragment),this.h()},l(O){e=vi(O,"DIV",{class:!0,role:!0});var Y=mi(e);$i(n.$$.fragment,Y),Y.forEach(Qe),this.h()},h(){di(e,R)},m(O,Y){Ut(O,e,Y),Vi(n,e,null),o[22](e),v=!0,c||(h=[Ei(f=Hn.call(null,e,o[0])),Ei(o[7].call(null,e)),In(e,"SMUITab:mount",o[8]),In(e,"SMUITab:unmount",o[9]),In(e,"SMUITab:interacted",o[23]),In(e,"keydown",o[24])],c=!0)},p(O,Y){const ee=Y[0]&1024?en(S,[Xr(rr(O[10],"tabScroller$"))]):{};Y[0]&33554436&&(ee.$$scope={dirty:Y,ctx:O}),n.$set(ee),di(e,R=en(D,[(!v||Y[0]&2&&s!==(s=wi({[O[1]]:!0,"mdc-tab-bar":!0})))&&{class:s},{role:"tablist"},Y[0]&1024&&_s(O[10],["tabScroller$"])])),f&&Rn(f.update)&&Y[0]&1&&f.update.call(null,O[0])},i(O){v||(rt(n.$$.fragment,O),v=!0)},o(O){ft(n.$$.fragment,O),v=!1},d(O){O&&Qe(e),o[21](null),ji(n),o[22](null),c=!1,Tr(h)}}}function Z2(o,e,n){const s=["use","class","tabs","key","focusOnActivate","focusOnProgrammatic","useAutomaticActivation","active","scrollIntoView","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,{tabs:D=[]}=e,{key:R=Je=>Je}=e,{focusOnActivate:O=!0}=e,{focusOnProgrammatic:Y=!1}=e,{useAutomaticActivation:ee=!0}=e,{active:he=void 0}=e,re,ve,se,we=D.indexOf(he),Ge={},Ue=new WeakMap,He=!1;sr("SMUI:tab:focusOnActivate",O),sr("SMUI:tab:initialActive",he),Fo(()=>(n(4,ve=new U2({scrollTo:Je=>se.scrollTo(Je),incrementScroll:Je=>se.incrementScroll(Je),getScrollPosition:()=>se.getScrollPosition(),getScrollContentWidth:()=>se.getScrollContentWidth(),getOffsetWidth:()=>qe().offsetWidth,isRTL:()=>getComputedStyle(qe()).getPropertyValue("direction")==="rtl",setActiveTab:Je=>{n(11,he=D[Je]),n(17,we=Je),ve.activateTab(Je)},activateTabAtIndex:(Je,wt)=>{var Pt;return(Pt=at(D[Je]))===null||Pt===void 0?void 0:Pt.activate(wt,He)},deactivateTabAtIndex:Je=>{var wt;return(wt=at(D[Je]))===null||wt===void 0?void 0:wt.deactivate()},focusTabAtIndex:Je=>{var wt;return(wt=at(D[Je]))===null||wt===void 0?void 0:wt.focus()},getTabIndicatorClientRectAtIndex:Je=>{var wt,Pt;return(Pt=(wt=at(D[Je]))===null||wt===void 0?void 0:wt.computeIndicatorClientRect())!==null&&Pt!==void 0?Pt:new DOMRect},getTabDimensionsAtIndex:Je=>{var wt,Pt;return(Pt=(wt=at(D[Je]))===null||wt===void 0?void 0:wt.computeDimensions())!==null&&Pt!==void 0?Pt:{rootLeft:0,rootRight:0,contentLeft:0,contentRight:0}},getPreviousActiveTabIndex:()=>{var Je;for(let wt=0;wt<D.length;wt++)if(!((Je=at(D[wt]))===null||Je===void 0)&&Je.active)return wt;return-1},getFocusedTabIndex:()=>{const Je=D.map(Pt=>{var ni;return(ni=at(Pt))===null||ni===void 0?void 0:ni.element}),wt=document.activeElement;return Je.indexOf(wt)},getIndexOfTabById:Je=>D.indexOf(Je),getTabListLength:()=>D.length,notifyTabActivated:Je=>Un(qe(),"SMUITabBar:activated",{index:Je},void 0,!0)})),ve.init(),()=>{ve.destroy()}));function fe(Je){const wt=Je.detail;je(wt.tabId,wt)}function ut(Je){const wt=Je.detail;Fe(wt.tabId)}function at(Je){return Je instanceof Object?Ue.get(Je):Ge[Je]}function je(Je,wt){Je instanceof Object?(Ue.set(Je,wt),n(19,Ue)):(n(18,Ge[Je]=wt,Ge),n(18,Ge))}function Fe(Je){Je instanceof Object?(Ue.delete(Je),n(19,Ue)):(delete Ge[Je],n(18,Ge))}function Dt(Je){ve.scrollIntoView(Je)}function qe(){return re}function Mt(Je){Zi[Je?"unshift":"push"](()=>{se=Je,n(6,se)})}function li(Je){Zi[Je?"unshift":"push"](()=>{re=Je,n(5,re)})}const Et=Je=>ve&&ve.handleTabInteraction(Je),Gt=Je=>ve&&ve.handleKeyDown(Je);return o.$$set=Je=>{e=Ct(Ct({},e),Qn(Je)),n(10,f=xi(e,s)),"use"in Je&&n(0,S=Je.use),"class"in Je&&n(1,P=Je.class),"tabs"in Je&&n(2,D=Je.tabs),"key"in Je&&n(3,R=Je.key),"focusOnActivate"in Je&&n(12,O=Je.focusOnActivate),"focusOnProgrammatic"in Je&&n(13,Y=Je.focusOnProgrammatic),"useAutomaticActivation"in Je&&n(14,ee=Je.useAutomaticActivation),"active"in Je&&n(11,he=Je.active),"$$scope"in Je&&n(25,c=Je.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&141332&&he!==D[we]&&(n(17,we=D.indexOf(he)),ve&&(He=!Y,ve.activateTab(we),He=!1)),o.$$.dirty[0]&917508&&D.length){const Je=D[0]instanceof Object?Ue.get(D[0]):Ge[D[0]];Je&&Je.forceAccessible(we===-1)}o.$$.dirty[0]&16400&&ve&&ve.setUseAutomaticActivation(ee)},[S,P,D,R,ve,re,se,h,fe,ut,f,he,O,Y,ee,Dt,qe,we,Ge,Ue,v,Mt,li,Et,Gt,c]}class W2 extends Tn{constructor(e){super(),An(this,e,Z2,H2,Sn,{use:0,class:1,tabs:2,key:3,focusOnActivate:12,focusOnProgrammatic:13,useAutomaticActivation:14,active:11,scrollIntoView:15,getElement:16},null,[-1,-1])}get scrollIntoView(){return this.$$.ctx[15]}get getElement(){return this.$$.ctx[16]}}const _f=Yl(null),yv=Yl(null),Py=Yl(null),zy=Yl(null);function X2(o){let e;const n=o[37].default,s=mn(n,o,o[43],null);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v[1]&4096)&&gn(s,n,f,f[43],e?_n(n,f[43],v,null):yn(f[43]),null)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function K2(o){let e,n,s;const f=[{use:[o[17],...o[0]]},{class:wi({[o[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":o[2],"mdc-deprecated-list--dense":o[3],"mdc-deprecated-list--textual-list":o[4],"mdc-deprecated-list--avatar-list":o[5]||o[18],"mdc-deprecated-list--icon-list":o[6],"mdc-deprecated-list--image-list":o[7],"mdc-deprecated-list--thumbnail-list":o[8],"mdc-deprecated-list--video-list":o[9],"mdc-deprecated-list--two-line":o[10],"smui-list--three-line":o[11]&&!o[10]})},{role:o[15]},o[23]];var v=o[12];function c(h){let S={$$slots:{default:[X2]},$$scope:{ctx:h}};for(let P=0;P<f.length;P+=1)S=Ct(S,f[P]);return{props:S}}return v&&(e=new v(c(o)),o[38](e),e.$on("keydown",o[39]),e.$on("focusin",o[40]),e.$on("focusout",o[41]),e.$on("click",o[42]),e.$on("SMUIListItem:mount",o[19]),e.$on("SMUIListItem:unmount",o[20]),e.$on("SMUI:action",o[21])),{c(){e&&Ni(e.$$.fragment),n=bn()},l(h){e&&$i(e.$$.fragment,h),n=bn()},m(h,S){e&&Vi(e,h,S),Ut(h,n,S),s=!0},p(h,S){const P=S[0]&8818687?en(f,[S[0]&131073&&{use:[h[17],...h[0]]},S[0]&266238&&{class:wi({[h[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":h[2],"mdc-deprecated-list--dense":h[3],"mdc-deprecated-list--textual-list":h[4],"mdc-deprecated-list--avatar-list":h[5]||h[18],"mdc-deprecated-list--icon-list":h[6],"mdc-deprecated-list--image-list":h[7],"mdc-deprecated-list--thumbnail-list":h[8],"mdc-deprecated-list--video-list":h[9],"mdc-deprecated-list--two-line":h[10],"smui-list--three-line":h[11]&&!h[10]})},S[0]&32768&&{role:h[15]},S[0]&8388608&&Xr(h[23])]):{};if(S[1]&4096&&(P.$$scope={dirty:S,ctx:h}),v!==(v=h[12])){if(e){Or();const D=e;ft(D.$$.fragment,1,0,()=>{ji(D,1)}),Rr()}v?(e=new v(c(h)),h[38](e),e.$on("keydown",h[39]),e.$on("focusin",h[40]),e.$on("focusout",h[41]),e.$on("click",h[42]),e.$on("SMUIListItem:mount",h[19]),e.$on("SMUIListItem:unmount",h[20]),e.$on("SMUI:action",h[21]),Ni(e.$$.fragment),rt(e.$$.fragment,1),Vi(e,n.parentNode,n)):e=null}else v&&e.$set(P)},i(h){s||(e&&rt(e.$$.fragment,h),s=!0)},o(h){e&&ft(e.$$.fragment,h),s=!1},d(h){o[38](null),h&&Qe(n),e&&ji(e,h)}}}function J2(o,e,n){const s=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","selectedIndex","radioList","checkList","hasTypeahead","component","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;var h;const{closest:S,matches:P}=yf,D=$n(Yn());let{use:R=[]}=e,{class:O=""}=e,{nonInteractive:Y=!1}=e,{dense:ee=!1}=e,{textualList:he=!1}=e,{avatarList:re=!1}=e,{iconList:ve=!1}=e,{imageList:se=!1}=e,{thumbnailList:we=!1}=e,{videoList:Ge=!1}=e,{twoLine:Ue=!1}=e,{threeLine:He=!1}=e,{vertical:fe=!0}=e,{wrapFocus:ut=(h=Dr("SMUI:list:wrapFocus"))!==null&&h!==void 0?h:!1}=e,{singleSelection:at=!1}=e,{selectedIndex:je=-1}=e,{radioList:Fe=!1}=e,{checkList:Dt=!1}=e,{hasTypeahead:qe=!1}=e,Mt,li,Et=[],Gt=Dr("SMUI:list:role"),Je=Dr("SMUI:list:nav");const wt=new WeakMap;let Pt=Dr("SMUI:dialog:selection"),ni=Dr("SMUI:addLayoutListener"),Xt,{component:Xi=Je?yw:_w}=e;sr("SMUI:list:nonInteractive",Y),sr("SMUI:separator:context","list"),Gt||(at?(Gt="listbox",sr("SMUI:list:item:role","option")):Fe?(Gt="radiogroup",sr("SMUI:list:item:role","radio")):Dt?(Gt="group",sr("SMUI:list:item:role","checkbox")):(Gt="list",sr("SMUI:list:item:role",void 0))),ni&&(Xt=ni(Zn)),Fo(()=>{n(13,li=new h2({addClassForElementIndex:St,focusItemAtIndex:ht,getAttributeForElementIndex:(Bt,Ki)=>{var Vn,Wn;return(Wn=(Vn=ai()[Bt])===null||Vn===void 0?void 0:Vn.getAttr(Ki))!==null&&Wn!==void 0?Wn:null},getFocusedElementIndex:()=>document.activeElement?ai().map(Bt=>Bt.element).indexOf(document.activeElement):-1,getListItemCount:()=>Et.length,getPrimaryTextAtIndex:ln,hasCheckboxAtIndex:Bt=>{var Ki,Vn;return(Vn=(Ki=ai()[Bt])===null||Ki===void 0?void 0:Ki.hasCheckbox)!==null&&Vn!==void 0?Vn:!1},hasRadioAtIndex:Bt=>{var Ki,Vn;return(Vn=(Ki=ai()[Bt])===null||Ki===void 0?void 0:Ki.hasRadio)!==null&&Vn!==void 0?Vn:!1},isCheckboxCheckedAtIndex:Bt=>{var Ki;const Vn=ai()[Bt];return(Ki=(Vn==null?void 0:Vn.hasCheckbox)&&Vn.checked)!==null&&Ki!==void 0?Ki:!1},isFocusInsideList:()=>Mt!=null&&Nn()!==document.activeElement&&Nn().contains(document.activeElement),isRootFocused:()=>Mt!=null&&document.activeElement===Nn(),listItemAtIndexHasClass:It,notifyAction:Bt=>{n(24,je=Bt),Mt!=null&&Un(Nn(),"SMUIList:action",{index:Bt},void 0,!0)},removeClassForElementIndex:Ji,setAttributeForElementIndex:Qt,setCheckedCheckboxOrRadioAtIndex:(Bt,Ki)=>{ai()[Bt].checked=Ki},setTabIndexForListItemChildren:(Bt,Ki)=>{const Vn=ai()[Bt],Wn="button:not(:disabled), a";Array.prototype.forEach.call(Vn.element.querySelectorAll(Wn),_o=>{_o.setAttribute("tabindex",Ki)})}}));const Ze={get element(){return Nn()},get items(){return Et},get typeaheadInProgress(){return li.isTypeaheadInProgress()},typeaheadMatchItem(Bt,Ki){return li.typeaheadMatchItem(Bt,Ki,!0)},getOrderedList:ai,focusItemAtIndex:ht,addClassForElementIndex:St,removeClassForElementIndex:Ji,setAttributeForElementIndex:Qt,removeAttributeForElementIndex:gt,getAttributeFromElementIndex:zi,getPrimaryTextAtIndex:ln};return Un(Nn(),"SMUIList:mount",Ze),li.init(),()=>{li.destroy()}}),eh(()=>{Xt&&Xt()});function ei(Ze){Et.push(Ze.detail),wt.set(Ze.detail.element,Ze.detail),at&&Ze.detail.selected&&n(24,je=Cn(Ze.detail.element)),Ze.stopPropagation()}function Jt(Ze){var Bt;const Ki=(Bt=Ze.detail&&Et.indexOf(Ze.detail))!==null&&Bt!==void 0?Bt:-1;Ki!==-1&&(Et.splice(Ki,1),Et=Et,wt.delete(Ze.detail.element)),Ze.stopPropagation()}function bi(Ze){if(Fe||Dt){const Bt=Cn(Ze.target);if(Bt!==-1){const Ki=ai()[Bt];Ki&&(Fe&&!Ki.checked||Dt)&&(Ki.checked=!Ki.checked,Ki.activateRipple(),window.requestAnimationFrame(()=>{Ki.deactivateRipple()}))}}}function ai(){return Mt==null?[]:[...Nn().children].map(Ze=>wt.get(Ze)).filter(Ze=>Ze&&Ze._smui_list_item_accessor)}function ht(Ze){const Bt=ai()[Ze];Bt&&"focus"in Bt.element&&Bt.element.focus()}function It(Ze,Bt){var Ki;const Vn=ai()[Ze];return(Ki=Vn&&Vn.hasClass(Bt))!==null&&Ki!==void 0?Ki:!1}function St(Ze,Bt){const Ki=ai()[Ze];Ki&&Ki.addClass(Bt)}function Ji(Ze,Bt){const Ki=ai()[Ze];Ki&&Ki.removeClass(Bt)}function Qt(Ze,Bt,Ki){const Vn=ai()[Ze];Vn&&Vn.addAttr(Bt,Ki)}function gt(Ze,Bt){const Ki=ai()[Ze];Ki&&Ki.removeAttr(Bt)}function zi(Ze,Bt){const Ki=ai()[Ze];return Ki?Ki.getAttr(Bt):null}function ln(Ze){var Bt;const Ki=ai()[Ze];return(Bt=Ki&&Ki.getPrimaryText())!==null&&Bt!==void 0?Bt:""}function Cn(Ze){const Bt=S(Ze,".mdc-deprecated-list-item, .mdc-deprecated-list");return Bt&&P(Bt,".mdc-deprecated-list-item")?ai().map(Ki=>Ki==null?void 0:Ki.element).indexOf(Bt):-1}function Zn(){return li.layout()}function Nr(Ze,Bt){return li.setEnabled(Ze,Bt)}function Kr(){return li.isTypeaheadInProgress()}function At(){return li.getSelectedIndex()}function Bi(){return li.getFocusedItemIndex()}function Nn(){return Mt.getElement()}function rn(Ze){Zi[Ze?"unshift":"push"](()=>{Mt=Ze,n(14,Mt)})}const Jn=Ze=>li&&li.handleKeydown(Ze,Ze.target.classList.contains("mdc-deprecated-list-item"),Cn(Ze.target)),Ln=Ze=>li&&li.handleFocusIn(Cn(Ze.target)),zt=Ze=>li&&li.handleFocusOut(Cn(Ze.target)),Oi=Ze=>li&&li.handleClick(Cn(Ze.target),!P(Ze.target,'input[type="checkbox"], input[type="radio"]'));return o.$$set=Ze=>{e=Ct(Ct({},e),Qn(Ze)),n(23,f=xi(e,s)),"use"in Ze&&n(0,R=Ze.use),"class"in Ze&&n(1,O=Ze.class),"nonInteractive"in Ze&&n(2,Y=Ze.nonInteractive),"dense"in Ze&&n(3,ee=Ze.dense),"textualList"in Ze&&n(4,he=Ze.textualList),"avatarList"in Ze&&n(5,re=Ze.avatarList),"iconList"in Ze&&n(6,ve=Ze.iconList),"imageList"in Ze&&n(7,se=Ze.imageList),"thumbnailList"in Ze&&n(8,we=Ze.thumbnailList),"videoList"in Ze&&n(9,Ge=Ze.videoList),"twoLine"in Ze&&n(10,Ue=Ze.twoLine),"threeLine"in Ze&&n(11,He=Ze.threeLine),"vertical"in Ze&&n(25,fe=Ze.vertical),"wrapFocus"in Ze&&n(26,ut=Ze.wrapFocus),"singleSelection"in Ze&&n(27,at=Ze.singleSelection),"selectedIndex"in Ze&&n(24,je=Ze.selectedIndex),"radioList"in Ze&&n(28,Fe=Ze.radioList),"checkList"in Ze&&n(29,Dt=Ze.checkList),"hasTypeahead"in Ze&&n(30,qe=Ze.hasTypeahead),"component"in Ze&&n(12,Xi=Ze.component),"$$scope"in Ze&&n(43,c=Ze.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&33562624&&li&&li.setVerticalOrientation(fe),o.$$.dirty[0]&67117056&&li&&li.setWrapFocus(ut),o.$$.dirty[0]&1073750016&&li&&li.setHasTypeahead(qe),o.$$.dirty[0]&134225920&&li&&li.setSingleSelection(at),o.$$.dirty[0]&151003136&&li&&at&&At()!==je&&li.setSelectedIndex(je)},[R,O,Y,ee,he,re,ve,se,we,Ge,Ue,He,Xi,li,Mt,Gt,P,D,Pt,ei,Jt,bi,Cn,f,je,fe,ut,at,Fe,Dt,qe,Zn,Nr,Kr,At,Bi,Nn,v,rn,Jn,Ln,zt,Oi,c]}class t1 extends Tn{constructor(e){super(),An(this,e,J2,K2,Sn,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:25,wrapFocus:26,singleSelection:27,selectedIndex:24,radioList:28,checkList:29,hasTypeahead:30,component:12,layout:31,setEnabled:32,getTypeaheadInProgress:33,getSelectedIndex:34,getFocusedItemIndex:35,getElement:36},null,[-1,-1])}get layout(){return this.$$.ctx[31]}get setEnabled(){return this.$$.ctx[32]}get getTypeaheadInProgress(){return this.$$.ctx[33]}get getSelectedIndex(){return this.$$.ctx[34]}get getFocusedItemIndex(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}function _v(o){let e;return{c(){e=_i("span"),this.h()},l(n){e=vi(n,"SPAN",{class:!0}),mi(e).forEach(Qe),this.h()},h(){ii(e,"class","mdc-deprecated-list-item__ripple")},m(n,s){Ut(n,e,s)},d(n){n&&Qe(e)}}}function Y2(o){let e,n,s=o[7]&&_v();const f=o[32].default,v=mn(f,o,o[35],null);return{c(){s&&s.c(),e=bn(),v&&v.c()},l(c){s&&s.l(c),e=bn(),v&&v.l(c)},m(c,h){s&&s.m(c,h),Ut(c,e,h),v&&v.m(c,h),n=!0},p(c,h){c[7]?s||(s=_v(),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),v&&v.p&&(!n||h[1]&16)&&gn(v,f,c,c[35],n?_n(f,c[35],h,null):yn(c[35]),null)},i(c){n||(rt(v,c),n=!0)},o(c){ft(v,c),n=!1},d(c){s&&s.d(c),c&&Qe(e),v&&v.d(c)}}}function Q2(o){let e,n,s;const f=[{use:[...o[6]?[]:[[$c,{ripple:!o[14],unbounded:!1,color:(o[1]||o[0])&&o[5]==null?"primary":o[5],disabled:o[9],addClass:o[22],removeClass:o[23],addStyle:o[24]}]],o[20],...o[2]]},{class:wi(tr({[o[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":o[1],"mdc-deprecated-list-item--selected":o[0],"mdc-deprecated-list-item--disabled":o[9],"mdc-menu-item--selected":!o[21]&&o[8]==="menuitem"&&o[0],"smui-menu-item--non-interactive":o[6]},o[16]))},{style:Object.entries(o[17]).map(vv).concat([o[4]]).join(" ")},o[21]&&o[1]?{"aria-current":"page"}:{},o[21]?{}:{role:o[8]},!o[21]&&o[8]==="option"?{"aria-selected":o[0]?"true":"false"}:{},!o[21]&&(o[8]==="radio"||o[8]==="checkbox")?{"aria-checked":o[14]&&o[14].checked?"true":"false"}:{},o[21]?{}:{"aria-disabled":o[9]?"true":"false"},{"data-menu-item-skip-restore-focus":o[10]||void 0},{tabindex:o[19]},{href:o[11]},o[18],o[27]];var v=o[12];function c(h){let S={$$slots:{default:[Y2]},$$scope:{ctx:h}};for(let P=0;P<f.length;P+=1)S=Ct(S,f[P]);return{props:S}}return v&&(e=new v(c(o)),o[33](e),e.$on("click",o[13]),e.$on("keydown",o[25]),e.$on("SMUIGenericInput:mount",o[26]),e.$on("SMUIGenericInput:unmount",o[34])),{c(){e&&Ni(e.$$.fragment),n=bn()},l(h){e&&$i(e.$$.fragment,h),n=bn()},m(h,S){e&&Vi(e,h,S),Ut(h,n,S),s=!0},p(h,S){const P=S[0]&167726975?en(f,[S[0]&30425703&&{use:[...h[6]?[]:[[$c,{ripple:!h[14],unbounded:!1,color:(h[1]||h[0])&&h[5]==null?"primary":h[5],disabled:h[9],addClass:h[22],removeClass:h[23],addStyle:h[24]}]],h[20],...h[2]]},S[0]&2163531&&{class:wi(tr({[h[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":h[1],"mdc-deprecated-list-item--selected":h[0],"mdc-deprecated-list-item--disabled":h[9],"mdc-menu-item--selected":!h[21]&&h[8]==="menuitem"&&h[0],"smui-menu-item--non-interactive":h[6]},h[16]))},S[0]&131088&&{style:Object.entries(h[17]).map(vv).concat([h[4]]).join(" ")},S[0]&2097154&&Xr(h[21]&&h[1]?{"aria-current":"page"}:{}),S[0]&2097408&&Xr(h[21]?{}:{role:h[8]}),S[0]&2097409&&Xr(!h[21]&&h[8]==="option"?{"aria-selected":h[0]?"true":"false"}:{}),S[0]&2113792&&Xr(!h[21]&&(h[8]==="radio"||h[8]==="checkbox")?{"aria-checked":h[14]&&h[14].checked?"true":"false"}:{}),S[0]&2097664&&Xr(h[21]?{}:{"aria-disabled":h[9]?"true":"false"}),S[0]&1024&&{"data-menu-item-skip-restore-focus":h[10]||void 0},S[0]&524288&&{tabindex:h[19]},S[0]&2048&&{href:h[11]},S[0]&262144&&Xr(h[18]),S[0]&134217728&&Xr(h[27])]):{};if(S[0]&128|S[1]&16&&(P.$$scope={dirty:S,ctx:h}),v!==(v=h[12])){if(e){Or();const D=e;ft(D.$$.fragment,1,0,()=>{ji(D,1)}),Rr()}v?(e=new v(c(h)),h[33](e),e.$on("click",h[13]),e.$on("keydown",h[25]),e.$on("SMUIGenericInput:mount",h[26]),e.$on("SMUIGenericInput:unmount",h[34]),Ni(e.$$.fragment),rt(e.$$.fragment,1),Vi(e,n.parentNode,n)):e=null}else v&&e.$set(P)},i(h){s||(e&&rt(e.$$.fragment,h),s=!0)},o(h){e&&ft(e.$$.fragment,h),s=!1},d(h){o[33](null),h&&Qe(n),e&&ji(e,h)}}}let $2=0;const vv=([o,e])=>`${o}: ${e};`;function eE(o,e,n){let s;const f=["use","class","style","color","nonInteractive","ripple","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","action","getPrimaryText","getElement"];let v=xi(e,f),{$$slots:c={},$$scope:h}=e;var S;const P=$n(Yn());let D=()=>{};function R(gt){return gt===D}let{use:O=[]}=e,{class:Y=""}=e,{style:ee=""}=e,{color:he=void 0}=e,{nonInteractive:re=(S=Dr("SMUI:list:nonInteractive"))!==null&&S!==void 0?S:!1}=e;sr("SMUI:list:nonInteractive",void 0);let{ripple:ve=!re}=e,{activated:se=!1}=e,{role:we=Dr("SMUI:list:item:role")}=e;sr("SMUI:list:item:role",void 0);let{selected:Ge=!1}=e,{disabled:Ue=!1}=e,{skipRestoreFocus:He=!1}=e,{tabindex:fe=D}=e,{inputId:ut="SMUI-form-field-list-"+$2++}=e,{href:at=void 0}=e,je,Fe={},Dt={},qe={},Mt,li,Et=Dr("SMUI:list:item:nav"),{component:Gt=Et?at?My:_p:mw}=e;sr("SMUI:generic:input:props",{id:ut}),sr("SMUI:separator:context",void 0),Fo(()=>{if(!Ge&&!re){let zi=!0,ln=je;for(;ln.previousSibling;)if(ln=ln.previousSibling,ln.nodeType===1&&ln.classList.contains("mdc-deprecated-list-item")&&!ln.classList.contains("mdc-deprecated-list-item--disabled")){zi=!1;break}zi&&(li=window.requestAnimationFrame(Jt))}const gt={_smui_list_item_accessor:!0,get element(){return St()},get selected(){return Ge},set selected(zi){n(0,Ge=zi)},hasClass:Je,addClass:wt,removeClass:Pt,getAttr:Xt,addAttr:Xi,removeAttr:ei,getPrimaryText:It,get checked(){var zi;return(zi=Mt&&Mt.checked)!==null&&zi!==void 0?zi:!1},set checked(zi){Mt&&n(14,Mt.checked=!!zi,Mt)},get hasCheckbox(){return!!(Mt&&"_smui_checkbox_accessor"in Mt)},get hasRadio(){return!!(Mt&&"_smui_radio_accessor"in Mt)},activateRipple(){Mt&&Mt.activateRipple()},deactivateRipple(){Mt&&Mt.deactivateRipple()},getValue(){return v.value},action:ht,get tabindex(){return s},set tabindex(zi){n(28,fe=zi)},get disabled(){return Ue},get activated(){return se},set activated(zi){n(1,se=zi)}};return Un(St(),"SMUIListItem:mount",gt),()=>{Un(St(),"SMUIListItem:unmount",gt)}}),eh(()=>{li&&window.cancelAnimationFrame(li)});function Je(gt){return gt in Fe?Fe[gt]:St().classList.contains(gt)}function wt(gt){Fe[gt]||n(16,Fe[gt]=!0,Fe)}function Pt(gt){(!(gt in Fe)||Fe[gt])&&n(16,Fe[gt]=!1,Fe)}function ni(gt,zi){Dt[gt]!=zi&&(zi===""||zi==null?(delete Dt[gt],n(17,Dt)):n(17,Dt[gt]=zi,Dt))}function Xt(gt){var zi;return gt in qe?(zi=qe[gt])!==null&&zi!==void 0?zi:null:St().getAttribute(gt)}function Xi(gt,zi){qe[gt]!==zi&&n(18,qe[gt]=zi,qe)}function ei(gt){(!(gt in qe)||qe[gt]!=null)&&n(18,qe[gt]=void 0,qe)}function Jt(){let gt=!0,zi=je.getElement();for(;zi.nextElementSibling;)if(zi=zi.nextElementSibling,zi.nodeType===1&&zi.classList.contains("mdc-deprecated-list-item")){const ln=zi.attributes.getNamedItem("tabindex");if(ln&&ln.value==="0"){gt=!1;break}}gt&&n(19,s=0)}function bi(gt){const zi=gt.key==="Enter",ln=gt.key==="Space";(zi||ln)&&ht(gt)}function ai(gt){("_smui_checkbox_accessor"in gt.detail||"_smui_radio_accessor"in gt.detail)&&n(14,Mt=gt.detail)}function ht(gt){Ue||Un(St(),"SMUI:action",gt)}function It(){var gt,zi,ln;const Cn=St(),Zn=Cn.querySelector(".mdc-deprecated-list-item__primary-text");if(Zn)return(gt=Zn.textContent)!==null&&gt!==void 0?gt:"";const Nr=Cn.querySelector(".mdc-deprecated-list-item__text");return Nr?(zi=Nr.textContent)!==null&&zi!==void 0?zi:"":(ln=Cn.textContent)!==null&&ln!==void 0?ln:""}function St(){return je.getElement()}function Ji(gt){Zi[gt?"unshift":"push"](()=>{je=gt,n(15,je)})}const Qt=()=>n(14,Mt=void 0);return o.$$set=gt=>{e=Ct(Ct({},e),Qn(gt)),n(27,v=xi(e,f)),"use"in gt&&n(2,O=gt.use),"class"in gt&&n(3,Y=gt.class),"style"in gt&&n(4,ee=gt.style),"color"in gt&&n(5,he=gt.color),"nonInteractive"in gt&&n(6,re=gt.nonInteractive),"ripple"in gt&&n(7,ve=gt.ripple),"activated"in gt&&n(1,se=gt.activated),"role"in gt&&n(8,we=gt.role),"selected"in gt&&n(0,Ge=gt.selected),"disabled"in gt&&n(9,Ue=gt.disabled),"skipRestoreFocus"in gt&&n(10,He=gt.skipRestoreFocus),"tabindex"in gt&&n(28,fe=gt.tabindex),"inputId"in gt&&n(29,ut=gt.inputId),"href"in gt&&n(11,at=gt.href),"component"in gt&&n(12,Gt=gt.component),"$$scope"in gt&&n(35,h=gt.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&268452417&&n(19,s=R(fe)?!re&&!Ue&&(Ge||Mt&&Mt.checked)?0:-1:fe)},[Ge,se,O,Y,ee,he,re,ve,we,Ue,He,at,Gt,ht,Mt,je,Fe,Dt,qe,s,P,Et,wt,Pt,ni,bi,ai,v,fe,ut,It,St,c,Ji,Qt,h]}class tE extends Tn{constructor(e){super(),An(this,e,eE,Q2,Sn,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,activated:1,role:8,selected:0,disabled:9,skipRestoreFocus:10,tabindex:28,inputId:29,href:11,component:12,action:13,getPrimaryText:30,getElement:31},null,[-1,-1])}get action(){return this.$$.ctx[13]}get getPrimaryText(){return this.$$.ctx[30]}get getElement(){return this.$$.ctx[31]}}ns({class:"mdc-deprecated-list-item__text",component:_p});ns({class:"mdc-deprecated-list-item__primary-text",component:_p});ns({class:"mdc-deprecated-list-item__secondary-text",component:_p});function iE(o){let e,n,s,f,v,c;const h=o[8].default,S=mn(h,o,o[7],null);let P=[{class:n=wi({[o[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":o[4]})},o[5]],D={};for(let R=0;R<P.length;R+=1)D=Ct(D,P[R]);return{c(){e=_i("span"),S&&S.c(),this.h()},l(R){e=vi(R,"SPAN",{class:!0});var O=mi(e);S&&S.l(O),O.forEach(Qe),this.h()},h(){di(e,D)},m(R,O){Ut(R,e,O),S&&S.m(e,null),o[9](e),f=!0,v||(c=[Ei(s=Hn.call(null,e,o[0])),Ei(o[3].call(null,e))],v=!0)},p(R,[O]){S&&S.p&&(!f||O&128)&&gn(S,h,R,R[7],f?_n(h,R[7],O,null):yn(R[7]),null),di(e,D=en(P,[(!f||O&2&&n!==(n=wi({[R[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":R[4]})))&&{class:n},O&32&&R[5]])),s&&Rn(s.update)&&O&1&&s.update.call(null,R[0])},i(R){f||(rt(S,R),f=!0)},o(R){ft(S,R),f=!1},d(R){R&&Qe(e),S&&S.d(R),o[9](null),v=!1,Tr(c)}}}function nE(o,e,n){const s=["use","class","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,D,R=Dr("SMUI:list:graphic:menu-selection-group");function O(){return D}function Y(ee){Zi[ee?"unshift":"push"](()=>{D=ee,n(2,D)})}return o.$$set=ee=>{e=Ct(Ct({},e),Qn(ee)),n(5,f=xi(e,s)),"use"in ee&&n(0,S=ee.use),"class"in ee&&n(1,P=ee.class),"$$scope"in ee&&n(7,c=ee.$$scope)},[S,P,D,h,R,f,O,c,v,Y]}class rE extends Tn{constructor(e){super(),An(this,e,nE,iE,Sn,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}ns({class:"mdc-deprecated-list-item__meta",component:_p});ns({class:"mdc-deprecated-list-group",component:yp});ns({class:"mdc-deprecated-list-group__subheader",component:dw});const vf=tE,oE=rE;/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var aE={ROOT:"mdc-form-field"},sE={LABEL_SELECTOR:".mdc-form-field > label"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var lE=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.click=function(){s.handleClick()},s}return Object.defineProperty(e,"cssClasses",{get:function(){return aE},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return sE},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{activateInputRipple:function(){},deactivateInputRipple:function(){},deregisterInteractionHandler:function(){},registerInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("click",this.click)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("click",this.click)},e.prototype.handleClick=function(){var n=this;this.adapter.activateInputRipple(),requestAnimationFrame(function(){n.adapter.deactivateInputRipple()})},e}(Na);const uE=o=>({}),bv=o=>({});function cE(o){let e,n,s,f,v,c,h,S,P;const D=o[13].default,R=mn(D,o,o[12],null),O=o[13].label,Y=mn(O,o,o[12],bv);let ee=[{for:o[4]},rr(o[10],"label$")],he={};for(let se=0;se<ee.length;se+=1)he=Ct(he,ee[se]);let re=[{class:v=wi({[o[1]]:!0,"mdc-form-field":!0,"mdc-form-field--align-end":o[2]==="end","mdc-form-field--nowrap":o[3]})},_s(o[10],["label$"])],ve={};for(let se=0;se<re.length;se+=1)ve=Ct(ve,re[se]);return{c(){e=_i("div"),R&&R.c(),n=qn(),s=_i("label"),Y&&Y.c(),this.h()},l(se){e=vi(se,"DIV",{class:!0});var we=mi(e);R&&R.l(we),n=Gn(we),s=vi(we,"LABEL",{for:!0});var Ge=mi(s);Y&&Y.l(Ge),Ge.forEach(Qe),we.forEach(Qe),this.h()},h(){di(s,he),di(e,ve)},m(se,we){Ut(se,e,we),R&&R.m(e,null),sn(e,n),sn(e,s),Y&&Y.m(s,null),o[14](s),o[15](e),h=!0,S||(P=[Ei(f=Hn.call(null,s,o[5])),Ei(c=Hn.call(null,e,o[0])),Ei(o[9].call(null,e)),In(e,"SMUIGenericInput:mount",o[16]),In(e,"SMUIGenericInput:unmount",o[17])],S=!0)},p(se,[we]){R&&R.p&&(!h||we&4096)&&gn(R,D,se,se[12],h?_n(D,se[12],we,null):yn(se[12]),null),Y&&Y.p&&(!h||we&4096)&&gn(Y,O,se,se[12],h?_n(O,se[12],we,uE):yn(se[12]),bv),di(s,he=en(ee,[(!h||we&16)&&{for:se[4]},we&1024&&rr(se[10],"label$")])),f&&Rn(f.update)&&we&32&&f.update.call(null,se[5]),di(e,ve=en(re,[(!h||we&14&&v!==(v=wi({[se[1]]:!0,"mdc-form-field":!0,"mdc-form-field--align-end":se[2]==="end","mdc-form-field--nowrap":se[3]})))&&{class:v},we&1024&&_s(se[10],["label$"])])),c&&Rn(c.update)&&we&1&&c.update.call(null,se[0])},i(se){h||(rt(R,se),rt(Y,se),h=!0)},o(se){ft(R,se),ft(Y,se),h=!1},d(se){se&&Qe(e),R&&R.d(se),Y&&Y.d(se),o[14](null),o[15](null),S=!1,Tr(P)}}}let hE=0;function dE(o,e,n){const s=["use","class","align","noWrap","inputId","label$use","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,{align:D="start"}=e,{noWrap:R=!1}=e,{inputId:O="SMUI-form-field-"+hE++}=e,{label$use:Y=[]}=e,ee,he,re,ve;sr("SMUI:generic:input:props",{id:O}),Fo(()=>(he=new lE({activateInputRipple:()=>{ve&&ve.activateRipple()},deactivateInputRipple:()=>{ve&&ve.deactivateRipple()},deregisterInteractionHandler:(fe,ut)=>{re.removeEventListener(fe,ut)},registerInteractionHandler:(fe,ut)=>{re.addEventListener(fe,ut)}}),he.init(),()=>{he.destroy()}));function se(){return ee}function we(fe){Zi[fe?"unshift":"push"](()=>{re=fe,n(7,re)})}function Ge(fe){Zi[fe?"unshift":"push"](()=>{ee=fe,n(6,ee)})}const Ue=fe=>n(8,ve=fe.detail),He=()=>n(8,ve=void 0);return o.$$set=fe=>{e=Ct(Ct({},e),Qn(fe)),n(10,f=xi(e,s)),"use"in fe&&n(0,S=fe.use),"class"in fe&&n(1,P=fe.class),"align"in fe&&n(2,D=fe.align),"noWrap"in fe&&n(3,R=fe.noWrap),"inputId"in fe&&n(4,O=fe.inputId),"label$use"in fe&&n(5,Y=fe.label$use),"$$scope"in fe&&n(12,c=fe.$$scope)},[S,P,D,R,O,Y,ee,re,ve,h,f,se,c,v,we,Ge,Ue,He]}class yy extends Tn{constructor(e){super(),An(this,e,dE,cE,Sn,{use:0,class:1,align:2,noWrap:3,inputId:4,label$use:5,getElement:11})}get getElement(){return this.$$.ctx[11]}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var of={ANIM_CHECKED_INDETERMINATE:"mdc-checkbox--anim-checked-indeterminate",ANIM_CHECKED_UNCHECKED:"mdc-checkbox--anim-checked-unchecked",ANIM_INDETERMINATE_CHECKED:"mdc-checkbox--anim-indeterminate-checked",ANIM_INDETERMINATE_UNCHECKED:"mdc-checkbox--anim-indeterminate-unchecked",ANIM_UNCHECKED_CHECKED:"mdc-checkbox--anim-unchecked-checked",ANIM_UNCHECKED_INDETERMINATE:"mdc-checkbox--anim-unchecked-indeterminate",BACKGROUND:"mdc-checkbox__background",CHECKED:"mdc-checkbox--checked",CHECKMARK:"mdc-checkbox__checkmark",CHECKMARK_PATH:"mdc-checkbox__checkmark-path",DISABLED:"mdc-checkbox--disabled",INDETERMINATE:"mdc-checkbox--indeterminate",MIXEDMARK:"mdc-checkbox__mixedmark",NATIVE_CONTROL:"mdc-checkbox__native-control",ROOT:"mdc-checkbox",SELECTED:"mdc-checkbox--selected",UPGRADED:"mdc-checkbox--upgraded"},Zl={ARIA_CHECKED_ATTR:"aria-checked",ARIA_CHECKED_INDETERMINATE_VALUE:"mixed",DATA_INDETERMINATE_ATTR:"data-indeterminate",NATIVE_CONTROL_SELECTOR:".mdc-checkbox__native-control",TRANSITION_STATE_CHECKED:"checked",TRANSITION_STATE_INDETERMINATE:"indeterminate",TRANSITION_STATE_INIT:"init",TRANSITION_STATE_UNCHECKED:"unchecked"},xv={ANIM_END_LATCH_MS:250};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var pE=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.currentCheckState=Zl.TRANSITION_STATE_INIT,s.currentAnimationClass="",s.animEndLatchTimer=0,s.enableAnimationEndHandler=!1,s}return Object.defineProperty(e,"cssClasses",{get:function(){return of},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Zl},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return xv},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},hasNativeControl:function(){return!1},isAttachedToDOM:function(){return!1},isChecked:function(){return!1},isIndeterminate:function(){return!1},removeClass:function(){},removeNativeControlAttr:function(){},setNativeControlAttr:function(){},setNativeControlDisabled:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.currentCheckState=this.determineCheckState(),this.updateAriaChecked(),this.adapter.addClass(of.UPGRADED)},e.prototype.destroy=function(){clearTimeout(this.animEndLatchTimer)},e.prototype.setDisabled=function(n){this.adapter.setNativeControlDisabled(n),n?this.adapter.addClass(of.DISABLED):this.adapter.removeClass(of.DISABLED)},e.prototype.handleAnimationEnd=function(){var n=this;!this.enableAnimationEndHandler||(clearTimeout(this.animEndLatchTimer),this.animEndLatchTimer=setTimeout(function(){n.adapter.removeClass(n.currentAnimationClass),n.enableAnimationEndHandler=!1},xv.ANIM_END_LATCH_MS))},e.prototype.handleChange=function(){this.transitionCheckState()},e.prototype.transitionCheckState=function(){if(!!this.adapter.hasNativeControl()){var n=this.currentCheckState,s=this.determineCheckState();if(n!==s){this.updateAriaChecked();var f=Zl.TRANSITION_STATE_UNCHECKED,v=of.SELECTED;s===f?this.adapter.removeClass(v):this.adapter.addClass(v),this.currentAnimationClass.length>0&&(clearTimeout(this.animEndLatchTimer),this.adapter.forceLayout(),this.adapter.removeClass(this.currentAnimationClass)),this.currentAnimationClass=this.getTransitionAnimationClass(n,s),this.currentCheckState=s,this.adapter.isAttachedToDOM()&&this.currentAnimationClass.length>0&&(this.adapter.addClass(this.currentAnimationClass),this.enableAnimationEndHandler=!0)}}},e.prototype.determineCheckState=function(){var n=Zl.TRANSITION_STATE_INDETERMINATE,s=Zl.TRANSITION_STATE_CHECKED,f=Zl.TRANSITION_STATE_UNCHECKED;return this.adapter.isIndeterminate()?n:this.adapter.isChecked()?s:f},e.prototype.getTransitionAnimationClass=function(n,s){var f=Zl.TRANSITION_STATE_INIT,v=Zl.TRANSITION_STATE_CHECKED,c=Zl.TRANSITION_STATE_UNCHECKED,h=e.cssClasses,S=h.ANIM_UNCHECKED_CHECKED,P=h.ANIM_UNCHECKED_INDETERMINATE,D=h.ANIM_CHECKED_UNCHECKED,R=h.ANIM_CHECKED_INDETERMINATE,O=h.ANIM_INDETERMINATE_CHECKED,Y=h.ANIM_INDETERMINATE_UNCHECKED;switch(n){case f:return s===c?"":s===v?O:Y;case c:return s===v?S:P;case v:return s===c?D:R;default:return s===v?O:Y}},e.prototype.updateAriaChecked=function(){this.adapter.isIndeterminate()?this.adapter.setNativeControlAttr(Zl.ARIA_CHECKED_ATTR,Zl.ARIA_CHECKED_INDETERMINATE_VALUE):this.adapter.removeNativeControlAttr(Zl.ARIA_CHECKED_ATTR)},e}(Na);function fE(o){let e,n,s,f,v,c,h,S,P,D,R,O,Y,ee,he,re,ve,se,we,Ge,Ue=[{class:s=wi({[o[9]]:!0,"mdc-checkbox__native-control":!0})},{type:"checkbox"},o[20],{disabled:o[1]},{__value:f=o[19](o[7])?o[6]:o[7]},{"data-indeterminate":v=!o[19](o[0])&&o[0]?"true":void 0},o[16],rr(o[26],"input$")],He={};for(let at=0;at<Ue.length;at+=1)He=Ct(He,Ue[at]);let fe=[{class:he=wi(tr({[o[3]]:!0,"mdc-checkbox":!0,"mdc-checkbox--disabled":o[1],"mdc-checkbox--touch":o[5],"mdc-data-table__header-row-checkbox":o[21]==="data-table"&&o[22],"mdc-data-table__row-checkbox":o[21]==="data-table"&&!o[22]},o[14]))},{style:re=Object.entries(o[15]).map(wv).concat([o[4]]).join(" ")},_s(o[26],["input$"])],ut={};for(let at=0;at<fe.length;at+=1)ut=Ct(ut,fe[at]);return{c(){e=_i("div"),n=_i("input"),h=qn(),S=_i("div"),P=Kl("svg"),D=Kl("path"),R=qn(),O=_i("div"),Y=qn(),ee=_i("div"),this.h()},l(at){e=vi(at,"DIV",{class:!0,style:!0});var je=mi(e);n=vi(je,"INPUT",{class:!0,type:!0,"data-indeterminate":!0}),h=Gn(je),S=vi(je,"DIV",{class:!0});var Fe=mi(S);P=Jl(Fe,"svg",{class:!0,viewBox:!0});var Dt=mi(P);D=Jl(Dt,"path",{class:!0,fill:!0,d:!0}),mi(D).forEach(Qe),Dt.forEach(Qe),R=Gn(Fe),O=vi(Fe,"DIV",{class:!0}),mi(O).forEach(Qe),Fe.forEach(Qe),Y=Gn(je),ee=vi(je,"DIV",{class:!0}),mi(ee).forEach(Qe),je.forEach(Qe),this.h()},h(){di(n,He),ii(D,"class","mdc-checkbox__checkmark-path"),ii(D,"fill","none"),ii(D,"d","M1.73,12.91 8.1,19.28 22.79,4.59"),ii(P,"class","mdc-checkbox__checkmark"),ii(P,"viewBox","0 0 24 24"),ii(O,"class","mdc-checkbox__mixedmark"),ii(S,"class","mdc-checkbox__background"),ii(ee,"class","mdc-checkbox__ripple"),di(e,ut)},m(at,je){Ut(at,e,je),sn(e,n),n.autofocus&&n.focus(),o[36](n),n.checked=o[12],sn(e,h),sn(e,S),sn(S,P),sn(P,D),sn(S,R),sn(S,O),sn(e,Y),sn(e,ee),o[38](e),we||(Ge=[Ei(c=Hn.call(null,n,o[8])),In(n,"change",o[37]),In(n,"blur",o[34]),In(n,"focus",o[35]),Ei(ve=Hn.call(null,e,o[2])),Ei(o[18].call(null,e)),Ei(se=$c.call(null,e,{unbounded:!0,addClass:o[23],removeClass:o[24],addStyle:o[25],active:o[17],eventTarget:o[11]})),In(e,"animationend",o[39])],we=!0)},p(at,je){di(n,He=en(Ue,[je[0]&512&&s!==(s=wi({[at[9]]:!0,"mdc-checkbox__native-control":!0}))&&{class:s},{type:"checkbox"},at[20],je[0]&2&&{disabled:at[1]},je[0]&192&&f!==(f=at[19](at[7])?at[6]:at[7])&&{__value:f},je[0]&1&&v!==(v=!at[19](at[0])&&at[0]?"true":void 0)&&{"data-indeterminate":v},je[0]&65536&&at[16],je[0]&67108864&&rr(at[26],"input$")])),c&&Rn(c.update)&&je[0]&256&&c.update.call(null,at[8]),je[0]&4096&&(n.checked=at[12]),di(e,ut=en(fe,[je[0]&16426&&he!==(he=wi(tr({[at[3]]:!0,"mdc-checkbox":!0,"mdc-checkbox--disabled":at[1],"mdc-checkbox--touch":at[5],"mdc-data-table__header-row-checkbox":at[21]==="data-table"&&at[22],"mdc-data-table__row-checkbox":at[21]==="data-table"&&!at[22]},at[14])))&&{class:he},je[0]&32784&&re!==(re=Object.entries(at[15]).map(wv).concat([at[4]]).join(" "))&&{style:re},je[0]&67108864&&_s(at[26],["input$"])])),ve&&Rn(ve.update)&&je[0]&4&&ve.update.call(null,at[2]),se&&Rn(se.update)&&je[0]&133120&&se.update.call(null,{unbounded:!0,addClass:at[23],removeClass:at[24],addStyle:at[25],active:at[17],eventTarget:at[11]})},i:Yo,o:Yo,d(at){at&&Qe(e),o[36](null),o[38](null),we=!1,Tr(Ge)}}}const wv=([o,e])=>`${o}: ${e};`;function mE(o,e,n){const s=["use","class","style","disabled","touch","indeterminate","group","checked","value","valueKey","input$use","input$class","getId","getElement"];let f=xi(e,s);var v;const c=$n(Yn());let h=()=>{};function S(Qt){return Qt===h}let{use:P=[]}=e,{class:D=""}=e,{style:R=""}=e,{disabled:O=!1}=e,{touch:Y=!1}=e,{indeterminate:ee=h}=e,{group:he=h}=e,{checked:re=h}=e,{value:ve=null}=e,{valueKey:se=h}=e,{input$use:we=[]}=e,{input$class:Ge=""}=e,Ue,He,fe,ut={},at={},je={},Fe=!1,Dt=(v=Dr("SMUI:generic:input:props"))!==null&&v!==void 0?v:{},qe=S(he)?S(re)?!1:re!=null?re:void 0:he.indexOf(ve)!==-1,Mt=Dr("SMUI:checkbox:context"),li=Dr("SMUI:data-table:row:header"),Et=re,Gt=S(he)?[]:[...he],Je=qe;Fo(()=>{n(11,fe.indeterminate=!S(ee)&&ee,fe),n(10,He=new pE({addClass:wt,forceLayout:()=>Ue.offsetWidth,hasNativeControl:()=>!0,isAttachedToDOM:()=>Boolean(Ue.parentNode),isChecked:()=>qe!=null?qe:!1,isIndeterminate:()=>S(ee)?!1:ee,removeClass:Pt,removeNativeControlAttr:Xi,setNativeControlAttr:Xt,setNativeControlDisabled:gt=>n(1,O=gt)}));const Qt={_smui_checkbox_accessor:!0,get element(){return Jt()},get checked(){return qe!=null?qe:!1},set checked(gt){qe!==gt&&n(12,qe=gt)},get indeterminate(){return S(ee)?!1:ee},set indeterminate(gt){n(0,ee=gt)},activateRipple(){O||n(17,Fe=!0)},deactivateRipple(){n(17,Fe=!1)}};return Un(Ue,"SMUIGenericInput:mount",Qt),Un(Ue,"SMUICheckbox:mount",Qt),He.init(),()=>{Un(Ue,"SMUIGenericInput:unmount",Qt),Un(Ue,"SMUICheckbox:unmount",Qt),He.destroy()}});function wt(Qt){ut[Qt]||n(14,ut[Qt]=!0,ut)}function Pt(Qt){(!(Qt in ut)||ut[Qt])&&n(14,ut[Qt]=!1,ut)}function ni(Qt,gt){at[Qt]!=gt&&(gt===""||gt==null?(delete at[Qt],n(15,at)):n(15,at[Qt]=gt,at))}function Xt(Qt,gt){je[Qt]!==gt&&n(16,je[Qt]=gt,je)}function Xi(Qt){(!(Qt in je)||je[Qt]!=null)&&n(16,je[Qt]=void 0,je)}function ei(){return Dt&&Dt.id}function Jt(){return Ue}function bi(Qt){df.call(this,o,Qt)}function ai(Qt){df.call(this,o,Qt)}function ht(Qt){Zi[Qt?"unshift":"push"](()=>{fe=Qt,n(11,fe),n(27,he),n(33,Je),n(12,qe),n(6,ve),n(32,Gt),n(28,re),n(31,Et),n(0,ee),n(10,He)})}function It(){qe=this.checked,n(12,qe),n(27,he),n(33,Je),n(6,ve),n(32,Gt),n(28,re),n(31,Et),n(0,ee),n(11,fe),n(10,He)}function St(Qt){Zi[Qt?"unshift":"push"](()=>{Ue=Qt,n(13,Ue)})}const Ji=()=>He&&He.handleAnimationEnd();return o.$$set=Qt=>{e=Ct(Ct({},e),Qn(Qt)),n(26,f=xi(e,s)),"use"in Qt&&n(2,P=Qt.use),"class"in Qt&&n(3,D=Qt.class),"style"in Qt&&n(4,R=Qt.style),"disabled"in Qt&&n(1,O=Qt.disabled),"touch"in Qt&&n(5,Y=Qt.touch),"indeterminate"in Qt&&n(0,ee=Qt.indeterminate),"group"in Qt&&n(27,he=Qt.group),"checked"in Qt&&n(28,re=Qt.checked),"value"in Qt&&n(6,ve=Qt.value),"valueKey"in Qt&&n(7,se=Qt.valueKey),"input$use"in Qt&&n(8,we=Qt.input$use),"input$class"in Qt&&n(9,Ge=Qt.input$class)},o.$$.update=()=>{if(o.$$.dirty[0]&402660417|o.$$.dirty[1]&7){let Qt=!1;if(!S(he))if(Je!==qe){const gt=he.indexOf(ve);qe&&gt===-1?(he.push(ve),n(27,he),n(33,Je),n(12,qe),n(6,ve),n(32,Gt),n(28,re),n(31,Et),n(0,ee),n(11,fe),n(10,He)):!qe&&gt!==-1&&(he.splice(gt,1),n(27,he),n(33,Je),n(12,qe),n(6,ve),n(32,Gt),n(28,re),n(31,Et),n(0,ee),n(11,fe),n(10,He)),Qt=!0}else{const gt=Gt.indexOf(ve),zi=he.indexOf(ve);gt>-1&&zi===-1?(n(12,qe=!1),Qt=!0):zi>-1&&gt===-1&&(n(12,qe=!0),Qt=!0)}S(re)?!!Je!=!!qe&&(Qt=!0):re!==(qe!=null?qe:null)&&(re===Et?(n(28,re=qe!=null?qe:null),S(ee)||n(0,ee=!1)):n(12,qe=re!=null?re:void 0),Qt=!0),fe&&(S(ee)?fe.indeterminate&&(n(11,fe.indeterminate=!1,fe),Qt=!0):!ee&&fe.indeterminate?(n(11,fe.indeterminate=!1,fe),Qt=!0):ee&&!fe.indeterminate&&(n(11,fe.indeterminate=!0,fe),Qt=!0)),n(31,Et=re),n(32,Gt=S(he)?[]:[...he]),n(33,Je=qe),Qt&&He&&He.handleChange()}},[ee,O,P,D,R,Y,ve,se,we,Ge,He,fe,qe,Ue,ut,at,je,Fe,c,S,Dt,Mt,li,wt,Pt,ni,f,he,re,ei,Jt,Et,Gt,Je,bi,ai,ht,It,St,Ji]}class i1 extends Tn{constructor(e){super(),An(this,e,mE,fE,Sn,{use:2,class:3,style:4,disabled:1,touch:5,indeterminate:0,group:27,checked:28,value:6,valueKey:7,input$use:8,input$class:9,getId:29,getElement:30},null,[-1,-1])}get getId(){return this.$$.ctx[29]}get getElement(){return this.$$.ctx[30]}}var gE=8,yE={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90\xB0 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Mercator, Natural Earth, and Winkel Tripel. Terrain, fog, sky and CustomLayerInterface are not supported for projections other than mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},_E={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},vE=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],bE={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},xE={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},wE={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},EE={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) \u2014 it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},IE={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},SE={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},TE={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},AE=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],CE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},kE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},ME={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},LE={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},PE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},zE={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},DE={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn\u2019t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},RE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},OE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},BE={type:"array",value:"*",doc:"A filter selects specific features from a layer."},FE={type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},UE={type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},NE={type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},VE={type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},jE={type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},qE={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] \u2260 value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] \u2265 value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] \u2264 value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] \u2208 {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] \u2209 {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 \u2227 ... \u2227 fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 \u2228 ... \u2228 fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `\xACf0 \u2227 ... \u2227 \xACfn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},GE={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},HE={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},ZE={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},WE={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},XE={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the fog. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the fog to the color of the sky. A value of zero leaves a sharp transition from fog to sky. Increasing the value blends the color of fog into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0"}}}},KE={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0\xB0 (0\xB0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0\xB0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0\xB0, directly above, to 180\xB0, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},JE={name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carr\xE9e projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},YE={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},QE=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],$E={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},eI={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},tI={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},iI={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},nI={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},rI={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},oI={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},aI={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},sI={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},lI={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},uI={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},cI={$version:gE,$root:yE,sources:_E,source:vE,source_vector:bE,source_raster:xE,source_raster_dem:wE,source_geojson:EE,source_video:IE,source_image:SE,layer:TE,layout:AE,layout_background:CE,layout_sky:kE,layout_fill:ME,layout_circle:LE,layout_heatmap:PE,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:zE,layout_symbol:DE,layout_raster:RE,layout_hillshade:OE,filter:BE,filter_symbol:FE,filter_fill:UE,filter_line:NE,filter_circle:VE,"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:jE,filter_operator:qE,geometry_type:GE,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:
* In categorical functions, when the feature value does not match any of the stop domain values.
* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.
* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).
* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.
If no default is provided, the style property's default is used in these circumstances.`}},function_stop:HE,expression:ZE,expression_name:WE,fog:XE,light:KE,projection:JE,terrain:YE,paint:QE,paint_fill:$E,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:eI,paint_circle:tI,paint_heatmap:iI,paint_symbol:nI,paint_raster:rI,paint_hillshade:oI,paint_background:aI,paint_sky:sI,transition:lI,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:uI},Xg=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Lm(o){var e={exports:{}};return o(e,e.exports),e.exports}function hI(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}/*! https://mths.be/punycode v1.3.2 by @mathias */Lm(function(o,e){(function(n){var s=e&&!e.nodeType&&e,f=o&&!o.nodeType&&o,v=typeof Xg=="object"&&Xg;(v.global===v||v.window===v||v.self===v)&&(n=v);var c,h=2147483647,S=36,P=1,D=26,R=38,O=700,Y=72,ee=128,he="-",re=/^xn--/,ve=/[^\x20-\x7E]/,se=/[\x2E\u3002\uFF0E\uFF61]/g,we={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ge=S-P,Ue=Math.floor,He=String.fromCharCode,fe;function ut(Pt){throw RangeError(we[Pt])}function at(Pt,ni){for(var Xt=Pt.length,Xi=[];Xt--;)Xi[Xt]=ni(Pt[Xt]);return Xi}function je(Pt,ni){var Xt=Pt.split("@"),Xi="";Xt.length>1&&(Xi=Xt[0]+"@",Pt=Xt[1]),Pt=Pt.replace(se,".");var ei=Pt.split("."),Jt=at(ei,ni).join(".");return Xi+Jt}function Fe(Pt){for(var ni=[],Xt=0,Xi=Pt.length,ei,Jt;Xt<Xi;)ei=Pt.charCodeAt(Xt++),ei>=55296&&ei<=56319&&Xt<Xi?(Jt=Pt.charCodeAt(Xt++),(Jt&64512)==56320?ni.push(((ei&1023)<<10)+(Jt&1023)+65536):(ni.push(ei),Xt--)):ni.push(ei);return ni}function Dt(Pt){return at(Pt,function(ni){var Xt="";return ni>65535&&(ni-=65536,Xt+=He(ni>>>10&1023|55296),ni=56320|ni&1023),Xt+=He(ni),Xt}).join("")}function qe(Pt){return Pt-48<10?Pt-22:Pt-65<26?Pt-65:Pt-97<26?Pt-97:S}function Mt(Pt,ni){return Pt+22+75*(Pt<26)-((ni!=0)<<5)}function li(Pt,ni,Xt){var Xi=0;for(Pt=Xt?Ue(Pt/O):Pt>>1,Pt+=Ue(Pt/ni);Pt>Ge*D>>1;Xi+=S)Pt=Ue(Pt/Ge);return Ue(Xi+(Ge+1)*Pt/(Pt+R))}function Et(Pt){var ni=[],Xt=Pt.length,Xi,ei=0,Jt=ee,bi=Y,ai,ht,It,St,Ji,Qt,gt,zi,ln;for(ai=Pt.lastIndexOf(he),ai<0&&(ai=0),ht=0;ht<ai;++ht)Pt.charCodeAt(ht)>=128&&ut("not-basic"),ni.push(Pt.charCodeAt(ht));for(It=ai>0?ai+1:0;It<Xt;){for(St=ei,Ji=1,Qt=S;It>=Xt&&ut("invalid-input"),gt=qe(Pt.charCodeAt(It++)),(gt>=S||gt>Ue((h-ei)/Ji))&&ut("overflow"),ei+=gt*Ji,zi=Qt<=bi?P:Qt>=bi+D?D:Qt-bi,!(gt<zi);Qt+=S)ln=S-zi,Ji>Ue(h/ln)&&ut("overflow"),Ji*=ln;Xi=ni.length+1,bi=li(ei-St,Xi,St==0),Ue(ei/Xi)>h-Jt&&ut("overflow"),Jt+=Ue(ei/Xi),ei%=Xi,ni.splice(ei++,0,Jt)}return Dt(ni)}function Gt(Pt){var ni,Xt,Xi,ei,Jt,bi,ai,ht,It,St,Ji,Qt=[],gt,zi,ln,Cn;for(Pt=Fe(Pt),gt=Pt.length,ni=ee,Xt=0,Jt=Y,bi=0;bi<gt;++bi)Ji=Pt[bi],Ji<128&&Qt.push(He(Ji));for(Xi=ei=Qt.length,ei&&Qt.push(he);Xi<gt;){for(ai=h,bi=0;bi<gt;++bi)Ji=Pt[bi],Ji>=ni&&Ji<ai&&(ai=Ji);for(zi=Xi+1,ai-ni>Ue((h-Xt)/zi)&&ut("overflow"),Xt+=(ai-ni)*zi,ni=ai,bi=0;bi<gt;++bi)if(Ji=Pt[bi],Ji<ni&&++Xt>h&&ut("overflow"),Ji==ni){for(ht=Xt,It=S;St=It<=Jt?P:It>=Jt+D?D:It-Jt,!(ht<St);It+=S)Cn=ht-St,ln=S-St,Qt.push(He(Mt(St+Cn%ln,0))),ht=Ue(Cn/ln);Qt.push(He(Mt(ht,0))),Jt=li(Xt,zi,Xi==ei),Xt=0,++Xi}++Xt,++ni}return Qt.join("")}function Je(Pt){return je(Pt,function(ni){return re.test(ni)?Et(ni.slice(4).toLowerCase()):ni})}function wt(Pt){return je(Pt,function(ni){return ve.test(ni)?"xn--"+Gt(ni):ni})}if(c={version:"1.3.2",ucs2:{decode:Fe,encode:Dt},decode:Et,encode:Gt,toASCII:wt,toUnicode:Je},s&&f)if(o.exports==s)f.exports=c;else for(fe in c)c.hasOwnProperty(fe)&&(s[fe]=c[fe]);else n.punycode=c})(Xg)});function dI(o,e){return Object.prototype.hasOwnProperty.call(o,e)}var pI=function(o,e,n,s){e=e||"&",n=n||"=";var f={};if(typeof o!="string"||o.length===0)return f;var v=/\+/g;o=o.split(e);var c=1e3;s&&typeof s.maxKeys=="number"&&(c=s.maxKeys);var h=o.length;c>0&&h>c&&(h=c);for(var S=0;S<h;++S){var P=o[S].replace(v,"%20"),D=P.indexOf(n),R,O,Y,ee;D>=0?(R=P.substr(0,D),O=P.substr(D+1)):(R=P,O=""),Y=decodeURIComponent(R),ee=decodeURIComponent(O),dI(f,Y)?Array.isArray(f[Y])?f[Y].push(ee):f[Y]=[f[Y],ee]:f[Y]=ee}return f},af=function(o){switch(typeof o){case"string":return o;case"boolean":return o?"true":"false";case"number":return isFinite(o)?o:"";default:return""}},fI=function(o,e,n,s){return e=e||"&",n=n||"=",o===null&&(o=void 0),typeof o=="object"?Object.keys(o).map(function(f){var v=encodeURIComponent(af(f))+n;return Array.isArray(o[f])?o[f].map(function(c){return v+encodeURIComponent(af(c))}).join(e):v+encodeURIComponent(af(o[f]))}).join(e):s?encodeURIComponent(af(s))+n+encodeURIComponent(af(o)):""};Lm(function(o,e){e.decode=e.parse=pI,e.encode=e.stringify=fI});function n1(o,...e){for(const n of e)for(const s in n)o[s]=n[s];return o}class yc extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}class Dy{constructor(e,n=[]){this.parent=e,this.bindings={};for(const[s,f]of n)this.bindings[s]=f}concat(e){return new Dy(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const Pm={kind:"null"},Ri={kind:"number"},Ir={kind:"string"},hr={kind:"boolean"},Qc={kind:"color"},up={kind:"object"},dr={kind:"value"},mI={kind:"error"},zm={kind:"collator"},Dm={kind:"formatted"},bf={kind:"resolvedImage"};function Wl(o,e){return{kind:"array",itemType:o,N:e}}function Go(o){if(o.kind==="array"){const e=Go(o.itemType);return typeof o.N=="number"?`array<${e}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${e}>`}else return o.kind}const gI=[Pm,Ri,Ir,hr,Qc,Dm,up,Wl(dr),bf];function pf(o,e){if(e.kind==="error")return null;if(o.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!pf(o.itemType,e.itemType))&&(typeof o.N!="number"||o.N===e.N))return null}else{if(o.kind===e.kind)return null;if(o.kind==="value"){for(const n of gI)if(!pf(n,e))return null}}return`Expected ${Go(o)} but found ${Go(e)} instead.`}function Ry(o,e){return e.some(n=>n.kind===o.kind)}function ff(o,e){return e.some(n=>n==="null"?o===null:n==="array"?Array.isArray(o):n==="object"?o&&!Array.isArray(o)&&typeof o=="object":n===typeof o)}var yI=Lm(function(o,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function s(P){return P=Math.round(P),P<0?0:P>255?255:P}function f(P){return P<0?0:P>1?1:P}function v(P){return P[P.length-1]==="%"?s(parseFloat(P)/100*255):s(parseInt(P))}function c(P){return P[P.length-1]==="%"?f(parseFloat(P)/100):f(parseFloat(P))}function h(P,D,R){return R<0?R+=1:R>1&&(R-=1),R*6<1?P+(D-P)*R*6:R*2<1?D:R*3<2?P+(D-P)*(2/3-R)*6:P}function S(P){var D=P.replace(/ /g,"").toLowerCase();if(D in n)return n[D].slice();if(D[0]==="#"){if(D.length===4){var R=parseInt(D.substr(1),16);return R>=0&&R<=4095?[(R&3840)>>4|(R&3840)>>8,R&240|(R&240)>>4,R&15|(R&15)<<4,1]:null}else if(D.length===7){var R=parseInt(D.substr(1),16);return R>=0&&R<=16777215?[(R&16711680)>>16,(R&65280)>>8,R&255,1]:null}return null}var O=D.indexOf("("),Y=D.indexOf(")");if(O!==-1&&Y+1===D.length){var ee=D.substr(0,O),he=D.substr(O+1,Y-(O+1)).split(","),re=1;switch(ee){case"rgba":if(he.length!==4)return null;re=c(he.pop());case"rgb":return he.length!==3?null:[v(he[0]),v(he[1]),v(he[2]),re];case"hsla":if(he.length!==4)return null;re=c(he.pop());case"hsl":if(he.length!==3)return null;var ve=(parseFloat(he[0])%360+360)%360/360,se=c(he[1]),we=c(he[2]),Ge=we<=.5?we*(se+1):we+se-we*se,Ue=we*2-Ge;return[s(h(Ue,Ge,ve+1/3)*255),s(h(Ue,Ge,ve)*255),s(h(Ue,Ge,ve-1/3)*255),re];default:return null}}return null}try{e.parseCSSColor=S}catch{}});class no{constructor(e,n,s,f=1){this.r=e,this.g=n,this.b=s,this.a=f}static parse(e){if(!e)return;if(e instanceof no)return e;if(typeof e!="string")return;const n=yI.parseCSSColor(e);if(!!n)return new no(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3])}toString(){const[e,n,s,f]=this.toArray();return`rgba(${Math.round(e)},${Math.round(n)},${Math.round(s)},${f})`}toArray(){const{r:e,g:n,b:s,a:f}=this;return f===0?[0,0,0,0]:[e*255/f,n*255/f,s*255/f,f]}}no.black=new no(0,0,0,1);no.white=new no(1,1,1,1);no.transparent=new no(0,0,0,0);no.red=new no(1,0,0,1);no.blue=new no(0,0,1,1);class Oy{constructor(e,n,s){e?this.sensitivity=n?"variant":"case":this.sensitivity=n?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class _y{constructor(e,n,s,f,v){this.text=e.normalize?e.normalize():e,this.image=n,this.scale=s,this.fontStack=f,this.textColor=v}}class Uu{constructor(e){this.sections=e}static fromString(e){return new Uu([new _y(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Uu?e:Uu.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const n of this.sections){if(n.image){e.push(["image",n.image.name]);continue}e.push(n.text);const s={};n.fontStack&&(s["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(s["font-scale"]=n.scale),n.textColor&&(s["text-color"]=["rgba"].concat(n.textColor.toArray())),e.push(s)}return e}}class th{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new th({name:e,available:!1}):null}serialize(){return["image",this.name]}}function r1(o,e,n,s){return typeof o=="number"&&o>=0&&o<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof n=="number"&&n>=0&&n<=255?typeof s=="undefined"||typeof s=="number"&&s>=0&&s<=1?null:`Invalid rgba value [${[o,e,n,s].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof s=="number"?[o,e,n,s]:[o,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wm(o){if(o===null)return!0;if(typeof o=="string")return!0;if(typeof o=="boolean")return!0;if(typeof o=="number")return!0;if(o instanceof no)return!0;if(o instanceof Oy)return!0;if(o instanceof Uu)return!0;if(o instanceof th)return!0;if(Array.isArray(o)){for(const e of o)if(!wm(e))return!1;return!0}else if(typeof o=="object"){for(const e in o)if(!wm(o[e]))return!1;return!0}else return!1}function Ua(o){if(o===null)return Pm;if(typeof o=="string")return Ir;if(typeof o=="boolean")return hr;if(typeof o=="number")return Ri;if(o instanceof no)return Qc;if(o instanceof Oy)return zm;if(o instanceof Uu)return Dm;if(o instanceof th)return bf;if(Array.isArray(o)){const e=o.length;let n;for(const s of o){const f=Ua(s);if(!n)n=f;else{if(n===f)continue;n=dr;break}}return Wl(n||dr,e)}else return up}function hf(o){const e=typeof o;return o===null?"":e==="string"||e==="number"||e==="boolean"?String(o):o instanceof no||o instanceof Uu||o instanceof th?o.toString():JSON.stringify(o)}class mp{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(e.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!wm(e[1]))return n.error("invalid value");const s=e[1];let f=Ua(s);const v=n.expectedType;return f.kind==="array"&&f.N===0&&v&&v.kind==="array"&&(typeof v.N!="number"||v.N===0)&&(f=v),new mp(f,s)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof no?["rgba"].concat(this.value.toArray()):this.value instanceof Uu?this.value.serialize():this.value}}class is{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Kg={string:Ir,number:Ri,boolean:hr,object:up};class Bu{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let s=1,f;const v=e[0];if(v==="array"){let h;if(e.length>2){const P=e[1];if(typeof P!="string"||!(P in Kg)||P==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);h=Kg[P],s++}else h=dr;let S;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);S=e[2],s++}f=Wl(h,S)}else f=Kg[v];const c=[];for(;s<e.length;s++){const h=n.parse(e[s],s,dr);if(!h)return null;c.push(h)}return new Bu(f,c)}evaluate(e){for(let n=0;n<this.args.length;n++){const s=this.args[n].evaluate(e);if(pf(this.type,Ua(s))){if(n===this.args.length-1)throw new is(`Expected value to be of type ${Go(this.type)}, but found ${Go(Ua(s))} instead.`)}else return s}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,n=[e.kind];if(e.kind==="array"){const s=e.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){n.push(s.kind);const f=e.N;(typeof f=="number"||this.args.length>1)&&n.push(f)}}return n.concat(this.args.map(s=>s.serialize()))}}class Rm{constructor(e){this.type=Dm,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const s=e[1];if(!Array.isArray(s)&&typeof s=="object")return n.error("First argument must be an image or text section.");const f=[];let v=!1;for(let c=1;c<=e.length-1;++c){const h=e[c];if(v&&typeof h=="object"&&!Array.isArray(h)){v=!1;let S=null;if(h["font-scale"]&&(S=n.parse(h["font-scale"],1,Ri),!S))return null;let P=null;if(h["text-font"]&&(P=n.parse(h["text-font"],1,Wl(Ir)),!P))return null;let D=null;if(h["text-color"]&&(D=n.parse(h["text-color"],1,Qc),!D))return null;const R=f[f.length-1];R.scale=S,R.font=P,R.textColor=D}else{const S=n.parse(e[c],1,dr);if(!S)return null;const P=S.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:S,scale:null,font:null,textColor:null})}}return new Rm(f)}evaluate(e){const n=s=>{const f=s.content.evaluate(e);return Ua(f)===bf?new _y("",f,null,null,null):new _y(hf(f),null,s.scale?s.scale.evaluate(e):null,s.font?s.font.evaluate(e).join(","):null,s.textColor?s.textColor.evaluate(e):null)};return new Uu(this.sections.map(n))}eachChild(e){for(const n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const n of this.sections){e.push(n.content.serialize());const s={};n.scale&&(s["font-scale"]=n.scale.serialize()),n.font&&(s["text-font"]=n.font.serialize()),n.textColor&&(s["text-color"]=n.textColor.serialize()),e.push(s)}return e}}class Om{constructor(e){this.type=bf,this.input=e}static parse(e,n){if(e.length!==2)return n.error("Expected two arguments.");const s=n.parse(e[1],1,Ir);return s?new Om(s):n.error("No image name provided.")}evaluate(e){const n=this.input.evaluate(e),s=th.fromString(n);return s&&e.availableImages&&(s.available=e.availableImages.indexOf(n)>-1),s}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const _I={"to-boolean":hr,"to-color":Qc,"to-number":Ri,"to-string":Ir};class Rh{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const s=e[0];if((s==="to-boolean"||s==="to-string")&&e.length!==2)return n.error("Expected one argument.");const f=_I[s],v=[];for(let c=1;c<e.length;c++){const h=n.parse(e[c],c,dr);if(!h)return null;v.push(h)}return new Rh(f,v)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let n,s;for(const f of this.args){if(n=f.evaluate(e),s=null,n instanceof no)return n;if(typeof n=="string"){const v=e.parseColor(n);if(v)return v}else if(Array.isArray(n)&&(n.length<3||n.length>4?s=`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:s=r1(n[0],n[1],n[2],n[3]),!s))return new no(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new is(s||`Could not parse color from value '${typeof n=="string"?n:String(JSON.stringify(n))}'`)}else if(this.type.kind==="number"){let n=null;for(const s of this.args){if(n=s.evaluate(e),n===null)return 0;const f=Number(n);if(!isNaN(f))return f}throw new is(`Could not convert ${JSON.stringify(n)} to number.`)}else return this.type.kind==="formatted"?Uu.fromString(hf(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?th.fromString(hf(this.args[0].evaluate(e))):hf(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Rm([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Om(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(n=>{e.push(n.serialize())}),e}}const vI=["Unknown","Point","LineString","Polygon"];class o1{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?vI[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:s,y:f}=this.featureTileCoord,v=s*n-e[0],c=f*n-e[1],h=this.featureDistanceData.bearing[0],S=this.featureDistanceData.bearing[1];return h*v+S*c}return 0}parseColor(e){let n=this._parseColorCache[e];return n||(n=this._parseColorCache[e]=no.parse(e)),n}}class Fu{constructor(e,n,s,f){this.name=e,this.type=n,this._evaluate=s,this.args=f}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,n){const s=e[0],f=Fu.definitions[s];if(!f)return n.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,c=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,h=c.filter(([P])=>!Array.isArray(P)||P.length===e.length-1);let S=null;for(const[P,D]of h){S=new Um(n.registry,n.path,null,n.scope);const R=[];let O=!1;for(let Y=1;Y<e.length;Y++){const ee=e[Y],he=Array.isArray(P)?P[Y-1]:P.type,re=S.parse(ee,1+R.length,he);if(!re){O=!0;break}R.push(re)}if(!O){if(Array.isArray(P)&&P.length!==R.length){S.error(`Expected ${P.length} arguments, but found ${R.length} instead.`);continue}for(let Y=0;Y<R.length;Y++){const ee=Array.isArray(P)?P[Y]:P.type,he=R[Y];S.concat(Y+1).checkSubtype(ee,he.type)}if(S.errors.length===0)return new Fu(s,v,D,R)}}if(h.length===1)n.errors.push(...S.errors);else{const D=(h.length?h:c).map(([O])=>bI(O)).join(" | "),R=[];for(let O=1;O<e.length;O++){const Y=n.parse(e[O],1+R.length);if(!Y)return null;R.push(Go(Y.type))}n.error(`Expected arguments of type ${D}, but found (${R.join(", ")}) instead.`)}return null}static register(e,n){Fu.definitions=n;for(const s in n)e[s]=Fu}}function bI(o){return Array.isArray(o)?`(${o.map(Go).join(", ")})`:`(${Go(o.type)}...)`}class Bm{constructor(e,n,s){this.type=zm,this.locale=s,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(e.length!==2)return n.error("Expected one argument.");const s=e[1];if(typeof s!="object"||Array.isArray(s))return n.error("Collator options argument must be an object.");const f=n.parse(s["case-sensitive"]===void 0?!1:s["case-sensitive"],1,hr);if(!f)return null;const v=n.parse(s["diacritic-sensitive"]===void 0?!1:s["diacritic-sensitive"],1,hr);if(!v)return null;let c=null;return s.locale&&(c=n.parse(s.locale,1,Ir),!c)?null:new Bm(f,v,c)}evaluate(e){return new Oy(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Bh=8192;function By(o,e){o[0]=Math.min(o[0],e[0]),o[1]=Math.min(o[1],e[1]),o[2]=Math.max(o[2],e[0]),o[3]=Math.max(o[3],e[1])}function xI(o){return(180+o)/360}function wI(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Em(o,e){return!(o[0]<=e[0]||o[2]>=e[2]||o[1]<=e[1]||o[3]>=e[3])}function EI(o,e){const n=xI(o[0]),s=wI(o[1]),f=Math.pow(2,e.z);return[Math.round(n*f*Bh),Math.round(s*f*Bh)]}function II(o,e,n){const s=o[0]-e[0],f=o[1]-e[1],v=o[0]-n[0],c=o[1]-n[1];return s*c-v*f===0&&s*v<=0&&f*c<=0}function SI(o,e,n){return e[1]>o[1]!=n[1]>o[1]&&o[0]<(n[0]-e[0])*(o[1]-e[1])/(n[1]-e[1])+e[0]}function Fy(o,e){let n=!1;for(let s=0,f=e.length;s<f;s++){const v=e[s];for(let c=0,h=v.length;c<h-1;c++){if(II(o,v[c],v[c+1]))return!1;SI(o,v[c],v[c+1])&&(n=!n)}}return n}function TI(o,e){for(let n=0;n<e.length;n++)if(Fy(o,e[n]))return!0;return!1}function AI(o,e){return o[0]*e[1]-o[1]*e[0]}function Ev(o,e,n,s){const f=o[0]-n[0],v=o[1]-n[1],c=e[0]-n[0],h=e[1]-n[1],S=s[0]-n[0],P=s[1]-n[1],D=f*P-S*v,R=c*P-S*h;return D>0&&R<0||D<0&&R>0}function CI(o,e,n,s){const f=[e[0]-o[0],e[1]-o[1]],v=[s[0]-n[0],s[1]-n[1]];return AI(v,f)===0?!1:!!(Ev(o,e,n,s)&&Ev(n,s,o,e))}function kI(o,e,n){for(const s of n)for(let f=0;f<s.length-1;++f)if(CI(o,e,s[f],s[f+1]))return!0;return!1}function a1(o,e){for(let n=0;n<o.length;++n)if(!Fy(o[n],e))return!1;for(let n=0;n<o.length-1;++n)if(kI(o[n],o[n+1],e))return!1;return!0}function MI(o,e){for(let n=0;n<e.length;n++)if(a1(o,e[n]))return!0;return!1}function Uy(o,e,n){const s=[];for(let f=0;f<o.length;f++){const v=[];for(let c=0;c<o[f].length;c++){const h=EI(o[f][c],n);By(e,h),v.push(h)}s.push(v)}return s}function s1(o,e,n){const s=[];for(let f=0;f<o.length;f++){const v=Uy(o[f],e,n);s.push(v)}return s}function l1(o,e,n,s){if(o[0]<n[0]||o[0]>n[2]){const f=s*.5;let v=o[0]-n[0]>f?-s:n[0]-o[0]>f?s:0;v===0&&(v=o[0]-n[2]>f?-s:n[2]-o[0]>f?s:0),o[0]+=v}By(e,o)}function LI(o){o[0]=o[1]=1/0,o[2]=o[3]=-1/0}function Iv(o,e,n,s){const f=Math.pow(2,s.z)*Bh,v=[s.x*Bh,s.y*Bh],c=[];if(!o)return c;for(const h of o)for(const S of h){const P=[S.x+v[0],S.y+v[1]];l1(P,e,n,f),c.push(P)}return c}function Sv(o,e,n,s){const f=Math.pow(2,s.z)*Bh,v=[s.x*Bh,s.y*Bh],c=[];if(!o)return c;for(const h of o){const S=[];for(const P of h){const D=[P.x+v[0],P.y+v[1]];By(e,D),S.push(D)}c.push(S)}if(e[2]-e[0]<=f/2){LI(e);for(const h of c)for(const S of h)l1(S,e,n,f)}return c}function PI(o,e){const n=[1/0,1/0,-1/0,-1/0],s=[1/0,1/0,-1/0,-1/0],f=o.canonicalID();if(!f)return!1;if(e.type==="Polygon"){const v=Uy(e.coordinates,s,f),c=Iv(o.geometry(),n,s,f);if(!Em(n,s))return!1;for(const h of c)if(!Fy(h,v))return!1}if(e.type==="MultiPolygon"){const v=s1(e.coordinates,s,f),c=Iv(o.geometry(),n,s,f);if(!Em(n,s))return!1;for(const h of c)if(!TI(h,v))return!1}return!0}function zI(o,e){const n=[1/0,1/0,-1/0,-1/0],s=[1/0,1/0,-1/0,-1/0],f=o.canonicalID();if(!f)return!1;if(e.type==="Polygon"){const v=Uy(e.coordinates,s,f),c=Sv(o.geometry(),n,s,f);if(!Em(n,s))return!1;for(const h of c)if(!a1(h,v))return!1}if(e.type==="MultiPolygon"){const v=s1(e.coordinates,s,f),c=Sv(o.geometry(),n,s,f);if(!Em(n,s))return!1;for(const h of c)if(!MI(h,v))return!1}return!0}class Id{constructor(e,n){this.type=hr,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(wm(e[1])){const s=e[1];if(s.type==="FeatureCollection")for(let f=0;f<s.features.length;++f){const v=s.features[f].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Id(s,s.features[f].geometry)}else if(s.type==="Feature"){const f=s.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Id(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new Id(s,s)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return PI(e,this.geometries);if(e.geometryType()==="LineString")return zI(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Ny(o){if(o instanceof Fu){if(o.name==="get"&&o.args.length===1)return!1;if(o.name==="feature-state")return!1;if(o.name==="has"&&o.args.length===1)return!1;if(o.name==="properties"||o.name==="geometry-type"||o.name==="id")return!1;if(/^filter-/.test(o.name))return!1}if(o instanceof Id)return!1;let e=!0;return o.eachChild(n=>{e&&!Ny(n)&&(e=!1)}),e}function Vy(o){if(o instanceof Fu&&o.name==="feature-state")return!1;let e=!0;return o.eachChild(n=>{e&&!Vy(n)&&(e=!1)}),e}function jy(o,e){if(o instanceof Fu&&e.indexOf(o.name)>=0)return!1;let n=!0;return o.eachChild(s=>{n&&!jy(s,e)&&(n=!1)}),n}class Fm{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(e.length!==2||typeof e[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const s=e[1];return n.scope.has(s)?new Fm(s,n.scope.get(s)):n.error(`Unknown variable "${s}". Make sure "${s}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Um{constructor(e,n=[],s,f=new Dy,v=[]){this.registry=e,this.path=n,this.key=n.map(c=>`[${c}]`).join(""),this.scope=f,this.errors=v,this.expectedType=s}parse(e,n,s,f,v={}){return n?this.concat(n,s,f)._parse(e,v):this._parse(e,v)}_parse(e,n){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function s(f,v,c){return c==="assert"?new Bu(v,[f]):c==="coerce"?new Rh(v,[f]):f}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=e[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let c=v.parse(e,this);if(!c)return null;if(this.expectedType){const h=this.expectedType,S=c.type;if((h.kind==="string"||h.kind==="number"||h.kind==="boolean"||h.kind==="object"||h.kind==="array")&&S.kind==="value")c=s(c,h,n.typeAnnotation||"assert");else if((h.kind==="color"||h.kind==="formatted"||h.kind==="resolvedImage")&&(S.kind==="value"||S.kind==="string"))c=s(c,h,n.typeAnnotation||"coerce");else if(this.checkSubtype(h,S))return null}if(!(c instanceof mp)&&c.type.kind!=="resolvedImage"&&vy(c)){const h=new o1;try{c=new mp(c.type,c.evaluate(h))}catch(S){return this.error(S.message),null}}return c}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,n,s){const f=typeof e=="number"?this.path.concat(e):this.path,v=s?this.scope.concat(s):this.scope;return new Um(this.registry,f,n||null,v,this.errors)}error(e,...n){const s=`${this.key}${n.map(f=>`[${f}]`).join("")}`;this.errors.push(new yc(s,e))}checkSubtype(e,n){const s=pf(e,n);return s&&this.error(s),s}}function vy(o){if(o instanceof Fm)return vy(o.boundExpression);if(o instanceof Fu&&o.name==="error")return!1;if(o instanceof Bm)return!1;if(o instanceof Id)return!1;const e=o instanceof Rh||o instanceof Bu;let n=!0;return o.eachChild(s=>{e?n=n&&vy(s):n=n&&s instanceof mp}),n?Ny(o)&&jy(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function Nm(o,e){const n=o.length-1;let s=0,f=n,v=0,c,h;for(;s<=f;)if(v=Math.floor((s+f)/2),c=o[v],h=o[v+1],c<=e){if(v===n||e<h)return v;s=v+1}else if(c>e)f=v-1;else throw new is("Input is not a number.");return 0}class Vm{constructor(e,n,s){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(const[f,v]of s)this.labels.push(f),this.outputs.push(v)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return n.error("Expected an even number of arguments.");const s=n.parse(e[1],1,Ri);if(!s)return null;const f=[];let v=null;n.expectedType&&n.expectedType.kind!=="value"&&(v=n.expectedType);for(let c=1;c<e.length;c+=2){const h=c===1?-1/0:e[c],S=e[c+1],P=c,D=c+1;if(typeof h!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(f.length&&f[f.length-1][0]>=h)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const R=n.parse(S,D,v);if(!R)return null;v=v||R.type,f.push([h,R])}return new Vm(v,s,f)}evaluate(e){const n=this.labels,s=this.outputs;if(n.length===1)return s[0].evaluate(e);const f=this.input.evaluate(e);if(f<=n[0])return s[0].evaluate(e);const v=n.length;if(f>=n[v-1])return s[v-1].evaluate(e);const c=Nm(n,f);return s[c].evaluate(e)}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let n=0;n<this.labels.length;n++)n>0&&e.push(this.labels[n]),e.push(this.outputs[n].serialize());return e}}var DI=vp;function vp(o,e,n,s){this.cx=3*o,this.bx=3*(n-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(s-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=s,this.p2x=n,this.p2y=s}vp.prototype.sampleCurveX=function(o){return((this.ax*o+this.bx)*o+this.cx)*o};vp.prototype.sampleCurveY=function(o){return((this.ay*o+this.by)*o+this.cy)*o};vp.prototype.sampleCurveDerivativeX=function(o){return(3*this.ax*o+2*this.bx)*o+this.cx};vp.prototype.solveCurveX=function(o,e){typeof e=="undefined"&&(e=1e-6);var n,s,f,v,c;for(f=o,c=0;c<8;c++){if(v=this.sampleCurveX(f)-o,Math.abs(v)<e)return f;var h=this.sampleCurveDerivativeX(f);if(Math.abs(h)<1e-6)break;f=f-v/h}if(n=0,s=1,f=o,f<n)return n;if(f>s)return s;for(;n<s;){if(v=this.sampleCurveX(f),Math.abs(v-o)<e)return f;o>v?n=f:s=f,f=(s-n)*.5+n}return f};vp.prototype.solve=function(o,e){return this.sampleCurveY(this.solveCurveX(o,e))};function Tl(o,e,n){return o*(1-n)+e*n}function RI(o,e,n){return new no(Tl(o.r,e.r,n),Tl(o.g,e.g,n),Tl(o.b,e.b,n),Tl(o.a,e.a,n))}function OI(o,e,n){return o.map((s,f)=>Tl(s,e[f],n))}var u1=Object.freeze({__proto__:null,number:Tl,color:RI,array:OI});const c1=.95047,h1=1,d1=1.08883,p1=4/29,cp=6/29,f1=3*cp*cp,BI=cp*cp*cp,FI=Math.PI/180,UI=180/Math.PI;function Jg(o){return o>BI?Math.pow(o,1/3):o/f1+p1}function Yg(o){return o>cp?o*o*o:f1*(o-p1)}function Qg(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function $g(o){return o/=255,o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function m1(o){const e=$g(o.r),n=$g(o.g),s=$g(o.b),f=Jg((.4124564*e+.3575761*n+.1804375*s)/c1),v=Jg((.2126729*e+.7151522*n+.072175*s)/h1),c=Jg((.0193339*e+.119192*n+.9503041*s)/d1);return{l:116*v-16,a:500*(f-v),b:200*(v-c),alpha:o.a}}function g1(o){let e=(o.l+16)/116,n=isNaN(o.a)?e:e+o.a/500,s=isNaN(o.b)?e:e-o.b/200;return e=h1*Yg(e),n=c1*Yg(n),s=d1*Yg(s),new no(Qg(3.2404542*n-1.5371385*e-.4985314*s),Qg(-.969266*n+1.8760108*e+.041556*s),Qg(.0556434*n-.2040259*e+1.0572252*s),o.alpha)}function NI(o,e,n){return{l:Tl(o.l,e.l,n),a:Tl(o.a,e.a,n),b:Tl(o.b,e.b,n),alpha:Tl(o.alpha,e.alpha,n)}}function VI(o){const{l:e,a:n,b:s}=m1(o),f=Math.atan2(s,n)*UI;return{h:f<0?f+360:f,c:Math.sqrt(n*n+s*s),l:e,alpha:o.a}}function jI(o){const e=o.h*FI,n=o.c,s=o.l;return g1({l:s,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:o.alpha})}function qI(o,e,n){const s=e-o;return o+n*(s>180||s<-180?s-360*Math.round(s/360):s)}function GI(o,e,n){return{h:qI(o.h,e.h,n),c:Tl(o.c,e.c,n),l:Tl(o.l,e.l,n),alpha:Tl(o.alpha,e.alpha,n)}}const uf={forward:m1,reverse:g1,interpolate:NI},cf={forward:VI,reverse:jI,interpolate:GI};var y1=Object.freeze({__proto__:null,lab:uf,hcl:cf});class Ql{constructor(e,n,s,f,v){this.type=e,this.operator=n,this.interpolation=s,this.input=f,this.labels=[],this.outputs=[];for(const[c,h]of v)this.labels.push(c),this.outputs.push(h)}static interpolationFactor(e,n,s,f){let v=0;if(e.name==="exponential")v=ey(n,e.base,s,f);else if(e.name==="linear")v=ey(n,1,s,f);else if(e.name==="cubic-bezier"){const c=e.controlPoints;v=new DI(c[0],c[1],c[2],c[3]).solve(ey(n,1,s,f))}return v}static parse(e,n){let[s,f,v,...c]=e;if(!Array.isArray(f)||f.length===0)return n.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const P=f[1];if(typeof P!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:P}}else if(f[0]==="cubic-bezier"){const P=f.slice(1);if(P.length!==4||P.some(D=>typeof D!="number"||D<0||D>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:P}}else return n.error(`Unknown interpolation type ${String(f[0])}`,1,0);if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return n.error("Expected an even number of arguments.");if(v=n.parse(v,2,Ri),!v)return null;const h=[];let S=null;s==="interpolate-hcl"||s==="interpolate-lab"?S=Qc:n.expectedType&&n.expectedType.kind!=="value"&&(S=n.expectedType);for(let P=0;P<c.length;P+=2){const D=c[P],R=c[P+1],O=P+3,Y=P+4;if(typeof D!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(h.length&&h[h.length-1][0]>=D)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const ee=n.parse(R,Y,S);if(!ee)return null;S=S||ee.type,h.push([D,ee])}return S.kind!=="number"&&S.kind!=="color"&&!(S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number")?n.error(`Type ${Go(S)} is not interpolatable.`):new Ql(S,s,f,v,h)}evaluate(e){const n=this.labels,s=this.outputs;if(n.length===1)return s[0].evaluate(e);const f=this.input.evaluate(e);if(f<=n[0])return s[0].evaluate(e);const v=n.length;if(f>=n[v-1])return s[v-1].evaluate(e);const c=Nm(n,f),h=n[c],S=n[c+1],P=Ql.interpolationFactor(this.interpolation,f,h,S),D=s[c].evaluate(e),R=s[c+1].evaluate(e);return this.operator==="interpolate"?u1[this.type.kind.toLowerCase()](D,R,P):this.operator==="interpolate-hcl"?cf.reverse(cf.interpolate(cf.forward(D),cf.forward(R),P)):uf.reverse(uf.interpolate(uf.forward(D),uf.forward(R),P))}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const n=[this.operator,e,this.input.serialize()];for(let s=0;s<this.labels.length;s++)n.push(this.labels[s],this.outputs[s].serialize());return n}}function ey(o,e,n,s){const f=s-n,v=o-n;return f===0?0:e===1?v/f:(Math.pow(e,v)-1)/(Math.pow(e,f)-1)}class mf{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expectected at least one argument.");let s=null;const f=n.expectedType;f&&f.kind!=="value"&&(s=f);const v=[];for(const h of e.slice(1)){const S=n.parse(h,1+v.length,s,void 0,{typeAnnotation:"omit"});if(!S)return null;s=s||S.type,v.push(S)}return f&&v.some(h=>pf(f,h.type))?new mf(dr,v):new mf(s,v)}evaluate(e){let n=null,s=0,f;for(const v of this.args){if(s++,n=v.evaluate(e),n&&n instanceof th&&!n.available&&(f||(f=n),n=null,s===this.args.length))return f;if(n!==null)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(n=>{e.push(n.serialize())}),e}}class jm{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const s=[];for(let v=1;v<e.length-1;v+=2){const c=e[v];if(typeof c!="string")return n.error(`Expected string, but found ${typeof c} instead.`,v);if(/[^a-zA-Z0-9_]/.test(c))return n.error("Variable names must contain only alphanumeric characters or '_'.",v);const h=n.parse(e[v+1],v+1);if(!h)return null;s.push([c,h])}const f=n.parse(e[e.length-1],e.length-1,n.expectedType,s);return f?new jm(s,f):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[n,s]of this.bindings)e.push(n,s.serialize());return e.push(this.result.serialize()),e}}class qy{constructor(e,n,s){this.type=e,this.index=n,this.input=s}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,Ri),f=n.parse(e[2],2,Wl(n.expectedType||dr));if(!s||!f)return null;const v=f.type;return new qy(v.itemType,s,f)}evaluate(e){const n=this.index.evaluate(e),s=this.input.evaluate(e);if(n<0)throw new is(`Array index out of bounds: ${n} < 0.`);if(n>=s.length)throw new is(`Array index out of bounds: ${n} > ${s.length-1}.`);if(n!==Math.floor(n))throw new is(`Array index must be an integer, but found ${n} instead.`);return s[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Gy{constructor(e,n){this.type=hr,this.needle=e,this.haystack=n}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,dr),f=n.parse(e[2],2,dr);return!s||!f?null:Ry(s.type,[hr,Ir,Ri,Pm,dr])?new Gy(s,f):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Go(s.type)} instead`)}evaluate(e){const n=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(s==null)return!1;if(!ff(n,["boolean","string","number","null"]))throw new is(`Expected first argument to be of type boolean, string, number or null, but found ${Go(Ua(n))} instead.`);if(!ff(s,["string","array"]))throw new is(`Expected second argument to be of type array or string, but found ${Go(Ua(s))} instead.`);return s.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Im{constructor(e,n,s){this.type=Ri,this.needle=e,this.haystack=n,this.fromIndex=s}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,dr),f=n.parse(e[2],2,dr);if(!s||!f)return null;if(!Ry(s.type,[hr,Ir,Ri,Pm,dr]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Go(s.type)} instead`);if(e.length===4){const v=n.parse(e[3],3,Ri);return v?new Im(s,f,v):null}else return new Im(s,f)}evaluate(e){const n=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!ff(n,["boolean","string","number","null"]))throw new is(`Expected first argument to be of type boolean, string, number or null, but found ${Go(Ua(n))} instead.`);if(!ff(s,["string","array"]))throw new is(`Expected second argument to be of type array or string, but found ${Go(Ua(s))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(e);return s.indexOf(n,f)}return s.indexOf(n)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Hy{constructor(e,n,s,f,v,c){this.inputType=e,this.type=n,this.input=s,this.cases=f,this.outputs=v,this.otherwise=c}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return n.error("Expected an even number of arguments.");let s,f;n.expectedType&&n.expectedType.kind!=="value"&&(f=n.expectedType);const v={},c=[];for(let P=2;P<e.length-1;P+=2){let D=e[P];const R=e[P+1];Array.isArray(D)||(D=[D]);const O=n.concat(P);if(D.length===0)return O.error("Expected at least one branch label.");for(const ee of D){if(typeof ee!="number"&&typeof ee!="string")return O.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return O.error("Numeric branch labels must be integer values.");if(!s)s=Ua(ee);else if(O.checkSubtype(s,Ua(ee)))return null;if(typeof v[String(ee)]!="undefined")return O.error("Branch labels must be unique.");v[String(ee)]=c.length}const Y=n.parse(R,P,f);if(!Y)return null;f=f||Y.type,c.push(Y)}const h=n.parse(e[1],1,dr);if(!h)return null;const S=n.parse(e[e.length-1],e.length-1,f);return!S||h.type.kind!=="value"&&n.concat(1).checkSubtype(s,h.type)?null:new Hy(s,f,h,v,c,S)}evaluate(e){const n=this.input.evaluate(e);return(Ua(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),s=[],f={};for(const c of n){const h=f[this.cases[c]];h===void 0?(f[this.cases[c]]=s.length,s.push([this.cases[c],[c]])):s[h][1].push(c)}const v=c=>this.inputType.kind==="number"?Number(c):c;for(const[c,h]of s)h.length===1?e.push(v(h[0])):e.push(h.map(v)),e.push(this.outputs[c].serialize());return e.push(this.otherwise.serialize()),e}}class Zy{constructor(e,n,s){this.type=e,this.branches=n,this.otherwise=s}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return n.error("Expected an odd number of arguments.");let s;n.expectedType&&n.expectedType.kind!=="value"&&(s=n.expectedType);const f=[];for(let c=1;c<e.length-1;c+=2){const h=n.parse(e[c],c,hr);if(!h)return null;const S=n.parse(e[c+1],c+1,s);if(!S)return null;f.push([h,S]),s=s||S.type}const v=n.parse(e[e.length-1],e.length-1,s);return v?new Zy(s,f,v):null}evaluate(e){for(const[n,s]of this.branches)if(n.evaluate(e))return s.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[n,s]of this.branches)e(n),e(s);e(this.otherwise)}outputDefined(){return this.branches.every(([e,n])=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(n=>{e.push(n.serialize())}),e}}class Sm{constructor(e,n,s,f){this.type=e,this.input=n,this.beginIndex=s,this.endIndex=f}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=n.parse(e[1],1,dr),f=n.parse(e[2],2,Ri);if(!s||!f)return null;if(!Ry(s.type,[Wl(dr),Ir,dr]))return n.error(`Expected first argument to be of type array or string, but found ${Go(s.type)} instead`);if(e.length===4){const v=n.parse(e[3],3,Ri);return v?new Sm(s.type,s,f,v):null}else return new Sm(s.type,s,f)}evaluate(e){const n=this.input.evaluate(e),s=this.beginIndex.evaluate(e);if(!ff(n,["string","array"]))throw new is(`Expected first argument to be of type array or string, but found ${Go(Ua(n))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(e);return n.slice(s,f)}return n.slice(s)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Tv(o,e){return o==="=="||o==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function HI(o,e,n){return e===n}function ZI(o,e,n){return e!==n}function WI(o,e,n){return e<n}function XI(o,e,n){return e>n}function KI(o,e,n){return e<=n}function JI(o,e,n){return e>=n}function _1(o,e,n,s){return s.compare(e,n)===0}function YI(o,e,n,s){return!_1(o,e,n,s)}function QI(o,e,n,s){return s.compare(e,n)<0}function $I(o,e,n,s){return s.compare(e,n)>0}function eS(o,e,n,s){return s.compare(e,n)<=0}function tS(o,e,n,s){return s.compare(e,n)>=0}function bp(o,e,n){const s=o!=="=="&&o!=="!=";return class v1{constructor(v,c,h){this.type=hr,this.lhs=v,this.rhs=c,this.collator=h,this.hasUntypedArgument=v.type.kind==="value"||c.type.kind==="value"}static parse(v,c){if(v.length!==3&&v.length!==4)return c.error("Expected two or three arguments.");const h=v[0];let S=c.parse(v[1],1,dr);if(!S)return null;if(!Tv(h,S.type))return c.concat(1).error(`"${h}" comparisons are not supported for type '${Go(S.type)}'.`);let P=c.parse(v[2],2,dr);if(!P)return null;if(!Tv(h,P.type))return c.concat(2).error(`"${h}" comparisons are not supported for type '${Go(P.type)}'.`);if(S.type.kind!==P.type.kind&&S.type.kind!=="value"&&P.type.kind!=="value")return c.error(`Cannot compare types '${Go(S.type)}' and '${Go(P.type)}'.`);s&&(S.type.kind==="value"&&P.type.kind!=="value"?S=new Bu(P.type,[S]):S.type.kind!=="value"&&P.type.kind==="value"&&(P=new Bu(S.type,[P])));let D=null;if(v.length===4){if(S.type.kind!=="string"&&P.type.kind!=="string"&&S.type.kind!=="value"&&P.type.kind!=="value")return c.error("Cannot use collator to compare non-string types.");if(D=c.parse(v[3],3,zm),!D)return null}return new v1(S,P,D)}evaluate(v){const c=this.lhs.evaluate(v),h=this.rhs.evaluate(v);if(s&&this.hasUntypedArgument){const S=Ua(c),P=Ua(h);if(S.kind!==P.kind||!(S.kind==="string"||S.kind==="number"))throw new is(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${S.kind}, ${P.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){const S=Ua(c),P=Ua(h);if(S.kind!=="string"||P.kind!=="string")return e(v,c,h)}return this.collator?n(v,c,h,this.collator.evaluate(v)):e(v,c,h)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[o];return this.eachChild(c=>{v.push(c.serialize())}),v}}}const iS=bp("==",HI,_1),nS=bp("!=",ZI,YI),rS=bp("<",WI,QI),oS=bp(">",XI,$I),aS=bp("<=",KI,eS),sS=bp(">=",JI,tS);class Wy{constructor(e,n,s,f,v){this.type=Ir,this.number=e,this.locale=n,this.currency=s,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(e,n){if(e.length!==3)return n.error("Expected two arguments.");const s=n.parse(e[1],1,Ri);if(!s)return null;const f=e[2];if(typeof f!="object"||Array.isArray(f))return n.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=n.parse(f.locale,1,Ir),!v))return null;let c=null;if(f.currency&&(c=n.parse(f.currency,1,Ir),!c))return null;let h=null;if(f["min-fraction-digits"]&&(h=n.parse(f["min-fraction-digits"],1,Ri),!h))return null;let S=null;return f["max-fraction-digits"]&&(S=n.parse(f["max-fraction-digits"],1,Ri),!S)?null:new Wy(s,v,c,h,S)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Xy{constructor(e){this.type=Ri,this.input=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const s=n.parse(e[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${Go(s.type)} instead.`):new Xy(s):null}evaluate(e){const n=this.input.evaluate(e);if(typeof n=="string")return n.length;if(Array.isArray(n))return n.length;throw new is(`Expected value to be of type string or array, but found ${Go(Ua(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(n=>{e.push(n.serialize())}),e}}const Ky={"==":iS,"!=":nS,">":oS,"<":rS,">=":sS,"<=":aS,array:Bu,at:qy,boolean:Bu,case:Zy,coalesce:mf,collator:Bm,format:Rm,image:Om,in:Gy,"index-of":Im,interpolate:Ql,"interpolate-hcl":Ql,"interpolate-lab":Ql,length:Xy,let:jm,literal:mp,match:Hy,number:Bu,"number-format":Wy,object:Bu,slice:Sm,step:Vm,string:Bu,"to-boolean":Rh,"to-color":Rh,"to-number":Rh,"to-string":Rh,var:Fm,within:Id};function Av(o,[e,n,s,f]){e=e.evaluate(o),n=n.evaluate(o),s=s.evaluate(o);const v=f?f.evaluate(o):1,c=r1(e,n,s,v);if(c)throw new is(c);return new no(e/255*v,n/255*v,s/255*v,v)}function Cv(o,e){return o in e}function ty(o,e){const n=e[o];return typeof n=="undefined"?null:n}function lS(o,e,n,s){for(;n<=s;){const f=n+s>>1;if(e[f]===o)return!0;e[f]>o?s=f-1:n=f+1}return!1}function pd(o){return{type:o}}Fu.register(Ky,{error:[mI,[Ir],(o,[e])=>{throw new is(e.evaluate(o))}],typeof:[Ir,[dr],(o,[e])=>Go(Ua(e.evaluate(o)))],"to-rgba":[Wl(Ri,4),[Qc],(o,[e])=>e.evaluate(o).toArray()],rgb:[Qc,[Ri,Ri,Ri],Av],rgba:[Qc,[Ri,Ri,Ri,Ri],Av],has:{type:hr,overloads:[[[Ir],(o,[e])=>Cv(e.evaluate(o),o.properties())],[[Ir,up],(o,[e,n])=>Cv(e.evaluate(o),n.evaluate(o))]]},get:{type:dr,overloads:[[[Ir],(o,[e])=>ty(e.evaluate(o),o.properties())],[[Ir,up],(o,[e,n])=>ty(e.evaluate(o),n.evaluate(o))]]},"feature-state":[dr,[Ir],(o,[e])=>ty(e.evaluate(o),o.featureState||{})],properties:[up,[],o=>o.properties()],"geometry-type":[Ir,[],o=>o.geometryType()],id:[dr,[],o=>o.id()],zoom:[Ri,[],o=>o.globals.zoom],pitch:[Ri,[],o=>o.globals.pitch||0],"distance-from-center":[Ri,[],o=>o.distanceFromCenter()],"heatmap-density":[Ri,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ri,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[Ri,[],o=>o.globals.skyRadialProgress||0],accumulated:[dr,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ri,pd(Ri),(o,e)=>{let n=0;for(const s of e)n+=s.evaluate(o);return n}],"*":[Ri,pd(Ri),(o,e)=>{let n=1;for(const s of e)n*=s.evaluate(o);return n}],"-":{type:Ri,overloads:[[[Ri,Ri],(o,[e,n])=>e.evaluate(o)-n.evaluate(o)],[[Ri],(o,[e])=>-e.evaluate(o)]]},"/":[Ri,[Ri,Ri],(o,[e,n])=>e.evaluate(o)/n.evaluate(o)],"%":[Ri,[Ri,Ri],(o,[e,n])=>e.evaluate(o)%n.evaluate(o)],ln2:[Ri,[],()=>Math.LN2],pi:[Ri,[],()=>Math.PI],e:[Ri,[],()=>Math.E],"^":[Ri,[Ri,Ri],(o,[e,n])=>Math.pow(e.evaluate(o),n.evaluate(o))],sqrt:[Ri,[Ri],(o,[e])=>Math.sqrt(e.evaluate(o))],log10:[Ri,[Ri],(o,[e])=>Math.log(e.evaluate(o))/Math.LN10],ln:[Ri,[Ri],(o,[e])=>Math.log(e.evaluate(o))],log2:[Ri,[Ri],(o,[e])=>Math.log(e.evaluate(o))/Math.LN2],sin:[Ri,[Ri],(o,[e])=>Math.sin(e.evaluate(o))],cos:[Ri,[Ri],(o,[e])=>Math.cos(e.evaluate(o))],tan:[Ri,[Ri],(o,[e])=>Math.tan(e.evaluate(o))],asin:[Ri,[Ri],(o,[e])=>Math.asin(e.evaluate(o))],acos:[Ri,[Ri],(o,[e])=>Math.acos(e.evaluate(o))],atan:[Ri,[Ri],(o,[e])=>Math.atan(e.evaluate(o))],min:[Ri,pd(Ri),(o,e)=>Math.min(...e.map(n=>n.evaluate(o)))],max:[Ri,pd(Ri),(o,e)=>Math.max(...e.map(n=>n.evaluate(o)))],abs:[Ri,[Ri],(o,[e])=>Math.abs(e.evaluate(o))],round:[Ri,[Ri],(o,[e])=>{const n=e.evaluate(o);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ri,[Ri],(o,[e])=>Math.floor(e.evaluate(o))],ceil:[Ri,[Ri],(o,[e])=>Math.ceil(e.evaluate(o))],"filter-==":[hr,[Ir,dr],(o,[e,n])=>o.properties()[e.value]===n.value],"filter-id-==":[hr,[dr],(o,[e])=>o.id()===e.value],"filter-type-==":[hr,[Ir],(o,[e])=>o.geometryType()===e.value],"filter-<":[hr,[Ir,dr],(o,[e,n])=>{const s=o.properties()[e.value],f=n.value;return typeof s==typeof f&&s<f}],"filter-id-<":[hr,[dr],(o,[e])=>{const n=o.id(),s=e.value;return typeof n==typeof s&&n<s}],"filter->":[hr,[Ir,dr],(o,[e,n])=>{const s=o.properties()[e.value],f=n.value;return typeof s==typeof f&&s>f}],"filter-id->":[hr,[dr],(o,[e])=>{const n=o.id(),s=e.value;return typeof n==typeof s&&n>s}],"filter-<=":[hr,[Ir,dr],(o,[e,n])=>{const s=o.properties()[e.value],f=n.value;return typeof s==typeof f&&s<=f}],"filter-id-<=":[hr,[dr],(o,[e])=>{const n=o.id(),s=e.value;return typeof n==typeof s&&n<=s}],"filter->=":[hr,[Ir,dr],(o,[e,n])=>{const s=o.properties()[e.value],f=n.value;return typeof s==typeof f&&s>=f}],"filter-id->=":[hr,[dr],(o,[e])=>{const n=o.id(),s=e.value;return typeof n==typeof s&&n>=s}],"filter-has":[hr,[dr],(o,[e])=>e.value in o.properties()],"filter-has-id":[hr,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[hr,[Wl(Ir)],(o,[e])=>e.value.indexOf(o.geometryType())>=0],"filter-id-in":[hr,[Wl(dr)],(o,[e])=>e.value.indexOf(o.id())>=0],"filter-in-small":[hr,[Ir,Wl(dr)],(o,[e,n])=>n.value.indexOf(o.properties()[e.value])>=0],"filter-in-large":[hr,[Ir,Wl(dr)],(o,[e,n])=>lS(o.properties()[e.value],n.value,0,n.value.length-1)],all:{type:hr,overloads:[[[hr,hr],(o,[e,n])=>e.evaluate(o)&&n.evaluate(o)],[pd(hr),(o,e)=>{for(const n of e)if(!n.evaluate(o))return!1;return!0}]]},any:{type:hr,overloads:[[[hr,hr],(o,[e,n])=>e.evaluate(o)||n.evaluate(o)],[pd(hr),(o,e)=>{for(const n of e)if(n.evaluate(o))return!0;return!1}]]},"!":[hr,[hr],(o,[e])=>!e.evaluate(o)],"is-supported-script":[hr,[Ir],(o,[e])=>{const n=o.globals&&o.globals.isSupportedScript;return n?n(e.evaluate(o)):!0}],upcase:[Ir,[Ir],(o,[e])=>e.evaluate(o).toUpperCase()],downcase:[Ir,[Ir],(o,[e])=>e.evaluate(o).toLowerCase()],concat:[Ir,pd(dr),(o,e)=>e.map(n=>hf(n.evaluate(o))).join("")],"resolved-locale":[Ir,[zm],(o,[e])=>e.evaluate(o).resolvedLocale()]});function by(o){return{result:"success",value:o}}function sp(o){return{result:"error",value:o}}function uS(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function cS(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function b1(o){return!!o.expression&&o.expression.interpolated}function Jy(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Yy(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function hS(o){return o}function Qy(o,e){const n=e.type==="color",s=o.stops&&typeof o.stops[0][0]=="object",f=s||o.property!==void 0,v=s||!f,c=o.type||(b1(e)?"exponential":"interval");if(n&&(o=n1({},o),o.stops&&(o.stops=o.stops.map(D=>[D[0],no.parse(D[1])])),o.default?o.default=no.parse(o.default):o.default=no.parse(e.default)),o.colorSpace&&o.colorSpace!=="rgb"&&!y1[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let h,S,P;if(c==="exponential")h=kv;else if(c==="interval")h=pS;else if(c==="categorical"){h=dS,S=Object.create(null);for(const D of o.stops)S[D[0]]=D[1];P=typeof o.stops[0][0]}else if(c==="identity")h=fS;else throw new Error(`Unknown function type "${c}"`);if(s){const D={},R=[];for(let ee=0;ee<o.stops.length;ee++){const he=o.stops[ee],re=he[0].zoom;D[re]===void 0&&(D[re]={zoom:re,type:o.type,property:o.property,default:o.default,stops:[]},R.push(re)),D[re].stops.push([he[0].value,he[1]])}const O=[];for(const ee of R)O.push([D[ee].zoom,Qy(D[ee],e)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:Ql.interpolationFactor.bind(void 0,Y),zoomStops:O.map(ee=>ee[0]),evaluate({zoom:ee},he){return kv({stops:O,base:o.base},e,ee).evaluate(ee,he)}}}else if(v){const D=c==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:Ql.interpolationFactor.bind(void 0,D),zoomStops:o.stops.map(R=>R[0]),evaluate:({zoom:R})=>h(o,e,R,S,P)}}else return{kind:"source",evaluate(D,R){const O=R&&R.properties?R.properties[o.property]:void 0;return O===void 0?xf(o.default,e.default):h(o,e,O,S,P)}}}function xf(o,e,n){if(o!==void 0)return o;if(e!==void 0)return e;if(n!==void 0)return n}function dS(o,e,n,s,f){const v=typeof n===f?s[n]:void 0;return xf(v,o.default,e.default)}function pS(o,e,n){if(Jy(n)!=="number")return xf(o.default,e.default);const s=o.stops.length;if(s===1||n<=o.stops[0][0])return o.stops[0][1];if(n>=o.stops[s-1][0])return o.stops[s-1][1];const f=Nm(o.stops.map(v=>v[0]),n);return o.stops[f][1]}function kv(o,e,n){const s=o.base!==void 0?o.base:1;if(Jy(n)!=="number")return xf(o.default,e.default);const f=o.stops.length;if(f===1||n<=o.stops[0][0])return o.stops[0][1];if(n>=o.stops[f-1][0])return o.stops[f-1][1];const v=Nm(o.stops.map(D=>D[0]),n),c=mS(n,s,o.stops[v][0],o.stops[v+1][0]),h=o.stops[v][1],S=o.stops[v+1][1];let P=u1[e.type]||hS;if(o.colorSpace&&o.colorSpace!=="rgb"){const D=y1[o.colorSpace];P=(R,O)=>D.reverse(D.interpolate(D.forward(R),D.forward(O),c))}return typeof h.evaluate=="function"?{evaluate(...D){const R=h.evaluate.apply(void 0,D),O=S.evaluate.apply(void 0,D);if(!(R===void 0||O===void 0))return P(R,O,c)}}:P(h,S,c)}function fS(o,e,n){return e.type==="color"?n=no.parse(n):e.type==="formatted"?n=Uu.fromString(n.toString()):e.type==="resolvedImage"?n=th.fromString(n.toString()):Jy(n)!==e.type&&(e.type!=="enum"||!e.values[n])&&(n=void 0),xf(n,o.default,e.default)}function mS(o,e,n,s){const f=s-n,v=o-n;return f===0?0:e===1?v/f:(Math.pow(e,v)-1)/(Math.pow(e,f)-1)}class x1{constructor(e,n){this.expression=e,this._warningHistory={},this._evaluator=new o1,this._defaultValue=n?_S(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(e,n,s,f,v,c,h,S){return this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=s,this._evaluator.canonical=f||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=c,this._evaluator.featureTileCoord=h||null,this._evaluator.featureDistanceData=S||null,this.expression.evaluate(this._evaluator)}evaluate(e,n,s,f,v,c,h,S){this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=s||null,this._evaluator.canonical=f||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=c||null,this._evaluator.featureTileCoord=h||null,this._evaluator.featureDistanceData=S||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!==P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new is(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console!="undefined"&&console.warn(P.message)),this._defaultValue}}}function w1(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ky}function E1(o,e){const n=new Um(Ky,[],e?yS(e):void 0),s=n.parse(o,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return s?by(new x1(s,e)):sp(n.errors)}class xy{constructor(e,n){this.kind=e,this._styleExpression=n,this.isStateDependent=e!=="constant"&&!Vy(n.expression)}evaluateWithoutErrorHandling(e,n,s,f,v,c){return this._styleExpression.evaluateWithoutErrorHandling(e,n,s,f,v,c)}evaluate(e,n,s,f,v,c){return this._styleExpression.evaluate(e,n,s,f,v,c)}}class wy{constructor(e,n,s,f){this.kind=e,this.zoomStops=s,this._styleExpression=n,this.isStateDependent=e!=="camera"&&!Vy(n.expression),this.interpolationType=f}evaluateWithoutErrorHandling(e,n,s,f,v,c){return this._styleExpression.evaluateWithoutErrorHandling(e,n,s,f,v,c)}evaluate(e,n,s,f,v,c){return this._styleExpression.evaluate(e,n,s,f,v,c)}interpolationFactor(e,n,s){return this.interpolationType?Ql.interpolationFactor(this.interpolationType,e,n,s):0}}function I1(o,e){if(o=E1(o,e),o.result==="error")return o;const n=o.value.expression,s=Ny(n);if(!s&&!uS(e))return sp([new yc("","data expressions not supported")]);const f=jy(n,["zoom","pitch","distance-from-center"]);if(!f&&!cS(e))return sp([new yc("","zoom expressions not supported")]);const v=ym(n);if(!v&&!f)return sp([new yc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(v instanceof yc)return sp([v]);if(v instanceof Ql&&!b1(e))return sp([new yc("",'"interpolate" expressions cannot be used with this property')]);if(!v)return by(s?new xy("constant",o.value):new xy("source",o.value));const c=v instanceof Ql?v.interpolation:void 0;return by(s?new wy("camera",o.value,v.labels,c):new wy("composite",o.value,v.labels,c))}class qm{constructor(e,n){this._parameters=e,this._specification=n,n1(this,Qy(this._parameters,this._specification))}static deserialize(e){return new qm(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function gS(o,e){if(Yy(o))return new qm(o,e);if(w1(o)){const n=I1(o,e);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return n.value}else{let n=o;return typeof o=="string"&&e.type==="color"&&(n=no.parse(o)),{kind:"constant",evaluate:()=>n}}}function ym(o){let e=null;if(o instanceof jm)e=ym(o.result);else if(o instanceof mf){for(const n of o.args)if(e=ym(n),e)break}else(o instanceof Vm||o instanceof Ql)&&o.input instanceof Fu&&o.input.name==="zoom"&&(e=o);return e instanceof yc||o.eachChild(n=>{const s=ym(n);s instanceof yc?e=s:!e&&s?e=new yc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&s&&e!==s&&(e=new yc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function yS(o){const e={color:Qc,string:Ir,number:Ri,enum:Ir,boolean:hr,formatted:Dm,resolvedImage:bf};return o.type==="array"?Wl(e[o.value]||dr,o.length):e[o.type]}function _S(o){return o.type==="color"&&Yy(o.default)?new no(0,0,0,0):o.type==="color"?no.parse(o.default)||null:o.default===void 0?null:o.default}function gf(o){return typeof o=="object"?["literal",o]:o}function vS(o,e){let n=o.stops;if(!n)return bS(o,e);const s=n&&typeof n[0][0]=="object",f=s||o.property!==void 0,v=s||!f;return n=n.map(c=>!f&&e.tokens&&typeof c[1]=="string"?[c[0],IS(c[1])]:[c[0],gf(c[1])]),s?xS(o,e,n):v?ES(o,e,n):Ey(o,e,n)}function bS(o,e){const n=["get",o.property];if(o.default===void 0)return e.type==="string"?["string",n]:n;if(e.type==="enum")return["match",n,Object.keys(e.values),n,o.default];{const s=[e.type==="color"?"to-color":e.type,n,gf(o.default)];return e.type==="array"&&s.splice(1,0,e.value,e.length||null),s}}function $y(o){switch(o.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function xS(o,e,n){const s={},f={},v=[];for(let h=0;h<n.length;h++){const S=n[h],P=S[0].zoom;s[P]===void 0&&(s[P]={zoom:P,type:o.type,property:o.property,default:o.default},f[P]=[],v.push(P)),f[P].push([S[0].value,S[1]])}if(t_({},e)==="exponential"){const h=[$y(o),["linear"],["zoom"]];for(const S of v){const P=Ey(s[S],e,f[S]);hp(h,S,P,!1)}return h}else{const h=["step",["zoom"]];for(const S of v){const P=Ey(s[S],e,f[S]);hp(h,S,P,!0)}return e_(h),h}}function wS(o,e){if(o!==void 0)return o;if(e!==void 0)return e}function Mv(o,e){const n=gf(wS(o.default,e.default));return n===void 0&&e.type==="resolvedImage"?"":n}function Ey(o,e,n){const s=t_(o,e),f=["get",o.property];if(s==="categorical"&&typeof n[0][0]=="boolean"){const v=["case"];for(const c of n)v.push(["==",f,c[0]],c[1]);return v.push(Mv(o,e)),v}else if(s==="categorical"){const v=["match",f];for(const c of n)hp(v,c[0],c[1],!1);return v.push(Mv(o,e)),v}else if(s==="interval"){const v=["step",["number",f]];for(const c of n)hp(v,c[0],c[1],!0);return e_(v),o.default===void 0?v:["case",["==",["typeof",f],"number"],v,gf(o.default)]}else if(s==="exponential"){const v=o.base!==void 0?o.base:1,c=[$y(o),v===1?["linear"]:["exponential",v],["number",f]];for(const h of n)hp(c,h[0],h[1],!1);return o.default===void 0?c:["case",["==",["typeof",f],"number"],c,gf(o.default)]}else throw new Error(`Unknown property function type ${s}`)}function ES(o,e,n,s=["zoom"]){const f=t_(o,e);let v,c=!1;if(f==="interval")v=["step",s],c=!0;else if(f==="exponential"){const h=o.base!==void 0?o.base:1;v=[$y(o),h===1?["linear"]:["exponential",h],s]}else throw new Error(`Unknown zoom function type "${f}"`);for(const h of n)hp(v,h[0],h[1],c);return e_(v),v}function e_(o){o[0]==="step"&&o.length===3&&(o.push(0),o.push(o[3]))}function hp(o,e,n,s){o.length>3&&e===o[o.length-2]||(s&&o.length===2||o.push(e),o.push(n))}function t_(o,e){return o.type?o.type:e.expression.interpolated?"exponential":"interval"}function IS(o){const e=["concat"],n=/{([^{}]+)}/g;let s=0;for(let f=n.exec(o);f!==null;f=n.exec(o)){const v=o.slice(s,n.lastIndex-f[0].length);s=n.lastIndex,v.length>0&&e.push(v),e.push(["get",f[1]])}if(e.length===1)return o;if(s<o.length)e.push(o.slice(s));else if(e.length===2)return["to-string",e[1]];return e}function S1(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const e of o.slice(1))if(!S1(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}Lm(function(o,e){var n=function(){var s=function(ve,se,we,Ge){for(we=we||{},Ge=ve.length;Ge--;we[ve[Ge]]=se);return we},f=[1,12],v=[1,13],c=[1,9],h=[1,10],S=[1,11],P=[1,14],D=[1,15],R=[14,18,22,24],O=[18,22],Y=[22,24],ee={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(se,we,Ge,Ue,He,fe,ut){var at=fe.length-1;switch(He){case 1:this.$=new String(se.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(se),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=fe[at-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=fe[at-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[fe[at-2],fe[at]];break;case 16:this.$={},this.$[fe[at][0]]=fe[at][1];break;case 17:this.$=fe[at-2],fe[at-2][fe[at][0]]=fe[at][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[fe[at]];break;case 21:this.$=fe[at-2],fe[at-2].push(fe[at]);break}},table:[{3:5,4:f,5:6,6:v,7:3,8:c,9:4,10:h,11:S,12:1,13:2,15:7,16:8,17:P,23:D},{1:[3]},{14:[1,16]},s(R,[2,7]),s(R,[2,8]),s(R,[2,9]),s(R,[2,10]),s(R,[2,11]),s(R,[2,12]),s(R,[2,3]),s(R,[2,4]),s(R,[2,5]),s([14,18,21,22,24],[2,1]),s(R,[2,2]),{3:20,4:f,18:[1,17],19:18,20:19},{3:5,4:f,5:6,6:v,7:3,8:c,9:4,10:h,11:S,13:23,15:7,16:8,17:P,23:D,24:[1,21],25:22},{1:[2,6]},s(R,[2,13]),{18:[1,24],22:[1,25]},s(O,[2,16]),{21:[1,26]},s(R,[2,18]),{22:[1,28],24:[1,27]},s(Y,[2,20]),s(R,[2,14]),{3:20,4:f,20:29},{3:5,4:f,5:6,6:v,7:3,8:c,9:4,10:h,11:S,13:30,15:7,16:8,17:P,23:D},s(R,[2,19]),{3:5,4:f,5:6,6:v,7:3,8:c,9:4,10:h,11:S,13:31,15:7,16:8,17:P,23:D},s(O,[2,17]),s(O,[2,15]),s(Y,[2,21])],defaultActions:{16:[2,6]},parseError:function(se,we){if(we.recoverable)this.trace(se);else throw new Error(se)},parse:function(se){var we=this,Ge=[0],Ue=[null],He=[],fe=this.table,ut="",at=0,je=0,Fe=2,Dt=1,qe=He.slice.call(arguments,1),Mt=Object.create(this.lexer),li={yy:{}};for(var Et in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Et)&&(li.yy[Et]=this.yy[Et]);Mt.setInput(se,li.yy),li.yy.lexer=Mt,li.yy.parser=this,typeof Mt.yylloc=="undefined"&&(Mt.yylloc={});var Gt=Mt.yylloc;He.push(Gt);var Je=Mt.options&&Mt.options.ranges;typeof li.yy.parseError=="function"?this.parseError=li.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function wt(){var St;return St=Mt.lex()||Dt,typeof St!="number"&&(St=we.symbols_[St]||St),St}for(var Pt,ni,Xt,Xi,ei={},Jt,bi,ai,ht;;){if(ni=Ge[Ge.length-1],this.defaultActions[ni]?Xt=this.defaultActions[ni]:((Pt===null||typeof Pt=="undefined")&&(Pt=wt()),Xt=fe[ni]&&fe[ni][Pt]),typeof Xt=="undefined"||!Xt.length||!Xt[0]){var It="";ht=[];for(Jt in fe[ni])this.terminals_[Jt]&&Jt>Fe&&ht.push("'"+this.terminals_[Jt]+"'");Mt.showPosition?It="Parse error on line "+(at+1)+`:
`+Mt.showPosition()+`
Expecting `+ht.join(", ")+", got '"+(this.terminals_[Pt]||Pt)+"'":It="Parse error on line "+(at+1)+": Unexpected "+(Pt==Dt?"end of input":"'"+(this.terminals_[Pt]||Pt)+"'"),this.parseError(It,{text:Mt.match,token:this.terminals_[Pt]||Pt,line:Mt.yylineno,loc:Gt,expected:ht})}if(Xt[0]instanceof Array&&Xt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ni+", token: "+Pt);switch(Xt[0]){case 1:Ge.push(Pt),Ue.push(Mt.yytext),He.push(Mt.yylloc),Ge.push(Xt[1]),Pt=null,je=Mt.yyleng,ut=Mt.yytext,at=Mt.yylineno,Gt=Mt.yylloc;break;case 2:if(bi=this.productions_[Xt[1]][1],ei.$=Ue[Ue.length-bi],ei._$={first_line:He[He.length-(bi||1)].first_line,last_line:He[He.length-1].last_line,first_column:He[He.length-(bi||1)].first_column,last_column:He[He.length-1].last_column},Je&&(ei._$.range=[He[He.length-(bi||1)].range[0],He[He.length-1].range[1]]),Xi=this.performAction.apply(ei,[ut,je,at,li.yy,Xt[1],Ue,He].concat(qe)),typeof Xi!="undefined")return Xi;bi&&(Ge=Ge.slice(0,-1*bi*2),Ue=Ue.slice(0,-1*bi),He=He.slice(0,-1*bi)),Ge.push(this.productions_[Xt[1]][0]),Ue.push(ei.$),He.push(ei._$),ai=fe[Ge[Ge.length-2]][Ge[Ge.length-1]],Ge.push(ai);break;case 3:return!0}}return!0}},he=function(){var ve={EOF:1,parseError:function(we,Ge){if(this.yy.parser)this.yy.parser.parseError(we,Ge);else throw new Error(we)},setInput:function(se,we){return this.yy=we||this.yy||{},this._input=se,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var se=this._input[0];this.yytext+=se,this.yyleng++,this.offset++,this.match+=se,this.matched+=se;var we=se.match(/(?:\r\n?|\n).*/g);return we?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),se},unput:function(se){var we=se.length,Ge=se.split(/(?:\r\n?|\n)/g);this._input=se+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-we),this.offset-=we;var Ue=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ge.length-1&&(this.yylineno-=Ge.length-1);var He=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ge?(Ge.length===Ue.length?this.yylloc.first_column:0)+Ue[Ue.length-Ge.length].length-Ge[0].length:this.yylloc.first_column-we},this.options.ranges&&(this.yylloc.range=[He[0],He[0]+this.yyleng-we]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(se){this.unput(this.match.slice(se))},pastInput:function(){var se=this.matched.substr(0,this.matched.length-this.match.length);return(se.length>20?"...":"")+se.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var se=this.match;return se.length<20&&(se+=this._input.substr(0,20-se.length)),(se.substr(0,20)+(se.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var se=this.pastInput(),we=new Array(se.length+1).join("-");return se+this.upcomingInput()+`
`+we+"^"},test_match:function(se,we){var Ge,Ue,He;if(this.options.backtrack_lexer&&(He={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(He.yylloc.range=this.yylloc.range.slice(0))),Ue=se[0].match(/(?:\r\n?|\n).*/g),Ue&&(this.yylineno+=Ue.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ue?Ue[Ue.length-1].length-Ue[Ue.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+se[0].length},this.yytext+=se[0],this.match+=se[0],this.matches=se,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(se[0].length),this.matched+=se[0],Ge=this.performAction.call(this,this.yy,this,we,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ge)return Ge;if(this._backtrack){for(var fe in He)this[fe]=He[fe];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var se,we,Ge,Ue;this._more||(this.yytext="",this.match="");for(var He=this._currentRules(),fe=0;fe<He.length;fe++)if(Ge=this._input.match(this.rules[He[fe]]),Ge&&(!we||Ge[0].length>we[0].length)){if(we=Ge,Ue=fe,this.options.backtrack_lexer){if(se=this.test_match(Ge,He[fe]),se!==!1)return se;if(this._backtrack){we=!1;continue}else return!1}else if(!this.options.flex)break}return we?(se=this.test_match(we,He[Ue]),se!==!1?se:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var we=this.next();return we||this.lex()},begin:function(we){this.conditionStack.push(we)},popState:function(){var we=this.conditionStack.length-1;return we>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(we){return we=this.conditionStack.length-1-Math.abs(we||0),we>=0?this.conditionStack[we]:"INITIAL"},pushState:function(we){this.begin(we)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(we,Ge,Ue,He){switch(Ue){case 0:break;case 1:return 6;case 2:return Ge.yytext=Ge.yytext.substr(1,Ge.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return ve}();ee.lexer=he;function re(){this.yy={}}return re.prototype=ee,ee.Parser=re,new re}();typeof hI!="undefined"&&(e.parser=n,e.Parser=n.Parser,e.parse=function(){return n.parse.apply(n,arguments)})});const SS={StyleExpression:x1,isExpression:w1,isExpressionFilter:S1,createExpression:E1,createPropertyExpression:I1,normalizePropertyExpression:gS,ZoomConstantExpression:xy,ZoomDependentExpression:wy,StylePropertyFunction:qm},TS={convertFunction:vS,createFunction:Qy,isFunction:Yy};function AS(o){var e=o.expr,n=o.layer,s=Math.min(e(n,"paint","circle-radius"),8),f=Math.min(e(n,"paint","circle-stroke-width"),4),v=e(n,"paint","circle-color"),c=e(n,"paint","circle-opacity"),h=e(n,"paint","circle-stroke-color"),S=e(n,"paint","circle-stroke-opacity"),P=s-f/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:"blur("+e(n,"paint","circle-blur")*P+"px)"}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:v,opacity:c,r:P}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:S,r:s,"stroke-width":f,stroke:h}}]}}function CS(o){var e=o.expr,n=o.layer;return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:"url("+(0,o.image)(e(n,"paint","fill-pattern"))+")",backgroundColor:e(n,"paint","fill-color"),opacity:e(n,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function kS(o){var e=o.layer,n=o.expr,s=(0,o.image)(n(e,"paint","line-pattern")),f={stroke:s?"url(#img1)":n(e,"paint","line-color"),strokeWidth:Math.max(2,Math.min(n(e,"paint","line-width"),8)),strokeOpacity:n(e,"paint","line-opacity")},v=f.strokeWidth;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:f.strokeWidth,height:f.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:"translate("+-v/2+" "+-v/2+") rotate(45)"},children:[{element:"image",attributes:{key:"img",xlinkHref:s,x:0,y:0,width:f.strokeWidth,height:f.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:f,stroke:f.stroke,d:"M0 20 L 20 0"}}]}}function MS(o){return function(h){var S=h.image,P=(0,h.expr)(h.layer,"layout","icon-image");if(!P)return null;var D=S(P);return D?{element:"div",attributes:{style:{backgroundImage:"url("+D+")",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}(o)||(f=(n=(e=o).expr)(s=e.layer,"paint","text-color"),v=n(s,"paint","text-opacity"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:c="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z",stroke:n(s,"paint","text-halo-color"),"stroke-width":2*n(s,"paint","text-halo-width"),fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:c,fill:"white"}},{element:"path",attributes:{key:"l3",d:c,fill:f,opacity:v}}]});var e,n,s,f,v,c}var LS=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function PS(o){var e,n=o.sprite,s=o.layer,f={circle:AS,symbol:MS,line:kS,fill:CS}[s.type],v=(e=o.zoom,function(c,h,S){var P=function(ee){var he=LS.find(function(re){return ee.startsWith(re[0])});return he?he[1]||he[0]:null}(S),D=cI[h+"_"+P][S];if(!c[h])return D.default;var R=c[h][S];if(R===void 0)return D.default;if(typeof R=="object"){var O;if(!(O=Array.isArray(R)?SS.createExpression(R).value:TS.createFunction(R,D)).evaluate)return null;var Y=O.evaluate({zoom:e},{});return Y?Y.name||Y:null}return R});return f?f({layer:s,expr:v,image:function(c){if(n&&n.json){var h=n.json[c];if(h)return S=n.image,D=(P=h).x,R=P.y,O=P.width,Y=P.height,(ee=document.createElement("canvas")).width=2*O,ee.height=2*Y,ee.getContext("2d").drawImage(S,2*D,2*R,2*O,2*Y,0,0,2*O,2*Y),ee.toDataURL()}var S,P,D,R,O,Y,ee;return null}}):null}class zS{constructor(e){this.spriteUrl=e}async load(){const e=await Promise.all([this.loadImage(`${this.spriteUrl}@2x.png`),this.fetchUrl(`${this.spriteUrl}@2x.json`)]);return this.sprite={image:e[0],json:e[1]},this.sprite}loadImage(e){let n=!1;const s=new Promise((f,v)=>{const c=new Image;c.crossOrigin="Anonymous",c.onload=()=>{n||f(c)},c.onerror=h=>{n||v(h)},c.src=e});return s.cancel=()=>{n=!0},s}async fetchUrl(e){return(await fetch(e)).json()}getIconDataUrl(e){let n;if(e.layout&&e.layout["icon-image"]){let s=e.layout["icon-image"];if(Array.isArray(s)&&(s=s[s.length-1]),this.sprite.json){let f;Object.keys(this.sprite.json).forEach(v=>{v===s&&(f=this.sprite.json[v])}),f&&(n=this.extractPartOfImage(this.sprite.image,f))}}return n}extractPartOfImage(e,n){const f=document.createElement("canvas");return f.width=n.width*1,f.height=n.height*1,f.getContext("2d").drawImage(e,n.x*1,n.y*1,n.width*1,n.height*1,0,0,n.width*1,n.height*1),f.toDataURL()}}function DS(o){let e,n=o[0].innerHTML+"";return{c(){e=_i("div"),this.h()},l(s){e=vi(s,"DIV",{class:!0});var f=mi(e);f.forEach(Qe),this.h()},h(){ii(e,"class","legend svelte-1dizgfa")},m(s,f){Ut(s,e,f),e.innerHTML=n},p(s,[f]){f&1&&n!==(n=s[0].innerHTML+"")&&(e.innerHTML=n)},i:Yo,o:Yo,d(s){s&&Qe(e)}}}function RS(o,e,n){let s,f;Ho(o,_f,S=>n(2,s=S)),Ho(o,yv,S=>n(3,f=S));let{layer:v}=e,c=document.createElement("div");const h=async()=>{if(!f){const R=s.getStyle().sprite,O=new zS(R);await O.load(),yv.update(()=>O)}const S=s.getZoom(),P=PS({zoom:S,layer:v});if(n(0,c.innerText="",c),P){let R,O,Y;switch(P.element){case"div":if(P.attributes.style.backgroundImage&&!["url(undefined)","url(null)"].includes(P.attributes.style.backgroundImage)){var D=document.createElement("img");D.src=P.attributes.style.backgroundImage.replace("url(","").replace(")",""),D.alt=v.id,D.style.cssText="height: 24px;",c.appendChild(D)}R=document.createElement("div"),R.style.height="24px",R.style.width="50px",R.style.backgroundColor=P.attributes.style.backgroundColor,R.style.backgroundPosition=P.attributes.style.backgroundPosition,R.style.backgroundSize=P.attributes.style.backgroundSize,R.style.backgroundRepeat=P.attributes.style.backgroundRepeat,R.style.opacity=P.attributes.style.opacity,c.appendChild(R);break;case"svg":if(Y=f.getIconDataUrl(v),Y){const ee=document.createElement("img");ee.src=Y,ee.alt=v.id,ee.style.cssText="height: 24px;",c.appendChild(ee);break}O=document.createElementNS("http://www.w3.org/2000/svg","svg"),O.style.cssText="height: 24px;",O.setAttributeNS(null,"version","1.1"),Object.keys(P.attributes).forEach(ee=>{O.setAttribute(ee,P.attributes[ee]);let he=document.createElementNS("http://www.w3.org/2000/svg","g");P.children.forEach(re=>{var ve=document.createElementNS("http://www.w3.org/2000/svg",re.element);Object.keys(re.attributes).forEach(se=>{ve.setAttributeNS(null,se,re.attributes[se])}),he.appendChild(ve)}),O.appendChild(he)}),c.appendChild(O);break;default:console.log(P.element);return}}else{const R=document.createElementNS("http://www.w3.org/2000/svg","svg"),O=document.createElementNS("http://www.w3.org/2000/svg","path"),Y=document.createElementNS("http://www.w3.org/2000/svg","path");R.setAttribute("fill","none"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("stroke","black"),R.classList.add("post-icon"),O.setAttribute("d","M21,0H3A3,3,0,0,0,0,3V21a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V3A3,3,0,0,0,21,0ZM3,2H21a1,1,0,0,1,1,1V15.86L14.18,9.35a5.06,5.06,0,0,0-6.39-.06L2,13.92V3A1,1,0,0,1,3,2ZM21,22H3a1,1,0,0,1-1-1V16.48l7-5.63a3.06,3.06,0,0,1,3.86,0L22,18.47V21A1,1,0,0,1,21,22Z"),O.setAttribute("stroke-linecap","round"),O.setAttribute("stroke-linejoin","round"),O.setAttribute("stroke-width","2"),Y.setAttribute("d","M18,9a3,3,0,1,0-3-3A3,3,0,0,0,18,9Zm0-4a1,1,0,1,1-1,1A1,1,0,0,1,18,5Z"),Y.setAttribute("stroke-linecap","round"),Y.setAttribute("stroke-linejoin","round"),Y.setAttribute("stroke-width","2"),R.appendChild(O),R.appendChild(Y),c.appendChild(R)}};return s.on("moveend",h),s.on("zoom",h),o.$$set=S=>{"layer"in S&&n(1,v=S.layer)},o.$$.update=()=>{o.$$.dirty&2&&h()},[c,v]}class OS extends Tn{constructor(e){super(),An(this,e,RS,DS,Sn,{layer:1})}}function BS(o){let e;return{c(){e=pa("visibility")},l(n){e=fa(n,"visibility")},m(n,s){Ut(n,e,s)},d(n){n&&Qe(e)}}}function FS(o){let e;return{c(){e=pa("visibility_off")},l(n){e=fa(n,"visibility_off")},m(n,s){Ut(n,e,s)},d(n){n&&Qe(e)}}}function US(o){let e,n,s,f;return e=new nv({props:{class:"material-icons",on:!0,$$slots:{default:[BS]},$$scope:{ctx:o}}}),s=new nv({props:{class:"material-icons",$$slots:{default:[FS]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment),n=qn(),Ni(s.$$.fragment)},l(v){$i(e.$$.fragment,v),n=Gn(v),$i(s.$$.fragment,v)},m(v,c){Vi(e,v,c),Ut(v,n,c),Vi(s,v,c),f=!0},p(v,c){const h={};c&64&&(h.$$scope={dirty:c,ctx:v}),e.$set(h);const S={};c&64&&(S.$$scope={dirty:c,ctx:v}),s.$set(S)},i(v){f||(rt(e.$$.fragment,v),rt(s.$$.fragment,v),f=!0)},o(v){ft(e.$$.fragment,v),ft(s.$$.fragment,v),f=!1},d(v){ji(e,v),v&&Qe(n),ji(s,v)}}}function NS(o){let e,n,s,f,v,c;function h(P){o[2](P)}let S={toggle:!0,$$slots:{default:[US]},$$scope:{ctx:o}};return o[1]!==void 0&&(S.pressed=o[1]),n=new xm({props:S}),Zi.push(()=>$l(n,"pressed",h)),v=new OS({props:{layer:o[0]}}),{c(){e=_i("div"),Ni(n.$$.fragment),f=qn(),Ni(v.$$.fragment),this.h()},l(P){e=vi(P,"DIV",{style:!0});var D=mi(e);$i(n.$$.fragment,D),D.forEach(Qe),f=Gn(P),$i(v.$$.fragment,P),this.h()},h(){q_(e,"display","flex"),q_(e,"align-items","center")},m(P,D){Ut(P,e,D),Vi(n,e,null),Ut(P,f,D),Vi(v,P,D),c=!0},p(P,D){const R={};D&64&&(R.$$scope={dirty:D,ctx:P}),!s&&D&2&&(s=!0,R.pressed=P[1],eu(()=>s=!1)),n.$set(R);const O={};D&1&&(O.layer=P[0]),v.$set(O)},i(P){c||(rt(n.$$.fragment,P),rt(v.$$.fragment,P),c=!0)},o(P){ft(n.$$.fragment,P),ft(v.$$.fragment,P),c=!1},d(P){P&&Qe(e),ji(n),P&&Qe(f),ji(v,P)}}}function VS(o){let e,n=(Sr.legend&&Sr.legend.targets&&Sr.legend.targets[o[0].id]?Sr.legend.targets[o[0].id]:o[0].id)+"",s;return{c(){e=_i("span"),s=pa(n),this.h()},l(f){e=vi(f,"SPAN",{slot:!0});var v=mi(e);s=fa(v,n),v.forEach(Qe),this.h()},h(){ii(e,"slot","label")},m(f,v){Ut(f,e,v),sn(e,s)},p(f,v){v&1&&n!==(n=(Sr.legend&&Sr.legend.targets&&Sr.legend.targets[f[0].id]?Sr.legend.targets[f[0].id]:f[0].id)+"")&&tu(s,n)},d(f){f&&Qe(e)}}}function jS(o){let e,n,s;return n=new yy({props:{$$slots:{label:[VS],default:[NS]},$$scope:{ctx:o}}}),{c(){e=_i("div"),Ni(n.$$.fragment)},l(f){e=vi(f,"DIV",{});var v=mi(e);$i(n.$$.fragment,v),v.forEach(Qe)},m(f,v){Ut(f,e,v),Vi(n,e,null),s=!0},p(f,[v]){const c={};v&67&&(c.$$scope={dirty:v,ctx:f}),n.$set(c)},i(f){s||(rt(n.$$.fragment,f),s=!0)},o(f){ft(n.$$.fragment,f),s=!1},d(f){f&&Qe(e),ji(n)}}}function qS(o,e,n){let s;Ho(o,_f,P=>n(4,s=P));let{layer:f}=e,v="visible";f.layout&&f.layout.visibility==="none"&&(v="none");let c=v==="visible";const h=()=>{s.setLayoutProperty(f.id,"visibility",c===!0?"visible":"none")};function S(P){c=P,n(1,c)}return o.$$set=P=>{"layer"in P&&n(0,f=P.layer)},o.$$.update=()=>{o.$$.dirty&2&&h()},[f,c,S]}class Gm extends Tn{constructor(e){super(),An(this,e,qS,jS,Sn,{layer:0})}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var GS={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var HS=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.shakeAnimationEndHandler=function(){s.handleShakeAnimationEnd()},s}return Object.defineProperty(e,"cssClasses",{get:function(){return GS},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.getWidth=function(){return this.adapter.getWidth()},e.prototype.shake=function(n){var s=e.cssClasses.LABEL_SHAKE;n?this.adapter.addClass(s):this.adapter.removeClass(s)},e.prototype.float=function(n){var s=e.cssClasses,f=s.LABEL_FLOAT_ABOVE,v=s.LABEL_SHAKE;n?this.adapter.addClass(f):(this.adapter.removeClass(f),this.adapter.removeClass(v))},e.prototype.setRequired=function(n){var s=e.cssClasses.LABEL_REQUIRED;n?this.adapter.addClass(s):this.adapter.removeClass(s)},e.prototype.handleShakeAnimationEnd=function(){var n=e.cssClasses.LABEL_SHAKE;this.adapter.removeClass(n)},e}(Na);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var fd={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ZS=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.transitionEndHandler=function(f){s.handleTransitionEnd(f)},s}return Object.defineProperty(e,"cssClasses",{get:function(){return fd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},e.prototype.activate=function(){this.adapter.removeClass(fd.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(fd.LINE_RIPPLE_ACTIVE)},e.prototype.setRippleCenter=function(n){this.adapter.setStyle("transform-origin",n+"px center")},e.prototype.deactivate=function(){this.adapter.addClass(fd.LINE_RIPPLE_DEACTIVATING)},e.prototype.handleTransitionEnd=function(n){var s=this.adapter.hasClass(fd.LINE_RIPPLE_DEACTIVATING);n.propertyName==="opacity"&&s&&(this.adapter.removeClass(fd.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(fd.LINE_RIPPLE_DEACTIVATING))},e}(Na);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var WS={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},XS={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},sf={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30},da;(function(o){o[o.BOTTOM=1]="BOTTOM",o[o.CENTER=2]="CENTER",o[o.RIGHT=4]="RIGHT",o[o.FLIP_RTL=8]="FLIP_RTL"})(da||(da={}));var Sd;(function(o){o[o.TOP_LEFT=0]="TOP_LEFT",o[o.TOP_RIGHT=4]="TOP_RIGHT",o[o.BOTTOM_LEFT=1]="BOTTOM_LEFT",o[o.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",o[o.TOP_START=8]="TOP_START",o[o.TOP_END=12]="TOP_END",o[o.BOTTOM_START=9]="BOTTOM_START",o[o.BOTTOM_END=13]="BOTTOM_END"})(Sd||(Sd={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var T1=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.isSurfaceOpen=!1,s.isQuickOpen=!1,s.isHoistedElement=!1,s.isFixedPosition=!1,s.isHorizontallyCenteredOnViewport=!1,s.maxHeight=0,s.openAnimationEndTimerId=0,s.closeAnimationEndTimerId=0,s.animationRequestId=0,s.anchorCorner=Sd.TOP_START,s.originCorner=Sd.TOP_START,s.anchorMargin={top:0,right:0,bottom:0,left:0},s.position={x:0,y:0},s}return Object.defineProperty(e,"cssClasses",{get:function(){return WS},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return XS},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return sf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Corner",{get:function(){return Sd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var n=e.cssClasses,s=n.ROOT,f=n.OPEN;if(!this.adapter.hasClass(s))throw new Error(s+" class required in root element.");this.adapter.hasClass(f)&&(this.isSurfaceOpen=!0)},e.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},e.prototype.setAnchorCorner=function(n){this.anchorCorner=n},e.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^da.RIGHT},e.prototype.setAnchorMargin=function(n){this.anchorMargin.top=n.top||0,this.anchorMargin.right=n.right||0,this.anchorMargin.bottom=n.bottom||0,this.anchorMargin.left=n.left||0},e.prototype.setIsHoisted=function(n){this.isHoistedElement=n},e.prototype.setFixedPosition=function(n){this.isFixedPosition=n},e.prototype.isFixed=function(){return this.isFixedPosition},e.prototype.setAbsolutePosition=function(n,s){this.position.x=this.isFinite(n)?n:0,this.position.y=this.isFinite(s)?s:0},e.prototype.setIsHorizontallyCenteredOnViewport=function(n){this.isHorizontallyCenteredOnViewport=n},e.prototype.setQuickOpen=function(n){this.isQuickOpen=n},e.prototype.setMaxHeight=function(n){this.maxHeight=n},e.prototype.isOpen=function(){return this.isSurfaceOpen},e.prototype.open=function(){var n=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(e.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(e.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){n.dimensions=n.adapter.getInnerDimensions(),n.autoposition(),n.adapter.addClass(e.cssClasses.OPEN),n.openAnimationEndTimerId=setTimeout(function(){n.openAnimationEndTimerId=0,n.adapter.removeClass(e.cssClasses.ANIMATING_OPEN),n.adapter.notifyOpen()},sf.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},e.prototype.close=function(n){var s=this;if(n===void 0&&(n=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,n||this.maybeRestoreFocus(),this.adapter.removeClass(e.cssClasses.OPEN),this.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(e.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){s.adapter.removeClass(e.cssClasses.OPEN),s.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),s.closeAnimationEndTimerId=setTimeout(function(){s.closeAnimationEndTimerId=0,s.adapter.removeClass(e.cssClasses.ANIMATING_CLOSED),s.adapter.notifyClose()},sf.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,n||this.maybeRestoreFocus()}},e.prototype.handleBodyClick=function(n){var s=n.target;this.adapter.isElementInContainer(s)||this.close()},e.prototype.handleKeydown=function(n){var s=n.keyCode,f=n.key,v=f==="Escape"||s===27;v&&this.close()},e.prototype.autoposition=function(){var n;this.measurements=this.getAutoLayoutmeasurements();var s=this.getoriginCorner(),f=this.getMenuSurfaceMaxHeight(s),v=this.hasBit(s,da.BOTTOM)?"bottom":"top",c=this.hasBit(s,da.RIGHT)?"right":"left",h=this.getHorizontalOriginOffset(s),S=this.getVerticalOriginOffset(s),P=this.measurements,D=P.anchorSize,R=P.surfaceSize,O=(n={},n[c]=h,n[v]=S,n);D.width/R.width>sf.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(c="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(O),this.adapter.setTransformOrigin(c+" "+v),this.adapter.setPosition(O),this.adapter.setMaxHeight(f?f+"px":""),this.hasBit(s,da.BOTTOM)||this.adapter.addClass(e.cssClasses.IS_OPEN_BELOW)},e.prototype.getAutoLayoutmeasurements=function(){var n=this.adapter.getAnchorDimensions(),s=this.adapter.getBodyDimensions(),f=this.adapter.getWindowDimensions(),v=this.adapter.getWindowScroll();return n||(n={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:n,bodySize:s,surfaceSize:this.dimensions,viewportDistance:{top:n.top,right:f.width-n.right,bottom:f.height-n.bottom,left:n.left},viewportSize:f,windowScroll:v}},e.prototype.getoriginCorner=function(){var n=this.originCorner,s=this.measurements,f=s.viewportDistance,v=s.anchorSize,c=s.surfaceSize,h=e.numbers.MARGIN_TO_EDGE,S=this.hasBit(this.anchorCorner,da.BOTTOM),P,D;S?(P=f.top-h+this.anchorMargin.bottom,D=f.bottom-h-this.anchorMargin.bottom):(P=f.top-h+this.anchorMargin.top,D=f.bottom-h+v.height-this.anchorMargin.top);var R=D-c.height>0;!R&&P>D&&(n=this.setBit(n,da.BOTTOM));var O=this.adapter.isRtl(),Y=this.hasBit(this.anchorCorner,da.FLIP_RTL),ee=this.hasBit(this.anchorCorner,da.RIGHT)||this.hasBit(n,da.RIGHT),he=!1;O&&Y?he=!ee:he=ee;var re,ve;he?(re=f.left+v.width+this.anchorMargin.right,ve=f.right-this.anchorMargin.right):(re=f.left+this.anchorMargin.left,ve=f.right+v.width-this.anchorMargin.left);var se=re-c.width>0,we=ve-c.width>0,Ge=this.hasBit(n,da.FLIP_RTL)&&this.hasBit(n,da.RIGHT);return we&&Ge&&O||!se&&Ge?n=this.unsetBit(n,da.RIGHT):(se&&he&&O||se&&!he&&ee||!we&&re>=ve)&&(n=this.setBit(n,da.RIGHT)),n},e.prototype.getMenuSurfaceMaxHeight=function(n){if(this.maxHeight>0)return this.maxHeight;var s=this.measurements.viewportDistance,f=0,v=this.hasBit(n,da.BOTTOM),c=this.hasBit(this.anchorCorner,da.BOTTOM),h=e.numbers.MARGIN_TO_EDGE;return v?(f=s.top+this.anchorMargin.top-h,c||(f+=this.measurements.anchorSize.height)):(f=s.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-h,c&&(f-=this.measurements.anchorSize.height)),f},e.prototype.getHorizontalOriginOffset=function(n){var s=this.measurements.anchorSize,f=this.hasBit(n,da.RIGHT),v=this.hasBit(this.anchorCorner,da.RIGHT);if(f){var c=v?s.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?c-(this.measurements.viewportSize.width-this.measurements.bodySize.width):c}return v?s.width-this.anchorMargin.right:this.anchorMargin.left},e.prototype.getVerticalOriginOffset=function(n){var s=this.measurements.anchorSize,f=this.hasBit(n,da.BOTTOM),v=this.hasBit(this.anchorCorner,da.BOTTOM),c=0;return f?c=v?s.height-this.anchorMargin.top:-this.anchorMargin.bottom:c=v?s.height+this.anchorMargin.bottom:this.anchorMargin.top,c},e.prototype.adjustPositionForHoistedElement=function(n){var s,f,v=this.measurements,c=v.windowScroll,h=v.viewportDistance,S=v.surfaceSize,P=v.viewportSize,D=Object.keys(n);try{for(var R=lf(D),O=R.next();!O.done;O=R.next()){var Y=O.value,ee=n[Y]||0;if(this.isHorizontallyCenteredOnViewport&&(Y==="left"||Y==="right")){n[Y]=(P.width-S.width)/2;continue}ee+=h[Y],this.isFixedPosition||(Y==="top"?ee+=c.y:Y==="bottom"?ee-=c.y:Y==="left"?ee+=c.x:ee-=c.x),n[Y]=ee}}catch(he){s={error:he}}finally{try{O&&!O.done&&(f=R.return)&&f.call(R)}finally{if(s)throw s.error}}},e.prototype.maybeRestoreFocus=function(){var n=this,s=this.adapter.isFocused(),f=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(s||f)&&setTimeout(function(){n.adapter.restoreFocus()},sf.TOUCH_EVENT_WAIT_MS)},e.prototype.hasBit=function(n,s){return Boolean(n&s)},e.prototype.setBit=function(n,s){return n|s},e.prototype.unsetBit=function(n,s){return n^s},e.prototype.isFinite=function(n){return typeof n=="number"&&isFinite(n)},e}(Na);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var dp={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},rp={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},KS={FOCUS_ROOT_INDEX:-1},lp;(function(o){o[o.NONE=0]="NONE",o[o.LIST_ROOT=1]="LIST_ROOT",o[o.FIRST_ITEM=2]="FIRST_ITEM",o[o.LAST_ITEM=3]="LAST_ITEM"})(lp||(lp={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var JS=function(o){yo(e,o);function e(n){var s=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return s.closeAnimationEndTimerId=0,s.defaultFocusState=lp.LIST_ROOT,s.selectedIndex=-1,s}return Object.defineProperty(e,"cssClasses",{get:function(){return dp},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return rp},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return KS},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},e.prototype.handleKeydown=function(n){var s=n.key,f=n.keyCode,v=s==="Tab"||f===9;v&&this.adapter.closeSurface(!0)},e.prototype.handleItemAction=function(n){var s=this,f=this.adapter.getElementIndex(n);if(!(f<0)){this.adapter.notifySelected({index:f});var v=this.adapter.getAttributeFromElementAtIndex(f,rp.SKIP_RESTORE_FOCUS)==="true";this.adapter.closeSurface(v),this.closeAnimationEndTimerId=setTimeout(function(){var c=s.adapter.getElementIndex(n);c>=0&&s.adapter.isSelectableItemAtIndex(c)&&s.setSelectedIndex(c)},T1.numbers.TRANSITION_CLOSE_DURATION)}},e.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case lp.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case lp.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case lp.NONE:break;default:this.adapter.focusListRoot();break}},e.prototype.setDefaultFocusState=function(n){this.defaultFocusState=n},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(n){if(this.validatedIndex(n),!this.adapter.isSelectableItemAtIndex(n))throw new Error("MDCMenuFoundation: No selection group at specified index.");var s=this.adapter.getSelectedSiblingOfItemAtIndex(n);s>=0&&(this.adapter.removeAttributeFromElementAtIndex(s,rp.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(s,dp.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(n,dp.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(n,rp.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=n},e.prototype.setEnabled=function(n,s){this.validatedIndex(n),s?(this.adapter.removeClassFromElementAtIndex(n,gr.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(n,rp.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(n,gr.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(n,rp.ARIA_DISABLED_ATTR,"true"))},e.prototype.validatedIndex=function(n){var s=this.adapter.getMenuItemCount(),f=n>=0&&n<s;if(!f)throw new Error("MDCMenuFoundation: No list item at specified index.")},e}(Na);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var YS={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},Lv={NOTCH_ELEMENT_PADDING:8},QS={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var $S=function(o){yo(e,o);function e(n){return o.call(this,_r(_r({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"strings",{get:function(){return YS},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return QS},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Lv},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),e.prototype.notch=function(n){var s=e.cssClasses.OUTLINE_NOTCHED;n>0&&(n+=Lv.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(n),this.adapter.addClass(s)},e.prototype.closeNotch=function(){var n=e.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(n),this.adapter.removeNotchWidthProperty()},e}(Na);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Jo={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},iy={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},md={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var eT=function(o){yo(e,o);function e(n,s){s===void 0&&(s={});var f=o.call(this,_r(_r({},e.defaultAdapter),n))||this;return f.disabled=!1,f.isMenuOpen=!1,f.useDefaultValidation=!0,f.customValidity=!0,f.lastSelectedIndex=md.UNSET_INDEX,f.clickDebounceTimeout=0,f.recentlyClicked=!1,f.leadingIcon=s.leadingIcon,f.helperText=s.helperText,f}return Object.defineProperty(e,"cssClasses",{get:function(){return Jo},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return md},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return iy},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),e.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},e.prototype.setSelectedIndex=function(n,s,f){s===void 0&&(s=!1),f===void 0&&(f=!1),!(n>=this.adapter.getMenuItemCount())&&(n===md.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(n).trim()),this.adapter.setSelectedIndex(n),s&&this.adapter.closeMenu(),!f&&this.lastSelectedIndex!==n&&this.handleChange(),this.lastSelectedIndex=n)},e.prototype.setValue=function(n,s){s===void 0&&(s=!1);var f=this.adapter.getMenuItemValues().indexOf(n);this.setSelectedIndex(f,!1,s)},e.prototype.getValue=function(){var n=this.adapter.getSelectedIndex(),s=this.adapter.getMenuItemValues();return n!==md.UNSET_INDEX?s[n]:""},e.prototype.getDisabled=function(){return this.disabled},e.prototype.setDisabled=function(n){this.disabled=n,this.disabled?(this.adapter.addClass(Jo.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(Jo.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},e.prototype.openMenu=function(){this.adapter.addClass(Jo.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},e.prototype.setHelperTextContent=function(n){this.helperText&&this.helperText.setContent(n)},e.prototype.layout=function(){if(this.adapter.hasLabel()){var n=this.getValue().length>0,s=this.adapter.hasClass(Jo.FOCUSED),f=n||s,v=this.adapter.hasClass(Jo.REQUIRED);this.notchOutline(f),this.adapter.floatLabel(f),this.adapter.setLabelRequired(v)}},e.prototype.layoutOptions=function(){var n=this.adapter.getMenuItemValues(),s=n.indexOf(this.getValue());this.setSelectedIndex(s,!1,!0)},e.prototype.handleMenuOpened=function(){if(this.adapter.getMenuItemValues().length!==0){var n=this.getSelectedIndex(),s=n>=0?n:0;this.adapter.focusMenuItemAtIndex(s)}},e.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},e.prototype.handleMenuClosed=function(){this.adapter.removeClass(Jo.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},e.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue());var n=this.adapter.hasClass(Jo.REQUIRED);n&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.handleMenuItemAction=function(n){this.setSelectedIndex(n,!0)},e.prototype.handleFocus=function(){this.adapter.addClass(Jo.FOCUSED),this.layout(),this.adapter.activateBottomLine()},e.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},e.prototype.handleClick=function(n){if(!(this.disabled||this.recentlyClicked)){if(this.setClickDebounceTimeout(),this.isMenuOpen){this.adapter.closeMenu();return}this.adapter.setRippleCenter(n),this.openMenu()}},e.prototype.handleKeydown=function(n){if(!(this.isMenuOpen||!this.adapter.hasClass(Jo.FOCUSED))){var s=Ca(n)===yr.ENTER,f=Ca(n)===yr.SPACEBAR,v=Ca(n)===yr.ARROW_UP,c=Ca(n)===yr.ARROW_DOWN,h=n.ctrlKey||n.metaKey;if(!h&&(!f&&n.key&&n.key.length===1||f&&this.adapter.isTypeaheadInProgress())){var S=f?" ":n.key,P=this.adapter.typeaheadMatchItem(S,this.getSelectedIndex());P>=0&&this.setSelectedIndex(P),n.preventDefault();return}!s&&!f&&!v&&!c||(v&&this.getSelectedIndex()>0?this.setSelectedIndex(this.getSelectedIndex()-1):c&&this.getSelectedIndex()<this.adapter.getMenuItemCount()-1&&this.setSelectedIndex(this.getSelectedIndex()+1),this.openMenu(),n.preventDefault())}},e.prototype.notchOutline=function(n){if(!!this.adapter.hasOutline()){var s=this.adapter.hasClass(Jo.FOCUSED);if(n){var f=md.LABEL_SCALE,v=this.adapter.getLabelWidth()*f;this.adapter.notchOutline(v)}else s||this.adapter.closeOutline()}},e.prototype.setLeadingIconAriaLabel=function(n){this.leadingIcon&&this.leadingIcon.setAriaLabel(n)},e.prototype.setLeadingIconContent=function(n){this.leadingIcon&&this.leadingIcon.setContent(n)},e.prototype.getUseDefaultValidation=function(){return this.useDefaultValidation},e.prototype.setUseDefaultValidation=function(n){this.useDefaultValidation=n},e.prototype.setValid=function(n){this.useDefaultValidation||(this.customValidity=n),this.adapter.setSelectAnchorAttr("aria-invalid",(!n).toString()),n?(this.adapter.removeClass(Jo.INVALID),this.adapter.removeMenuClass(Jo.MENU_INVALID)):(this.adapter.addClass(Jo.INVALID),this.adapter.addMenuClass(Jo.MENU_INVALID)),this.syncHelperTextValidity(n)},e.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(Jo.REQUIRED)&&!this.adapter.hasClass(Jo.DISABLED)?this.getSelectedIndex()!==md.UNSET_INDEX&&(this.getSelectedIndex()!==0||Boolean(this.getValue())):this.customValidity},e.prototype.setRequired=function(n){n?this.adapter.addClass(Jo.REQUIRED):this.adapter.removeClass(Jo.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",n.toString()),this.adapter.setLabelRequired(n)},e.prototype.getRequired=function(){return this.adapter.getSelectAnchorAttr("aria-required")==="true"},e.prototype.init=function(){var n=this.adapter.getAnchorElement();n&&(this.adapter.setMenuAnchorElement(n),this.adapter.setMenuAnchorCorner(Sd.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(Jo.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(Jo.INVALID)),this.layout(),this.layoutOptions()},e.prototype.blur=function(){this.adapter.removeClass(Jo.FOCUSED),this.layout(),this.adapter.deactivateBottomLine();var n=this.adapter.hasClass(Jo.REQUIRED);n&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.syncHelperTextValidity=function(n){if(!!this.helperText){this.helperText.setValidity(n);var s=this.helperText.isVisible(),f=this.helperText.getId();s&&f?this.adapter.setSelectAnchorAttr(iy.ARIA_DESCRIBEDBY,f):this.adapter.removeSelectAnchorAttr(iy.ARIA_DESCRIBEDBY)}},e.prototype.setClickDebounceTimeout=function(){var n=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout(function(){n.recentlyClicked=!1},md.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},e}(Na);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var gd={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},yd={HELPER_TEXT_VALIDATION_MSG:"mdc-select-helper-text--validation-msg",HELPER_TEXT_VALIDATION_MSG_PERSISTENT:"mdc-select-helper-text--validation-msg-persistent"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var tT=function(o){yo(e,o);function e(n){return o.call(this,_r(_r({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return yd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return gd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},getAttr:function(){return null},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),e.prototype.getId=function(){return this.adapter.getAttr("id")},e.prototype.isVisible=function(){return this.adapter.getAttr(gd.ARIA_HIDDEN)!=="true"},e.prototype.setContent=function(n){this.adapter.setContent(n)},e.prototype.setValidation=function(n){n?this.adapter.addClass(yd.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(yd.HELPER_TEXT_VALIDATION_MSG)},e.prototype.setValidationMsgPersistent=function(n){n?this.adapter.addClass(yd.HELPER_TEXT_VALIDATION_MSG_PERSISTENT):this.adapter.removeClass(yd.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},e.prototype.setValidity=function(n){var s=this.adapter.hasClass(yd.HELPER_TEXT_VALIDATION_MSG);if(!!s){var f=this.adapter.hasClass(yd.HELPER_TEXT_VALIDATION_MSG_PERSISTENT),v=!n||f;if(v){this.showToScreenReader(),n?this.adapter.removeAttr(gd.ROLE):this.adapter.setAttr(gd.ROLE,"alert");return}this.adapter.removeAttr(gd.ROLE),this.hide()}},e.prototype.showToScreenReader=function(){this.adapter.removeAttr(gd.ARIA_HIDDEN)},e.prototype.hide=function(){this.adapter.setAttr(gd.ARIA_HIDDEN,"true")},e}(Na);const{document:iT}=q0;function nT(o){let e,n,s,f,v,c,h,S;const P=o[31].default,D=mn(P,o,o[30],null);let R=[{class:s=wi(tr({[o[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":o[5],"mdc-menu-surface--open":o[4],"smui-menu-surface--static":o[4],"mdc-menu-surface--fullwidth":o[7]},o[10]))},{style:f=Object.entries(o[11]).map(Pv).concat([o[3]]).join(" ")},o[13]],O={};for(let Y=0;Y<R.length;Y+=1)O=Ct(O,R[Y]);return{c(){e=qn(),n=_i("div"),D&&D.c(),this.h()},l(Y){e=Gn(Y),n=vi(Y,"DIV",{class:!0,style:!0});var ee=mi(n);D&&D.l(ee),ee.forEach(Qe),this.h()},h(){di(n,O)},m(Y,ee){Ut(Y,e,ee),Ut(Y,n,ee),D&&D.m(n,null),o[33](n),c=!0,h||(S=[In(iT.body,"click",o[32],!0),Ei(v=Hn.call(null,n,o[1])),Ei(o[12].call(null,n)),In(n,"keydown",o[34])],h=!0)},p(Y,ee){D&&D.p&&(!c||ee[0]&1073741824)&&gn(D,P,Y,Y[30],c?_n(P,Y[30],ee,null):yn(Y[30]),null),di(n,O=en(R,[(!c||ee[0]&1204&&s!==(s=wi(tr({[Y[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":Y[5],"mdc-menu-surface--open":Y[4],"smui-menu-surface--static":Y[4],"mdc-menu-surface--fullwidth":Y[7]},Y[10]))))&&{class:s},(!c||ee[0]&2056&&f!==(f=Object.entries(Y[11]).map(Pv).concat([Y[3]]).join(" ")))&&{style:f},ee[0]&8192&&Y[13]])),v&&Rn(v.update)&&ee[0]&2&&v.update.call(null,Y[1])},i(Y){c||(rt(D,Y),c=!0)},o(Y){ft(D,Y),c=!1},d(Y){Y&&Qe(e),Y&&Qe(n),D&&D.d(Y),o[33](null),h=!1,Tr(S)}}}const Pv=([o,e])=>`${o}: ${e};`;function rT(o,e,n){const s=["use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","isOpen","setOpen","setAbsolutePosition","setIsHoisted","isFixed","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;var h,S,P;const D=$n(Yn());let{use:R=[]}=e,{class:O=""}=e,{style:Y=""}=e,{static:ee=!1}=e,{anchor:he=!0}=e,{fixed:re=!1}=e,{open:ve=ee}=e,{managed:se=!1}=e,{fullWidth:we=!1}=e,{quickOpen:Ge=!1}=e,{anchorElement:Ue=void 0}=e,{anchorCorner:He=void 0}=e,{anchorMargin:fe={top:0,right:0,bottom:0,left:0}}=e,{maxHeight:ut=0}=e,{horizontallyCenteredOnViewport:at=!1}=e,je,Fe,Dt={},qe={},Mt;sr("SMUI:list:role","menu"),sr("SMUI:list:item:role","menuitem");const li=Sd;Fo(()=>(n(9,Fe=new T1({addClass:Gt,removeClass:Je,hasClass:Et,hasAnchor:()=>!!Ue,notifyClose:()=>{se||n(0,ve=ee),ve||Un(je,"SMUIMenuSurface:closed",void 0,void 0,!0)},notifyClosing:()=>{se||n(0,ve=ee),ve||Un(je,"SMUIMenuSurface:closing",void 0,void 0,!0)},notifyOpen:()=>{se||n(0,ve=!0),ve&&Un(je,"SMUIMenuSurface:opened",void 0,void 0,!0)},isElementInContainer:St=>je.contains(St),isRtl:()=>getComputedStyle(je).getPropertyValue("direction")==="rtl",setTransformOrigin:St=>{n(11,qe["transform-origin"]=St,qe)},isFocused:()=>document.activeElement===je,saveFocus:()=>{var St;Mt=(St=document.activeElement)!==null&&St!==void 0?St:void 0},restoreFocus:()=>{(!je||je.contains(document.activeElement))&&Mt&&document.contains(Mt)&&"focus"in Mt&&Mt.focus()},getInnerDimensions:()=>({width:je.offsetWidth,height:je.offsetHeight}),getAnchorDimensions:()=>Ue?Ue.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:St=>{n(11,qe.left="left"in St?`${St.left}px`:"",qe),n(11,qe.right="right"in St?`${St.right}px`:"",qe),n(11,qe.top="top"in St?`${St.top}px`:"",qe),n(11,qe.bottom="bottom"in St?`${St.bottom}px`:"",qe)},setMaxHeight:St=>{n(11,qe.maxHeight=St,qe)}})),Un(je,"SMUIMenuSurface:mount",{get open(){return ve},set open(St){n(0,ve=St)},closeProgrammatic:wt}),Fe.init(),()=>{var St;const Ji=Fe.isHoistedElement;Fe.destroy(),Ji&&((St=je.parentNode)===null||St===void 0||St.removeChild(je))})),eh(()=>{var It;he&&je&&((It=je.parentElement)===null||It===void 0||It.classList.remove("mdc-menu-surface--anchor"))});function Et(It){return It in Dt?Dt[It]:Jt().classList.contains(It)}function Gt(It){Dt[It]||n(10,Dt[It]=!0,Dt)}function Je(It){(!(It in Dt)||Dt[It])&&n(10,Dt[It]=!1,Dt)}function wt(It){Fe.close(It),n(0,ve=!1)}function Pt(){return ve}function ni(It){n(0,ve=It)}function Xt(It,St){return Fe.setAbsolutePosition(It,St)}function Xi(It){return Fe.setIsHoisted(It)}function ei(){return Fe.isFixed()}function Jt(){return je}const bi=It=>Fe&&ve&&!se&&Fe.handleBodyClick(It);function ai(It){Zi[It?"unshift":"push"](()=>{je=It,n(8,je)})}const ht=It=>Fe&&Fe.handleKeydown(It);return o.$$set=It=>{e=Ct(Ct({},e),Qn(It)),n(13,f=xi(e,s)),"use"in It&&n(1,R=It.use),"class"in It&&n(2,O=It.class),"style"in It&&n(3,Y=It.style),"static"in It&&n(4,ee=It.static),"anchor"in It&&n(15,he=It.anchor),"fixed"in It&&n(5,re=It.fixed),"open"in It&&n(0,ve=It.open),"managed"in It&&n(6,se=It.managed),"fullWidth"in It&&n(7,we=It.fullWidth),"quickOpen"in It&&n(16,Ge=It.quickOpen),"anchorElement"in It&&n(14,Ue=It.anchorElement),"anchorCorner"in It&&n(17,He=It.anchorCorner),"anchorMargin"in It&&n(18,fe=It.anchorMargin),"maxHeight"in It&&n(19,ut=It.maxHeight),"horizontallyCenteredOnViewport"in It&&n(20,at=It.horizontallyCenteredOnViewport),"$$scope"in It&&n(30,c=It.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&939557120&&je&&he&&!(!(n(27,h=je.parentElement)===null||h===void 0)&&h.classList.contains("mdc-menu-surface--anchor"))&&(n(28,S=je.parentElement)===null||S===void 0||S.classList.add("mdc-menu-surface--anchor"),n(14,Ue=n(29,P=je.parentElement)!==null&&P!==void 0?P:void 0)),o.$$.dirty[0]&513&&Fe&&Fe.isOpen()!==ve&&(ve?Fe.open():Fe.close()),o.$$.dirty[0]&66048&&Fe&&Fe.setQuickOpen(Ge),o.$$.dirty[0]&544&&Fe&&Fe.setFixedPosition(re),o.$$.dirty[0]&524800&&Fe&&ut>0&&Fe.setMaxHeight(ut),o.$$.dirty[0]&1049088&&Fe&&Fe.setIsHorizontallyCenteredOnViewport(at),o.$$.dirty[0]&131584&&Fe&&He!=null&&(typeof He=="string"?Fe.setAnchorCorner(li[He]):Fe.setAnchorCorner(He)),o.$$.dirty[0]&262656&&Fe&&Fe.setAnchorMargin(fe)},[ve,R,O,Y,ee,re,se,we,je,Fe,Dt,qe,D,f,Ue,he,Ge,He,fe,ut,at,Pt,ni,Xt,Xi,ei,Jt,h,S,P,c,v,bi,ai,ht]}class oT extends Tn{constructor(e){super(),An(this,e,rT,nT,Sn,{use:1,class:2,style:3,static:4,anchor:15,fixed:5,open:0,managed:6,fullWidth:7,quickOpen:16,anchorElement:14,anchorCorner:17,anchorMargin:18,maxHeight:19,horizontallyCenteredOnViewport:20,isOpen:21,setOpen:22,setAbsolutePosition:23,setIsHoisted:24,isFixed:25,getElement:26},null,[-1,-1])}get isOpen(){return this.$$.ctx[21]}get setOpen(){return this.$$.ctx[22]}get setAbsolutePosition(){return this.$$.ctx[23]}get setIsHoisted(){return this.$$.ctx[24]}get isFixed(){return this.$$.ctx[25]}get getElement(){return this.$$.ctx[26]}}function aT(o,{addClass:e=s=>o.classList.add(s),removeClass:n=s=>o.classList.remove(s)}={}){return e("mdc-menu-surface--anchor"),{destroy(){n("mdc-menu-surface--anchor")}}}function sT(o){let e;const n=o[16].default,s=mn(n,o,o[21],null);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v&2097152)&&gn(s,n,f,f[21],e?_n(n,f[21],v,null):yn(f[21]),null)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function lT(o){let e,n,s;const f=[{use:o[5]},{class:wi({[o[1]]:!0,"mdc-menu":!0})},o[9]];function v(h){o[18](h)}let c={$$slots:{default:[sT]},$$scope:{ctx:o}};for(let h=0;h<f.length;h+=1)c=Ct(c,f[h]);return o[0]!==void 0&&(c.open=o[0]),e=new oT({props:c}),o[17](e),Zi.push(()=>$l(e,"open",v)),e.$on("SMUIMenuSurface:mount",o[7]),e.$on("SMUIList:mount",o[8]),e.$on("SMUIMenuSurface:opened",o[19]),e.$on("keydown",o[6]),e.$on("SMUIList:action",o[20]),{c(){Ni(e.$$.fragment)},l(h){$i(e.$$.fragment,h)},m(h,S){Vi(e,h,S),s=!0},p(h,[S]){const P=S&546?en(f,[S&32&&{use:h[5]},S&2&&{class:wi({[h[1]]:!0,"mdc-menu":!0})},S&512&&Xr(h[9])]):{};S&2097152&&(P.$$scope={dirty:S,ctx:h}),!n&&S&1&&(n=!0,P.open=h[0],eu(()=>n=!1)),e.$set(P)},i(h){s||(rt(e.$$.fragment,h),s=!0)},o(h){ft(e.$$.fragment,h),s=!1},d(h){o[17](null),ji(e,h)}}}function uT(o,e,n){let s;const f=["use","class","open","isOpen","setOpen","setDefaultFocusState","getSelectedIndex","getElement"];let v=xi(e,f),{$$slots:c={},$$scope:h}=e;const{closest:S}=yf,P=$n(Yn());let{use:D=[]}=e,{class:R=""}=e,{open:O=!1}=e,Y,ee,he,re;Fo(()=>(n(3,ee=new JS({addClassToElementAtIndex:(qe,Mt)=>{re.addClassForElementIndex(qe,Mt)},removeClassFromElementAtIndex:(qe,Mt)=>{re.removeClassForElementIndex(qe,Mt)},addAttributeToElementAtIndex:(qe,Mt,li)=>{re.setAttributeForElementIndex(qe,Mt,li)},removeAttributeFromElementAtIndex:(qe,Mt)=>{re.removeAttributeForElementIndex(qe,Mt)},getAttributeFromElementAtIndex:(qe,Mt)=>re.getAttributeFromElementIndex(qe,Mt),elementContainsClass:(qe,Mt)=>qe.classList.contains(Mt),closeSurface:qe=>he.closeProgrammatic(qe),getElementIndex:qe=>re.getOrderedList().map(Mt=>Mt.element).indexOf(qe),notifySelected:qe=>Un(ut(),"SMUIMenu:selected",{index:qe.index,item:re.getOrderedList()[qe.index].element},void 0,!0),getMenuItemCount:()=>re.items.length,focusItemAtIndex:qe=>re.focusItemAtIndex(qe),focusListRoot:()=>"focus"in re.element&&re.element.focus(),isSelectableItemAtIndex:qe=>!!S(re.getOrderedList()[qe].element,`.${dp.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:qe=>{const Mt=re.getOrderedList(),li=S(Mt[qe].element,`.${dp.MENU_SELECTION_GROUP}`),Et=li==null?void 0:li.querySelector(`.${dp.MENU_SELECTED_LIST_ITEM}`);return Et?Mt.map(Gt=>Gt.element).indexOf(Et):-1}})),Un(ut(),"SMUIMenu:mount",ee),ee.init(),()=>{ee.destroy()}));function ve(qe){ee&&ee.handleKeydown(qe)}function se(qe){he||(he=qe.detail)}function we(qe){re||n(4,re=qe.detail)}function Ge(){return O}function Ue(qe){n(0,O=qe)}function He(qe){ee.setDefaultFocusState(qe)}function fe(){return ee.getSelectedIndex()}function ut(){return Y.getElement()}function at(qe){Zi[qe?"unshift":"push"](()=>{Y=qe,n(2,Y)})}function je(qe){O=qe,n(0,O)}const Fe=()=>ee&&ee.handleMenuSurfaceOpened(),Dt=qe=>ee&&ee.handleItemAction(re.getOrderedList()[qe.detail.index].element);return o.$$set=qe=>{e=Ct(Ct({},e),Qn(qe)),n(9,v=xi(e,f)),"use"in qe&&n(10,D=qe.use),"class"in qe&&n(1,R=qe.class),"open"in qe&&n(0,O=qe.open),"$$scope"in qe&&n(21,h=qe.$$scope)},o.$$.update=()=>{o.$$.dirty&1024&&n(5,s=[P,...D])},[O,R,Y,ee,re,s,ve,se,we,v,D,Ge,Ue,He,fe,ut,c,at,je,Fe,Dt,h]}class cT extends Tn{constructor(e){super(),An(this,e,uT,lT,Sn,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getSelectedIndex:14,getElement:15})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getSelectedIndex(){return this.$$.ctx[14]}get getElement(){return this.$$.ctx[15]}}ns({class:"mdc-menu__selection-group-icon",component:oE});function hT(o){let e,n,s,f,v,c,h,S;const P=o[22].default,D=mn(P,o,o[21],null);let R=[{class:n=wi(tr({[o[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":o[0],"mdc-floating-label--required":o[1]},o[8]))},{style:s=Object.entries(o[9]).map(Dv).concat([o[4]]).join(" ")},{for:f=o[5]||(o[11]?o[11].id:void 0)},o[12]],O={};for(let Y=0;Y<R.length;Y+=1)O=Ct(O,R[Y]);return{c(){e=_i("label"),D&&D.c(),this.h()},l(Y){e=vi(Y,"LABEL",{class:!0,style:!0,for:!0});var ee=mi(e);D&&D.l(ee),ee.forEach(Qe),this.h()},h(){di(e,O)},m(Y,ee){Ut(Y,e,ee),D&&D.m(e,null),o[24](e),c=!0,h||(S=[Ei(v=Hn.call(null,e,o[2])),Ei(o[10].call(null,e))],h=!0)},p(Y,ee){D&&D.p&&(!c||ee&2097152)&&gn(D,P,Y,Y[21],c?_n(P,Y[21],ee,null):yn(Y[21]),null),di(e,O=en(R,[(!c||ee&267&&n!==(n=wi(tr({[Y[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":Y[0],"mdc-floating-label--required":Y[1]},Y[8]))))&&{class:n},(!c||ee&528&&s!==(s=Object.entries(Y[9]).map(Dv).concat([Y[4]]).join(" ")))&&{style:s},(!c||ee&32&&f!==(f=Y[5]||(Y[11]?Y[11].id:void 0)))&&{for:f},ee&4096&&Y[12]])),v&&Rn(v.update)&&ee&4&&v.update.call(null,Y[2])},i(Y){c||(rt(D,Y),c=!0)},o(Y){ft(D,Y),c=!1},d(Y){Y&&Qe(e),D&&D.d(Y),o[24](null),h=!1,Tr(S)}}}function dT(o){let e,n,s,f,v,c,h;const S=o[22].default,P=mn(S,o,o[21],null);let D=[{class:n=wi(tr({[o[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":o[0],"mdc-floating-label--required":o[1]},o[8]))},{style:s=Object.entries(o[9]).map(zv).concat([o[4]]).join(" ")},o[12]],R={};for(let O=0;O<D.length;O+=1)R=Ct(R,D[O]);return{c(){e=_i("span"),P&&P.c(),this.h()},l(O){e=vi(O,"SPAN",{class:!0,style:!0});var Y=mi(e);P&&P.l(Y),Y.forEach(Qe),this.h()},h(){di(e,R)},m(O,Y){Ut(O,e,Y),P&&P.m(e,null),o[23](e),v=!0,c||(h=[Ei(f=Hn.call(null,e,o[2])),Ei(o[10].call(null,e))],c=!0)},p(O,Y){P&&P.p&&(!v||Y&2097152)&&gn(P,S,O,O[21],v?_n(S,O[21],Y,null):yn(O[21]),null),di(e,R=en(D,[(!v||Y&267&&n!==(n=wi(tr({[O[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":O[0],"mdc-floating-label--required":O[1]},O[8]))))&&{class:n},(!v||Y&528&&s!==(s=Object.entries(O[9]).map(zv).concat([O[4]]).join(" ")))&&{style:s},Y&4096&&O[12]])),f&&Rn(f.update)&&Y&4&&f.update.call(null,O[2])},i(O){v||(rt(P,O),v=!0)},o(O){ft(P,O),v=!1},d(O){O&&Qe(e),P&&P.d(O),o[23](null),c=!1,Tr(h)}}}function pT(o){let e,n,s,f;const v=[dT,hT],c=[];function h(S,P){return S[6]?0:1}return e=h(o),n=c[e]=v[e](o),{c(){n.c(),s=bn()},l(S){n.l(S),s=bn()},m(S,P){c[e].m(S,P),Ut(S,s,P),f=!0},p(S,[P]){let D=e;e=h(S),e===D?c[e].p(S,P):(Or(),ft(c[D],1,1,()=>{c[D]=null}),Rr(),n=c[e],n?n.p(S,P):(n=c[e]=v[e](S),n.c()),rt(n,1),n.m(s.parentNode,s))},i(S){f||(rt(n),f=!0)},o(S){ft(n),f=!1},d(S){c[e].d(S),S&&Qe(s)}}}const zv=([o,e])=>`${o}: ${e};`,Dv=([o,e])=>`${o}: ${e};`;function fT(o,e,n){const s=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;var h;const S=$n(Yn());let{use:P=[]}=e,{class:D=""}=e,{style:R=""}=e,{for:O=void 0}=e,{floatAbove:Y=!1}=e,{required:ee=!1}=e,{wrapped:he=!1}=e,re,ve,se={},we={},Ge=(h=Dr("SMUI:generic:input:props"))!==null&&h!==void 0?h:{},Ue=Y,He=ee;Fo(()=>{n(18,ve=new HS({addClass:fe,removeClass:ut,getWidth:()=>{var wt,Pt;const ni=li(),Xt=ni.cloneNode(!0);(wt=ni.parentNode)===null||wt===void 0||wt.appendChild(Xt),Xt.classList.add("smui-floating-label--remove-transition"),Xt.classList.add("smui-floating-label--force-size"),Xt.classList.remove("mdc-floating-label--float-above");const Xi=Xt.scrollWidth;return(Pt=ni.parentNode)===null||Pt===void 0||Pt.removeChild(Xt),Xi},registerInteractionHandler:(wt,Pt)=>li().addEventListener(wt,Pt),deregisterInteractionHandler:(wt,Pt)=>li().removeEventListener(wt,Pt)}));const Je={get element(){return li()},addStyle:at,removeStyle:je};return Un(re,"SMUIFloatingLabel:mount",Je),ve.init(),()=>{Un(re,"SMUIFloatingLabel:unmount",Je),ve.destroy()}});function fe(Je){se[Je]||n(8,se[Je]=!0,se)}function ut(Je){(!(Je in se)||se[Je])&&n(8,se[Je]=!1,se)}function at(Je,wt){we[Je]!=wt&&(wt===""||wt==null?(delete we[Je],n(9,we)):n(9,we[Je]=wt,we))}function je(Je){Je in we&&(delete we[Je],n(9,we))}function Fe(Je){ve.shake(Je)}function Dt(Je){n(0,Y=Je)}function qe(Je){n(1,ee=Je)}function Mt(){return ve.getWidth()}function li(){return re}function Et(Je){Zi[Je?"unshift":"push"](()=>{re=Je,n(7,re)})}function Gt(Je){Zi[Je?"unshift":"push"](()=>{re=Je,n(7,re)})}return o.$$set=Je=>{e=Ct(Ct({},e),Qn(Je)),n(12,f=xi(e,s)),"use"in Je&&n(2,P=Je.use),"class"in Je&&n(3,D=Je.class),"style"in Je&&n(4,R=Je.style),"for"in Je&&n(5,O=Je.for),"floatAbove"in Je&&n(0,Y=Je.floatAbove),"required"in Je&&n(1,ee=Je.required),"wrapped"in Je&&n(6,he=Je.wrapped),"$$scope"in Je&&n(21,c=Je.$$scope)},o.$$.update=()=>{o.$$.dirty&786433&&ve&&Ue!==Y&&(n(19,Ue=Y),ve.float(Y)),o.$$.dirty&1310722&&ve&&He!==ee&&(n(20,He=ee),ve.setRequired(ee))},[Y,ee,P,D,R,O,he,re,se,we,S,Ge,f,Fe,Dt,qe,Mt,li,ve,Ue,He,c,v,Et,Gt]}class A1 extends Tn{constructor(e){super(),An(this,e,fT,pT,Sn,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function mT(o){let e,n,s,f,v,c,h=[{class:n=wi(tr({[o[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":o[3]},o[5]))},{style:s=Object.entries(o[6]).map(Rv).concat([o[2]]).join(" ")},o[8]],S={};for(let P=0;P<h.length;P+=1)S=Ct(S,h[P]);return{c(){e=_i("div"),this.h()},l(P){e=vi(P,"DIV",{class:!0,style:!0}),mi(e).forEach(Qe),this.h()},h(){di(e,S)},m(P,D){Ut(P,e,D),o[13](e),v||(c=[Ei(f=Hn.call(null,e,o[0])),Ei(o[7].call(null,e))],v=!0)},p(P,[D]){di(e,S=en(h,[D&42&&n!==(n=wi(tr({[P[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":P[3]},P[5])))&&{class:n},D&68&&s!==(s=Object.entries(P[6]).map(Rv).concat([P[2]]).join(" "))&&{style:s},D&256&&P[8]])),f&&Rn(f.update)&&D&1&&f.update.call(null,P[0])},i:Yo,o:Yo,d(P){P&&Qe(e),o[13](null),v=!1,Tr(c)}}}const Rv=([o,e])=>`${o}: ${e};`;function gT(o,e,n){const s=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let f=xi(e,s);const v=$n(Yn());let{use:c=[]}=e,{class:h=""}=e,{style:S=""}=e,{active:P=!1}=e,D,R,O={},Y={};Fo(()=>(R=new ZS({addClass:he,removeClass:re,hasClass:ee,setStyle:ve,registerEventHandler:(fe,ut)=>Ue().addEventListener(fe,ut),deregisterEventHandler:(fe,ut)=>Ue().removeEventListener(fe,ut)}),R.init(),()=>{R.destroy()}));function ee(fe){return fe in O?O[fe]:Ue().classList.contains(fe)}function he(fe){O[fe]||n(5,O[fe]=!0,O)}function re(fe){(!(fe in O)||O[fe])&&n(5,O[fe]=!1,O)}function ve(fe,ut){Y[fe]!=ut&&(ut===""||ut==null?(delete Y[fe],n(6,Y)):n(6,Y[fe]=ut,Y))}function se(){R.activate()}function we(){R.deactivate()}function Ge(fe){R.setRippleCenter(fe)}function Ue(){return D}function He(fe){Zi[fe?"unshift":"push"](()=>{D=fe,n(4,D)})}return o.$$set=fe=>{e=Ct(Ct({},e),Qn(fe)),n(8,f=xi(e,s)),"use"in fe&&n(0,c=fe.use),"class"in fe&&n(1,h=fe.class),"style"in fe&&n(2,S=fe.style),"active"in fe&&n(3,P=fe.active)},[c,h,S,P,D,O,Y,v,f,se,we,Ge,Ue,He]}class yT extends Tn{constructor(e){super(),An(this,e,gT,mT,Sn,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function Ov(o){let e,n,s;const f=o[14].default,v=mn(f,o,o[13],null);return{c(){e=_i("div"),v&&v.c(),this.h()},l(c){e=vi(c,"DIV",{class:!0,style:!0});var h=mi(e);v&&v.l(h),h.forEach(Qe),this.h()},h(){ii(e,"class","mdc-notched-outline__notch"),ii(e,"style",n=Object.entries(o[7]).map(Bv).join(" "))},m(c,h){Ut(c,e,h),v&&v.m(e,null),s=!0},p(c,h){v&&v.p&&(!s||h&8192)&&gn(v,f,c,c[13],s?_n(f,c[13],h,null):yn(c[13]),null),(!s||h&128&&n!==(n=Object.entries(c[7]).map(Bv).join(" ")))&&ii(e,"style",n)},i(c){s||(rt(v,c),s=!0)},o(c){ft(v,c),s=!1},d(c){c&&Qe(e),v&&v.d(c)}}}function _T(o){let e,n,s,f,v,c,h,S,P,D,R=!o[3]&&Ov(o),O=[{class:c=wi(tr({[o[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":o[2],"mdc-notched-outline--no-label":o[3]},o[6]))},o[9]],Y={};for(let ee=0;ee<O.length;ee+=1)Y=Ct(Y,O[ee]);return{c(){e=_i("div"),n=_i("div"),s=qn(),R&&R.c(),f=qn(),v=_i("div"),this.h()},l(ee){e=vi(ee,"DIV",{class:!0});var he=mi(e);n=vi(he,"DIV",{class:!0}),mi(n).forEach(Qe),s=Gn(he),R&&R.l(he),f=Gn(he),v=vi(he,"DIV",{class:!0}),mi(v).forEach(Qe),he.forEach(Qe),this.h()},h(){ii(n,"class","mdc-notched-outline__leading"),ii(v,"class","mdc-notched-outline__trailing"),di(e,Y)},m(ee,he){Ut(ee,e,he),sn(e,n),sn(e,s),R&&R.m(e,null),sn(e,f),sn(e,v),o[15](e),S=!0,P||(D=[Ei(h=Hn.call(null,e,o[0])),Ei(o[8].call(null,e)),In(e,"SMUIFloatingLabel:mount",o[16]),In(e,"SMUIFloatingLabel:unmount",o[17])],P=!0)},p(ee,[he]){ee[3]?R&&(Or(),ft(R,1,1,()=>{R=null}),Rr()):R?(R.p(ee,he),he&8&&rt(R,1)):(R=Ov(ee),R.c(),rt(R,1),R.m(e,f)),di(e,Y=en(O,[(!S||he&78&&c!==(c=wi(tr({[ee[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":ee[2],"mdc-notched-outline--no-label":ee[3]},ee[6]))))&&{class:c},he&512&&ee[9]])),h&&Rn(h.update)&&he&1&&h.update.call(null,ee[0])},i(ee){S||(rt(R),S=!0)},o(ee){ft(R),S=!1},d(ee){ee&&Qe(e),R&&R.d(),o[15](null),P=!1,Tr(D)}}}const Bv=([o,e])=>`${o}: ${e};`;function vT(o,e,n){const s=["use","class","notched","noLabel","notch","closeNotch","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,{notched:D=!1}=e,{noLabel:R=!1}=e,O,Y,ee,he={},re={};Fo(()=>(Y=new $S({addClass:ve,removeClass:se,setNotchWidthProperty:Fe=>we("width",Fe+"px"),removeNotchWidthProperty:()=>Ge("width")}),Y.init(),()=>{Y.destroy()}));function ve(Fe){he[Fe]||n(6,he[Fe]=!0,he)}function se(Fe){(!(Fe in he)||he[Fe])&&n(6,he[Fe]=!1,he)}function we(Fe,Dt){re[Fe]!=Dt&&(Dt===""||Dt==null?(delete re[Fe],n(7,re)):n(7,re[Fe]=Dt,re))}function Ge(Fe){Fe in re&&(delete re[Fe],n(7,re))}function Ue(Fe){Y.notch(Fe)}function He(){Y.closeNotch()}function fe(){return O}function ut(Fe){Zi[Fe?"unshift":"push"](()=>{O=Fe,n(5,O)})}const at=Fe=>n(4,ee=Fe.detail),je=()=>n(4,ee=void 0);return o.$$set=Fe=>{e=Ct(Ct({},e),Qn(Fe)),n(9,f=xi(e,s)),"use"in Fe&&n(0,S=Fe.use),"class"in Fe&&n(1,P=Fe.class),"notched"in Fe&&n(2,D=Fe.notched),"noLabel"in Fe&&n(3,R=Fe.noLabel),"$$scope"in Fe&&n(13,c=Fe.$$scope)},o.$$.update=()=>{o.$$.dirty&16&&(ee?(ee.addStyle("transition-duration","0s"),ve("mdc-notched-outline--upgraded"),requestAnimationFrame(()=>{ee&&ee.removeStyle("transition-duration")})):se("mdc-notched-outline--upgraded"))},[S,P,D,R,ee,O,he,re,h,f,Ue,He,fe,c,v,ut,at,je]}class bT extends Tn{constructor(e){super(),An(this,e,vT,_T,Sn,{use:0,class:1,notched:2,noLabel:3,notch:10,closeNotch:11,getElement:12})}get notch(){return this.$$.ctx[10]}get closeNotch(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function xT(o){let e;return{c(){e=pa(o[8])},l(n){e=fa(n,o[8])},m(n,s){Ut(n,e,s)},p(n,s){s&256&&tu(e,n[8])},i:Yo,o:Yo,d(n){n&&Qe(e)}}}function wT(o){let e;const n=o[13].default,s=mn(n,o,o[12],null);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v&4096)&&gn(s,n,f,f[12],e?_n(n,f[12],v,null):yn(f[12]),null)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function ET(o){let e,n,s,f,v,c,h,S,P;const D=[wT,xT],R=[];function O(he,re){return he[8]==null?0:1}n=O(o),s=R[n]=D[n](o);let Y=[{class:f=wi(tr({[o[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":o[4],"mdc-select-helper-text--validation-msg-persistent":o[3]},o[6]))},{"aria-hidden":v=o[3]?void 0:"true"},{id:o[2]},o[7],o[10]],ee={};for(let he=0;he<Y.length;he+=1)ee=Ct(ee,Y[he]);return{c(){e=_i("div"),s.c(),this.h()},l(he){e=vi(he,"DIV",{class:!0,"aria-hidden":!0,id:!0});var re=mi(e);s.l(re),re.forEach(Qe),this.h()},h(){di(e,ee)},m(he,re){Ut(he,e,re),R[n].m(e,null),o[14](e),h=!0,S||(P=[Ei(c=Hn.call(null,e,o[0])),Ei(o[9].call(null,e))],S=!0)},p(he,[re]){let ve=n;n=O(he),n===ve?R[n].p(he,re):(Or(),ft(R[ve],1,1,()=>{R[ve]=null}),Rr(),s=R[n],s?s.p(he,re):(s=R[n]=D[n](he),s.c()),rt(s,1),s.m(e,null)),di(e,ee=en(Y,[(!h||re&90&&f!==(f=wi(tr({[he[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":he[4],"mdc-select-helper-text--validation-msg-persistent":he[3]},he[6]))))&&{class:f},(!h||re&8&&v!==(v=he[3]?void 0:"true"))&&{"aria-hidden":v},(!h||re&4)&&{id:he[2]},re&128&&he[7],re&1024&&he[10]])),c&&Rn(c.update)&&re&1&&c.update.call(null,he[0])},i(he){h||(rt(s),h=!0)},o(he){ft(s),h=!1},d(he){he&&Qe(e),R[n].d(),o[14](null),S=!1,Tr(P)}}}let IT=0;function ST(o,e,n){const s=["use","class","id","persistent","validationMsg","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,{id:D="SMUI-select-helper-text-"+IT++}=e,{persistent:R=!1}=e,{validationMsg:O=!1}=e,Y,ee,he={},re={},ve;Fo(()=>(ee=new tT({addClass:we,removeClass:Ge,hasClass:se,getAttr:Ue,setAttr:He,removeAttr:fe,setContent:je=>{n(8,ve=je)}}),D.startsWith("SMUI-select-helper-text-")&&Un(ut(),"SMUISelectHelperText:id",D),Un(ut(),"SMUISelectHelperText:mount",ee),ee.init(),()=>{Un(ut(),"SMUISelectHelperText:unmount",ee),ee.destroy()}));function se(je){return je in he?he[je]:ut().classList.contains(je)}function we(je){he[je]||n(6,he[je]=!0,he)}function Ge(je){(!(je in he)||he[je])&&n(6,he[je]=!1,he)}function Ue(je){var Fe;return je in re?(Fe=re[je])!==null&&Fe!==void 0?Fe:null:ut().getAttribute(je)}function He(je,Fe){re[je]!==Fe&&n(7,re[je]=Fe,re)}function fe(je){(!(je in re)||re[je]!=null)&&n(7,re[je]=void 0,re)}function ut(){return Y}function at(je){Zi[je?"unshift":"push"](()=>{Y=je,n(5,Y)})}return o.$$set=je=>{e=Ct(Ct({},e),Qn(je)),n(10,f=xi(e,s)),"use"in je&&n(0,S=je.use),"class"in je&&n(1,P=je.class),"id"in je&&n(2,D=je.id),"persistent"in je&&n(3,R=je.persistent),"validationMsg"in je&&n(4,O=je.validationMsg),"$$scope"in je&&n(12,c=je.$$scope)},[S,P,D,R,O,Y,he,re,ve,h,f,ut,c,v,at]}class TT extends Tn{constructor(e){super(),An(this,e,ST,ET,Sn,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const AT=o=>({}),Fv=o=>({}),CT=o=>({}),Uv=o=>({}),kT=o=>({}),Nv=o=>({}),MT=o=>({}),Vv=o=>({});function jv(o){let e,n=[{type:"hidden"},{required:o[10]},{disabled:o[6]},{value:o[0]},rr(o[53],"input$")],s={};for(let f=0;f<n.length;f+=1)s=Ct(s,n[f]);return{c(){e=_i("input"),this.h()},l(f){e=vi(f,"INPUT",{type:!0}),this.h()},h(){di(e,s)},m(f,v){Ut(f,e,v),e.autofocus&&e.focus()},p(f,v){di(e,s=en(n,[{type:"hidden"},v[0]&1024&&{required:f[10]},v[0]&64&&{disabled:f[6]},v[0]&1&&{value:f[0]},v[1]&4194304&&rr(f[53],"input$")]))},d(f){f&&Qe(e)}}}function qv(o){let e;return{c(){e=_i("span"),this.h()},l(n){e=vi(n,"SPAN",{class:!0}),mi(e).forEach(Qe),this.h()},h(){ii(e,"class","mdc-select__ripple")},m(n,s){Ut(n,e,s)},d(n){n&&Qe(e)}}}function Gv(o){let e,n;const s=[{id:o[11]+"-smui-label"},{floatAbove:o[43]!==""},{required:o[10]},rr(o[53],"label$")];let f={$$slots:{default:[LT]},$$scope:{ctx:o}};for(let v=0;v<s.length;v+=1)f=Ct(f,s[v]);return e=new A1({props:f}),o[66](e),{c(){Ni(e.$$.fragment)},l(v){$i(e.$$.fragment,v)},m(v,c){Vi(e,v,c),n=!0},p(v,c){const h=c[0]&3072|c[1]&4198400?en(s,[c[0]&2048&&{id:v[11]+"-smui-label"},c[1]&4096&&{floatAbove:v[43]!==""},c[0]&1024&&{required:v[10]},c[1]&4194304&&Xr(rr(v[53],"label$"))]):{};c[0]&512|c[2]&134217728&&(h.$$scope={dirty:c,ctx:v}),e.$set(h)},i(v){n||(rt(e.$$.fragment,v),n=!0)},o(v){ft(e.$$.fragment,v),n=!1},d(v){o[66](null),ji(e,v)}}}function LT(o){let e=(o[9]==null?"":o[9])+"",n,s;const f=o[63].label,v=mn(f,o,o[89],Vv);return{c(){n=pa(e),v&&v.c()},l(c){n=fa(c,e),v&&v.l(c)},m(c,h){Ut(c,n,h),v&&v.m(c,h),s=!0},p(c,h){(!s||h[0]&512)&&e!==(e=(c[9]==null?"":c[9])+"")&&tu(n,e),v&&v.p&&(!s||h[2]&134217728)&&gn(v,f,c,c[89],s?_n(f,c[89],h,MT):yn(c[89]),Vv)},i(c){s||(rt(v,c),s=!0)},o(c){ft(v,c),s=!1},d(c){c&&Qe(n),v&&v.d(c)}}}function Hv(o){let e,n;const s=[{noLabel:o[8]||o[9]==null&&!o[52].label},rr(o[53],"outline$")];let f={$$slots:{default:[zT]},$$scope:{ctx:o}};for(let v=0;v<s.length;v+=1)f=Ct(f,s[v]);return e=new bT({props:f}),o[68](e),{c(){Ni(e.$$.fragment)},l(v){$i(e.$$.fragment,v)},m(v,c){Vi(e,v,c),n=!0},p(v,c){const h=c[0]&768|c[1]&6291456?en(s,[c[0]&768|c[1]&2097152&&{noLabel:v[8]||v[9]==null&&!v[52].label},c[1]&4194304&&Xr(rr(v[53],"outline$"))]):{};c[0]&3840|c[1]&6296064|c[2]&134217728&&(h.$$scope={dirty:c,ctx:v}),e.$set(h)},i(v){n||(rt(e.$$.fragment,v),n=!0)},o(v){ft(e.$$.fragment,v),n=!1},d(v){o[68](null),ji(e,v)}}}function Zv(o){let e,n;const s=[{id:o[11]+"-smui-label"},{floatAbove:o[43]!==""},{required:o[10]},rr(o[53],"label$")];let f={$$slots:{default:[PT]},$$scope:{ctx:o}};for(let v=0;v<s.length;v+=1)f=Ct(f,s[v]);return e=new A1({props:f}),o[67](e),{c(){Ni(e.$$.fragment)},l(v){$i(e.$$.fragment,v)},m(v,c){Vi(e,v,c),n=!0},p(v,c){const h=c[0]&3072|c[1]&4198400?en(s,[c[0]&2048&&{id:v[11]+"-smui-label"},c[1]&4096&&{floatAbove:v[43]!==""},c[0]&1024&&{required:v[10]},c[1]&4194304&&Xr(rr(v[53],"label$"))]):{};c[0]&512|c[2]&134217728&&(h.$$scope={dirty:c,ctx:v}),e.$set(h)},i(v){n||(rt(e.$$.fragment,v),n=!0)},o(v){ft(e.$$.fragment,v),n=!1},d(v){o[67](null),ji(e,v)}}}function PT(o){let e=(o[9]==null?"":o[9])+"",n,s;const f=o[63].label,v=mn(f,o,o[89],Nv);return{c(){n=pa(e),v&&v.c()},l(c){n=fa(c,e),v&&v.l(c)},m(c,h){Ut(c,n,h),v&&v.m(c,h),s=!0},p(c,h){(!s||h[0]&512)&&e!==(e=(c[9]==null?"":c[9])+"")&&tu(n,e),v&&v.p&&(!s||h[2]&134217728)&&gn(v,f,c,c[89],s?_n(f,c[89],h,kT):yn(c[89]),Nv)},i(c){s||(rt(v,c),s=!0)},o(c){ft(v,c),s=!1},d(c){c&&Qe(n),v&&v.d(c)}}}function zT(o){let e,n,s=!o[8]&&(o[9]!=null||o[52].label)&&Zv(o);return{c(){s&&s.c(),e=bn()},l(f){s&&s.l(f),e=bn()},m(f,v){s&&s.m(f,v),Ut(f,e,v),n=!0},p(f,v){!f[8]&&(f[9]!=null||f[52].label)?s?(s.p(f,v),v[0]&768|v[1]&2097152&&rt(s,1)):(s=Zv(f),s.c(),rt(s,1),s.m(e.parentNode,e)):s&&(Or(),ft(s,1,1,()=>{s=null}),Rr())},i(f){n||(rt(s),n=!0)},o(f){ft(s),n=!1},d(f){s&&s.d(f),f&&Qe(e)}}}function Wv(o){let e,n;const s=[rr(o[53],"ripple$")];let f={};for(let v=0;v<s.length;v+=1)f=Ct(f,s[v]);return e=new yT({props:f}),o[70](e),{c(){Ni(e.$$.fragment)},l(v){$i(e.$$.fragment,v)},m(v,c){Vi(e,v,c),n=!0},p(v,c){const h=c[1]&4194304?en(s,[Xr(rr(v[53],"ripple$"))]):{};e.$set(h)},i(v){n||(rt(e.$$.fragment,v),n=!0)},o(v){ft(e.$$.fragment,v),n=!1},d(v){o[70](null),ji(e,v)}}}function DT(o){let e;const n=o[63].default,s=mn(n,o,o[89],null);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v[2]&134217728)&&gn(s,n,f,f[89],e?_n(n,f[89],v,null):yn(f[89]),null)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function RT(o){let e,n,s;const f=[{role:"listbox"},{wrapFocus:o[36]},rr(o[53],"list$")];function v(h){o[76](h)}let c={$$slots:{default:[DT]},$$scope:{ctx:o}};for(let h=0;h<f.length;h+=1)c=Ct(c,f[h]);return o[24]!==void 0&&(c.selectedIndex=o[24]),e=new t1({props:c}),Zi.push(()=>$l(e,"selectedIndex",v)),e.$on("SMUIList:mount",o[77]),{c(){Ni(e.$$.fragment)},l(h){$i(e.$$.fragment,h)},m(h,S){Vi(e,h,S),s=!0},p(h,S){const P=S[1]&4194336?en(f,[f[0],S[1]&32&&{wrapFocus:h[36]},S[1]&4194304&&Xr(rr(h[53],"list$"))]):{};S[2]&134217728&&(P.$$scope={dirty:S,ctx:h}),!n&&S[0]&16777216&&(n=!0,P.selectedIndex=h[24],eu(()=>n=!1)),e.$set(P)},i(h){s||(rt(e.$$.fragment,h),s=!0)},o(h){ft(e.$$.fragment,h),s=!1},d(h){ji(e,h)}}}function Xv(o){let e,n;const s=[rr(o[53],"helperText$")];let f={$$slots:{default:[OT]},$$scope:{ctx:o}};for(let v=0;v<s.length;v+=1)f=Ct(f,s[v]);return e=new TT({props:f}),e.$on("SMUISelectHelperText:id",o[86]),e.$on("SMUISelectHelperText:mount",o[87]),e.$on("SMUISelectHelperText:unmount",o[88]),{c(){Ni(e.$$.fragment)},l(v){$i(e.$$.fragment,v)},m(v,c){Vi(e,v,c),n=!0},p(v,c){const h=c[1]&4194304?en(s,[Xr(rr(v[53],"helperText$"))]):{};c[2]&134217728&&(h.$$scope={dirty:c,ctx:v}),e.$set(h)},i(v){n||(rt(e.$$.fragment,v),n=!0)},o(v){ft(e.$$.fragment,v),n=!1},d(v){ji(e,v)}}}function OT(o){let e;const n=o[63].helperText,s=mn(n,o,o[89],Fv);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v[2]&134217728)&&gn(s,n,f,f[89],e?_n(n,f[89],v,AT):yn(f[89]),Fv)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function BT(o){let e,n,s,f,v,c,h,S,P,D,R,O,Y,ee,he,re,ve,se,we,Ge,Ue,He,fe,ut,at,je,Fe,Dt,qe,Mt,li,Et,Gt,Je,wt,Pt,ni,Xt,Xi,ei,Jt=o[12]&&jv(o),bi=o[7]==="filled"&&qv(),ai=o[7]!=="outlined"&&!o[8]&&(o[9]!=null||o[52].label)&&Gv(o),ht=o[7]==="outlined"&&Hv(o);const It=o[63].leadingIcon,St=mn(It,o,o[89],Uv);let Ji=[{id:R=o[11]+"-smui-selected-text"},{class:O=wi({[o[19]]:!0,"mdc-select__selected-text":!0})},{role:"button"},{"aria-haspopup":"listbox"},{"aria-labelledby":Y=o[11]+"-smui-label"},rr(o[53],"selectedText$")],Qt={};for(let zt=0;zt<Ji.length;zt+=1)Qt=Ct(Qt,Ji[zt]);let gt=[{class:he=wi({[o[17]]:!0,"mdc-select__selected-text-container":!0})},rr(o[53],"selectedTextContainer$")],zi={};for(let zt=0;zt<gt.length;zt+=1)zi=Ct(zi,gt[zt]);let ln=[{class:He=wi({[o[21]]:!0,"mdc-select__dropdown-icon":!0})},rr(o[53],"dropdownIcon$")],Cn={};for(let zt=0;zt<ln.length;zt+=1)Cn=Ct(Cn,ln[zt]);let Zn=o[7]!=="outlined"&&o[5]&&Wv(o),Nr=[{class:at=wi({[o[15]]:!0,"mdc-select__anchor":!0})},{"aria-required":je=o[10]?"true":void 0},{"aria-disabled":Fe=o[6]?"true":void 0},{"aria-controls":o[31]},{"aria-describedby":o[31]},o[29],rr(o[53],"anchor$")],Kr={};for(let zt=0;zt<Nr.length;zt+=1)Kr=Ct(Kr,Nr[zt]);const At=[{class:wi(tr({[o[22]]:!0,"mdc-select__menu":!0},o[33]))},{fullWidth:!0},{anchor:!1},{anchorElement:o[34]},{anchorCorner:o[35]},rr(o[53],"menu$")];function Bi(zt){o[78](zt)}let Nn={$$slots:{default:[RT]},$$scope:{ctx:o}};for(let zt=0;zt<At.length;zt+=1)Nn=Ct(Nn,At[zt]);o[32]!==void 0&&(Nn.open=o[32]),Mt=new cT({props:Nn}),Zi.push(()=>$l(Mt,"open",Bi)),Mt.$on("SMUIMenu:selected",o[79]),Mt.$on("SMUIMenuSurface:closing",o[80]),Mt.$on("SMUIMenuSurface:closed",o[81]),Mt.$on("SMUIMenuSurface:opened",o[82]);let rn=[{class:Et=wi(tr({[o[3]]:!0,"mdc-select":!0,"mdc-select--required":o[10],"mdc-select--disabled":o[6],"mdc-select--filled":o[7]==="filled","mdc-select--outlined":o[7]==="outlined","smui-select--standard":o[7]==="standard","mdc-select--with-leading-icon":o[45](o[13])?o[52].leadingIcon:o[13],"mdc-select--no-label":o[8]||o[9]==null&&!o[52].label,"mdc-select--invalid":o[1],"mdc-select--activated":o[32],"mdc-data-table__pagination-rows-per-page-select":o[46]==="data-table:pagination"},o[26]))},{style:Gt=Object.entries(o[27]).map(Kv).concat([o[4]]).join(" ")},_s(o[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])],Jn={};for(let zt=0;zt<rn.length;zt+=1)Jn=Ct(Jn,rn[zt]);let Ln=o[52].helperText&&Xv(o);return{c(){e=_i("div"),Jt&&Jt.c(),n=qn(),s=_i("div"),bi&&bi.c(),f=qn(),ai&&ai.c(),v=qn(),ht&&ht.c(),c=qn(),St&&St.c(),h=qn(),S=_i("span"),P=_i("span"),D=pa(o[43]),ve=qn(),se=_i("span"),we=Kl("svg"),Ge=Kl("polygon"),Ue=Kl("polygon"),ut=qn(),Zn&&Zn.c(),qe=qn(),Ni(Mt.$$.fragment),Pt=qn(),Ln&&Ln.c(),ni=bn(),this.h()},l(zt){e=vi(zt,"DIV",{class:!0,style:!0});var Oi=mi(e);Jt&&Jt.l(Oi),n=Gn(Oi),s=vi(Oi,"DIV",{class:!0,"aria-required":!0,"aria-disabled":!0,"aria-controls":!0,"aria-describedby":!0});var Ze=mi(s);bi&&bi.l(Ze),f=Gn(Ze),ai&&ai.l(Ze),v=Gn(Ze),ht&&ht.l(Ze),c=Gn(Ze),St&&St.l(Ze),h=Gn(Ze),S=vi(Ze,"SPAN",{class:!0});var Bt=mi(S);P=vi(Bt,"SPAN",{id:!0,class:!0,role:!0,"aria-haspopup":!0,"aria-labelledby":!0});var Ki=mi(P);D=fa(Ki,o[43]),Ki.forEach(Qe),Bt.forEach(Qe),ve=Gn(Ze),se=vi(Ze,"SPAN",{class:!0});var Vn=mi(se);we=Jl(Vn,"svg",{class:!0,viewBox:!0,focusable:!0});var Wn=mi(we);Ge=Jl(Wn,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),mi(Ge).forEach(Qe),Ue=Jl(Wn,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),mi(Ue).forEach(Qe),Wn.forEach(Qe),Vn.forEach(Qe),ut=Gn(Ze),Zn&&Zn.l(Ze),Ze.forEach(Qe),qe=Gn(Oi),$i(Mt.$$.fragment,Oi),Oi.forEach(Qe),Pt=Gn(zt),Ln&&Ln.l(zt),ni=bn(),this.h()},h(){di(P,Qt),di(S,zi),ii(Ge,"class","mdc-select__dropdown-icon-inactive"),ii(Ge,"stroke","none"),ii(Ge,"fill-rule","evenodd"),ii(Ge,"points","7 10 12 15 17 10"),ii(Ue,"class","mdc-select__dropdown-icon-active"),ii(Ue,"stroke","none"),ii(Ue,"fill-rule","evenodd"),ii(Ue,"points","7 15 12 10 17 15"),ii(we,"class","mdc-select__dropdown-icon-graphic"),ii(we,"viewBox","7 10 10 5"),ii(we,"focusable","false"),di(se,Cn),di(s,Kr),di(e,Jn)},m(zt,Oi){Ut(zt,e,Oi),Jt&&Jt.m(e,null),sn(e,n),sn(e,s),bi&&bi.m(s,null),sn(s,f),ai&&ai.m(s,null),sn(s,v),ht&&ht.m(s,null),sn(s,c),St&&St.m(s,null),sn(s,h),sn(s,S),sn(S,P),sn(P,D),o[69](P),sn(s,ve),sn(s,se),sn(se,we),sn(we,Ge),sn(we,Ue),sn(s,ut),Zn&&Zn.m(s,null),o[71](s),sn(e,qe),Vi(Mt,e,null),o[83](e),Ut(zt,Pt,Oi),Ln&&Ln.m(zt,Oi),Ut(zt,ni,Oi),Xt=!0,Xi||(ei=[Ei(ee=Hn.call(null,P,o[18])),Ei(re=Hn.call(null,S,o[16])),Ei(fe=Hn.call(null,se,o[20])),Ei(Dt=Hn.call(null,s,o[14])),In(s,"focus",o[72]),In(s,"blur",o[73]),In(s,"click",o[74]),In(s,"keydown",o[75]),In(s,"focus",o[64]),In(s,"blur",o[65]),Ei(Je=$c.call(null,e,{ripple:o[7]==="filled",unbounded:!1,addClass:o[49],removeClass:o[50],addStyle:o[51]})),Ei(aT.call(null,e,{addClass:o[49],removeClass:o[50]})),Ei(wt=Hn.call(null,e,o[2])),Ei(o[44].call(null,e)),In(e,"SMUISelectLeadingIcon:mount",o[84]),In(e,"SMUISelectLeadingIcon:unmount",o[85])],Xi=!0)},p(zt,Oi){zt[12]?Jt?Jt.p(zt,Oi):(Jt=jv(zt),Jt.c(),Jt.m(e,n)):Jt&&(Jt.d(1),Jt=null),zt[7]==="filled"?bi||(bi=qv(),bi.c(),bi.m(s,f)):bi&&(bi.d(1),bi=null),zt[7]!=="outlined"&&!zt[8]&&(zt[9]!=null||zt[52].label)?ai?(ai.p(zt,Oi),Oi[0]&896|Oi[1]&2097152&&rt(ai,1)):(ai=Gv(zt),ai.c(),rt(ai,1),ai.m(s,v)):ai&&(Or(),ft(ai,1,1,()=>{ai=null}),Rr()),zt[7]==="outlined"?ht?(ht.p(zt,Oi),Oi[0]&128&&rt(ht,1)):(ht=Hv(zt),ht.c(),rt(ht,1),ht.m(s,c)):ht&&(Or(),ft(ht,1,1,()=>{ht=null}),Rr()),St&&St.p&&(!Xt||Oi[2]&134217728)&&gn(St,It,zt,zt[89],Xt?_n(It,zt[89],Oi,CT):yn(zt[89]),Uv),(!Xt||Oi[1]&4096)&&tu(D,zt[43]),di(P,Qt=en(Ji,[(!Xt||Oi[0]&2048&&R!==(R=zt[11]+"-smui-selected-text"))&&{id:R},(!Xt||Oi[0]&524288&&O!==(O=wi({[zt[19]]:!0,"mdc-select__selected-text":!0})))&&{class:O},{role:"button"},{"aria-haspopup":"listbox"},(!Xt||Oi[0]&2048&&Y!==(Y=zt[11]+"-smui-label"))&&{"aria-labelledby":Y},Oi[1]&4194304&&rr(zt[53],"selectedText$")])),ee&&Rn(ee.update)&&Oi[0]&262144&&ee.update.call(null,zt[18]),di(S,zi=en(gt,[(!Xt||Oi[0]&131072&&he!==(he=wi({[zt[17]]:!0,"mdc-select__selected-text-container":!0})))&&{class:he},Oi[1]&4194304&&rr(zt[53],"selectedTextContainer$")])),re&&Rn(re.update)&&Oi[0]&65536&&re.update.call(null,zt[16]),di(se,Cn=en(ln,[(!Xt||Oi[0]&2097152&&He!==(He=wi({[zt[21]]:!0,"mdc-select__dropdown-icon":!0})))&&{class:He},Oi[1]&4194304&&rr(zt[53],"dropdownIcon$")])),fe&&Rn(fe.update)&&Oi[0]&1048576&&fe.update.call(null,zt[20]),zt[7]!=="outlined"&&zt[5]?Zn?(Zn.p(zt,Oi),Oi[0]&160&&rt(Zn,1)):(Zn=Wv(zt),Zn.c(),rt(Zn,1),Zn.m(s,null)):Zn&&(Or(),ft(Zn,1,1,()=>{Zn=null}),Rr()),di(s,Kr=en(Nr,[(!Xt||Oi[0]&32768&&at!==(at=wi({[zt[15]]:!0,"mdc-select__anchor":!0})))&&{class:at},(!Xt||Oi[0]&1024&&je!==(je=zt[10]?"true":void 0))&&{"aria-required":je},(!Xt||Oi[0]&64&&Fe!==(Fe=zt[6]?"true":void 0))&&{"aria-disabled":Fe},(!Xt||Oi[1]&1)&&{"aria-controls":zt[31]},(!Xt||Oi[1]&1)&&{"aria-describedby":zt[31]},Oi[0]&536870912&&zt[29],Oi[1]&4194304&&rr(zt[53],"anchor$")])),Dt&&Rn(Dt.update)&&Oi[0]&16384&&Dt.update.call(null,zt[14]);const Ze=Oi[0]&4194304|Oi[1]&4194332?en(At,[Oi[0]&4194304|Oi[1]&4&&{class:wi(tr({[zt[22]]:!0,"mdc-select__menu":!0},zt[33]))},At[1],At[2],Oi[1]&8&&{anchorElement:zt[34]},Oi[1]&16&&{anchorCorner:zt[35]},Oi[1]&4194304&&Xr(rr(zt[53],"menu$"))]):{};Oi[0]&16777216|Oi[1]&4194400|Oi[2]&134217728&&(Ze.$$scope={dirty:Oi,ctx:zt}),!li&&Oi[1]&2&&(li=!0,Ze.open=zt[32],eu(()=>li=!1)),Mt.$set(Ze),di(e,Jn=en(rn,[(!Xt||Oi[0]&67119050|Oi[1]&2097154&&Et!==(Et=wi(tr({[zt[3]]:!0,"mdc-select":!0,"mdc-select--required":zt[10],"mdc-select--disabled":zt[6],"mdc-select--filled":zt[7]==="filled","mdc-select--outlined":zt[7]==="outlined","smui-select--standard":zt[7]==="standard","mdc-select--with-leading-icon":zt[45](zt[13])?zt[52].leadingIcon:zt[13],"mdc-select--no-label":zt[8]||zt[9]==null&&!zt[52].label,"mdc-select--invalid":zt[1],"mdc-select--activated":zt[32],"mdc-data-table__pagination-rows-per-page-select":zt[46]==="data-table:pagination"},zt[26]))))&&{class:Et},(!Xt||Oi[0]&134217744&&Gt!==(Gt=Object.entries(zt[27]).map(Kv).concat([zt[4]]).join(" ")))&&{style:Gt},Oi[1]&4194304&&_s(zt[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])])),Je&&Rn(Je.update)&&Oi[0]&128&&Je.update.call(null,{ripple:zt[7]==="filled",unbounded:!1,addClass:zt[49],removeClass:zt[50],addStyle:zt[51]}),wt&&Rn(wt.update)&&Oi[0]&4&&wt.update.call(null,zt[2]),zt[52].helperText?Ln?(Ln.p(zt,Oi),Oi[1]&2097152&&rt(Ln,1)):(Ln=Xv(zt),Ln.c(),rt(Ln,1),Ln.m(ni.parentNode,ni)):Ln&&(Or(),ft(Ln,1,1,()=>{Ln=null}),Rr())},i(zt){Xt||(rt(ai),rt(ht),rt(St,zt),rt(Zn),rt(Mt.$$.fragment,zt),rt(Ln),Xt=!0)},o(zt){ft(ai),ft(ht),ft(St,zt),ft(Zn),ft(Mt.$$.fragment,zt),ft(Ln),Xt=!1},d(zt){zt&&Qe(e),Jt&&Jt.d(),bi&&bi.d(),ai&&ai.d(),ht&&ht.d(),St&&St.d(zt),o[69](null),Zn&&Zn.d(),o[71](null),ji(Mt),o[83](null),zt&&Qe(Pt),Ln&&Ln.d(zt),zt&&Qe(ni),Xi=!1,Tr(ei)}}}let FT=0;function UT(o){const e=o.currentTarget.getBoundingClientRect();return(NT(o)?o.touches[0].clientX:o.clientX)-e.left}function NT(o){return"touches"in o}const Kv=([o,e])=>`${o}: ${e};`;function VT(o,e,n){const s=["use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","getUseDefaultValidation","setUseDefaultValidation","focus","layout","getElement"];let f=xi(e,s),v,c,{$$slots:h={},$$scope:S}=e;const P=Cy(h),D=$n(Yn());let R=()=>{};function O(De){return De===R}let{use:Y=[]}=e,{class:ee=""}=e,{style:he=""}=e,{ripple:re=!0}=e,{disabled:ve=!1}=e,{variant:se="standard"}=e,{noLabel:we=!1}=e,{label:Ge=void 0}=e,{value:Ue=""}=e,{key:He=De=>De}=e,{dirty:fe=!1}=e,{invalid:ut=R}=e,{updateInvalid:at=O(ut)}=e;const je=O(ut);O(ut)&&(ut=!1);let{required:Fe=!1}=e,{inputId:Dt="SMUI-select-"+FT++}=e,{hiddenInput:qe=!1}=e,{withLeadingIcon:Mt=R}=e,{anchor$use:li=[]}=e,{anchor$class:Et=""}=e,{selectedTextContainer$use:Gt=[]}=e,{selectedTextContainer$class:Je=""}=e,{selectedText$use:wt=[]}=e,{selectedText$class:Pt=""}=e,{dropdownIcon$use:ni=[]}=e,{dropdownIcon$class:Xt=""}=e,{menu$class:Xi=""}=e,ei,Jt,bi={},ai={},ht,It={},St,Ji=-1,Qt,gt=Dr("SMUI:addLayoutListener"),zi,ln=!1,Cn={},Zn,Nr,Kr=!1,At,Bi=Dr("SMUI:select:context"),Nn,rn,Jn,Ln,zt;sr("SMUI:list:role",""),sr("SMUI:list:nav",!1);const Oi=Yl("");Ho(o,Oi,De=>n(43,v=De)),sr("SMUI:select:selectedText",Oi);const Ze=Yl(Ue);Ho(o,Ze,De=>n(91,c=De)),sr("SMUI:select:value",Ze);let Bt=Ji;gt&&(zi=gt(sa)),Fo(()=>(n(23,Jt=new eT({setSelectedText:De=>{Oh(Oi,v=De,v)},isSelectAnchorFocused:()=>document.activeElement===ht,getSelectAnchorAttr:Ar,setSelectAnchorAttr:yi,removeSelectAnchorAttr:On,addMenuClass:vo,removeMenuClass:aa,openMenu:()=>{n(32,ln=!0)},closeMenu:()=>{n(32,ln=!1)},getAnchorElement:()=>ht,setMenuAnchorElement:De=>{n(34,Zn=De)},setMenuAnchorCorner:De=>{n(35,Nr=De)},setMenuWrapFocus:De=>{n(36,Kr=De)},getSelectedIndex:()=>Ji,setSelectedIndex:De=>{n(62,Bt=De),n(24,Ji=De),n(0,Ue=xn()[Ji])},focusMenuItemAtIndex:De=>{At.focusItemAtIndex(De)},getMenuItemCount:()=>At.items.length,getMenuItemValues:()=>xn().map(He),getMenuItemTextAtIndex:De=>At.getPrimaryTextAtIndex(De),isTypeaheadInProgress:()=>At.typeaheadInProgress,typeaheadMatchItem:(De,Yt)=>At.typeaheadMatchItem(De,Yt),addClass:Vn,removeClass:Wn,hasClass:Ki,setRippleCenter:De=>Ln&&Ln.setRippleCenter(De),activateBottomLine:()=>Ln&&Ln.activate(),deactivateBottomLine:()=>Ln&&Ln.deactivate(),notifyChange:De=>{n(54,fe=!0),at&&n(1,ut=!Jt.isValid()),Un(Io(),"SMUISelect:change",{value:Ue,index:Ji},void 0,!0)},hasOutline:()=>!!zt,notchOutline:De=>zt&&zt.notch(De),closeOutline:()=>zt&&zt.closeNotch(),hasLabel:()=>!!Jn,floatLabel:De=>Jn&&Jn.float(De),getLabelWidth:()=>Jn?Jn.getWidth():0,setLabelRequired:De=>Jn&&Jn.setRequired(De)},{get helperText(){return rn},get leadingIcon(){return Nn}})),n(24,Ji=xn().indexOf(Ue)),Jt.init(),co(je),()=>{Jt.destroy()})),eh(()=>{zi&&zi()});function Ki(De){return De in bi?bi[De]:Io().classList.contains(De)}function Vn(De){bi[De]||n(26,bi[De]=!0,bi)}function Wn(De){(!(De in bi)||bi[De])&&n(26,bi[De]=!1,bi)}function _o(De,Yt){ai[De]!=Yt&&(Yt===""||Yt==null?(delete ai[De],n(27,ai)):n(27,ai[De]=Yt,ai))}function vo(De){Cn[De]||n(33,Cn[De]=!0,Cn)}function aa(De){(!(De in Cn)||Cn[De])&&n(33,Cn[De]=!1,Cn)}function Ar(De){var Yt;return De in It?(Yt=It[De])!==null&&Yt!==void 0?Yt:null:Io().getAttribute(De)}function yi(De,Yt){It[De]!==Yt&&n(29,It[De]=Yt,It)}function On(De){(!(De in It)||It[De]!=null)&&n(29,It[De]=void 0,It)}function xn(){return At.getOrderedList().map(De=>De.getValue())}function ro(){return Jt.getUseDefaultValidation()}function co(De){Jt.setUseDefaultValidation(De)}function dn(){ht.focus()}function sa(){Jt.layout()}function Io(){return ei}function xr(De){df.call(this,o,De)}function ne(De){df.call(this,o,De)}function ue(De){Zi[De?"unshift":"push"](()=>{Jn=De,n(40,Jn)})}function pe(De){Zi[De?"unshift":"push"](()=>{Jn=De,n(40,Jn)})}function Se(De){Zi[De?"unshift":"push"](()=>{zt=De,n(42,zt)})}function ze(De){Zi[De?"unshift":"push"](()=>{St=De,n(30,St)})}function $e(De){Zi[De?"unshift":"push"](()=>{Ln=De,n(41,Ln)})}function tt(De){Zi[De?"unshift":"push"](()=>{ht=De,n(28,ht)})}const Ie=()=>Jt&&Jt.handleFocus(),Ne=()=>Jt&&Jt.handleBlur(),mt=De=>{ht.focus(),Jt&&Jt.handleClick(UT(De))},ce=De=>Jt&&Jt.handleKeydown(De);function W(De){Ji=De,n(24,Ji)}const X=De=>n(37,At=De.detail);function le(De){ln=De,n(32,ln)}const me=De=>Jt&&Jt.handleMenuItemAction(De.detail.index),Te=()=>Jt&&Jt.handleMenuClosing(),xe=()=>Jt&&Jt.handleMenuClosed(),Le=()=>Jt&&Jt.handleMenuOpened();function Me(De){Zi[De?"unshift":"push"](()=>{ei=De,n(25,ei)})}const Pe=De=>n(38,Nn=De.detail),yt=()=>n(38,Nn=void 0),st=De=>n(31,Qt=De.detail),_t=De=>n(39,rn=De.detail),si=()=>{n(31,Qt=void 0),n(39,rn=void 0)};return o.$$set=De=>{e=Ct(Ct({},e),Qn(De)),n(53,f=xi(e,s)),"use"in De&&n(2,Y=De.use),"class"in De&&n(3,ee=De.class),"style"in De&&n(4,he=De.style),"ripple"in De&&n(5,re=De.ripple),"disabled"in De&&n(6,ve=De.disabled),"variant"in De&&n(7,se=De.variant),"noLabel"in De&&n(8,we=De.noLabel),"label"in De&&n(9,Ge=De.label),"value"in De&&n(0,Ue=De.value),"key"in De&&n(55,He=De.key),"dirty"in De&&n(54,fe=De.dirty),"invalid"in De&&n(1,ut=De.invalid),"updateInvalid"in De&&n(56,at=De.updateInvalid),"required"in De&&n(10,Fe=De.required),"inputId"in De&&n(11,Dt=De.inputId),"hiddenInput"in De&&n(12,qe=De.hiddenInput),"withLeadingIcon"in De&&n(13,Mt=De.withLeadingIcon),"anchor$use"in De&&n(14,li=De.anchor$use),"anchor$class"in De&&n(15,Et=De.anchor$class),"selectedTextContainer$use"in De&&n(16,Gt=De.selectedTextContainer$use),"selectedTextContainer$class"in De&&n(17,Je=De.selectedTextContainer$class),"selectedText$use"in De&&n(18,wt=De.selectedText$use),"selectedText$class"in De&&n(19,Pt=De.selectedText$class),"dropdownIcon$use"in De&&n(20,ni=De.dropdownIcon$use),"dropdownIcon$class"in De&&n(21,Xt=De.dropdownIcon$class),"menu$class"in De&&n(22,Xi=De.menu$class),"$$scope"in De&&n(89,S=De.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&25165825|o.$$.dirty[2]&1&&Bt!==Ji)if(n(62,Bt=Ji),Jt)Jt.setSelectedIndex(Ji,!1,!0);else{const De=xn();Ue!==De[Ji]&&n(0,Ue=De[Ji])}o.$$.dirty[0]&1&&Oh(Ze,c=Ue,c),o.$$.dirty[0]&8388609|o.$$.dirty[1]&16777216&&Jt&&Jt.getValue()!==He(Ue)&&Jt.setValue(He(Ue)),o.$$.dirty[0]&8388672&&Jt&&Jt.getDisabled()!==ve&&Jt.setDisabled(ve),o.$$.dirty[0]&8388610|o.$$.dirty[1]&41943040&&Jt&&fe&&Jt.isValid()!==!ut&&(at?n(1,ut=!Jt.isValid()):Jt.setValid(!ut)),o.$$.dirty[0]&8389632&&Jt&&Jt.getRequired()!==Fe&&Jt.setRequired(Fe)},[Ue,ut,Y,ee,he,re,ve,se,we,Ge,Fe,Dt,qe,Mt,li,Et,Gt,Je,wt,Pt,ni,Xt,Xi,Jt,Ji,ei,bi,ai,ht,It,St,Qt,ln,Cn,Zn,Nr,Kr,At,Nn,rn,Jn,Ln,zt,v,D,O,Bi,Oi,Ze,Vn,Wn,_o,P,f,fe,He,at,ro,co,dn,sa,Io,Bt,h,xr,ne,ue,pe,Se,ze,$e,tt,Ie,Ne,mt,ce,W,X,le,me,Te,xe,Le,Me,Pe,yt,st,_t,si,S]}class jT extends Tn{constructor(e){super(),An(this,e,VT,BT,Sn,{use:2,class:3,style:4,ripple:5,disabled:6,variant:7,noLabel:8,label:9,value:0,key:55,dirty:54,invalid:1,updateInvalid:56,required:10,inputId:11,hiddenInput:12,withLeadingIcon:13,anchor$use:14,anchor$class:15,selectedTextContainer$use:16,selectedTextContainer$class:17,selectedText$use:18,selectedText$class:19,dropdownIcon$use:20,dropdownIcon$class:21,menu$class:22,getUseDefaultValidation:57,setUseDefaultValidation:58,focus:59,layout:60,getElement:61},null,[-1,-1,-1,-1])}get getUseDefaultValidation(){return this.$$.ctx[57]}get setUseDefaultValidation(){return this.$$.ctx[58]}get focus(){return this.$$.ctx[59]}get layout(){return this.$$.ctx[60]}get getElement(){return this.$$.ctx[61]}}function qT(o){let e;const n=o[11].default,s=mn(n,o,o[13],null);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v&8192)&&gn(s,n,f,f[13],e?_n(n,f[13],v,null):yn(f[13]),null)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function GT(o){let e,n;const s=[{use:o[3]},{"data-value":o[0]},{value:o[0]},{selected:o[2]},o[6]];let f={$$slots:{default:[qT]},$$scope:{ctx:o}};for(let v=0;v<s.length;v+=1)f=Ct(f,s[v]);return e=new vf({props:f}),o[12](e),{c(){Ni(e.$$.fragment)},l(v){$i(e.$$.fragment,v)},m(v,c){Vi(e,v,c),n=!0},p(v,[c]){const h=c&77?en(s,[c&8&&{use:v[3]},c&1&&{"data-value":v[0]},c&1&&{value:v[0]},c&4&&{selected:v[2]},c&64&&Xr(v[6])]):{};c&8192&&(h.$$scope={dirty:c,ctx:v}),e.$set(h)},i(v){n||(rt(e.$$.fragment,v),n=!0)},o(v){ft(e.$$.fragment,v),n=!1},d(v){o[12](null),ji(e,v)}}}function HT(o,e,n){let s,f;const v=["use","class","value","getElement"];let c=xi(e,v),h,S,{$$slots:P={},$$scope:D}=e;const R=$n(Yn());let{use:O=[]}=e;const Y="";let{value:ee=""}=e,he;const re=Dr("SMUI:select:selectedText");Ho(o,re,Ue=>n(14,h=Ue));const ve=Dr("SMUI:select:value");Ho(o,ve,Ue=>n(10,S=Ue)),sr("SMUI:list:item:role","option"),Fo(se),eh(se);function se(){f&&he&&Oh(re,h=he.getPrimaryText(),h)}function we(){return he.getElement()}function Ge(Ue){Zi[Ue?"unshift":"push"](()=>{he=Ue,n(1,he)})}return o.$$set=Ue=>{e=Ct(Ct({},e),Qn(Ue)),n(6,c=xi(e,v)),"use"in Ue&&n(7,O=Ue.use),"value"in Ue&&n(0,ee=Ue.value),"$$scope"in Ue&&n(13,D=Ue.$$scope)},o.$$.update=()=>{o.$$.dirty&128&&n(3,s=[R,...O]),o.$$.dirty&1025&&n(2,f=ee!=null&&ee!==""&&S===ee)},[ee,he,f,s,re,ve,c,O,Y,we,S,P,Ge,D]}class ZT extends Tn{constructor(e){super(),An(this,e,HT,GT,Sn,{use:7,class:8,value:0,getElement:9})}get class(){return this.$$.ctx[8]}get getElement(){return this.$$.ctx[9]}}const WT=ZT;function Jv(o,e,n){const s=o.slice();return s[6]=e[n],s}function XT(o){let e=o[6].title+"",n;return{c(){n=pa(e)},l(s){n=fa(s,e)},m(s,f){Ut(s,n,f)},p:Yo,d(s){s&&Qe(n)}}}function Yv(o){let e,n;return e=new WT({props:{value:o[6].uri,$$slots:{default:[XT]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&512&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function KT(o){let e,n,s=Sr.styles,f=[];for(let c=0;c<s.length;c+=1)f[c]=Yv(Jv(o,s,c));const v=c=>ft(f[c],1,1,()=>{f[c]=null});return{c(){for(let c=0;c<f.length;c+=1)f[c].c();e=bn()},l(c){for(let h=0;h<f.length;h+=1)f[h].l(c);e=bn()},m(c,h){for(let S=0;S<f.length;S+=1)f[S].m(c,h);Ut(c,e,h),n=!0},p(c,h){if(h&0){s=Sr.styles;let S;for(S=0;S<s.length;S+=1){const P=Jv(c,s,S);f[S]?(f[S].p(P,h),rt(f[S],1)):(f[S]=Yv(P),f[S].c(),rt(f[S],1),f[S].m(e.parentNode,e))}for(Or(),S=s.length;S<f.length;S+=1)v(S);Rr()}},i(c){if(!n){for(let h=0;h<s.length;h+=1)rt(f[h]);n=!0}},o(c){f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)ft(f[h]);n=!1},d(c){Mm(f,c),c&&Qe(e)}}}function JT(o){let e,n,s,f;function v(h){o[1](h)}let c={label:"Map theme",$$slots:{default:[KT]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.value=o[0]),n=new jT({props:c}),Zi.push(()=>$l(n,"value",v)),{c(){e=_i("div"),Ni(n.$$.fragment),this.h()},l(h){e=vi(h,"DIV",{class:!0});var S=mi(e);$i(n.$$.fragment,S),S.forEach(Qe),this.h()},h(){ii(e,"class","style-switcher svelte-gac6mv")},m(h,S){Ut(h,e,S),Vi(n,e,null),f=!0},p(h,[S]){const P={};S&512&&(P.$$scope={dirty:S,ctx:h}),!s&&S&1&&(s=!0,P.value=h[0],eu(()=>s=!1)),n.$set(P)},i(h){f||(rt(n.$$.fragment,h),f=!0)},o(h){ft(n.$$.fragment,h),f=!1},d(h){h&&Qe(e),ji(n)}}}function YT(o,e,n){let s,f;Ho(o,_f,P=>n(2,s=P)),Ho(o,Py,P=>n(3,f=P));const v=Jb();let c=f.uri;const h=()=>{!s||(s.setStyle(c),s.on("styledata",()=>{v("change")}))};function S(P){c=P,n(0,c)}return o.$$.update=()=>{o.$$.dirty&1&&h()},[c,S]}class QT extends Tn{constructor(e){super(),An(this,e,YT,JT,Sn,{})}}function Qv(o,e,n){const s=o.slice();return s[13]=e[n],s}function $v(o){let e,n,s,f;return e=new Q0({props:{$$slots:{default:[nA]},$$scope:{ctx:o}}}),s=new _2({props:{$$slots:{default:[fA]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment),n=qn(),Ni(s.$$.fragment)},l(v){$i(e.$$.fragment,v),n=Gn(v),$i(s.$$.fragment,v)},m(v,c){Vi(e,v,c),Ut(v,n,c),Vi(s,v,c),f=!0},p(v,c){const h={};c&65548&&(h.$$scope={dirty:c,ctx:v}),e.$set(h);const S={};c&65662&&(S.$$scope={dirty:c,ctx:v}),s.$set(S)},i(v){f||(rt(e.$$.fragment,v),rt(s.$$.fragment,v),f=!0)},o(v){ft(e.$$.fragment,v),ft(s.$$.fragment,v),f=!1},d(v){ji(e,v),v&&Qe(n),ji(s,v)}}}function $T(o){let e,n,s;function f(c){o[10](c)}let v={};return o[2]!==void 0&&(v.checked=o[2]),e=new i1({props:v}),Zi.push(()=>$l(e,"checked",f)),{c(){Ni(e.$$.fragment)},l(c){$i(e.$$.fragment,c)},m(c,h){Vi(e,c,h),s=!0},p(c,h){const S={};!n&&h&4&&(n=!0,S.checked=c[2],eu(()=>n=!1)),e.$set(S)},i(c){s||(rt(e.$$.fragment,c),s=!0)},o(c){ft(e.$$.fragment,c),s=!1},d(c){ji(e,c)}}}function eA(o){let e,n;return{c(){e=_i("span"),n=pa("Show only rendered"),this.h()},l(s){e=vi(s,"SPAN",{slot:!0});var f=mi(e);n=fa(f,"Show only rendered"),f.forEach(Qe),this.h()},h(){ii(e,"slot","label")},m(s,f){Ut(s,e,f),sn(e,n)},p:Yo,d(s){s&&Qe(e)}}}function tA(o){let e,n,s;function f(c){o[11](c)}let v={};return o[3]!==void 0&&(v.checked=o[3]),e=new i1({props:v}),Zi.push(()=>$l(e,"checked",f)),{c(){Ni(e.$$.fragment)},l(c){$i(e.$$.fragment,c)},m(c,h){Vi(e,c,h),s=!0},p(c,h){const S={};!n&&h&8&&(n=!0,S.checked=c[3],eu(()=>n=!1)),e.$set(S)},i(c){s||(rt(e.$$.fragment,c),s=!0)},o(c){ft(e.$$.fragment,c),s=!1},d(c){ji(e,c)}}}function iA(o){let e,n;return{c(){e=_i("span"),n=pa("Show only water"),this.h()},l(s){e=vi(s,"SPAN",{slot:!0});var f=mi(e);n=fa(f,"Show only water"),f.forEach(Qe),this.h()},h(){ii(e,"slot","label")},m(s,f){Ut(s,e,f),sn(e,n)},p:Yo,d(s){s&&Qe(e)}}}function nA(o){let e,n,s,f,v,c,h,S;return e=new QT({}),e.$on("change",o[7]),s=new yy({props:{$$slots:{label:[eA],default:[$T]},$$scope:{ctx:o}}}),v=new yy({props:{$$slots:{label:[iA],default:[tA]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment),n=qn(),Ni(s.$$.fragment),f=qn(),Ni(v.$$.fragment),c=qn(),h=_i("hr")},l(P){$i(e.$$.fragment,P),n=Gn(P),$i(s.$$.fragment,P),f=Gn(P),$i(v.$$.fragment,P),c=Gn(P),h=vi(P,"HR",{})},m(P,D){Vi(e,P,D),Ut(P,n,D),Vi(s,P,D),Ut(P,f,D),Vi(v,P,D),Ut(P,c,D),Ut(P,h,D),S=!0},p(P,D){const R={};D&65540&&(R.$$scope={dirty:D,ctx:P}),s.$set(R);const O={};D&65544&&(O.$$scope={dirty:D,ctx:P}),v.$set(O)},i(P){S||(rt(e.$$.fragment,P),rt(s.$$.fragment,P),rt(v.$$.fragment,P),S=!0)},o(P){ft(e.$$.fragment,P),ft(s.$$.fragment,P),ft(v.$$.fragment,P),S=!1},d(P){ji(e,P),P&&Qe(n),ji(s,P),P&&Qe(f),ji(v,P),P&&Qe(c),P&&Qe(h)}}}function rA(o){let e,n;return e=new vf({props:{$$slots:{default:[sA]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&65552&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function oA(o){let e,n,s=o[6][o[13].id]&&e0(o);return{c(){s&&s.c(),e=bn()},l(f){s&&s.l(f),e=bn()},m(f,v){s&&s.m(f,v),Ut(f,e,v),n=!0},p(f,v){f[6][f[13].id]?s?(s.p(f,v),v&80&&rt(s,1)):(s=e0(f),s.c(),rt(s,1),s.m(e.parentNode,e)):s&&(Or(),ft(s,1,1,()=>{s=null}),Rr())},i(f){n||(rt(s),n=!0)},o(f){ft(s),n=!1},d(f){s&&s.d(f),f&&Qe(e)}}}function aA(o){let e,n,s=o[5][o[13].id]&&t0(o);return{c(){s&&s.c(),e=bn()},l(f){s&&s.l(f),e=bn()},m(f,v){s&&s.m(f,v),Ut(f,e,v),n=!0},p(f,v){f[5][f[13].id]?s?(s.p(f,v),v&48&&rt(s,1)):(s=t0(f),s.c(),rt(s,1),s.m(e.parentNode,e)):s&&(Or(),ft(s,1,1,()=>{s=null}),Rr())},i(f){n||(rt(s),n=!0)},o(f){ft(s),n=!1},d(f){s&&s.d(f),f&&Qe(e)}}}function sA(o){let e,n;return e=new Gm({props:{layer:o[13]}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&16&&(v.layer=s[13]),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function e0(o){let e,n;return e=new vf({props:{$$slots:{default:[lA]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&65552&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function lA(o){let e,n;return e=new Gm({props:{layer:o[13]}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&16&&(v.layer=s[13]),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function t0(o){let e,n,s,f;const v=[cA,uA],c=[];function h(S,P){return S[3]===!0?0:1}return e=h(o),n=c[e]=v[e](o),{c(){n.c(),s=bn()},l(S){n.l(S),s=bn()},m(S,P){c[e].m(S,P),Ut(S,s,P),f=!0},p(S,P){let D=e;e=h(S),e===D?c[e].p(S,P):(Or(),ft(c[D],1,1,()=>{c[D]=null}),Rr(),n=c[e],n?n.p(S,P):(n=c[e]=v[e](S),n.c()),rt(n,1),n.m(s.parentNode,s))},i(S){f||(rt(n),f=!0)},o(S){ft(n),f=!1},d(S){c[e].d(S),S&&Qe(s)}}}function uA(o){let e,n;return e=new vf({props:{$$slots:{default:[hA]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&65552&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function cA(o){let e,n,s=o[6][o[13].id]&&i0(o);return{c(){s&&s.c(),e=bn()},l(f){s&&s.l(f),e=bn()},m(f,v){s&&s.m(f,v),Ut(f,e,v),n=!0},p(f,v){f[6][f[13].id]?s?(s.p(f,v),v&80&&rt(s,1)):(s=i0(f),s.c(),rt(s,1),s.m(e.parentNode,e)):s&&(Or(),ft(s,1,1,()=>{s=null}),Rr())},i(f){n||(rt(s),n=!0)},o(f){ft(s),n=!1},d(f){s&&s.d(f),f&&Qe(e)}}}function hA(o){let e,n;return e=new Gm({props:{layer:o[13]}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&16&&(v.layer=s[13]),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function i0(o){let e,n;return e=new vf({props:{$$slots:{default:[dA]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&65552&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function dA(o){let e,n;return e=new Gm({props:{layer:o[13]}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&16&&(v.layer=s[13]),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function n0(o){let e,n,s,f;const v=[aA,oA,rA],c=[];function h(S,P){return S[2]===!0?0:S[3]===!0?1:2}return e=h(o),n=c[e]=v[e](o),{c(){n.c(),s=bn()},l(S){n.l(S),s=bn()},m(S,P){c[e].m(S,P),Ut(S,s,P),f=!0},p(S,P){let D=e;e=h(S),e===D?c[e].p(S,P):(Or(),ft(c[D],1,1,()=>{c[D]=null}),Rr(),n=c[e],n?n.p(S,P):(n=c[e]=v[e](S),n.c()),rt(n,1),n.m(s.parentNode,s))},i(S){f||(rt(n),f=!0)},o(S){ft(n),f=!1},d(S){c[e].d(S),S&&Qe(s)}}}function r0(o){let e,n,s=o[4],f=[];for(let c=0;c<s.length;c+=1)f[c]=n0(Qv(o,s,c));const v=c=>ft(f[c],1,1,()=>{f[c]=null});return{c(){for(let c=0;c<f.length;c+=1)f[c].c();e=bn()},l(c){for(let h=0;h<f.length;h+=1)f[h].l(c);e=bn()},m(c,h){for(let S=0;S<f.length;S+=1)f[S].m(c,h);Ut(c,e,h),n=!0},p(c,h){if(h&124){s=c[4];let S;for(S=0;S<s.length;S+=1){const P=Qv(c,s,S);f[S]?(f[S].p(P,h),rt(f[S],1)):(f[S]=n0(P),f[S].c(),rt(f[S],1),f[S].m(e.parentNode,e))}for(Or(),S=s.length;S<f.length;S+=1)v(S);Rr()}},i(c){if(!n){for(let h=0;h<s.length;h+=1)rt(f[h]);n=!0}},o(c){f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)ft(f[h]);n=!1},d(c){Mm(f,c),c&&Qe(e)}}}function pA(o){let e=o[1],n,s,f=r0(o);return{c(){f.c(),n=bn()},l(v){f.l(v),n=bn()},m(v,c){f.m(v,c),Ut(v,n,c),s=!0},p(v,c){c&2&&Sn(e,e=v[1])?(Or(),ft(f,1,1,Yo),Rr(),f=r0(v),f.c(),rt(f),f.m(n.parentNode,n)):f.p(v,c)},i(v){s||(rt(f),s=!0)},o(v){ft(f),s=!1},d(v){v&&Qe(n),f.d(v)}}}function fA(o){let e,n;return e=new t1({props:{$$slots:{default:[pA]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&65662&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function mA(o){let e,n,s=o[0]&&$v(o);return{c(){s&&s.c(),e=bn()},l(f){s&&s.l(f),e=bn()},m(f,v){s&&s.m(f,v),Ut(f,e,v),n=!0},p(f,[v]){f[0]?s?(s.p(f,v),v&1&&rt(s,1)):(s=$v(f),s.c(),rt(s,1),s.m(e.parentNode,e)):s&&(Or(),ft(s,1,1,()=>{s=null}),Rr())},i(f){n||(rt(s),n=!0)},o(f){ft(s),n=!1},d(f){s&&s.d(f),f&&Qe(e)}}}function gA(o,e,n){let s;Ho(o,_f,re=>n(9,s=re));let f,v=!0,c=!0,h=[],S={},P={},{isLayersTabVisible:D=!1}=e;Sr.legend&&Sr.legend.targets&&(P=Sr.legend.targets);const R=()=>{!s||(s.isStyleLoaded()?(n(1,f=s.getStyle()),n(4,h=f.layers),O()):s.on("load",R))},O=()=>{if(n(5,S={}),s&&s.queryRenderedFeatures){const re=s.queryRenderedFeatures();for(let ve of re)n(5,S[ve.layer.id]=ve.layer,S)}},Y=()=>{R()};function ee(re){v=re,n(2,v)}function he(re){c=re,n(3,c)}return o.$$set=re=>{"isLayersTabVisible"in re&&n(0,D=re.isLayersTabVisible)},o.$$.update=()=>{o.$$.dirty&512&&s&&(s.on("moveend",R),s.on("styledata",R)),o.$$.dirty&2&&R(),o.$$.dirty&4&&R(),o.$$.dirty&8&&R()},[D,f,v,c,h,S,P,Y,R,s,ee,he]}class yA extends Tn{constructor(e){super(),An(this,e,gA,mA,Sn,{isLayersTabVisible:0,updateLayers:8})}get updateLayers(){return this.$$.ctx[8]}}function _A(o){let e,n,s,f,v,c;const h=o[13].default,S=mn(h,o,o[12],null);let P=[{class:n=wi({[o[1]]:!0,"smui-accordion":!0,"smui-accordion--multiple":o[2],"smui-accordion--with-open-dialog":o[4]})},o[10]],D={};for(let R=0;R<P.length;R+=1)D=Ct(D,P[R]);return{c(){e=_i("div"),S&&S.c(),this.h()},l(R){e=vi(R,"DIV",{class:!0});var O=mi(e);S&&S.l(O),O.forEach(Qe),this.h()},h(){di(e,D)},m(R,O){Ut(R,e,O),S&&S.m(e,null),o[14](e),f=!0,v||(c=[Ei(s=Hn.call(null,e,o[0])),Ei(o[5].call(null,e)),In(e,"SMUIAccordionPanel:mount",o[6]),In(e,"SMUIAccordionPanel:unmount",o[7]),In(e,"SMUIAccordionPanel:activate",o[8]),In(e,"SMUIAccordionPanel:opening",o[9]),In(e,"SMUIDialog:opening",o[15],!0),In(e,"SMUIDialog:closed",o[16],!0)],v=!0)},p(R,[O]){S&&S.p&&(!f||O&4096)&&gn(S,h,R,R[12],f?_n(h,R[12],O,null):yn(R[12]),null),di(e,D=en(P,[(!f||O&22&&n!==(n=wi({[R[1]]:!0,"smui-accordion":!0,"smui-accordion--multiple":R[2],"smui-accordion--with-open-dialog":R[4]})))&&{class:n},O&1024&&R[10]])),s&&Rn(s.update)&&O&1&&s.update.call(null,R[0])},i(R){f||(rt(S,R),f=!0)},o(R){ft(S,R),f=!1},d(R){R&&Qe(e),S&&S.d(R),o[14](null),v=!1,Tr(c)}}}function vA(o,e,n){const s=["use","class","multiple","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,{multiple:D=!1}=e,R,O=new Set,Y=!1;function ee(He){const fe=He.detail;if(He.stopPropagation(),!D&&fe.open){const ut=Array.from(O).find(at=>at.open);ut&&ut.setOpen(!1)}O.add(fe)}function he(He){const fe=He.detail;He.stopPropagation(),O.delete(fe)}function re(He){const{accessor:fe}=He.detail;if(!D&&!fe.open){const ut=Array.from(O).find(at=>at.open);ut&&ut.setOpen(!1)}fe.setOpen(!fe.open)}function ve(He){const{accessor:fe}=He.detail;D||Array.from(O).filter(at=>at!==fe&&at.open).forEach(at=>at.setOpen(!1))}function se(){return R}function we(He){Zi[He?"unshift":"push"](()=>{R=He,n(3,R)})}const Ge=()=>n(4,Y=!0),Ue=()=>n(4,Y=!1);return o.$$set=He=>{e=Ct(Ct({},e),Qn(He)),n(10,f=xi(e,s)),"use"in He&&n(0,S=He.use),"class"in He&&n(1,P=He.class),"multiple"in He&&n(2,D=He.multiple),"$$scope"in He&&n(12,c=He.$$scope)},[S,P,D,R,Y,h,ee,he,re,ve,f,se,c,v,we,Ge,Ue]}class bA extends Tn{constructor(e){super(),An(this,e,vA,_A,Sn,{use:0,class:1,multiple:2,getElement:11})}get getElement(){return this.$$.ctx[11]}}function xA(o){let e,n,s,f,v,c;const h=o[12].default,S=mn(h,o,o[11],null);let P=[{class:n=wi({[o[1]]:!0,"smui-paper":!0,"smui-paper--raised":o[2]==="raised","smui-paper--unelevated":o[2]==="unelevated","smui-paper--outlined":o[2]==="outlined",["smui-paper--elevation-z"+o[5]]:o[5]!==0&&o[2]==="raised","smui-paper--rounded":!o[3],["smui-paper--color-"+o[4]]:o[4]!=="default","smui-paper-transition":o[6]})},o[9]],D={};for(let R=0;R<P.length;R+=1)D=Ct(D,P[R]);return{c(){e=_i("div"),S&&S.c(),this.h()},l(R){e=vi(R,"DIV",{class:!0});var O=mi(e);S&&S.l(O),O.forEach(Qe),this.h()},h(){di(e,D)},m(R,O){Ut(R,e,O),S&&S.m(e,null),o[13](e),f=!0,v||(c=[Ei(s=Hn.call(null,e,o[0])),Ei(o[8].call(null,e))],v=!0)},p(R,[O]){S&&S.p&&(!f||O&2048)&&gn(S,h,R,R[11],f?_n(h,R[11],O,null):yn(R[11]),null),di(e,D=en(P,[(!f||O&126&&n!==(n=wi({[R[1]]:!0,"smui-paper":!0,"smui-paper--raised":R[2]==="raised","smui-paper--unelevated":R[2]==="unelevated","smui-paper--outlined":R[2]==="outlined",["smui-paper--elevation-z"+R[5]]:R[5]!==0&&R[2]==="raised","smui-paper--rounded":!R[3],["smui-paper--color-"+R[4]]:R[4]!=="default","smui-paper-transition":R[6]})))&&{class:n},O&512&&R[9]])),s&&Rn(s.update)&&O&1&&s.update.call(null,R[0])},i(R){f||(rt(S,R),f=!0)},o(R){ft(S,R),f=!1},d(R){R&&Qe(e),S&&S.d(R),o[13](null),v=!1,Tr(c)}}}function wA(o,e,n){const s=["use","class","variant","square","color","elevation","transition","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,{variant:D="raised"}=e,{square:R=!1}=e,{color:O="default"}=e,{elevation:Y=1}=e,{transition:ee=!1}=e,he;function re(){return he}function ve(se){Zi[se?"unshift":"push"](()=>{he=se,n(7,he)})}return o.$$set=se=>{e=Ct(Ct({},e),Qn(se)),n(9,f=xi(e,s)),"use"in se&&n(0,S=se.use),"class"in se&&n(1,P=se.class),"variant"in se&&n(2,D=se.variant),"square"in se&&n(3,R=se.square),"color"in se&&n(4,O=se.color),"elevation"in se&&n(5,Y=se.elevation),"transition"in se&&n(6,ee=se.transition),"$$scope"in se&&n(11,c=se.$$scope)},[S,P,D,R,O,Y,ee,he,h,f,re,c,v,ve]}class EA extends Tn{constructor(e){super(),An(this,e,wA,xA,Sn,{use:0,class:1,variant:2,square:3,color:4,elevation:5,transition:6,getElement:10})}get getElement(){return this.$$.ctx[10]}}var IA=ns({class:"smui-paper__content",component:yp});ns({class:"smui-paper__title",component:pw});ns({class:"smui-paper__subtitle",component:fw});function SA(o){let e;const n=o[23].default,s=mn(n,o,o[25],null);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v&33554432)&&gn(s,n,f,f[25],e?_n(n,f[25],v,null):yn(f[25]),null)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function TA(o){let e,n;const s=[{use:o[11]},{class:wi({[o[1]]:!0,"smui-accordion__panel":!0,"smui-accordion__panel--open":o[0],"smui-accordion__panel--opened":o[10],"smui-accordion__panel--disabled":o[5],"smui-accordion__panel--non-interactive":o[6],"smui-accordion__panel--raised":o[2]==="raised","smui-accordion__panel--extend":o[7],["smui-accordion__panel--elevation-z"+(o[7]&&o[0]?o[8]:o[4])]:o[4]!==0&&o[2]==="raised"||o[8]!==0&&o[2]==="raised"&&o[7]&&o[0]})},{color:o[3]},{variant:o[2]==="raised"?"unelevated":o[2]},o[16]];let f={$$slots:{default:[SA]},$$scope:{ctx:o}};for(let v=0;v<s.length;v+=1)f=Ct(f,s[v]);return e=new EA({props:f}),o[24](e),e.$on("SMUIAccordionHeader:activate",o[15]),{c(){Ni(e.$$.fragment)},l(v){$i(e.$$.fragment,v)},m(v,c){Vi(e,v,c),n=!0},p(v,[c]){const h=c&69119?en(s,[c&2048&&{use:v[11]},c&1527&&{class:wi({[v[1]]:!0,"smui-accordion__panel":!0,"smui-accordion__panel--open":v[0],"smui-accordion__panel--opened":v[10],"smui-accordion__panel--disabled":v[5],"smui-accordion__panel--non-interactive":v[6],"smui-accordion__panel--raised":v[2]==="raised","smui-accordion__panel--extend":v[7],["smui-accordion__panel--elevation-z"+(v[7]&&v[0]?v[8]:v[4])]:v[4]!==0&&v[2]==="raised"||v[8]!==0&&v[2]==="raised"&&v[7]&&v[0]})},c&8&&{color:v[3]},c&4&&{variant:v[2]==="raised"?"unelevated":v[2]},c&65536&&Xr(v[16])]):{};c&33554432&&(h.$$scope={dirty:c,ctx:v}),e.$set(h)},i(v){n||(rt(e.$$.fragment,v),n=!0)},o(v){ft(e.$$.fragment,v),n=!1},d(v){o[24](null),ji(e,v)}}}function AA(o,e,n){let s;const f=["use","class","variant","color","elevation","open","disabled","nonInteractive","extend","extendedElevation","isOpen","setOpen","getElement"];let v=xi(e,f),c,h,S,{$$slots:P={},$$scope:D}=e;const R=$n(Yn());let{use:O=[]}=e,{class:Y=""}=e,{variant:ee="raised"}=e,{color:he="default"}=e,{elevation:re=1}=e,{open:ve=!1}=e,{disabled:se=!1}=e,{nonInteractive:we=!1}=e,{extend:Ge=!1}=e,{extendedElevation:Ue=3}=e,He,fe,ut=ve;const at=Yl(se);Ho(o,at,Je=>n(28,S=Je)),sr("SMUI:accordion:panel:disabled",at);const je=Yl(we);Ho(o,je,Je=>n(27,h=Je)),sr("SMUI:accordion:panel:nonInteractive",je);const Fe=Yl(ve);Ho(o,Fe,Je=>n(26,c=Je)),sr("SMUI:accordion:panel:open",Fe);let Dt=ve;Fo(()=>(n(21,fe={get open(){return ve},setOpen:li}),Array.from(Et().children).forEach(Je=>{Je.classList.contains("smui-paper__content")&&Je.setAttribute("aria-hidden",ve?"false":"true")}),Un(Et(),"SMUIAccordionPanel:mount",fe),()=>{Un(Et(),"SMUIAccordionPanel:unmount",fe)}));function qe(Je){Je.stopPropagation(),!(se||we)&&Un(Et(),"SMUIAccordionPanel:activate",{accessor:fe,event:Je})}function Mt(){return ve}function li(Je){n(0,ve=Je)}function Et(){return He.getElement()}function Gt(Je){Zi[Je?"unshift":"push"](()=>{He=Je,n(9,He)})}return o.$$set=Je=>{e=Ct(Ct({},e),Qn(Je)),n(16,v=xi(e,f)),"use"in Je&&n(17,O=Je.use),"class"in Je&&n(1,Y=Je.class),"variant"in Je&&n(2,ee=Je.variant),"color"in Je&&n(3,he=Je.color),"elevation"in Je&&n(4,re=Je.elevation),"open"in Je&&n(0,ve=Je.open),"disabled"in Je&&n(5,se=Je.disabled),"nonInteractive"in Je&&n(6,we=Je.nonInteractive),"extend"in Je&&n(7,Ge=Je.extend),"extendedElevation"in Je&&n(8,Ue=Je.extendedElevation),"$$scope"in Je&&n(25,D=Je.$$scope)},o.$$.update=()=>{o.$$.dirty&131072&&n(11,s=[R,...O]),o.$$.dirty&32&&Oh(at,S=se,S),o.$$.dirty&64&&Oh(je,h=we,h),o.$$.dirty&1&&Oh(Fe,c=ve,c),o.$$.dirty&6291457&&Dt!==ve&&(n(22,Dt=ve),Array.from(Et().children).forEach(Je=>{if(Je.classList.contains("smui-paper__content")){const wt=Je;if(ve){wt.classList.add("smui-accordion__content--no-transition"),wt.classList.add("smui-accordion__content--force-open");const{height:Pt}=wt.getBoundingClientRect();wt.classList.remove("smui-accordion__content--force-open"),wt.getBoundingClientRect(),wt.classList.remove("smui-accordion__content--no-transition"),wt.style.height=Pt+"px",wt.addEventListener("transitionend",()=>{wt&&(wt.style.height=""),n(10,ut=!0),Un(Et(),"SMUIAccordionPanel:opened",{accessor:fe})},{once:!0})}else wt.style.height=wt.getBoundingClientRect().height+"px",wt.getBoundingClientRect(),requestAnimationFrame(()=>{wt&&(wt.style.height=""),Un(Et(),"SMUIAccordionPanel:closed",{accessor:fe})}),n(10,ut=!1);wt.setAttribute("aria-hidden",ve?"false":"true")}}),Un(Et(),ve?"SMUIAccordionPanel:opening":"SMUIAccordionPanel:closing",{accessor:fe}))},[ve,Y,ee,he,re,se,we,Ge,Ue,He,ut,s,at,je,Fe,qe,v,O,Mt,li,Et,fe,Dt,P,Gt,D]}class CA extends Tn{constructor(e){super(),An(this,e,AA,TA,Sn,{use:17,class:1,variant:2,color:3,elevation:4,open:0,disabled:5,nonInteractive:6,extend:7,extendedElevation:8,isOpen:18,setOpen:19,getElement:20})}get isOpen(){return this.$$.ctx[18]}get setOpen(){return this.$$.ctx[19]}get getElement(){return this.$$.ctx[20]}}const kA=o=>({}),o0=o=>({}),MA=o=>({}),a0=o=>({});function s0(o){let e;return{c(){e=_i("div"),this.h()},l(n){e=vi(n,"DIV",{class:!0}),mi(e).forEach(Qe),this.h()},h(){ii(e,"class","smui-accordion__header__ripple")},m(n,s){Ut(n,e,s)},d(n){n&&Qe(e)}}}function l0(o){let e,n;const s=o[23].description,f=mn(s,o,o[22],a0);return{c(){e=_i("div"),f&&f.c(),this.h()},l(v){e=vi(v,"DIV",{class:!0});var c=mi(e);f&&f.l(c),c.forEach(Qe),this.h()},h(){ii(e,"class","smui-accordion__header__description")},m(v,c){Ut(v,e,c),f&&f.m(e,null),n=!0},p(v,c){f&&f.p&&(!n||c&4194304)&&gn(f,s,v,v[22],n?_n(s,v[22],c,MA):yn(v[22]),a0)},i(v){n||(rt(f,v),n=!0)},o(v){ft(f,v),n=!1},d(v){v&&Qe(e),f&&f.d(v)}}}function u0(o){let e,n;const s=o[23].icon,f=mn(s,o,o[22],o0);return{c(){e=_i("div"),f&&f.c(),this.h()},l(v){e=vi(v,"DIV",{class:!0});var c=mi(e);f&&f.l(c),c.forEach(Qe),this.h()},h(){ii(e,"class","smui-accordion__header__icon")},m(v,c){Ut(v,e,c),f&&f.m(e,null),n=!0},p(v,c){f&&f.p&&(!n||c&4194304)&&gn(f,s,v,v[22],n?_n(s,v[22],c,kA):yn(v[22]),o0)},i(v){n||(rt(f,v),n=!0)},o(v){ft(f,v),n=!1},d(v){v&&Qe(e),f&&f.d(v)}}}function LA(o){let e,n,s,f,v,c,h,S,P,D,R,O,Y,ee,he,re=o[3]&&s0();const ve=o[23].default,se=mn(ve,o,o[22],null);let we=o[20].description&&l0(o),Ge=o[20].icon&&u0(o),Ue=[{class:h=wi(tr({[o[1]]:!0,"smui-accordion__header":!0},o[5]))},{style:S=Object.entries(o[6]).map(c0).concat([o[2]]).join(" ")},{role:"button"},{tabindex:P=o[7]?-1:0},{"aria-expanded":D=o[9]?"true":"false"},o[19]],He={};for(let fe=0;fe<Ue.length;fe+=1)He=Ct(He,Ue[fe]);return{c(){e=_i("div"),re&&re.c(),n=qn(),s=_i("div"),se&&se.c(),v=qn(),we&&we.c(),c=qn(),Ge&&Ge.c(),this.h()},l(fe){e=vi(fe,"DIV",{class:!0,style:!0,role:!0,tabindex:!0,"aria-expanded":!0});var ut=mi(e);re&&re.l(ut),n=Gn(ut),s=vi(ut,"DIV",{class:!0});var at=mi(s);se&&se.l(at),at.forEach(Qe),v=Gn(ut),we&&we.l(ut),c=Gn(ut),Ge&&Ge.l(ut),ut.forEach(Qe),this.h()},h(){ii(s,"class",f=wi({"smui-accordion__header__title":!0,"smui-accordion__header__title--with-description":o[20].description})),di(e,He)},m(fe,ut){Ut(fe,e,ut),re&&re.m(e,null),sn(e,n),sn(e,s),se&&se.m(s,null),sn(e,v),we&&we.m(e,null),sn(e,c),Ge&&Ge.m(e,null),o[24](e),Y=!0,ee||(he=[Ei(R=Hn.call(null,e,o[0])),Ei(o[10].call(null,e)),Ei(O=$c.call(null,e,{ripple:o[3],unbounded:!1,surface:!o[7],disabled:o[8]||o[7],addClass:o[16],removeClass:o[17],addStyle:o[18]})),In(e,"click",o[14]),In(e,"keydown",o[15])],ee=!0)},p(fe,[ut]){fe[3]?re||(re=s0(),re.c(),re.m(e,n)):re&&(re.d(1),re=null),se&&se.p&&(!Y||ut&4194304)&&gn(se,ve,fe,fe[22],Y?_n(ve,fe[22],ut,null):yn(fe[22]),null),(!Y||ut&1048576&&f!==(f=wi({"smui-accordion__header__title":!0,"smui-accordion__header__title--with-description":fe[20].description})))&&ii(s,"class",f),fe[20].description?we?(we.p(fe,ut),ut&1048576&&rt(we,1)):(we=l0(fe),we.c(),rt(we,1),we.m(e,c)):we&&(Or(),ft(we,1,1,()=>{we=null}),Rr()),fe[20].icon?Ge?(Ge.p(fe,ut),ut&1048576&&rt(Ge,1)):(Ge=u0(fe),Ge.c(),rt(Ge,1),Ge.m(e,null)):Ge&&(Or(),ft(Ge,1,1,()=>{Ge=null}),Rr()),di(e,He=en(Ue,[(!Y||ut&34&&h!==(h=wi(tr({[fe[1]]:!0,"smui-accordion__header":!0},fe[5]))))&&{class:h},(!Y||ut&68&&S!==(S=Object.entries(fe[6]).map(c0).concat([fe[2]]).join(" ")))&&{style:S},{role:"button"},(!Y||ut&128&&P!==(P=fe[7]?-1:0))&&{tabindex:P},(!Y||ut&512&&D!==(D=fe[9]?"true":"false"))&&{"aria-expanded":D},ut&524288&&fe[19]])),R&&Rn(R.update)&&ut&1&&R.update.call(null,fe[0]),O&&Rn(O.update)&&ut&392&&O.update.call(null,{ripple:fe[3],unbounded:!1,surface:!fe[7],disabled:fe[8]||fe[7],addClass:fe[16],removeClass:fe[17],addStyle:fe[18]})},i(fe){Y||(rt(se,fe),rt(we),rt(Ge),Y=!0)},o(fe){ft(se,fe),ft(we),ft(Ge),Y=!1},d(fe){fe&&Qe(e),re&&re.d(),se&&se.d(fe),we&&we.d(),Ge&&Ge.d(),o[24](null),ee=!1,Tr(he)}}}const c0=([o,e])=>`${o}: ${e};`;function PA(o,e,n){const s=["use","class","style","ripple","getElement"];let f=xi(e,s),v,c,h,{$$slots:S={},$$scope:P}=e;const D=Cy(S),R=$n(Yn());let{use:O=[]}=e,{class:Y=""}=e,{style:ee=""}=e,{ripple:he=!0}=e,re,ve={},se={};const we=Dr("SMUI:accordion:panel:disabled");Ho(o,we,qe=>n(8,c=qe));const Ge=Dr("SMUI:accordion:panel:nonInteractive");Ho(o,Ge,qe=>n(7,v=qe));const Ue=Dr("SMUI:accordion:panel:open");Ho(o,Ue,qe=>n(9,h=qe));function He(qe){qe=qe,qe.button===0&&Un(Fe(),"SMUIAccordionHeader:activate",{event:qe})}function fe(qe){qe=qe,qe.key==="Enter"&&Un(Fe(),"SMUIAccordionHeader:activate",{event:qe})}function ut(qe){ve[qe]||n(5,ve[qe]=!0,ve)}function at(qe){(!(qe in ve)||ve[qe])&&n(5,ve[qe]=!1,ve)}function je(qe,Mt){se[qe]!=Mt&&(Mt===""||Mt==null?(delete se[qe],n(6,se)):n(6,se[qe]=Mt,se))}function Fe(){return re}function Dt(qe){Zi[qe?"unshift":"push"](()=>{re=qe,n(4,re)})}return o.$$set=qe=>{e=Ct(Ct({},e),Qn(qe)),n(19,f=xi(e,s)),"use"in qe&&n(0,O=qe.use),"class"in qe&&n(1,Y=qe.class),"style"in qe&&n(2,ee=qe.style),"ripple"in qe&&n(3,he=qe.ripple),"$$scope"in qe&&n(22,P=qe.$$scope)},[O,Y,ee,he,re,ve,se,v,c,h,R,we,Ge,Ue,He,fe,ut,at,je,f,D,Fe,P,S,Dt]}class zA extends Tn{constructor(e){super(),An(this,e,PA,LA,Sn,{use:0,class:1,style:2,ripple:3,getElement:21})}get getElement(){return this.$$.ctx[21]}}const DA=CA,RA=zA;/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Aa={CELL:"mdc-data-table__cell",CELL_NUMERIC:"mdc-data-table__cell--numeric",CONTENT:"mdc-data-table__content",HEADER_CELL:"mdc-data-table__header-cell",HEADER_CELL_LABEL:"mdc-data-table__header-cell-label",HEADER_CELL_SORTED:"mdc-data-table__header-cell--sorted",HEADER_CELL_SORTED_DESCENDING:"mdc-data-table__header-cell--sorted-descending",HEADER_CELL_WITH_SORT:"mdc-data-table__header-cell--with-sort",HEADER_CELL_WRAPPER:"mdc-data-table__header-cell-wrapper",HEADER_ROW:"mdc-data-table__header-row",HEADER_ROW_CHECKBOX:"mdc-data-table__header-row-checkbox",IN_PROGRESS:"mdc-data-table--in-progress",LINEAR_PROGRESS:"mdc-data-table__linear-progress",PAGINATION_ROWS_PER_PAGE_LABEL:"mdc-data-table__pagination-rows-per-page-label",PAGINATION_ROWS_PER_PAGE_SELECT:"mdc-data-table__pagination-rows-per-page-select",PROGRESS_INDICATOR:"mdc-data-table__progress-indicator",ROOT:"mdc-data-table",ROW:"mdc-data-table__row",ROW_CHECKBOX:"mdc-data-table__row-checkbox",ROW_SELECTED:"mdc-data-table__row--selected",SORT_ICON_BUTTON:"mdc-data-table__sort-icon-button",SORT_STATUS_LABEL:"mdc-data-table__sort-status-label",TABLE_CONTAINER:"mdc-data-table__table-container"},h0={ARIA_SELECTED:"aria-selected",ARIA_SORT:"aria-sort"},OA={COLUMN_ID:"data-column-id",ROW_ID:"data-row-id"},cm={CONTENT:"."+Aa.CONTENT,HEADER_CELL:"."+Aa.HEADER_CELL,HEADER_CELL_WITH_SORT:"."+Aa.HEADER_CELL_WITH_SORT,HEADER_ROW:"."+Aa.HEADER_ROW,HEADER_ROW_CHECKBOX:"."+Aa.HEADER_ROW_CHECKBOX,PROGRESS_INDICATOR:"."+Aa.PROGRESS_INDICATOR,ROW:"."+Aa.ROW,ROW_CHECKBOX:"."+Aa.ROW_CHECKBOX,ROW_SELECTED:"."+Aa.ROW_SELECTED,SORT_ICON_BUTTON:"."+Aa.SORT_ICON_BUTTON,SORT_STATUS_LABEL:"."+Aa.SORT_STATUS_LABEL},_d={ARIA_SELECTED:h0.ARIA_SELECTED,ARIA_SORT:h0.ARIA_SORT,DATA_ROW_ID_ATTR:OA.ROW_ID,HEADER_ROW_CHECKBOX_SELECTOR:cm.HEADER_ROW_CHECKBOX,ROW_CHECKBOX_SELECTOR:cm.ROW_CHECKBOX,ROW_SELECTED_SELECTOR:cm.ROW_SELECTED,ROW_SELECTOR:cm.ROW},Sl;(function(o){o.ASCENDING="ascending",o.DESCENDING="descending",o.NONE="none",o.OTHER="other"})(Sl||(Sl={}));/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var BA=function(o){yo(e,o);function e(n){return o.call(this,_r(_r({},e.defaultAdapter),n))||this}return Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},addClassAtRowIndex:function(){},getAttributeByHeaderCellIndex:function(){return""},getHeaderCellCount:function(){return 0},getHeaderCellElements:function(){return[]},getRowCount:function(){return 0},getRowElements:function(){return[]},getRowIdAtIndex:function(){return""},getRowIndexByChildElement:function(){return 0},getSelectedRowCount:function(){return 0},getTableContainerHeight:function(){return 0},getTableHeaderHeight:function(){return 0},isCheckboxAtRowIndexChecked:function(){return!1},isHeaderRowCheckboxChecked:function(){return!1},isRowsSelectable:function(){return!1},notifyRowSelectionChanged:function(){},notifySelectedAll:function(){},notifySortAction:function(){},notifyUnselectedAll:function(){},notifyRowClick:function(){},registerHeaderRowCheckbox:function(){},registerRowCheckboxes:function(){},removeClass:function(){},removeClassAtRowIndex:function(){},removeClassNameByHeaderCellIndex:function(){},setAttributeAtRowIndex:function(){},setAttributeByHeaderCellIndex:function(){},setClassNameByHeaderCellIndex:function(){},setHeaderRowCheckboxChecked:function(){},setHeaderRowCheckboxIndeterminate:function(){},setProgressIndicatorStyles:function(){},setRowCheckboxCheckedAtIndex:function(){},setSortStatusLabelByHeaderCellIndex:function(){}}},enumerable:!1,configurable:!0}),e.prototype.layout=function(){this.adapter.isRowsSelectable()&&(this.adapter.registerHeaderRowCheckbox(),this.adapter.registerRowCheckboxes(),this.setHeaderRowCheckboxState())},e.prototype.layoutAsync=function(){return Qb(this,void 0,void 0,function(){return $b(this,function(n){switch(n.label){case 0:return this.adapter.isRowsSelectable()?[4,this.adapter.registerHeaderRowCheckbox()]:[3,3];case 1:return n.sent(),[4,this.adapter.registerRowCheckboxes()];case 2:n.sent(),this.setHeaderRowCheckboxState(),n.label=3;case 3:return[2]}})})},e.prototype.getRows=function(){return this.adapter.getRowElements()},e.prototype.getHeaderCells=function(){return this.adapter.getHeaderCellElements()},e.prototype.setSelectedRowIds=function(n){for(var s=0;s<this.adapter.getRowCount();s++){var f=this.adapter.getRowIdAtIndex(s),v=!1;f&&n.indexOf(f)>=0&&(v=!0),this.adapter.setRowCheckboxCheckedAtIndex(s,v),this.selectRowAtIndex(s,v)}this.setHeaderRowCheckboxState()},e.prototype.getRowIds=function(){for(var n=[],s=0;s<this.adapter.getRowCount();s++)n.push(this.adapter.getRowIdAtIndex(s));return n},e.prototype.getSelectedRowIds=function(){for(var n=[],s=0;s<this.adapter.getRowCount();s++)this.adapter.isCheckboxAtRowIndexChecked(s)&&n.push(this.adapter.getRowIdAtIndex(s));return n},e.prototype.handleHeaderRowCheckboxChange=function(){for(var n=this.adapter.isHeaderRowCheckboxChecked(),s=0;s<this.adapter.getRowCount();s++)this.adapter.setRowCheckboxCheckedAtIndex(s,n),this.selectRowAtIndex(s,n);n?this.adapter.notifySelectedAll():this.adapter.notifyUnselectedAll()},e.prototype.handleRowCheckboxChange=function(n){var s=this.adapter.getRowIndexByChildElement(n.target);if(s!==-1){var f=this.adapter.isCheckboxAtRowIndexChecked(s);this.selectRowAtIndex(s,f),this.setHeaderRowCheckboxState();var v=this.adapter.getRowIdAtIndex(s);this.adapter.notifyRowSelectionChanged({rowId:v,rowIndex:s,selected:f})}},e.prototype.handleSortAction=function(n){for(var s=n.columnId,f=n.columnIndex,v=n.headerCell,c=0;c<this.adapter.getHeaderCellCount();c++)c!==f&&(this.adapter.removeClassNameByHeaderCellIndex(c,Aa.HEADER_CELL_SORTED),this.adapter.removeClassNameByHeaderCellIndex(c,Aa.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(c,_d.ARIA_SORT,Sl.NONE),this.adapter.setSortStatusLabelByHeaderCellIndex(c,Sl.NONE));this.adapter.setClassNameByHeaderCellIndex(f,Aa.HEADER_CELL_SORTED);var h=this.adapter.getAttributeByHeaderCellIndex(f,_d.ARIA_SORT),S=Sl.NONE;h===Sl.ASCENDING?(this.adapter.setClassNameByHeaderCellIndex(f,Aa.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(f,_d.ARIA_SORT,Sl.DESCENDING),S=Sl.DESCENDING):h===Sl.DESCENDING?(this.adapter.removeClassNameByHeaderCellIndex(f,Aa.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(f,_d.ARIA_SORT,Sl.ASCENDING),S=Sl.ASCENDING):(this.adapter.setAttributeByHeaderCellIndex(f,_d.ARIA_SORT,Sl.ASCENDING),S=Sl.ASCENDING),this.adapter.setSortStatusLabelByHeaderCellIndex(f,S),this.adapter.notifySortAction({columnId:s,columnIndex:f,headerCell:v,sortValue:S})},e.prototype.handleRowClick=function(n){var s=n.rowId,f=n.row;this.adapter.notifyRowClick({rowId:s,row:f})},e.prototype.showProgress=function(){var n=this.adapter.getTableHeaderHeight(),s=this.adapter.getTableContainerHeight()-n,f=n;this.adapter.setProgressIndicatorStyles({height:s+"px",top:f+"px"}),this.adapter.addClass(Aa.IN_PROGRESS)},e.prototype.hideProgress=function(){this.adapter.removeClass(Aa.IN_PROGRESS)},e.prototype.setHeaderRowCheckboxState=function(){this.adapter.getSelectedRowCount()===0?(this.adapter.setHeaderRowCheckboxChecked(!1),this.adapter.setHeaderRowCheckboxIndeterminate(!1)):this.adapter.getSelectedRowCount()===this.adapter.getRowCount()?(this.adapter.setHeaderRowCheckboxChecked(!0),this.adapter.setHeaderRowCheckboxIndeterminate(!1)):(this.adapter.setHeaderRowCheckboxIndeterminate(!0),this.adapter.setHeaderRowCheckboxChecked(!1))},e.prototype.selectRowAtIndex=function(n,s){s?(this.adapter.addClassAtRowIndex(n,Aa.ROW_SELECTED),this.adapter.setAttributeAtRowIndex(n,_d.ARIA_SELECTED,"true")):(this.adapter.removeClassAtRowIndex(n,Aa.ROW_SELECTED),this.adapter.setAttributeAtRowIndex(n,_d.ARIA_SELECTED,"false"))},e}(Na);const FA=o=>({}),d0=o=>({}),UA=o=>({}),p0=o=>({});function f0(o){let e,n,s,f,v;const c=o[33].progress,h=mn(c,o,o[32],p0);return{c(){e=_i("div"),n=_i("div"),s=qn(),h&&h.c(),this.h()},l(S){e=vi(S,"DIV",{class:!0,style:!0});var P=mi(e);n=vi(P,"DIV",{class:!0}),mi(n).forEach(Qe),s=Gn(P),h&&h.l(P),P.forEach(Qe),this.h()},h(){ii(n,"class","mdc-data-table__scrim"),ii(e,"class","mdc-data-table__progress-indicator"),ii(e,"style",f=Object.entries(o[13]).map(m0).join(" "))},m(S,P){Ut(S,e,P),sn(e,n),sn(e,s),h&&h.m(e,null),v=!0},p(S,P){h&&h.p&&(!v||P[1]&2)&&gn(h,c,S,S[32],v?_n(c,S[32],P,UA):yn(S[32]),p0),(!v||P[0]&8192&&f!==(f=Object.entries(S[13]).map(m0).join(" ")))&&ii(e,"style",f)},i(S){v||(rt(h,S),v=!0)},o(S){ft(h,S),v=!1},d(S){S&&Qe(e),h&&h.d(S)}}}function NA(o){let e,n,s,f,v,c,h,S,P,D,R,O,Y,ee;const he=o[33].default,re=mn(he,o,o[32],null);let ve=[{class:f=wi({[o[6]]:!0,"mdc-data-table__table":!0})},rr(o[22],"table$")],se={};for(let je=0;je<ve.length;je+=1)se=Ct(se,ve[je]);let we=[{class:c=wi({[o[4]]:!0,"mdc-data-table__table-container":!0})},rr(o[22],"container$")],Ge={};for(let je=0;je<we.length;je+=1)Ge=Ct(Ge,we[je]);let Ue=o[21].progress&&f0(o);const He=o[33].paginate,fe=mn(He,o,o[32],d0);let ut=[{class:D=wi(tr({[o[1]]:!0,"mdc-data-table":!0,"mdc-data-table--sticky-header":o[2]},o[12]))},_s(o[22],["container$","table$"])],at={};for(let je=0;je<ut.length;je+=1)at=Ct(at,ut[je]);return{c(){e=_i("div"),n=_i("div"),s=_i("table"),re&&re.c(),S=qn(),Ue&&Ue.c(),P=qn(),fe&&fe.c(),this.h()},l(je){e=vi(je,"DIV",{class:!0});var Fe=mi(e);n=vi(Fe,"DIV",{class:!0});var Dt=mi(n);s=vi(Dt,"TABLE",{class:!0});var qe=mi(s);re&&re.l(qe),qe.forEach(Qe),Dt.forEach(Qe),S=Gn(Fe),Ue&&Ue.l(Fe),P=Gn(Fe),fe&&fe.l(Fe),Fe.forEach(Qe),this.h()},h(){di(s,se),di(n,Ge),di(e,at)},m(je,Fe){Ut(je,e,Fe),sn(e,n),sn(n,s),re&&re.m(s,null),o[34](n),sn(e,S),Ue&&Ue.m(e,null),sn(e,P),fe&&fe.m(e,null),o[35](e),O=!0,Y||(ee=[Ei(v=Hn.call(null,s,o[5])),Ei(h=Hn.call(null,n,o[3])),Ei(R=Hn.call(null,e,o[0])),Ei(o[15].call(null,e)),In(e,"SMUICheckbox:mount",o[36]),In(e,"SMUIDataTableHeader:mount",o[37]),In(e,"SMUIDataTableHeader:unmount",o[38]),In(e,"SMUIDataTableBody:mount",o[39]),In(e,"SMUIDataTableBody:unmount",o[40]),In(e,"SMUIDataTableHeaderCheckbox:change",o[41]),In(e,"SMUIDataTableHeader:click",o[19]),In(e,"SMUIDataTableRow:click",o[20]),In(e,"SMUIDataTableBodyCheckbox:change",o[42])],Y=!0)},p(je,Fe){re&&re.p&&(!O||Fe[1]&2)&&gn(re,he,je,je[32],O?_n(he,je[32],Fe,null):yn(je[32]),null),di(s,se=en(ve,[(!O||Fe[0]&64&&f!==(f=wi({[je[6]]:!0,"mdc-data-table__table":!0})))&&{class:f},Fe[0]&4194304&&rr(je[22],"table$")])),v&&Rn(v.update)&&Fe[0]&32&&v.update.call(null,je[5]),di(n,Ge=en(we,[(!O||Fe[0]&16&&c!==(c=wi({[je[4]]:!0,"mdc-data-table__table-container":!0})))&&{class:c},Fe[0]&4194304&&rr(je[22],"container$")])),h&&Rn(h.update)&&Fe[0]&8&&h.update.call(null,je[3]),je[21].progress?Ue?(Ue.p(je,Fe),Fe[0]&2097152&&rt(Ue,1)):(Ue=f0(je),Ue.c(),rt(Ue,1),Ue.m(e,P)):Ue&&(Or(),ft(Ue,1,1,()=>{Ue=null}),Rr()),fe&&fe.p&&(!O||Fe[1]&2)&&gn(fe,He,je,je[32],O?_n(He,je[32],Fe,FA):yn(je[32]),d0),di(e,at=en(ut,[(!O||Fe[0]&4102&&D!==(D=wi(tr({[je[1]]:!0,"mdc-data-table":!0,"mdc-data-table--sticky-header":je[2]},je[12]))))&&{class:D},Fe[0]&4194304&&_s(je[22],["container$","table$"])])),R&&Rn(R.update)&&Fe[0]&1&&R.update.call(null,je[0])},i(je){O||(rt(re,je),rt(Ue),rt(fe,je),O=!0)},o(je){ft(re,je),ft(Ue),ft(fe,je),O=!1},d(je){je&&Qe(e),re&&re.d(je),o[34](null),Ue&&Ue.d(),fe&&fe.d(je),o[35](null),Y=!1,Tr(ee)}}}const m0=([o,e])=>`${o}: ${e};`;function VA(o,e,n){const s=["use","class","stickyHeader","sortable","sort","sortDirection","sortAscendingAriaLabel","sortDescendingAriaLabel","container$use","container$class","table$use","table$class","layout","getElement"];let f=xi(e,s),v,c,h,{$$slots:S={},$$scope:P}=e;const D=Cy(S),{closest:R}=yf,O=$n(Yn());let{use:Y=[]}=e,{class:ee=""}=e,{stickyHeader:he=!1}=e,{sortable:re=!1}=e,{sort:ve=null}=e,{sortDirection:se="ascending"}=e,{sortAscendingAriaLabel:we="sorted, ascending"}=e,{sortDescendingAriaLabel:Ge="sorted, descending"}=e,{container$use:Ue=[]}=e,{container$class:He=""}=e,{table$use:fe=[]}=e,{table$class:ut=""}=e,at,je,Fe,Dt,qe,Mt={},li={height:"auto",top:"initial"},Et=Dr("SMUI:addLayoutListener"),Gt,Je=!1,wt=Yl(!1);Ho(o,wt,At=>n(31,v=At));let Pt=Yl(ve);Ho(o,Pt,At=>n(45,h=At));let ni=Yl(se);Ho(o,ni,At=>n(44,c=At)),sr("SMUI:checkbox:context","data-table"),sr("SMUI:linear-progress:context","data-table"),sr("SMUI:linear-progress:closed",wt),sr("SMUI:data-table:sortable",re),sr("SMUI:data-table:sort",Pt),sr("SMUI:data-table:sortDirection",ni),sr("SMUI:data-table:sortAscendingAriaLabel",we),sr("SMUI:data-table:sortDescendingAriaLabel",Ge),Et&&(Gt=Et(It));let Xt;Fo(()=>(n(7,je=new BA({addClass:Xi,removeClass:ei,getHeaderCellElements:()=>{var At;return(At=Dt==null?void 0:Dt.cells.map(Bi=>Bi.element))!==null&&At!==void 0?At:[]},getHeaderCellCount:()=>{var At;return(At=Dt==null?void 0:Dt.cells.length)!==null&&At!==void 0?At:0},getAttributeByHeaderCellIndex:(At,Bi)=>{var Nn;return(Nn=Dt==null?void 0:Dt.orderedCells[At].getAttr(Bi))!==null&&Nn!==void 0?Nn:null},setAttributeByHeaderCellIndex:(At,Bi,Nn)=>{Dt==null||Dt.orderedCells[At].addAttr(Bi,Nn)},setClassNameByHeaderCellIndex:(At,Bi)=>{Dt==null||Dt.orderedCells[At].addClass(Bi)},removeClassNameByHeaderCellIndex:(At,Bi)=>{Dt==null||Dt.orderedCells[At].removeClass(Bi)},notifySortAction:At=>{n(23,ve=At.columnId),n(24,se=At.sortValue),Un(St(),"SMUIDataTable:sorted",At,void 0,!0)},getTableContainerHeight:()=>Fe.getBoundingClientRect().height,getTableHeaderHeight:()=>{const At=St().querySelector(".mdc-data-table__header-row");if(!At)throw new Error("MDCDataTable: Table header element not found.");return At.getBoundingClientRect().height},setProgressIndicatorStyles:At=>{n(13,li=At)},addClassAtRowIndex:(At,Bi)=>{qe==null||qe.orderedRows[At].addClass(Bi)},getRowCount:()=>{var At;return(At=qe==null?void 0:qe.rows.length)!==null&&At!==void 0?At:0},getRowElements:()=>{var At;return(At=qe==null?void 0:qe.rows.map(Bi=>Bi.element))!==null&&At!==void 0?At:[]},getRowIdAtIndex:At=>{var Bi;return(Bi=qe==null?void 0:qe.orderedRows[At].rowId)!==null&&Bi!==void 0?Bi:null},getRowIndexByChildElement:At=>{var Bi;return(Bi=qe==null?void 0:qe.orderedRows.map(Nn=>Nn.element).indexOf(R(At,".mdc-data-table__row")))!==null&&Bi!==void 0?Bi:-1},getSelectedRowCount:()=>{var At;return(At=qe==null?void 0:qe.rows.filter(Bi=>Bi.selected).length)!==null&&At!==void 0?At:0},isCheckboxAtRowIndexChecked:At=>{const Bi=qe==null?void 0:qe.orderedRows[At].checkbox;return Bi?Bi.checked:!1},isHeaderRowCheckboxChecked:()=>{const At=Dt==null?void 0:Dt.checkbox;return At?At.checked:!1},isRowsSelectable:()=>!!St().querySelector(".mdc-data-table__row-checkbox")||!!St().querySelector(".mdc-data-table__header-row-checkbox"),notifyRowSelectionChanged:At=>{const Bi=qe==null?void 0:qe.orderedRows[At.rowIndex];Bi&&Un(St(),"SMUIDataTable:rowSelectionChanged",{row:Bi.element,rowId:Bi.rowId,rowIndex:At.rowIndex,selected:At.selected},void 0,!0)},notifySelectedAll:()=>{Jt(!1),Un(St(),"SMUIDataTable:selectedAll",void 0,void 0,!0)},notifyUnselectedAll:()=>{Jt(!1),Un(St(),"SMUIDataTable:unselectedAll",void 0,void 0,!0)},notifyRowClick:At=>{Un(St(),"SMUIDataTable:rowClick",At,void 0,!0)},registerHeaderRowCheckbox:()=>{},registerRowCheckboxes:()=>{},removeClassAtRowIndex:(At,Bi)=>{qe==null||qe.orderedRows[At].removeClass(Bi)},setAttributeAtRowIndex:(At,Bi,Nn)=>{qe==null||qe.orderedRows[At].addAttr(Bi,Nn)},setHeaderRowCheckboxChecked:At=>{const Bi=Dt==null?void 0:Dt.checkbox;Bi&&(Bi.checked=At)},setHeaderRowCheckboxIndeterminate:Jt,setRowCheckboxCheckedAtIndex:(At,Bi)=>{const Nn=qe==null?void 0:qe.orderedRows[At].checkbox;Nn&&(Nn.checked=Bi)},setSortStatusLabelByHeaderCellIndex:(At,Bi)=>{}})),je.init(),je.layout(),n(14,Je=!0),()=>{je.destroy()})),eh(()=>{Gt&&Gt()});function Xi(At){Mt[At]||n(12,Mt[At]=!0,Mt)}function ei(At){(!(At in Mt)||Mt[At])&&n(12,Mt[At]=!1,Mt)}function Jt(At){const Bi=Dt==null?void 0:Dt.checkbox;Bi&&(Bi.indeterminate=At)}function bi(At){if(!je||!At.detail.target)return;const Bi=R(At.detail.target,".mdc-data-table__header-cell--with-sort");Bi&&ht(Bi)}function ai(At){if(!je||!At.detail.target)return;const Bi=R(At.detail.target,".mdc-data-table__row");Bi&&je&&je.handleRowClick({rowId:At.detail.rowId,row:Bi})}function ht(At){var Bi,Nn;const rn=(Bi=Dt==null?void 0:Dt.orderedCells)!==null&&Bi!==void 0?Bi:[],Jn=rn.map(zt=>zt.element).indexOf(At);if(Jn===-1)return;const Ln=(Nn=rn[Jn].columnId)!==null&&Nn!==void 0?Nn:null;je.handleSortAction({columnId:Ln,columnIndex:Jn,headerCell:At})}function It(){return je.layout()}function St(){return at}function Ji(At){Zi[At?"unshift":"push"](()=>{Fe=At,n(9,Fe)})}function Qt(At){Zi[At?"unshift":"push"](()=>{at=At,n(8,at)})}const gt=()=>je&&Je&&je.layout(),zi=At=>n(10,Dt=At.detail),ln=()=>n(10,Dt=void 0),Cn=At=>n(11,qe=At.detail),Zn=()=>n(11,qe=void 0),Nr=()=>je&&je.handleHeaderRowCheckboxChange(),Kr=At=>je&&je.handleRowCheckboxChange(At);return o.$$set=At=>{e=Ct(Ct({},e),Qn(At)),n(22,f=xi(e,s)),"use"in At&&n(0,Y=At.use),"class"in At&&n(1,ee=At.class),"stickyHeader"in At&&n(2,he=At.stickyHeader),"sortable"in At&&n(25,re=At.sortable),"sort"in At&&n(23,ve=At.sort),"sortDirection"in At&&n(24,se=At.sortDirection),"sortAscendingAriaLabel"in At&&n(26,we=At.sortAscendingAriaLabel),"sortDescendingAriaLabel"in At&&n(27,Ge=At.sortDescendingAriaLabel),"container$use"in At&&n(3,Ue=At.container$use),"container$class"in At&&n(4,He=At.container$class),"table$use"in At&&n(5,fe=At.table$use),"table$class"in At&&n(6,ut=At.table$class),"$$scope"in At&&n(32,P=At.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&8388608&&Oh(Pt,h=ve,h),o.$$.dirty[0]&16777216&&Oh(ni,c=se,c),o.$$.dirty[0]&1073741952|o.$$.dirty[1]&1&&D.progress&&je&&Xt!==v&&(n(30,Xt=v),v?je.hideProgress():je.showProgress())},[Y,ee,he,Ue,He,fe,ut,je,at,Fe,Dt,qe,Mt,li,Je,O,wt,Pt,ni,bi,ai,D,f,ve,se,re,we,Ge,It,St,Xt,v,P,S,Ji,Qt,gt,zi,ln,Cn,Zn,Nr,Kr]}class jA extends Tn{constructor(e){super(),An(this,e,VA,NA,Sn,{use:0,class:1,stickyHeader:2,sortable:25,sort:23,sortDirection:24,sortAscendingAriaLabel:26,sortDescendingAriaLabel:27,container$use:3,container$class:4,table$use:5,table$class:6,layout:28,getElement:29},null,[-1,-1])}get layout(){return this.$$.ctx[28]}get getElement(){return this.$$.ctx[29]}}function qA(o){let e,n,s,f,v,c;const h=o[9].default,S=mn(h,o,o[8],null);let P=[{class:n=wi({[o[1]]:!0,"mdc-data-table__content":!0})},o[6]],D={};for(let R=0;R<P.length;R+=1)D=Ct(D,P[R]);return{c(){e=_i("tbody"),S&&S.c(),this.h()},l(R){e=vi(R,"TBODY",{class:!0});var O=mi(e);S&&S.l(O),O.forEach(Qe),this.h()},h(){di(e,D)},m(R,O){Ut(R,e,O),S&&S.m(e,null),o[10](e),f=!0,v||(c=[Ei(s=Hn.call(null,e,o[0])),Ei(o[3].call(null,e)),In(e,"SMUIDataTableRow:mount",o[4]),In(e,"SMUIDataTableRow:unmount",o[5])],v=!0)},p(R,[O]){S&&S.p&&(!f||O&256)&&gn(S,h,R,R[8],f?_n(h,R[8],O,null):yn(R[8]),null),di(e,D=en(P,[(!f||O&2&&n!==(n=wi({[R[1]]:!0,"mdc-data-table__content":!0})))&&{class:n},O&64&&R[6]])),s&&Rn(s.update)&&O&1&&s.update.call(null,R[0])},i(R){f||(rt(S,R),f=!0)},o(R){ft(S,R),f=!1},d(R){R&&Qe(e),S&&S.d(R),o[10](null),v=!1,Tr(c)}}}function GA(o,e,n){const s=["use","class","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,D,R=[];const O=new WeakMap;sr("SMUI:data-table:row:header",!1),Fo(()=>{const se={get rows(){return R},get orderedRows(){return he()}};return Un(re(),"SMUIDataTableBody:mount",se),()=>{Un(re(),"SMUIDataTableBody:unmount",se)}});function Y(se){R.push(se.detail),O.set(se.detail.element,se.detail),se.stopPropagation()}function ee(se){const we=R.indexOf(se.detail);we!==-1&&(R.splice(we,1),R=R),O.delete(se.detail.element),se.stopPropagation()}function he(){return[...re().querySelectorAll(".mdc-data-table__row")].map(se=>O.get(se)).filter(se=>se&&se._smui_data_table_row_accessor)}function re(){return D}function ve(se){Zi[se?"unshift":"push"](()=>{D=se,n(2,D)})}return o.$$set=se=>{e=Ct(Ct({},e),Qn(se)),n(6,f=xi(e,s)),"use"in se&&n(0,S=se.use),"class"in se&&n(1,P=se.class),"$$scope"in se&&n(8,c=se.$$scope)},[S,P,D,h,Y,ee,f,re,c,v,ve]}class HA extends Tn{constructor(e){super(),An(this,e,GA,qA,Sn,{use:0,class:1,getElement:7})}get getElement(){return this.$$.ctx[7]}}function ZA(o){let e,n,s,f,v,c,h;const S=o[14].default,P=mn(S,o,o[13],null);let D=[{class:n=wi(tr({[o[1]]:!0,"mdc-data-table__header-row":o[7],"mdc-data-table__row":!o[7],"mdc-data-table__row--selected":!o[7]&&o[3]&&o[3].checked},o[4]))},{"aria-selected":s=o[3]?o[3].checked?"true":"false":void 0},o[5],o[10]],R={};for(let O=0;O<D.length;O+=1)R=Ct(R,D[O]);return{c(){e=_i("tr"),P&&P.c(),this.h()},l(O){e=vi(O,"TR",{class:!0,"aria-selected":!0});var Y=mi(e);P&&P.l(Y),Y.forEach(Qe),this.h()},h(){di(e,R)},m(O,Y){Ut(O,e,Y),P&&P.m(e,null),o[15](e),v=!0,c||(h=[Ei(f=Hn.call(null,e,o[0])),Ei(o[6].call(null,e)),In(e,"click",o[16]),In(e,"SMUICheckbox:mount",o[17]),In(e,"SMUICheckbox:unmount",o[18])],c=!0)},p(O,[Y]){P&&P.p&&(!v||Y&8192)&&gn(P,S,O,O[13],v?_n(S,O[13],Y,null):yn(O[13]),null),di(e,R=en(D,[(!v||Y&26&&n!==(n=wi(tr({[O[1]]:!0,"mdc-data-table__header-row":O[7],"mdc-data-table__row":!O[7],"mdc-data-table__row--selected":!O[7]&&O[3]&&O[3].checked},O[4]))))&&{class:n},(!v||Y&8&&s!==(s=O[3]?O[3].checked?"true":"false":void 0))&&{"aria-selected":s},Y&32&&O[5],Y&1024&&O[10]])),f&&Rn(f.update)&&Y&1&&f.update.call(null,O[0])},i(O){v||(rt(P,O),v=!0)},o(O){ft(P,O),v=!1},d(O){O&&Qe(e),P&&P.d(O),o[15](null),c=!1,Tr(h)}}}let WA=0;function XA(o,e,n){const s=["use","class","rowId","getElement"];let f=xi(e,s),{$$slots:v={},$$scope:c}=e;const h=$n(Yn());let{use:S=[]}=e,{class:P=""}=e,{rowId:D="SMUI-data-table-row-"+WA++}=e,R,O,Y={},ee={},he=Dr("SMUI:data-table:row:header");Fo(()=>{const Fe=he?{_smui_data_table_row_accessor:!1,get element(){return He()},get checkbox(){return O},get rowId(){},get selected(){var Dt;return(Dt=O&&O.checked)!==null&&Dt!==void 0?Dt:!1},addClass:re,removeClass:ve,getAttr:se,addAttr:we}:{_smui_data_table_row_accessor:!0,get element(){return He()},get checkbox(){return O},get rowId(){return D},get selected(){var Dt;return(Dt=O&&O.checked)!==null&&Dt!==void 0?Dt:!1},addClass:re,removeClass:ve,getAttr:se,addAttr:we};return Un(He(),"SMUIDataTableRow:mount",Fe),()=>{Un(He(),"SMUIDataTableRow:unmount",Fe)}});function re(Fe){Y[Fe]||n(4,Y[Fe]=!0,Y)}function ve(Fe){(!(Fe in Y)||Y[Fe])&&n(4,Y[Fe]=!1,Y)}function se(Fe){var Dt;return Fe in ee?(Dt=ee[Fe])!==null&&Dt!==void 0?Dt:null:He().getAttribute(Fe)}function we(Fe,Dt){ee[Fe]!==Dt&&n(5,ee[Fe]=Dt,ee)}function Ge(Fe){Un(He(),"SMUIDataTableHeader:click",Fe)}function Ue(Fe){Un(He(),"SMUIDataTableRow:click",{rowId:D,target:Fe.target})}function He(){return R}function fe(Fe){Zi[Fe?"unshift":"push"](()=>{R=Fe,n(2,R)})}const ut=Fe=>he?Ge(Fe):Ue(Fe),at=Fe=>n(3,O=Fe.detail),je=()=>n(3,O=void 0);return o.$$set=Fe=>{e=Ct(Ct({},e),Qn(Fe)),n(10,f=xi(e,s)),"use"in Fe&&n(0,S=Fe.use),"class"in Fe&&n(1,P=Fe.class),"rowId"in Fe&&n(11,D=Fe.rowId),"$$scope"in Fe&&n(13,c=Fe.$$scope)},[S,P,R,O,Y,ee,h,he,Ge,Ue,f,D,He,c,v,fe,ut,at,je]}class KA extends Tn{constructor(e){super(),An(this,e,XA,ZA,Sn,{use:0,class:1,rowId:11,getElement:12})}get getElement(){return this.$$.ctx[12]}}function JA(o){let e,n,s,f,v,c;const h=o[22].default,S=mn(h,o,o[21],null);let P=[{class:n=wi(tr({[o[1]]:!0,"mdc-data-table__cell":!0,"mdc-data-table__cell--numeric":o[2],"mdc-data-table__cell--checkbox":o[3]},o[7]))},o[8],o[19]],D={};for(let R=0;R<P.length;R+=1)D=Ct(D,P[R]);return{c(){e=_i("td"),S&&S.c(),this.h()},l(R){e=vi(R,"TD",{class:!0});var O=mi(e);S&&S.l(O),O.forEach(Qe),this.h()},h(){di(e,D)},m(R,O){Ut(R,e,O),S&&S.m(e,null),o[25](e),f=!0,v||(c=[Ei(s=Hn.call(null,e,o[0])),Ei(o[11].call(null,e)),In(e,"change",o[26])],v=!0)},p(R,O){S&&S.p&&(!f||O&2097152)&&gn(S,h,R,R[21],f?_n(h,R[21],O,null):yn(R[21]),null),di(e,D=en(P,[(!f||O&142&&n!==(n=wi(tr({[R[1]]:!0,"mdc-data-table__cell":!0,"mdc-data-table__cell--numeric":R[2],"mdc-data-table__cell--checkbox":R[3]},R[7]))))&&{class:n},O&256&&R[8],O&524288&&R[19]])),s&&Rn(s.update)&&O&1&&s.update.call(null,R[0])},i(R){f||(rt(S,R),f=!0)},o(R){ft(S,R),f=!1},d(R){R&&Qe(e),S&&S.d(R),o[25](null),v=!1,Tr(c)}}}function YA(o){let e,n,s,f,v,c,h,S,P;const D=[$A,QA],R=[];function O(he,re){return he[5]?0:1}n=O(o),s=R[n]=D[n](o);let Y=[{class:f=wi(tr({[o[1]]:!0,"mdc-data-table__header-cell":!0,"mdc-data-table__header-cell--numeric":o[2],"mdc-data-table__header-cell--checkbox":o[3],"mdc-data-table__header-cell--with-sort":o[5],"mdc-data-table__header-cell--sorted":o[5]&&o[9]===o[4]},o[7]))},{role:"columnheader"},{scope:"col"},{"data-column-id":o[4]},{"aria-sort":v=o[5]?o[9]===o[4]?o[10]:"none":void 0},o[8],o[19]],ee={};for(let he=0;he<Y.length;he+=1)ee=Ct(ee,Y[he]);return{c(){e=_i("th"),s.c(),this.h()},l(he){e=vi(he,"TH",{class:!0,role:!0,scope:!0,"data-column-id":!0,"aria-sort":!0});var re=mi(e);s.l(re),re.forEach(Qe),this.h()},h(){di(e,ee)},m(he,re){Ut(he,e,re),R[n].m(e,null),o[23](e),h=!0,S||(P=[Ei(c=Hn.call(null,e,o[0])),Ei(o[11].call(null,e)),In(e,"change",o[24])],S=!0)},p(he,re){let ve=n;n=O(he),n===ve?R[n].p(he,re):(Or(),ft(R[ve],1,1,()=>{R[ve]=null}),Rr(),s=R[n],s?s.p(he,re):(s=R[n]=D[n](he),s.c()),rt(s,1),s.m(e,null)),di(e,ee=en(Y,[(!h||re&702&&f!==(f=wi(tr({[he[1]]:!0,"mdc-data-table__header-cell":!0,"mdc-data-table__header-cell--numeric":he[2],"mdc-data-table__header-cell--checkbox":he[3],"mdc-data-table__header-cell--with-sort":he[5],"mdc-data-table__header-cell--sorted":he[5]&&he[9]===he[4]},he[7]))))&&{class:f},{role:"columnheader"},{scope:"col"},(!h||re&16)&&{"data-column-id":he[4]},(!h||re&1584&&v!==(v=he[5]?he[9]===he[4]?he[10]:"none":void 0))&&{"aria-sort":v},re&256&&he[8],re&524288&&he[19]])),c&&Rn(c.update)&&re&1&&c.update.call(null,he[0])},i(he){h||(rt(s),h=!0)},o(he){ft(s),h=!1},d(he){he&&Qe(e),R[n].d(),o[23](null),S=!1,Tr(P)}}}function QA(o){let e;const n=o[22].default,s=mn(n,o,o[21],null);return{c(){s&&s.c()},l(f){s&&s.l(f)},m(f,v){s&&s.m(f,v),e=!0},p(f,v){s&&s.p&&(!e||v&2097152)&&gn(s,n,f,f[21],e?_n(n,f[21],v,null):yn(f[21]),null)},i(f){e||(rt(s,f),e=!0)},o(f){ft(s,f),e=!1},d(f){s&&s.d(f)}}}function $A(o){let e,n,s,f=(o[9]===o[4]?o[10]==="ascending"?o[15]:o[16]:"")+"",v,c,h;const S=o[22].default,P=mn(S,o,o[21],null);return{c(){e=_i("div"),P&&P.c(),n=qn(),s=_i("div"),v=pa(f),this.h()},l(D){e=vi(D,"DIV",{class:!0});var R=mi(e);P&&P.l(R),n=Gn(R),s=vi(R,"DIV",{class:!0,"aria-hidden":!0,id:!0});var O=mi(s);v=fa(O,f),O.forEach(Qe),R.forEach(Qe),this.h()},h(){ii(s,"class","mdc-data-table__sort-status-label"),ii(s,"aria-hidden","true"),ii(s,"id",c=o[4]+"-status-label"),ii(e,"class","mdc-data-table__header-cell-wrapper")},m(D,R){Ut(D,e,R),P&&P.m(e,null),sn(e,n),sn(e,s),sn(s,v),h=!0},p(D,R){P&&P.p&&(!h||R&2097152)&&gn(P,S,D,D[21],h?_n(S,D[21],R,null):yn(D[21]),null),(!h||R&1552)&&f!==(f=(D[9]===D[4]?D[10]==="ascending"?D[15]:D[16]:"")+"")&&tu(v,f),(!h||R&16&&c!==(c=D[4]+"-status-label"))&&ii(s,"id",c)},i(D){h||(rt(P,D),h=!0)},o(D){ft(P,D),h=!1},d(D){D&&Qe(e),P&&P.d(D)}}}function eC(o){let e,n,s,f;const v=[YA,JA],c=[];function h(S,P){return S[12]?0:1}return e=h(o),n=c[e]=v[e](o),{c(){n.c(),s=bn()},l(S){n.l(S),s=bn()},m(S,P){c[e].m(S,P),Ut(S,s,P),f=!0},p(S,[P]){n.p(S,P)},i(S){f||(rt(n),f=!0)},o(S){ft(n),f=!1},d(S){c[e].d(S),S&&Qe(s)}}}let tC=0;function iC(o,e,n){const s=["use","class","numeric","checkbox","columnId","sortable","getElement"];let f=xi(e,s),v,c,{$$slots:h={},$$scope:S}=e;const P=$n(Yn());let D=Dr("SMUI:data-table:row:header"),{use:R=[]}=e,{class:O=""}=e,{numeric:Y=!1}=e,{checkbox:ee=!1}=e,{columnId:he=D?"SMUI-data-table-column-"+tC++:"SMUI-data-table-unused"}=e,{sortable:re=Dr("SMUI:data-table:sortable")}=e,ve,se={},we={},Ge=Dr("SMUI:data-table:sort");Ho(o,Ge,wt=>n(9,v=wt));let Ue=Dr("SMUI:data-table:sortDirection");Ho(o,Ue,wt=>n(10,c=wt));let He=Dr("SMUI:data-table:sortAscendingAriaLabel"),fe=Dr("SMUI:data-table:sortDescendingAriaLabel");re&&(sr("SMUI:label:context","data-table:sortable-header-cell"),sr("SMUI:icon-button:context","data-table:sortable-header-cell"),sr("SMUI:icon-button:aria-describedby",he+"-status-label")),Fo(()=>{const wt=D?{_smui_data_table_header_cell_accessor:!0,get element(){return Mt()},get columnId(){return he},addClass:ut,removeClass:at,getAttr:je,addAttr:Fe}:{_smui_data_table_header_cell_accessor:!1,get element(){return Mt()},get columnId(){},addClass:ut,removeClass:at,getAttr:je,addAttr:Fe};return Un(Mt(),"SMUIDataTableCell:mount",wt),()=>{Un(Mt(),"SMUIDataTableCell:unmount",wt)}});function ut(wt){se[wt]||n(7,se[wt]=!0,se)}function at(wt){(!(wt in se)||se[wt])&&n(7,se[wt]=!1,se)}function je(wt){var Pt;return wt in we?(Pt=we[wt])!==null&&Pt!==void 0?Pt:null:Mt().getAttribute(wt)}function Fe(wt,Pt){we[wt]!==Pt&&n(8,we[wt]=Pt,we)}function Dt(wt){Un(Mt(),"SMUIDataTableHeaderCheckbox:change",wt)}function qe(wt){Un(Mt(),"SMUIDataTableBodyCheckbox:change",wt)}function Mt(){return ve}function li(wt){Zi[wt?"unshift":"push"](()=>{ve=wt,n(6,ve)})}const Et=wt=>ee&&Dt(wt);function Gt(wt){Zi[wt?"unshift":"push"](()=>{ve=wt,n(6,ve)})}const Je=wt=>ee&&qe(wt);return o.$$set=wt=>{e=Ct(Ct({},e),Qn(wt)),n(19,f=xi(e,s)),"use"in wt&&n(0,R=wt.use),"class"in wt&&n(1,O=wt.class),"numeric"in wt&&n(2,Y=wt.numeric),"checkbox"in wt&&n(3,ee=wt.checkbox),"columnId"in wt&&n(4,he=wt.columnId),"sortable"in wt&&n(5,re=wt.sortable),"$$scope"in wt&&n(21,S=wt.$$scope)},[R,O,Y,ee,he,re,ve,se,we,v,c,P,D,Ge,Ue,He,fe,Dt,qe,f,Mt,S,h,li,Et,Gt,Je]}class nC extends Tn{constructor(e){super(),An(this,e,iC,eC,Sn,{use:0,class:1,numeric:2,checkbox:3,columnId:4,sortable:5,getElement:20})}get getElement(){return this.$$.ctx[20]}}const rC=HA,oC=KA,g0=nC,hm=parseFloat;function Tm(o,e=";"){let n;if(Array.isArray(o))n=o.filter(s=>s);else{n=[];for(const s in o)o[s]&&n.push(`${s}:${o[s]}`)}return n.join(e)}function aC(o,e,n,s){let f,v;const c="1em";let h,S,P,D="-.125em";const R="visible";return s&&(P="center",v="1.25em"),n&&(f=n),e&&(e=="lg"?(S="1.33333em",h=".75em",D="-.225em"):e=="xs"?S=".75em":e=="sm"?S=".875em":S=e.replace("x","em")),Tm([Tm({float:f,width:v,height:c,"line-height":h,"font-size":S,"text-align":P,"vertical-align":D,"transform-origin":"center",overflow:R}),o])}function sC(o,e,n,s,f,v=1,c="",h=""){let S=1,P=1;return f&&(f=="horizontal"?S=-1:f=="vertical"?P=-1:S=P=-1),Tm([`translate(${hm(e)*v}${c},${hm(n)*v}${c})`,`scale(${S*hm(o)},${P*hm(o)})`,s&&`rotate(${s}${h})`]," ")}function y0(o){let e,n,s,f,v,c,h;function S(R,O){return typeof R[7][4]=="string"?uC:lC}let P=S(o),D=P(o);return{c(){e=Kl("svg"),n=Kl("g"),s=Kl("g"),D.c(),this.h()},l(R){e=Jl(R,"svg",{id:!0,class:!0,style:!0,viewBox:!0,"aria-hidden":!0,role:!0,xmlns:!0});var O=mi(e);n=Jl(O,"g",{transform:!0,"transform-origin":!0});var Y=mi(n);s=Jl(Y,"g",{transform:!0});var ee=mi(s);D.l(ee),ee.forEach(Qe),Y.forEach(Qe),O.forEach(Qe),this.h()},h(){ii(s,"transform",o[10]),ii(n,"transform",f=`translate(${o[7][0]/2} ${o[7][1]/2})`),ii(n,"transform-origin",v=`${o[7][0]/4} 0`),ii(e,"id",o[0]),ii(e,"class",c=G_(o[8])+" svelte-1cj2gr0"),ii(e,"style",o[9]),ii(e,"viewBox",h=`0 0 ${o[7][0]} ${o[7][1]}`),ii(e,"aria-hidden","true"),ii(e,"role","img"),ii(e,"xmlns","http://www.w3.org/2000/svg")},m(R,O){Ut(R,e,O),sn(e,n),sn(n,s),D.m(s,null)},p(R,O){P===(P=S(R))&&D?D.p(R,O):(D.d(1),D=P(R),D&&(D.c(),D.m(s,null))),O&1024&&ii(s,"transform",R[10]),O&128&&f!==(f=`translate(${R[7][0]/2} ${R[7][1]/2})`)&&ii(n,"transform",f),O&128&&v!==(v=`${R[7][0]/4} 0`)&&ii(n,"transform-origin",v),O&1&&ii(e,"id",R[0]),O&256&&c!==(c=G_(R[8])+" svelte-1cj2gr0")&&ii(e,"class",c),O&512&&ii(e,"style",R[9]),O&128&&h!==(h=`0 0 ${R[7][0]} ${R[7][1]}`)&&ii(e,"viewBox",h)},d(R){R&&Qe(e),D.d()}}}function lC(o){let e,n,s,f,v,c,h,S,P,D;return{c(){e=Kl("path"),c=Kl("path"),this.h()},l(R){e=Jl(R,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),mi(e).forEach(Qe),c=Jl(R,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),mi(c).forEach(Qe),this.h()},h(){ii(e,"d",n=o[7][4][0]),ii(e,"fill",s=o[3]||o[1]||"currentColor"),ii(e,"fill-opacity",f=o[6]!=!1?o[4]:o[5]),ii(e,"transform",v=`translate(${o[7][0]/-2} ${o[7][1]/-2})`),ii(c,"d",h=o[7][4][1]),ii(c,"fill",S=o[2]||o[1]||"currentColor"),ii(c,"fill-opacity",P=o[6]!=!1?o[5]:o[4]),ii(c,"transform",D=`translate(${o[7][0]/-2} ${o[7][1]/-2})`)},m(R,O){Ut(R,e,O),Ut(R,c,O)},p(R,O){O&128&&n!==(n=R[7][4][0])&&ii(e,"d",n),O&10&&s!==(s=R[3]||R[1]||"currentColor")&&ii(e,"fill",s),O&112&&f!==(f=R[6]!=!1?R[4]:R[5])&&ii(e,"fill-opacity",f),O&128&&v!==(v=`translate(${R[7][0]/-2} ${R[7][1]/-2})`)&&ii(e,"transform",v),O&128&&h!==(h=R[7][4][1])&&ii(c,"d",h),O&6&&S!==(S=R[2]||R[1]||"currentColor")&&ii(c,"fill",S),O&112&&P!==(P=R[6]!=!1?R[5]:R[4])&&ii(c,"fill-opacity",P),O&128&&D!==(D=`translate(${R[7][0]/-2} ${R[7][1]/-2})`)&&ii(c,"transform",D)},d(R){R&&Qe(e),R&&Qe(c)}}}function uC(o){let e,n,s,f;return{c(){e=Kl("path"),this.h()},l(v){e=Jl(v,"path",{d:!0,fill:!0,transform:!0}),mi(e).forEach(Qe),this.h()},h(){ii(e,"d",n=o[7][4]),ii(e,"fill",s=o[1]||o[2]||"currentColor"),ii(e,"transform",f=`translate(${o[7][0]/-2} ${o[7][1]/-2})`)},m(v,c){Ut(v,e,c)},p(v,c){c&128&&n!==(n=v[7][4])&&ii(e,"d",n),c&6&&s!==(s=v[1]||v[2]||"currentColor")&&ii(e,"fill",s),c&128&&f!==(f=`translate(${v[7][0]/-2} ${v[7][1]/-2})`)&&ii(e,"transform",f)},d(v){v&&Qe(e)}}}function cC(o){let e,n=o[7][4]&&y0(o);return{c(){n&&n.c(),e=bn()},l(s){n&&n.l(s),e=bn()},m(s,f){n&&n.m(s,f),Ut(s,e,f)},p(s,[f]){s[7][4]?n?n.p(s,f):(n=y0(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Yo,o:Yo,d(s){n&&n.d(s),s&&Qe(e)}}}function hC(o,e,n){let{class:s=""}=e,{id:f=""}=e,{style:v=""}=e,{icon:c}=e,{size:h=""}=e,{color:S=""}=e,{fw:P=!1}=e,{pull:D=""}=e,{scale:R=1}=e,{translateX:O=0}=e,{translateY:Y=0}=e,{rotate:ee=""}=e,{flip:he=!1}=e,{spin:re=!1}=e,{pulse:ve=!1}=e,{primaryColor:se=""}=e,{secondaryColor:we=""}=e,{primaryOpacity:Ge=1}=e,{secondaryOpacity:Ue=.4}=e,{swapOpacity:He=!1}=e,fe,ut,at,je;return o.$$set=Fe=>{"class"in Fe&&n(11,s=Fe.class),"id"in Fe&&n(0,f=Fe.id),"style"in Fe&&n(12,v=Fe.style),"icon"in Fe&&n(13,c=Fe.icon),"size"in Fe&&n(14,h=Fe.size),"color"in Fe&&n(1,S=Fe.color),"fw"in Fe&&n(15,P=Fe.fw),"pull"in Fe&&n(16,D=Fe.pull),"scale"in Fe&&n(17,R=Fe.scale),"translateX"in Fe&&n(18,O=Fe.translateX),"translateY"in Fe&&n(19,Y=Fe.translateY),"rotate"in Fe&&n(20,ee=Fe.rotate),"flip"in Fe&&n(21,he=Fe.flip),"spin"in Fe&&n(22,re=Fe.spin),"pulse"in Fe&&n(23,ve=Fe.pulse),"primaryColor"in Fe&&n(2,se=Fe.primaryColor),"secondaryColor"in Fe&&n(3,we=Fe.secondaryColor),"primaryOpacity"in Fe&&n(4,Ge=Fe.primaryOpacity),"secondaryOpacity"in Fe&&n(5,Ue=Fe.secondaryOpacity),"swapOpacity"in Fe&&n(6,He=Fe.swapOpacity)},o.$$.update=()=>{o.$$.dirty&8192&&n(7,fe=c&&c.icon||[0,0,"",[],""]),o.$$.dirty&12584960&&n(8,ut=Tm([s,"svelte-fa",re&&"spin",ve&&"pulse"]," ")),o.$$.dirty&118784&&n(9,at=aC(v,h,D,P)),o.$$.dirty&4063232&&n(10,je=sC(R,O,Y,ee,he,512))},[f,S,se,we,Ge,Ue,He,fe,ut,at,je,s,v,c,h,P,D,R,O,Y,ee,he,re,ve]}class dC extends Tn{constructor(e){super(),An(this,e,hC,cC,Sn,{class:11,id:0,style:12,icon:13,size:14,color:1,fw:15,pull:16,scale:17,translateX:18,translateY:19,rotate:20,flip:21,spin:22,pulse:23,primaryColor:2,secondaryColor:3,primaryOpacity:4,secondaryOpacity:5,swapOpacity:6})}}var Xl=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function qP(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function pC(o){if(o.__esModule)return o;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(o).forEach(function(n){var s=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return o[n]}})}),e}var C1={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var e="fas",n="circle-info",s=512,f=512,v=["info-circle"],c="f05a",h="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 128c17.67 0 32 14.33 32 32c0 17.67-14.33 32-32 32S224 177.7 224 160C224 142.3 238.3 128 256 128zM296 384h-80C202.8 384 192 373.3 192 360s10.75-24 24-24h16v-64H224c-13.25 0-24-10.75-24-24S210.8 224 224 224h32c13.25 0 24 10.75 24 24v88h16c13.25 0 24 10.75 24 24S309.3 384 296 384z";o.definition={prefix:e,iconName:n,icon:[s,f,v,c,h]},o.faCircleInfo=o.definition,o.prefix=e,o.iconName=n,o.width=s,o.height=f,o.ligatures=v,o.unicode=c,o.svgPathData=h,o.aliases=v})(C1);function _0(o,e,n){const s=o.slice();return s[3]=e[n],s}function v0(o,e,n){const s=o.slice();return s[6]=e[n],s}function b0(o){let e,n,s,f;const v=[mC,fC],c=[];function h(S,P){var D;return((D=S[1])==null?void 0:D.length)>0?0:1}return n=h(o),s=c[n]=v[n](o),{c(){e=_i("div"),s.c(),this.h()},l(S){e=vi(S,"DIV",{class:!0});var P=mi(e);s.l(P),P.forEach(Qe),this.h()},h(){ii(e,"class","accordion-container")},m(S,P){Ut(S,e,P),c[n].m(e,null),f=!0},p(S,P){let D=n;n=h(S),n===D?c[n].p(S,P):(Or(),ft(c[D],1,1,()=>{c[D]=null}),Rr(),s=c[n],s?s.p(S,P):(s=c[n]=v[n](S),s.c()),rt(s,1),s.m(e,null))},i(S){f||(rt(s),f=!0)},o(S){ft(s),f=!1},d(S){S&&Qe(e),c[n].d()}}}function fC(o){let e,n,s,f,v,c,h,S;return f=new dC({props:{icon:C1.faCircleInfo,size:"lg",primaryColor:"dodgerblue"}}),{c(){e=_i("ul"),n=_i("li"),s=_i("div"),Ni(f.$$.fragment),v=qn(),c=_i("div"),h=pa("No features identified on the map."),this.h()},l(P){e=vi(P,"UL",{class:!0});var D=mi(e);n=vi(D,"LI",{class:!0});var R=mi(n);s=vi(R,"DIV",{class:!0});var O=mi(s);$i(f.$$.fragment,O),O.forEach(Qe),v=Gn(R),c=vi(R,"DIV",{class:!0});var Y=mi(c);h=fa(Y,"No features identified on the map."),Y.forEach(Qe),R.forEach(Qe),D.forEach(Qe),this.h()},h(){ii(s,"class","icon"),ii(c,"class","text svelte-1bkk48e"),ii(n,"class","message svelte-1bkk48e"),ii(e,"class","no-data-layers svelte-1bkk48e")},m(P,D){Ut(P,e,D),sn(e,n),sn(n,s),Vi(f,s,null),sn(n,v),sn(n,c),sn(c,h),S=!0},p:Yo,i(P){S||(rt(f.$$.fragment,P),S=!0)},o(P){ft(f.$$.fragment,P),S=!1},d(P){P&&Qe(e),ji(f)}}}function mC(o){let e,n;return e=new bA({props:{$$slots:{default:[SC]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&514&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function gC(o){let e=o[3].layer.id+"",n;return{c(){n=pa(e)},l(s){n=fa(s,e)},m(s,f){Ut(s,n,f)},p(s,f){f&2&&e!==(e=s[3].layer.id+"")&&tu(n,e)},d(s){s&&Qe(n)}}}function yC(o){let e,n=o[3].source+"",s;return{c(){e=_i("span"),s=pa(n),this.h()},l(f){e=vi(f,"SPAN",{slot:!0});var v=mi(e);s=fa(v,n),v.forEach(Qe),this.h()},h(){ii(e,"slot","description")},m(f,v){Ut(f,e,v),sn(e,s)},p(f,v){v&2&&n!==(n=f[3].source+"")&&tu(s,n)},d(f){f&&Qe(e)}}}function _C(o){let e=o[6]+"",n;return{c(){n=pa(e)},l(s){n=fa(s,e)},m(s,f){Ut(s,n,f)},p(s,f){f&2&&e!==(e=s[6]+"")&&tu(n,e)},d(s){s&&Qe(n)}}}function vC(o){let e=o[3].properties[o[6]]+"",n;return{c(){n=pa(e)},l(s){n=fa(s,e)},m(s,f){Ut(s,n,f)},p(s,f){f&2&&e!==(e=s[3].properties[s[6]]+"")&&tu(n,e)},d(s){s&&Qe(n)}}}function bC(o){let e,n,s,f,v;return e=new g0({props:{$$slots:{default:[_C]},$$scope:{ctx:o}}}),s=new g0({props:{$$slots:{default:[vC]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment),n=qn(),Ni(s.$$.fragment),f=qn()},l(c){$i(e.$$.fragment,c),n=Gn(c),$i(s.$$.fragment,c),f=Gn(c)},m(c,h){Vi(e,c,h),Ut(c,n,h),Vi(s,c,h),Ut(c,f,h),v=!0},p(c,h){const S={};h&514&&(S.$$scope={dirty:h,ctx:c}),e.$set(S);const P={};h&514&&(P.$$scope={dirty:h,ctx:c}),s.$set(P)},i(c){v||(rt(e.$$.fragment,c),rt(s.$$.fragment,c),v=!0)},o(c){ft(e.$$.fragment,c),ft(s.$$.fragment,c),v=!1},d(c){ji(e,c),c&&Qe(n),ji(s,c),c&&Qe(f)}}}function x0(o){let e,n;return e=new oC({props:{$$slots:{default:[bC]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&514&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function xC(o){let e,n,s=Object.keys(o[3].properties),f=[];for(let c=0;c<s.length;c+=1)f[c]=x0(v0(o,s,c));const v=c=>ft(f[c],1,1,()=>{f[c]=null});return{c(){for(let c=0;c<f.length;c+=1)f[c].c();e=bn()},l(c){for(let h=0;h<f.length;h+=1)f[h].l(c);e=bn()},m(c,h){for(let S=0;S<f.length;S+=1)f[S].m(c,h);Ut(c,e,h),n=!0},p(c,h){if(h&2){s=Object.keys(c[3].properties);let S;for(S=0;S<s.length;S+=1){const P=v0(c,s,S);f[S]?(f[S].p(P,h),rt(f[S],1)):(f[S]=x0(P),f[S].c(),rt(f[S],1),f[S].m(e.parentNode,e))}for(Or(),S=s.length;S<f.length;S+=1)v(S);Rr()}},i(c){if(!n){for(let h=0;h<s.length;h+=1)rt(f[h]);n=!0}},o(c){f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)ft(f[h]);n=!1},d(c){Mm(f,c),c&&Qe(e)}}}function wC(o){let e,n;return e=new rC({props:{$$slots:{default:[xC]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&514&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function EC(o){let e,n;return e=new jA({props:{"table$aria-label":o[3].layer.id,style:"width: 100%;",$$slots:{default:[wC]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&2&&(v["table$aria-label"]=s[3].layer.id),f&514&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function IC(o){let e,n,s,f,v;return e=new RA({props:{$$slots:{description:[yC],default:[gC]},$$scope:{ctx:o}}}),s=new IA({props:{$$slots:{default:[EC]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment),n=qn(),Ni(s.$$.fragment),f=qn()},l(c){$i(e.$$.fragment,c),n=Gn(c),$i(s.$$.fragment,c),f=Gn(c)},m(c,h){Vi(e,c,h),Ut(c,n,h),Vi(s,c,h),Ut(c,f,h),v=!0},p(c,h){const S={};h&514&&(S.$$scope={dirty:h,ctx:c}),e.$set(S);const P={};h&514&&(P.$$scope={dirty:h,ctx:c}),s.$set(P)},i(c){v||(rt(e.$$.fragment,c),rt(s.$$.fragment,c),v=!0)},o(c){ft(e.$$.fragment,c),ft(s.$$.fragment,c),v=!1},d(c){ji(e,c),c&&Qe(n),ji(s,c),c&&Qe(f)}}}function w0(o){let e,n;return e=new DA({props:{$$slots:{default:[IC]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&514&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function SC(o){let e,n,s=o[1],f=[];for(let c=0;c<s.length;c+=1)f[c]=w0(_0(o,s,c));const v=c=>ft(f[c],1,1,()=>{f[c]=null});return{c(){for(let c=0;c<f.length;c+=1)f[c].c();e=bn()},l(c){for(let h=0;h<f.length;h+=1)f[h].l(c);e=bn()},m(c,h){for(let S=0;S<f.length;S+=1)f[S].m(c,h);Ut(c,e,h),n=!0},p(c,h){if(h&2){s=c[1];let S;for(S=0;S<s.length;S+=1){const P=_0(c,s,S);f[S]?(f[S].p(P,h),rt(f[S],1)):(f[S]=w0(P),f[S].c(),rt(f[S],1),f[S].m(e.parentNode,e))}for(Or(),S=s.length;S<f.length;S+=1)v(S);Rr()}},i(c){if(!n){for(let h=0;h<s.length;h+=1)rt(f[h]);n=!0}},o(c){f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)ft(f[h]);n=!1},d(c){Mm(f,c),c&&Qe(e)}}}function TC(o){let e,n,s=o[0]&&b0(o);return{c(){s&&s.c(),e=bn()},l(f){s&&s.l(f),e=bn()},m(f,v){s&&s.m(f,v),Ut(f,e,v),n=!0},p(f,[v]){f[0]?s?(s.p(f,v),v&1&&rt(s,1)):(s=b0(f),s.c(),rt(s,1),s.m(e.parentNode,e)):s&&(Or(),ft(s,1,1,()=>{s=null}),Rr())},i(f){n||(rt(s),n=!0)},o(f){ft(s),n=!1},d(f){s&&s.d(f),f&&Qe(e)}}}function AC(o,e,n){let s,f;Ho(o,zy,c=>n(2,f=c));let{isAttributesTabVisible:v=!1}=e;return o.$$set=c=>{"isAttributesTabVisible"in c&&n(0,v=c.isAttributesTabVisible)},o.$$.update=()=>{o.$$.dirty&4&&n(1,s=f)},[v,s,f]}class CC extends Tn{constructor(e){super(),An(this,e,AC,TC,Sn,{isAttributesTabVisible:0})}}function kC(o){let e=o[13]+"",n;return{c(){n=pa(e)},l(s){n=fa(s,e)},m(s,f){Ut(s,n,f)},p(s,f){f&8192&&e!==(e=s[13]+"")&&tu(n,e)},d(s){s&&Qe(n)}}}function MC(o){let e,n;return e=new Gw({props:{$$slots:{default:[kC]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&12288&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function LC(o){let e,n;return e=new P2({props:{tab:o[13],minWidth:!0,$$slots:{default:[MC]},$$scope:{ctx:o}}}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},p(s,f){const v={};f&8192&&(v.tab=s[13]),f&12288&&(v.$$scope={dirty:f,ctx:s}),e.$set(v)},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function PC(o){let e,n,s;function f(c){o[9](c)}let v={tabs:o[5],$$slots:{default:[LC,({tab:c})=>({13:c}),({tab:c})=>c?8192:0]},$$scope:{ctx:o}};return o[1]!==void 0&&(v.active=o[1]),e=new W2({props:v}),Zi.push(()=>$l(e,"active",f)),{c(){Ni(e.$$.fragment)},l(c){$i(e.$$.fragment,c)},m(c,h){Vi(e,c,h),s=!0},p(c,h){const S={};h&12288&&(S.$$scope={dirty:h,ctx:c}),!n&&h&2&&(n=!0,S.active=c[1],eu(()=>n=!1)),e.$set(S)},i(c){s||(rt(e.$$.fragment,c),s=!0)},o(c){ft(e.$$.fragment,c),s=!1},d(c){ji(e,c)}}}function zC(o){let e,n,s,f,v,c,h,S;n=new Q0({props:{$$slots:{default:[PC]},$$scope:{ctx:o}}});function P(R){o[10](R)}let D={isLayersTabVisible:o[3]};return o[2]!==void 0&&(D.updateLayers=o[2]),f=new yA({props:D}),Zi.push(()=>$l(f,"updateLayers",P)),h=new CC({props:{isAttributesTabVisible:o[4]}}),{c(){e=_i("div"),Ni(n.$$.fragment),s=qn(),Ni(f.$$.fragment),c=qn(),Ni(h.$$.fragment),this.h()},l(R){e=vi(R,"DIV",{class:!0});var O=mi(e);$i(n.$$.fragment,O),s=Gn(O),$i(f.$$.fragment,O),c=Gn(O),$i(h.$$.fragment,O),O.forEach(Qe),this.h()},h(){ii(e,"class","drawer-content svelte-kw9kwo")},m(R,O){Ut(R,e,O),Vi(n,e,null),sn(e,s),Vi(f,e,null),sn(e,c),Vi(h,e,null),S=!0},p(R,O){const Y={};O&4098&&(Y.$$scope={dirty:O,ctx:R}),n.$set(Y);const ee={};O&8&&(ee.isLayersTabVisible=R[3]),!v&&O&4&&(v=!0,ee.updateLayers=R[2],eu(()=>v=!1)),f.$set(ee);const he={};O&16&&(he.isAttributesTabVisible=R[4]),h.$set(he)},i(R){S||(rt(n.$$.fragment,R),rt(f.$$.fragment,R),rt(h.$$.fragment,R),S=!0)},o(R){ft(n.$$.fragment,R),ft(f.$$.fragment,R),ft(h.$$.fragment,R),S=!1},d(R){R&&Qe(e),ji(n),ji(f),ji(h)}}}function DC(o){let e,n;const s=o[8].default,f=mn(s,o,o[12],null);return{c(){e=_i("main"),f&&f.c(),this.h()},l(v){e=vi(v,"MAIN",{class:!0});var c=mi(e);f&&f.l(c),c.forEach(Qe),this.h()},h(){ii(e,"class","main-content svelte-kw9kwo")},m(v,c){Ut(v,e,c),f&&f.m(e,null),n=!0},p(v,c){f&&f.p&&(!n||c&4096)&&gn(f,s,v,v[12],n?_n(s,v[12],c,null):yn(v[12]),null)},i(v){n||(rt(f,v),n=!0)},o(v){ft(f,v),n=!1},d(v){v&&Qe(e),f&&f.d(v)}}}function RC(o){let e,n,s,f,v,c;function h(P){o[11](P)}let S={variant:"dismissible",$$slots:{default:[zC]},$$scope:{ctx:o}};return o[0]!==void 0&&(S.open=o[0]),n=new g2({props:S}),Zi.push(()=>$l(n,"open",h)),v=new y2({props:{class:"app-content",$$slots:{default:[DC]},$$scope:{ctx:o}}}),{c(){e=_i("div"),Ni(n.$$.fragment),f=qn(),Ni(v.$$.fragment),this.h()},l(P){e=vi(P,"DIV",{class:!0});var D=mi(e);$i(n.$$.fragment,D),f=Gn(D),$i(v.$$.fragment,D),D.forEach(Qe),this.h()},h(){ii(e,"class","drawer-container svelte-kw9kwo")},m(P,D){Ut(P,e,D),Vi(n,e,null),sn(e,f),Vi(v,e,null),c=!0},p(P,[D]){const R={};D&4126&&(R.$$scope={dirty:D,ctx:P}),!s&&D&1&&(s=!0,R.open=P[0],eu(()=>s=!1)),n.$set(R);const O={};D&4096&&(O.$$scope={dirty:D,ctx:P}),v.$set(O)},i(P){c||(rt(n.$$.fragment,P),rt(v.$$.fragment,P),c=!0)},o(P){ft(n.$$.fragment,P),ft(v.$$.fragment,P),c=!1},d(P){P&&Qe(e),ji(n),ji(v)}}}function OC(o,e,n){let s,f;Ho(o,zy,re=>n(7,f=re));let{$$slots:v={},$$scope:c}=e,{open:h=!1}=e,S=["Layers","Attributes"],P="Layers",D=!1,R=!1,O=()=>{};function Y(re){P=re,n(1,P)}function ee(re){O=re,n(2,O)}function he(re){h=re,n(0,h),n(6,s),n(7,f)}return o.$$set=re=>{"open"in re&&n(0,h=re.open),"$$scope"in re&&n(12,c=re.$$scope)},o.$$.update=()=>{if(o.$$.dirty&2)switch(P){case"Layers":n(3,D=!0),n(4,R=!1);break;case"Attributes":n(3,D=!1),n(4,R=!0);break}o.$$.dirty&128&&n(6,s=f),o.$$.dirty&64&&s&&s.length>0&&n(0,h=!0),o.$$.dirty&5&&O()},[h,P,O,D,R,S,s,f,v,Y,ee,he,c]}class BC extends Tn{constructor(e){super(),An(this,e,OC,RC,Sn,{open:0})}}var wd={exports:{}};(function(o,e){(function(n,s){o.exports=s()})(Xl,function(){var n,s,f;function v(h,S){if(!n)n=S;else if(!s)s=S;else{var P="var sharedChunk = {}; ("+n+")(sharedChunk); ("+s+")(sharedChunk);",D={};n(D),f=S(D),typeof window!="undefined"&&(f.workerUrl=window.URL.createObjectURL(new Blob([P],{type:"text/javascript"})))}}v(["exports"],function(h){var S=P;function P(r,i,u,m){this.cx=3*r,this.bx=3*(u-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(m-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=i,this.p2x=u,this.p2y=m}function D(r,i,u,m){const b=new S(r,i,u,m);return function(E){return b.solve(E)}}P.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,i){if(i===void 0&&(i=1e-6),r<0)return 0;if(r>1)return 1;for(var u=r,m=0;m<8;m++){var b=this.sampleCurveX(u)-r;if(Math.abs(b)<i)return u;var E=this.sampleCurveDerivativeX(u);if(Math.abs(E)<1e-6)break;u-=b/E}var T=0,z=1;for(u=r,m=0;m<20&&(b=this.sampleCurveX(u),!(Math.abs(b-r)<i));m++)r>b?T=u:z=u,u=.5*(z-T)+T;return u},solve:function(r,i){return this.sampleCurveY(this.solveCurveX(r,i))}};const R=D(.25,.1,.25,1);function O(r,i,u){return Math.min(u,Math.max(i,r))}function Y(r,i,u){const m=u-i,b=((r-i)%m+m)%m+i;return b===i?u:b}function ee(r,...i){for(const u of i)for(const m in u)r[m]=u[m];return r}let he=1;function re(r,i){r.forEach(u=>{i[u]&&(i[u]=i[u].bind(i))})}function ve(r,i,u){const m={};for(const b in r)m[b]=i.call(u||this,r[b],b,r);return m}function se(r,i,u){const m={};for(const b in r)i.call(u||this,r[b],b,r)&&(m[b]=r[b]);return m}function we(r){return Array.isArray(r)?r.map(we):typeof r=="object"&&r?ve(r,we):r}const Ge={};function Ue(r){Ge[r]||(typeof console!="undefined"&&console.warn(r),Ge[r]=!0)}function He(r,i,u){return(u.y-r.y)*(i.x-r.x)>(i.y-r.y)*(u.x-r.x)}function fe(r){let i=0;for(let u,m,b=0,E=r.length,T=E-1;b<E;T=b++)u=r[b],m=r[T],i+=(m.x-u.x)*(u.y+m.y);return i}function ut(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function at(r){const i={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,m,b,E)=>{const T=b||E;return i[m]=!T||T.toLowerCase(),""}),i["max-age"]){const u=parseInt(i["max-age"],10);isNaN(u)?delete i["max-age"]:i["max-age"]=u}return i}let je,Fe,Dt=null;function qe(r){if(Dt==null){const i=r.navigator?r.navigator.userAgent:null;Dt=!!r.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Dt}function Mt(r){return typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap}const li={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(r){const i=requestAnimationFrame(r);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(r,i=0){const u=window.document.createElement("canvas"),m=u.getContext("2d");if(!m)throw new Error("failed to create canvas 2d context");return u.width=r.width,u.height=r.height,m.drawImage(r,0,0,r.width,r.height),m.getImageData(-i,-i,r.width+2*i,r.height+2*i)},resolveURL:r=>(je||(je=document.createElement("a")),je.href=r,je.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Fe==null&&(Fe=matchMedia("(prefers-reduced-motion: reduce)")),Fe.matches)}};var Et=Gt;function Gt(r,i){this.x=r,this.y=i}Gt.prototype={clone:function(){return new Gt(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,i){return this.clone()._rotateAround(r,i)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var i=r.x-this.x,u=r.y-this.y;return i*i+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,i){return Math.atan2(this.x*i-this.y*r,this.x*r+this.y*i)},_matMult:function(r){var i=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=i,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var i=Math.cos(r),u=Math.sin(r),m=u*this.x+i*this.y;return this.x=i*this.x-u*this.y,this.y=m,this},_rotateAround:function(r,i){var u=Math.cos(r),m=Math.sin(r),b=i.y+m*(this.x-i.x)+u*(this.y-i.y);return this.x=i.x+u*(this.x-i.x)-m*(this.y-i.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Gt.convert=function(r){return r instanceof Gt?r:Array.isArray(r)?new Gt(r[0],r[1]):r};const Je={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},wt="mapbox-tiles";let Pt,ni,Xt=500,Xi=50;function ei(){typeof caches=="undefined"||Pt||(Pt=caches.open(wt))}let Jt=1/0;const bi={supported:!1,testSupport:function(r){!It&&ht&&(St?Ji(r):ai=r)}};let ai,ht,It=!1,St=!1;function Ji(r){const i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,ht),r.isContextLost())return;bi.supported=!0}catch{}r.deleteTexture(i),It=!0}typeof document!="undefined"&&(ht=document.createElement("img"),ht.onload=function(){ai&&Ji(ai),ai=null,St=!0},ht.onerror=function(){It=!0,ai=null},ht.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Qt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Qt);class gt extends Error{constructor(i,u,m,b){super(`AJAXError: ${u} (${i}): ${m}`),this.status=i,this.statusText=u,this.url=m,this.body=b}}const zi=ut()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ln(r,i){const u=new AbortController,m=new Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:zi(),signal:u.signal});let b=!1,E=!1;return r.type==="json"&&m.headers.set("Accept","application/json"),((T,z,U)=>{if(E)return;const V=Date.now();fetch(m).then(G=>G.ok?((q,K,$)=>{(r.type==="arrayBuffer"?q.arrayBuffer():r.type==="json"?q.json():q.text()).then(te=>{E||(K&&$&&function(de,_e,Oe){if(ei(),!Pt)return;const Ye={status:_e.status,statusText:_e.statusText,headers:new Headers};_e.headers.forEach((nt,vt)=>Ye.headers.set(vt,nt));const it=at(_e.headers.get("Cache-Control")||"");it["no-store"]||(it["max-age"]&&Ye.headers.set("Expires",new Date(Oe+1e3*it["max-age"]).toUTCString()),new Date(Ye.headers.get("Expires")).getTime()-Oe<42e4||function(nt,vt){if(ni===void 0)try{new Response(new ReadableStream),ni=!0}catch{ni=!1}ni?vt(nt.body):nt.blob().then(vt)}(_e,nt=>{const vt=new Response(nt,Ye);ei(),Pt&&Pt.then(ot=>ot.put(function(Kt){const Wt=Kt.indexOf("?");return Wt<0?Kt:Kt.slice(0,Wt)}(de.url),vt)).catch(ot=>Ue(ot.message))}))}(m,K,$),b=!0,i(null,te,q.headers.get("Cache-Control"),q.headers.get("Expires")))}).catch(te=>{E||i(new Error(te.message))})})(G,null,V):G.blob().then(q=>i(new gt(G.status,G.statusText,r.url,q)))).catch(G=>{G.code!==20&&i(new Error(G.message))})})(),{cancel:()=>{E=!0,b||u.abort()}}}const Cn=function(r,i){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){if(ut()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,i);if(!ut()){const m=r.url.substring(0,r.url.indexOf("://"));return(Je.REGISTERED_PROTOCOLS[m]||ln)(r,i)}}if(!(/^file:/.test(u=r.url)||/^file:/.test(zi())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ln(r,i);if(ut()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,i,void 0,!0)}var u;return function(m,b){const E=new XMLHttpRequest;E.open(m.method||"GET",m.url,!0),m.type==="arrayBuffer"&&(E.responseType="arraybuffer");for(const T in m.headers)E.setRequestHeader(T,m.headers[T]);return m.type==="json"&&(E.responseType="text",E.setRequestHeader("Accept","application/json")),E.withCredentials=m.credentials==="include",E.onerror=()=>{b(new Error(E.statusText))},E.onload=()=>{if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let T=E.response;if(m.type==="json")try{T=JSON.parse(E.response)}catch(z){return b(z)}b(null,T,E.getResponseHeader("Cache-Control"),E.getResponseHeader("Expires"))}else{const T=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});b(new gt(E.status,E.statusText,m.url,T))}},E.send(m.body),{cancel:()=>E.abort()}}(r,i)},Zn=function(r,i){return Cn(ee(r,{type:"arrayBuffer"}),i)};function Nr(r){const i=window.document.createElement("a");return i.href=r,i.protocol===window.document.location.protocol&&i.host===window.document.location.host}const Kr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let At,Bi;At=[],Bi=0;const Nn=function(r,i){if(bi.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),Bi>=Je.MAX_PARALLEL_IMAGE_REQUESTS){const E={requestParameters:r,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return At.push(E),E}Bi++;let u=!1;const m=()=>{if(!u)for(u=!0,Bi--;At.length&&Bi<Je.MAX_PARALLEL_IMAGE_REQUESTS;){const E=At.shift(),{requestParameters:T,callback:z,cancelled:U}=E;U||(E.cancel=Nn(T,z).cancel)}},b=Zn(r,(E,T,z,U)=>{m(),E?i(E):T&&function(V,G){typeof createImageBitmap=="function"?function(q,K){const $=new Blob([new Uint8Array(q)],{type:"image/png"});createImageBitmap($).then(te=>{K(null,te)}).catch(te=>{K(new Error(`Could not load image because of ${te.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(V,G):function(q,K){const $=new Image;$.onload=()=>{K(null,$),URL.revokeObjectURL($.src),$.onload=null,window.requestAnimationFrame(()=>{$.src=Kr})},$.onerror=()=>K(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const te=new Blob([new Uint8Array(q)],{type:"image/png"});$.src=q.byteLength?URL.createObjectURL(te):Kr}(V,G)}(T,(V,G)=>{V!=null?i(V):G!=null&&i(null,G,{cacheControl:z,expires:U})})});return{cancel:()=>{b.cancel(),m()}}};function rn(r,i,u){u[r]&&u[r].indexOf(i)!==-1||(u[r]=u[r]||[],u[r].push(i))}function Jn(r,i,u){if(u&&u[r]){const m=u[r].indexOf(i);m!==-1&&u[r].splice(m,1)}}class Ln{constructor(i,u={}){ee(this,u),this.type=i}}class zt extends Ln{constructor(i,u={}){super("error",ee({error:i},u))}}class Oi{on(i,u){return this._listeners=this._listeners||{},rn(i,u,this._listeners),this}off(i,u){return Jn(i,u,this._listeners),Jn(i,u,this._oneTimeListeners),this}once(i,u){return this._oneTimeListeners=this._oneTimeListeners||{},rn(i,u,this._oneTimeListeners),this}fire(i,u){typeof i=="string"&&(i=new Ln(i,u||{}));const m=i.type;if(this.listens(m)){i.target=this;const b=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const z of b)z.call(this,i);const E=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const z of E)Jn(m,z,this._oneTimeListeners),z.call(this,i);const T=this._eventedParent;T&&(ee(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(i))}else i instanceof zt&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,u){return this._eventedParent=i,this._eventedParentData=u,this}}var Ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Bt{constructor(i,u,m,b){this.message=(i?`${i}: `:"")+m,b&&(this.identifier=b),u!=null&&u.__line__&&(this.line=u.__line__)}}function Ki(r){const i=r.value;return i?[new Bt(r.key,i,"constants have been deprecated as of v8")]:[]}function Vn(r,...i){for(const u of i)for(const m in u)r[m]=u[m];return r}function Wn(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function _o(r){if(Array.isArray(r))return r.map(_o);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const i={};for(const u in r)i[u]=_o(r[u]);return i}return Wn(r)}class vo extends Error{constructor(i,u){super(u),this.message=u,this.key=i}}class aa{constructor(i,u=[]){this.parent=i,this.bindings={};for(const[m,b]of u)this.bindings[m]=b}concat(i){return new aa(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Ar={kind:"null"},yi={kind:"number"},On={kind:"string"},xn={kind:"boolean"},ro={kind:"color"},co={kind:"object"},dn={kind:"value"},sa={kind:"collator"},Io={kind:"formatted"},xr={kind:"resolvedImage"};function ne(r,i){return{kind:"array",itemType:r,N:i}}function ue(r){if(r.kind==="array"){const i=ue(r.itemType);return typeof r.N=="number"?`array<${i}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${i}>`}return r.kind}const pe=[Ar,yi,On,xn,ro,Io,co,ne(dn),xr];function Se(r,i){if(i.kind==="error")return null;if(r.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Se(r.itemType,i.itemType))&&(typeof r.N!="number"||r.N===i.N))return null}else{if(r.kind===i.kind)return null;if(r.kind==="value"){for(const u of pe)if(!Se(u,i))return null}}return`Expected ${ue(r)} but found ${ue(i)} instead.`}function ze(r,i){return i.some(u=>u.kind===r.kind)}function $e(r,i){return i.some(u=>u==="null"?r===null:u==="array"?Array.isArray(r):u==="object"?r&&!Array.isArray(r)&&typeof r=="object":u===typeof r)}var tt,Ie={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ne(r){return(r=Math.round(r))<0?0:r>255?255:r}function mt(r){return Ne(r[r.length-1]==="%"?parseFloat(r)/100*255:parseInt(r))}function ce(r){return(i=r[r.length-1]==="%"?parseFloat(r)/100:parseFloat(r))<0?0:i>1?1:i;var i}function W(r,i,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?r+(i-r)*u*6:2*u<1?i:3*u<2?r+(i-r)*(2/3-u)*6:r}try{tt={}.parseCSSColor=function(r){var i,u=r.replace(/ /g,"").toLowerCase();if(u in Ie)return Ie[u].slice();if(u[0]==="#")return u.length===4?(i=parseInt(u.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:u.length===7&&(i=parseInt(u.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var m=u.indexOf("("),b=u.indexOf(")");if(m!==-1&&b+1===u.length){var E=u.substr(0,m),T=u.substr(m+1,b-(m+1)).split(","),z=1;switch(E){case"rgba":if(T.length!==4)return null;z=ce(T.pop());case"rgb":return T.length!==3?null:[mt(T[0]),mt(T[1]),mt(T[2]),z];case"hsla":if(T.length!==4)return null;z=ce(T.pop());case"hsl":if(T.length!==3)return null;var U=(parseFloat(T[0])%360+360)%360/360,V=ce(T[1]),G=ce(T[2]),q=G<=.5?G*(V+1):G+V-G*V,K=2*G-q;return[Ne(255*W(K,q,U+1/3)),Ne(255*W(K,q,U)),Ne(255*W(K,q,U-1/3)),z];default:return null}}return null}}catch{}class X{constructor(i,u,m,b=1){this.r=i,this.g=u,this.b=m,this.a=b}static parse(i){if(!i)return;if(i instanceof X)return i;if(typeof i!="string")return;const u=tt(i);return u?new X(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[i,u,m,b]=this.toArray();return`rgba(${Math.round(i)},${Math.round(u)},${Math.round(m)},${b})`}toArray(){const{r:i,g:u,b:m,a:b}=this;return b===0?[0,0,0,0]:[255*i/b,255*u/b,255*m/b,b]}}X.black=new X(0,0,0,1),X.white=new X(1,1,1,1),X.transparent=new X(0,0,0,0),X.red=new X(1,0,0,1);class le{constructor(i,u,m){this.sensitivity=i?u?"variant":"case":u?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,u){return this.collator.compare(i,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class me{constructor(i,u,m,b,E){this.text=i,this.image=u,this.scale=m,this.fontStack=b,this.textColor=E}}class Te{constructor(i){this.sections=i}static fromString(i){return new Te([new me(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Te?i:Te.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const u of this.sections){if(u.image){i.push(["image",u.image.name]);continue}i.push(u.text);const m={};u.fontStack&&(m["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(m["font-scale"]=u.scale),u.textColor&&(m["text-color"]=["rgba"].concat(u.textColor.toArray())),i.push(m)}return i}}class xe{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new xe({name:i,available:!1}):null}serialize(){return["image",this.name]}}function Le(r,i,u,m){return typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof u=="number"&&u>=0&&u<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[r,i,u,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[r,i,u,m]:[r,i,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Me(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof X||r instanceof le||r instanceof Te||r instanceof xe)return!0;if(Array.isArray(r)){for(const i of r)if(!Me(i))return!1;return!0}if(typeof r=="object"){for(const i in r)if(!Me(r[i]))return!1;return!0}return!1}function Pe(r){if(r===null)return Ar;if(typeof r=="string")return On;if(typeof r=="boolean")return xn;if(typeof r=="number")return yi;if(r instanceof X)return ro;if(r instanceof le)return sa;if(r instanceof Te)return Io;if(r instanceof xe)return xr;if(Array.isArray(r)){const i=r.length;let u;for(const m of r){const b=Pe(m);if(u){if(u===b)continue;u=dn;break}u=b}return ne(u||dn,i)}return co}function yt(r){const i=typeof r;return r===null?"":i==="string"||i==="number"||i==="boolean"?String(r):r instanceof X||r instanceof Te||r instanceof xe?r.toString():JSON.stringify(r)}class st{constructor(i,u){this.type=i,this.value=u}static parse(i,u){if(i.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Me(i[1]))return u.error("invalid value");const m=i[1];let b=Pe(m);const E=u.expectedType;return b.kind!=="array"||b.N!==0||!E||E.kind!=="array"||typeof E.N=="number"&&E.N!==0||(b=E),new st(b,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof X?["rgba"].concat(this.value.toArray()):this.value instanceof Te?this.value.serialize():this.value}}class _t{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const si={string:On,number:yi,boolean:xn,object:co};class De{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");let m,b=1;const E=i[0];if(E==="array"){let z,U;if(i.length>2){const V=i[1];if(typeof V!="string"||!(V in si)||V==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);z=si[V],b++}else z=dn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return u.error('The length argument to "array" must be a positive integer literal',2);U=i[2],b++}m=ne(z,U)}else m=si[E];const T=[];for(;b<i.length;b++){const z=u.parse(i[b],b,dn);if(!z)return null;T.push(z)}return new De(m,T)}evaluate(i){for(let u=0;u<this.args.length;u++){const m=this.args[u].evaluate(i);if(!Se(this.type,Pe(m)))return m;if(u===this.args.length-1)throw new _t(`Expected value to be of type ${ue(this.type)}, but found ${ue(Pe(m))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,u=[i.kind];if(i.kind==="array"){const m=i.itemType;if(m.kind==="string"||m.kind==="number"||m.kind==="boolean"){u.push(m.kind);const b=i.N;(typeof b=="number"||this.args.length>1)&&u.push(b)}}return u.concat(this.args.map(m=>m.serialize()))}}class Yt{constructor(i){this.type=Io,this.sections=i}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const m=i[1];if(!Array.isArray(m)&&typeof m=="object")return u.error("First argument must be an image or text section.");const b=[];let E=!1;for(let T=1;T<=i.length-1;++T){const z=i[T];if(E&&typeof z=="object"&&!Array.isArray(z)){E=!1;let U=null;if(z["font-scale"]&&(U=u.parse(z["font-scale"],1,yi),!U))return null;let V=null;if(z["text-font"]&&(V=u.parse(z["text-font"],1,ne(On)),!V))return null;let G=null;if(z["text-color"]&&(G=u.parse(z["text-color"],1,ro),!G))return null;const q=b[b.length-1];q.scale=U,q.font=V,q.textColor=G}else{const U=u.parse(i[T],1,dn);if(!U)return null;const V=U.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,b.push({content:U,scale:null,font:null,textColor:null})}}return new Yt(b)}evaluate(i){return new Te(this.sections.map(u=>{const m=u.content.evaluate(i);return Pe(m)===xr?new me("",m,null,null,null):new me(yt(m),null,u.scale?u.scale.evaluate(i):null,u.font?u.font.evaluate(i).join(","):null,u.textColor?u.textColor.evaluate(i):null)}))}eachChild(i){for(const u of this.sections)i(u.content),u.scale&&i(u.scale),u.font&&i(u.font),u.textColor&&i(u.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const u of this.sections){i.push(u.content.serialize());const m={};u.scale&&(m["font-scale"]=u.scale.serialize()),u.font&&(m["text-font"]=u.font.serialize()),u.textColor&&(m["text-color"]=u.textColor.serialize()),i.push(m)}return i}}class hi{constructor(i){this.type=xr,this.input=i}static parse(i,u){if(i.length!==2)return u.error("Expected two arguments.");const m=u.parse(i[1],1,On);return m?new hi(m):u.error("No image name provided.")}evaluate(i){const u=this.input.evaluate(i),m=xe.fromString(u);return m&&i.availableImages&&(m.available=i.availableImages.indexOf(u)>-1),m}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const kn={"to-boolean":xn,"to-color":ro,"to-number":yi,"to-string":On};class Wi{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const m=i[0];if((m==="to-boolean"||m==="to-string")&&i.length!==2)return u.error("Expected one argument.");const b=kn[m],E=[];for(let T=1;T<i.length;T++){const z=u.parse(i[T],T,dn);if(!z)return null;E.push(z)}return new Wi(b,E)}evaluate(i){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(i));if(this.type.kind==="color"){let u,m;for(const b of this.args){if(u=b.evaluate(i),m=null,u instanceof X)return u;if(typeof u=="string"){const E=i.parseColor(u);if(E)return E}else if(Array.isArray(u)&&(m=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Le(u[0],u[1],u[2],u[3]),!m))return new X(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new _t(m||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const m of this.args){if(u=m.evaluate(i),u===null)return 0;const b=Number(u);if(!isNaN(b))return b}throw new _t(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?Te.fromString(yt(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?xe.fromString(yt(this.args[0].evaluate(i))):yt(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Yt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new hi(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(u=>{i.push(u.serialize())}),i}}const nn=["Unknown","Point","LineString","Polygon"];class Fi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?nn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let u=this._parseColorCache[i];return u||(u=this._parseColorCache[i]=X.parse(i)),u}}class Ii{constructor(i,u,m,b){this.name=i,this.type=u,this._evaluate=m,this.args=b}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,u){const m=i[0],b=Ii.definitions[m];if(!b)return u.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const E=Array.isArray(b)?b[0]:b.type,T=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,z=T.filter(([V])=>!Array.isArray(V)||V.length===i.length-1);let U=null;for(const[V,G]of z){U=new rs(u.registry,u.path,null,u.scope);const q=[];let K=!1;for(let $=1;$<i.length;$++){const te=i[$],de=Array.isArray(V)?V[$-1]:V.type,_e=U.parse(te,1+q.length,de);if(!_e){K=!0;break}q.push(_e)}if(!K)if(Array.isArray(V)&&V.length!==q.length)U.error(`Expected ${V.length} arguments, but found ${q.length} instead.`);else{for(let $=0;$<q.length;$++){const te=Array.isArray(V)?V[$]:V.type,de=q[$];U.concat($+1).checkSubtype(te,de.type)}if(U.errors.length===0)return new Ii(m,E,G,q)}}if(z.length===1)u.errors.push(...U.errors);else{const V=(z.length?z:T).map(([q])=>{return K=q,Array.isArray(K)?`(${K.map(ue).join(", ")})`:`(${ue(K.type)}...)`;var K}).join(" | "),G=[];for(let q=1;q<i.length;q++){const K=u.parse(i[q],1+G.length);if(!K)return null;G.push(ue(K.type))}u.error(`Expected arguments of type ${V}, but found (${G.join(", ")}) instead.`)}return null}static register(i,u){Ii.definitions=u;for(const m in u)i[m]=Ii}}class hn{constructor(i,u,m){this.type=sa,this.locale=m,this.caseSensitive=i,this.diacriticSensitive=u}static parse(i,u){if(i.length!==2)return u.error("Expected one argument.");const m=i[1];if(typeof m!="object"||Array.isArray(m))return u.error("Collator options argument must be an object.");const b=u.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,xn);if(!b)return null;const E=u.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,xn);if(!E)return null;let T=null;return m.locale&&(T=u.parse(m.locale,1,On),!T)?null:new hn(b,E,T)}evaluate(i){return new le(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const cr=8192;function ho(r,i){r[0]=Math.min(r[0],i[0]),r[1]=Math.min(r[1],i[1]),r[2]=Math.max(r[2],i[0]),r[3]=Math.max(r[3],i[1])}function pr(r,i){return!(r[0]<=i[0]||r[2]>=i[2]||r[1]<=i[1]||r[3]>=i[3])}function Zo(r,i){const u=(180+r[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,b=Math.pow(2,i.z);return[Math.round(u*b*cr),Math.round(m*b*cr)]}function iu(r,i,u){const m=r[0]-i[0],b=r[1]-i[1],E=r[0]-u[0],T=r[1]-u[1];return m*T-E*b==0&&m*E<=0&&b*T<=0}function Cr(r,i){let u=!1;for(let T=0,z=i.length;T<z;T++){const U=i[T];for(let V=0,G=U.length;V<G-1;V++){if(iu(r,U[V],U[V+1]))return!1;(b=U[V])[1]>(m=r)[1]!=(E=U[V+1])[1]>m[1]&&m[0]<(E[0]-b[0])*(m[1]-b[1])/(E[1]-b[1])+b[0]&&(u=!u)}}var m,b,E;return u}function oo(r,i){for(let u=0;u<i.length;u++)if(Cr(r,i[u]))return!0;return!1}function al(r,i,u,m){const b=m[0]-u[0],E=m[1]-u[1],T=(r[0]-u[0])*E-b*(r[1]-u[1]),z=(i[0]-u[0])*E-b*(i[1]-u[1]);return T>0&&z<0||T<0&&z>0}function Qo(r,i,u){for(const V of u)for(let G=0;G<V.length-1;++G)if((z=[(T=V[G+1])[0]-(E=V[G])[0],T[1]-E[1]])[0]*(U=[(b=i)[0]-(m=r)[0],b[1]-m[1]])[1]-z[1]*U[0]!=0&&al(m,b,E,T)&&al(E,T,m,b))return!0;var m,b,E,T,z,U;return!1}function bo(r,i){for(let u=0;u<r.length;++u)if(!Cr(r[u],i))return!1;for(let u=0;u<r.length-1;++u)if(Qo(r[u],r[u+1],i))return!1;return!0}function Ma(r,i){for(let u=0;u<i.length;u++)if(bo(r,i[u]))return!0;return!1}function Br(r,i,u){const m=[];for(let b=0;b<r.length;b++){const E=[];for(let T=0;T<r[b].length;T++){const z=Zo(r[b][T],u);ho(i,z),E.push(z)}m.push(E)}return m}function La(r,i,u){const m=[];for(let b=0;b<r.length;b++){const E=Br(r[b],i,u);m.push(E)}return m}function la(r,i,u,m){if(r[0]<u[0]||r[0]>u[2]){const b=.5*m;let E=r[0]-u[0]>b?-m:u[0]-r[0]>b?m:0;E===0&&(E=r[0]-u[2]>b?-m:u[2]-r[0]>b?m:0),r[0]+=E}ho(i,r)}function _c(r,i,u,m){const b=Math.pow(2,m.z)*cr,E=[m.x*cr,m.y*cr],T=[];for(const z of r)for(const U of z){const V=[U.x+E[0],U.y+E[1]];la(V,i,u,b),T.push(V)}return T}function Pa(r,i,u,m){const b=Math.pow(2,m.z)*cr,E=[m.x*cr,m.y*cr],T=[];for(const U of r){const V=[];for(const G of U){const q=[G.x+E[0],G.y+E[1]];ho(i,q),V.push(q)}T.push(V)}if(i[2]-i[0]<=b/2){(z=i)[0]=z[1]=1/0,z[2]=z[3]=-1/0;for(const U of T)for(const V of U)la(V,i,u,b)}var z;return T}class sl{constructor(i,u){this.type=xn,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Me(i[1])){const m=i[1];if(m.type==="FeatureCollection")for(let b=0;b<m.features.length;++b){const E=m.features[b].geometry.type;if(E==="Polygon"||E==="MultiPolygon")return new sl(m,m.features[b].geometry)}else if(m.type==="Feature"){const b=m.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new sl(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new sl(m,m)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(u,m){const b=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],T=u.canonicalID();if(m.type==="Polygon"){const z=Br(m.coordinates,E,T),U=_c(u.geometry(),b,E,T);if(!pr(b,E))return!1;for(const V of U)if(!Cr(V,z))return!1}if(m.type==="MultiPolygon"){const z=La(m.coordinates,E,T),U=_c(u.geometry(),b,E,T);if(!pr(b,E))return!1;for(const V of U)if(!oo(V,z))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(u,m){const b=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],T=u.canonicalID();if(m.type==="Polygon"){const z=Br(m.coordinates,E,T),U=Pa(u.geometry(),b,E,T);if(!pr(b,E))return!1;for(const V of U)if(!bo(V,z))return!1}if(m.type==="MultiPolygon"){const z=La(m.coordinates,E,T),U=Pa(u.geometry(),b,E,T);if(!pr(b,E))return!1;for(const V of U)if(!Ma(V,z))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Va(r){if(r instanceof Ii&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof sl)return!1;let i=!0;return r.eachChild(u=>{i&&!Va(u)&&(i=!1)}),i}function ao(r){if(r instanceof Ii&&r.name==="feature-state")return!1;let i=!0;return r.eachChild(u=>{i&&!ao(u)&&(i=!1)}),i}function ma(r,i){if(r instanceof Ii&&i.indexOf(r.name)>=0)return!1;let u=!0;return r.eachChild(m=>{u&&!ma(m,i)&&(u=!1)}),u}class ko{constructor(i,u){this.type=u.type,this.name=i,this.boundExpression=u}static parse(i,u){if(i.length!==2||typeof i[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const m=i[1];return u.scope.has(m)?new ko(m,u.scope.get(m)):u.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class rs{constructor(i,u=[],m,b=new aa,E=[]){this.registry=i,this.path=u,this.key=u.map(T=>`[${T}]`).join(""),this.scope=b,this.errors=E,this.expectedType=m}parse(i,u,m,b,E={}){return u?this.concat(u,m,b)._parse(i,E):this._parse(i,E)}_parse(i,u){function m(b,E,T){return T==="assert"?new De(E,[b]):T==="coerce"?new Wi(E,[b]):b}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=i[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const E=this.registry[b];if(E){let T=E.parse(i,this);if(!T)return null;if(this.expectedType){const z=this.expectedType,U=T.type;if(z.kind!=="string"&&z.kind!=="number"&&z.kind!=="boolean"&&z.kind!=="object"&&z.kind!=="array"||U.kind!=="value")if(z.kind!=="color"&&z.kind!=="formatted"&&z.kind!=="resolvedImage"||U.kind!=="value"&&U.kind!=="string"){if(this.checkSubtype(z,U))return null}else T=m(T,z,u.typeAnnotation||"coerce");else T=m(T,z,u.typeAnnotation||"assert")}if(!(T instanceof st)&&T.type.kind!=="resolvedImage"&&nu(T)){const z=new Fi;try{T=new st(T.type,T.evaluate(z))}catch(U){return this.error(U.message),null}}return T}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,u,m){const b=typeof i=="number"?this.path.concat(i):this.path,E=m?this.scope.concat(m):this.scope;return new rs(this.registry,b,u||null,E,this.errors)}error(i,...u){const m=`${this.key}${u.map(b=>`[${b}]`).join("")}`;this.errors.push(new vo(m,i))}checkSubtype(i,u){const m=Se(i,u);return m&&this.error(m),m}}function nu(r){if(r instanceof ko)return nu(r.boundExpression);if(r instanceof Ii&&r.name==="error"||r instanceof hn||r instanceof sl)return!1;const i=r instanceof Wi||r instanceof De;let u=!0;return r.eachChild(m=>{u=i?u&&nu(m):u&&m instanceof st}),!!u&&Va(r)&&ma(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Vu(r,i){const u=r.length-1;let m,b,E=0,T=u,z=0;for(;E<=T;)if(z=Math.floor((E+T)/2),m=r[z],b=r[z+1],m<=i){if(z===u||i<b)return z;E=z+1}else{if(!(m>i))throw new _t("Input is not a number.");T=z-1}return 0}class ll{constructor(i,u,m){this.type=i,this.input=u,this.labels=[],this.outputs=[];for(const[b,E]of m)this.labels.push(b),this.outputs.push(E)}static parse(i,u){if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");const m=u.parse(i[1],1,yi);if(!m)return null;const b=[];let E=null;u.expectedType&&u.expectedType.kind!=="value"&&(E=u.expectedType);for(let T=1;T<i.length;T+=2){const z=T===1?-1/0:i[T],U=i[T+1],V=T,G=T+1;if(typeof z!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(b.length&&b[b.length-1][0]>=z)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const q=u.parse(U,G,E);if(!q)return null;E=E||q.type,b.push([z,q])}return new ll(E,m,b)}evaluate(i){const u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(i);const b=this.input.evaluate(i);if(b<=u[0])return m[0].evaluate(i);const E=u.length;return b>=u[E-1]?m[E-1].evaluate(i):m[Vu(u,b)].evaluate(i)}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&i.push(this.labels[u]),i.push(this.outputs[u].serialize());return i}}function So(r,i,u){return r*(1-u)+i*u}var Cl=Object.freeze({__proto__:null,number:So,color:function(r,i,u){return new X(So(r.r,i.r,u),So(r.g,i.g,u),So(r.b,i.b,u),So(r.a,i.a,u))},array:function(r,i,u){return r.map((m,b)=>So(m,i[b],u))}});const vc=.95047,bc=1.08883,xc=4/29,bs=6/29,ru=3*bs*bs,ou=Math.PI/180,ih=180/Math.PI;function kl(r){return r>.008856451679035631?Math.pow(r,1/3):r/ru+xc}function ga(r){return r>bs?r*r*r:ru*(r-xc)}function os(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function as(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Ns(r){const i=as(r.r),u=as(r.g),m=as(r.b),b=kl((.4124564*i+.3575761*u+.1804375*m)/vc),E=kl((.2126729*i+.7151522*u+.072175*m)/1);return{l:116*E-16,a:500*(b-E),b:200*(E-kl((.0193339*i+.119192*u+.9503041*m)/bc)),alpha:r.a}}function ir(r){let i=(r.l+16)/116,u=isNaN(r.a)?i:i+r.a/500,m=isNaN(r.b)?i:i-r.b/200;return i=1*ga(i),u=vc*ga(u),m=bc*ga(m),new X(os(3.2404542*u-1.5371385*i-.4985314*m),os(-.969266*u+1.8760108*i+.041556*m),os(.0556434*u-.2040259*i+1.0572252*m),r.alpha)}function Vs(r,i,u){const m=i-r;return r+u*(m>180||m<-180?m-360*Math.round(m/360):m)}const js={forward:Ns,reverse:ir,interpolate:function(r,i,u){return{l:So(r.l,i.l,u),a:So(r.a,i.a,u),b:So(r.b,i.b,u),alpha:So(r.alpha,i.alpha,u)}}},Uo={forward:function(r){const{l:i,a:u,b:m}=Ns(r),b=Math.atan2(m,u)*ih;return{h:b<0?b+360:b,c:Math.sqrt(u*u+m*m),l:i,alpha:r.a}},reverse:function(r){const i=r.h*ou,u=r.c;return ir({l:r.l,a:Math.cos(i)*u,b:Math.sin(i)*u,alpha:r.alpha})},interpolate:function(r,i,u){return{h:Vs(r.h,i.h,u),c:So(r.c,i.c,u),l:So(r.l,i.l,u),alpha:So(r.alpha,i.alpha,u)}}};var so=Object.freeze({__proto__:null,lab:js,hcl:Uo});class No{constructor(i,u,m,b,E){this.type=i,this.operator=u,this.interpolation=m,this.input=b,this.labels=[],this.outputs=[];for(const[T,z]of E)this.labels.push(T),this.outputs.push(z)}static interpolationFactor(i,u,m,b){let E=0;if(i.name==="exponential")E=ju(u,i.base,m,b);else if(i.name==="linear")E=ju(u,1,m,b);else if(i.name==="cubic-bezier"){const T=i.controlPoints;E=new S(T[0],T[1],T[2],T[3]).solve(ju(u,1,m,b))}return E}static parse(i,u){let[m,b,E,...T]=i;if(!Array.isArray(b)||b.length===0)return u.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const V=b[1];if(typeof V!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:V}}else{if(b[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const V=b.slice(1);if(V.length!==4||V.some(G=>typeof G!="number"||G<0||G>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:V}}}if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(E=u.parse(E,2,yi),!E)return null;const z=[];let U=null;m==="interpolate-hcl"||m==="interpolate-lab"?U=ro:u.expectedType&&u.expectedType.kind!=="value"&&(U=u.expectedType);for(let V=0;V<T.length;V+=2){const G=T[V],q=T[V+1],K=V+3,$=V+4;if(typeof G!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(z.length&&z[z.length-1][0]>=G)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',K);const te=u.parse(q,$,U);if(!te)return null;U=U||te.type,z.push([G,te])}return U.kind==="number"||U.kind==="color"||U.kind==="array"&&U.itemType.kind==="number"&&typeof U.N=="number"?new No(U,m,b,E,z):u.error(`Type ${ue(U)} is not interpolatable.`)}evaluate(i){const u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(i);const b=this.input.evaluate(i);if(b<=u[0])return m[0].evaluate(i);const E=u.length;if(b>=u[E-1])return m[E-1].evaluate(i);const T=Vu(u,b),z=No.interpolationFactor(this.interpolation,b,u[T],u[T+1]),U=m[T].evaluate(i),V=m[T+1].evaluate(i);return this.operator==="interpolate"?Cl[this.type.kind.toLowerCase()](U,V,z):this.operator==="interpolate-hcl"?Uo.reverse(Uo.interpolate(Uo.forward(U),Uo.forward(V),z)):js.reverse(js.interpolate(js.forward(U),js.forward(V),z))}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const u=[this.operator,i,this.input.serialize()];for(let m=0;m<this.labels.length;m++)u.push(this.labels[m],this.outputs[m].serialize());return u}}function ju(r,i,u,m){const b=m-u,E=r-u;return b===0?0:i===1?E/b:(Math.pow(i,E)-1)/(Math.pow(i,b)-1)}class qu{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expectected at least one argument.");let m=null;const b=u.expectedType;b&&b.kind!=="value"&&(m=b);const E=[];for(const z of i.slice(1)){const U=u.parse(z,1+E.length,m,void 0,{typeAnnotation:"omit"});if(!U)return null;m=m||U.type,E.push(U)}const T=b&&E.some(z=>Se(b,z.type));return new qu(T?dn:m,E)}evaluate(i){let u,m=null,b=0;for(const E of this.args)if(b++,m=E.evaluate(i),m&&m instanceof xe&&!m.available&&(u||(u=m.name),m=null,b===this.args.length&&(m=u)),m!==null)break;return m}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(u=>{i.push(u.serialize())}),i}}class Gu{constructor(i,u){this.type=u.type,this.bindings=[].concat(i),this.result=u}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const u of this.bindings)i(u[1]);i(this.result)}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const m=[];for(let E=1;E<i.length-1;E+=2){const T=i[E];if(typeof T!="string")return u.error(`Expected string, but found ${typeof T} instead.`,E);if(/[^a-zA-Z0-9_]/.test(T))return u.error("Variable names must contain only alphanumeric characters or '_'.",E);const z=u.parse(i[E+1],E+1);if(!z)return null;m.push([T,z])}const b=u.parse(i[i.length-1],i.length-1,u.expectedType,m);return b?new Gu(m,b):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[u,m]of this.bindings)i.push(u,m.serialize());return i.push(this.result.serialize()),i}}class au{constructor(i,u,m){this.type=i,this.index=u,this.input=m}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const m=u.parse(i[1],1,yi),b=u.parse(i[2],2,ne(u.expectedType||dn));return m&&b?new au(b.type.itemType,m,b):null}evaluate(i){const u=this.index.evaluate(i),m=this.input.evaluate(i);if(u<0)throw new _t(`Array index out of bounds: ${u} < 0.`);if(u>=m.length)throw new _t(`Array index out of bounds: ${u} > ${m.length-1}.`);if(u!==Math.floor(u))throw new _t(`Array index must be an integer, but found ${u} instead.`);return m[u]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class su{constructor(i,u){this.type=xn,this.needle=i,this.haystack=u}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const m=u.parse(i[1],1,dn),b=u.parse(i[2],2,dn);return m&&b?ze(m.type,[xn,On,yi,Ar,dn])?new su(m,b):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ue(m.type)} instead`):null}evaluate(i){const u=this.needle.evaluate(i),m=this.haystack.evaluate(i);if(!m)return!1;if(!$e(u,["boolean","string","number","null"]))throw new _t(`Expected first argument to be of type boolean, string, number or null, but found ${ue(Pe(u))} instead.`);if(!$e(m,["string","array"]))throw new _t(`Expected second argument to be of type array or string, but found ${ue(Pe(m))} instead.`);return m.indexOf(u)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Ml{constructor(i,u,m){this.type=yi,this.needle=i,this.haystack=u,this.fromIndex=m}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const m=u.parse(i[1],1,dn),b=u.parse(i[2],2,dn);if(!m||!b)return null;if(!ze(m.type,[xn,On,yi,Ar,dn]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ue(m.type)} instead`);if(i.length===4){const E=u.parse(i[3],3,yi);return E?new Ml(m,b,E):null}return new Ml(m,b)}evaluate(i){const u=this.needle.evaluate(i),m=this.haystack.evaluate(i);if(!$e(u,["boolean","string","number","null"]))throw new _t(`Expected first argument to be of type boolean, string, number or null, but found ${ue(Pe(u))} instead.`);if(!$e(m,["string","array"]))throw new _t(`Expected second argument to be of type array or string, but found ${ue(Pe(m))} instead.`);if(this.fromIndex){const b=this.fromIndex.evaluate(i);return m.indexOf(u,b)}return m.indexOf(u)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class lu{constructor(i,u,m,b,E,T){this.inputType=i,this.type=u,this.input=m,this.cases=b,this.outputs=E,this.otherwise=T}static parse(i,u){if(i.length<5)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return u.error("Expected an even number of arguments.");let m,b;u.expectedType&&u.expectedType.kind!=="value"&&(b=u.expectedType);const E={},T=[];for(let V=2;V<i.length-1;V+=2){let G=i[V];const q=i[V+1];Array.isArray(G)||(G=[G]);const K=u.concat(V);if(G.length===0)return K.error("Expected at least one branch label.");for(const te of G){if(typeof te!="number"&&typeof te!="string")return K.error("Branch labels must be numbers or strings.");if(typeof te=="number"&&Math.abs(te)>Number.MAX_SAFE_INTEGER)return K.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof te=="number"&&Math.floor(te)!==te)return K.error("Numeric branch labels must be integer values.");if(m){if(K.checkSubtype(m,Pe(te)))return null}else m=Pe(te);if(E[String(te)]!==void 0)return K.error("Branch labels must be unique.");E[String(te)]=T.length}const $=u.parse(q,V,b);if(!$)return null;b=b||$.type,T.push($)}const z=u.parse(i[1],1,dn);if(!z)return null;const U=u.parse(i[i.length-1],i.length-1,b);return U?z.type.kind!=="value"&&u.concat(1).checkSubtype(m,z.type)?null:new lu(m,b,z,E,T,U):null}evaluate(i){const u=this.input.evaluate(i);return(Pe(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),m=[],b={};for(const T of u){const z=b[this.cases[T]];z===void 0?(b[this.cases[T]]=m.length,m.push([this.cases[T],[T]])):m[z][1].push(T)}const E=T=>this.inputType.kind==="number"?Number(T):T;for(const[T,z]of m)i.push(z.length===1?E(z[0]):z.map(E)),i.push(this.outputs[T].serialize());return i.push(this.otherwise.serialize()),i}}class Hu{constructor(i,u,m){this.type=i,this.branches=u,this.otherwise=m}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return u.error("Expected an odd number of arguments.");let m;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);const b=[];for(let T=1;T<i.length-1;T+=2){const z=u.parse(i[T],T,xn);if(!z)return null;const U=u.parse(i[T+1],T+1,m);if(!U)return null;b.push([z,U]),m=m||U.type}const E=u.parse(i[i.length-1],i.length-1,m);return E?new Hu(m,b,E):null}evaluate(i){for(const[u,m]of this.branches)if(u.evaluate(i))return m.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[u,m]of this.branches)i(u),i(m);i(this.otherwise)}outputDefined(){return this.branches.every(([i,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(u=>{i.push(u.serialize())}),i}}class uu{constructor(i,u,m,b){this.type=i,this.input=u,this.beginIndex=m,this.endIndex=b}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const m=u.parse(i[1],1,dn),b=u.parse(i[2],2,yi);if(!m||!b)return null;if(!ze(m.type,[ne(dn),On,dn]))return u.error(`Expected first argument to be of type array or string, but found ${ue(m.type)} instead`);if(i.length===4){const E=u.parse(i[3],3,yi);return E?new uu(m.type,m,b,E):null}return new uu(m.type,m,b)}evaluate(i){const u=this.input.evaluate(i),m=this.beginIndex.evaluate(i);if(!$e(u,["string","array"]))throw new _t(`Expected first argument to be of type array or string, but found ${ue(Pe(u))} instead.`);if(this.endIndex){const b=this.endIndex.evaluate(i);return u.slice(m,b)}return u.slice(m)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function nh(r,i){return r==="=="||r==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Ll(r,i,u,m){return m.compare(i,u)===0}function ss(r,i,u){const m=r!=="=="&&r!=="!=";return class k1{constructor(E,T,z){this.type=xn,this.lhs=E,this.rhs=T,this.collator=z,this.hasUntypedArgument=E.type.kind==="value"||T.type.kind==="value"}static parse(E,T){if(E.length!==3&&E.length!==4)return T.error("Expected two or three arguments.");const z=E[0];let U=T.parse(E[1],1,dn);if(!U)return null;if(!nh(z,U.type))return T.concat(1).error(`"${z}" comparisons are not supported for type '${ue(U.type)}'.`);let V=T.parse(E[2],2,dn);if(!V)return null;if(!nh(z,V.type))return T.concat(2).error(`"${z}" comparisons are not supported for type '${ue(V.type)}'.`);if(U.type.kind!==V.type.kind&&U.type.kind!=="value"&&V.type.kind!=="value")return T.error(`Cannot compare types '${ue(U.type)}' and '${ue(V.type)}'.`);m&&(U.type.kind==="value"&&V.type.kind!=="value"?U=new De(V.type,[U]):U.type.kind!=="value"&&V.type.kind==="value"&&(V=new De(U.type,[V])));let G=null;if(E.length===4){if(U.type.kind!=="string"&&V.type.kind!=="string"&&U.type.kind!=="value"&&V.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(G=T.parse(E[3],3,sa),!G)return null}return new k1(U,V,G)}evaluate(E){const T=this.lhs.evaluate(E),z=this.rhs.evaluate(E);if(m&&this.hasUntypedArgument){const U=Pe(T),V=Pe(z);if(U.kind!==V.kind||U.kind!=="string"&&U.kind!=="number")throw new _t(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${U.kind}, ${V.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const U=Pe(T),V=Pe(z);if(U.kind!=="string"||V.kind!=="string")return i(E,T,z)}return this.collator?u(E,T,z,this.collator.evaluate(E)):i(E,T,z)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}serialize(){const E=[r];return this.eachChild(T=>{E.push(T.serialize())}),E}}}const rh=ss("==",function(r,i,u){return i===u},Ll),Vo=ss("!=",function(r,i,u){return i!==u},function(r,i,u,m){return!Ll(0,i,u,m)}),wc=ss("<",function(r,i,u){return i<u},function(r,i,u,m){return m.compare(i,u)<0}),qs=ss(">",function(r,i,u){return i>u},function(r,i,u,m){return m.compare(i,u)>0}),Gs=ss("<=",function(r,i,u){return i<=u},function(r,i,u,m){return m.compare(i,u)<=0}),ul=ss(">=",function(r,i,u){return i>=u},function(r,i,u,m){return m.compare(i,u)>=0});class xs{constructor(i,u,m,b,E){this.type=On,this.number=i,this.locale=u,this.currency=m,this.minFractionDigits=b,this.maxFractionDigits=E}static parse(i,u){if(i.length!==3)return u.error("Expected two arguments.");const m=u.parse(i[1],1,yi);if(!m)return null;const b=i[2];if(typeof b!="object"||Array.isArray(b))return u.error("NumberFormat options argument must be an object.");let E=null;if(b.locale&&(E=u.parse(b.locale,1,On),!E))return null;let T=null;if(b.currency&&(T=u.parse(b.currency,1,On),!T))return null;let z=null;if(b["min-fraction-digits"]&&(z=u.parse(b["min-fraction-digits"],1,yi),!z))return null;let U=null;return b["max-fraction-digits"]&&(U=u.parse(b["max-fraction-digits"],1,yi),!U)?null:new xs(m,E,T,z,U)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class ls{constructor(i){this.type=yi,this.input=i}static parse(i,u){if(i.length!==2)return u.error(`Expected 1 argument, but found ${i.length-1} instead.`);const m=u.parse(i[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${ue(m.type)} instead.`):new ls(m):null}evaluate(i){const u=this.input.evaluate(i);if(typeof u=="string"||Array.isArray(u))return u.length;throw new _t(`Expected value to be of type string or array, but found ${ue(Pe(u))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(u=>{i.push(u.serialize())}),i}}const ja={"==":rh,"!=":Vo,">":qs,"<":wc,">=":ul,"<=":Gs,array:De,at:au,boolean:De,case:Hu,coalesce:qu,collator:hn,format:Yt,image:hi,in:su,"index-of":Ml,interpolate:No,"interpolate-hcl":No,"interpolate-lab":No,length:ls,let:Gu,literal:st,match:lu,number:De,"number-format":xs,object:De,slice:uu,step:ll,string:De,"to-boolean":Wi,"to-color":Wi,"to-number":Wi,"to-string":Wi,var:ko,within:sl};function Hs(r,[i,u,m,b]){i=i.evaluate(r),u=u.evaluate(r),m=m.evaluate(r);const E=b?b.evaluate(r):1,T=Le(i,u,m,E);if(T)throw new _t(T);return new X(i/255*E,u/255*E,m/255*E,E)}function ws(r,i){return r in i}function Zu(r,i){const u=i[r];return u===void 0?null:u}function Zs(r){return{type:r}}function kr(r){return{result:"success",value:r}}function cl(r){return{result:"error",value:r}}function Es(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Ec(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Wu(r){return!!r.expression&&r.expression.interpolated}function Pn(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function cu(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function lr(r){return r}function Xa(r,i){const u=i.type==="color",m=r.stops&&typeof r.stops[0][0]=="object",b=m||!(m||r.property!==void 0),E=r.type||(Wu(i)?"exponential":"interval");if(u&&((r=Vn({},r)).stops&&(r.stops=r.stops.map(V=>[V[0],X.parse(V[1])])),r.default=X.parse(r.default?r.default:i.default)),r.colorSpace&&r.colorSpace!=="rgb"&&!so[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let T,z,U;if(E==="exponential")T=du;else if(E==="interval")T=hu;else if(E==="categorical"){T=lo,z=Object.create(null);for(const V of r.stops)z[V[0]]=V[1];U=typeof r.stops[0][0]}else{if(E!=="identity")throw new Error(`Unknown function type "${E}"`);T=hl}if(m){const V={},G=[];for(let $=0;$<r.stops.length;$++){const te=r.stops[$],de=te[0].zoom;V[de]===void 0&&(V[de]={zoom:de,type:r.type,property:r.property,default:r.default,stops:[]},G.push(de)),V[de].stops.push([te[0].value,te[1]])}const q=[];for(const $ of G)q.push([V[$].zoom,Xa(V[$],i)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:No.interpolationFactor.bind(void 0,K),zoomStops:q.map($=>$[0]),evaluate:({zoom:$},te)=>du({stops:q,base:r.base},i,$).evaluate($,te)}}if(b){const V=E==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:No.interpolationFactor.bind(void 0,V),zoomStops:r.stops.map(G=>G[0]),evaluate:({zoom:G})=>T(r,i,G,z,U)}}return{kind:"source",evaluate(V,G){const q=G&&G.properties?G.properties[r.property]:void 0;return q===void 0?Pr(r.default,i.default):T(r,i,q,z,U)}}}function Pr(r,i,u){return r!==void 0?r:i!==void 0?i:u!==void 0?u:void 0}function lo(r,i,u,m,b){return Pr(typeof u===b?m[u]:void 0,r.default,i.default)}function hu(r,i,u){if(Pn(u)!=="number")return Pr(r.default,i.default);const m=r.stops.length;if(m===1||u<=r.stops[0][0])return r.stops[0][1];if(u>=r.stops[m-1][0])return r.stops[m-1][1];const b=Vu(r.stops.map(E=>E[0]),u);return r.stops[b][1]}function du(r,i,u){const m=r.base!==void 0?r.base:1;if(Pn(u)!=="number")return Pr(r.default,i.default);const b=r.stops.length;if(b===1||u<=r.stops[0][0])return r.stops[0][1];if(u>=r.stops[b-1][0])return r.stops[b-1][1];const E=Vu(r.stops.map(G=>G[0]),u),T=function(G,q,K,$){const te=$-K,de=G-K;return te===0?0:q===1?de/te:(Math.pow(q,de)-1)/(Math.pow(q,te)-1)}(u,m,r.stops[E][0],r.stops[E+1][0]),z=r.stops[E][1],U=r.stops[E+1][1];let V=Cl[i.type]||lr;if(r.colorSpace&&r.colorSpace!=="rgb"){const G=so[r.colorSpace];V=(q,K)=>G.reverse(G.interpolate(G.forward(q),G.forward(K),T))}return typeof z.evaluate=="function"?{evaluate(...G){const q=z.evaluate.apply(void 0,G),K=U.evaluate.apply(void 0,G);if(q!==void 0&&K!==void 0)return V(q,K,T)}}:V(z,U,T)}function hl(r,i,u){return i.type==="color"?u=X.parse(u):i.type==="formatted"?u=Te.fromString(u.toString()):i.type==="resolvedImage"?u=xe.fromString(u.toString()):Pn(u)===i.type||i.type==="enum"&&i.values[u]||(u=void 0),Pr(u,r.default,i.default)}Ii.register(ja,{error:[{kind:"error"},[On],(r,[i])=>{throw new _t(i.evaluate(r))}],typeof:[On,[dn],(r,[i])=>ue(Pe(i.evaluate(r)))],"to-rgba":[ne(yi,4),[ro],(r,[i])=>i.evaluate(r).toArray()],rgb:[ro,[yi,yi,yi],Hs],rgba:[ro,[yi,yi,yi,yi],Hs],has:{type:xn,overloads:[[[On],(r,[i])=>ws(i.evaluate(r),r.properties())],[[On,co],(r,[i,u])=>ws(i.evaluate(r),u.evaluate(r))]]},get:{type:dn,overloads:[[[On],(r,[i])=>Zu(i.evaluate(r),r.properties())],[[On,co],(r,[i,u])=>Zu(i.evaluate(r),u.evaluate(r))]]},"feature-state":[dn,[On],(r,[i])=>Zu(i.evaluate(r),r.featureState||{})],properties:[co,[],r=>r.properties()],"geometry-type":[On,[],r=>r.geometryType()],id:[dn,[],r=>r.id()],zoom:[yi,[],r=>r.globals.zoom],"heatmap-density":[yi,[],r=>r.globals.heatmapDensity||0],"line-progress":[yi,[],r=>r.globals.lineProgress||0],accumulated:[dn,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[yi,Zs(yi),(r,i)=>{let u=0;for(const m of i)u+=m.evaluate(r);return u}],"*":[yi,Zs(yi),(r,i)=>{let u=1;for(const m of i)u*=m.evaluate(r);return u}],"-":{type:yi,overloads:[[[yi,yi],(r,[i,u])=>i.evaluate(r)-u.evaluate(r)],[[yi],(r,[i])=>-i.evaluate(r)]]},"/":[yi,[yi,yi],(r,[i,u])=>i.evaluate(r)/u.evaluate(r)],"%":[yi,[yi,yi],(r,[i,u])=>i.evaluate(r)%u.evaluate(r)],ln2:[yi,[],()=>Math.LN2],pi:[yi,[],()=>Math.PI],e:[yi,[],()=>Math.E],"^":[yi,[yi,yi],(r,[i,u])=>Math.pow(i.evaluate(r),u.evaluate(r))],sqrt:[yi,[yi],(r,[i])=>Math.sqrt(i.evaluate(r))],log10:[yi,[yi],(r,[i])=>Math.log(i.evaluate(r))/Math.LN10],ln:[yi,[yi],(r,[i])=>Math.log(i.evaluate(r))],log2:[yi,[yi],(r,[i])=>Math.log(i.evaluate(r))/Math.LN2],sin:[yi,[yi],(r,[i])=>Math.sin(i.evaluate(r))],cos:[yi,[yi],(r,[i])=>Math.cos(i.evaluate(r))],tan:[yi,[yi],(r,[i])=>Math.tan(i.evaluate(r))],asin:[yi,[yi],(r,[i])=>Math.asin(i.evaluate(r))],acos:[yi,[yi],(r,[i])=>Math.acos(i.evaluate(r))],atan:[yi,[yi],(r,[i])=>Math.atan(i.evaluate(r))],min:[yi,Zs(yi),(r,i)=>Math.min(...i.map(u=>u.evaluate(r)))],max:[yi,Zs(yi),(r,i)=>Math.max(...i.map(u=>u.evaluate(r)))],abs:[yi,[yi],(r,[i])=>Math.abs(i.evaluate(r))],round:[yi,[yi],(r,[i])=>{const u=i.evaluate(r);return u<0?-Math.round(-u):Math.round(u)}],floor:[yi,[yi],(r,[i])=>Math.floor(i.evaluate(r))],ceil:[yi,[yi],(r,[i])=>Math.ceil(i.evaluate(r))],"filter-==":[xn,[On,dn],(r,[i,u])=>r.properties()[i.value]===u.value],"filter-id-==":[xn,[dn],(r,[i])=>r.id()===i.value],"filter-type-==":[xn,[On],(r,[i])=>r.geometryType()===i.value],"filter-<":[xn,[On,dn],(r,[i,u])=>{const m=r.properties()[i.value],b=u.value;return typeof m==typeof b&&m<b}],"filter-id-<":[xn,[dn],(r,[i])=>{const u=r.id(),m=i.value;return typeof u==typeof m&&u<m}],"filter->":[xn,[On,dn],(r,[i,u])=>{const m=r.properties()[i.value],b=u.value;return typeof m==typeof b&&m>b}],"filter-id->":[xn,[dn],(r,[i])=>{const u=r.id(),m=i.value;return typeof u==typeof m&&u>m}],"filter-<=":[xn,[On,dn],(r,[i,u])=>{const m=r.properties()[i.value],b=u.value;return typeof m==typeof b&&m<=b}],"filter-id-<=":[xn,[dn],(r,[i])=>{const u=r.id(),m=i.value;return typeof u==typeof m&&u<=m}],"filter->=":[xn,[On,dn],(r,[i,u])=>{const m=r.properties()[i.value],b=u.value;return typeof m==typeof b&&m>=b}],"filter-id->=":[xn,[dn],(r,[i])=>{const u=r.id(),m=i.value;return typeof u==typeof m&&u>=m}],"filter-has":[xn,[dn],(r,[i])=>i.value in r.properties()],"filter-has-id":[xn,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[xn,[ne(On)],(r,[i])=>i.value.indexOf(r.geometryType())>=0],"filter-id-in":[xn,[ne(dn)],(r,[i])=>i.value.indexOf(r.id())>=0],"filter-in-small":[xn,[On,ne(dn)],(r,[i,u])=>u.value.indexOf(r.properties()[i.value])>=0],"filter-in-large":[xn,[On,ne(dn)],(r,[i,u])=>function(m,b,E,T){for(;E<=T;){const z=E+T>>1;if(b[z]===m)return!0;b[z]>m?T=z-1:E=z+1}return!1}(r.properties()[i.value],u.value,0,u.value.length-1)],all:{type:xn,overloads:[[[xn,xn],(r,[i,u])=>i.evaluate(r)&&u.evaluate(r)],[Zs(xn),(r,i)=>{for(const u of i)if(!u.evaluate(r))return!1;return!0}]]},any:{type:xn,overloads:[[[xn,xn],(r,[i,u])=>i.evaluate(r)||u.evaluate(r)],[Zs(xn),(r,i)=>{for(const u of i)if(u.evaluate(r))return!0;return!1}]]},"!":[xn,[xn],(r,[i])=>!i.evaluate(r)],"is-supported-script":[xn,[On],(r,[i])=>{const u=r.globals&&r.globals.isSupportedScript;return!u||u(i.evaluate(r))}],upcase:[On,[On],(r,[i])=>i.evaluate(r).toUpperCase()],downcase:[On,[On],(r,[i])=>i.evaluate(r).toLowerCase()],concat:[On,Zs(dn),(r,i)=>i.map(u=>yt(u.evaluate(r))).join("")],"resolved-locale":[On,[sa],(r,[i])=>i.evaluate(r).resolvedLocale()]});class Xu{constructor(i,u){this.expression=i,this._warningHistory={},this._evaluator=new Fi,this._defaultValue=u?function(m){return m.type==="color"&&cu(m.default)?new X(0,0,0,0):m.type==="color"?X.parse(m.default)||null:m.default===void 0?null:m.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(i,u,m,b,E,T){return this._evaluator.globals=i,this._evaluator.feature=u,this._evaluator.featureState=m,this._evaluator.canonical=b,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(i,u,m,b,E,T){this._evaluator.globals=i,this._evaluator.feature=u||null,this._evaluator.featureState=m||null,this._evaluator.canonical=b,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=T||null;try{const z=this.expression.evaluate(this._evaluator);if(z==null||typeof z=="number"&&z!=z)return this._defaultValue;if(this._enumValues&&!(z in this._enumValues))throw new _t(`Expected value to be one of ${Object.keys(this._enumValues).map(U=>JSON.stringify(U)).join(", ")}, but found ${JSON.stringify(z)} instead.`);return z}catch(z){return this._warningHistory[z.message]||(this._warningHistory[z.message]=!0,typeof console!="undefined"&&console.warn(z.message)),this._defaultValue}}}function us(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in ja}function cs(r,i){const u=new rs(ja,[],i?function(b){const E={color:ro,string:On,number:yi,enum:On,boolean:xn,formatted:Io,resolvedImage:xr};return b.type==="array"?ne(E[b.value]||dn,b.length):E[b.type]}(i):void 0),m=u.parse(r,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?kr(new Xu(m,i)):cl(u.errors)}class pu{constructor(i,u){this.kind=i,this._styleExpression=u,this.isStateDependent=i!=="constant"&&!ao(u.expression)}evaluateWithoutErrorHandling(i,u,m,b,E,T){return this._styleExpression.evaluateWithoutErrorHandling(i,u,m,b,E,T)}evaluate(i,u,m,b,E,T){return this._styleExpression.evaluate(i,u,m,b,E,T)}}class Ws{constructor(i,u,m,b){this.kind=i,this.zoomStops=m,this._styleExpression=u,this.isStateDependent=i!=="camera"&&!ao(u.expression),this.interpolationType=b}evaluateWithoutErrorHandling(i,u,m,b,E,T){return this._styleExpression.evaluateWithoutErrorHandling(i,u,m,b,E,T)}evaluate(i,u,m,b,E,T){return this._styleExpression.evaluate(i,u,m,b,E,T)}interpolationFactor(i,u,m){return this.interpolationType?No.interpolationFactor(this.interpolationType,i,u,m):0}}function zr(r,i){const u=cs(r,i);if(u.result==="error")return u;const m=u.value.expression,b=Va(m);if(!b&&!Es(i))return cl([new vo("","data expressions not supported")]);const E=ma(m,["zoom"]);if(!E&&!Ec(i))return cl([new vo("","zoom expressions not supported")]);const T=Ku(m);return T||E?T instanceof vo?cl([T]):T instanceof No&&!Wu(i)?cl([new vo("",'"interpolate" expressions cannot be used with this property')]):kr(T?new Ws(b?"camera":"composite",u.value,T.labels,T instanceof No?T.interpolation:void 0):new pu(b?"constant":"source",u.value)):cl([new vo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Is{constructor(i,u){this._parameters=i,this._specification=u,Vn(this,Xa(this._parameters,this._specification))}static deserialize(i){return new Is(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Ku(r){let i=null;if(r instanceof Gu)i=Ku(r.result);else if(r instanceof qu){for(const u of r.args)if(i=Ku(u),i)break}else(r instanceof ll||r instanceof No)&&r.input instanceof Ii&&r.input.name==="zoom"&&(i=r);return i instanceof vo||r.eachChild(u=>{const m=Ku(u);m instanceof vo?i=m:!i&&m?i=new vo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&m&&i!==m&&(i=new vo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function $o(r){const i=r.key,u=r.value,m=r.valueSpec||{},b=r.objectElementValidators||{},E=r.style,T=r.styleSpec;let z=[];const U=Pn(u);if(U!=="object")return[new Bt(i,u,`object expected, ${U} found`)];for(const V in u){const G=V.split(".")[0],q=m[G]||m["*"];let K;if(b[G])K=b[G];else if(m[G])K=ta;else if(b["*"])K=b["*"];else{if(!m["*"]){z.push(new Bt(i,u[V],`unknown property "${V}"`));continue}K=ta}z=z.concat(K({key:(i&&`${i}.`)+V,value:u[V],valueSpec:q,style:E,styleSpec:T,object:u,objectKey:V},u))}for(const V in m)b[V]||m[V].required&&m[V].default===void 0&&u[V]===void 0&&z.push(new Bt(i,u,`missing required property "${V}"`));return z}function Ic(r){const i=r.value,u=r.valueSpec,m=r.style,b=r.styleSpec,E=r.key,T=r.arrayElementValidator||ta;if(Pn(i)!=="array")return[new Bt(E,i,`array expected, ${Pn(i)} found`)];if(u.length&&i.length!==u.length)return[new Bt(E,i,`array length ${u.length} expected, length ${i.length} found`)];if(u["min-length"]&&i.length<u["min-length"])return[new Bt(E,i,`array length at least ${u["min-length"]} expected, length ${i.length} found`)];let z={type:u.value,values:u.values};b.$version<7&&(z.function=u.function),Pn(u.value)==="object"&&(z=u.value);let U=[];for(let V=0;V<i.length;V++)U=U.concat(T({array:i,arrayIndex:V,value:i[V],valueSpec:z,style:m,styleSpec:b,key:`${E}[${V}]`}));return U}function oh(r){const i=r.key,u=r.value,m=r.valueSpec;let b=Pn(u);return b==="number"&&u!=u&&(b="NaN"),b!=="number"?[new Bt(i,u,`number expected, ${b} found`)]:"minimum"in m&&u<m.minimum?[new Bt(i,u,`${u} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&u>m.maximum?[new Bt(i,u,`${u} is greater than the maximum value ${m.maximum}`)]:[]}function Sc(r){const i=r.valueSpec,u=Wn(r.value.type);let m,b,E,T={};const z=u!=="categorical"&&r.value.property===void 0,U=!z,V=Pn(r.value.stops)==="array"&&Pn(r.value.stops[0])==="array"&&Pn(r.value.stops[0][0])==="object",G=$o({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function($){if(u==="identity")return[new Bt($.key,$.value,'identity function may not have a "stops" property')];let te=[];const de=$.value;return te=te.concat(Ic({key:$.key,value:de,valueSpec:$.valueSpec,style:$.style,styleSpec:$.styleSpec,arrayElementValidator:q})),Pn(de)==="array"&&de.length===0&&te.push(new Bt($.key,de,"array must have at least one stop")),te},default:function($){return ta({key:$.key,value:$.value,valueSpec:i,style:$.style,styleSpec:$.styleSpec})}}});return u==="identity"&&z&&G.push(new Bt(r.key,r.value,'missing required property "property"')),u==="identity"||r.value.stops||G.push(new Bt(r.key,r.value,'missing required property "stops"')),u==="exponential"&&r.valueSpec.expression&&!Wu(r.valueSpec)&&G.push(new Bt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(U&&!Es(r.valueSpec)?G.push(new Bt(r.key,r.value,"property functions not supported")):z&&!Ec(r.valueSpec)&&G.push(new Bt(r.key,r.value,"zoom functions not supported"))),u!=="categorical"&&!V||r.value.property!==void 0||G.push(new Bt(r.key,r.value,'"property" property is required')),G;function q($){let te=[];const de=$.value,_e=$.key;if(Pn(de)!=="array")return[new Bt(_e,de,`array expected, ${Pn(de)} found`)];if(de.length!==2)return[new Bt(_e,de,`array length 2 expected, length ${de.length} found`)];if(V){if(Pn(de[0])!=="object")return[new Bt(_e,de,`object expected, ${Pn(de[0])} found`)];if(de[0].zoom===void 0)return[new Bt(_e,de,"object stop key must have zoom")];if(de[0].value===void 0)return[new Bt(_e,de,"object stop key must have value")];if(E&&E>Wn(de[0].zoom))return[new Bt(_e,de[0].zoom,"stop zoom values must appear in ascending order")];Wn(de[0].zoom)!==E&&(E=Wn(de[0].zoom),b=void 0,T={}),te=te.concat($o({key:`${_e}[0]`,value:de[0],valueSpec:{zoom:{}},style:$.style,styleSpec:$.styleSpec,objectElementValidators:{zoom:oh,value:K}}))}else te=te.concat(K({key:`${_e}[0]`,value:de[0],valueSpec:{},style:$.style,styleSpec:$.styleSpec},de));return us(_o(de[1]))?te.concat([new Bt(`${_e}[1]`,de[1],"expressions are not allowed in function stops.")]):te.concat(ta({key:`${_e}[1]`,value:de[1],valueSpec:i,style:$.style,styleSpec:$.styleSpec}))}function K($,te){const de=Pn($.value),_e=Wn($.value),Oe=$.value!==null?$.value:te;if(m){if(de!==m)return[new Bt($.key,Oe,`${de} stop domain type must match previous stop domain type ${m}`)]}else m=de;if(de!=="number"&&de!=="string"&&de!=="boolean")return[new Bt($.key,Oe,"stop domain value must be a number, string, or boolean")];if(de!=="number"&&u!=="categorical"){let Ye=`number expected, ${de} found`;return Es(i)&&u===void 0&&(Ye+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Bt($.key,Oe,Ye)]}return u!=="categorical"||de!=="number"||isFinite(_e)&&Math.floor(_e)===_e?u!=="categorical"&&de==="number"&&b!==void 0&&_e<b?[new Bt($.key,Oe,"stop domain values must appear in ascending order")]:(b=_e,u==="categorical"&&_e in T?[new Bt($.key,Oe,"stop domain values must be unique")]:(T[_e]=!0,[])):[new Bt($.key,Oe,`integer expected, found ${_e}`)]}}function Ss(r){const i=(r.expressionContext==="property"?zr:cs)(_o(r.value),r.valueSpec);if(i.result==="error")return i.value.map(m=>new Bt(`${r.key}${m.key}`,r.value,m.message));const u=i.value.expression||i.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!u.outputDefined())return[new Bt(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!ao(u))return[new Bt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!ao(u))return[new Bt(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!ma(u,["zoom","feature-state"]))return[new Bt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Va(u))return[new Bt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ts(r){const i=r.key,u=r.value,m=r.valueSpec,b=[];return Array.isArray(m.values)?m.values.indexOf(Wn(u))===-1&&b.push(new Bt(i,u,`expected one of [${m.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(m.values).indexOf(Wn(u))===-1&&b.push(new Bt(i,u,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(u)} found`)),b}function dl(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const i of r.slice(1))if(!dl(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const fu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xs(r){if(r==null)return{filter:()=>!0,needGeometry:!1};dl(r)||(r=hs(r));const i=cs(r,fu);if(i.result==="error")throw new Error(i.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,m,b)=>i.value.evaluate(u,m,{},b),needGeometry:Tc(r)}}function As(r,i){return r<i?-1:r>i?1:0}function Tc(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let i=1;i<r.length;i++)if(Tc(r[i]))return!0;return!1}function hs(r){if(!r)return!0;const i=r[0];return r.length<=1?i!=="any":i==="=="?za(r[1],r[2],"=="):i==="!="?pl(za(r[1],r[2],"==")):i==="<"||i===">"||i==="<="||i===">="?za(r[1],r[2],i):i==="any"?(u=r.slice(1),["any"].concat(u.map(hs))):i==="all"?["all"].concat(r.slice(1).map(hs)):i==="none"?["all"].concat(r.slice(1).map(hs).map(pl)):i==="in"?mu(r[1],r.slice(2)):i==="!in"?pl(mu(r[1],r.slice(2))):i==="has"?gu(r[1]):i==="!has"?pl(gu(r[1])):i!=="within"||r;var u}function za(r,i,u){switch(r){case"$type":return[`filter-type-${u}`,i];case"$id":return[`filter-id-${u}`,i];default:return[`filter-${u}`,r,i]}}function mu(r,i){if(i.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(u=>typeof u!=typeof i[0])?["filter-in-large",r,["literal",i.sort(As)]]:["filter-in-small",r,["literal",i]]}}function gu(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function pl(r){return["!",r]}function Ka(r){return dl(_o(r.value))?Ss(Vn({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Pl(r)}function Pl(r){const i=r.value,u=r.key;if(Pn(i)!=="array")return[new Bt(u,i,`array expected, ${Pn(i)} found`)];const m=r.styleSpec;let b,E=[];if(i.length<1)return[new Bt(u,i,"filter array must have at least 1 element")];switch(E=E.concat(Ts({key:`${u}[0]`,value:i[0],valueSpec:m.filter_operator,style:r.style,styleSpec:r.styleSpec})),Wn(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Wn(i[1])==="$type"&&E.push(new Bt(u,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&E.push(new Bt(u,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(b=Pn(i[1]),b!=="string"&&E.push(new Bt(`${u}[1]`,i[1],`string expected, ${b} found`)));for(let T=2;T<i.length;T++)b=Pn(i[T]),Wn(i[1])==="$type"?E=E.concat(Ts({key:`${u}[${T}]`,value:i[T],valueSpec:m.geometry_type,style:r.style,styleSpec:r.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&E.push(new Bt(`${u}[${T}]`,i[T],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let T=1;T<i.length;T++)E=E.concat(Pl({key:`${u}[${T}]`,value:i[T],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":b=Pn(i[1]),i.length!==2?E.push(new Bt(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):b!=="string"&&E.push(new Bt(`${u}[1]`,i[1],`string expected, ${b} found`));break;case"within":b=Pn(i[1]),i.length!==2?E.push(new Bt(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):b!=="object"&&E.push(new Bt(`${u}[1]`,i[1],`object expected, ${b} found`))}return E}function Ks(r,i){const u=r.key,m=r.style,b=r.styleSpec,E=r.value,T=r.objectKey,z=b[`${i}_${r.layerType}`];if(!z)return[];const U=T.match(/^(.*)-transition$/);if(i==="paint"&&U&&z[U[1]]&&z[U[1]].transition)return ta({key:u,value:E,valueSpec:b.transition,style:m,styleSpec:b});const V=r.valueSpec||z[T];if(!V)return[new Bt(u,E,`unknown property "${T}"`)];let G;if(Pn(E)==="string"&&Es(V)&&!V.tokens&&(G=/^{([^}]+)}$/.exec(E)))return[new Bt(u,E,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const q=[];return r.layerType==="symbol"&&(T==="text-field"&&m&&!m.glyphs&&q.push(new Bt(u,E,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&cu(_o(E))&&Wn(E.type)==="identity"&&q.push(new Bt(u,E,'"text-font" does not support identity functions'))),q.concat(ta({key:r.key,value:E,valueSpec:V,style:m,styleSpec:b,expressionContext:"property",propertyType:i,propertyKey:T}))}function Ju(r){return Ks(r,"paint")}function yu(r){return Ks(r,"layout")}function ah(r){let i=[];const u=r.value,m=r.key,b=r.style,E=r.styleSpec;u.type||u.ref||i.push(new Bt(m,u,'either "type" or "ref" is required'));let T=Wn(u.type);const z=Wn(u.ref);if(u.id){const U=Wn(u.id);for(let V=0;V<r.arrayIndex;V++){const G=b.layers[V];Wn(G.id)===U&&i.push(new Bt(m,u.id,`duplicate layer id "${u.id}", previously used at line ${G.id.__line__}`))}}if("ref"in u){let U;["type","source","source-layer","filter","layout"].forEach(V=>{V in u&&i.push(new Bt(m,u[V],`"${V}" is prohibited for ref layers`))}),b.layers.forEach(V=>{Wn(V.id)===z&&(U=V)}),U?U.ref?i.push(new Bt(m,u.ref,"ref cannot reference another ref layer")):T=Wn(U.type):i.push(new Bt(m,u.ref,`ref layer "${z}" not found`))}else if(T!=="background")if(u.source){const U=b.sources&&b.sources[u.source],V=U&&Wn(U.type);U?V==="vector"&&T==="raster"?i.push(new Bt(m,u.source,`layer "${u.id}" requires a raster source`)):V==="raster"&&T!=="raster"?i.push(new Bt(m,u.source,`layer "${u.id}" requires a vector source`)):V!=="vector"||u["source-layer"]?V==="raster-dem"&&T!=="hillshade"?i.push(new Bt(m,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!u.paint||!u.paint["line-gradient"]||V==="geojson"&&U.lineMetrics||i.push(new Bt(m,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Bt(m,u,`layer "${u.id}" must specify a "source-layer"`)):i.push(new Bt(m,u.source,`source "${u.source}" not found`))}else i.push(new Bt(m,u,'missing required property "source"'));return i=i.concat($o({key:m,value:u,valueSpec:E.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ta({key:`${m}.type`,value:u.type,valueSpec:E.layer.type,style:r.style,styleSpec:r.styleSpec,object:u,objectKey:"type"}),filter:Ka,layout:U=>$o({layer:u,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{"*":V=>yu(Vn({layerType:T},V))}}),paint:U=>$o({layer:u,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{"*":V=>Ju(Vn({layerType:T},V))}})}})),i}function Cs(r){const i=r.value,u=r.key,m=Pn(i);return m!=="string"?[new Bt(u,i,`string expected, ${m} found`)]:[]}const Yu={promoteId:function({key:r,value:i}){if(Pn(i)==="string")return Cs({key:r,value:i});{const u=[];for(const m in i)u.push(...Cs({key:`${r}.${m}`,value:i[m]}));return u}}};function zl(r){const i=r.value,u=r.key,m=r.styleSpec,b=r.style;if(!i.type)return[new Bt(u,i,'"type" is required')];const E=Wn(i.type);let T;switch(E){case"vector":case"raster":case"raster-dem":return T=$o({key:u,value:i,valueSpec:m[`source_${E.replace("-","_")}`],style:r.style,styleSpec:m,objectElementValidators:Yu}),T;case"geojson":if(T=$o({key:u,value:i,valueSpec:m.source_geojson,style:b,styleSpec:m,objectElementValidators:Yu}),i.cluster)for(const z in i.clusterProperties){const[U,V]=i.clusterProperties[z],G=typeof U=="string"?[U,["accumulated"],["get",z]]:U;T.push(...Ss({key:`${u}.${z}.map`,value:V,expressionContext:"cluster-map"})),T.push(...Ss({key:`${u}.${z}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return T;case"video":return $o({key:u,value:i,valueSpec:m.source_video,style:b,styleSpec:m});case"image":return $o({key:u,value:i,valueSpec:m.source_image,style:b,styleSpec:m});case"canvas":return[new Bt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ts({key:`${u}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:b,styleSpec:m})}}function Dl(r){const i=r.value,u=r.styleSpec,m=u.light,b=r.style;let E=[];const T=Pn(i);if(i===void 0)return E;if(T!=="object")return E=E.concat([new Bt("light",i,`object expected, ${T} found`)]),E;for(const z in i){const U=z.match(/^(.*)-transition$/);E=E.concat(U&&m[U[1]]&&m[U[1]].transition?ta({key:z,value:i[z],valueSpec:u.transition,style:b,styleSpec:u}):m[z]?ta({key:z,value:i[z],valueSpec:m[z],style:b,styleSpec:u}):[new Bt(z,i[z],`unknown property "${z}"`)])}return E}const ea={"*":()=>[],array:Ic,boolean:function(r){const i=r.value,u=r.key,m=Pn(i);return m!=="boolean"?[new Bt(u,i,`boolean expected, ${m} found`)]:[]},number:oh,color:function(r){const i=r.key,u=r.value,m=Pn(u);return m!=="string"?[new Bt(i,u,`color expected, ${m} found`)]:tt(u)===null?[new Bt(i,u,`color expected, "${u}" found`)]:[]},constants:Ki,enum:Ts,filter:Ka,function:Sc,layer:ah,object:$o,source:zl,light:Dl,string:Cs,formatted:function(r){return Cs(r).length===0?[]:Ss(r)},resolvedImage:function(r){return Cs(r).length===0?[]:Ss(r)}};function ta(r){const i=r.value,u=r.valueSpec,m=r.styleSpec;return u.expression&&cu(Wn(i))?Sc(r):u.expression&&us(_o(i))?Ss(r):u.type&&ea[u.type]?ea[u.type](r):$o(Vn({},r,{valueSpec:u.type?m[u.type]:u}))}function Ac(r){const i=r.value,u=r.key,m=Cs(r);return m.length||(i.indexOf("{fontstack}")===-1&&m.push(new Bt(u,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&m.push(new Bt(u,i,'"glyphs" url must include a "{range}" token'))),m}function ks(r,i=Ze){let u=[];return u=u.concat(ta({key:"",value:r,valueSpec:i.$root,styleSpec:i,style:r,objectElementValidators:{glyphs:Ac,"*":()=>[]}})),r.constants&&(u=u.concat(Ki({key:"constants",value:r.constants,style:r,styleSpec:i}))),Rl(u)}function Rl(r){return[].concat(r).sort((i,u)=>i.line-u.line)}function fl(r){return function(...i){return Rl(r.apply(this,i))}}ks.source=fl(zl),ks.light=fl(Dl),ks.layer=fl(ah),ks.filter=fl(Ka),ks.paintProperty=fl(Ju),ks.layoutProperty=fl(yu);const Da=ks,Gr=Da.light,Ol=Da.paintProperty,ml=Da.layoutProperty;function Ms(r,i){let u=!1;if(i&&i.length)for(const m of i)r.fire(new zt(new Error(m.message))),u=!0;return u}class Bn{constructor(i,u,m){const b=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const T=new Int32Array(this.arrayBuffer);i=T[0],this.d=(u=T[1])+2*(m=T[2]);for(let U=0;U<this.d*this.d;U++){const V=T[3+U],G=T[3+U+1];b.push(V===G?null:T.subarray(V,G))}const z=T[3+b.length+1];this.keys=T.subarray(T[3+b.length],z),this.bboxes=T.subarray(z),this.insert=this._insertReadonly}else{this.d=u+2*m;for(let T=0;T<this.d*this.d;T++)b.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=i,this.padding=m,this.scale=u/i,this.uid=0;const E=m/u*i;this.min=-E,this.max=i+E}insert(i,u,m,b,E){this._forEachCell(u,m,b,E,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(E)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,u,m,b,E,T){this.cells[E].push(T)}query(i,u,m,b,E){const T=this.min,z=this.max;if(i<=T&&u<=T&&z<=m&&z<=b&&!E)return Array.prototype.slice.call(this.keys);{const U=[];return this._forEachCell(i,u,m,b,this._queryCell,U,{},E),U}}_queryCell(i,u,m,b,E,T,z,U){const V=this.cells[E];if(V!==null){const G=this.keys,q=this.bboxes;for(let K=0;K<V.length;K++){const $=V[K];if(z[$]===void 0){const te=4*$;(U?U(q[te+0],q[te+1],q[te+2],q[te+3]):i<=q[te+2]&&u<=q[te+3]&&m>=q[te+0]&&b>=q[te+1])?(z[$]=!0,T.push(G[$])):z[$]=!1}}}}_forEachCell(i,u,m,b,E,T,z,U){const V=this._convertToCellCoord(i),G=this._convertToCellCoord(u),q=this._convertToCellCoord(m),K=this._convertToCellCoord(b);for(let $=V;$<=q;$++)for(let te=G;te<=K;te++){const de=this.d*te+$;if((!U||U(this._convertFromCellCoord($),this._convertFromCellCoord(te),this._convertFromCellCoord($+1),this._convertFromCellCoord(te+1)))&&E.call(this,i,u,m,b,de,T,z,U))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,u=3+this.cells.length+1+1;let m=0;for(let T=0;T<this.cells.length;T++)m+=this.cells[T].length;const b=new Int32Array(u+m+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let E=u;for(let T=0;T<i.length;T++){const z=i[T];b[3+T]=E,b.set(z,E),E+=z.length}return b[3+i.length]=E,b.set(this.keys,E),E+=this.keys.length,b[3+i.length+1]=E,b.set(this.bboxes,E),E+=this.bboxes.length,b.buffer}static serialize(i,u){const m=i.toArrayBuffer();return u&&u.push(m),{buffer:m}}static deserialize(i){return new Bn(i.buffer)}}const vr={};function Si(r,i,u={}){Object.defineProperty(i,"_classRegistryKey",{value:r,writeable:!1}),vr[r]={klass:i,omit:u.omit||[],shallow:u.shallow||[]}}Si("Object",Object),Si("TransferableGridIndex",Bn),Si("Color",X),Si("Error",Error),Si("AJAXError",gt),Si("ResolvedImage",xe),Si("StylePropertyFunction",Is),Si("StyleExpression",Xu,{omit:["_evaluator"]}),Si("ZoomDependentExpression",Ws),Si("ZoomConstantExpression",pu),Si("CompoundExpression",Ii,{omit:["_evaluate"]});for(const r in ja)ja[r]._classRegistryKey||Si(`Expression_${r}`,ja[r]);function gl(r){return r&&typeof ArrayBuffer!="undefined"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function ds(r,i){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob)return r;if(gl(r)||Mt(r))return i&&i.push(r),r;if(ArrayBuffer.isView(r)){const u=r;return i&&i.push(u.buffer),u}if(r instanceof ImageData)return i&&i.push(r.data.buffer),r;if(Array.isArray(r)){const u=[];for(const m of r)u.push(ds(m,i));return u}if(typeof r=="object"){const u=r.constructor,m=u._classRegistryKey;if(!m)throw new Error("can't serialize object of unregistered class");const b=u.serialize?u.serialize(r,i):{};if(!u.serialize){for(const E in r){if(!r.hasOwnProperty(E)||vr[m].omit.indexOf(E)>=0)continue;const T=r[E];b[E]=vr[m].shallow.indexOf(E)>=0?T:ds(T,i)}r instanceof Error&&(b.message=r.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(b.$name=m),b}throw new Error("can't serialize object of type "+typeof r)}function Ja(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||gl(r)||Mt(r)||ArrayBuffer.isView(r)||r instanceof ImageData)return r;if(Array.isArray(r))return r.map(Ja);if(typeof r=="object"){const i=r.$name||"Object";if(!vr[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:u}=vr[i];if(!u)throw new Error(`can't deserialize unregistered class ${i}`);if(u.deserialize)return u.deserialize(r);const m=Object.create(u.prototype);for(const b of Object.keys(r)){if(b==="$name")continue;const E=r[b];m[b]=vr[i].shallow.indexOf(b)>=0?E:Ja(E)}return m}throw new Error("can't deserialize object of type "+typeof r)}class _u{constructor(){this.first=!0}update(i,u){const m=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=u),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=m,!0))}}const Mi={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function yl(r){for(const i of r)if(Jr(i.charCodeAt(0)))return!0;return!1}function Bl(r){for(const i of r)if(!Ls(i.charCodeAt(0)))return!1;return!0}function Ls(r){return!(Mi.Arabic(r)||Mi["Arabic Supplement"](r)||Mi["Arabic Extended-A"](r)||Mi["Arabic Presentation Forms-A"](r)||Mi["Arabic Presentation Forms-B"](r))}function Jr(r){return!(r!==746&&r!==747&&(r<4352||!(Mi["Bopomofo Extended"](r)||Mi.Bopomofo(r)||Mi["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||Mi["CJK Compatibility Ideographs"](r)||Mi["CJK Compatibility"](r)||Mi["CJK Radicals Supplement"](r)||Mi["CJK Strokes"](r)||!(!Mi["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||Mi["CJK Unified Ideographs Extension A"](r)||Mi["CJK Unified Ideographs"](r)||Mi["Enclosed CJK Letters and Months"](r)||Mi["Hangul Compatibility Jamo"](r)||Mi["Hangul Jamo Extended-A"](r)||Mi["Hangul Jamo Extended-B"](r)||Mi["Hangul Jamo"](r)||Mi["Hangul Syllables"](r)||Mi.Hiragana(r)||Mi["Ideographic Description Characters"](r)||Mi.Kanbun(r)||Mi["Kangxi Radicals"](r)||Mi["Katakana Phonetic Extensions"](r)||Mi.Katakana(r)&&r!==12540||!(!Mi["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!Mi["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||Mi["Unified Canadian Aboriginal Syllabics"](r)||Mi["Unified Canadian Aboriginal Syllabics Extended"](r)||Mi["Vertical Forms"](r)||Mi["Yijing Hexagram Symbols"](r)||Mi["Yi Syllables"](r)||Mi["Yi Radicals"](r))))}function Fl(r){return!(Jr(r)||function(i){return!!(Mi["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Mi["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Mi["Letterlike Symbols"](i)||Mi["Number Forms"](i)||Mi["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Mi["Control Pictures"](i)&&i!==9251||Mi["Optical Character Recognition"](i)||Mi["Enclosed Alphanumerics"](i)||Mi["Geometric Shapes"](i)||Mi["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Mi["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Mi["CJK Symbols and Punctuation"](i)||Mi.Katakana(i)||Mi["Private Use Area"](i)||Mi["CJK Compatibility Forms"](i)||Mi["Small Form Variants"](i)||Mi["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(r))}function Cc(r){return r>=1424&&r<=2303||Mi["Arabic Presentation Forms-A"](r)||Mi["Arabic Presentation Forms-B"](r)}function po(r,i){return!(!i&&Cc(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||Mi.Khmer(r))}function Pi(r){for(const i of r)if(Cc(i.charCodeAt(0)))return!0;return!1}const Wo="deferred",Ul="loading",Js="loaded";let Ra=null,Hr="unavailable",ps=null;const pi=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(Hr="error"),Ra&&Ra(r)};function vu(){Ps.fire(new Ln("pluginStateChange",{pluginStatus:Hr,pluginURL:ps}))}const Ps=new Oi,bu=function(){return Hr},ua=function(){if(Hr!==Wo||!ps)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Hr=Ul,vu(),ps&&Zn({url:ps},r=>{r?pi(r):(Hr=Js,vu())})},Yr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Hr===Js||Yr.applyArabicShaping!=null,isLoading:()=>Hr===Ul,setState(r){Hr=r.pluginStatus,ps=r.pluginURL},isParsed:()=>Yr.applyArabicShaping!=null&&Yr.processBidirectionalText!=null&&Yr.processStyledBidirectionalText!=null,getPluginURL:()=>ps};class Vr{constructor(i,u){this.zoom=i,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _u,this.transition={})}isSupportedScript(i){return function(u,m){for(const b of u)if(!po(b.charCodeAt(0),m))return!1;return!0}(i,Yr.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,u=i-Math.floor(i),m=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*u}}}class _l{constructor(i,u){this.property=i,this.value=u,this.expression=function(m,b){if(cu(m))return new Is(m,b);if(us(m)){const E=zr(m,b);if(E.result==="error")throw new Error(E.value.map(T=>`${T.key}: ${T.message}`).join(", "));return E.value}{let E=m;return typeof m=="string"&&b.type==="color"&&(E=X.parse(m)),{kind:"constant",evaluate:()=>E}}}(u===void 0?i.specification.default:u,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,u,m){return this.property.possiblyEvaluate(this,i,u,m)}}class Xo{constructor(i){this.property=i,this.value=new _l(i,void 0)}transitioned(i,u){return new kc(this.property,this.value,u,ee({},i.transition,this.transition),i.now)}untransitioned(){return new kc(this.property,this.value,null,{},0)}}class Ya{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return we(this._values[i].value.value)}setValue(i,u){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Xo(this._values[i].property)),this._values[i].value=new _l(this._values[i].property,u===null?void 0:we(u))}getTransition(i){return we(this._values[i].transition)}setTransition(i,u){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Xo(this._values[i].property)),this._values[i].transition=we(u)||void 0}serialize(){const i={};for(const u of Object.keys(this._values)){const m=this.getValue(u);m!==void 0&&(i[u]=m);const b=this.getTransition(u);b!==void 0&&(i[`${u}-transition`]=b)}return i}transitioned(i,u){const m=new Nl(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].transitioned(i,u._values[b]);return m}untransitioned(){const i=new Nl(this._properties);for(const u of Object.keys(this._values))i._values[u]=this._values[u].untransitioned();return i}}class kc{constructor(i,u,m,b,E){this.property=i,this.value=u,this.begin=E+b.delay||0,this.end=this.begin+b.duration||0,i.specification.transition&&(b.delay||b.duration)&&(this.prior=m)}possiblyEvaluate(i,u,m){const b=i.now||0,E=this.value.possiblyEvaluate(i,u,m),T=this.prior;if(T){if(b>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(b<this.begin)return T.possiblyEvaluate(i,u,m);{const z=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(i,u,m),E,function(U){if(U<=0)return 0;if(U>=1)return 1;const V=U*U,G=V*U;return 4*(U<.5?G:3*(U-V)+G-.75)}(z))}}return E}}class Nl{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,u,m){const b=new ya(this._properties);for(const E of Object.keys(this._values))b._values[E]=this._values[E].possiblyEvaluate(i,u,m);return b}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Mc{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return we(this._values[i].value)}setValue(i,u){this._values[i]=new _l(this._values[i].property,u===null?void 0:we(u))}serialize(){const i={};for(const u of Object.keys(this._values)){const m=this.getValue(u);m!==void 0&&(i[u]=m)}return i}possiblyEvaluate(i,u,m){const b=new ya(this._properties);for(const E of Object.keys(this._values))b._values[E]=this._values[E].possiblyEvaluate(i,u,m);return b}}class qa{constructor(i,u,m){this.property=i,this.value=u,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,u,m,b){return this.property.evaluate(this.value,this.parameters,i,u,m,b)}}class ya{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Di{constructor(i){this.specification=i}possiblyEvaluate(i,u){return i.expression.evaluate(u)}interpolate(i,u,m){const b=Cl[this.specification.type];return b?b(i,u,m):i}}class ci{constructor(i,u){this.specification=i,this.overrides=u}possiblyEvaluate(i,u,m,b){return new qa(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(u,null,{},m,b)}:i.expression,u)}interpolate(i,u,m){if(i.value.kind!=="constant"||u.value.kind!=="constant")return i;if(i.value.value===void 0||u.value.value===void 0)return new qa(this,{kind:"constant",value:void 0},i.parameters);const b=Cl[this.specification.type];return b?new qa(this,{kind:"constant",value:b(i.value.value,u.value.value,m)},i.parameters):i}evaluate(i,u,m,b,E,T){return i.kind==="constant"?i.value:i.evaluate(u,m,b,E,T)}}class _a extends ci{possiblyEvaluate(i,u,m,b){if(i.value===void 0)return new qa(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){const E=i.expression.evaluate(u,null,{},m,b),T=i.property.specification.type==="resolvedImage"&&typeof E!="string"?E.name:E,z=this._calculate(T,T,T,u);return new qa(this,{kind:"constant",value:z},u)}if(i.expression.kind==="camera"){const E=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new qa(this,{kind:"constant",value:E},u)}return new qa(this,i.expression,u)}evaluate(i,u,m,b,E,T){if(i.kind==="source"){const z=i.evaluate(u,m,b,E,T);return this._calculate(z,z,z,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},m,b),i.evaluate({zoom:Math.floor(u.zoom)},m,b),i.evaluate({zoom:Math.floor(u.zoom)+1},m,b),u):i.value}_calculate(i,u,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:m,to:u}}interpolate(i){return i}}class ia{constructor(i){this.specification=i}possiblyEvaluate(i,u,m,b){if(i.value!==void 0){if(i.expression.kind==="constant"){const E=i.expression.evaluate(u,null,{},m,b);return this._calculate(E,E,E,u)}return this._calculate(i.expression.evaluate(new Vr(Math.floor(u.zoom-1),u)),i.expression.evaluate(new Vr(Math.floor(u.zoom),u)),i.expression.evaluate(new Vr(Math.floor(u.zoom+1),u)),u)}}_calculate(i,u,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:m,to:u}}interpolate(i){return i}}class To{constructor(i){this.specification=i}possiblyEvaluate(i,u,m,b){return!!i.expression.evaluate(u,null,{},m,b)}interpolate(){return!1}}class Qr{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in i){const m=i[u];m.specification.overridable&&this.overridableProperties.push(u);const b=this.defaultPropertyValues[u]=new _l(m,void 0),E=this.defaultTransitionablePropertyValues[u]=new Xo(m);this.defaultTransitioningPropertyValues[u]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=b.possiblyEvaluate({})}}}Si("DataDrivenProperty",ci),Si("DataConstantProperty",Di),Si("CrossFadedDataDrivenProperty",_a),Si("CrossFadedProperty",ia),Si("ColorRampProperty",To);const va="-transition";class to extends Oi{constructor(i,u){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new Mc(u.layout)),u.paint)){this._transitionablePaint=new Ya(u.paint);for(const m in i.paint)this.setPaintProperty(m,i.paint[m],{validate:!1});for(const m in i.layout)this.setLayoutProperty(m,i.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ya(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,u,m={}){u!=null&&this._validate(ml,`layers.${this.id}.layout.${i}`,i,u,m)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)}getPaintProperty(i){return i.endsWith(va)?this._transitionablePaint.getTransition(i.slice(0,-va.length)):this._transitionablePaint.getValue(i)}setPaintProperty(i,u,m={}){if(u!=null&&this._validate(Ol,`layers.${this.id}.paint.${i}`,i,u,m))return!1;if(i.endsWith(va))return this._transitionablePaint.setTransition(i.slice(0,-va.length),u||void 0),!1;{const b=this._transitionablePaint._values[i],E=b.property.specification["property-type"]==="cross-faded-data-driven",T=b.value.isDataDriven(),z=b.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);const U=this._transitionablePaint._values[i].value;return U.isDataDriven()||T||E||this._handleOverridablePaintPropertyUpdate(i,z,U)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,u,m){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),se(i,(u,m)=>!(u===void 0||m==="layout"&&!Object.keys(u).length||m==="paint"&&!Object.keys(u).length))}_validate(i,u,m,b,E={}){return(!E||E.validate!==!1)&&Ms(this,i.call(Da,{key:u,layerType:this.type,objectKey:m,value:b,styleSpec:Ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const u=this.paint.get(i);if(u instanceof qa&&Es(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const na={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zs{constructor(i,u){this._structArray=i,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,u){return i._trim(),u&&(i.isTransferred=!0,u.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const u=Object.create(this.prototype);return u.arrayBuffer=i.arrayBuffer,u.length=i.length,u.capacity=i.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function fi(r,i=1){let u=0,m=0;return{members:r.map(b=>{const E=na[b.type].BYTES_PER_ELEMENT,T=u=xu(u,Math.max(i,E)),z=b.components||1;return m=Math.max(m,E),u+=E*z,{name:b.name,type:b.type,components:z,offset:T}}),size:xu(u,Math.max(m,i)),alignment:i}}function xu(r,i){return Math.ceil(r/i)*i}class xo extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,u)}emplace(i,u,m){const b=2*i;return this.int16[b+0]=u,this.int16[b+1]=m,i}}xo.prototype.bytesPerElement=4,Si("StructArrayLayout2i4",xo);class ca extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m,b){const E=this.length;return this.resize(E+1),this.emplace(E,i,u,m,b)}emplace(i,u,m,b,E){const T=4*i;return this.int16[T+0]=u,this.int16[T+1]=m,this.int16[T+2]=b,this.int16[T+3]=E,i}}ca.prototype.bytesPerElement=8,Si("StructArrayLayout4i8",ca);class C extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T){const z=this.length;return this.resize(z+1),this.emplace(z,i,u,m,b,E,T)}emplace(i,u,m,b,E,T,z){const U=6*i;return this.int16[U+0]=u,this.int16[U+1]=m,this.int16[U+2]=b,this.int16[U+3]=E,this.int16[U+4]=T,this.int16[U+5]=z,i}}C.prototype.bytesPerElement=12,Si("StructArrayLayout2i4i12",C);class l extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T){const z=this.length;return this.resize(z+1),this.emplace(z,i,u,m,b,E,T)}emplace(i,u,m,b,E,T,z){const U=4*i,V=8*i;return this.int16[U+0]=u,this.int16[U+1]=m,this.uint8[V+4]=b,this.uint8[V+5]=E,this.uint8[V+6]=T,this.uint8[V+7]=z,i}}l.prototype.bytesPerElement=8,Si("StructArrayLayout2i4ub8",l);class _ extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,u)}emplace(i,u,m){const b=2*i;return this.float32[b+0]=u,this.float32[b+1]=m,i}}_.prototype.bytesPerElement=8,Si("StructArrayLayout2f8",_);class A extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T,z,U,V,G){const q=this.length;return this.resize(q+1),this.emplace(q,i,u,m,b,E,T,z,U,V,G)}emplace(i,u,m,b,E,T,z,U,V,G,q){const K=10*i;return this.uint16[K+0]=u,this.uint16[K+1]=m,this.uint16[K+2]=b,this.uint16[K+3]=E,this.uint16[K+4]=T,this.uint16[K+5]=z,this.uint16[K+6]=U,this.uint16[K+7]=V,this.uint16[K+8]=G,this.uint16[K+9]=q,i}}A.prototype.bytesPerElement=20,Si("StructArrayLayout10ui20",A);class k extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T,z,U,V,G,q,K){const $=this.length;return this.resize($+1),this.emplace($,i,u,m,b,E,T,z,U,V,G,q,K)}emplace(i,u,m,b,E,T,z,U,V,G,q,K,$){const te=12*i;return this.int16[te+0]=u,this.int16[te+1]=m,this.int16[te+2]=b,this.int16[te+3]=E,this.uint16[te+4]=T,this.uint16[te+5]=z,this.uint16[te+6]=U,this.uint16[te+7]=V,this.int16[te+8]=G,this.int16[te+9]=q,this.int16[te+10]=K,this.int16[te+11]=$,i}}k.prototype.bytesPerElement=24,Si("StructArrayLayout4i4ui4i24",k);class B extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,m)}emplace(i,u,m,b){const E=3*i;return this.float32[E+0]=u,this.float32[E+1]=m,this.float32[E+2]=b,i}}B.prototype.bytesPerElement=12,Si("StructArrayLayout3f12",B);class j extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint32[1*i+0]=u,i}}j.prototype.bytesPerElement=4,Si("StructArrayLayout1ul4",j);class Z extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T,z,U,V){const G=this.length;return this.resize(G+1),this.emplace(G,i,u,m,b,E,T,z,U,V)}emplace(i,u,m,b,E,T,z,U,V,G){const q=10*i,K=5*i;return this.int16[q+0]=u,this.int16[q+1]=m,this.int16[q+2]=b,this.int16[q+3]=E,this.int16[q+4]=T,this.int16[q+5]=z,this.uint32[K+3]=U,this.uint16[q+8]=V,this.uint16[q+9]=G,i}}Z.prototype.bytesPerElement=20,Si("StructArrayLayout6i1ul2ui20",Z);class J extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T){const z=this.length;return this.resize(z+1),this.emplace(z,i,u,m,b,E,T)}emplace(i,u,m,b,E,T,z){const U=6*i;return this.int16[U+0]=u,this.int16[U+1]=m,this.int16[U+2]=b,this.int16[U+3]=E,this.int16[U+4]=T,this.int16[U+5]=z,i}}J.prototype.bytesPerElement=12,Si("StructArrayLayout2i2i2i12",J);class ie extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E){const T=this.length;return this.resize(T+1),this.emplace(T,i,u,m,b,E)}emplace(i,u,m,b,E,T){const z=4*i,U=8*i;return this.float32[z+0]=u,this.float32[z+1]=m,this.float32[z+2]=b,this.int16[U+6]=E,this.int16[U+7]=T,i}}ie.prototype.bytesPerElement=16,Si("StructArrayLayout2f1f2i16",ie);class ae extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,m,b){const E=this.length;return this.resize(E+1),this.emplace(E,i,u,m,b)}emplace(i,u,m,b,E){const T=12*i,z=3*i;return this.uint8[T+0]=u,this.uint8[T+1]=m,this.float32[z+1]=b,this.float32[z+2]=E,i}}ae.prototype.bytesPerElement=12,Si("StructArrayLayout2ub2f12",ae);class ge extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,m)}emplace(i,u,m,b){const E=3*i;return this.uint16[E+0]=u,this.uint16[E+1]=m,this.uint16[E+2]=b,i}}ge.prototype.bytesPerElement=6,Si("StructArrayLayout3ui6",ge);class Ae extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T,z,U,V,G,q,K,$,te,de,_e,Oe){const Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,i,u,m,b,E,T,z,U,V,G,q,K,$,te,de,_e,Oe)}emplace(i,u,m,b,E,T,z,U,V,G,q,K,$,te,de,_e,Oe,Ye){const it=24*i,nt=12*i,vt=48*i;return this.int16[it+0]=u,this.int16[it+1]=m,this.uint16[it+2]=b,this.uint16[it+3]=E,this.uint32[nt+2]=T,this.uint32[nt+3]=z,this.uint32[nt+4]=U,this.uint16[it+10]=V,this.uint16[it+11]=G,this.uint16[it+12]=q,this.float32[nt+7]=K,this.float32[nt+8]=$,this.uint8[vt+36]=te,this.uint8[vt+37]=de,this.uint8[vt+38]=_e,this.uint32[nt+10]=Oe,this.int16[it+22]=Ye,i}}Ae.prototype.bytesPerElement=48,Si("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ae);class Ke extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,m,b,E,T,z,U,V,G,q,K,$,te,de,_e,Oe,Ye,it,nt,vt,ot,Kt,Wt,Lt,Zt,Nt,$t){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,i,u,m,b,E,T,z,U,V,G,q,K,$,te,de,_e,Oe,Ye,it,nt,vt,ot,Kt,Wt,Lt,Zt,Nt,$t)}emplace(i,u,m,b,E,T,z,U,V,G,q,K,$,te,de,_e,Oe,Ye,it,nt,vt,ot,Kt,Wt,Lt,Zt,Nt,$t,Ot){const Vt=34*i,ki=17*i;return this.int16[Vt+0]=u,this.int16[Vt+1]=m,this.int16[Vt+2]=b,this.int16[Vt+3]=E,this.int16[Vt+4]=T,this.int16[Vt+5]=z,this.int16[Vt+6]=U,this.int16[Vt+7]=V,this.uint16[Vt+8]=G,this.uint16[Vt+9]=q,this.uint16[Vt+10]=K,this.uint16[Vt+11]=$,this.uint16[Vt+12]=te,this.uint16[Vt+13]=de,this.uint16[Vt+14]=_e,this.uint16[Vt+15]=Oe,this.uint16[Vt+16]=Ye,this.uint16[Vt+17]=it,this.uint16[Vt+18]=nt,this.uint16[Vt+19]=vt,this.uint16[Vt+20]=ot,this.uint16[Vt+21]=Kt,this.uint16[Vt+22]=Wt,this.uint32[ki+12]=Lt,this.float32[ki+13]=Zt,this.float32[ki+14]=Nt,this.float32[ki+15]=$t,this.float32[ki+16]=Ot,i}}Ke.prototype.bytesPerElement=68,Si("StructArrayLayout8i15ui1ul4f68",Ke);class ke extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.float32[1*i+0]=u,i}}ke.prototype.bytesPerElement=4,Si("StructArrayLayout1f4",ke);class Xe extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,m)}emplace(i,u,m,b){const E=3*i;return this.int16[E+0]=u,this.int16[E+1]=m,this.int16[E+2]=b,i}}Xe.prototype.bytesPerElement=6,Si("StructArrayLayout3i6",Xe);class ct extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,m)}emplace(i,u,m,b){const E=4*i;return this.uint32[2*i+0]=u,this.uint16[E+2]=m,this.uint16[E+3]=b,i}}ct.prototype.bytesPerElement=8,Si("StructArrayLayout1ul2ui8",ct);class lt extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,u)}emplace(i,u,m){const b=2*i;return this.uint16[b+0]=u,this.uint16[b+1]=m,i}}lt.prototype.bytesPerElement=4,Si("StructArrayLayout2ui4",lt);class bt extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint16[1*i+0]=u,i}}bt.prototype.bytesPerElement=2,Si("StructArrayLayout1ui2",bt);class pt extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,m,b){const E=this.length;return this.resize(E+1),this.emplace(E,i,u,m,b)}emplace(i,u,m,b,E){const T=4*i;return this.float32[T+0]=u,this.float32[T+1]=m,this.float32[T+2]=b,this.float32[T+3]=E,i}}pt.prototype.bytesPerElement=16,Si("StructArrayLayout4f16",pt);class jt extends zs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Et(this.anchorPointX,this.anchorPointY)}}jt.prototype.size=20;class Rt extends Z{get(i){return new jt(this,i)}}Si("CollisionBoxArray",Rt);class Ft extends zs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ft.prototype.size=48;class ti extends Ae{get(i){return new Ft(this,i)}}Si("PlacedSymbolArray",ti);class ui extends zs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}ui.prototype.size=68;class qt extends Ke{get(i){return new ui(this,i)}}Si("SymbolInstanceArray",qt);class qi extends ke{getoffsetX(i){return this.float32[1*i+0]}}Si("GlyphOffsetArray",qi);class Ci extends Xe{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Si("SymbolLineVertexArray",Ci);class vn extends zs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}vn.prototype.size=8;class p extends ct{get(i){return new vn(this,i)}}Si("FeatureIndexArray",p);class y extends xo{}class g extends xo{}class w extends C{}class L extends l{}class F extends _{}class N extends A{}class H extends k{}class Q extends B{}class oe extends j{}class ye extends J{}class be extends ae{}class Ee extends ge{}class Be extends lt{}const Re=fi([{name:"a_pos",components:2,type:"Int16"}],4),{members:We}=Re;class Ce{constructor(i=[]){this.segments=i}prepareSegment(i,u,m,b){let E=this.segments[this.segments.length-1];return i>Ce.MAX_VERTEX_ARRAY_LENGTH&&Ue(`Max vertices per segment is ${Ce.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!E||E.vertexLength+i>Ce.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==b)&&(E={vertexOffset:u.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},b!==void 0&&(E.sortKey=b),this.segments.push(E)),E}get(){return this.segments}destroy(){for(const i of this.segments)for(const u in i.vaos)i.vaos[u].destroy()}static simpleSegment(i,u,m,b){return new Ce([{vertexOffset:i,primitiveOffset:u,vertexLength:m,primitiveLength:b,vaos:{},sortKey:0}])}}function Ve(r,i){return 256*(r=O(Math.floor(r),0,255))+O(Math.floor(i),0,255)}Ce.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Si("SegmentVector",Ce);const et=fi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var dt={exports:{}},xt={exports:{}};xt.exports=function(r,i){var u,m,b,E,T,z,U,V;for(m=r.length-(u=3&r.length),b=i,T=3432918353,z=461845907,V=0;V<m;)U=255&r.charCodeAt(V)|(255&r.charCodeAt(++V))<<8|(255&r.charCodeAt(++V))<<16|(255&r.charCodeAt(++V))<<24,++V,b=27492+(65535&(E=5*(65535&(b=(b^=U=(65535&(U=(U=(65535&U)*T+(((U>>>16)*T&65535)<<16)&4294967295)<<15|U>>>17))*z+(((U>>>16)*z&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(U=0,u){case 3:U^=(255&r.charCodeAt(V+2))<<16;case 2:U^=(255&r.charCodeAt(V+1))<<8;case 1:b^=U=(65535&(U=(U=(65535&(U^=255&r.charCodeAt(V)))*T+(((U>>>16)*T&65535)<<16)&4294967295)<<15|U>>>17))*z+(((U>>>16)*z&65535)<<16)&4294967295}return b^=r.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0};var Tt={exports:{}};Tt.exports=function(r,i){for(var u,m=r.length,b=i^m,E=0;m>=4;)u=1540483477*(65535&(u=255&r.charCodeAt(E)|(255&r.charCodeAt(++E))<<8|(255&r.charCodeAt(++E))<<16|(255&r.charCodeAt(++E))<<24))+((1540483477*(u>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),m-=4,++E;switch(m){case 3:b^=(255&r.charCodeAt(E+2))<<16;case 2:b^=(255&r.charCodeAt(E+1))<<8;case 1:b=1540483477*(65535&(b^=255&r.charCodeAt(E)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0};var kt=xt.exports,Ht=Tt.exports;dt.exports=kt,dt.exports.murmur3=kt,dt.exports.murmur2=Ht;var oi=dt.exports;class ri{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,u,m,b){this.ids.push(Ti(i)),this.positions.push(u,m,b)}getPositions(i){const u=Ti(i);let m=0,b=this.ids.length-1;for(;m<b;){const T=m+b>>1;this.ids[T]>=u?b=T:m=T+1}const E=[];for(;this.ids[m]===u;)E.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return E}static serialize(i,u){const m=new Float64Array(i.ids),b=new Uint32Array(i.positions);return Hi(m,b,0,m.length-1),u&&u.push(m.buffer,b.buffer),{ids:m,positions:b}}static deserialize(i){const u=new ri;return u.ids=i.ids,u.positions=i.positions,u.indexed=!0,u}}function Ti(r){const i=+r;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:oi(String(r))}function Hi(r,i,u,m){for(;u<m;){const b=r[u+m>>1];let E=u-1,T=m+1;for(;;){do E++;while(r[E]<b);do T--;while(r[T]>b);if(E>=T)break;Qi(r,E,T),Qi(i,3*E,3*T),Qi(i,3*E+1,3*T+1),Qi(i,3*E+2,3*T+2)}T-u<m-T?(Hi(r,i,u,T),u=T+1):(Hi(r,i,T+1,m),m=T)}}function Qi(r,i,u){const m=r[i];r[i]=r[u],r[u]=m}Si("FeaturePositionMap",ri);class Gi{constructor(i,u){this.gl=i.gl,this.location=u}}class Xn extends Gi{constructor(i,u){super(i,u),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Li extends Gi{constructor(i,u){super(i,u),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class pn extends Gi{constructor(i,u){super(i,u),this.current=X.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const Fn=new Float32Array(16);function cn(r){return[Ve(255*r.r,255*r.g),Ve(255*r.b,255*r.a)]}class an{constructor(i,u,m){this.value=i,this.uniformNames=u.map(b=>`u_${b}`),this.type=m}setUniform(i,u,m){i.set(m.constantOr(this.value))}getBinding(i,u,m){return this.type==="color"?new pn(i,u):new Xn(i,u)}}class wn{constructor(i,u){this.uniformNames=u.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=i.tlbr}setUniform(i,u,m,b){const E=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;E&&i.set(E)}getBinding(i,u,m){return m.substr(0,9)==="u_pattern"?new Li(i,u):new Xn(i,u)}}class tn{constructor(i,u,m,b){this.expression=i,this.type=m,this.maxValue=0,this.paintVertexAttributes=u.map(E=>({name:`a_${E}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(i,u,m,b,E){const T=this.paintVertexArray.length,z=this.expression.evaluate(new Vr(0),u,{},b,[],E);this.paintVertexArray.resize(i),this._setPaintValue(T,i,z)}updatePaintArray(i,u,m,b){const E=this.expression.evaluate({zoom:0},m,b);this._setPaintValue(i,u,E)}_setPaintValue(i,u,m){if(this.type==="color"){const b=cn(m);for(let E=i;E<u;E++)this.paintVertexArray.emplace(E,b[0],b[1])}else{for(let b=i;b<u;b++)this.paintVertexArray.emplace(b,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Yi{constructor(i,u,m,b,E,T){this.expression=i,this.uniformNames=u.map(z=>`u_${z}_t`),this.type=m,this.useIntegerZoom=b,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=u.map(z=>({name:`a_${z}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(i,u,m,b,E){const T=this.expression.evaluate(new Vr(this.zoom),u,{},b,[],E),z=this.expression.evaluate(new Vr(this.zoom+1),u,{},b,[],E),U=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(U,i,T,z)}updatePaintArray(i,u,m,b){const E=this.expression.evaluate({zoom:this.zoom},m,b),T=this.expression.evaluate({zoom:this.zoom+1},m,b);this._setPaintValue(i,u,E,T)}_setPaintValue(i,u,m,b){if(this.type==="color"){const E=cn(m),T=cn(b);for(let z=i;z<u;z++)this.paintVertexArray.emplace(z,E[0],E[1],T[0],T[1])}else{for(let E=i;E<u;E++)this.paintVertexArray.emplace(E,m,b);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(b))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,u){const m=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=O(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);i.set(b)}getBinding(i,u,m){return new Xn(i,u)}}class $r{constructor(i,u,m,b,E,T){this.expression=i,this.type=u,this.useIntegerZoom=m,this.zoom=b,this.layerId=T,this.zoomInPaintVertexArray=new E,this.zoomOutPaintVertexArray=new E}populatePaintArray(i,u,m){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(b,i,u.patterns&&u.patterns[this.layerId],m)}updatePaintArray(i,u,m,b,E){this._setPaintValues(i,u,m.patterns&&m.patterns[this.layerId],E)}_setPaintValues(i,u,m,b){if(!b||!m)return;const{min:E,mid:T,max:z}=m,U=b[E],V=b[T],G=b[z];if(U&&V&&G)for(let q=i;q<u;q++)this.zoomInPaintVertexArray.emplace(q,V.tl[0],V.tl[1],V.br[0],V.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],V.pixelRatio,U.pixelRatio),this.zoomOutPaintVertexArray.emplace(q,V.tl[0],V.tl[1],V.br[0],V.br[1],G.tl[0],G.tl[1],G.br[0],G.br[1],V.pixelRatio,G.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,et.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,et.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class uo{constructor(i,u,m){this.binders={},this._buffers=[];const b=[];for(const E in i.paint._values){if(!m(E))continue;const T=i.paint.get(E);if(!(T instanceof qa&&Es(T.property.specification)))continue;const z=Ko(E,i.type),U=T.value,V=T.property.specification.type,G=T.property.useIntegerZoom,q=T.property.specification["property-type"],K=q==="cross-faded"||q==="cross-faded-data-driven";if(U.kind==="constant")this.binders[E]=K?new wn(U.value,z):new an(U.value,z,V),b.push(`/u_${E}`);else if(U.kind==="source"||K){const $=io(E,V,"source");this.binders[E]=K?new $r(U,V,G,u,$,i.id):new tn(U,z,V,$),b.push(`/a_${E}`)}else{const $=io(E,V,"composite");this.binders[E]=new Yi(U,z,V,G,u,$),b.push(`/z_${E}`)}}this.cacheKey=b.sort().join("")}getMaxValue(i){const u=this.binders[i];return u instanceof tn||u instanceof Yi?u.maxValue:0}populatePaintArrays(i,u,m,b,E){for(const T in this.binders){const z=this.binders[T];(z instanceof tn||z instanceof Yi||z instanceof $r)&&z.populatePaintArray(i,u,m,b,E)}}setConstantPatternPositions(i,u){for(const m in this.binders){const b=this.binders[m];b instanceof wn&&b.setConstantPatternPositions(i,u)}}updatePaintArrays(i,u,m,b,E){let T=!1;for(const z in i){const U=u.getPositions(z);for(const V of U){const G=m.feature(V.index);for(const q in this.binders){const K=this.binders[q];if((K instanceof tn||K instanceof Yi||K instanceof $r)&&K.expression.isStateDependent===!0){const $=b.paint.get(q);K.expression=$.value,K.updatePaintArray(V.start,V.end,G,i[z],E),T=!0}}}}return T}defines(){const i=[];for(const u in this.binders){const m=this.binders[u];(m instanceof an||m instanceof wn)&&i.push(...m.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return i}getBinderAttributes(){const i=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof tn||m instanceof Yi)for(let b=0;b<m.paintVertexAttributes.length;b++)i.push(m.paintVertexAttributes[b].name);else if(m instanceof $r)for(let b=0;b<et.members.length;b++)i.push(et.members[b].name)}return i}getBinderUniforms(){const i=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof an||m instanceof wn||m instanceof Yi)for(const b of m.uniformNames)i.push(b)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,u){const m=[];for(const b in this.binders){const E=this.binders[b];if(E instanceof an||E instanceof wn||E instanceof Yi){for(const T of E.uniformNames)if(u[T]){const z=E.getBinding(i,u[T],T);m.push({name:T,property:b,binding:z})}}}return m}setUniforms(i,u,m,b){for(const{name:E,property:T,binding:z}of u)this.binders[T].setUniform(z,b,m.get(T),E)}updatePaintBuffers(i){this._buffers=[];for(const u in this.binders){const m=this.binders[u];if(i&&m instanceof $r){const b=i.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(m instanceof tn||m instanceof Yi)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(i){for(const u in this.binders){const m=this.binders[u];(m instanceof tn||m instanceof Yi||m instanceof $r)&&m.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const u=this.binders[i];(u instanceof tn||u instanceof Yi||u instanceof $r)&&u.destroy()}}}class wo{constructor(i,u,m=()=>!0){this.programConfigurations={};for(const b of i)this.programConfigurations[b.id]=new uo(b,u,m);this.needsUpload=!1,this._featureMap=new ri,this._bufferOffset=0}populatePaintArrays(i,u,m,b,E,T){for(const z in this.programConfigurations)this.programConfigurations[z].populatePaintArrays(i,u,b,E,T);u.id!==void 0&&this._featureMap.add(u.id,m,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,u,m,b){for(const E of m)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(i,this._featureMap,u,E,b)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Ko(r,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${i}-`,"").replace(/-/g,"_")]}function io(r,i,u){const m={color:{source:_,composite:pt},number:{source:ke,composite:_}},b=function(E){return{"line-pattern":{source:N,composite:N},"fill-pattern":{source:N,composite:N},"fill-extrusion-pattern":{source:N,composite:N}}[E]}(r);return b&&b[u]||m[i][u]}Si("ConstantBinder",an),Si("CrossFadedConstantBinder",wn),Si("SourceExpressionBinder",tn),Si("CrossFadedCompositeBinder",$r),Si("CompositeExpressionBinder",Yi),Si("ProgramConfiguration",uo,{omit:["_buffers"]}),Si("ProgramConfigurationSet",wo);var er=8192;const ba=Math.pow(2,14)-1,ha=-ba-1;function Ga(r){const i=er/r.extent,u=r.loadGeometry();for(let m=0;m<u.length;m++){const b=u[m];for(let E=0;E<b.length;E++){const T=b[E],z=Math.round(T.x*i),U=Math.round(T.y*i);T.x=O(z,ha,ba),T.y=O(U,ha,ba),(z<T.x||z>T.x+1||U<T.y||U>T.y+1)&&Ue("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Mo(r,i){return{type:r.type,id:r.id,properties:r.properties,geometry:i?Ga(r):[]}}function Ha(r,i,u,m,b){r.emplaceBack(2*i+(m+1)/2,2*u+(b+1)/2)}class Za{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new y,this.indexArray=new Ee,this.segments=new Ce,this.programConfigurations=new wo(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,m){const b=this.layers[0],E=[];let T=null,z=!1;b.type==="circle"&&(T=b.layout.get("circle-sort-key"),z=!T.isConstant());for(const{feature:U,id:V,index:G,sourceLayerIndex:q}of i){const K=this.layers[0]._featureFilter.needGeometry,$=Mo(U,K);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),$,m))continue;const te=z?T.evaluate($,{},m):void 0,de={id:V,properties:U.properties,type:U.type,sourceLayerIndex:q,index:G,geometry:K?$.geometry:Ga(U),patterns:{},sortKey:te};E.push(de)}z&&E.sort((U,V)=>U.sortKey-V.sortKey);for(const U of E){const{geometry:V,index:G,sourceLayerIndex:q}=U,K=i[G].feature;this.addFeature(U,V,G,m),u.featureIndex.insert(K,V,G,q,this.index)}}update(i,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,We),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,u,m,b){for(const E of u)for(const T of E){const z=T.x,U=T.y;if(z<0||z>=er||U<0||U>=er)continue;const V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),G=V.vertexLength;Ha(this.layoutVertexArray,z,U,-1,-1),Ha(this.layoutVertexArray,z,U,1,-1),Ha(this.layoutVertexArray,z,U,1,1),Ha(this.layoutVertexArray,z,U,-1,1),this.indexArray.emplaceBack(G,G+1,G+2),this.indexArray.emplaceBack(G,G+3,G+2),V.vertexLength+=4,V.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,m,{},b)}}function Qu(r,i){for(let u=0;u<r.length;u++)if(Wa(i,r[u]))return!0;for(let u=0;u<i.length;u++)if(Wa(r,i[u]))return!0;return!!wu(r,i)}function $u(r,i,u){return!!Wa(r,i)||!!Eu(i,r,u)}function vl(r,i){if(r.length===1)return Lo(i,r[0]);for(let u=0;u<i.length;u++){const m=i[u];for(let b=0;b<m.length;b++)if(Wa(r,m[b]))return!0}for(let u=0;u<r.length;u++)if(Lo(i,r[u]))return!0;for(let u=0;u<i.length;u++)if(wu(r,i[u]))return!0;return!1}function ec(r,i,u){if(r.length>1){if(wu(r,i))return!0;for(let m=0;m<i.length;m++)if(Eu(i[m],r,u))return!0}for(let m=0;m<r.length;m++)if(Eu(r[m],i,u))return!0;return!1}function wu(r,i){if(r.length===0||i.length===0)return!1;for(let u=0;u<r.length-1;u++){const m=r[u],b=r[u+1];for(let E=0;E<i.length-1;E++)if(Ys(m,b,i[E],i[E+1]))return!0}return!1}function Ys(r,i,u,m){return He(r,u,m)!==He(i,u,m)&&He(r,i,u)!==He(r,i,m)}function Eu(r,i,u){const m=u*u;if(i.length===1)return r.distSqr(i[0])<m;for(let b=1;b<i.length;b++)if(Ds(r,i[b-1],i[b])<m)return!0;return!1}function Ds(r,i,u){const m=i.distSqr(u);if(m===0)return r.distSqr(i);const b=((r.x-i.x)*(u.x-i.x)+(r.y-i.y)*(u.y-i.y))/m;return r.distSqr(b<0?i:b>1?u:u.sub(i)._mult(b)._add(i))}function Lo(r,i){let u,m,b,E=!1;for(let T=0;T<r.length;T++){u=r[T];for(let z=0,U=u.length-1;z<u.length;U=z++)m=u[z],b=u[U],m.y>i.y!=b.y>i.y&&i.x<(b.x-m.x)*(i.y-m.y)/(b.y-m.y)+m.x&&(E=!E)}return E}function Wa(r,i){let u=!1;for(let m=0,b=r.length-1;m<r.length;b=m++){const E=r[m],T=r[b];E.y>i.y!=T.y>i.y&&i.x<(T.x-E.x)*(i.y-E.y)/(T.y-E.y)+E.x&&(u=!u)}return u}function Vl(r,i,u){const m=u[0],b=u[2];if(r.x<m.x&&i.x<m.x||r.x>b.x&&i.x>b.x||r.y<m.y&&i.y<m.y||r.y>b.y&&i.y>b.y)return!1;const E=He(r,i,u[0]);return E!==He(r,i,u[1])||E!==He(r,i,u[2])||E!==He(r,i,u[3])}function Rs(r,i,u){const m=i.paint.get(r).value;return m.kind==="constant"?m.value:u.programConfigurations.get(i.id).getMaxValue(r)}function ur(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function xa(r,i,u,m,b){if(!i[0]&&!i[1])return r;const E=Et.convert(i)._mult(b);u==="viewport"&&E._rotate(-m);const T=[];for(let z=0;z<r.length;z++)T.push(r[z].sub(E));return T}Si("CircleBucket",Za,{omit:["layers"]});const Oa=new Qr({"circle-sort-key":new ci(Ze.layout_circle["circle-sort-key"])});var Iu={paint:new Qr({"circle-radius":new ci(Ze.paint_circle["circle-radius"]),"circle-color":new ci(Ze.paint_circle["circle-color"]),"circle-blur":new ci(Ze.paint_circle["circle-blur"]),"circle-opacity":new ci(Ze.paint_circle["circle-opacity"]),"circle-translate":new Di(Ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Di(Ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Di(Ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Di(Ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ci(Ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ci(Ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ci(Ze.paint_circle["circle-stroke-opacity"])}),layout:Oa},tc=typeof Float32Array!="undefined"?Float32Array:Array;function ic(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Md(r,i,u){var m=i[0],b=i[1],E=i[2],T=i[3],z=i[4],U=i[5],V=i[6],G=i[7],q=i[8],K=i[9],$=i[10],te=i[11],de=i[12],_e=i[13],Oe=i[14],Ye=i[15],it=u[0],nt=u[1],vt=u[2],ot=u[3];return r[0]=it*m+nt*z+vt*q+ot*de,r[1]=it*b+nt*U+vt*K+ot*_e,r[2]=it*E+nt*V+vt*$+ot*Oe,r[3]=it*T+nt*G+vt*te+ot*Ye,r[4]=(it=u[4])*m+(nt=u[5])*z+(vt=u[6])*q+(ot=u[7])*de,r[5]=it*b+nt*U+vt*K+ot*_e,r[6]=it*E+nt*V+vt*$+ot*Oe,r[7]=it*T+nt*G+vt*te+ot*Ye,r[8]=(it=u[8])*m+(nt=u[9])*z+(vt=u[10])*q+(ot=u[11])*de,r[9]=it*b+nt*U+vt*K+ot*_e,r[10]=it*E+nt*V+vt*$+ot*Oe,r[11]=it*T+nt*G+vt*te+ot*Ye,r[12]=(it=u[12])*m+(nt=u[13])*z+(vt=u[14])*q+(ot=u[15])*de,r[13]=it*b+nt*U+vt*K+ot*_e,r[14]=it*E+nt*V+vt*$+ot*Oe,r[15]=it*T+nt*G+vt*te+ot*Ye,r}Math.hypot||(Math.hypot=function(){for(var r=0,i=arguments.length;i--;)r+=arguments[i]*arguments[i];return Math.sqrt(r)});var bl,Ld=Md;function xl(r,i,u){var m=i[0],b=i[1],E=i[2],T=i[3];return r[0]=u[0]*m+u[4]*b+u[8]*E+u[12]*T,r[1]=u[1]*m+u[5]*b+u[9]*E+u[13]*T,r[2]=u[2]*m+u[6]*b+u[10]*E+u[14]*T,r[3]=u[3]*m+u[7]*b+u[11]*E+u[15]*T,r}function Lc(r,i){const u=xl([],[r.x,r.y,0,1],i);return new Et(u[0]/u[3],u[1]/u[3])}bl=new tc(4),tc!=Float32Array&&(bl[0]=0,bl[1]=0,bl[2]=0,bl[3]=0);class Pd extends Za{}Si("HeatmapBucket",Pd,{omit:["layers"]});var Pc={paint:new Qr({"heatmap-radius":new ci(Ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ci(Ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Di(Ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new To(Ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Di(Ze.paint_heatmap["heatmap-opacity"])})};function wa(r,{width:i,height:u},m,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==i*u*m)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${i*u*m}`)}else b=new Uint8Array(i*u*m);return r.width=i,r.height=u,r.data=b,r}function Ef(r,{width:i,height:u},m){if(i===r.width&&u===r.height)return;const b=wa({},{width:i,height:u},m);zd(r,b,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,i),height:Math.min(r.height,u)},m),r.width=i,r.height=u,r.data=b.data}function zd(r,i,u,m,b,E){if(b.width===0||b.height===0)return i;if(b.width>r.width||b.height>r.height||u.x>r.width-b.width||u.y>r.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>i.width||b.height>i.height||m.x>i.width-b.width||m.y>i.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const T=r.data,z=i.data;for(let U=0;U<b.height;U++){const V=((u.y+U)*r.width+u.x)*E,G=((m.y+U)*i.width+m.x)*E;for(let q=0;q<b.width*E;q++)z[G+q]=T[V+q]}return i}class jh{constructor(i,u){wa(this,i,1,u)}resize(i){Ef(this,i,1)}clone(){return new jh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,m,b,E){zd(i,u,m,b,E,1)}}class Os{constructor(i,u){wa(this,i,4,u)}resize(i){Ef(this,i,4)}replace(i,u){u?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Os({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,m,b,E){zd(i,u,m,b,E,4)}}function If(r){const i={},u=r.resolution||256,m=r.clips?r.clips.length:1,b=r.image||new Os({width:u,height:m}),E=(T,z,U)=>{i[r.evaluationKey]=U;const V=r.expression.evaluate(i);b.data[T+z+0]=Math.floor(255*V.r/V.a),b.data[T+z+1]=Math.floor(255*V.g/V.a),b.data[T+z+2]=Math.floor(255*V.b/V.a),b.data[T+z+3]=Math.floor(255*V.a)};if(r.clips)for(let T=0,z=0;T<m;++T,z+=4*u)for(let U=0,V=0;U<u;U++,V+=4){const G=U/(u-1),{start:q,end:K}=r.clips[T];E(z,V,q*(1-G)+K*G)}else for(let T=0,z=0;T<u;T++,z+=4)E(0,z,T/(u-1));return b}Si("AlphaImage",jh),Si("RGBAImage",Os);var Qm={paint:new Qr({"hillshade-illumination-direction":new Di(Ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Di(Ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Di(Ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Di(Ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Di(Ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Di(Ze.paint_hillshade["hillshade-accent-color"])})};const wp=fi([{name:"a_pos",components:2,type:"Int16"}],4),{members:$m}=wp;var sh={exports:{}};function qh(r,i,u){u=u||2;var m,b,E,T,z,U,V,G=i&&i.length,q=G?i[0]*u:r.length,K=Su(r,0,q,u,!0),$=[];if(!K||K.next===K.prev)return $;if(G&&(K=function(de,_e,Oe,Ye){var it,nt,vt,ot=[];for(it=0,nt=_e.length;it<nt;it++)(vt=Su(de,_e[it]*Ye,it<nt-1?_e[it+1]*Ye:de.length,Ye,!1))===vt.next&&(vt.steiner=!0),ot.push(lh(vt));for(ot.sort(rg),it=0;it<ot.length;it++)Oe=Qs(Oe=og(ot[it],Oe),Oe.next);return Oe}(r,i,K,u)),r.length>80*u){m=E=r[0],b=T=r[1];for(var te=u;te<q;te+=u)(z=r[te])<m&&(m=z),(U=r[te+1])<b&&(b=U),z>E&&(E=z),U>T&&(T=U);V=(V=Math.max(E-m,T-b))!==0?1/V:0}return Gh(K,$,u,m,b,V),$}function Su(r,i,u,m,b){var E,T;if(b===Tp(r,i,u,m)>0)for(E=i;E<u;E+=m)T=hh(E,r[E],r[E+1],T);else for(E=u-m;E>=i;E-=m)T=hh(E,r[E],r[E+1],T);return T&&Hh(T,T.next)&&(Dc(T),T=T.next),T}function Qs(r,i){if(!r)return r;i||(i=r);var u,m=r;do if(u=!1,m.steiner||!Hh(m,m.next)&&fo(m.prev,m,m.next)!==0)m=m.next;else{if(Dc(m),(m=i=m.prev)===m.next)break;u=!0}while(u||m!==i);return i}function Gh(r,i,u,m,b,E,T){if(r){!T&&E&&function(G,q,K,$){var te=G;do te.z===null&&(te.z=Ip(te.x,te.y,q,K,$)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==G);te.prevZ.nextZ=null,te.prevZ=null,function(de){var _e,Oe,Ye,it,nt,vt,ot,Kt,Wt=1;do{for(Oe=de,de=null,nt=null,vt=0;Oe;){for(vt++,Ye=Oe,ot=0,_e=0;_e<Wt&&(ot++,Ye=Ye.nextZ);_e++);for(Kt=Wt;ot>0||Kt>0&&Ye;)ot!==0&&(Kt===0||!Ye||Oe.z<=Ye.z)?(it=Oe,Oe=Oe.nextZ,ot--):(it=Ye,Ye=Ye.nextZ,Kt--),nt?nt.nextZ=it:de=it,it.prevZ=nt,nt=it;Oe=Ye}nt.nextZ=null,Wt*=2}while(vt>1)}(te)}(r,m,b,E);for(var z,U,V=r;r.prev!==r.next;)if(z=r.prev,U=r.next,E?tg(r,m,b,E):eg(r))i.push(z.i/u),i.push(r.i/u),i.push(U.i/u),Dc(r),r=U.next,V=U.next;else if((r=U)===V){T?T===1?Gh(r=ig(Qs(r),i,u),i,u,m,b,E,2):T===2&&ng(r,i,u,m,b,E):Gh(Qs(r),i,u,m,b,E,1);break}}}function eg(r){var i=r.prev,u=r,m=r.next;if(fo(i,u,m)>=0)return!1;for(var b=r.next.next;b!==r.prev;){if(uh(i.x,i.y,u.x,u.y,m.x,m.y,b.x,b.y)&&fo(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function tg(r,i,u,m){var b=r.prev,E=r,T=r.next;if(fo(b,E,T)>=0)return!1;for(var z=b.x>E.x?b.x>T.x?b.x:T.x:E.x>T.x?E.x:T.x,U=b.y>E.y?b.y>T.y?b.y:T.y:E.y>T.y?E.y:T.y,V=Ip(b.x<E.x?b.x<T.x?b.x:T.x:E.x<T.x?E.x:T.x,b.y<E.y?b.y<T.y?b.y:T.y:E.y<T.y?E.y:T.y,i,u,m),G=Ip(z,U,i,u,m),q=r.prevZ,K=r.nextZ;q&&q.z>=V&&K&&K.z<=G;){if(q!==r.prev&&q!==r.next&&uh(b.x,b.y,E.x,E.y,T.x,T.y,q.x,q.y)&&fo(q.prev,q,q.next)>=0||(q=q.prevZ,K!==r.prev&&K!==r.next&&uh(b.x,b.y,E.x,E.y,T.x,T.y,K.x,K.y)&&fo(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;q&&q.z>=V;){if(q!==r.prev&&q!==r.next&&uh(b.x,b.y,E.x,E.y,T.x,T.y,q.x,q.y)&&fo(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;K&&K.z<=G;){if(K!==r.prev&&K!==r.next&&uh(b.x,b.y,E.x,E.y,T.x,T.y,K.x,K.y)&&fo(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function ig(r,i,u){var m=r;do{var b=m.prev,E=m.next.next;!Hh(b,E)&&Zh(b,m,m.next,E)&&ch(b,E)&&ch(E,b)&&(i.push(b.i/u),i.push(m.i/u),i.push(E.i/u),Dc(m),Dc(m.next),m=r=E),m=m.next}while(m!==r);return Qs(m)}function ng(r,i,u,m,b,E){var T=r;do{for(var z=T.next.next;z!==T.prev;){if(T.i!==z.i&&Po(T,z)){var U=Sp(T,z);return T=Qs(T,T.next),U=Qs(U,U.next),Gh(T,i,u,m,b,E),void Gh(U,i,u,m,b,E)}z=z.next}T=T.next}while(T!==r)}function rg(r,i){return r.x-i.x}function og(r,i){var u=function(E,T){var z,U=T,V=E.x,G=E.y,q=-1/0;do{if(G<=U.y&&G>=U.next.y&&U.next.y!==U.y){var K=U.x+(G-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(K<=V&&K>q){if(q=K,K===V){if(G===U.y)return U;if(G===U.next.y)return U.next}z=U.x<U.next.x?U:U.next}}U=U.next}while(U!==T);if(!z)return null;if(V===q)return z;var $,te=z,de=z.x,_e=z.y,Oe=1/0;U=z;do V>=U.x&&U.x>=de&&V!==U.x&&uh(G<_e?V:q,G,de,_e,G<_e?q:V,G,U.x,U.y)&&($=Math.abs(G-U.y)/(V-U.x),ch(U,E)&&($<Oe||$===Oe&&(U.x>z.x||U.x===z.x&&Ep(z,U)))&&(z=U,Oe=$)),U=U.next;while(U!==te);return z}(r,i);if(!u)return i;var m=Sp(u,r),b=Qs(u,u.next);return Qs(m,m.next),i===u?b:i}function Ep(r,i){return fo(r.prev,r,i.prev)<0&&fo(i.next,r,r.next)<0}function Ip(r,i,u,m,b){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-u)*b)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-m)*b)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function lh(r){var i=r,u=r;do(i.x<u.x||i.x===u.x&&i.y<u.y)&&(u=i),i=i.next;while(i!==r);return u}function uh(r,i,u,m,b,E,T,z){return(b-T)*(i-z)-(r-T)*(E-z)>=0&&(r-T)*(m-z)-(u-T)*(i-z)>=0&&(u-T)*(E-z)-(b-T)*(m-z)>=0}function Po(r,i){return r.next.i!==i.i&&r.prev.i!==i.i&&!function(u,m){var b=u;do{if(b.i!==u.i&&b.next.i!==u.i&&b.i!==m.i&&b.next.i!==m.i&&Zh(b,b.next,u,m))return!0;b=b.next}while(b!==u);return!1}(r,i)&&(ch(r,i)&&ch(i,r)&&function(u,m){var b=u,E=!1,T=(u.x+m.x)/2,z=(u.y+m.y)/2;do b.y>z!=b.next.y>z&&b.next.y!==b.y&&T<(b.next.x-b.x)*(z-b.y)/(b.next.y-b.y)+b.x&&(E=!E),b=b.next;while(b!==u);return E}(r,i)&&(fo(r.prev,r,i.prev)||fo(r,i.prev,i))||Hh(r,i)&&fo(r.prev,r,r.next)>0&&fo(i.prev,i,i.next)>0)}function fo(r,i,u){return(i.y-r.y)*(u.x-i.x)-(i.x-r.x)*(u.y-i.y)}function Hh(r,i){return r.x===i.x&&r.y===i.y}function Zh(r,i,u,m){var b=nc(fo(r,i,u)),E=nc(fo(r,i,m)),T=nc(fo(u,m,r)),z=nc(fo(u,m,i));return b!==E&&T!==z||!(b!==0||!zc(r,u,i))||!(E!==0||!zc(r,m,i))||!(T!==0||!zc(u,r,m))||!(z!==0||!zc(u,i,m))}function zc(r,i,u){return i.x<=Math.max(r.x,u.x)&&i.x>=Math.min(r.x,u.x)&&i.y<=Math.max(r.y,u.y)&&i.y>=Math.min(r.y,u.y)}function nc(r){return r>0?1:r<0?-1:0}function ch(r,i){return fo(r.prev,r,r.next)<0?fo(r,i,r.next)>=0&&fo(r,r.prev,i)>=0:fo(r,i,r.prev)<0||fo(r,r.next,i)<0}function Sp(r,i){var u=new Wh(r.i,r.x,r.y),m=new Wh(i.i,i.x,i.y),b=r.next,E=i.prev;return r.next=i,i.prev=r,u.next=b,b.prev=u,m.next=u,u.prev=m,E.next=m,m.prev=E,m}function hh(r,i,u,m){var b=new Wh(r,i,u);return m?(b.next=m.next,b.prev=m,m.next.prev=b,m.next=b):(b.prev=b,b.next=b),b}function Dc(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Wh(r,i,u){this.i=r,this.x=i,this.y=u,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Tp(r,i,u,m){for(var b=0,E=i,T=u-m;E<u;E+=m)b+=(r[T]-r[E])*(r[E+1]+r[T+1]),T=E;return b}sh.exports=qh,sh.exports.default=qh,qh.deviation=function(r,i,u,m){var b=i&&i.length,E=Math.abs(Tp(r,0,b?i[0]*u:r.length,u));if(b)for(var T=0,z=i.length;T<z;T++)E-=Math.abs(Tp(r,i[T]*u,T<z-1?i[T+1]*u:r.length,u));var U=0;for(T=0;T<m.length;T+=3){var V=m[T]*u,G=m[T+1]*u,q=m[T+2]*u;U+=Math.abs((r[V]-r[q])*(r[G+1]-r[V+1])-(r[V]-r[G])*(r[q+1]-r[V+1]))}return E===0&&U===0?0:Math.abs((U-E)/E)},qh.flatten=function(r){for(var i=r[0][0].length,u={vertices:[],holes:[],dimensions:i},m=0,b=0;b<r.length;b++){for(var E=0;E<r[b].length;E++)for(var T=0;T<i;T++)u.vertices.push(r[b][E][T]);b>0&&u.holes.push(m+=r[b-1].length)}return u};var dh=sh.exports;function ag(r,i,u,m,b){Dd(r,i,u||0,m||r.length-1,b||Ap)}function Dd(r,i,u,m,b){for(;m>u;){if(m-u>600){var E=m-u+1,T=i-u+1,z=Math.log(E),U=.5*Math.exp(2*z/3),V=.5*Math.sqrt(z*U*(E-U)/E)*(T-E/2<0?-1:1);Dd(r,i,Math.max(u,Math.floor(i-T*U/E+V)),Math.min(m,Math.floor(i+(E-T)*U/E+V)),b)}var G=r[i],q=u,K=m;for(Xh(r,u,i),b(r[m],G)>0&&Xh(r,u,m);q<K;){for(Xh(r,q,K),q++,K--;b(r[q],G)<0;)q++;for(;b(r[K],G)>0;)K--}b(r[u],G)===0?Xh(r,u,K):Xh(r,++K,m),K<=i&&(u=K+1),i<=K&&(m=K-1)}}function Xh(r,i,u){var m=r[i];r[i]=r[u],r[u]=m}function Ap(r,i){return r<i?-1:r>i?1:0}function Kh(r,i){const u=r.length;if(u<=1)return[r];const m=[];let b,E;for(let T=0;T<u;T++){const z=fe(r[T]);z!==0&&(r[T].area=Math.abs(z),E===void 0&&(E=z<0),E===z<0?(b&&m.push(b),b=[r[T]]):b.push(r[T]))}if(b&&m.push(b),i>1)for(let T=0;T<m.length;T++)m[T].length<=i||(ag(m[T],i,1,m[T].length-1,wl),m[T]=m[T].slice(0,i));return m}function wl(r,i){return i.area-r.area}function Cp(r,i,u){const m=u.patternDependencies;let b=!1;for(const E of i){const T=E.paint.get(`${r}-pattern`);T.isConstant()||(b=!0);const z=T.constantOr(null);z&&(b=!0,m[z.to]=!0,m[z.from]=!0)}return b}function kp(r,i,u,m,b){const E=b.patternDependencies;for(const T of i){const z=T.paint.get(`${r}-pattern`).value;if(z.kind!=="constant"){let U=z.evaluate({zoom:m-1},u,{},b.availableImages),V=z.evaluate({zoom:m},u,{},b.availableImages),G=z.evaluate({zoom:m+1},u,{},b.availableImages);U=U&&U.name?U.name:U,V=V&&V.name?V.name:V,G=G&&G.name?G.name:G,E[U]=!0,E[V]=!0,E[G]=!0,u.patterns[T.id]={min:U,mid:V,max:G}}}return u}class Mp{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new g,this.indexArray=new Ee,this.indexArray2=new Be,this.programConfigurations=new wo(i.layers,i.zoom),this.segments=new Ce,this.segments2=new Ce,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,m){this.hasPattern=Cp("fill",this.layers,u);const b=this.layers[0].layout.get("fill-sort-key"),E=!b.isConstant(),T=[];for(const{feature:z,id:U,index:V,sourceLayerIndex:G}of i){const q=this.layers[0]._featureFilter.needGeometry,K=Mo(z,q);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),K,m))continue;const $=E?b.evaluate(K,{},m,u.availableImages):void 0,te={id:U,properties:z.properties,type:z.type,sourceLayerIndex:G,index:V,geometry:q?K.geometry:Ga(z),patterns:{},sortKey:$};T.push(te)}E&&T.sort((z,U)=>z.sortKey-U.sortKey);for(const z of T){const{geometry:U,index:V,sourceLayerIndex:G}=z;if(this.hasPattern){const q=kp("fill",this.layers,z,this.zoom,u);this.patternFeatures.push(q)}else this.addFeature(z,U,V,m,{});u.featureIndex.insert(i[V].feature,U,V,G,this.index)}}update(i,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,m)}addFeatures(i,u,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,$m),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,u,m,b,E){for(const T of Kh(u,500)){let z=0;for(const $ of T)z+=$.length;const U=this.segments.prepareSegment(z,this.layoutVertexArray,this.indexArray),V=U.vertexLength,G=[],q=[];for(const $ of T){if($.length===0)continue;$!==T[0]&&q.push(G.length/2);const te=this.segments2.prepareSegment($.length,this.layoutVertexArray,this.indexArray2),de=te.vertexLength;this.layoutVertexArray.emplaceBack($[0].x,$[0].y),this.indexArray2.emplaceBack(de+$.length-1,de),G.push($[0].x),G.push($[0].y);for(let _e=1;_e<$.length;_e++)this.layoutVertexArray.emplaceBack($[_e].x,$[_e].y),this.indexArray2.emplaceBack(de+_e-1,de+_e),G.push($[_e].x),G.push($[_e].y);te.vertexLength+=$.length,te.primitiveLength+=$.length}const K=dh(G,q);for(let $=0;$<K.length;$+=3)this.indexArray.emplaceBack(V+K[$],V+K[$+1],V+K[$+2]);U.vertexLength+=z,U.primitiveLength+=K.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,m,E,b)}}Si("FillBucket",Mp,{omit:["layers","patternFeatures"]});const sg=new Qr({"fill-sort-key":new ci(Ze.layout_fill["fill-sort-key"])});var Sf={paint:new Qr({"fill-antialias":new Di(Ze.paint_fill["fill-antialias"]),"fill-opacity":new ci(Ze.paint_fill["fill-opacity"]),"fill-color":new ci(Ze.paint_fill["fill-color"]),"fill-outline-color":new ci(Ze.paint_fill["fill-outline-color"]),"fill-translate":new Di(Ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Di(Ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new _a(Ze.paint_fill["fill-pattern"])}),layout:sg};const ph=fi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:lg}=ph;var rc={},Tf=Et,Lp=fh;function fh(r,i,u,m,b){this.properties={},this.extent=u,this.type=0,this._pbf=r,this._geometry=-1,this._keys=m,this._values=b,r.readFields(ug,this,i)}function ug(r,i,u){r==1?i.id=u.readVarint():r==2?function(m,b){for(var E=m.readVarint()+m.pos;m.pos<E;){var T=b._keys[m.readVarint()],z=b._values[m.readVarint()];b.properties[T]=z}}(u,i):r==3?i.type=u.readVarint():r==4&&(i._geometry=u.pos)}function mh(r){for(var i,u,m=0,b=0,E=r.length,T=E-1;b<E;T=b++)m+=((u=r[T]).x-(i=r[b]).x)*(i.y+u.y);return m}fh.types=["Unknown","Point","LineString","Polygon"],fh.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var i,u=r.readVarint()+r.pos,m=1,b=0,E=0,T=0,z=[];r.pos<u;){if(b<=0){var U=r.readVarint();m=7&U,b=U>>3}if(b--,m===1||m===2)E+=r.readSVarint(),T+=r.readSVarint(),m===1&&(i&&z.push(i),i=[]),i.push(new Tf(E,T));else{if(m!==7)throw new Error("unknown command "+m);i&&i.push(i[0].clone())}}return i&&z.push(i),z},fh.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var i=r.readVarint()+r.pos,u=1,m=0,b=0,E=0,T=1/0,z=-1/0,U=1/0,V=-1/0;r.pos<i;){if(m<=0){var G=r.readVarint();u=7&G,m=G>>3}if(m--,u===1||u===2)(b+=r.readSVarint())<T&&(T=b),b>z&&(z=b),(E+=r.readSVarint())<U&&(U=E),E>V&&(V=E);else if(u!==7)throw new Error("unknown command "+u)}return[T,U,z,V]},fh.prototype.toGeoJSON=function(r,i,u){var m,b,E=this.extent*Math.pow(2,u),T=this.extent*r,z=this.extent*i,U=this.loadGeometry(),V=fh.types[this.type];function G($){for(var te=0;te<$.length;te++){var de=$[te];$[te]=[360*(de.x+T)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(de.y+z)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(m=0;m<U.length;m++)q[m]=U[m][0];G(U=q);break;case 2:for(m=0;m<U.length;m++)G(U[m]);break;case 3:for(U=function($){var te=$.length;if(te<=1)return[$];for(var de,_e,Oe=[],Ye=0;Ye<te;Ye++){var it=mh($[Ye]);it!==0&&(_e===void 0&&(_e=it<0),_e===it<0?(de&&Oe.push(de),de=[$[Ye]]):de.push($[Ye]))}return de&&Oe.push(de),Oe}(U),m=0;m<U.length;m++)for(b=0;b<U[m].length;b++)G(U[m][b])}U.length===1?U=U[0]:V="Multi"+V;var K={type:"Feature",geometry:{type:V,coordinates:U},properties:this.properties};return"id"in this&&(K.id=this.id),K};var cg=Lp,Rd=gh;function gh(r,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(El,this,i),this.length=this._features.length}function El(r,i,u){r===15?i.version=u.readVarint():r===1?i.name=u.readString():r===5?i.extent=u.readVarint():r===2?i._features.push(u.pos):r===3?i._keys.push(u.readString()):r===4&&i._values.push(function(m){for(var b=null,E=m.readVarint()+m.pos;m.pos<E;){var T=m.readVarint()>>3;b=T===1?m.readString():T===2?m.readFloat():T===3?m.readDouble():T===4?m.readVarint64():T===5?m.readVarint():T===6?m.readSVarint():T===7?m.readBoolean():null}return b}(u))}gh.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var i=this._pbf.readVarint()+this._pbf.pos;return new cg(this._pbf,i,this.extent,this._keys,this._values)};var hg=Rd;function dg(r,i,u){if(r===3){var m=new hg(u,u.readVarint()+u.pos);m.length&&(i[m.name]=m)}}rc.VectorTile=function(r,i){this.layers=r.readFields(dg,{},i)},rc.VectorTileFeature=Lp,rc.VectorTileLayer=Rd;const pg=rc.VectorTileFeature.types,Rc=Math.pow(2,13);function yh(r,i,u,m,b,E,T,z){r.emplaceBack(i,u,2*Math.floor(m*Rc)+T,b*Rc*2,E*Rc*2,Math.round(z))}class Pp{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new w,this.indexArray=new Ee,this.programConfigurations=new wo(i.layers,i.zoom),this.segments=new Ce,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,m){this.features=[],this.hasPattern=Cp("fill-extrusion",this.layers,u);for(const{feature:b,id:E,index:T,sourceLayerIndex:z}of i){const U=this.layers[0]._featureFilter.needGeometry,V=Mo(b,U);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),V,m))continue;const G={id:E,sourceLayerIndex:z,index:T,geometry:U?V.geometry:Ga(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(kp("fill-extrusion",this.layers,G,this.zoom,u)):this.addFeature(G,G.geometry,T,m,{}),u.featureIndex.insert(b,G.geometry,T,z,this.index,!0)}}addFeatures(i,u,m){for(const b of this.features){const{geometry:E}=b;this.addFeature(b,E,b.index,u,m)}}update(i,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,lg),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,u,m,b,E){for(const T of Kh(u,500)){let z=0;for(const $ of T)z+=$.length;let U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const $ of T){if($.length===0||mg($))continue;let te=0;for(let de=0;de<$.length;de++){const _e=$[de];if(de>=1){const Oe=$[de-1];if(!fg(_e,Oe)){U.vertexLength+4>Ce.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ye=_e.sub(Oe)._perp()._unit(),it=Oe.dist(_e);te+it>32768&&(te=0),yh(this.layoutVertexArray,_e.x,_e.y,Ye.x,Ye.y,0,0,te),yh(this.layoutVertexArray,_e.x,_e.y,Ye.x,Ye.y,0,1,te),te+=it,yh(this.layoutVertexArray,Oe.x,Oe.y,Ye.x,Ye.y,0,0,te),yh(this.layoutVertexArray,Oe.x,Oe.y,Ye.x,Ye.y,0,1,te);const nt=U.vertexLength;this.indexArray.emplaceBack(nt,nt+2,nt+1),this.indexArray.emplaceBack(nt+1,nt+2,nt+3),U.vertexLength+=4,U.primitiveLength+=2}}}}if(U.vertexLength+z>Ce.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(z,this.layoutVertexArray,this.indexArray)),pg[i.type]!=="Polygon")continue;const V=[],G=[],q=U.vertexLength;for(const $ of T)if($.length!==0){$!==T[0]&&G.push(V.length/2);for(let te=0;te<$.length;te++){const de=$[te];yh(this.layoutVertexArray,de.x,de.y,0,0,1,1,0),V.push(de.x),V.push(de.y)}}const K=dh(V,G);for(let $=0;$<K.length;$+=3)this.indexArray.emplaceBack(q+K[$],q+K[$+2],q+K[$+1]);U.primitiveLength+=K.length/3,U.vertexLength+=z}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,m,E,b)}}function fg(r,i){return r.x===i.x&&(r.x<0||r.x>er)||r.y===i.y&&(r.y<0||r.y>er)}function mg(r){return r.every(i=>i.x<0)||r.every(i=>i.x>er)||r.every(i=>i.y<0)||r.every(i=>i.y>er)}Si("FillExtrusionBucket",Pp,{omit:["layers","features"]});var gg={paint:new Qr({"fill-extrusion-opacity":new Di(Ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ci(Ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Di(Ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Di(Ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _a(Ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ci(Ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ci(Ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Di(Ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function _h(r,i){return r.x*i.x+r.y*i.y}function Ea(r,i){if(r.length===1){let u=0;const m=i[u++];let b;for(;!b||m.equals(b);)if(b=i[u++],!b)return 1/0;for(;u<i.length;u++){const E=i[u],T=r[0],z=b.sub(m),U=E.sub(m),V=T.sub(m),G=_h(z,z),q=_h(z,U),K=_h(U,U),$=_h(V,z),te=_h(V,U),de=G*K-q*q,_e=(K*$-q*te)/de,Oe=(G*te-q*$)/de,Ye=m.z*(1-_e-Oe)+b.z*_e+E.z*Oe;if(isFinite(Ye))return Ye}return 1/0}{let u=1/0;for(const m of i)u=Math.min(u,m.z);return u}}const yg=fi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Af}=yg,Cf=fi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:_g}=Cf,kf=rc.VectorTileFeature.types,vg=Math.cos(Math.PI/180*37.5),Mf=Math.pow(2,14)/.5;class zp{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new L,this.layoutVertexArray2=new F,this.indexArray=new Ee,this.programConfigurations=new wo(i.layers,i.zoom),this.segments=new Ce,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,m){this.hasPattern=Cp("line",this.layers,u);const b=this.layers[0].layout.get("line-sort-key"),E=!b.isConstant(),T=[];for(const{feature:z,id:U,index:V,sourceLayerIndex:G}of i){const q=this.layers[0]._featureFilter.needGeometry,K=Mo(z,q);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),K,m))continue;const $=E?b.evaluate(K,{},m):void 0,te={id:U,properties:z.properties,type:z.type,sourceLayerIndex:G,index:V,geometry:q?K.geometry:Ga(z),patterns:{},sortKey:$};T.push(te)}E&&T.sort((z,U)=>z.sortKey-U.sortKey);for(const z of T){const{geometry:U,index:V,sourceLayerIndex:G}=z;if(this.hasPattern){const q=kp("line",this.layers,z,this.zoom,u);this.patternFeatures.push(q)}else this.addFeature(z,U,V,m,{});u.featureIndex.insert(i[V].feature,U,V,G,this.index)}}update(i,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,m)}addFeatures(i,u,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,_g)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Af),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,u,m,b,E){const T=this.layers[0].layout,z=T.get("line-join").evaluate(i,{}),U=T.get("line-cap"),V=T.get("line-miter-limit"),G=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const q of u)this.addLine(q,i,z,U,V,G);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,m,E,b)}addLine(i,u,m,b,E,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Oe=0;Oe<i.length-1;Oe++)this.totalDistance+=i[Oe].dist(i[Oe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const z=kf[u.type]==="Polygon";let U=i.length;for(;U>=2&&i[U-1].equals(i[U-2]);)U--;let V=0;for(;V<U-1&&i[V].equals(i[V+1]);)V++;if(U<(z?3:2))return;m==="bevel"&&(E=1.05);const G=this.overscaling<=16?122880/(512*this.overscaling):0,q=this.segments.prepareSegment(10*U,this.layoutVertexArray,this.indexArray);let K,$,te,de,_e;this.e1=this.e2=-1,z&&(K=i[U-2],_e=i[V].sub(K)._unit()._perp());for(let Oe=V;Oe<U;Oe++){if(te=Oe===U-1?z?i[V+1]:void 0:i[Oe+1],te&&i[Oe].equals(te))continue;_e&&(de=_e),K&&($=K),K=i[Oe],_e=te?te.sub(K)._unit()._perp():de,de=de||_e;let Ye=de.add(_e);Ye.x===0&&Ye.y===0||Ye._unit();const it=de.x*_e.x+de.y*_e.y,nt=Ye.x*_e.x+Ye.y*_e.y,vt=nt!==0?1/nt:1/0,ot=2*Math.sqrt(2-2*nt),Kt=nt<vg&&$&&te,Wt=de.x*_e.y-de.y*_e.x>0;if(Kt&&Oe>V){const Nt=K.dist($);if(Nt>2*G){const $t=K.sub(K.sub($)._mult(G/Nt)._round());this.updateDistance($,$t),this.addCurrentVertex($t,de,0,0,q),$=$t}}const Lt=$&&te;let Zt=Lt?m:z?"butt":b;if(Lt&&Zt==="round"&&(vt<T?Zt="miter":vt<=2&&(Zt="fakeround")),Zt==="miter"&&vt>E&&(Zt="bevel"),Zt==="bevel"&&(vt>2&&(Zt="flipbevel"),vt<E&&(Zt="miter")),$&&this.updateDistance($,K),Zt==="miter")Ye._mult(vt),this.addCurrentVertex(K,Ye,0,0,q);else if(Zt==="flipbevel"){if(vt>100)Ye=_e.mult(-1);else{const Nt=vt*de.add(_e).mag()/de.sub(_e).mag();Ye._perp()._mult(Nt*(Wt?-1:1))}this.addCurrentVertex(K,Ye,0,0,q),this.addCurrentVertex(K,Ye.mult(-1),0,0,q)}else if(Zt==="bevel"||Zt==="fakeround"){const Nt=-Math.sqrt(vt*vt-1),$t=Wt?Nt:0,Ot=Wt?0:Nt;if($&&this.addCurrentVertex(K,de,$t,Ot,q),Zt==="fakeround"){const Vt=Math.round(180*ot/Math.PI/20);for(let ki=1;ki<Vt;ki++){let Ai=ki/Vt;if(Ai!==.5){const un=Ai-.5;Ai+=Ai*un*(Ai-1)*((1.0904+it*(it*(3.55645-1.43519*it)-3.2452))*un*un+(.848013+it*(.215638*it-1.06021)))}const on=_e.sub(de)._mult(Ai)._add(de)._unit()._mult(Wt?-1:1);this.addHalfVertex(K,on.x,on.y,!1,Wt,0,q)}}te&&this.addCurrentVertex(K,_e,-$t,-Ot,q)}else if(Zt==="butt")this.addCurrentVertex(K,Ye,0,0,q);else if(Zt==="square"){const Nt=$?1:-1;this.addCurrentVertex(K,Ye,Nt,Nt,q)}else Zt==="round"&&($&&(this.addCurrentVertex(K,de,0,0,q),this.addCurrentVertex(K,de,1,1,q,!0)),te&&(this.addCurrentVertex(K,_e,-1,-1,q,!0),this.addCurrentVertex(K,_e,0,0,q)));if(Kt&&Oe<U-1){const Nt=K.dist(te);if(Nt>2*G){const $t=K.add(te.sub(K)._mult(G/Nt)._round());this.updateDistance(K,$t),this.addCurrentVertex($t,_e,0,0,q),K=$t}}}}addCurrentVertex(i,u,m,b,E,T=!1){const z=u.y*b-u.x,U=-u.y-u.x*b;this.addHalfVertex(i,u.x+u.y*m,u.y-u.x*m,T,!1,m,E),this.addHalfVertex(i,z,U,T,!0,-b,E),this.distance>Mf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(i,u,m,b,E,T))}addHalfVertex({x:i,y:u},m,b,E,T,z,U){const V=.5*(this.lineClips?this.scaledDistance*(Mf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(E?1:0),(u<<1)+(T?1:0),Math.round(63*m)+128,Math.round(63*b)+128,1+(z===0?0:z<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const G=U.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,G),U.primitiveLength++),T?this.e2=G:this.e1=G}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,u){this.distance+=i.dist(u),this.updateScaledDistance()}}Si("LineBucket",zp,{omit:["layers","patternFeatures"]});const Lf=new Qr({"line-cap":new Di(Ze.layout_line["line-cap"]),"line-join":new ci(Ze.layout_line["line-join"]),"line-miter-limit":new Di(Ze.layout_line["line-miter-limit"]),"line-round-limit":new Di(Ze.layout_line["line-round-limit"]),"line-sort-key":new ci(Ze.layout_line["line-sort-key"])});var Pf={paint:new Qr({"line-opacity":new ci(Ze.paint_line["line-opacity"]),"line-color":new ci(Ze.paint_line["line-color"]),"line-translate":new Di(Ze.paint_line["line-translate"]),"line-translate-anchor":new Di(Ze.paint_line["line-translate-anchor"]),"line-width":new ci(Ze.paint_line["line-width"]),"line-gap-width":new ci(Ze.paint_line["line-gap-width"]),"line-offset":new ci(Ze.paint_line["line-offset"]),"line-blur":new ci(Ze.paint_line["line-blur"]),"line-dasharray":new ia(Ze.paint_line["line-dasharray"]),"line-pattern":new _a(Ze.paint_line["line-pattern"]),"line-gradient":new To(Ze.paint_line["line-gradient"])}),layout:Lf};const zf=new class extends ci{possiblyEvaluate(r,i){return i=new Vr(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),super.possiblyEvaluate(r,i)}evaluate(r,i,u,m){return i=ee({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(r,i,u,m)}}(Pf.paint.properties["line-width"].specification);function vh(r,i){return i>0?i+2*r:r}zf.useIntegerZoom=!0;const Df=fi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Rf=fi([{name:"a_projected_pos",components:3,type:"Float32"}],4);fi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Od=fi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);fi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const jr=fi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Of=fi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Tu(r,i,u){return r.sections.forEach(m=>{m.text=function(b,E,T){const z=E.layout.get("text-transform").evaluate(T,{});return z==="uppercase"?b=b.toLocaleUpperCase():z==="lowercase"&&(b=b.toLocaleLowerCase()),Yr.applyArabicShaping&&(b=Yr.applyArabicShaping(b)),b}(m.text,i,u)}),r}fi([{name:"triangle",components:3,type:"Uint16"}]),fi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),fi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),fi([{type:"Float32",name:"offsetX"}]),fi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const jl={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var ra=24,Dp=Zr,Bf=function(r,i,u,m,b){var E,T,z=8*b-m-1,U=(1<<z)-1,V=U>>1,G=-7,q=u?b-1:0,K=u?-1:1,$=r[i+q];for(q+=K,E=$&(1<<-G)-1,$>>=-G,G+=z;G>0;E=256*E+r[i+q],q+=K,G-=8);for(T=E&(1<<-G)-1,E>>=-G,G+=m;G>0;T=256*T+r[i+q],q+=K,G-=8);if(E===0)E=1-V;else{if(E===U)return T?NaN:1/0*($?-1:1);T+=Math.pow(2,m),E-=V}return($?-1:1)*T*Math.pow(2,E-m)},Ff=function(r,i,u,m,b,E){var T,z,U,V=8*E-b-1,G=(1<<V)-1,q=G>>1,K=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=m?0:E-1,te=m?1:-1,de=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(z=isNaN(i)?1:0,T=G):(T=Math.floor(Math.log(i)/Math.LN2),i*(U=Math.pow(2,-T))<1&&(T--,U*=2),(i+=T+q>=1?K/U:K*Math.pow(2,1-q))*U>=2&&(T++,U/=2),T+q>=G?(z=0,T=G):T+q>=1?(z=(i*U-1)*Math.pow(2,b),T+=q):(z=i*Math.pow(2,q-1)*Math.pow(2,b),T=0));b>=8;r[u+$]=255&z,$+=te,z/=256,b-=8);for(T=T<<b|z,V+=b;V>0;r[u+$]=255&T,$+=te,T/=256,V-=8);r[u+$-te]|=128*de};function Zr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Zr.Varint=0,Zr.Fixed64=1,Zr.Bytes=2,Zr.Fixed32=5;var oc,Rp=4294967296,Uf=1/Rp,Nf=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Au(r){return r.type===Zr.Bytes?r.readVarint()+r.pos:r.pos+1}function Cu(r,i,u){return u?4294967296*i+(r>>>0):4294967296*(i>>>0)+(r>>>0)}function Oc(r,i,u){var m=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));u.realloc(m);for(var b=u.pos-1;b>=r;b--)u.buf[b+m]=u.buf[b]}function Vf(r,i){for(var u=0;u<r.length;u++)i.writeVarint(r[u])}function bg(r,i){for(var u=0;u<r.length;u++)i.writeSVarint(r[u])}function xg(r,i){for(var u=0;u<r.length;u++)i.writeFloat(r[u])}function wg(r,i){for(var u=0;u<r.length;u++)i.writeDouble(r[u])}function jf(r,i){for(var u=0;u<r.length;u++)i.writeBoolean(r[u])}function Bd(r,i){for(var u=0;u<r.length;u++)i.writeFixed32(r[u])}function Jh(r,i){for(var u=0;u<r.length;u++)i.writeSFixed32(r[u])}function Yh(r,i){for(var u=0;u<r.length;u++)i.writeFixed64(r[u])}function fs(r,i){for(var u=0;u<r.length;u++)i.writeSFixed64(r[u])}function ku(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+16777216*r[i+3]}function zo(r,i,u){r[u]=i,r[u+1]=i>>>8,r[u+2]=i>>>16,r[u+3]=i>>>24}function Qh(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+(r[i+3]<<24)}function Fd(r,i,u){r===1&&u.readMessage(Qa,i)}function Qa(r,i,u){if(r===3){const{id:m,bitmap:b,width:E,height:T,left:z,top:U,advance:V}=u.readMessage(qf,{});i.push({id:m,bitmap:new jh({width:E+6,height:T+6},b),metrics:{width:E,height:T,left:z,top:U,advance:V}})}}function qf(r,i,u){r===1?i.id=u.readVarint():r===2?i.bitmap=u.readBytes():r===3?i.width=u.readVarint():r===4?i.height=u.readVarint():r===5?i.left=u.readSVarint():r===6?i.top=u.readSVarint():r===7&&(i.advance=u.readVarint())}function Op(r){let i=0,u=0;for(const T of r)i+=T.w*T.h,u=Math.max(u,T.w);r.sort((T,z)=>z.h-T.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),u),h:1/0}];let b=0,E=0;for(const T of r)for(let z=m.length-1;z>=0;z--){const U=m[z];if(!(T.w>U.w||T.h>U.h)){if(T.x=U.x,T.y=U.y,E=Math.max(E,T.y+T.h),b=Math.max(b,T.x+T.w),T.w===U.w&&T.h===U.h){const V=m.pop();z<m.length&&(m[z]=V)}else T.h===U.h?(U.x+=T.w,U.w-=T.w):T.w===U.w?(U.y+=T.h,U.h-=T.h):(m.push({x:U.x+T.w,y:U.y,w:U.w-T.w,h:T.h}),U.y+=T.h,U.h-=T.h);break}}return{w:b,h:E,fill:i/(b*E)||0}}Zr.prototype={destroy:function(){this.buf=null},readFields:function(r,i,u){for(u=u||this.length;this.pos<u;){var m=this.readVarint(),b=m>>3,E=this.pos;this.type=7&m,r(b,i,this),this.pos===E&&this.skip(m)}return i},readMessage:function(r,i){return this.readFields(r,i,this.readVarint()+this.pos)},readFixed32:function(){var r=ku(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=Qh(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=ku(this.buf,this.pos)+ku(this.buf,this.pos+4)*Rp;return this.pos+=8,r},readSFixed64:function(){var r=ku(this.buf,this.pos)+Qh(this.buf,this.pos+4)*Rp;return this.pos+=8,r},readFloat:function(){var r=Bf(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Bf(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var i,u,m=this.buf;return i=127&(u=m[this.pos++]),u<128?i:(i|=(127&(u=m[this.pos++]))<<7,u<128?i:(i|=(127&(u=m[this.pos++]))<<14,u<128?i:(i|=(127&(u=m[this.pos++]))<<21,u<128?i:function(b,E,T){var z,U,V=T.buf;if(z=(112&(U=V[T.pos++]))>>4,U<128||(z|=(127&(U=V[T.pos++]))<<3,U<128)||(z|=(127&(U=V[T.pos++]))<<10,U<128)||(z|=(127&(U=V[T.pos++]))<<17,U<128)||(z|=(127&(U=V[T.pos++]))<<24,U<128)||(z|=(1&(U=V[T.pos++]))<<31,U<128))return Cu(b,z,E);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(u=m[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,i=this.pos;return this.pos=r,r-i>=12&&Nf?function(u,m,b){return Nf.decode(u.subarray(m,b))}(this.buf,i,r):function(u,m,b){for(var E="",T=m;T<b;){var z,U,V,G=u[T],q=null,K=G>239?4:G>223?3:G>191?2:1;if(T+K>b)break;K===1?G<128&&(q=G):K===2?(192&(z=u[T+1]))==128&&(q=(31&G)<<6|63&z)<=127&&(q=null):K===3?(U=u[T+2],(192&(z=u[T+1]))==128&&(192&U)==128&&((q=(15&G)<<12|(63&z)<<6|63&U)<=2047||q>=55296&&q<=57343)&&(q=null)):K===4&&(U=u[T+2],V=u[T+3],(192&(z=u[T+1]))==128&&(192&U)==128&&(192&V)==128&&((q=(15&G)<<18|(63&z)<<12|(63&U)<<6|63&V)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,K=1):q>65535&&(q-=65536,E+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),E+=String.fromCharCode(q),T+=K}return E}(this.buf,i,r)},readBytes:function(){var r=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,r);return this.pos=r,i},readPackedVarint:function(r,i){if(this.type!==Zr.Bytes)return r.push(this.readVarint(i));var u=Au(this);for(r=r||[];this.pos<u;)r.push(this.readVarint(i));return r},readPackedSVarint:function(r){if(this.type!==Zr.Bytes)return r.push(this.readSVarint());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Zr.Bytes)return r.push(this.readBoolean());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Zr.Bytes)return r.push(this.readFloat());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Zr.Bytes)return r.push(this.readDouble());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Zr.Bytes)return r.push(this.readFixed32());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Zr.Bytes)return r.push(this.readSFixed32());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Zr.Bytes)return r.push(this.readFixed64());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Zr.Bytes)return r.push(this.readSFixed64());var i=Au(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed64());return r},skip:function(r){var i=7&r;if(i===Zr.Varint)for(;this.buf[this.pos++]>127;);else if(i===Zr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Zr.Fixed32)this.pos+=4;else{if(i!==Zr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(r,i){this.writeVarint(r<<3|i)},realloc:function(r){for(var i=this.length||16;i<this.pos+r;)i*=2;if(i!==this.length){var u=new Uint8Array(i);u.set(this.buf),this.buf=u,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),zo(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),zo(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),zo(this.buf,-1&r,this.pos),zo(this.buf,Math.floor(r*Uf),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),zo(this.buf,-1&r,this.pos),zo(this.buf,Math.floor(r*Uf),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(i,u){var m,b;if(i>=0?(m=i%4294967296|0,b=i/4294967296|0):(b=~(-i/4294967296),4294967295^(m=~(-i%4294967296))?m=m+1|0:(m=0,b=b+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(E,T,z){z.buf[z.pos++]=127&E|128,E>>>=7,z.buf[z.pos++]=127&E|128,E>>>=7,z.buf[z.pos++]=127&E|128,E>>>=7,z.buf[z.pos++]=127&E|128,z.buf[z.pos]=127&(E>>>=7)}(m,0,u),function(E,T){var z=(7&E)<<4;T.buf[T.pos++]|=z|((E>>>=3)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E)))))}(b,u)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var i=this.pos;this.pos=function(m,b,E){for(var T,z,U=0;U<b.length;U++){if((T=b.charCodeAt(U))>55295&&T<57344){if(!z){T>56319||U+1===b.length?(m[E++]=239,m[E++]=191,m[E++]=189):z=T;continue}if(T<56320){m[E++]=239,m[E++]=191,m[E++]=189,z=T;continue}T=z-55296<<10|T-56320|65536,z=null}else z&&(m[E++]=239,m[E++]=191,m[E++]=189,z=null);T<128?m[E++]=T:(T<2048?m[E++]=T>>6|192:(T<65536?m[E++]=T>>12|224:(m[E++]=T>>18|240,m[E++]=T>>12&63|128),m[E++]=T>>6&63|128),m[E++]=63&T|128)}return E}(this.buf,r,this.pos);var u=this.pos-i;u>=128&&Oc(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeFloat:function(r){this.realloc(4),Ff(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),Ff(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var i=r.length;this.writeVarint(i),this.realloc(i);for(var u=0;u<i;u++)this.buf[this.pos++]=r[u]},writeRawMessage:function(r,i){this.pos++;var u=this.pos;r(i,this);var m=this.pos-u;m>=128&&Oc(u,m,this),this.pos=u-1,this.writeVarint(m),this.pos+=m},writeMessage:function(r,i,u){this.writeTag(r,Zr.Bytes),this.writeRawMessage(i,u)},writePackedVarint:function(r,i){i.length&&this.writeMessage(r,Vf,i)},writePackedSVarint:function(r,i){i.length&&this.writeMessage(r,bg,i)},writePackedBoolean:function(r,i){i.length&&this.writeMessage(r,jf,i)},writePackedFloat:function(r,i){i.length&&this.writeMessage(r,xg,i)},writePackedDouble:function(r,i){i.length&&this.writeMessage(r,wg,i)},writePackedFixed32:function(r,i){i.length&&this.writeMessage(r,Bd,i)},writePackedSFixed32:function(r,i){i.length&&this.writeMessage(r,Jh,i)},writePackedFixed64:function(r,i){i.length&&this.writeMessage(r,Yh,i)},writePackedSFixed64:function(r,i){i.length&&this.writeMessage(r,fs,i)},writeBytesField:function(r,i){this.writeTag(r,Zr.Bytes),this.writeBytes(i)},writeFixed32Field:function(r,i){this.writeTag(r,Zr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(r,i){this.writeTag(r,Zr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(r,i){this.writeTag(r,Zr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(r,i){this.writeTag(r,Zr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(r,i){this.writeTag(r,Zr.Varint),this.writeVarint(i)},writeSVarintField:function(r,i){this.writeTag(r,Zr.Varint),this.writeSVarint(i)},writeStringField:function(r,i){this.writeTag(r,Zr.Bytes),this.writeString(i)},writeFloatField:function(r,i){this.writeTag(r,Zr.Fixed32),this.writeFloat(i)},writeDoubleField:function(r,i){this.writeTag(r,Zr.Fixed64),this.writeDouble(i)},writeBooleanField:function(r,i){this.writeVarintField(r,Boolean(i))}};class Bp{constructor(i,{pixelRatio:u,version:m,stretchX:b,stretchY:E,content:T}){this.paddedRect=i,this.pixelRatio=u,this.stretchX=b,this.stretchY=E,this.content=T,this.version=m}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Fp{constructor(i,u){const m={},b={};this.haveRenderCallbacks=[];const E=[];this.addImages(i,m,E),this.addImages(u,b,E);const{w:T,h:z}=Op(E),U=new Os({width:T||1,height:z||1});for(const V in i){const G=i[V],q=m[V].paddedRect;Os.copy(G.data,U,{x:0,y:0},{x:q.x+1,y:q.y+1},G.data)}for(const V in u){const G=u[V],q=b[V].paddedRect,K=q.x+1,$=q.y+1,te=G.data.width,de=G.data.height;Os.copy(G.data,U,{x:0,y:0},{x:K,y:$},G.data),Os.copy(G.data,U,{x:0,y:de-1},{x:K,y:$-1},{width:te,height:1}),Os.copy(G.data,U,{x:0,y:0},{x:K,y:$+de},{width:te,height:1}),Os.copy(G.data,U,{x:te-1,y:0},{x:K-1,y:$},{width:1,height:de}),Os.copy(G.data,U,{x:0,y:0},{x:K+te,y:$},{width:1,height:de})}this.image=U,this.iconPositions=m,this.patternPositions=b}addImages(i,u,m){for(const b in i){const E=i[b],T={x:0,y:0,w:E.data.width+2,h:E.data.height+2};m.push(T),u[b]=new Bp(T,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(i,u){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in i.updatedImages)this.patchUpdatedImage(this.iconPositions[m],i.getImage(m),u),this.patchUpdatedImage(this.patternPositions[m],i.getImage(m),u)}patchUpdatedImage(i,u,m){if(!i||!u||i.version===u.version)return;i.version=u.version;const[b,E]=i.tl;m.update(u.data,void 0,{x:b,y:E})}}Si("ImagePosition",Bp),Si("ImageAtlas",Fp),h.WritingMode=void 0,(oc=h.WritingMode||(h.WritingMode={}))[oc.none=0]="none",oc[oc.horizontal=1]="horizontal",oc[oc.vertical=2]="vertical",oc[oc.horizontalOnly=3]="horizontalOnly";const bh=-17;class Bc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,u){const m=new Bc;return m.scale=i||1,m.fontStack=u,m}static forImage(i){const u=new Bc;return u.imageName=i,u}}class xh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,u){const m=new xh;for(let b=0;b<i.sections.length;b++){const E=i.sections[b];E.image?m.addImageSection(E):m.addTextSection(E,u)}return m}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let u="";for(let m=0;m<i.length;m++){const b=i.charCodeAt(m+1)||null,E=i.charCodeAt(m-1)||null;u+=b&&Fl(b)&&!jl[i[m+1]]||E&&Fl(E)&&!jl[i[m-1]]||!jl[i[m]]?i[m]:jl[i[m]]}return u}(this.text)}trim(){let i=0;for(let m=0;m<this.text.length&&Mu[this.text.charCodeAt(m)];m++)i++;let u=this.text.length;for(let m=this.text.length-1;m>=0&&m>=i&&Mu[this.text.charCodeAt(m)];m--)u--;this.text=this.text.substring(i,u),this.sectionIndex=this.sectionIndex.slice(i,u)}substring(i,u){const m=new xh;return m.text=this.text.substring(i,u),m.sectionIndex=this.sectionIndex.slice(i,u),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,u)=>Math.max(i,this.sections[u].scale),0)}addTextSection(i,u){this.text+=i.text,this.sections.push(Bc.forText(i.scale,i.fontStack||u));const m=this.sections.length-1;for(let b=0;b<i.text.length;++b)this.sectionIndex.push(m)}addImageSection(i){const u=i.image?i.image.name:"";if(u.length===0)return void Ue("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(Bc.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Ue("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function $h(r,i,u,m,b,E,T,z,U,V,G,q,K,$,te,de){const _e=xh.fromFeature(r,b);let Oe;q===h.WritingMode.vertical&&_e.verticalizePunctuation();const{processBidirectionalText:Ye,processStyledBidirectionalText:it}=Yr;if(Ye&&_e.sections.length===1){Oe=[];const ot=Ye(_e.toString(),Ud(_e,V,E,i,m,$,te));for(const Kt of ot){const Wt=new xh;Wt.text=Kt,Wt.sections=_e.sections;for(let Lt=0;Lt<Kt.length;Lt++)Wt.sectionIndex.push(0);Oe.push(Wt)}}else if(it){Oe=[];const ot=it(_e.text,_e.sectionIndex,Ud(_e,V,E,i,m,$,te));for(const Kt of ot){const Wt=new xh;Wt.text=Kt[0],Wt.sectionIndex=Kt[1],Wt.sections=_e.sections,Oe.push(Wt)}}else Oe=function(ot,Kt){const Wt=[],Lt=ot.text;let Zt=0;for(const Nt of Kt)Wt.push(ot.substring(Zt,Nt)),Zt=Nt;return Zt<Lt.length&&Wt.push(ot.substring(Zt,Lt.length)),Wt}(_e,Ud(_e,V,E,i,m,$,te));const nt=[],vt={positionedLines:nt,text:_e.toString(),top:G[1],bottom:G[1],left:G[0],right:G[0],writingMode:q,iconsInText:!1,verticalizable:!1};return function(ot,Kt,Wt,Lt,Zt,Nt,$t,Ot,Vt,ki,Ai,on){let un=0,zn=bh,Kn=0,fr=0;const mr=Ot==="right"?1:Ot==="left"?0:.5;let or=0;for(const Mn of Zt){Mn.trim();const Dn=Mn.getMaxScale(),En=(Dn-1)*ra,qr={positionedGlyphs:[],lineOffset:0};ot.positionedLines[or]=qr;const Fr=qr.positionedGlyphs;let nr=0;if(!Mn.length()){zn+=Nt,++or;continue}for(let br=0;br<Mn.length();br++){const Ui=Mn.getSection(br),Ro=Mn.getSectionIndex(br),Wr=Mn.getCharCode(br);let mo=0,Lr=null,oa=null,qo=null,ms=ra;const Ia=!(Vt===h.WritingMode.horizontal||!Ai&&!Jr(Wr)||Ai&&(Mu[Wr]||(wr=Wr,Mi.Arabic(wr)||Mi["Arabic Supplement"](wr)||Mi["Arabic Extended-A"](wr)||Mi["Arabic Presentation Forms-A"](wr)||Mi["Arabic Presentation Forms-B"](wr))));if(Ui.imageName){const Sa=Lt[Ui.imageName];if(!Sa)continue;qo=Ui.imageName,ot.iconsInText=ot.iconsInText||!0,oa=Sa.paddedRect;const Oo=Sa.displaySize;Ui.scale=Ui.scale*ra/on,Lr={width:Oo[0],height:Oo[1],left:1,top:-3,advance:Ia?Oo[1]:Oo[0]},mo=En+(ra-Oo[1]*Ui.scale),ms=Lr.advance;const gs=Ia?Oo[0]*Ui.scale-ra*Dn:Oo[1]*Ui.scale-ra*Dn;gs>0&&gs>nr&&(nr=gs)}else{const Sa=Wt[Ui.fontStack],Oo=Sa&&Sa[Wr];if(Oo&&Oo.rect)oa=Oo.rect,Lr=Oo.metrics;else{const gs=Kt[Ui.fontStack],dc=gs&&gs[Wr];if(!dc)continue;Lr=dc.metrics}mo=(Dn-Ui.scale)*ra}Ia?(ot.verticalizable=!0,Fr.push({glyph:Wr,imageName:qo,x:un,y:zn+mo,vertical:Ia,scale:Ui.scale,fontStack:Ui.fontStack,sectionIndex:Ro,metrics:Lr,rect:oa}),un+=ms*Ui.scale+ki):(Fr.push({glyph:Wr,imageName:qo,x:un,y:zn+mo,vertical:Ia,scale:Ui.scale,fontStack:Ui.fontStack,sectionIndex:Ro,metrics:Lr,rect:oa}),un+=Lr.advance*Ui.scale+ki)}Fr.length!==0&&(Kn=Math.max(un-ki,Kn),Ig(Fr,0,Fr.length-1,mr,nr)),un=0;const jn=Nt*Dn+nr;qr.lineOffset=Math.max(nr,En),zn+=jn,fr=Math.max(jn,fr),++or}var wr;const ar=zn-bh,{horizontalAlign:Er,verticalAlign:fn}=Nd($t);(function(Mn,Dn,En,qr,Fr,nr,jn,br,Ui){const Ro=(Dn-En)*Fr;let Wr=0;Wr=nr!==jn?-br*qr-bh:(-qr*Ui+.5)*jn;for(const mo of Mn)for(const Lr of mo.positionedGlyphs)Lr.x+=Ro,Lr.y+=Wr})(ot.positionedLines,mr,Er,fn,Kn,fr,Nt,ar,Zt.length),ot.top+=-fn*ar,ot.bottom=ot.top+ar,ot.left+=-Er*Kn,ot.right=ot.left+Kn}(vt,i,u,m,Oe,T,z,U,q,V,K,de),!function(ot){for(const Kt of ot)if(Kt.positionedGlyphs.length!==0)return!1;return!0}(nt)&&vt}const Mu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Up={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Np(r,i,u,m,b,E){if(i.imageName){const T=m[i.imageName];return T?T.displaySize[0]*i.scale*ra/E+b:0}{const T=u[i.fontStack],z=T&&T[r];return z?z.metrics.advance*i.scale+b:0}}function Vp(r,i,u,m){const b=Math.pow(r-i,2);return m?r<i?b/2:2*b:b+Math.abs(u)*u}function Eg(r,i,u){let m=0;return r===10&&(m-=1e4),u&&(m+=150),r!==40&&r!==65288||(m+=50),i!==41&&i!==65289||(m+=50),m}function jp(r,i,u,m,b,E){let T=null,z=Vp(i,u,b,E);for(const U of m){const V=Vp(i-U.x,u,b,E)+U.badness;V<=z&&(T=U,z=V)}return{index:r,x:i,priorBreak:T,badness:z}}function qp(r){return r?qp(r.priorBreak).concat(r.index):[]}function Ud(r,i,u,m,b,E,T){if(E!=="point")return[];if(!r)return[];const z=[],U=function(K,$,te,de,_e,Oe){let Ye=0;for(let it=0;it<K.length();it++){const nt=K.getSection(it);Ye+=Np(K.getCharCode(it),nt,de,_e,$,Oe)}return Ye/Math.max(1,Math.ceil(Ye/te))}(r,i,u,m,b,T),V=r.text.indexOf("\u200B")>=0;let G=0;for(let K=0;K<r.length();K++){const $=r.getSection(K),te=r.getCharCode(K);if(Mu[te]||(G+=Np(te,$,m,b,i,T)),K<r.length()-1){const de=!((q=te)<11904||!(Mi["Bopomofo Extended"](q)||Mi.Bopomofo(q)||Mi["CJK Compatibility Forms"](q)||Mi["CJK Compatibility Ideographs"](q)||Mi["CJK Compatibility"](q)||Mi["CJK Radicals Supplement"](q)||Mi["CJK Strokes"](q)||Mi["CJK Symbols and Punctuation"](q)||Mi["CJK Unified Ideographs Extension A"](q)||Mi["CJK Unified Ideographs"](q)||Mi["Enclosed CJK Letters and Months"](q)||Mi["Halfwidth and Fullwidth Forms"](q)||Mi.Hiragana(q)||Mi["Ideographic Description Characters"](q)||Mi["Kangxi Radicals"](q)||Mi["Katakana Phonetic Extensions"](q)||Mi.Katakana(q)||Mi["Vertical Forms"](q)||Mi["Yi Radicals"](q)||Mi["Yi Syllables"](q)));(Up[te]||de||$.imageName)&&z.push(jp(K+1,G,U,z,Eg(te,r.getCharCode(K+1),de&&V),!1))}}var q;return qp(jp(r.length(),G,U,z,0,!0))}function Nd(r){let i=.5,u=.5;switch(r){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:i,verticalAlign:u}}function Ig(r,i,u,m,b){if(!m&&!b)return;const E=r[u],T=(r[u].x+E.metrics.advance*E.scale)*m;for(let z=i;z<=u;z++)r[z].x-=T,r[z].y+=b}function Sg(r,i,u){const{horizontalAlign:m,verticalAlign:b}=Nd(u),E=i[0]-r.displaySize[0]*m,T=i[1]-r.displaySize[1]*b;return{image:r,top:T,bottom:T+r.displaySize[1],left:E,right:E+r.displaySize[0]}}function Gp(r,i,u,m,b,E){const T=r.image;let z;if(T.content){const _e=T.content,Oe=T.pixelRatio||1;z=[_e[0]/Oe,_e[1]/Oe,T.displaySize[0]-_e[2]/Oe,T.displaySize[1]-_e[3]/Oe]}const U=i.left*E,V=i.right*E;let G,q,K,$;u==="width"||u==="both"?($=b[0]+U-m[3],q=b[0]+V+m[1]):($=b[0]+(U+V-T.displaySize[0])/2,q=$+T.displaySize[0]);const te=i.top*E,de=i.bottom*E;return u==="height"||u==="both"?(G=b[1]+te-m[0],K=b[1]+de+m[2]):(G=b[1]+(te+de-T.displaySize[1])/2,K=G+T.displaySize[1]),{image:T,top:G,right:q,bottom:K,left:$,collisionPadding:z}}const ql=128;function ed(r,i){const{expression:u}=i;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Vr(r+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:b}=u;let E=0;for(;E<m.length&&m[E]<=r;)E++;E=Math.max(0,E-1);let T=E;for(;T<m.length&&m[T]<r+1;)T++;T=Math.min(m.length-1,T);const z=m[E],U=m[T];return u.kind==="composite"?{kind:"composite",minZoom:z,maxZoom:U,interpolationType:b}:{kind:"camera",minZoom:z,maxZoom:U,minSize:u.evaluate(new Vr(z)),maxSize:u.evaluate(new Vr(U)),interpolationType:b}}}class Lu extends Et{constructor(i,u,m,b){super(i,u),this.angle=m,b!==void 0&&(this.segment=b)}clone(){return new Lu(this.x,this.y,this.angle,this.segment)}}function td(r,i,u,m,b){if(i.segment===void 0)return!0;let E=i,T=i.segment+1,z=0;for(;z>-u/2;){if(T--,T<0)return!1;z-=r[T].dist(E),E=r[T]}z+=r[T].dist(r[T+1]),T++;const U=[];let V=0;for(;z<u/2;){const G=r[T],q=r[T+1];if(!q)return!1;let K=r[T-1].angleTo(G)-G.angleTo(q);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),U.push({distance:z,angleDelta:K}),V+=K;z-U[0].distance>m;)V-=U.shift().angleDelta;if(V>b)return!1;T++,z+=G.dist(q)}return!0}function id(r){let i=0;for(let u=0;u<r.length-1;u++)i+=r[u].dist(r[u+1]);return i}function nd(r,i,u){return r?.6*i*u:0}function Fc(r,i){return Math.max(r?r.right-r.left:0,i?i.right-i.left:0)}function Tg(r,i,u,m,b,E){const T=nd(u,b,E),z=Fc(u,m)*E;let U=0;const V=id(r)/2;for(let G=0;G<r.length-1;G++){const q=r[G],K=r[G+1],$=q.dist(K);if(U+$>V){const te=(V-U)/$,de=So(q.x,K.x,te),_e=So(q.y,K.y,te),Oe=new Lu(de,_e,K.angleTo(q),G);return Oe._round(),!T||td(r,Oe,z,T,i)?Oe:void 0}U+=$}}function Ag(r,i,u,m,b,E,T,z,U){const V=nd(m,E,T),G=Fc(m,b),q=G*T,K=r[0].x===0||r[0].x===U||r[0].y===0||r[0].y===U;return i-q<i/4&&(i=q+i/4),Gf(r,K?i/2*z%i:(G/2+2*E)*T*z%i,i,V,u,q,K,!1,U)}function Gf(r,i,u,m,b,E,T,z,U){const V=E/2,G=id(r);let q=0,K=i-u,$=[];for(let te=0;te<r.length-1;te++){const de=r[te],_e=r[te+1],Oe=de.dist(_e),Ye=_e.angleTo(de);for(;K+u<q+Oe;){K+=u;const it=(K-q)/Oe,nt=So(de.x,_e.x,it),vt=So(de.y,_e.y,it);if(nt>=0&&nt<U&&vt>=0&&vt<U&&K-V>=0&&K+V<=G){const ot=new Lu(nt,vt,Ye,te);ot._round(),m&&!td(r,ot,E,m,b)||$.push(ot)}}q+=Oe}return z||$.length||T||($=Gf(r,q/2,u,m,b,E,T,!0,U)),$}function Uc(r,i,u,m,b){const E=[];for(let T=0;T<r.length;T++){const z=r[T];let U;for(let V=0;V<z.length-1;V++){let G=z[V],q=z[V+1];G.x<i&&q.x<i||(G.x<i?G=new Et(i,G.y+(i-G.x)/(q.x-G.x)*(q.y-G.y))._round():q.x<i&&(q=new Et(i,G.y+(i-G.x)/(q.x-G.x)*(q.y-G.y))._round()),G.y<u&&q.y<u||(G.y<u?G=new Et(G.x+(u-G.y)/(q.y-G.y)*(q.x-G.x),u)._round():q.y<u&&(q=new Et(G.x+(u-G.y)/(q.y-G.y)*(q.x-G.x),u)._round()),G.x>=m&&q.x>=m||(G.x>=m?G=new Et(m,G.y+(m-G.x)/(q.x-G.x)*(q.y-G.y))._round():q.x>=m&&(q=new Et(m,G.y+(m-G.x)/(q.x-G.x)*(q.y-G.y))._round()),G.y>=b&&q.y>=b||(G.y>=b?G=new Et(G.x+(b-G.y)/(q.y-G.y)*(q.x-G.x),b)._round():q.y>=b&&(q=new Et(G.x+(b-G.y)/(q.y-G.y)*(q.x-G.x),b)._round()),U&&G.equals(U[U.length-1])||(U=[G],E.push(U)),U.push(q)))))}}return E}function Vd(r,i,u,m){const b=[],E=r.image,T=E.pixelRatio,z=E.paddedRect.w-2,U=E.paddedRect.h-2,V=r.right-r.left,G=r.bottom-r.top,q=E.stretchX||[[0,z]],K=E.stretchY||[[0,U]],$=(Nt,$t)=>Nt+$t[1]-$t[0],te=q.reduce($,0),de=K.reduce($,0),_e=z-te,Oe=U-de;let Ye=0,it=te,nt=0,vt=de,ot=0,Kt=_e,Wt=0,Lt=Oe;if(E.content&&m){const Nt=E.content;Ye=rd(q,0,Nt[0]),nt=rd(K,0,Nt[1]),it=rd(q,Nt[0],Nt[2]),vt=rd(K,Nt[1],Nt[3]),ot=Nt[0]-Ye,Wt=Nt[1]-nt,Kt=Nt[2]-Nt[0]-it,Lt=Nt[3]-Nt[1]-vt}const Zt=(Nt,$t,Ot,Vt)=>{const ki=od(Nt.stretch-Ye,it,V,r.left),Ai=ad(Nt.fixed-ot,Kt,Nt.stretch,te),on=od($t.stretch-nt,vt,G,r.top),un=ad($t.fixed-Wt,Lt,$t.stretch,de),zn=od(Ot.stretch-Ye,it,V,r.left),Kn=ad(Ot.fixed-ot,Kt,Ot.stretch,te),fr=od(Vt.stretch-nt,vt,G,r.top),mr=ad(Vt.fixed-Wt,Lt,Vt.stretch,de),or=new Et(ki,on),wr=new Et(zn,on),ar=new Et(zn,fr),Er=new Et(ki,fr),fn=new Et(Ai/T,un/T),Mn=new Et(Kn/T,mr/T),Dn=i*Math.PI/180;if(Dn){const Fr=Math.sin(Dn),nr=Math.cos(Dn),jn=[nr,-Fr,Fr,nr];or._matMult(jn),wr._matMult(jn),Er._matMult(jn),ar._matMult(jn)}const En=Nt.stretch+Nt.fixed,qr=$t.stretch+$t.fixed;return{tl:or,tr:wr,bl:Er,br:ar,tex:{x:E.paddedRect.x+1+En,y:E.paddedRect.y+1+qr,w:Ot.stretch+Ot.fixed-En,h:Vt.stretch+Vt.fixed-qr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:fn,pixelOffsetBR:Mn,minFontScaleX:Kt/T/V,minFontScaleY:Lt/T/G,isSDF:u}};if(m&&(E.stretchX||E.stretchY)){const Nt=jd(q,_e,te),$t=jd(K,Oe,de);for(let Ot=0;Ot<Nt.length-1;Ot++){const Vt=Nt[Ot],ki=Nt[Ot+1];for(let Ai=0;Ai<$t.length-1;Ai++)b.push(Zt(Vt,$t[Ai],ki,$t[Ai+1]))}}else b.push(Zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:z+1},{fixed:0,stretch:U+1}));return b}function rd(r,i,u){let m=0;for(const b of r)m+=Math.max(i,Math.min(u,b[1]))-Math.max(i,Math.min(u,b[0]));return m}function jd(r,i,u){const m=[{fixed:-1,stretch:0}];for(const[b,E]of r){const T=m[m.length-1];m.push({fixed:b-T.stretch,stretch:T.stretch}),m.push({fixed:b-T.stretch,stretch:T.stretch+(E-b)})}return m.push({fixed:i+1,stretch:u}),m}function od(r,i,u,m){return r/i*u+m}function ad(r,i,u,m){return r-i*u/m}Si("Anchor",Lu);class qd{constructor(i,u,m,b,E,T,z,U,V,G){if(this.boxStartIndex=i.length,V){let q=T.top,K=T.bottom;const $=T.collisionPadding;$&&(q-=$[1],K+=$[3]);let te=K-q;te>0&&(te=Math.max(10,te),this.circleDiameter=te)}else{let q=T.top*z-U,K=T.bottom*z+U,$=T.left*z-U,te=T.right*z+U;const de=T.collisionPadding;if(de&&($-=de[0]*z,q-=de[1]*z,te+=de[2]*z,K+=de[3]*z),G){const _e=new Et($,q),Oe=new Et(te,q),Ye=new Et($,K),it=new Et(te,K),nt=G*Math.PI/180;_e._rotate(nt),Oe._rotate(nt),Ye._rotate(nt),it._rotate(nt),$=Math.min(_e.x,Oe.x,Ye.x,it.x),te=Math.max(_e.x,Oe.x,Ye.x,it.x),q=Math.min(_e.y,Oe.y,Ye.y,it.y),K=Math.max(_e.y,Oe.y,Ye.y,it.y)}i.emplaceBack(u.x,u.y,$,q,te,K,m,b,E)}this.boxEndIndex=i.length}}class Cg{constructor(i=[],u=kg){if(this.data=i,this.length=this.data.length,this.compare=u,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:u,compare:m}=this,b=u[i];for(;i>0;){const E=i-1>>1,T=u[E];if(m(b,T)>=0)break;u[i]=T,i=E}u[i]=b}_down(i){const{data:u,compare:m}=this,b=this.length>>1,E=u[i];for(;i<b;){let T=1+(i<<1),z=u[T];const U=T+1;if(U<this.length&&m(u[U],z)<0&&(T=U,z=u[U]),m(z,E)>=0)break;u[i]=z,i=T}u[i]=E}}function kg(r,i){return r<i?-1:r>i?1:0}function Gd(r,i=1,u=!1){let m=1/0,b=1/0,E=-1/0,T=-1/0;const z=r[0];for(let $=0;$<z.length;$++){const te=z[$];(!$||te.x<m)&&(m=te.x),(!$||te.y<b)&&(b=te.y),(!$||te.x>E)&&(E=te.x),(!$||te.y>T)&&(T=te.y)}const U=Math.min(E-m,T-b);let V=U/2;const G=new Cg([],Hp);if(U===0)return new Et(m,b);for(let $=m;$<E;$+=U)for(let te=b;te<T;te+=U)G.push(new wh($+V,te+V,V,r));let q=function($){let te=0,de=0,_e=0;const Oe=$[0];for(let Ye=0,it=Oe.length,nt=it-1;Ye<it;nt=Ye++){const vt=Oe[Ye],ot=Oe[nt],Kt=vt.x*ot.y-ot.x*vt.y;de+=(vt.x+ot.x)*Kt,_e+=(vt.y+ot.y)*Kt,te+=3*Kt}return new wh(de/te,_e/te,0,$)}(r),K=G.length;for(;G.length;){const $=G.pop();($.d>q.d||!q.d)&&(q=$,u&&console.log("found best %d after %d probes",Math.round(1e4*$.d)/1e4,K)),$.max-q.d<=i||(V=$.h/2,G.push(new wh($.p.x-V,$.p.y-V,V,r)),G.push(new wh($.p.x+V,$.p.y-V,V,r)),G.push(new wh($.p.x-V,$.p.y+V,V,r)),G.push(new wh($.p.x+V,$.p.y+V,V,r)),K+=4)}return u&&(console.log(`num probes: ${K}`),console.log(`best distance: ${q.d}`)),q.p}function Hp(r,i){return i.max-r.max}function wh(r,i,u,m){this.p=new Et(r,i),this.h=u,this.d=function(b,E){let T=!1,z=1/0;for(let U=0;U<E.length;U++){const V=E[U];for(let G=0,q=V.length,K=q-1;G<q;K=G++){const $=V[G],te=V[K];$.y>b.y!=te.y>b.y&&b.x<(te.x-$.x)*(b.y-$.y)/(te.y-$.y)+$.x&&(T=!T),z=Math.min(z,Ds(b,$,te))}}return(T?1:-1)*Math.sqrt(z)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}const ac=Number.POSITIVE_INFINITY;function Eh(r,i){return i[1]!==ac?function(u,m,b){let E=0,T=0;switch(m=Math.abs(m),b=Math.abs(b),u){case"top-right":case"top-left":case"top":T=b-7;break;case"bottom-right":case"bottom-left":case"bottom":T=7-b}switch(u){case"top-right":case"bottom-right":case"right":E=-m;break;case"top-left":case"bottom-left":case"left":E=m}return[E,T]}(r,i[0],i[1]):function(u,m){let b=0,E=0;m<0&&(m=0);const T=m/Math.sqrt(2);switch(u){case"top-right":case"top-left":E=T-7;break;case"bottom-right":case"bottom-left":E=7-T;break;case"bottom":E=7-m;break;case"top":E=m-7}switch(u){case"top-right":case"bottom-right":b=-T;break;case"top-left":case"bottom-left":b=T;break;case"left":b=m;break;case"right":b=-m}return[b,E]}(r,i[0])}function Mr(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Mg(r,i,u,m,b,E,T,z,U,V,G){let q=E.textMaxSize.evaluate(i,{});q===void 0&&(q=T);const K=r.layers[0].layout,$=K.get("icon-offset").evaluate(i,{},G),te=Hf(u.horizontal),de=T/24,_e=r.tilePixelRatio*de,Oe=r.tilePixelRatio*q/24,Ye=r.tilePixelRatio*z,it=r.tilePixelRatio*K.get("symbol-spacing"),nt=K.get("text-padding")*r.tilePixelRatio,vt=K.get("icon-padding")*r.tilePixelRatio,ot=K.get("text-max-angle")/180*Math.PI,Kt=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",Wt=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",Lt=K.get("symbol-placement"),Zt=it/2,Nt=K.get("icon-text-fit");let $t;m&&Nt!=="none"&&(r.allowVerticalPlacement&&u.vertical&&($t=Gp(m,u.vertical,Nt,K.get("icon-text-fit-padding"),$,de)),te&&(m=Gp(m,te,Nt,K.get("icon-text-fit-padding"),$,de)));const Ot=(Vt,ki)=>{ki.x<0||ki.x>=er||ki.y<0||ki.y>=er||function(Ai,on,un,zn,Kn,fr,mr,or,wr,ar,Er,fn,Mn,Dn,En,qr,Fr,nr,jn,br,Ui,Ro,Wr,mo,Lr){const oa=Ai.addToLineVertexArray(on,un);let qo,ms,Ia,Sa,Oo=0,gs=0,dc=0,qc=0,Gc=-1,Ah=-1;const el={};let Hl=oi(""),Hc=0,pc=0;if(or._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Hc,pc]=or.layout.get("text-offset").evaluate(Ui,{},mo).map(Ta=>Ta*ra):(Hc=or.layout.get("text-radial-offset").evaluate(Ui,{},mo)*ra,pc=ac),Ai.allowVerticalPlacement&&zn.vertical){const Ta=or.layout.get("text-rotate").evaluate(Ui,{},mo)+90;Ia=new qd(wr,on,ar,Er,fn,zn.vertical,Mn,Dn,En,Ta),mr&&(Sa=new qd(wr,on,ar,Er,fn,mr,Fr,nr,En,Ta))}if(Kn){const Ta=or.layout.get("icon-rotate").evaluate(Ui,{}),es=or.layout.get("icon-text-fit")!=="none",Du=Vd(Kn,Ta,Wr,es),Il=mr?Vd(mr,Ta,Wr,es):void 0;ms=new qd(wr,on,ar,Er,fn,Kn,Fr,nr,!1,Ta),Oo=4*Du.length;const kh=Ai.iconSizeData;let tl=null;kh.kind==="source"?(tl=[ql*or.layout.get("icon-size").evaluate(Ui,{})],tl[0]>Gl&&Ue(`${Ai.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):kh.kind==="composite"&&(tl=[ql*Ro.compositeIconSizes[0].evaluate(Ui,{},mo),ql*Ro.compositeIconSizes[1].evaluate(Ui,{},mo)],(tl[0]>Gl||tl[1]>Gl)&&Ue(`${Ai.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ai.addSymbols(Ai.icon,Du,tl,br,jn,Ui,h.WritingMode.none,on,oa.lineStartIndex,oa.lineLength,-1,mo),Gc=Ai.icon.placedSymbolArray.length-1,Il&&(gs=4*Il.length,Ai.addSymbols(Ai.icon,Il,tl,br,jn,Ui,h.WritingMode.vertical,on,oa.lineStartIndex,oa.lineLength,-1,mo),Ah=Ai.icon.placedSymbolArray.length-1)}const zu=Object.keys(zn.horizontal);for(const Ta of zu){const es=zn.horizontal[Ta];if(!qo){Hl=oi(es.text);const Il=or.layout.get("text-rotate").evaluate(Ui,{},mo);qo=new qd(wr,on,ar,Er,fn,es,Mn,Dn,En,Il)}const Du=es.positionedLines.length===1;if(dc+=Nc(Ai,on,es,fr,or,En,Ui,qr,oa,zn.vertical?h.WritingMode.horizontal:h.WritingMode.horizontalOnly,Du?zu:[Ta],el,Gc,Ro,mo),Du)break}zn.vertical&&(qc+=Nc(Ai,on,zn.vertical,fr,or,En,Ui,qr,oa,h.WritingMode.vertical,["vertical"],el,Ah,Ro,mo));const Ch=qo?qo.boxStartIndex:Ai.collisionBoxArray.length,Jd=qo?qo.boxEndIndex:Ai.collisionBoxArray.length,Yd=Ia?Ia.boxStartIndex:Ai.collisionBoxArray.length,ld=Ia?Ia.boxEndIndex:Ai.collisionBoxArray.length,ud=ms?ms.boxStartIndex:Ai.collisionBoxArray.length,Qd=ms?ms.boxEndIndex:Ai.collisionBoxArray.length,cd=Sa?Sa.boxStartIndex:Ai.collisionBoxArray.length,hd=Sa?Sa.boxEndIndex:Ai.collisionBoxArray.length;let $a=-1;const Zc=(Ta,es)=>Ta&&Ta.circleDiameter?Math.max(Ta.circleDiameter,es):es;$a=Zc(qo,$a),$a=Zc(Ia,$a),$a=Zc(ms,$a),$a=Zc(Sa,$a);const Wc=$a>-1?1:0;Wc&&($a*=Lr/ra),Ai.glyphOffsetArray.length>=Vc.MAX_GLYPHS&&Ue("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ui.sortKey!==void 0&&Ai.addToSortKeyRanges(Ai.symbolInstances.length,Ui.sortKey),Ai.symbolInstances.emplaceBack(on.x,on.y,el.right>=0?el.right:-1,el.center>=0?el.center:-1,el.left>=0?el.left:-1,el.vertical||-1,Gc,Ah,Hl,Ch,Jd,Yd,ld,ud,Qd,cd,hd,ar,dc,qc,Oo,gs,Wc,0,Mn,Hc,pc,$a)}(r,ki,Vt,u,m,b,$t,r.layers[0],r.collisionBoxArray,i.index,i.sourceLayerIndex,r.index,_e,nt,Kt,U,Ye,vt,Wt,$,i,E,V,G,T)};if(Lt==="line")for(const Vt of Uc(i.geometry,0,0,er,er)){const ki=Ag(Vt,it,ot,u.vertical||te,m,24,Oe,r.overscaling,er);for(const Ai of ki){const on=te;on&&Lg(r,on.text,Zt,Ai)||Ot(Vt,Ai)}}else if(Lt==="line-center"){for(const Vt of i.geometry)if(Vt.length>1){const ki=Tg(Vt,ot,u.vertical||te,m,24,Oe);ki&&Ot(Vt,ki)}}else if(i.type==="Polygon")for(const Vt of Kh(i.geometry,0)){const ki=Gd(Vt,16);Ot(Vt[0],new Lu(ki.x,ki.y,0))}else if(i.type==="LineString")for(const Vt of i.geometry)Ot(Vt,new Lu(Vt[0].x,Vt[0].y,0));else if(i.type==="Point")for(const Vt of i.geometry)for(const ki of Vt)Ot([ki],new Lu(ki.x,ki.y,0))}const Gl=32640;function Nc(r,i,u,m,b,E,T,z,U,V,G,q,K,$,te){const de=function(Ye,it,nt,vt,ot,Kt,Wt,Lt){const Zt=vt.layout.get("text-rotate").evaluate(Kt,{})*Math.PI/180,Nt=[];for(const $t of it.positionedLines)for(const Ot of $t.positionedGlyphs){if(!Ot.rect)continue;const Vt=Ot.rect||{};let ki=4,Ai=!0,on=1,un=0;const zn=(ot||Lt)&&Ot.vertical,Kn=Ot.metrics.advance*Ot.scale/2;if(Lt&&it.verticalizable){const jn=(Ot.scale-1)*ra,br=(ra-Ot.metrics.width*Ot.scale)/2;un=$t.lineOffset/2-(Ot.imageName?-br:jn)}if(Ot.imageName){const jn=Wt[Ot.imageName];Ai=jn.sdf,on=jn.pixelRatio,ki=1/on}const fr=ot?[Ot.x+Kn,Ot.y]:[0,0];let mr=ot?[0,0]:[Ot.x+Kn+nt[0],Ot.y+nt[1]-un],or=[0,0];zn&&(or=mr,mr=[0,0]);const wr=(Ot.metrics.left-ki)*Ot.scale-Kn+mr[0],ar=(-Ot.metrics.top-ki)*Ot.scale+mr[1],Er=wr+Vt.w*Ot.scale/on,fn=ar+Vt.h*Ot.scale/on,Mn=new Et(wr,ar),Dn=new Et(Er,ar),En=new Et(wr,fn),qr=new Et(Er,fn);if(zn){const jn=new Et(-Kn,Kn-bh),br=-Math.PI/2,Ui=12-Kn,Ro=new Et(22-Ui,-(Ot.imageName?Ui:0)),Wr=new Et(...or);Mn._rotateAround(br,jn)._add(Ro)._add(Wr),Dn._rotateAround(br,jn)._add(Ro)._add(Wr),En._rotateAround(br,jn)._add(Ro)._add(Wr),qr._rotateAround(br,jn)._add(Ro)._add(Wr)}if(Zt){const jn=Math.sin(Zt),br=Math.cos(Zt),Ui=[br,-jn,jn,br];Mn._matMult(Ui),Dn._matMult(Ui),En._matMult(Ui),qr._matMult(Ui)}const Fr=new Et(0,0),nr=new Et(0,0);Nt.push({tl:Mn,tr:Dn,bl:En,br:qr,tex:Vt,writingMode:it.writingMode,glyphOffset:fr,sectionIndex:Ot.sectionIndex,isSDF:Ai,pixelOffsetTL:Fr,pixelOffsetBR:nr,minFontScaleX:0,minFontScaleY:0})}return Nt}(0,u,z,b,E,T,m,r.allowVerticalPlacement),_e=r.textSizeData;let Oe=null;_e.kind==="source"?(Oe=[ql*b.layout.get("text-size").evaluate(T,{})],Oe[0]>Gl&&Ue(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):_e.kind==="composite"&&(Oe=[ql*$.compositeTextSizes[0].evaluate(T,{},te),ql*$.compositeTextSizes[1].evaluate(T,{},te)],(Oe[0]>Gl||Oe[1]>Gl)&&Ue(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,de,Oe,z,E,T,V,i,U.lineStartIndex,U.lineLength,K,te);for(const Ye of G)q[Ye]=r.text.placedSymbolArray.length-1;return 4*de.length}function Hf(r){for(const i in r)return r[i];return null}function Lg(r,i,u,m){const b=r.compareText;if(i in b){const E=b[i];for(let T=E.length-1;T>=0;T--)if(m.dist(E[T])<u)return!0}else b[i]=[];return b[i].push(m),!1}const Pg=rc.VectorTileFeature.types,zg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Hd(r,i,u,m,b,E,T,z,U,V,G,q,K){const $=z?Math.min(Gl,Math.round(z[0])):0,te=z?Math.min(Gl,Math.round(z[1])):0;r.emplaceBack(i,u,Math.round(32*m),Math.round(32*b),E,T,($<<1)+(U?1:0),te,16*V,16*G,256*q,256*K)}function Zp(r,i,u){r.emplaceBack(i.x,i.y,u),r.emplaceBack(i.x,i.y,u),r.emplaceBack(i.x,i.y,u),r.emplaceBack(i.x,i.y,u)}function Dg(r){for(const i of r.sections)if(Pi(i.text))return!0;return!1}class Zd{constructor(i){this.layoutVertexArray=new H,this.indexArray=new Ee,this.programConfigurations=i,this.segments=new Ce,this.dynamicLayoutVertexArray=new Q,this.opacityVertexArray=new oe,this.placedSymbolArray=new ti}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,u,m,b){this.isEmpty()||(m&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Df.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Rf.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,zg,!0),this.opacityVertexBuffer.itemSize=1),(m||b)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Si("SymbolBuffers",Zd);class Wd{constructor(i,u,m){this.layoutVertexArray=new i,this.layoutAttributes=u,this.indexArray=new m,this.segments=new Ce,this.collisionVertexArray=new be}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,Od.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Si("CollisionBuffers",Wd);class Vc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(T=>T.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ic([]),this.placementViewportMatrix=ic([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ed(this.zoom,u["text-size"]),this.iconSizeData=ed(this.zoom,u["icon-size"]);const m=this.layers[0].layout,b=m.get("symbol-sort-key"),E=m.get("symbol-z-order");this.canOverlap=lc(m,"text-overlap","text-allow-overlap")!=="never"||lc(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=E!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(E==="viewport-y"||E==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(T=>h.WritingMode[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=i.sourceID}createArrays(){this.text=new Zd(new wo(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new Zd(new wo(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new qi,this.lineVertexArray=new Ci,this.symbolInstances=new qt}calculateGlyphDependencies(i,u,m,b,E){for(let T=0;T<i.length;T++)if(u[i.charCodeAt(T)]=!0,(m||b)&&E){const z=jl[i.charAt(T)];z&&(u[z.charCodeAt(0)]=!0)}}populate(i,u,m){const b=this.layers[0],E=b.layout,T=E.get("text-font"),z=E.get("text-field"),U=E.get("icon-image"),V=(z.value.kind!=="constant"||z.value.value instanceof Te&&!z.value.value.isEmpty()||z.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),G=U.value.kind!=="constant"||!!U.value.value||Object.keys(U.parameters).length>0,q=E.get("symbol-sort-key");if(this.features=[],!V&&!G)return;const K=u.iconDependencies,$=u.glyphDependencies,te=u.availableImages,de=new Vr(this.zoom);for(const{feature:_e,id:Oe,index:Ye,sourceLayerIndex:it}of i){const nt=b._featureFilter.needGeometry,vt=Mo(_e,nt);if(!b._featureFilter.filter(de,vt,m))continue;let ot,Kt;if(nt||(vt.geometry=Ga(_e)),V){const Lt=b.getValueAndResolveTokens("text-field",vt,m,te),Zt=Te.factory(Lt);Dg(Zt)&&(this.hasRTLText=!0),(!this.hasRTLText||bu()==="unavailable"||this.hasRTLText&&Yr.isParsed())&&(ot=Tu(Zt,b,vt))}if(G){const Lt=b.getValueAndResolveTokens("icon-image",vt,m,te);Kt=Lt instanceof xe?Lt:xe.fromString(Lt)}if(!ot&&!Kt)continue;const Wt=this.sortFeaturesByKey?q.evaluate(vt,{},m):void 0;if(this.features.push({id:Oe,text:ot,icon:Kt,index:Ye,sourceLayerIndex:it,geometry:vt.geometry,properties:_e.properties,type:Pg[_e.type],sortKey:Wt}),Kt&&(K[Kt.name]=!0),ot){const Lt=T.evaluate(vt,{},m).join(","),Zt=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.WritingMode.vertical)>=0;for(const Nt of ot.sections)if(Nt.image)K[Nt.image.name]=!0;else{const $t=yl(ot.toString()),Ot=Nt.fontStack||Lt,Vt=$[Ot]=$[Ot]||{};this.calculateGlyphDependencies(Nt.text,Vt,Zt,this.allowVerticalPlacement,$t)}}}E.get("symbol-placement")==="line"&&(this.features=function(_e){const Oe={},Ye={},it=[];let nt=0;function vt(Lt){it.push(_e[Lt]),nt++}function ot(Lt,Zt,Nt){const $t=Ye[Lt];return delete Ye[Lt],Ye[Zt]=$t,it[$t].geometry[0].pop(),it[$t].geometry[0]=it[$t].geometry[0].concat(Nt[0]),$t}function Kt(Lt,Zt,Nt){const $t=Oe[Zt];return delete Oe[Zt],Oe[Lt]=$t,it[$t].geometry[0].shift(),it[$t].geometry[0]=Nt[0].concat(it[$t].geometry[0]),$t}function Wt(Lt,Zt,Nt){const $t=Nt?Zt[0][Zt[0].length-1]:Zt[0][0];return`${Lt}:${$t.x}:${$t.y}`}for(let Lt=0;Lt<_e.length;Lt++){const Zt=_e[Lt],Nt=Zt.geometry,$t=Zt.text?Zt.text.toString():null;if(!$t){vt(Lt);continue}const Ot=Wt($t,Nt),Vt=Wt($t,Nt,!0);if(Ot in Ye&&Vt in Oe&&Ye[Ot]!==Oe[Vt]){const ki=Kt(Ot,Vt,Nt),Ai=ot(Ot,Vt,it[ki].geometry);delete Oe[Ot],delete Ye[Vt],Ye[Wt($t,it[Ai].geometry,!0)]=Ai,it[ki].geometry=null}else Ot in Ye?ot(Ot,Vt,Nt):Vt in Oe?Kt(Ot,Vt,Nt):(vt(Lt),Oe[Ot]=nt-1,Ye[Vt]=nt-1)}return it.filter(Lt=>Lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((_e,Oe)=>_e.sortKey-Oe.sortKey)}update(i,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,u,this.layers,m),this.icon.programConfigurations.updatePaintArrays(i,u,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,u){const m=this.lineVertexArray.length;if(i.segment!==void 0){let b=i.dist(u[i.segment+1]),E=i.dist(u[i.segment]);const T={};for(let z=i.segment+1;z<u.length;z++)T[z]={x:u[z].x,y:u[z].y,tileUnitDistanceFromAnchor:b},z<u.length-1&&(b+=u[z+1].dist(u[z]));for(let z=i.segment||0;z>=0;z--)T[z]={x:u[z].x,y:u[z].y,tileUnitDistanceFromAnchor:E},z>0&&(E+=u[z-1].dist(u[z]));for(let z=0;z<u.length;z++){const U=T[z];this.lineVertexArray.emplaceBack(U.x,U.y,U.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(i,u,m,b,E,T,z,U,V,G,q,K){const $=i.indexArray,te=i.layoutVertexArray,de=i.segments.prepareSegment(4*u.length,te,$,this.canOverlap?T.sortKey:void 0),_e=this.glyphOffsetArray.length,Oe=de.vertexLength,Ye=this.allowVerticalPlacement&&z===h.WritingMode.vertical?Math.PI/2:0,it=T.text&&T.text.sections;for(let nt=0;nt<u.length;nt++){const{tl:vt,tr:ot,bl:Kt,br:Wt,tex:Lt,pixelOffsetTL:Zt,pixelOffsetBR:Nt,minFontScaleX:$t,minFontScaleY:Ot,glyphOffset:Vt,isSDF:ki,sectionIndex:Ai}=u[nt],on=de.vertexLength,un=Vt[1];Hd(te,U.x,U.y,vt.x,un+vt.y,Lt.x,Lt.y,m,ki,Zt.x,Zt.y,$t,Ot),Hd(te,U.x,U.y,ot.x,un+ot.y,Lt.x+Lt.w,Lt.y,m,ki,Nt.x,Zt.y,$t,Ot),Hd(te,U.x,U.y,Kt.x,un+Kt.y,Lt.x,Lt.y+Lt.h,m,ki,Zt.x,Nt.y,$t,Ot),Hd(te,U.x,U.y,Wt.x,un+Wt.y,Lt.x+Lt.w,Lt.y+Lt.h,m,ki,Nt.x,Nt.y,$t,Ot),Zp(i.dynamicLayoutVertexArray,U,Ye),$.emplaceBack(on,on+1,on+2),$.emplaceBack(on+1,on+2,on+3),de.vertexLength+=4,de.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vt[0]),nt!==u.length-1&&Ai===u[nt+1].sectionIndex||i.programConfigurations.populatePaintArrays(te.length,T,T.index,{},K,it&&it[Ai])}i.placedSymbolArray.emplaceBack(U.x,U.y,_e,this.glyphOffsetArray.length-_e,Oe,V,G,U.segment,m?m[0]:0,m?m[1]:0,b[0],b[1],z,0,!1,0,q)}_addCollisionDebugVertex(i,u,m,b,E,T){return u.emplaceBack(0,0),i.emplaceBack(m.x,m.y,b,E,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(i,u,m,b,E,T,z){const U=E.segments.prepareSegment(4,E.layoutVertexArray,E.indexArray),V=U.vertexLength,G=E.layoutVertexArray,q=E.collisionVertexArray,K=z.anchorX,$=z.anchorY;this._addCollisionDebugVertex(G,q,T,K,$,new Et(i,u)),this._addCollisionDebugVertex(G,q,T,K,$,new Et(m,u)),this._addCollisionDebugVertex(G,q,T,K,$,new Et(m,b)),this._addCollisionDebugVertex(G,q,T,K,$,new Et(i,b)),U.vertexLength+=4;const te=E.indexArray;te.emplaceBack(V,V+1),te.emplaceBack(V+1,V+2),te.emplaceBack(V+2,V+3),te.emplaceBack(V+3,V),U.primitiveLength+=4}addDebugCollisionBoxes(i,u,m,b){for(let E=i;E<u;E++){const T=this.collisionBoxArray.get(E);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,b?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wd(ye,jr.members,Be),this.iconCollisionBox=new Wd(ye,jr.members,Be);for(let i=0;i<this.symbolInstances.length;i++){const u=this.symbolInstances.get(i);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(i,u,m,b,E,T,z,U,V){const G={};for(let q=u;q<m;q++){const K=i.get(q);G.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.textFeatureIndex=K.featureIndex;break}for(let q=b;q<E;q++){const K=i.get(q);G.verticalTextBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.verticalTextFeatureIndex=K.featureIndex;break}for(let q=T;q<z;q++){const K=i.get(q);G.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.iconFeatureIndex=K.featureIndex;break}for(let q=U;q<V;q++){const K=i.get(q);G.verticalIconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},G.verticalIconFeatureIndex=K.featureIndex;break}return G}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const m=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,u){const m=i.placedSymbolArray.get(u),b=m.vertexStartIndex+4*m.numGlyphs;for(let E=m.vertexStartIndex;E<b;E+=4)i.indexArray.emplaceBack(E,E+1,E+2),i.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(i),m=Math.cos(i),b=[],E=[],T=[];for(let z=0;z<this.symbolInstances.length;++z){T.push(z);const U=this.symbolInstances.get(z);b.push(0|Math.round(u*U.anchorX+m*U.anchorY)),E.push(U.featureIndex)}return T.sort((z,U)=>b[z]-b[U]||E[U]-E[z]),T}addToSortKeyRanges(i,u){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===u?m.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const m=this.symbolInstances.get(u);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((b,E,T)=>{b>=0&&T.indexOf(b)===E&&this.addIndicesForPlacedSymbol(this.text,b)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Si("SymbolBucket",Vc,{omit:["layers","collisionBoxArray","features","compareText"]}),Vc.MAX_GLYPHS=65535,Vc.addDynamicAttributes=Zp;const Zf=new Qr({"symbol-placement":new Di(Ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Di(Ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Di(Ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ci(Ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Di(Ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Di(Ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Di(Ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Di(Ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Di(Ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Di(Ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new ci(Ze.layout_symbol["icon-size"]),"icon-text-fit":new Di(Ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Di(Ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new ci(Ze.layout_symbol["icon-image"]),"icon-rotate":new ci(Ze.layout_symbol["icon-rotate"]),"icon-padding":new Di(Ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Di(Ze.layout_symbol["icon-keep-upright"]),"icon-offset":new ci(Ze.layout_symbol["icon-offset"]),"icon-anchor":new ci(Ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Di(Ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Di(Ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Di(Ze.layout_symbol["text-rotation-alignment"]),"text-field":new ci(Ze.layout_symbol["text-field"]),"text-font":new ci(Ze.layout_symbol["text-font"]),"text-size":new ci(Ze.layout_symbol["text-size"]),"text-max-width":new ci(Ze.layout_symbol["text-max-width"]),"text-line-height":new Di(Ze.layout_symbol["text-line-height"]),"text-letter-spacing":new ci(Ze.layout_symbol["text-letter-spacing"]),"text-justify":new ci(Ze.layout_symbol["text-justify"]),"text-radial-offset":new ci(Ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Di(Ze.layout_symbol["text-variable-anchor"]),"text-anchor":new ci(Ze.layout_symbol["text-anchor"]),"text-max-angle":new Di(Ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Di(Ze.layout_symbol["text-writing-mode"]),"text-rotate":new ci(Ze.layout_symbol["text-rotate"]),"text-padding":new Di(Ze.layout_symbol["text-padding"]),"text-keep-upright":new Di(Ze.layout_symbol["text-keep-upright"]),"text-transform":new ci(Ze.layout_symbol["text-transform"]),"text-offset":new ci(Ze.layout_symbol["text-offset"]),"text-allow-overlap":new Di(Ze.layout_symbol["text-allow-overlap"]),"text-overlap":new Di(Ze.layout_symbol["text-overlap"]),"text-ignore-placement":new Di(Ze.layout_symbol["text-ignore-placement"]),"text-optional":new Di(Ze.layout_symbol["text-optional"])});var Ih={paint:new Qr({"icon-opacity":new ci(Ze.paint_symbol["icon-opacity"]),"icon-color":new ci(Ze.paint_symbol["icon-color"]),"icon-halo-color":new ci(Ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new ci(Ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ci(Ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Di(Ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Di(Ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new ci(Ze.paint_symbol["text-opacity"]),"text-color":new ci(Ze.paint_symbol["text-color"],{runtimeType:ro,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new ci(Ze.paint_symbol["text-halo-color"]),"text-halo-width":new ci(Ze.paint_symbol["text-halo-width"]),"text-halo-blur":new ci(Ze.paint_symbol["text-halo-blur"]),"text-translate":new Di(Ze.paint_symbol["text-translate"]),"text-translate-anchor":new Di(Ze.paint_symbol["text-translate-anchor"])}),layout:Zf};class sc{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:Ar,this.defaultValue=i}evaluate(i){if(i.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(i.formattedSection))return u.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Si("FormatSectionOverride",sc,{omit:["defaultValue"]});class Sh extends to{constructor(i){super(i,Ih)}recalculate(i,u){if(super.recalculate(i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const b=[];for(const E of m)b.indexOf(E)<0&&b.push(E);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,u,m,b){const E=this.layout.get(i).evaluate(u,{},m,b),T=this._unevaluatedLayout._values[i];return T.isDataDriven()||us(T.value)||!E?E:function(z,U){return U.replace(/{([^{}]+)}/g,(V,G)=>G in z?String(z[G]):"")}(u.properties,E)}createBucket(i){return new Vc(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of Ih.paint.overridableProperties){if(!Sh.hasPaintOverride(this.layout,i))continue;const u=this.paint.get(i),m=new sc(u),b=new Xu(m,u.property.specification);let E=null;E=u.value.kind==="constant"||u.value.kind==="source"?new pu("source",b):new Ws("composite",b,u.value.zoomStops,u.value._interpolationType),this.paint._values[i]=new qa(u.property,E,u.parameters)}}_handleOverridablePaintPropertyUpdate(i,u,m){return!(!this.layout||u.isDataDriven()||m.isDataDriven())&&Sh.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,u){const m=i.get("text-field"),b=Ih.paint.properties[u];let E=!1;const T=z=>{for(const U of z)if(b.overrides&&b.overrides.hasOverride(U))return void(E=!0)};if(m.value.kind==="constant"&&m.value.value instanceof Te)T(m.value.value.sections);else if(m.value.kind==="source"){const z=V=>{E||(V instanceof st&&Pe(V.value)===Io?T(V.value.sections):V instanceof Yt?T(V.sections):V.eachChild(z))},U=m.value;U._styleExpression&&z(U._styleExpression.expression)}return E}}function lc(r,i,u){let m="never";const b=r.get(i);return b?m=b:r.get(u)&&(m="always"),m}var Wf={paint:new Qr({"background-color":new Di(Ze.paint_background["background-color"]),"background-pattern":new ia(Ze.paint_background["background-pattern"]),"background-opacity":new Di(Ze.paint_background["background-opacity"])})},Do={paint:new Qr({"raster-opacity":new Di(Ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Di(Ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Di(Ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Di(Ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Di(Ze.paint_raster["raster-saturation"]),"raster-contrast":new Di(Ze.paint_raster["raster-contrast"]),"raster-resampling":new Di(Ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Di(Ze.paint_raster["raster-fade-duration"])})};class eo extends to{constructor(i){super(i,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const Xf={circle:class extends to{constructor(r){super(r,Iu)}createBucket(r){return new Za(r)}queryRadius(r){const i=r;return Rs("circle-radius",this,i)+Rs("circle-stroke-width",this,i)+ur(this.paint.get("circle-translate"))}queryIntersectsFeature(r,i,u,m,b,E,T,z){const U=xa(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,T),V=this.paint.get("circle-radius").evaluate(i,u)+this.paint.get("circle-stroke-width").evaluate(i,u),G=this.paint.get("circle-pitch-alignment")==="map",q=G?U:function($,te){return $.map(de=>Lc(de,te))}(U,z),K=G?V*T:V;for(const $ of m)for(const te of $){const de=G?te:Lc(te,z);let _e=K;const Oe=xl([],[te.x,te.y,0,1],z);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?_e*=Oe[3]/E.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(_e*=E.cameraToCenterDistance/Oe[3]),$u(q,de,_e))return!0}return!1}},heatmap:class extends to{constructor(r){super(r,Pc),this._updateColorRamp()}createBucket(r){return new Pd(r)}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=If({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends to{constructor(r){super(r,Qm)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends to{constructor(r){super(r,Sf)}recalculate(r,i){super.recalculate(r,i);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Mp(r)}queryRadius(){return ur(this.paint.get("fill-translate"))}queryIntersectsFeature(r,i,u,m,b,E,T){return vl(xa(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,T),m)}isTileClipped(){return!0}},"fill-extrusion":class extends to{constructor(r){super(r,gg)}createBucket(r){return new Pp(r)}queryRadius(){return ur(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,i,u,m,b,E,T,z){const U=xa(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,T),V=this.paint.get("fill-extrusion-height").evaluate(i,u),G=this.paint.get("fill-extrusion-base").evaluate(i,u),q=function($,te,de,_e){const Oe=[];for(const Ye of $){const it=[Ye.x,Ye.y,0,1];xl(it,it,te),Oe.push(new Et(it[0]/it[3],it[1]/it[3]))}return Oe}(U,z),K=function($,te,de,_e){const Oe=[],Ye=[],it=_e[8]*te,nt=_e[9]*te,vt=_e[10]*te,ot=_e[11]*te,Kt=_e[8]*de,Wt=_e[9]*de,Lt=_e[10]*de,Zt=_e[11]*de;for(const Nt of $){const $t=[],Ot=[];for(const Vt of Nt){const ki=Vt.x,Ai=Vt.y,on=_e[0]*ki+_e[4]*Ai+_e[12],un=_e[1]*ki+_e[5]*Ai+_e[13],zn=_e[2]*ki+_e[6]*Ai+_e[14],Kn=_e[3]*ki+_e[7]*Ai+_e[15],fr=zn+vt,mr=Kn+ot,or=on+Kt,wr=un+Wt,ar=zn+Lt,Er=Kn+Zt,fn=new Et((on+it)/mr,(un+nt)/mr);fn.z=fr/mr,$t.push(fn);const Mn=new Et(or/Er,wr/Er);Mn.z=ar/Er,Ot.push(Mn)}Oe.push($t),Ye.push(Ot)}return[Oe,Ye]}(m,G,V,z);return function($,te,de){let _e=1/0;vl(de,te)&&(_e=Ea(de,te[0]));for(let Oe=0;Oe<te.length;Oe++){const Ye=te[Oe],it=$[Oe];for(let nt=0;nt<Ye.length-1;nt++){const vt=Ye[nt],ot=[vt,Ye[nt+1],it[nt+1],it[nt],vt];Qu(de,ot)&&(_e=Math.min(_e,Ea(de,ot)))}}return _e!==1/0&&_e}(K[0],K[1],q)}},line:class extends to{constructor(r){super(r,Pf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){r==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ll,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,i){super.recalculate(r,i),this.paint._values["line-floorwidth"]=zf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new zp(r)}queryRadius(r){const i=r,u=vh(Rs("line-width",this,i),Rs("line-gap-width",this,i)),m=Rs("line-offset",this,i);return u/2+Math.abs(m)+ur(this.paint.get("line-translate"))}queryIntersectsFeature(r,i,u,m,b,E,T){const z=xa(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,T),U=T/2*vh(this.paint.get("line-width").evaluate(i,u),this.paint.get("line-gap-width").evaluate(i,u)),V=this.paint.get("line-offset").evaluate(i,u);return V&&(m=function(G,q){const K=[];for(let $=0;$<G.length;$++){const te=G[$],de=[];for(let _e=0;_e<te.length;_e++){const Oe=te[_e-1],Ye=te[_e],it=te[_e+1],nt=_e===0?new Et(0,0):Ye.sub(Oe)._unit()._perp(),vt=_e===te.length-1?new Et(0,0):it.sub(Ye)._unit()._perp(),ot=nt._add(vt)._unit(),Kt=ot.x*vt.x+ot.y*vt.y;Kt!==0&&ot._mult(1/Kt),de.push(ot._mult(q)._add(Ye))}K.push(de)}return K}(m,V*T)),function(G,q,K){for(let $=0;$<q.length;$++){const te=q[$];if(G.length>=3){for(let de=0;de<te.length;de++)if(Wa(G,te[de]))return!0}if(ec(G,te,K))return!0}return!1}(z,m,U)}isTileClipped(){return!0}},symbol:Sh,background:class extends to{constructor(r){super(r,Wf)}},raster:class extends to{constructor(r){super(r,Do)}}};class Kf{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Wp=63710088e-1;class Eo{constructor(i,u){if(isNaN(i)||isNaN(u))throw new Error(`Invalid LngLat object: (${i}, ${u})`);if(this.lng=+i,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Eo(Y(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const u=Math.PI/180,m=this.lat*u,b=i.lat*u,E=Math.sin(m)*Math.sin(b)+Math.cos(m)*Math.cos(b)*Math.cos((i.lng-this.lng)*u);return Wp*Math.acos(Math.min(E,1))}toBounds(i=0){const u=360*i/40075017,m=u/Math.cos(Math.PI/180*this.lat);return new uc(new Eo(this.lng-m,this.lat-u),new Eo(this.lng+m,this.lat+u))}static convert(i){if(i instanceof Eo)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Eo(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Eo(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class uc{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof Eo?new Eo(i.lng,i.lat):Eo.convert(i),this}setSouthWest(i){return this._sw=i instanceof Eo?new Eo(i.lng,i.lat):Eo.convert(i),this}extend(i){const u=this._sw,m=this._ne;let b,E;if(i instanceof Eo)b=i,E=i;else{if(!(i instanceof uc))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(uc.convert(i)):this.extend(Eo.convert(i)):this;if(b=i._sw,E=i._ne,!b||!E)return this}return u||m?(u.lng=Math.min(b.lng,u.lng),u.lat=Math.min(b.lat,u.lat),m.lng=Math.max(E.lng,m.lng),m.lat=Math.max(E.lat,m.lat)):(this._sw=new Eo(b.lng,b.lat),this._ne=new Eo(E.lng,E.lat)),this}getCenter(){return new Eo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Eo(this.getWest(),this.getNorth())}getSouthEast(){return new Eo(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:m}=Eo.convert(i);let b=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&b}static convert(i){return i instanceof uc?i:i&&new uc(i)}}const Xd=2*Math.PI*Wp;function cc(r){return Xd*Math.cos(r*Math.PI/180)}function hc(r){return(180+r)/360}function Xp(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Ao(r,i){return r/cc(i)}function jc(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class $s{constructor(i,u,m=0){this.x=+i,this.y=+u,this.z=+m}static fromLngLat(i,u=0){const m=Eo.convert(i);return new $s(hc(m.lng),Xp(m.lat),Ao(u,m.lat))}toLngLat(){return new Eo(360*this.x-180,jc(this.y))}toAltitude(){return this.z*cc(jc(this.y))}meterInMercatorCoordinateUnits(){return 1/Xd*(i=jc(this.y),1/Math.cos(i*Math.PI/180));var i}}function sd(r,i,u){var m=2*Math.PI*6378137/256/Math.pow(2,u);return[r*m-2*Math.PI*6378137/2,i*m-2*Math.PI*6378137/2]}class Th{constructor(i,u,m){this.z=i,this.x=u,this.y=m,this.key=Bs(0,i,i,u,m)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,u,m){const b=(T=this.y,z=this.z,U=sd(256*(E=this.x),256*(T=Math.pow(2,z)-T-1),z),V=sd(256*(E+1),256*(T+1),z),U[0]+","+U[1]+","+V[0]+","+V[1]);var E,T,z,U,V;const G=function(q,K,$){let te,de="";for(let _e=q;_e>0;_e--)te=1<<_e-1,de+=(K&te?1:0)+($&te?2:0);return de}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,G).replace(/{bbox-epsg-3857}/g,b)}getTilePoint(i){const u=Math.pow(2,this.z);return new Et((i.x*u-this.x)*er,(i.y*u-this.y)*er)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Kd{constructor(i,u){this.wrap=i,this.canonical=u,this.key=Bs(i,u.z,u.z,u.x,u.y)}}class Ba{constructor(i,u,m,b,E){this.overscaledZ=i,this.wrap=u,this.canonical=new Th(m,+b,+E),this.key=Bs(u,i,m,b,E)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const u=this.canonical.z-i;return i>this.canonical.z?new Ba(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ba(i,this.wrap,i,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(i,u){const m=this.canonical.z-i;return i>this.canonical.z?Bs(this.wrap*+u,i,this.canonical.z,this.canonical.x,this.canonical.y):Bs(this.wrap*+u,i,i,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const u=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>u&&i.canonical.y===this.canonical.y>>u}children(i){if(this.overscaledZ>=i)return[new Ba(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,m=2*this.canonical.x,b=2*this.canonical.y;return[new Ba(u,this.wrap,u,m,b),new Ba(u,this.wrap,u,m+1,b),new Ba(u,this.wrap,u,m,b+1),new Ba(u,this.wrap,u,m+1,b+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Ba(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Ba(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Kd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new $s(i.x-this.wrap,i.y))}}function Bs(r,i,u,m,b){(r*=2)<0&&(r=-1*r-1);const E=1<<u;return(E*E*r+E*b+m).toString(36)+u.toString(36)+i.toString(36)}Si("CanonicalTileID",Th),Si("OverscaledTileID",Ba,{omit:["posMatrix"]});class Kp{constructor(i,u,m){if(this.uid=i,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(m&&m!=="mapbox"&&m!=="terrarium")return void Ue(`"${m}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const b=this.dim=u.height-2;this.data=new Uint32Array(u.data.buffer),this.encoding=m||"mapbox";for(let E=0;E<b;E++)this.data[this._idx(-1,E)]=this.data[this._idx(0,E)],this.data[this._idx(b,E)]=this.data[this._idx(b-1,E)],this.data[this._idx(E,-1)]=this.data[this._idx(E,0)],this.data[this._idx(E,b)]=this.data[this._idx(E,b-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(b,-1)]=this.data[this._idx(b-1,0)],this.data[this._idx(-1,b)]=this.data[this._idx(0,b-1)],this.data[this._idx(b,b)]=this.data[this._idx(b-1,b-1)]}get(i,u){const m=new Uint8Array(this.data.buffer),b=4*this._idx(i,u);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(m[b],m[b+1],m[b+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(i,u){if(i<-1||i>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(i+1)}_unpackMapbox(i,u,m){return(256*i*256+256*u+m)/10-1e4}_unpackTerrarium(i,u,m){return 256*i+u+m/256-32768}getPixels(){return new Os({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,u,m){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let b=u*this.dim,E=u*this.dim+this.dim,T=m*this.dim,z=m*this.dim+this.dim;switch(u){case-1:b=E-1;break;case 1:E=b+1}switch(m){case-1:T=z-1;break;case 1:z=T+1}const U=-u*this.dim,V=-m*this.dim;for(let G=T;G<z;G++)for(let q=b;q<E;q++)this.data[this._idx(q,G)]=i.data[this._idx(q+U,G+V)]}}Si("DEMData",Kp);class Jp{constructor(i){this._stringToNumber={},this._numberToString=[];for(let u=0;u<i.length;u++){const m=i[u];this._stringToNumber[m]=u,this._numberToString[u]=m}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}class Jf{constructor(i,u,m,b,E){this.type="Feature",this._vectorTileFeature=i,i._z=u,i._x=m,i._y=b,this.properties=i.properties,this.id=E}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(i[u]=this[u]);return i}}class jo{constructor(i,u){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Bn(er,16,0),this.grid3D=new Bn(er,16,0),this.featureIndexArray=new p,this.promoteId=u}insert(i,u,m,b,E,T){const z=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,b,E);const U=T?this.grid3D:this.grid;for(let V=0;V<u.length;V++){const G=u[V],q=[1/0,1/0,-1/0,-1/0];for(let K=0;K<G.length;K++){const $=G[K];q[0]=Math.min(q[0],$.x),q[1]=Math.min(q[1],$.y),q[2]=Math.max(q[2],$.x),q[3]=Math.max(q[3],$.y)}q[0]<er&&q[1]<er&&q[2]>=0&&q[3]>=0&&U.insert(z,q[0],q[1],q[2],q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new rc.VectorTile(new Dp(this.rawTileData)).layers,this.sourceLayerCoder=new Jp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,u,m,b){this.loadVTLayers();const E=i.params||{},T=er/i.tileSize/i.scale,z=Xs(E.filter),U=i.queryGeometry,V=i.queryPadding*T,G=Yp(U),q=this.grid.query(G.minX-V,G.minY-V,G.maxX+V,G.maxY+V),K=Yp(i.cameraQueryGeometry),$=this.grid3D.query(K.minX-V,K.minY-V,K.maxX+V,K.maxY+V,(_e,Oe,Ye,it)=>function(nt,vt,ot,Kt,Wt){for(const Zt of nt)if(vt<=Zt.x&&ot<=Zt.y&&Kt>=Zt.x&&Wt>=Zt.y)return!0;const Lt=[new Et(vt,ot),new Et(vt,Wt),new Et(Kt,Wt),new Et(Kt,ot)];if(nt.length>2){for(const Zt of Lt)if(Wa(nt,Zt))return!0}for(let Zt=0;Zt<nt.length-1;Zt++)if(Vl(nt[Zt],nt[Zt+1],Lt))return!0;return!1}(i.cameraQueryGeometry,_e-V,Oe-V,Ye+V,it+V));for(const _e of $)q.push(_e);q.sort(t);const te={};let de;for(let _e=0;_e<q.length;_e++){const Oe=q[_e];if(Oe===de)continue;de=Oe;const Ye=this.featureIndexArray.get(Oe);let it=null;this.loadMatchingFeature(te,Ye.bucketIndex,Ye.sourceLayerIndex,Ye.featureIndex,z,E.layers,E.availableImages,u,m,b,(nt,vt,ot)=>(it||(it=Ga(nt)),vt.queryIntersectsFeature(U,nt,ot,it,this.z,i.transform,T,i.pixelPosMatrix)))}return te}loadMatchingFeature(i,u,m,b,E,T,z,U,V,G,q){const K=this.bucketLayerIDs[u];if(T&&!function(_e,Oe){for(let Ye=0;Ye<_e.length;Ye++)if(Oe.indexOf(_e[Ye])>=0)return!0;return!1}(T,K))return;const $=this.sourceLayerCoder.decode(m),te=this.vtLayers[$].feature(b);if(E.needGeometry){const _e=Mo(te,!0);if(!E.filter(new Vr(this.tileID.overscaledZ),_e,this.tileID.canonical))return}else if(!E.filter(new Vr(this.tileID.overscaledZ),te))return;const de=this.getId(te,$);for(let _e=0;_e<K.length;_e++){const Oe=K[_e];if(T&&T.indexOf(Oe)<0)continue;const Ye=U[Oe];if(!Ye)continue;let it={};de&&G&&(it=G.getState(Ye.sourceLayer||"_geojsonTileLayer",de));const nt=ee({},V[Oe]);nt.paint=Pu(nt.paint,Ye.paint,te,it,z),nt.layout=Pu(nt.layout,Ye.layout,te,it,z);const vt=!q||q(te,Ye,it);if(!vt)continue;const ot=new Jf(te,this.z,this.x,this.y,de);ot.layer=nt;let Kt=i[Oe];Kt===void 0&&(Kt=i[Oe]=[]),Kt.push({featureIndex:b,feature:ot,intersectionZ:vt})}}lookupSymbolFeatures(i,u,m,b,E,T,z,U){const V={};this.loadVTLayers();const G=Xs(E);for(const q of i)this.loadMatchingFeature(V,m,b,q,G,T,z,U,u);return V}hasLayer(i){for(const u of this.bucketLayerIDs)for(const m of u)if(i===m)return!0;return!1}getId(i,u){let m=i.id;return this.promoteId&&(m=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof m=="boolean"&&(m=Number(m))),m}}function Pu(r,i,u,m,b){return ve(r,(E,T)=>{const z=i instanceof ya?i.get(T):null;return z&&z.evaluate?z.evaluate(u,m,b):z})}function Yp(r){let i=1/0,u=1/0,m=-1/0,b=-1/0;for(const E of r)i=Math.min(i,E.x),u=Math.min(u,E.y),m=Math.max(m,E.x),b=Math.max(b,E.y);return{minX:i,minY:u,maxX:m,maxY:b}}function t(r,i){return i-r}var a;Si("FeatureIndex",jo,{omit:["rawTileData","sourceLayerCoder"]}),h.PerformanceMarkers=void 0,(a=h.PerformanceMarkers||(h.PerformanceMarkers={})).create="create",a.load="load",a.fullLoad="fullLoad";let d=null,x=[];const I=1e3/30,M={mark(r){performance.mark(r)},frame(r){const i=r;d!=null&&x.push(i-d),d=i},clearMetrics(){d=null,x=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const r in h.PerformanceMarkers)performance.clearMarks(h.PerformanceMarkers[r])},getPerformanceMetrics(){performance.measure("loadTime",h.PerformanceMarkers.create,h.PerformanceMarkers.load),performance.measure("fullLoadTime",h.PerformanceMarkers.create,h.PerformanceMarkers.fullLoad);const r=performance.getEntriesByName("loadTime")[0].duration,i=performance.getEntriesByName("fullLoadTime")[0].duration,u=x.length,m=1/(x.reduce((E,T)=>E+T,0)/u/1e3),b=x.filter(E=>E>I).reduce((E,T)=>E+(T-I)/I,0);return{loadTime:r,fullLoadTime:i,fps:m,percentDroppedFrames:b/(u+b)*100}}};h.AJAXError=gt,h.ARRAY_TYPE=tc,h.Actor=class{constructor(r,i,u){this.target=r,this.parent=i,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},re(["receive","process"],this),this.invoker=new Kf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ut()?r:window}send(r,i,u,m,b=!1){const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[E]=u);const T=qe(this.globalScope)?void 0:[];return this.target.postMessage({id:E,type:r,hasCallback:!!u,targetMapId:m,mustQueue:b,sourceMapId:this.mapId,data:ds(i,T)},T),{cancel:()=>{u&&delete this.callbacks[E],this.target.postMessage({id:E,type:"<cancel>",targetMapId:m,sourceMapId:this.mapId})}}}receive(r){const i=r.data,u=i.id;if(u&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[u];const m=this.cancelCallbacks[u];delete this.cancelCallbacks[u],m&&m()}else ut()||i.mustQueue?(this.tasks[u]=i,this.taskQueue.push(u),this.invoker.trigger()):this.processTask(u,i)}process(){if(!this.taskQueue.length)return;const r=this.taskQueue.shift(),i=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(r,i)}processTask(r,i){if(i.type==="<response>"){const u=this.callbacks[r];delete this.callbacks[r],u&&(i.error?u(Ja(i.error)):u(null,Ja(i.data)))}else{let u=!1;const m=qe(this.globalScope)?void 0:[],b=i.hasCallback?(z,U)=>{u=!0,delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:z?ds(z):null,data:ds(U,m)},m)}:z=>{u=!0};let E=null;const T=Ja(i.data);if(this.parent[i.type])E=this.parent[i.type](i.sourceMapId,T,b);else if(this.parent.getWorkerSource){const z=i.type.split(".");E=this.parent.getWorkerSource(i.sourceMapId,z[0],T.source)[z[1]](T,b)}else b(new Error(`Could not find function ${i.type}`));!u&&E&&E.cancel&&(this.cancelCallbacks[r]=E.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},h.AlphaImage=jh,h.CanonicalTileID=Th,h.CollisionBoxArray=Rt,h.CollisionCircleLayoutArray=class extends ie{},h.Color=X,h.DEMData=Kp,h.DataConstantProperty=Di,h.DictionaryCoder=Jp,h.EXTENT=er,h.ErrorEvent=zt,h.EvaluationParameters=Vr,h.Event=Ln,h.Evented=Oi,h.FeatureIndex=jo,h.FillBucket=Mp,h.FillExtrusionBucket=Pp,h.GeoJSONFeature=Jf,h.ImageAtlas=Fp,h.ImagePosition=Bp,h.LineBucket=zp,h.LineStripIndexArray=class extends bt{},h.LngLat=Eo,h.LngLatBounds=uc,h.MercatorCoordinate=$s,h.ONE_EM=ra,h.OverscaledTileID=Ba,h.PerformanceUtils=M,h.PosArray=class extends xo{},h.Properties=Qr,h.QuadTriangleArray=class extends ge{},h.RGBAImage=Os,h.RasterBoundsArray=class extends ca{},h.RequestPerformance=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},h.ResourceType=Qt,h.SegmentVector=Ce,h.SymbolBucket=Vc,h.Transitionable=Ya,h.TriangleIndexArray=Ee,h.Uniform1f=Xn,h.Uniform1i=class extends Gi{constructor(r,i){super(r,i),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},h.Uniform2f=class extends Gi{constructor(r,i){super(r,i),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},h.Uniform3f=class extends Gi{constructor(r,i){super(r,i),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},h.Uniform4f=Li,h.UniformColor=pn,h.UniformMatrix4f=class extends Gi{constructor(r,i){super(r,i),this.current=Fn}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let i=1;i<16;i++)if(r[i]!==this.current[i]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},h.UnwrappedTileID=Kd,h.ValidationError=Bt,h.ZoomHistory=_u,h.addDynamicAttributes=Zp,h.asyncAll=function(r,i,u){if(!r.length)return u(null,[]);let m=r.length;const b=new Array(r.length);let E=null;r.forEach((T,z)=>{i(T,(U,V)=>{U&&(E=U),b[z]=V,--m==0&&u(E,b)})})},h.bezier=D,h.bindAll=re,h.cacheEntryPossiblyAdded=function(r){Jt++,Jt>Xi&&(r.getActor().send("enforceCacheSizeLimit",Xt),Jt=0)},h.clamp=O,h.clearTileCache=function(r){const i=caches.delete(wt);r&&i.catch(r).then(()=>r())},h.clipLine=Uc,h.clone=function(r){var i=new tc(16);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},h.clone$1=we,h.collisionCircleLayout=Of,h.config=Je,h.create=function(){var r=new tc(16);return tc!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},h.createExpression=cs,h.createFilter=Xs,h.createLayout=fi,h.createStyleLayer=function(r){return r.type==="custom"?new eo(r):new Xf[r.type](r)},h.dot=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]+r[3]*i[3]},h.ease=R,h.emitValidationErrors=Ms,h.enforceCacheSizeLimit=function(r){ei(),Pt&&Pt.then(i=>{i.keys().then(u=>{for(let m=0;m<u.length-r;m++)i.delete(u[m])})})},h.evaluateSizeForFeature=function(r,{uSize:i,uSizeT:u},{lowerSize:m,upperSize:b}){return r.kind==="source"?m/ql:r.kind==="composite"?So(m/ql,b/ql,u):i},h.evaluateSizeForZoom=function(r,i){let u=0,m=0;if(r.kind==="constant")m=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:b,minZoom:E,maxZoom:T}=r,z=b?O(No.interpolationFactor(b,i,E,T),0,1):0;r.kind==="camera"?m=So(r.minSize,r.maxSize,z):u=z}return{uSizeT:u,uSize:m}},h.evaluateVariableOffset=Eh,h.evented=Ps,h.exported=li,h.exported$1=bi,h.extend=ee,h.filterObject=se,h.getAnchorAlignment=Nd,h.getAnchorJustification=Mr,h.getArrayBuffer=Zn,h.getImage=Nn,h.getJSON=function(r,i){return Cn(ee(r,{type:"json"}),i)},h.getOverlapMode=lc,h.getRTLTextPluginStatus=bu,h.getReferrer=zi,h.getVideo=function(r,i){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){i(null,u)};for(let m=0;m<r.length;m++){const b=window.document.createElement("source");Nr(r[m])||(u.crossOrigin="Anonymous"),b.src=r[m],u.appendChild(b)}return{cancel:()=>{}}},h.identity=ic,h.invert=function(r,i){var u=i[0],m=i[1],b=i[2],E=i[3],T=i[4],z=i[5],U=i[6],V=i[7],G=i[8],q=i[9],K=i[10],$=i[11],te=i[12],de=i[13],_e=i[14],Oe=i[15],Ye=u*z-m*T,it=u*U-b*T,nt=u*V-E*T,vt=m*U-b*z,ot=m*V-E*z,Kt=b*V-E*U,Wt=G*de-q*te,Lt=G*_e-K*te,Zt=G*Oe-$*te,Nt=q*_e-K*de,$t=q*Oe-$*de,Ot=K*Oe-$*_e,Vt=Ye*Ot-it*$t+nt*Nt+vt*Zt-ot*Lt+Kt*Wt;return Vt?(r[0]=(z*Ot-U*$t+V*Nt)*(Vt=1/Vt),r[1]=(b*$t-m*Ot-E*Nt)*Vt,r[2]=(de*Kt-_e*ot+Oe*vt)*Vt,r[3]=(K*ot-q*Kt-$*vt)*Vt,r[4]=(U*Zt-T*Ot-V*Lt)*Vt,r[5]=(u*Ot-b*Zt+E*Lt)*Vt,r[6]=(_e*nt-te*Kt-Oe*it)*Vt,r[7]=(G*Kt-K*nt+$*it)*Vt,r[8]=(T*$t-z*Zt+V*Wt)*Vt,r[9]=(m*Zt-u*$t-E*Wt)*Vt,r[10]=(te*ot-de*nt+Oe*Ye)*Vt,r[11]=(q*nt-G*ot-$*Ye)*Vt,r[12]=(z*Lt-T*Nt-U*Wt)*Vt,r[13]=(u*Nt-m*Lt+b*Wt)*Vt,r[14]=(de*it-te*vt-_e*Ye)*Vt,r[15]=(G*vt-q*it+K*Ye)*Vt,r):null},h.isImageBitmap=Mt,h.isSafari=qe,h.keysDifference=function(r,i){const u=[];for(const m in r)m in i||u.push(m);return u},h.lazyLoadRTLTextPlugin=function(){Yr.isLoading()||Yr.isLoaded()||bu()!=="deferred"||ua()},h.makeRequest=Cn,h.mapObject=ve,h.mercatorXfromLng=hc,h.mercatorYfromLat=Xp,h.mercatorZfromAltitude=Ao,h.mul=Ld,h.multiply=Md,h.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},h.number=So,h.ortho=function(r,i,u,m,b,E,T){var z=1/(i-u),U=1/(m-b),V=1/(E-T);return r[0]=-2*z,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*U,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*V,r[11]=0,r[12]=(i+u)*z,r[13]=(b+m)*U,r[14]=(T+E)*V,r[15]=1,r},h.parseCacheControl=at,h.parseGlyphPBF=function(r){return new Dp(r).readFields(Fd,[])},h.pbf=Dp,h.performSymbolLayout=function(r,i,u,m,b,E,T){r.createArrays(),r.tilePixelRatio=er/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const z=r.layers[0].layout,U=r.layers[0]._unevaluatedLayout._values,V={layoutIconSize:U["icon-size"].possiblyEvaluate(new Vr(r.zoom+1),T),layoutTextSize:U["text-size"].possiblyEvaluate(new Vr(r.zoom+1),T),textMaxSize:U["text-size"].possiblyEvaluate(new Vr(18))};if(r.textSizeData.kind==="composite"){const{minZoom:te,maxZoom:de}=r.textSizeData;V.compositeTextSizes=[U["text-size"].possiblyEvaluate(new Vr(te),T),U["text-size"].possiblyEvaluate(new Vr(de),T)]}if(r.iconSizeData.kind==="composite"){const{minZoom:te,maxZoom:de}=r.iconSizeData;V.compositeIconSizes=[U["icon-size"].possiblyEvaluate(new Vr(te),T),U["icon-size"].possiblyEvaluate(new Vr(de),T)]}const G=z.get("text-line-height")*ra,q=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point",K=z.get("text-keep-upright"),$=z.get("text-size");for(const te of r.features){const de=z.get("text-font").evaluate(te,{},T).join(","),_e=$.evaluate(te,{},T),Oe=V.layoutTextSize.evaluate(te,{},T),Ye=V.layoutIconSize.evaluate(te,{},T),it={horizontal:{},vertical:void 0},nt=te.text;let vt,ot=[0,0];if(nt){const Lt=nt.toString(),Zt=z.get("text-letter-spacing").evaluate(te,{},T)*ra,Nt=Bl(Lt)?Zt:0,$t=z.get("text-anchor").evaluate(te,{},T),Ot=z.get("text-variable-anchor");if(!Ot){const un=z.get("text-radial-offset").evaluate(te,{},T);ot=un?Eh($t,[un*ra,ac]):z.get("text-offset").evaluate(te,{},T).map(zn=>zn*ra)}let Vt=q?"center":z.get("text-justify").evaluate(te,{},T);const ki=z.get("symbol-placement"),Ai=ki==="point"?z.get("text-max-width").evaluate(te,{},T)*ra:0,on=()=>{r.allowVerticalPlacement&&yl(Lt)&&(it.vertical=$h(nt,i,u,b,de,Ai,G,$t,"left",Nt,ot,h.WritingMode.vertical,!0,ki,Oe,_e))};if(!q&&Ot){const un=Vt==="auto"?Ot.map(Kn=>Mr(Kn)):[Vt];let zn=!1;for(let Kn=0;Kn<un.length;Kn++){const fr=un[Kn];if(!it.horizontal[fr])if(zn)it.horizontal[fr]=it.horizontal[0];else{const mr=$h(nt,i,u,b,de,Ai,G,"center",fr,Nt,ot,h.WritingMode.horizontal,!1,ki,Oe,_e);mr&&(it.horizontal[fr]=mr,zn=mr.positionedLines.length===1)}}on()}else{Vt==="auto"&&(Vt=Mr($t));const un=$h(nt,i,u,b,de,Ai,G,$t,Vt,Nt,ot,h.WritingMode.horizontal,!1,ki,Oe,_e);un&&(it.horizontal[Vt]=un),on(),yl(Lt)&&q&&K&&(it.vertical=$h(nt,i,u,b,de,Ai,G,$t,Vt,Nt,ot,h.WritingMode.vertical,!1,ki,Oe,_e))}}let Kt=!1;if(te.icon&&te.icon.name){const Lt=m[te.icon.name];Lt&&(vt=Sg(b[te.icon.name],z.get("icon-offset").evaluate(te,{},T),z.get("icon-anchor").evaluate(te,{},T)),Kt=!!Lt.sdf,r.sdfIcons===void 0?r.sdfIcons=Kt:r.sdfIcons!==Kt&&Ue("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Lt.pixelRatio!==r.pixelRatio||z.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}const Wt=Hf(it.horizontal)||it.vertical;r.iconsInText=!!Wt&&Wt.iconsInText,(Wt||vt)&&Mg(r,te,it,vt,m,V,Oe,Ye,ot,Kt,T)}E&&r.generateCollisionDebugBuffers()},h.perspective=function(r,i,u,m,b){var E,T=1/Math.tan(i/2);return r[0]=T/u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=T,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,b!=null&&b!==1/0?(r[10]=(b+m)*(E=1/(m-b)),r[14]=2*b*m*E):(r[10]=-1,r[14]=-2*m),r},h.pick=function(r,i){const u={};for(let m=0;m<i.length;m++){const b=i[m];b in r&&(u[b]=r[b])}return u},h.plugin=Yr,h.pointGeometry=Et,h.polygonIntersectsPolygon=Qu,h.potpack=Op,h.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],h.register=Si,h.registerForPluginStateChange=function(r){return r({pluginStatus:Hr,pluginURL:ps}),Ps.on("pluginStateChange",r),r},h.renderColorRamp=If,h.rotateX=function(r,i,u){var m=Math.sin(u),b=Math.cos(u),E=i[4],T=i[5],z=i[6],U=i[7],V=i[8],G=i[9],q=i[10],K=i[11];return i!==r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[4]=E*b+V*m,r[5]=T*b+G*m,r[6]=z*b+q*m,r[7]=U*b+K*m,r[8]=V*b-E*m,r[9]=G*b-T*m,r[10]=q*b-z*m,r[11]=K*b-U*m,r},h.rotateZ=function(r,i,u){var m=Math.sin(u),b=Math.cos(u),E=i[0],T=i[1],z=i[2],U=i[3],V=i[4],G=i[5],q=i[6],K=i[7];return i!==r&&(r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[0]=E*b+V*m,r[1]=T*b+G*m,r[2]=z*b+q*m,r[3]=U*b+K*m,r[4]=V*b-E*m,r[5]=G*b-T*m,r[6]=q*b-z*m,r[7]=K*b-U*m,r},h.scale=function(r,i,u){var m=u[0],b=u[1],E=u[2];return r[0]=i[0]*m,r[1]=i[1]*m,r[2]=i[2]*m,r[3]=i[3]*m,r[4]=i[4]*b,r[5]=i[5]*b,r[6]=i[6]*b,r[7]=i[7]*b,r[8]=i[8]*E,r[9]=i[9]*E,r[10]=i[10]*E,r[11]=i[11]*E,r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r},h.scale$1=function(r,i,u){return r[0]=i[0]*u,r[1]=i[1]*u,r[2]=i[2]*u,r[3]=i[3]*u,r},h.setCacheLimits=function(r,i){Xt=r,Xi=i},h.setRTLTextPlugin=function(r,i,u=!1){if(Hr===Wo||Hr===Ul||Hr===Js)throw new Error("setRTLTextPlugin cannot be called multiple times.");ps=li.resolveURL(r),Hr=Wo,Ra=i,vu(),u||ua()},h.spec=Ze,h.sphericalToCartesian=function([r,i,u]){return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:r*Math.cos(i)*Math.sin(u),y:r*Math.sin(i)*Math.sin(u),z:r*Math.cos(u)}},h.toEvaluationFeature=Mo,h.transformMat4=xl,h.translate=function(r,i,u){var m,b,E,T,z,U,V,G,q,K,$,te,de=u[0],_e=u[1],Oe=u[2];return i===r?(r[12]=i[0]*de+i[4]*_e+i[8]*Oe+i[12],r[13]=i[1]*de+i[5]*_e+i[9]*Oe+i[13],r[14]=i[2]*de+i[6]*_e+i[10]*Oe+i[14],r[15]=i[3]*de+i[7]*_e+i[11]*Oe+i[15]):(b=i[1],E=i[2],T=i[3],z=i[4],U=i[5],V=i[6],G=i[7],q=i[8],K=i[9],$=i[10],te=i[11],r[0]=m=i[0],r[1]=b,r[2]=E,r[3]=T,r[4]=z,r[5]=U,r[6]=V,r[7]=G,r[8]=q,r[9]=K,r[10]=$,r[11]=te,r[12]=m*de+z*_e+q*Oe+i[12],r[13]=b*de+U*_e+K*Oe+i[13],r[14]=E*de+V*_e+$*Oe+i[14],r[15]=T*de+G*_e+te*Oe+i[15]),r},h.triggerPluginCompletionEvent=pi,h.unicodeBlockLookup=Mi,h.uniqueId=function(){return he++},h.validateCustomStyleLayer=function(r){const i=[],u=r.id;return u===void 0&&i.push({message:`layers.${u}: missing required property "id"`}),r.render===void 0&&i.push({message:`layers.${u}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&i.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),i},h.validateLight=Gr,h.validateStyle=Da,h.vectorTile=rc,h.warnOnce=Ue,h.wrap=Y}),v(["./shared"],function(h){function S(ce){const W=typeof ce;if(W==="number"||W==="boolean"||W==="string"||ce==null)return JSON.stringify(ce);if(Array.isArray(ce)){let me="[";for(const Te of ce)me+=`${S(Te)},`;return`${me}]`}const X=Object.keys(ce).sort();let le="{";for(let me=0;me<X.length;me++)le+=`${JSON.stringify(X[me])}:${S(ce[X[me]])},`;return`${le}}`}function P(ce){let W="";for(const X of h.refProperties)W+=`/${S(ce[X])}`;return W}class D{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,X){for(const me of W){this._layerConfigs[me.id]=me;const Te=this._layers[me.id]=h.createStyleLayer(me);Te._featureFilter=h.createFilter(Te.filter),this.keyCache[me.id]&&delete this.keyCache[me.id]}for(const me of X)delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me];this.familiesBySource={};const le=function(me,Te){const xe={};for(let Me=0;Me<me.length;Me++){const Pe=Te&&Te[me[Me].id]||P(me[Me]);Te&&(Te[me[Me].id]=Pe);let yt=xe[Pe];yt||(yt=xe[Pe]=[]),yt.push(me[Me])}const Le=[];for(const Me in xe)Le.push(xe[Me]);return Le}(Object.values(this._layerConfigs),this.keyCache);for(const me of le){const Te=me.map(st=>this._layers[st.id]),xe=Te[0];if(xe.visibility==="none")continue;const Le=xe.source||"";let Me=this.familiesBySource[Le];Me||(Me=this.familiesBySource[Le]={});const Pe=xe.sourceLayer||"_geojsonTileLayer";let yt=Me[Pe];yt||(yt=Me[Pe]=[]),yt.push(Te)}}}class R{constructor(W){const X={},le=[];for(const Le in W){const Me=W[Le],Pe=X[Le]={};for(const yt in Me){const st=Me[+yt];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const _t={x:0,y:0,w:st.bitmap.width+2,h:st.bitmap.height+2};le.push(_t),Pe[yt]={rect:_t,metrics:st.metrics}}}const{w:me,h:Te}=h.potpack(le),xe=new h.AlphaImage({width:me||1,height:Te||1});for(const Le in W){const Me=W[Le];for(const Pe in Me){const yt=Me[+Pe];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const st=X[Le][Pe].rect;h.AlphaImage.copy(yt.bitmap,xe,{x:0,y:0},{x:st.x+1,y:st.y+1},yt.bitmap)}}this.image=xe,this.positions=X}}h.register("GlyphAtlas",R);class O{constructor(W){this.tileID=new h.OverscaledTileID(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId}parse(W,X,le,me,Te){this.status="parsing",this.data=W,this.collisionBoxArray=new h.CollisionBoxArray;const xe=new h.DictionaryCoder(Object.keys(W.layers).sort()),Le=new h.FeatureIndex(this.tileID,this.promoteId);Le.bucketLayerIDs=[];const Me={},Pe={featureIndex:Le,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:le},yt=X.familiesBySource[this.source];for(const nn in yt){const Fi=W.layers[nn];if(!Fi)continue;Fi.version===1&&h.warnOnce(`Vector tile source "${this.source}" layer "${nn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ii=xe.encode(nn),hn=[];for(let cr=0;cr<Fi.length;cr++){const ho=Fi.feature(cr),pr=Le.getId(ho,nn);hn.push({feature:ho,id:pr,index:cr,sourceLayerIndex:Ii})}for(const cr of yt[nn]){const ho=cr[0];ho.minzoom&&this.zoom<Math.floor(ho.minzoom)||ho.maxzoom&&this.zoom>=ho.maxzoom||ho.visibility!=="none"&&(Y(cr,this.zoom,le),(Me[ho.id]=ho.createBucket({index:Le.bucketLayerIDs.length,layers:cr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ii,sourceID:this.source})).populate(hn,Pe,this.tileID.canonical),Le.bucketLayerIDs.push(cr.map(pr=>pr.id)))}}let st,_t,si,De;const Yt=h.mapObject(Pe.glyphDependencies,nn=>Object.keys(nn).map(Number));Object.keys(Yt).length?me.send("getGlyphs",{uid:this.uid,stacks:Yt},(nn,Fi)=>{st||(st=nn,_t=Fi,Wi.call(this))}):_t={};const hi=Object.keys(Pe.iconDependencies);hi.length?me.send("getImages",{icons:hi,source:this.source,tileID:this.tileID,type:"icons"},(nn,Fi)=>{st||(st=nn,si=Fi,Wi.call(this))}):si={};const kn=Object.keys(Pe.patternDependencies);function Wi(){if(st)return Te(st);if(_t&&si&&De){const nn=new R(_t),Fi=new h.ImageAtlas(si,De);for(const Ii in Me){const hn=Me[Ii];hn instanceof h.SymbolBucket?(Y(hn.layers,this.zoom,le),h.performSymbolLayout(hn,_t,nn.positions,si,Fi.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):hn.hasPattern&&(hn instanceof h.LineBucket||hn instanceof h.FillBucket||hn instanceof h.FillExtrusionBucket)&&(Y(hn.layers,this.zoom,le),hn.addFeatures(Pe,this.tileID.canonical,Fi.patternPositions))}this.status="done",Te(null,{buckets:Object.values(Me).filter(Ii=>!Ii.isEmpty()),featureIndex:Le,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nn.image,imageAtlas:Fi,glyphMap:this.returnDependencies?_t:null,iconMap:this.returnDependencies?si:null,glyphPositions:this.returnDependencies?nn.positions:null})}}kn.length?me.send("getImages",{icons:kn,source:this.source,tileID:this.tileID,type:"patterns"},(nn,Fi)=>{st||(st=nn,De=Fi,Wi.call(this))}):De={},Wi.call(this)}}function Y(ce,W,X){const le=new h.EvaluationParameters(W);for(const me of ce)me.recalculate(le,X)}function ee(ce,W){const X=h.getArrayBuffer(ce.request,(le,me,Te,xe)=>{le?W(le):me&&W(null,{vectorTile:new h.vectorTile.VectorTile(new h.pbf(me)),rawData:me,cacheControl:Te,expires:xe})});return()=>{X.cancel(),W()}}class he{constructor(W,X,le,me){this.actor=W,this.layerIndex=X,this.availableImages=le,this.loadVectorData=me||ee,this.loading={},this.loaded={}}loadTile(W,X){const le=W.uid;this.loading||(this.loading={});const me=!!(W&&W.request&&W.request.collectResourceTiming)&&new h.RequestPerformance(W.request),Te=this.loading[le]=new O(W);Te.abort=this.loadVectorData(W,(xe,Le)=>{if(delete this.loading[le],xe||!Le)return Te.status="done",this.loaded[le]=Te,X(xe);const Me=Le.rawData,Pe={};Le.expires&&(Pe.expires=Le.expires),Le.cacheControl&&(Pe.cacheControl=Le.cacheControl);const yt={};if(me){const st=me.finish();st&&(yt.resourceTiming=JSON.parse(JSON.stringify(st)))}Te.vectorTile=Le.vectorTile,Te.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,(st,_t)=>{if(st||!_t)return X(st);X(null,h.extend({rawTileData:Me.slice(0)},_t,Pe,yt))}),this.loaded=this.loaded||{},this.loaded[le]=Te})}reloadTile(W,X){const le=this.loaded,me=W.uid,Te=this;if(le&&le[me]){const xe=le[me];xe.showCollisionBoxes=W.showCollisionBoxes;const Le=(Me,Pe)=>{const yt=xe.reloadCallback;yt&&(delete xe.reloadCallback,xe.parse(xe.vectorTile,Te.layerIndex,this.availableImages,Te.actor,yt)),X(Me,Pe)};xe.status==="parsing"?xe.reloadCallback=Le:xe.status==="done"&&(xe.vectorTile?xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,Le):Le())}}abortTile(W,X){const le=this.loading,me=W.uid;le&&le[me]&&le[me].abort&&(le[me].abort(),delete le[me]),X()}removeTile(W,X){const le=this.loaded,me=W.uid;le&&le[me]&&delete le[me],X()}}class re{constructor(){this.loaded={}}loadTile(W,X){const{uid:le,encoding:me,rawImageData:Te}=W,xe=h.isImageBitmap(Te)?this.getImageData(Te):Te,Le=new h.DEMData(le,xe,me);this.loaded=this.loaded||{},this.loaded[le]=Le,X(null,Le)}getImageData(W){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(W.width,W.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=W.width,this.offscreenCanvas.height=W.height,this.offscreenCanvasContext.drawImage(W,0,0,W.width,W.height);const X=this.offscreenCanvasContext.getImageData(-1,-1,W.width+2,W.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new h.RGBAImage({width:X.width,height:X.height},X.data)}removeTile(W){const X=this.loaded,le=W.uid;X&&X[le]&&delete X[le]}}var ve=function ce(W,X){var le,me=W&&W.type;if(me==="FeatureCollection")for(le=0;le<W.features.length;le++)ce(W.features[le],X);else if(me==="GeometryCollection")for(le=0;le<W.geometries.length;le++)ce(W.geometries[le],X);else if(me==="Feature")ce(W.geometry,X);else if(me==="Polygon")se(W.coordinates,X);else if(me==="MultiPolygon")for(le=0;le<W.coordinates.length;le++)se(W.coordinates[le],X);return W};function se(ce,W){if(ce.length!==0){we(ce[0],W);for(var X=1;X<ce.length;X++)we(ce[X],!W)}}function we(ce,W){for(var X=0,le=0,me=0,Te=ce.length,xe=Te-1;me<Te;xe=me++){var Le=(ce[me][0]-ce[xe][0])*(ce[xe][1]+ce[me][1]),Me=X+Le;le+=Math.abs(X)>=Math.abs(Le)?X-Me+Le:Le-Me+X,X=Me}X+le>=0!=!!W&&ce.reverse()}const Ge=h.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Ue{constructor(W){this._feature=W,this.extent=h.EXTENT,this.type=W.type,this.properties=W.tags,"id"in W&&!isNaN(W.id)&&(this.id=parseInt(W.id,10))}loadGeometry(){if(this._feature.type===1){const W=[];for(const X of this._feature.geometry)W.push([new h.pointGeometry(X[0],X[1])]);return W}{const W=[];for(const X of this._feature.geometry){const le=[];for(const me of X)le.push(new h.pointGeometry(me[0],me[1]));W.push(le)}return W}}toGeoJSON(W,X,le){return Ge.call(this,W,X,le)}}class He{constructor(W){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.EXTENT,this.length=W.length,this._features=W}feature(W){return new Ue(this._features[W])}}var fe={exports:{}},ut=h.pointGeometry,at=h.vectorTile.VectorTileFeature,je=Fe;function Fe(ce,W){this.options=W||{},this.features=ce,this.length=ce.length}function Dt(ce,W){this.id=typeof ce.id=="number"?ce.id:void 0,this.type=ce.type,this.rawGeometry=ce.type===1?[ce.geometry]:ce.geometry,this.properties=ce.tags,this.extent=W||4096}Fe.prototype.feature=function(ce){return new Dt(this.features[ce],this.options.extent)},Dt.prototype.loadGeometry=function(){var ce=this.rawGeometry;this.geometry=[];for(var W=0;W<ce.length;W++){for(var X=ce[W],le=[],me=0;me<X.length;me++)le.push(new ut(X[me][0],X[me][1]));this.geometry.push(le)}return this.geometry},Dt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ce=this.geometry,W=1/0,X=-1/0,le=1/0,me=-1/0,Te=0;Te<ce.length;Te++)for(var xe=ce[Te],Le=0;Le<xe.length;Le++){var Me=xe[Le];W=Math.min(W,Me.x),X=Math.max(X,Me.x),le=Math.min(le,Me.y),me=Math.max(me,Me.y)}return[W,le,X,me]},Dt.prototype.toGeoJSON=at.prototype.toGeoJSON;var qe=h.pbf,Mt=je;function li(ce){var W=new qe;return function(X,le){for(var me in X.layers)le.writeMessage(3,Et,X.layers[me])}(ce,W),W.finish()}function Et(ce,W){var X;W.writeVarintField(15,ce.version||1),W.writeStringField(1,ce.name||""),W.writeVarintField(5,ce.extent||4096);var le={keys:[],values:[],keycache:{},valuecache:{}};for(X=0;X<ce.length;X++)le.feature=ce.feature(X),W.writeMessage(2,Gt,le);var me=le.keys;for(X=0;X<me.length;X++)W.writeStringField(3,me[X]);var Te=le.values;for(X=0;X<Te.length;X++)W.writeMessage(4,Xt,Te[X])}function Gt(ce,W){var X=ce.feature;X.id!==void 0&&W.writeVarintField(1,X.id),W.writeMessage(2,Je,ce),W.writeVarintField(3,X.type),W.writeMessage(4,ni,X)}function Je(ce,W){var X=ce.feature,le=ce.keys,me=ce.values,Te=ce.keycache,xe=ce.valuecache;for(var Le in X.properties){var Me=X.properties[Le],Pe=Te[Le];if(Me!==null){Pe===void 0&&(le.push(Le),Te[Le]=Pe=le.length-1),W.writeVarint(Pe);var yt=typeof Me;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Me=JSON.stringify(Me));var st=yt+":"+Me,_t=xe[st];_t===void 0&&(me.push(Me),xe[st]=_t=me.length-1),W.writeVarint(_t)}}}function wt(ce,W){return(W<<3)+(7&ce)}function Pt(ce){return ce<<1^ce>>31}function ni(ce,W){for(var X=ce.loadGeometry(),le=ce.type,me=0,Te=0,xe=X.length,Le=0;Le<xe;Le++){var Me=X[Le],Pe=1;le===1&&(Pe=Me.length),W.writeVarint(wt(1,Pe));for(var yt=le===3?Me.length-1:Me.length,st=0;st<yt;st++){st===1&&le!==1&&W.writeVarint(wt(2,yt-1));var _t=Me[st].x-me,si=Me[st].y-Te;W.writeVarint(Pt(_t)),W.writeVarint(Pt(si)),me+=_t,Te+=si}le===3&&W.writeVarint(wt(7,1))}}function Xt(ce,W){var X=typeof ce;X==="string"?W.writeStringField(1,ce):X==="boolean"?W.writeBooleanField(7,ce):X==="number"&&(ce%1!=0?W.writeDoubleField(3,ce):ce<0?W.writeSVarintField(6,ce):W.writeVarintField(5,ce))}fe.exports=li,fe.exports.fromVectorTileJs=li,fe.exports.fromGeojsonVt=function(ce,W){W=W||{};var X={};for(var le in ce)X[le]=new Mt(ce[le].features,W),X[le].name=le,X[le].version=W.version,X[le].extent=W.extent;return li({layers:X})},fe.exports.GeoJSONWrapper=Mt;var Xi=fe.exports;function ei(ce,W,X,le,me,Te){if(me-le<=X)return;const xe=le+me>>1;Jt(ce,W,xe,le,me,Te%2),ei(ce,W,X,le,xe-1,Te+1),ei(ce,W,X,xe+1,me,Te+1)}function Jt(ce,W,X,le,me,Te){for(;me>le;){if(me-le>600){const Pe=me-le+1,yt=X-le+1,st=Math.log(Pe),_t=.5*Math.exp(2*st/3),si=.5*Math.sqrt(st*_t*(Pe-_t)/Pe)*(yt-Pe/2<0?-1:1);Jt(ce,W,X,Math.max(le,Math.floor(X-yt*_t/Pe+si)),Math.min(me,Math.floor(X+(Pe-yt)*_t/Pe+si)),Te)}const xe=W[2*X+Te];let Le=le,Me=me;for(bi(ce,W,le,X),W[2*me+Te]>xe&&bi(ce,W,le,me);Le<Me;){for(bi(ce,W,Le,Me),Le++,Me--;W[2*Le+Te]<xe;)Le++;for(;W[2*Me+Te]>xe;)Me--}W[2*le+Te]===xe?bi(ce,W,le,Me):(Me++,bi(ce,W,Me,me)),Me<=X&&(le=Me+1),X<=Me&&(me=Me-1)}}function bi(ce,W,X,le){ai(ce,X,le),ai(W,2*X,2*le),ai(W,2*X+1,2*le+1)}function ai(ce,W,X){const le=ce[W];ce[W]=ce[X],ce[X]=le}function ht(ce,W,X,le){const me=ce-X,Te=W-le;return me*me+Te*Te}const It=ce=>ce[0],St=ce=>ce[1];class Ji{constructor(W,X=It,le=St,me=64,Te=Float64Array){this.nodeSize=me,this.points=W;const xe=W.length<65536?Uint16Array:Uint32Array,Le=this.ids=new xe(W.length),Me=this.coords=new Te(2*W.length);for(let Pe=0;Pe<W.length;Pe++)Le[Pe]=Pe,Me[2*Pe]=X(W[Pe]),Me[2*Pe+1]=le(W[Pe]);ei(Le,Me,me,0,Le.length-1,0)}range(W,X,le,me){return function(Te,xe,Le,Me,Pe,yt,st){const _t=[0,Te.length-1,0],si=[];let De,Yt;for(;_t.length;){const hi=_t.pop(),kn=_t.pop(),Wi=_t.pop();if(kn-Wi<=st){for(let Ii=Wi;Ii<=kn;Ii++)De=xe[2*Ii],Yt=xe[2*Ii+1],De>=Le&&De<=Pe&&Yt>=Me&&Yt<=yt&&si.push(Te[Ii]);continue}const nn=Math.floor((Wi+kn)/2);De=xe[2*nn],Yt=xe[2*nn+1],De>=Le&&De<=Pe&&Yt>=Me&&Yt<=yt&&si.push(Te[nn]);const Fi=(hi+1)%2;(hi===0?Le<=De:Me<=Yt)&&(_t.push(Wi),_t.push(nn-1),_t.push(Fi)),(hi===0?Pe>=De:yt>=Yt)&&(_t.push(nn+1),_t.push(kn),_t.push(Fi))}return si}(this.ids,this.coords,W,X,le,me,this.nodeSize)}within(W,X,le){return function(me,Te,xe,Le,Me,Pe){const yt=[0,me.length-1,0],st=[],_t=Me*Me;for(;yt.length;){const si=yt.pop(),De=yt.pop(),Yt=yt.pop();if(De-Yt<=Pe){for(let Fi=Yt;Fi<=De;Fi++)ht(Te[2*Fi],Te[2*Fi+1],xe,Le)<=_t&&st.push(me[Fi]);continue}const hi=Math.floor((Yt+De)/2),kn=Te[2*hi],Wi=Te[2*hi+1];ht(kn,Wi,xe,Le)<=_t&&st.push(me[hi]);const nn=(si+1)%2;(si===0?xe-Me<=kn:Le-Me<=Wi)&&(yt.push(Yt),yt.push(hi-1),yt.push(nn)),(si===0?xe+Me>=kn:Le+Me>=Wi)&&(yt.push(hi+1),yt.push(De),yt.push(nn))}return st}(this.ids,this.coords,W,X,le,this.nodeSize)}}const Qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ce=>ce},gt=Math.fround||(zi=new Float32Array(1),ce=>(zi[0]=+ce,zi[0]));var zi;class ln{constructor(W){this.options=rn(Object.create(Qt),W),this.trees=new Array(this.options.maxZoom+1)}load(W){const{log:X,minZoom:le,maxZoom:me,nodeSize:Te}=this.options;X&&console.time("total time");const xe=`prepare ${W.length} points`;X&&console.time(xe),this.points=W;let Le=[];for(let Me=0;Me<W.length;Me++)W[Me].geometry&&Le.push(Zn(W[Me],Me));this.trees[me+1]=new Ji(Le,Jn,Ln,Te,Float32Array),X&&console.timeEnd(xe);for(let Me=me;Me>=le;Me--){const Pe=+Date.now();Le=this._cluster(Le,Me),this.trees[Me]=new Ji(Le,Jn,Ln,Te,Float32Array),X&&console.log("z%d: %d clusters in %dms",Me,Le.length,+Date.now()-Pe)}return X&&console.timeEnd("total time"),this}getClusters(W,X){let le=((W[0]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,W[1]));let Te=W[2]===180?180:((W[2]+180)%360+360)%360-180;const xe=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)le=-180,Te=180;else if(le>Te){const yt=this.getClusters([le,me,180,xe],X),st=this.getClusters([-180,me,Te,xe],X);return yt.concat(st)}const Le=this.trees[this._limitZoom(X)],Me=Le.range(At(le),Bi(xe),At(Te),Bi(me)),Pe=[];for(const yt of Me){const st=Le.points[yt];Pe.push(st.numPoints?Nr(st):this.points[st.index])}return Pe}getChildren(W){const X=this._getOriginId(W),le=this._getOriginZoom(W),me="No cluster with the specified id.",Te=this.trees[le];if(!Te)throw new Error(me);const xe=Te.points[X];if(!xe)throw new Error(me);const Le=this.options.radius/(this.options.extent*Math.pow(2,le-1)),Me=Te.within(xe.x,xe.y,Le),Pe=[];for(const yt of Me){const st=Te.points[yt];st.parentId===W&&Pe.push(st.numPoints?Nr(st):this.points[st.index])}if(Pe.length===0)throw new Error(me);return Pe}getLeaves(W,X,le){const me=[];return this._appendLeaves(me,W,X=X||10,le=le||0,0),me}getTile(W,X,le){const me=this.trees[this._limitZoom(W)],Te=Math.pow(2,W),{extent:xe,radius:Le}=this.options,Me=Le/xe,Pe=(le-Me)/Te,yt=(le+1+Me)/Te,st={features:[]};return this._addTileFeatures(me.range((X-Me)/Te,Pe,(X+1+Me)/Te,yt),me.points,X,le,Te,st),X===0&&this._addTileFeatures(me.range(1-Me/Te,Pe,1,yt),me.points,Te,le,Te,st),X===Te-1&&this._addTileFeatures(me.range(0,Pe,Me/Te,yt),me.points,-1,le,Te,st),st.features.length?st:null}getClusterExpansionZoom(W){let X=this._getOriginZoom(W)-1;for(;X<=this.options.maxZoom;){const le=this.getChildren(W);if(X++,le.length!==1)break;W=le[0].properties.cluster_id}return X}_appendLeaves(W,X,le,me,Te){const xe=this.getChildren(X);for(const Le of xe){const Me=Le.properties;if(Me&&Me.cluster?Te+Me.point_count<=me?Te+=Me.point_count:Te=this._appendLeaves(W,Me.cluster_id,le,me,Te):Te<me?Te++:W.push(Le),W.length===le)break}return Te}_addTileFeatures(W,X,le,me,Te,xe){for(const Le of W){const Me=X[Le],Pe=Me.numPoints;let yt,st,_t;if(Pe)yt=Kr(Me),st=Me.x,_t=Me.y;else{const Yt=this.points[Me.index];yt=Yt.properties,st=At(Yt.geometry.coordinates[0]),_t=Bi(Yt.geometry.coordinates[1])}const si={type:1,geometry:[[Math.round(this.options.extent*(st*Te-le)),Math.round(this.options.extent*(_t*Te-me))]],tags:yt};let De;Pe?De=Me.id:this.options.generateId?De=Me.index:this.points[Me.index].id&&(De=this.points[Me.index].id),De!==void 0&&(si.id=De),xe.features.push(si)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(+W,this.options.maxZoom+1))}_cluster(W,X){const le=[],{radius:me,extent:Te,reduce:xe,minPoints:Le}=this.options,Me=me/(Te*Math.pow(2,X));for(let Pe=0;Pe<W.length;Pe++){const yt=W[Pe];if(yt.zoom<=X)continue;yt.zoom=X;const st=this.trees[X+1],_t=st.within(yt.x,yt.y,Me),si=yt.numPoints||1;let De=si;for(const Yt of _t){const hi=st.points[Yt];hi.zoom>X&&(De+=hi.numPoints||1)}if(De>si&&De>=Le){let Yt=yt.x*si,hi=yt.y*si,kn=xe&&si>1?this._map(yt,!0):null;const Wi=(Pe<<5)+(X+1)+this.points.length;for(const nn of _t){const Fi=st.points[nn];if(Fi.zoom<=X)continue;Fi.zoom=X;const Ii=Fi.numPoints||1;Yt+=Fi.x*Ii,hi+=Fi.y*Ii,Fi.parentId=Wi,xe&&(kn||(kn=this._map(yt,!0)),xe(kn,this._map(Fi)))}yt.parentId=Wi,le.push(Cn(Yt/De,hi/De,Wi,De,kn))}else if(le.push(yt),De>1)for(const Yt of _t){const hi=st.points[Yt];hi.zoom<=X||(hi.zoom=X,le.push(hi))}}return le}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,X){if(W.numPoints)return X?rn({},W.properties):W.properties;const le=this.points[W.index].properties,me=this.options.map(le);return X&&me===le?rn({},me):me}}function Cn(ce,W,X,le,me){return{x:gt(ce),y:gt(W),zoom:1/0,id:X,parentId:-1,numPoints:le,properties:me}}function Zn(ce,W){const[X,le]=ce.geometry.coordinates;return{x:gt(At(X)),y:gt(Bi(le)),zoom:1/0,index:W,parentId:-1}}function Nr(ce){return{type:"Feature",id:ce.id,properties:Kr(ce),geometry:{type:"Point",coordinates:[(W=ce.x,360*(W-.5)),Nn(ce.y)]}};var W}function Kr(ce){const W=ce.numPoints,X=W>=1e4?`${Math.round(W/1e3)}k`:W>=1e3?Math.round(W/100)/10+"k":W;return rn(rn({},ce.properties),{cluster:!0,cluster_id:ce.id,point_count:W,point_count_abbreviated:X})}function At(ce){return ce/360+.5}function Bi(ce){const W=Math.sin(ce*Math.PI/180),X=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return X<0?0:X>1?1:X}function Nn(ce){const W=(180-360*ce)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function rn(ce,W){for(const X in W)ce[X]=W[X];return ce}function Jn(ce){return ce.x}function Ln(ce){return ce.y}function zt(ce,W,X,le){for(var me,Te=le,xe=X-W>>1,Le=X-W,Me=ce[W],Pe=ce[W+1],yt=ce[X],st=ce[X+1],_t=W+3;_t<X;_t+=3){var si=Oi(ce[_t],ce[_t+1],Me,Pe,yt,st);if(si>Te)me=_t,Te=si;else if(si===Te){var De=Math.abs(_t-xe);De<Le&&(me=_t,Le=De)}}Te>le&&(me-W>3&&zt(ce,W,me,le),ce[me+2]=Te,X-me>3&&zt(ce,me,X,le))}function Oi(ce,W,X,le,me,Te){var xe=me-X,Le=Te-le;if(xe!==0||Le!==0){var Me=((ce-X)*xe+(W-le)*Le)/(xe*xe+Le*Le);Me>1?(X=me,le=Te):Me>0&&(X+=xe*Me,le+=Le*Me)}return(xe=ce-X)*xe+(Le=W-le)*Le}function Ze(ce,W,X,le){var me={id:ce===void 0?null:ce,type:W,geometry:X,tags:le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Te){var xe=Te.geometry,Le=Te.type;if(Le==="Point"||Le==="MultiPoint"||Le==="LineString")Bt(Te,xe);else if(Le==="Polygon"||Le==="MultiLineString")for(var Me=0;Me<xe.length;Me++)Bt(Te,xe[Me]);else if(Le==="MultiPolygon")for(Me=0;Me<xe.length;Me++)for(var Pe=0;Pe<xe[Me].length;Pe++)Bt(Te,xe[Me][Pe])}(me),me}function Bt(ce,W){for(var X=0;X<W.length;X+=3)ce.minX=Math.min(ce.minX,W[X]),ce.minY=Math.min(ce.minY,W[X+1]),ce.maxX=Math.max(ce.maxX,W[X]),ce.maxY=Math.max(ce.maxY,W[X+1])}function Ki(ce,W,X,le){if(W.geometry){var me=W.geometry.coordinates,Te=W.geometry.type,xe=Math.pow(X.tolerance/((1<<X.maxZoom)*X.extent),2),Le=[],Me=W.id;if(X.promoteId?Me=W.properties[X.promoteId]:X.generateId&&(Me=le||0),Te==="Point")Vn(me,Le);else if(Te==="MultiPoint")for(var Pe=0;Pe<me.length;Pe++)Vn(me[Pe],Le);else if(Te==="LineString")Wn(me,Le,xe,!1);else if(Te==="MultiLineString"){if(X.lineMetrics){for(Pe=0;Pe<me.length;Pe++)Wn(me[Pe],Le=[],xe,!1),ce.push(Ze(Me,"LineString",Le,W.properties));return}_o(me,Le,xe,!1)}else if(Te==="Polygon")_o(me,Le,xe,!0);else{if(Te!=="MultiPolygon"){if(Te==="GeometryCollection"){for(Pe=0;Pe<W.geometry.geometries.length;Pe++)Ki(ce,{id:Me,geometry:W.geometry.geometries[Pe],properties:W.properties},X,le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Pe=0;Pe<me.length;Pe++){var yt=[];_o(me[Pe],yt,xe,!0),Le.push(yt)}}ce.push(Ze(Me,Te,Le,W.properties))}}function Vn(ce,W){W.push(vo(ce[0])),W.push(aa(ce[1])),W.push(0)}function Wn(ce,W,X,le){for(var me,Te,xe=0,Le=0;Le<ce.length;Le++){var Me=vo(ce[Le][0]),Pe=aa(ce[Le][1]);W.push(Me),W.push(Pe),W.push(0),Le>0&&(xe+=le?(me*Pe-Me*Te)/2:Math.sqrt(Math.pow(Me-me,2)+Math.pow(Pe-Te,2))),me=Me,Te=Pe}var yt=W.length-3;W[2]=1,zt(W,0,yt,X),W[yt+2]=1,W.size=Math.abs(xe),W.start=0,W.end=W.size}function _o(ce,W,X,le){for(var me=0;me<ce.length;me++){var Te=[];Wn(ce[me],Te,X,le),W.push(Te)}}function vo(ce){return ce/360+.5}function aa(ce){var W=Math.sin(ce*Math.PI/180),X=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return X<0?0:X>1?1:X}function Ar(ce,W,X,le,me,Te,xe,Le){if(le/=W,Te>=(X/=W)&&xe<le)return ce;if(xe<X||Te>=le)return null;for(var Me=[],Pe=0;Pe<ce.length;Pe++){var yt=ce[Pe],st=yt.geometry,_t=yt.type,si=me===0?yt.minX:yt.minY,De=me===0?yt.maxX:yt.maxY;if(si>=X&&De<le)Me.push(yt);else if(!(De<X||si>=le)){var Yt=[];if(_t==="Point"||_t==="MultiPoint")yi(st,Yt,X,le,me);else if(_t==="LineString")On(st,Yt,X,le,me,!1,Le.lineMetrics);else if(_t==="MultiLineString")ro(st,Yt,X,le,me,!1);else if(_t==="Polygon")ro(st,Yt,X,le,me,!0);else if(_t==="MultiPolygon")for(var hi=0;hi<st.length;hi++){var kn=[];ro(st[hi],kn,X,le,me,!0),kn.length&&Yt.push(kn)}if(Yt.length){if(Le.lineMetrics&&_t==="LineString"){for(hi=0;hi<Yt.length;hi++)Me.push(Ze(yt.id,_t,Yt[hi],yt.tags));continue}_t!=="LineString"&&_t!=="MultiLineString"||(Yt.length===1?(_t="LineString",Yt=Yt[0]):_t="MultiLineString"),_t!=="Point"&&_t!=="MultiPoint"||(_t=Yt.length===3?"Point":"MultiPoint"),Me.push(Ze(yt.id,_t,Yt,yt.tags))}}}return Me.length?Me:null}function yi(ce,W,X,le,me){for(var Te=0;Te<ce.length;Te+=3){var xe=ce[Te+me];xe>=X&&xe<=le&&(W.push(ce[Te]),W.push(ce[Te+1]),W.push(ce[Te+2]))}}function On(ce,W,X,le,me,Te,xe){for(var Le,Me,Pe=xn(ce),yt=me===0?dn:sa,st=ce.start,_t=0;_t<ce.length-3;_t+=3){var si=ce[_t],De=ce[_t+1],Yt=ce[_t+2],hi=ce[_t+3],kn=ce[_t+4],Wi=me===0?si:De,nn=me===0?hi:kn,Fi=!1;xe&&(Le=Math.sqrt(Math.pow(si-hi,2)+Math.pow(De-kn,2))),Wi<X?nn>X&&(Me=yt(Pe,si,De,hi,kn,X),xe&&(Pe.start=st+Le*Me)):Wi>le?nn<le&&(Me=yt(Pe,si,De,hi,kn,le),xe&&(Pe.start=st+Le*Me)):co(Pe,si,De,Yt),nn<X&&Wi>=X&&(Me=yt(Pe,si,De,hi,kn,X),Fi=!0),nn>le&&Wi<=le&&(Me=yt(Pe,si,De,hi,kn,le),Fi=!0),!Te&&Fi&&(xe&&(Pe.end=st+Le*Me),W.push(Pe),Pe=xn(ce)),xe&&(st+=Le)}var Ii=ce.length-3;si=ce[Ii],De=ce[Ii+1],Yt=ce[Ii+2],(Wi=me===0?si:De)>=X&&Wi<=le&&co(Pe,si,De,Yt),Ii=Pe.length-3,Te&&Ii>=3&&(Pe[Ii]!==Pe[0]||Pe[Ii+1]!==Pe[1])&&co(Pe,Pe[0],Pe[1],Pe[2]),Pe.length&&W.push(Pe)}function xn(ce){var W=[];return W.size=ce.size,W.start=ce.start,W.end=ce.end,W}function ro(ce,W,X,le,me,Te){for(var xe=0;xe<ce.length;xe++)On(ce[xe],W,X,le,me,Te,!1)}function co(ce,W,X,le){ce.push(W),ce.push(X),ce.push(le)}function dn(ce,W,X,le,me,Te){var xe=(Te-W)/(le-W);return ce.push(Te),ce.push(X+(me-X)*xe),ce.push(1),xe}function sa(ce,W,X,le,me,Te){var xe=(Te-X)/(me-X);return ce.push(W+(le-W)*xe),ce.push(Te),ce.push(1),xe}function Io(ce,W){for(var X=[],le=0;le<ce.length;le++){var me,Te=ce[le],xe=Te.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")me=xr(Te.geometry,W);else if(xe==="MultiLineString"||xe==="Polygon"){me=[];for(var Le=0;Le<Te.geometry.length;Le++)me.push(xr(Te.geometry[Le],W))}else if(xe==="MultiPolygon")for(me=[],Le=0;Le<Te.geometry.length;Le++){for(var Me=[],Pe=0;Pe<Te.geometry[Le].length;Pe++)Me.push(xr(Te.geometry[Le][Pe],W));me.push(Me)}X.push(Ze(Te.id,xe,me,Te.tags))}return X}function xr(ce,W){var X=[];X.size=ce.size,ce.start!==void 0&&(X.start=ce.start,X.end=ce.end);for(var le=0;le<ce.length;le+=3)X.push(ce[le]+W,ce[le+1],ce[le+2]);return X}function ne(ce,W){if(ce.transformed)return ce;var X,le,me,Te=1<<ce.z,xe=ce.x,Le=ce.y;for(X=0;X<ce.features.length;X++){var Me=ce.features[X],Pe=Me.geometry,yt=Me.type;if(Me.geometry=[],yt===1)for(le=0;le<Pe.length;le+=2)Me.geometry.push(ue(Pe[le],Pe[le+1],W,Te,xe,Le));else for(le=0;le<Pe.length;le++){var st=[];for(me=0;me<Pe[le].length;me+=2)st.push(ue(Pe[le][me],Pe[le][me+1],W,Te,xe,Le));Me.geometry.push(st)}}return ce.transformed=!0,ce}function ue(ce,W,X,le,me,Te){return[Math.round(X*(ce*le-me)),Math.round(X*(W*le-Te))]}function pe(ce,W,X,le,me){for(var Te=W===me.maxZoom?0:me.tolerance/((1<<W)*me.extent),xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:X,y:le,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Le=0;Le<ce.length;Le++){xe.numFeatures++,Se(xe,ce[Le],Te,me);var Me=ce[Le].minX,Pe=ce[Le].minY,yt=ce[Le].maxX,st=ce[Le].maxY;Me<xe.minX&&(xe.minX=Me),Pe<xe.minY&&(xe.minY=Pe),yt>xe.maxX&&(xe.maxX=yt),st>xe.maxY&&(xe.maxY=st)}return xe}function Se(ce,W,X,le){var me=W.geometry,Te=W.type,xe=[];if(Te==="Point"||Te==="MultiPoint")for(var Le=0;Le<me.length;Le+=3)xe.push(me[Le]),xe.push(me[Le+1]),ce.numPoints++,ce.numSimplified++;else if(Te==="LineString")ze(xe,me,ce,X,!1,!1);else if(Te==="MultiLineString"||Te==="Polygon")for(Le=0;Le<me.length;Le++)ze(xe,me[Le],ce,X,Te==="Polygon",Le===0);else if(Te==="MultiPolygon")for(var Me=0;Me<me.length;Me++){var Pe=me[Me];for(Le=0;Le<Pe.length;Le++)ze(xe,Pe[Le],ce,X,!0,Le===0)}if(xe.length){var yt=W.tags||null;if(Te==="LineString"&&le.lineMetrics){for(var st in yt={},W.tags)yt[st]=W.tags[st];yt.mapbox_clip_start=me.start/me.size,yt.mapbox_clip_end=me.end/me.size}var _t={geometry:xe,type:Te==="Polygon"||Te==="MultiPolygon"?3:Te==="LineString"||Te==="MultiLineString"?2:1,tags:yt};W.id!==null&&(_t.id=W.id),ce.features.push(_t)}}function ze(ce,W,X,le,me,Te){var xe=le*le;if(le>0&&W.size<(me?xe:le))X.numPoints+=W.length/3;else{for(var Le=[],Me=0;Me<W.length;Me+=3)(le===0||W[Me+2]>xe)&&(X.numSimplified++,Le.push(W[Me]),Le.push(W[Me+1])),X.numPoints++;me&&function(Pe,yt){for(var st=0,_t=0,si=Pe.length,De=si-2;_t<si;De=_t,_t+=2)st+=(Pe[_t]-Pe[De])*(Pe[_t+1]+Pe[De+1]);if(st>0===yt)for(_t=0,si=Pe.length;_t<si/2;_t+=2){var Yt=Pe[_t],hi=Pe[_t+1];Pe[_t]=Pe[si-2-_t],Pe[_t+1]=Pe[si-1-_t],Pe[si-2-_t]=Yt,Pe[si-1-_t]=hi}}(Le,Te),ce.push(Le)}}function $e(ce,W){var X=(W=this.options=function(me,Te){for(var xe in Te)me[xe]=Te[xe];return me}(Object.create(this.options),W)).debug;if(X&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var le=function(me,Te){var xe=[];if(me.type==="FeatureCollection")for(var Le=0;Le<me.features.length;Le++)Ki(xe,me.features[Le],Te,Le);else Ki(xe,me.type==="Feature"?me:{geometry:me},Te);return xe}(ce,W);this.tiles={},this.tileCoords=[],X&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),le=function(me,Te){var xe=Te.buffer/Te.extent,Le=me,Me=Ar(me,1,-1-xe,xe,0,-1,2,Te),Pe=Ar(me,1,1-xe,2+xe,0,-1,2,Te);return(Me||Pe)&&(Le=Ar(me,1,-xe,1+xe,0,-1,2,Te)||[],Me&&(Le=Io(Me,1).concat(Le)),Pe&&(Le=Le.concat(Io(Pe,-1)))),Le}(le,W),le.length&&this.splitTile(le,0,0,0),X&&(le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function tt(ce,W,X){return 32*((1<<ce)*X+W)+ce}function Ie(ce,W){const X=ce.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const le=this._geoJSONIndex.getTile(X.z,X.x,X.y);if(!le)return W(null,null);const me=new He(le.features);let Te=Xi(me);Te.byteOffset===0&&Te.byteLength===Te.buffer.byteLength||(Te=new Uint8Array(Te)),W(null,{vectorTile:me,rawData:Te.buffer})}$e.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$e.prototype.splitTile=function(ce,W,X,le,me,Te,xe){for(var Le=[ce,W,X,le],Me=this.options,Pe=Me.debug;Le.length;){le=Le.pop(),X=Le.pop(),W=Le.pop(),ce=Le.pop();var yt=1<<W,st=tt(W,X,le),_t=this.tiles[st];if(!_t&&(Pe>1&&console.time("creation"),_t=this.tiles[st]=pe(ce,W,X,le,Me),this.tileCoords.push({z:W,x:X,y:le}),Pe)){Pe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,X,le,_t.numFeatures,_t.numPoints,_t.numSimplified),console.timeEnd("creation"));var si="z"+W;this.stats[si]=(this.stats[si]||0)+1,this.total++}if(_t.source=ce,me){if(W===Me.maxZoom||W===me)continue;var De=1<<me-W;if(X!==Math.floor(Te/De)||le!==Math.floor(xe/De))continue}else if(W===Me.indexMaxZoom||_t.numPoints<=Me.indexMaxPoints)continue;if(_t.source=null,ce.length!==0){Pe>1&&console.time("clipping");var Yt,hi,kn,Wi,nn,Fi,Ii=.5*Me.buffer/Me.extent,hn=.5-Ii,cr=.5+Ii,ho=1+Ii;Yt=hi=kn=Wi=null,nn=Ar(ce,yt,X-Ii,X+cr,0,_t.minX,_t.maxX,Me),Fi=Ar(ce,yt,X+hn,X+ho,0,_t.minX,_t.maxX,Me),ce=null,nn&&(Yt=Ar(nn,yt,le-Ii,le+cr,1,_t.minY,_t.maxY,Me),hi=Ar(nn,yt,le+hn,le+ho,1,_t.minY,_t.maxY,Me),nn=null),Fi&&(kn=Ar(Fi,yt,le-Ii,le+cr,1,_t.minY,_t.maxY,Me),Wi=Ar(Fi,yt,le+hn,le+ho,1,_t.minY,_t.maxY,Me),Fi=null),Pe>1&&console.timeEnd("clipping"),Le.push(Yt||[],W+1,2*X,2*le),Le.push(hi||[],W+1,2*X,2*le+1),Le.push(kn||[],W+1,2*X+1,2*le),Le.push(Wi||[],W+1,2*X+1,2*le+1)}}},$e.prototype.getTile=function(ce,W,X){var le=this.options,me=le.extent,Te=le.debug;if(ce<0||ce>24)return null;var xe=1<<ce,Le=tt(ce,W=(W%xe+xe)%xe,X);if(this.tiles[Le])return ne(this.tiles[Le],me);Te>1&&console.log("drilling down to z%d-%d-%d",ce,W,X);for(var Me,Pe=ce,yt=W,st=X;!Me&&Pe>0;)Pe--,yt=Math.floor(yt/2),st=Math.floor(st/2),Me=this.tiles[tt(Pe,yt,st)];return Me&&Me.source?(Te>1&&console.log("found parent tile z%d-%d-%d",Pe,yt,st),Te>1&&console.time("drilling down"),this.splitTile(Me.source,Pe,yt,st,ce,W,X),Te>1&&console.timeEnd("drilling down"),this.tiles[Le]?ne(this.tiles[Le],me):null):null};class Ne extends he{constructor(W,X,le,me){super(W,X,le,Ie),me&&(this.loadGeoJSON=me)}loadData(W,X){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=X,this._pendingLoadDataParams=W,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const W=this._pendingCallback,X=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const le=!!(X&&X.request&&X.request.collectResourceTiming)&&new h.RequestPerformance(X.request);this.loadGeoJSON(X,(me,Te)=>{if(me||!Te)return W(me);if(typeof Te!="object")return W(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`));{ve(Te,!0);try{if(X.filter){const Le=h.createExpression(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Le.result==="error")throw new Error(Le.value.map(Pe=>`${Pe.key}: ${Pe.message}`).join(", "));const Me=Te.features.filter(Pe=>Le.value.evaluate({zoom:0},Pe));Te={type:"FeatureCollection",features:Me}}this._geoJSONIndex=X.cluster?new ln(function({superclusterOptions:Le,clusterProperties:Me}){if(!Me||!Le)return Le;const Pe={},yt={},st={accumulated:null,zoom:0},_t={properties:null},si=Object.keys(Me);for(const De of si){const[Yt,hi]=Me[De],kn=h.createExpression(hi),Wi=h.createExpression(typeof Yt=="string"?[Yt,["accumulated"],["get",De]]:Yt);Pe[De]=kn.value,yt[De]=Wi.value}return Le.map=De=>{_t.properties=De;const Yt={};for(const hi of si)Yt[hi]=Pe[hi].evaluate(st,_t);return Yt},Le.reduce=(De,Yt)=>{_t.properties=Yt;for(const hi of si)st.accumulated=De[hi],De[hi]=yt[hi].evaluate(st,_t)},Le}(X)).load(Te.features):function(Le,Me){return new $e(Le,Me)}(Te,X.geojsonVtOptions)}catch(Le){return W(Le)}this.loaded={};const xe={};if(le){const Le=le.finish();Le&&(xe.resourceTiming={},xe.resourceTiming[X.source]=JSON.parse(JSON.stringify(Le)))}W(null,xe)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(W,X){const le=this.loaded;return le&&le[W.uid]?super.reloadTile(W,X):this.loadTile(W,X)}loadGeoJSON(W,X){if(W.request)h.getJSON(W.request,X);else{if(typeof W.data!="string")return X(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));try{return X(null,JSON.parse(W.data))}catch{return X(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`))}}}removeSource(W,X){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),X()}getClusterExpansionZoom(W,X){try{X(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(le){X(le)}}getClusterChildren(W,X){try{X(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(le){X(le)}}getClusterLeaves(W,X){try{X(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(le){X(le)}}}class mt{constructor(W){this.self=W,this.actor=new h.Actor(W,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:he,geojson:Ne},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(X,le)=>{if(this.workerSourceTypes[X])throw new Error(`Worker source with name "${X}" already registered.`);this.workerSourceTypes[X]=le},this.self.registerRTLTextPlugin=X=>{if(h.plugin.isParsed())throw new Error("RTL text plugin already registered.");h.plugin.applyArabicShaping=X.applyArabicShaping,h.plugin.processBidirectionalText=X.processBidirectionalText,h.plugin.processStyledBidirectionalText=X.processStyledBidirectionalText}}setReferrer(W,X){this.referrer=X}setImages(W,X,le){this.availableImages[W]=X;for(const me in this.workerSources[W]){const Te=this.workerSources[W][me];for(const xe in Te)Te[xe].availableImages=X}le()}setLayers(W,X,le){this.getLayerIndex(W).replace(X),le()}updateLayers(W,X,le){this.getLayerIndex(W).update(X.layers,X.removedIds),le()}loadTile(W,X,le){this.getWorkerSource(W,X.type,X.source).loadTile(X,le)}loadDEMTile(W,X,le){this.getDEMWorkerSource(W,X.source).loadTile(X,le)}reloadTile(W,X,le){this.getWorkerSource(W,X.type,X.source).reloadTile(X,le)}abortTile(W,X,le){this.getWorkerSource(W,X.type,X.source).abortTile(X,le)}removeTile(W,X,le){this.getWorkerSource(W,X.type,X.source).removeTile(X,le)}removeDEMTile(W,X){this.getDEMWorkerSource(W,X.source).removeTile(X)}removeSource(W,X,le){if(!this.workerSources[W]||!this.workerSources[W][X.type]||!this.workerSources[W][X.type][X.source])return;const me=this.workerSources[W][X.type][X.source];delete this.workerSources[W][X.type][X.source],me.removeSource!==void 0?me.removeSource(X,le):le()}loadWorkerSource(W,X,le){try{this.self.importScripts(X.url),le()}catch(me){le(me.toString())}}syncRTLPluginState(W,X,le){try{h.plugin.setState(X);const me=h.plugin.getPluginURL();if(h.plugin.isLoaded()&&!h.plugin.isParsed()&&me!=null){this.self.importScripts(me);const Te=h.plugin.isParsed();le(Te?void 0:new Error(`RTL Text Plugin failed to import scripts from ${me}`),Te)}}catch(me){le(me.toString())}}getAvailableImages(W){let X=this.availableImages[W];return X||(X=[]),X}getLayerIndex(W){let X=this.layerIndexes[W];return X||(X=this.layerIndexes[W]=new D),X}getWorkerSource(W,X,le){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][X]||(this.workerSources[W][X]={}),!this.workerSources[W][X][le]){const me={send:(Te,xe,Le)=>{this.actor.send(Te,xe,Le,W)}};this.workerSources[W][X][le]=new this.workerSourceTypes[X](me,this.getLayerIndex(W),this.getAvailableImages(W))}return this.workerSources[W][X][le]}getDEMWorkerSource(W,X){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][X]||(this.demWorkerSources[W][X]=new re),this.demWorkerSources[W][X]}enforceCacheSizeLimit(W,X){h.enforceCacheSizeLimit(X)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new mt(self)),mt}),v(["./shared"],function(h){var S=P;function P(C){return!function(l){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var A,k,B=new Blob([""],{type:"text/javascript"}),j=URL.createObjectURL(B);try{k=new Worker(j),A=!0}catch{A=!1}return k&&k.terminate(),URL.revokeObjectURL(j),A}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var A=document.createElement("canvas");A.width=A.height=1;var k=A.getContext("2d");if(!k)return!1;var B=k.getImageData(0,0,1,1);return B&&B.width===A.width}()?(D[_=l&&l.failIfMajorPerformanceCaveat]===void 0&&(D[_]=function(A){var k,B=function(j){var Z=document.createElement("canvas"),J=Object.create(P.webGLContextAttributes);return J.failIfMajorPerformanceCaveat=j,Z.getContext("webgl",J)||Z.getContext("experimental-webgl",J)}(A);if(!B)return!1;try{k=B.createShader(B.VERTEX_SHADER)}catch{return!1}return!(!k||B.isContextLost())&&(B.shaderSource(k,"void main() {}"),B.compileShader(k),B.getShaderParameter(k,B.COMPILE_STATUS)===!0)}(_)),D[_]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var _}(C)}var D={};function R(C,l){if(Array.isArray(C)){if(!Array.isArray(l)||C.length!==l.length)return!1;for(let _=0;_<C.length;_++)if(!R(C[_],l[_]))return!1;return!0}if(typeof C=="object"&&C!==null&&l!==null){if(typeof l!="object"||Object.keys(C).length!==Object.keys(l).length)return!1;for(const _ in C)if(!R(C[_],l[_]))return!1;return!0}return C===l}P.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class O{static testProp(l){if(!O.docStyle)return l[0];for(let _=0;_<l.length;_++)if(l[_]in O.docStyle)return l[_];return l[0]}static create(l,_,A){const k=window.document.createElement(l);return _!==void 0&&(k.className=_),A&&A.appendChild(k),k}static createNS(l,_){return window.document.createElementNS(l,_)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(l,_){l.style[O.transformProp]=_}static addEventListener(l,_,A,k={}){l.addEventListener(_,A,"passive"in k?k:k.capture)}static removeEventListener(l,_,A,k={}){l.removeEventListener(_,A,"passive"in k?k:k.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static mousePos(l,_){const A=l.getBoundingClientRect();return new h.pointGeometry(_.clientX-A.left-l.clientLeft,_.clientY-A.top-l.clientTop)}static touchPos(l,_){const A=l.getBoundingClientRect(),k=[];for(let B=0;B<_.length;B++)k.push(new h.pointGeometry(_[B].clientX-A.left-l.clientLeft,_[B].clientY-A.top-l.clientTop));return k}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}O.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);class Y{constructor(l){this._transformRequestFn=l}transformRequest(l,_){return this._transformRequestFn&&this._transformRequestFn(l,_)||{url:l}}normalizeSpriteURL(l,_,A){const k=function(B){const j=B.match(ee);if(!j)throw new Error(`Unable to parse URL "${B}"`);return{protocol:j[1],authority:j[2],path:j[3]||"/",params:j[4]?j[4].split("&"):[]}}(l);return k.path+=`${_}${A}`,function(B){const j=B.params.length?`?${B.params.join("&")}`:"";return`${B.protocol}://${B.authority}${B.path}${j}`}(k)}setTransformRequest(l){this._transformRequestFn=l}}const ee=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function he(C){var l=new h.ARRAY_TYPE(3);return l[0]=C[0],l[1]=C[1],l[2]=C[2],l}var re,ve=function(C,l,_){return C[0]=l[0]-_[0],C[1]=l[1]-_[1],C[2]=l[2]-_[2],C};re=new h.ARRAY_TYPE(3),h.ARRAY_TYPE!=Float32Array&&(re[0]=0,re[1]=0,re[2]=0);var se=function(C){var l=C[0],_=C[1];return l*l+_*_};(function(){var C=new h.ARRAY_TYPE(2);h.ARRAY_TYPE!=Float32Array&&(C[0]=0,C[1]=0)})();class we{constructor(l,_,A,k){this.context=l,this.format=A,this.texture=l.gl.createTexture(),this.update(_,k)}update(l,_,A){const{width:k,height:B}=l,j=!(this.size&&this.size[0]===k&&this.size[1]===B||A),{context:Z}=this,{gl:J}=Z;if(this.useMipmap=Boolean(_&&_.useMipmap),J.bindTexture(J.TEXTURE_2D,this.texture),Z.pixelStoreUnpackFlipY.set(!1),Z.pixelStoreUnpack.set(1),Z.pixelStoreUnpackPremultiplyAlpha.set(this.format===J.RGBA&&(!_||_.premultiply!==!1)),j)this.size=[k,B],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||h.isImageBitmap(l)?J.texImage2D(J.TEXTURE_2D,0,this.format,this.format,J.UNSIGNED_BYTE,l):J.texImage2D(J.TEXTURE_2D,0,this.format,k,B,0,this.format,J.UNSIGNED_BYTE,l.data);else{const{x:ie,y:ae}=A||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||h.isImageBitmap(l)?J.texSubImage2D(J.TEXTURE_2D,0,ie,ae,J.RGBA,J.UNSIGNED_BYTE,l):J.texSubImage2D(J.TEXTURE_2D,0,ie,ae,k,B,J.RGBA,J.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&J.generateMipmap(J.TEXTURE_2D)}bind(l,_,A){const{context:k}=this,{gl:B}=k;B.bindTexture(B.TEXTURE_2D,this.texture),A!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(A=B.LINEAR),l!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,l),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,A||l),this.filter=l),_!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,_),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,_),this.wrap=_)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function Ge(C){const{userImage:l}=C;return!!(l&&l.render&&l.render())&&(C.data.replace(new Uint8Array(l.data.buffer)),!0)}class Ue extends h.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:_,callback:A}of this.requestors)this._notify(_,A);this.requestors=[]}}getImage(l){return this.images[l]}addImage(l,_){this._validate(l,_)&&(this.images[l]=_)}_validate(l,_){let A=!0;return this._validateStretch(_.stretchX,_.data&&_.data.width)||(this.fire(new h.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),A=!1),this._validateStretch(_.stretchY,_.data&&_.data.height)||(this.fire(new h.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),A=!1),this._validateContent(_.content,_)||(this.fire(new h.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),A=!1),A}_validateStretch(l,_){if(!l)return!0;let A=0;for(const k of l){if(k[0]<A||k[1]<k[0]||_<k[1])return!1;A=k[1]}return!0}_validateContent(l,_){return!(l&&(l.length!==4||l[0]<0||_.data.width<l[0]||l[1]<0||_.data.height<l[1]||l[2]<0||_.data.width<l[2]||l[3]<0||_.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,_){_.version=this.images[l].version+1,this.images[l]=_,this.updatedImages[l]=!0}removeImage(l){const _=this.images[l];delete this.images[l],delete this.patterns[l],_.userImage&&_.userImage.onRemove&&_.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,_){let A=!0;if(!this.isLoaded())for(const k of l)this.images[k]||(A=!1);this.isLoaded()||A?this._notify(l,_):this.requestors.push({ids:l,callback:_})}_notify(l,_){const A={};for(const k of l){this.images[k]||this.fire(new h.Event("styleimagemissing",{id:k}));const B=this.images[k];B?A[k]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:Boolean(B.userImage&&B.userImage.render)}:h.warnOnce(`Image "${k}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}_(null,A)}getPixelSize(){const{width:l,height:_}=this.atlasImage;return{width:l,height:_}}getPattern(l){const _=this.patterns[l],A=this.getImage(l);if(!A)return null;if(_&&_.position.version===A.version)return _.position;if(_)_.position.version=A.version;else{const k={w:A.data.width+2,h:A.data.height+2,x:0,y:0},B=new h.ImagePosition(k,A);this.patterns[l]={bin:k,position:B}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const _=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new we(l,this.atlasImage,_.RGBA),this.atlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const B in this.patterns)l.push(this.patterns[B].bin);const{w:_,h:A}=h.potpack(l),k=this.atlasImage;k.resize({width:_||1,height:A||1});for(const B in this.patterns){const{bin:j}=this.patterns[B],Z=j.x+1,J=j.y+1,ie=this.images[B].data,ae=ie.width,ge=ie.height;h.RGBAImage.copy(ie,k,{x:0,y:0},{x:Z,y:J},{width:ae,height:ge}),h.RGBAImage.copy(ie,k,{x:0,y:ge-1},{x:Z,y:J-1},{width:ae,height:1}),h.RGBAImage.copy(ie,k,{x:0,y:0},{x:Z,y:J+ge},{width:ae,height:1}),h.RGBAImage.copy(ie,k,{x:ae-1,y:0},{x:Z-1,y:J},{width:1,height:ge}),h.RGBAImage.copy(ie,k,{x:0,y:0},{x:Z+ae,y:J},{width:1,height:ge})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const _ of l){if(this.callbackDispatchedThisFrame[_])continue;this.callbackDispatchedThisFrame[_]=!0;const A=this.images[_];Ge(A)&&this.updateImage(_,A)}}}const He=1e20;function fe(C,l,_,A,k,B,j,Z,J){for(let ie=l;ie<l+A;ie++)ut(C,_*B+ie,B,k,j,Z,J);for(let ie=_;ie<_+k;ie++)ut(C,ie*B+l,1,A,j,Z,J)}function ut(C,l,_,A,k,B,j){B[0]=0,j[0]=-He,j[1]=He,k[0]=C[l];for(let Z=1,J=0,ie=0;Z<A;Z++){k[Z]=C[l+Z*_];const ae=Z*Z;do{const ge=B[J];ie=(k[Z]-k[ge]+ae-ge*ge)/(Z-ge)/2}while(ie<=j[J]&&--J>-1);J++,B[J]=Z,j[J]=ie,j[J+1]=He}for(let Z=0,J=0;Z<A;Z++){for(;j[J+1]<Z;)J++;const ie=B[J],ae=Z-ie;C[l+Z*_]=k[ie]+ae*ae}}class at{constructor(l,_){this.requestManager=l,this.localIdeographFontFamily=_,this.entries={}}setURL(l){this.url=l}getGlyphs(l,_){const A=[];for(const k in l)for(const B of l[k])A.push({stack:k,id:B});h.asyncAll(A,({stack:k,id:B},j)=>{let Z=this.entries[k];Z||(Z=this.entries[k]={glyphs:{},requests:{},ranges:{}});let J=Z.glyphs[B];if(J!==void 0)return void j(null,{stack:k,id:B,glyph:J});if(J=this._tinySDF(Z,k,B),J)return Z.glyphs[B]=J,void j(null,{stack:k,id:B,glyph:J});const ie=Math.floor(B/256);if(256*ie>65535)return void j(new Error("glyphs > 65535 not supported"));if(Z.ranges[ie])return void j(null,{stack:k,id:B,glyph:J});let ae=Z.requests[ie];ae||(ae=Z.requests[ie]=[],at.loadGlyphRange(k,ie,this.url,this.requestManager,(ge,Ae)=>{if(Ae){for(const Ke in Ae)this._doesCharSupportLocalGlyph(+Ke)||(Z.glyphs[+Ke]=Ae[+Ke]);Z.ranges[ie]=!0}for(const Ke of ae)Ke(ge,Ae);delete Z.requests[ie]})),ae.push((ge,Ae)=>{ge?j(ge):Ae&&j(null,{stack:k,id:B,glyph:Ae[B]||null})})},(k,B)=>{if(k)_(k);else if(B){const j={};for(const{stack:Z,id:J,glyph:ie}of B)(j[Z]||(j[Z]={}))[J]=ie&&{id:ie.id,bitmap:ie.bitmap.clone(),metrics:ie.metrics};_(null,j)}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(h.unicodeBlockLookup["CJK Unified Ideographs"](l)||h.unicodeBlockLookup["Hangul Syllables"](l)||h.unicodeBlockLookup.Hiragana(l)||h.unicodeBlockLookup.Katakana(l))}_tinySDF(l,_,A){const k=this.localIdeographFontFamily;if(!k||!this._doesCharSupportLocalGlyph(A))return;let B=l.tinySDF;if(!B){let Z="400";/bold/i.test(_)?Z="900":/medium/i.test(_)?Z="500":/light/i.test(_)&&(Z="200"),B=l.tinySDF=new at.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:k,fontWeight:Z})}const j=B.draw(String.fromCharCode(A));return{id:A,bitmap:new h.AlphaImage({width:j.width||30,height:j.height||30},j.data),metrics:{width:j.glyphWidth||24,height:j.glyphHeight||24,left:j.glyphLeft||0,top:j.glyphTop-27||-8,advance:j.glyphAdvance||24}}}}at.loadGlyphRange=function(C,l,_,A,k){const B=256*l,j=B+255,Z=A.transformRequest(_.replace("{fontstack}",C).replace("{range}",`${B}-${j}`),h.ResourceType.Glyphs);h.getArrayBuffer(Z,(J,ie)=>{if(J)k(J);else if(ie){const ae={};for(const ge of h.parseGlyphPBF(ie))ae[ge.id]=ge;k(null,ae)}})},at.TinySDF=class{constructor({fontSize:C=24,buffer:l=3,radius:_=8,cutoff:A=.25,fontFamily:k="sans-serif",fontWeight:B="normal",fontStyle:j="normal"}={}){this.buffer=l,this.cutoff=A,this.radius=_;const Z=this.size=C+4*l,J=this._createCanvas(Z),ie=this.ctx=J.getContext("2d",{willReadFrequently:!0});ie.font=`${j} ${B} ${C}px ${k}`,ie.textBaseline="alphabetic",ie.textAlign="left",ie.fillStyle="black",this.gridOuter=new Float64Array(Z*Z),this.gridInner=new Float64Array(Z*Z),this.f=new Float64Array(Z),this.z=new Float64Array(Z+1),this.v=new Uint16Array(Z)}_createCanvas(C){const l=document.createElement("canvas");return l.width=l.height=C,l}draw(C){const{width:l,actualBoundingBoxAscent:_,actualBoundingBoxDescent:A,actualBoundingBoxLeft:k,actualBoundingBoxRight:B}=this.ctx.measureText(C),j=Math.ceil(_),Z=Math.min(this.size-this.buffer,Math.ceil(B-k)),J=Math.min(this.size-this.buffer,j+Math.ceil(A)),ie=Z+2*this.buffer,ae=J+2*this.buffer,ge=Math.max(ie*ae,0),Ae=new Uint8ClampedArray(ge),Ke={data:Ae,width:ie,height:ae,glyphWidth:Z,glyphHeight:J,glyphTop:j,glyphLeft:0,glyphAdvance:l};if(Z===0||J===0)return Ke;const{ctx:ke,buffer:Xe,gridInner:ct,gridOuter:lt}=this;ke.clearRect(Xe,Xe,Z,J),ke.fillText(C,Xe,Xe+j);const bt=ke.getImageData(Xe,Xe,Z,J);lt.fill(He,0,ge),ct.fill(0,0,ge);for(let pt=0;pt<J;pt++)for(let jt=0;jt<Z;jt++){const Rt=bt.data[4*(pt*Z+jt)+3]/255;if(Rt===0)continue;const Ft=(pt+Xe)*ie+jt+Xe;if(Rt===1)lt[Ft]=0,ct[Ft]=He;else{const ti=.5-Rt;lt[Ft]=ti>0?ti*ti:0,ct[Ft]=ti<0?ti*ti:0}}fe(lt,0,0,ie,ae,ie,this.f,this.v,this.z),fe(ct,Xe,Xe,Z,J,ie,this.f,this.v,this.z);for(let pt=0;pt<ge;pt++){const jt=Math.sqrt(lt[pt])-Math.sqrt(ct[pt]);Ae[pt]=Math.round(255-255*(jt/this.radius+this.cutoff))}return Ke}};const je=new h.Properties({anchor:new h.DataConstantProperty(h.spec.light.anchor),position:new class{constructor(){this.specification=h.spec.light.position}possiblyEvaluate(C,l){return h.sphericalToCartesian(C.expression.evaluate(l))}interpolate(C,l,_){return{x:h.number(C.x,l.x,_),y:h.number(C.y,l.y,_),z:h.number(C.z,l.z,_)}}},color:new h.DataConstantProperty(h.spec.light.color),intensity:new h.DataConstantProperty(h.spec.light.intensity)}),Fe="-transition";class Dt extends h.Evented{constructor(l){super(),this._transitionable=new h.Transitionable(je),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,_={}){if(!this._validate(h.validateLight,l,_))for(const A in l){const k=l[A];A.endsWith(Fe)?this._transitionable.setTransition(A.slice(0,-Fe.length),k):this._transitionable.setValue(A,k)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,_,A){return(!A||A.validate!==!1)&&h.emitValidationErrors(this,l.call(h.validateStyle,h.extend({value:_,style:{glyphs:!0,sprite:!0},styleSpec:h.spec})))}}class qe{constructor(l,_){this.width=l,this.height=_,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,_){const A=l.join(",")+String(_);return this.dashEntry[A]||(this.dashEntry[A]=this.addDash(l,_)),this.dashEntry[A]}getDashRanges(l,_,A){const k=[];let B=l.length%2==1?-l[l.length-1]*A:0,j=l[0]*A,Z=!0;k.push({left:B,right:j,isDash:Z,zeroLength:l[0]===0});let J=l[0];for(let ie=1;ie<l.length;ie++){Z=!Z;const ae=l[ie];B=J*A,J+=ae,j=J*A,k.push({left:B,right:j,isDash:Z,zeroLength:ae===0})}return k}addRoundDash(l,_,A){const k=_/2;for(let B=-A;B<=A;B++){const j=this.width*(this.nextRow+A+B);let Z=0,J=l[Z];for(let ie=0;ie<this.width;ie++){ie/J.right>1&&(J=l[++Z]);const ae=Math.abs(ie-J.left),ge=Math.abs(ie-J.right),Ae=Math.min(ae,ge);let Ke;const ke=B/A*(k+1);if(J.isDash){const Xe=k-Math.abs(ke);Ke=Math.sqrt(Ae*Ae+Xe*Xe)}else Ke=k-Math.sqrt(Ae*Ae+ke*ke);this.data[j+ie]=Math.max(0,Math.min(255,Ke+128))}}}addRegularDash(l){for(let Z=l.length-1;Z>=0;--Z){const J=l[Z],ie=l[Z+1];J.zeroLength?l.splice(Z,1):ie&&ie.isDash===J.isDash&&(ie.left=J.left,l.splice(Z,1))}const _=l[0],A=l[l.length-1];_.isDash===A.isDash&&(_.left=A.left-this.width,A.right=_.right+this.width);const k=this.width*this.nextRow;let B=0,j=l[B];for(let Z=0;Z<this.width;Z++){Z/j.right>1&&(j=l[++B]);const J=Math.abs(Z-j.left),ie=Math.abs(Z-j.right),ae=Math.min(J,ie);this.data[k+Z]=Math.max(0,Math.min(255,(j.isDash?ae:-ae)+128))}}addDash(l,_){const A=_?7:0,k=2*A+1;if(this.nextRow+k>this.height)return h.warnOnce("LineAtlas out of space"),null;let B=0;for(let Z=0;Z<l.length;Z++)B+=l[Z];if(B!==0){const Z=this.width/B,J=this.getDashRanges(l,this.width,Z);_?this.addRoundDash(J,Z,A):this.addRegularDash(J)}const j={y:(this.nextRow+A+.5)/this.height,height:2*A/this.height,width:B};return this.nextRow+=k,this.dirty=!0,j}bind(l){const _=l.gl;this.texture?(_.bindTexture(_.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,_.texSubImage2D(_.TEXTURE_2D,0,0,0,this.width,this.height,_.ALPHA,_.UNSIGNED_BYTE,this.data))):(this.texture=_.createTexture(),_.bindTexture(_.TEXTURE_2D,this.texture),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.REPEAT),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.REPEAT),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texImage2D(_.TEXTURE_2D,0,_.ALPHA,this.width,this.height,0,_.ALPHA,_.UNSIGNED_BYTE,this.data))}}class Mt{constructor(l,_){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=h.uniqueId();const A=this.workerPool.acquire(this.id);for(let k=0;k<A.length;k++){const B=new Mt.Actor(A[k],_,this.id);B.name=`Worker ${k}`,this.actors.push(B)}}broadcast(l,_,A){h.asyncAll(this.actors,(k,B)=>{k.send(l,_,B)},A=A||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function li(C,l,_){const A=function(k,B){if(k)return _(k);if(B){const j=h.pick(h.extend(B,C),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(j.vectorLayers=B.vector_layers,j.vectorLayerIds=j.vectorLayers.map(Z=>Z.id)),_(null,j)}};return C.url?h.getJSON(l.transformRequest(C.url,h.ResourceType.Source),A):h.exported.frame(()=>A(null,C))}Mt.Actor=h.Actor;class Et{constructor(l,_,A){this.bounds=h.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=_||0,this.maxzoom=A||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const _=Math.pow(2,l.z),A=Math.floor(h.mercatorXfromLng(this.bounds.getWest())*_),k=Math.floor(h.mercatorYfromLat(this.bounds.getNorth())*_),B=Math.ceil(h.mercatorXfromLng(this.bounds.getEast())*_),j=Math.ceil(h.mercatorYfromLat(this.bounds.getSouth())*_);return l.x>=A&&l.x<B&&l.y>=k&&l.y<j}}class Gt extends h.Evented{constructor(l,_,A,k){if(super(),this.id=l,this.dispatcher=A,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.extend(this,h.pick(_,["url","scheme","tileSize","promoteId"])),this._options=h.extend({type:"vector"},_),this._collectResourceTiming=_.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(k)}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=li(this._options,this.map._requestManager,(l,_)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l?this.fire(new h.ErrorEvent(l)):_&&(h.extend(this,_),_.bounds&&(this.tileBounds=new Et(_.bounds,this.minzoom,this.maxzoom)),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}loadTile(l,_){const A=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k={request:this.map._requestManager.transformRequest(A,h.ResourceType.Tile),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function B(j,Z){return delete l.request,l.aborted?_(null):j&&j.status!==404?_(j):(Z&&Z.resourceTiming&&(l.resourceTiming=Z.resourceTiming),this.map._refreshExpiredTiles&&Z&&l.setExpiryData(Z),l.loadVectorData(Z,this.map.painter),h.cacheEntryPossiblyAdded(this.dispatcher),_(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}k.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired"?l.state==="loading"?l.reloadCallback=_:l.request=l.actor.send("reloadTile",k,B.bind(this)):(l.actor=this.dispatcher.getActor(),l.request=l.actor.send("loadTile",k,B.bind(this)))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id},void 0)}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Je extends h.Evented{constructor(l,_,A,k){super(),this.id=l,this.dispatcher=A,this.setEventedParent(k),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.extend({type:"raster"},_),h.extend(this,h.pick(_,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=li(this._options,this.map._requestManager,(l,_)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new h.ErrorEvent(l)):_&&(h.extend(this,_),_.bounds&&(this.tileBounds=new Et(_.bounds,this.minzoom,this.maxzoom)),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return h.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,_){const A=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.request=h.getImage(this.map._requestManager.transformRequest(A,h.ResourceType.Tile),(k,B,j)=>{if(delete l.request,l.aborted)l.state="unloaded",_(null);else if(k)l.state="errored",_(k);else if(B){this.map._refreshExpiredTiles&&l.setExpiryData(j);const Z=this.map.painter.context,J=Z.gl;l.texture=this.map.painter.getTileTexture(B.width),l.texture?l.texture.update(B,{useMipmap:!0}):(l.texture=new we(Z,B,J.RGBA,{useMipmap:!0}),l.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),Z.extTextureFilterAnisotropic&&J.texParameterf(J.TEXTURE_2D,Z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Z.extTextureFilterAnisotropicMax)),l.state="loaded",h.cacheEntryPossiblyAdded(this.dispatcher),_(null)}})}abortTile(l,_){l.request&&(l.request.cancel(),delete l.request),_()}unloadTile(l,_){l.texture&&this.map.painter.saveTileTexture(l.texture),_()}hasTransition(){return!1}}let wt;class Pt extends Je{constructor(l,_,A,k){super(l,_,A,k),this.type="raster-dem",this.maxzoom=22,this._options=h.extend({type:"raster-dem"},_),this.encoding=_.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(l,_){const A=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function k(B,j){B&&(l.state="errored",_(B)),j&&(l.dem=j,l.needsHillshadePrepare=!0,l.state="loaded",_(null))}l.request=h.getImage(this.map._requestManager.transformRequest(A,h.ResourceType.Tile),function(B,j){if(delete l.request,l.aborted)l.state="unloaded",_(null);else if(B)l.state="errored",_(B);else if(j){this.map._refreshExpiredTiles&&l.setExpiryData(j),delete j.cacheControl,delete j.expires;const Z=h.isImageBitmap(j)&&(wt==null&&(wt=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),wt)?j:h.exported.getImageData(j,1),J={uid:l.uid,coord:l.tileID,source:this.id,rawImageData:Z,encoding:this.encoding};l.actor&&l.state!=="expired"||(l.actor=this.dispatcher.getActor(),l.actor.send("loadDEMTile",J,k.bind(this)))}}.bind(this)),l.neighboringTiles=this._getNeighboringTiles(l.tileID)}_getNeighboringTiles(l){const _=l.canonical,A=Math.pow(2,_.z),k=(_.x-1+A)%A,B=_.x===0?l.wrap-1:l.wrap,j=(_.x+1+A)%A,Z=_.x+1===A?l.wrap+1:l.wrap,J={};return J[new h.OverscaledTileID(l.overscaledZ,B,_.z,k,_.y).key]={backfilled:!1},J[new h.OverscaledTileID(l.overscaledZ,Z,_.z,j,_.y).key]={backfilled:!1},_.y>0&&(J[new h.OverscaledTileID(l.overscaledZ,B,_.z,k,_.y-1).key]={backfilled:!1},J[new h.OverscaledTileID(l.overscaledZ,l.wrap,_.z,_.x,_.y-1).key]={backfilled:!1},J[new h.OverscaledTileID(l.overscaledZ,Z,_.z,j,_.y-1).key]={backfilled:!1}),_.y+1<A&&(J[new h.OverscaledTileID(l.overscaledZ,B,_.z,k,_.y+1).key]={backfilled:!1},J[new h.OverscaledTileID(l.overscaledZ,l.wrap,_.z,_.x,_.y+1).key]={backfilled:!1},J[new h.OverscaledTileID(l.overscaledZ,Z,_.z,j,_.y+1).key]={backfilled:!1}),J}unloadTile(l){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&l.actor.send("removeDEMTile",{uid:l.uid,source:this.id})}}class ni extends h.Evented{constructor(l,_,A,k){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=A.getActor(),this.setEventedParent(k),this._data=_.data,this._options=h.extend({},_),this._collectResourceTiming=_.collectResourceTiming,_.maxzoom!==void 0&&(this.maxzoom=_.maxzoom),_.type&&(this.type=_.type),_.attribution&&(this.attribution=_.attribution),this.promoteId=_.promoteId;const B=h.EXTENT/this.tileSize;this.workerOptions=h.extend({source:this.id,cluster:_.cluster||!1,geojsonVtOptions:{buffer:(_.buffer!==void 0?_.buffer:128)*B,tolerance:(_.tolerance!==void 0?_.tolerance:.375)*B,extent:h.EXTENT,maxZoom:this.maxzoom,lineMetrics:_.lineMetrics||!1,generateId:_.generateId||!1},superclusterOptions:{maxZoom:_.clusterMaxZoom!==void 0?_.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,_.clusterMinPoints||2),extent:h.EXTENT,radius:(_.clusterRadius||50)*B,log:!1,generateId:_.generateId||!1},clusterProperties:_.clusterProperties,filter:_.filter},_.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData("content"),this}getClusterExpansionZoom(l,_){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:l,source:this.id},_),this}getClusterChildren(l,_){return this.actor.send("geojson.getClusterChildren",{clusterId:l,source:this.id},_),this}getClusterLeaves(l,_,A,k){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:l,limit:_,offset:A},k),this}_updateWorkerData(l){const _=h.extend({},this.workerOptions),A=this._data;typeof A=="string"?(_.request=this.map._requestManager.transformRequest(h.exported.resolveURL(A),h.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(A),this._pendingLoads++,this.fire(new h.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,_,(k,B)=>{if(this._pendingLoads--,this._removed||B&&B.abandoned)return;let j=null;if(B&&B.resourceTiming&&B.resourceTiming[this.id]&&(j=B.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:_.source},null),k)return void this.fire(new h.ErrorEvent(k));const Z={dataType:"source",sourceDataType:l};this._collectResourceTiming&&j&&j.length>0&&h.extend(Z,{resourceTiming:j}),this.fire(new h.Event("data",Z))})}loaded(){return this._pendingLoads===0}loadTile(l,_){const A=l.actor?"reloadTile":"loadTile";l.actor=this.actor;const k={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.request=this.actor.send(A,k,(B,j)=>(delete l.request,l.unloadVectorData(),l.aborted?_(null):B?_(B):(l.loadVectorData(j,this.map.painter,A==="reloadTile"),_(null))))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.aborted=!0}unloadTile(l){l.unloadVectorData(),this.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return h.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Xt=h.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Xi extends h.Evented{constructor(l,_,A,k){super(),this.id=l,this.dispatcher=A,this.coordinates=_.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(k),this.options=_}load(l,_){this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this.url=this.options.url,h.getImage(this.map._requestManager.transformRequest(this.url,h.ResourceType.Image),(A,k)=>{this._loaded=!0,A?this.fire(new h.ErrorEvent(A)):k&&(this.image=k,l&&(this.coordinates=l),_&&_(),this._finishLoading())})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this.options.url=l.url,this.load(l.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}setCoordinates(l){this.coordinates=l;const _=l.map(h.MercatorCoordinate.fromLngLat);this.tileID=function(k){let B=1/0,j=1/0,Z=-1/0,J=-1/0;for(const Ae of k)B=Math.min(B,Ae.x),j=Math.min(j,Ae.y),Z=Math.max(Z,Ae.x),J=Math.max(J,Ae.y);const ie=Math.max(Z-B,J-j),ae=Math.max(0,Math.floor(-Math.log(ie)/Math.LN2)),ge=Math.pow(2,ae);return new h.CanonicalTileID(ae,Math.floor((B+Z)/2*ge),Math.floor((j+J)/2*ge))}(_),this.minzoom=this.maxzoom=this.tileID.z;const A=_.map(k=>this.tileID.getTilePoint(k)._round());return this._boundsArray=new h.RasterBoundsArray,this._boundsArray.emplaceBack(A[0].x,A[0].y,0,0),this._boundsArray.emplaceBack(A[1].x,A[1].y,h.EXTENT,0),this._boundsArray.emplaceBack(A[3].x,A[3].y,0,h.EXTENT),this._boundsArray.emplaceBack(A[2].x,A[2].y,h.EXTENT,h.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,_=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new we(l,this.image,_.RGBA),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE));for(const A in this.tiles){const k=this.tiles[A];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}loadTile(l,_){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},_(null)):(l.state="errored",_(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ei extends Xi{constructor(l,_,A,k){super(l,_,A,k),this.roundZoom=!0,this.type="video",this.options=_}load(){this._loaded=!1;const l=this.options;this.urls=[];for(const _ of l.urls)this.urls.push(this.map._requestManager.transformRequest(_,h.ResourceType.Source).url);h.getVideo(this.urls,(_,A)=>{this._loaded=!0,_?this.fire(new h.ErrorEvent(_)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const _=this.video.seekable;l<_.start(0)||l>_.end(0)?this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${_.start(0)} and ${_.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,_=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE),_.texSubImage2D(_.TEXTURE_2D,0,0,0,_.RGBA,_.UNSIGNED_BYTE,this.video)):(this.texture=new we(l,this.video,_.RGBA),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE));for(const A in this.tiles){const k=this.tiles[A];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Jt extends Xi{constructor(l,_,A,k){super(l,_,A,k),_.coordinates?Array.isArray(_.coordinates)&&_.coordinates.length===4&&!_.coordinates.some(B=>!Array.isArray(B)||B.length!==2||B.some(j=>typeof j!="number"))||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${l}`,null,'missing required property "coordinates"'))),_.animate&&typeof _.animate!="boolean"&&this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),_.canvas?typeof _.canvas=="string"||_.canvas instanceof HTMLCanvasElement||this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.ErrorEvent(new h.ValidationError(`sources.${l}`,null,'missing required property "canvas"'))),this.options=_,this.animate=_.animate===void 0||_.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const _=this.map.painter.context,A=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new we(_,this.canvas,A.RGBA,{premultiply:!0});for(const k in this.tiles){const B=this.tiles[k];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const bi={vector:Gt,raster:Je,"raster-dem":Pt,geojson:ni,video:ei,image:Xi,canvas:Jt};function ai(C,l){const _=h.create();return h.translate(_,_,[1,1,0]),h.scale(_,_,[.5*C.width,.5*C.height,1]),h.multiply(_,_,C.calculatePosMatrix(l.toUnwrapped()))}function ht(C,l,_,A,k,B){const j=function(ge,Ae,Ke){if(ge)for(const ke of ge){const Xe=Ae[ke];if(Xe&&Xe.source===Ke&&Xe.type==="fill-extrusion")return!0}else for(const ke in Ae){const Xe=Ae[ke];if(Xe.source===Ke&&Xe.type==="fill-extrusion")return!0}return!1}(k&&k.layers,l,C.id),Z=B.maxPitchScaleFactor(),J=C.tilesIn(A,Z,j);J.sort(It);const ie=[];for(const ge of J)ie.push({wrappedTileID:ge.tileID.wrapped().key,queryResults:ge.tile.queryRenderedFeatures(l,_,C._state,ge.queryGeometry,ge.cameraQueryGeometry,ge.scale,k,B,Z,ai(C.transform,ge.tileID))});const ae=function(ge){const Ae={},Ke={};for(const ke of ge){const Xe=ke.queryResults,ct=ke.wrappedTileID,lt=Ke[ct]=Ke[ct]||{};for(const bt in Xe){const pt=Xe[bt],jt=lt[bt]=lt[bt]||{},Rt=Ae[bt]=Ae[bt]||[];for(const Ft of pt)jt[Ft.featureIndex]||(jt[Ft.featureIndex]=!0,Rt.push(Ft))}}return Ae}(ie);for(const ge in ae)ae[ge].forEach(Ae=>{const Ke=Ae.feature,ke=C.getFeatureState(Ke.layer["source-layer"],Ke.id);Ke.source=Ke.layer.source,Ke.layer["source-layer"]&&(Ke.sourceLayer=Ke.layer["source-layer"]),Ke.state=ke});return ae}function It(C,l){const _=C.tileID,A=l.tileID;return _.overscaledZ-A.overscaledZ||_.canonical.y-A.canonical.y||_.wrap-A.wrap||_.canonical.x-A.canonical.x}class St{constructor(l,_){this.tileID=l,this.uid=h.uniqueId(),this.uses=0,this.tileSize=_,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const _=l+this.timeAdded;_<h.exported.now()||this.fadeEndTime&&_<this.fadeEndTime||(this.fadeEndTime=_)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(l,_,A){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(k,B){const j={};if(!B)return j;for(const Z of k){const J=Z.layerIds.map(ie=>B.getLayer(ie)).filter(Boolean);if(J.length!==0){Z.layers=J,Z.stateDependentLayerIds&&(Z.stateDependentLayers=Z.stateDependentLayerIds.map(ie=>J.filter(ae=>ae.id===ie)[0]));for(const ie of J)j[ie.id]=Z}}return j}(l.buckets,_.style),this.hasSymbolBuckets=!1;for(const k in this.buckets){const B=this.buckets[k];if(B instanceof h.SymbolBucket){if(this.hasSymbolBuckets=!0,!A)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const k in this.buckets){const B=this.buckets[k];if(B instanceof h.SymbolBucket&&B.hasRTLText){this.hasRTLText=!0,h.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const k in this.buckets){const B=this.buckets[k];this.queryPadding=Math.max(this.queryPadding,_.style.getLayer(k).queryRadius(B))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new h.CollisionBoxArray}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const A in this.buckets){const k=this.buckets[A];k.uploadPending()&&k.upload(l)}const _=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new we(l,this.imageAtlas.image,_.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new we(l,this.glyphAtlasImage,_.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,_,A,k,B,j,Z,J,ie,ae){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:k,cameraQueryGeometry:B,scale:j,tileSize:this.tileSize,pixelPosMatrix:ae,transform:J,params:Z,queryPadding:this.queryPadding*ie},l,_,A):{}}querySourceFeatures(l,_){const A=this.latestFeatureIndex;if(!A||!A.rawTileData)return;const k=A.loadVTLayers(),B=_?_.sourceLayer:"",j=k._geojsonTileLayer||k[B];if(!j)return;const Z=h.createFilter(_&&_.filter),{z:J,x:ie,y:ae}=this.tileID.canonical,ge={z:J,x:ie,y:ae};for(let Ae=0;Ae<j.length;Ae++){const Ke=j.feature(Ae);if(Z.needGeometry){const ct=h.toEvaluationFeature(Ke,!0);if(!Z.filter(new h.EvaluationParameters(this.tileID.overscaledZ),ct,this.tileID.canonical))continue}else if(!Z.filter(new h.EvaluationParameters(this.tileID.overscaledZ),Ke))continue;const ke=A.getId(Ke,B),Xe=new h.GeoJSONFeature(Ke,J,ie,ae,ke);Xe.tile=ge,l.push(Xe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const _=this.expirationTime;if(l.cacheControl){const A=h.parseCacheControl(l.cacheControl);A["max-age"]&&(this.expirationTime=Date.now()+1e3*A["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const A=Date.now();let k=!1;if(this.expirationTime>A)k=!1;else if(_)if(this.expirationTime<_)k=!0;else{const B=this.expirationTime-_;B?this.expirationTime=A+Math.max(B,3e4):k=!0}else k=!0;k?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,_){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const A=this.latestFeatureIndex.loadVTLayers();for(const k in this.buckets){if(!_.style.hasLayer(k))continue;const B=this.buckets[k],j=B.layers[0].sourceLayer||"_geojsonTileLayer",Z=A[j],J=l[j];if(!Z||!J||Object.keys(J).length===0)continue;B.update(J,Z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ie=_&&_.style&&_.style.getLayer(k);ie&&(this.queryPadding=Math.max(this.queryPadding,ie.queryRadius(B)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<h.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=h.exported.now()+l}setDependencies(l,_){const A={};for(const k of _)A[k]=!0;this.dependencies[l]=A}hasDependency(l,_){for(const A of l){const k=this.dependencies[A];if(k){for(const B of _)if(k[B])return!0}}return!1}}class Ji{constructor(l,_){this.max=l,this.onRemove=_,this.reset()}reset(){for(const l in this.data)for(const _ of this.data[l])_.timeout&&clearTimeout(_.timeout),this.onRemove(_.value);return this.data={},this.order=[],this}add(l,_,A){const k=l.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);const B={value:_,timeout:void 0};if(A!==void 0&&(B.timeout=setTimeout(()=>{this.remove(l,B)},A)),this.data[k].push(B),this.order.push(k),this.order.length>this.max){const j=this._getAndRemoveByKey(this.order[0]);j&&this.onRemove(j)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const _=this.data[l].shift();return _.timeout&&clearTimeout(_.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),_.value}getByKey(l){const _=this.data[l];return _?_[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,_){if(!this.has(l))return this;const A=l.wrapped().key,k=_===void 0?0:this.data[A].indexOf(_),B=this.data[A][k];return this.data[A].splice(k,1),B.timeout&&clearTimeout(B.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(B.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}filter(l){const _=[];for(const A in this.data)for(const k of this.data[A])l(k.value)||_.push(k);for(const A of _)this.remove(A.value.tileID,A)}}class Qt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,_,A){const k=String(_);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][k]=this.stateChanges[l][k]||{},h.extend(this.stateChanges[l][k],A),this.deletedStates[l]===null){this.deletedStates[l]={};for(const B in this.state[l])B!==k&&(this.deletedStates[l][B]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][k]===null){this.deletedStates[l][k]={};for(const B in this.state[l][k])A[B]||(this.deletedStates[l][k][B]=null)}else for(const B in A)this.deletedStates[l]&&this.deletedStates[l][k]&&this.deletedStates[l][k][B]===null&&delete this.deletedStates[l][k][B]}removeFeatureState(l,_,A){if(this.deletedStates[l]===null)return;const k=String(_);if(this.deletedStates[l]=this.deletedStates[l]||{},A&&_!==void 0)this.deletedStates[l][k]!==null&&(this.deletedStates[l][k]=this.deletedStates[l][k]||{},this.deletedStates[l][k][A]=null);else if(_!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][k])for(A in this.deletedStates[l][k]={},this.stateChanges[l][k])this.deletedStates[l][k][A]=null;else this.deletedStates[l][k]=null;else this.deletedStates[l]=null}getState(l,_){const A=String(_),k=h.extend({},(this.state[l]||{})[A],(this.stateChanges[l]||{})[A]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const B=this.deletedStates[l][_];if(B===null)return{};for(const j in B)delete k[j]}return k}initializeTileState(l,_){l.setFeatureState(this.state,_)}coalesceChanges(l,_){const A={};for(const k in this.stateChanges){this.state[k]=this.state[k]||{};const B={};for(const j in this.stateChanges[k])this.state[k][j]||(this.state[k][j]={}),h.extend(this.state[k][j],this.stateChanges[k][j]),B[j]=this.state[k][j];A[k]=B}for(const k in this.deletedStates){this.state[k]=this.state[k]||{};const B={};if(this.deletedStates[k]===null)for(const j in this.state[k])B[j]={},this.state[k][j]={};else for(const j in this.deletedStates[k]){if(this.deletedStates[k][j]===null)this.state[k][j]={};else for(const Z of Object.keys(this.deletedStates[k][j]))delete this.state[k][j][Z];B[j]=this.state[k][j]}A[k]=A[k]||{},h.extend(A[k],B)}if(this.stateChanges={},this.deletedStates={},Object.keys(A).length!==0)for(const k in l)l[k].setFeatureState(A,_)}}class gt extends h.Evented{constructor(l,_,A){super(),this.id=l,this.dispatcher=A,this.on("data",k=>{k.dataType==="source"&&k.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(k,B,j,Z){const J=new bi[B.type](k,B,j,Z);if(J.id!==k)throw new Error(`Expected Source id to be ${k} instead of ${J.id}`);return h.bindAll(["load","abort","unload","serialize","prepare"],J),J}(l,_,A,this),this._tiles={},this._cache=new Ji(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Qt}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const _=this._tiles[l];if(_.state!=="loaded"&&_.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(l,_){return this._source.loadTile(l,_)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,()=>{})}_abortTile(l){this._source.abortTile&&this._source.abortTile(l,()=>{}),this._source.fire(new h.Event("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const _ in this._tiles){const A=this._tiles[_];A.upload(l),A.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(zi).map(l=>l.key)}getRenderableIds(l){const _=[];for(const A in this._tiles)this._isIdRenderable(A,l)&&_.push(this._tiles[A]);return l?_.sort((A,k)=>{const B=A.tileID,j=k.tileID,Z=new h.pointGeometry(B.canonical.x,B.canonical.y)._rotate(this.transform.angle),J=new h.pointGeometry(j.canonical.x,j.canonical.y)._rotate(this.transform.angle);return B.overscaledZ-j.overscaledZ||J.y-Z.y||J.x-Z.x}).map(A=>A.tileID.key):_.map(A=>A.tileID).sort(zi).map(A=>A.key)}hasRenderableParent(l){const _=this.findLoadedParent(l,0);return!!_&&this._isIdRenderable(_.tileID.key)}_isIdRenderable(l,_){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(_||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,_){const A=this._tiles[l];A&&(A.state!=="loading"&&(A.state=_),this._loadTile(A,this._tileLoaded.bind(this,A,l,_)))}_tileLoaded(l,_,A,k){if(k)return l.state="errored",void(k.status!==404?this._source.fire(new h.ErrorEvent(k,{tile:l})):this.update(this.transform));l.timeAdded=h.exported.now(),A==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(_,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new h.Event("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const _=this.getRenderableIds();for(let k=0;k<_.length;k++){const B=_[k];if(l.neighboringTiles&&l.neighboringTiles[B]){const j=this.getTileByID(B);A(l,j),A(j,l)}}function A(k,B){k.needsHillshadePrepare=!0;let j=B.tileID.canonical.x-k.tileID.canonical.x;const Z=B.tileID.canonical.y-k.tileID.canonical.y,J=Math.pow(2,k.tileID.canonical.z),ie=B.tileID.key;j===0&&Z===0||Math.abs(Z)>1||(Math.abs(j)>1&&(Math.abs(j+J)===1?j+=J:Math.abs(j-J)===1&&(j-=J)),B.dem&&k.dem&&(k.dem.backfillBorder(B.dem,j,Z),k.neighboringTiles&&k.neighboringTiles[ie]&&(k.neighboringTiles[ie].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,_,A,k){for(const B in this._tiles){let j=this._tiles[B];if(k[B]||!j.hasData()||j.tileID.overscaledZ<=_||j.tileID.overscaledZ>A)continue;let Z=j.tileID;for(;j&&j.tileID.overscaledZ>_+1;){const ie=j.tileID.scaledTo(j.tileID.overscaledZ-1);j=this._tiles[ie.key],j&&j.hasData()&&(Z=ie)}let J=Z;for(;J.overscaledZ>_;)if(J=J.scaledTo(J.overscaledZ-1),l[J.key]){k[Z.key]=Z;break}}}findLoadedParent(l,_){if(l.key in this._loadedParentTiles){const A=this._loadedParentTiles[l.key];return A&&A.tileID.overscaledZ>=_?A:null}for(let A=l.overscaledZ-1;A>=_;A--){const k=l.scaledTo(A),B=this._getLoadedTile(k);if(B)return B}}_getLoadedTile(l){const _=this._tiles[l.key];return _&&_.hasData()?_:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const _=Math.ceil(l.width/this._source.tileSize)+1,A=Math.ceil(l.height/this._source.tileSize)+1,k=Math.floor(_*A*5),B=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,k):k;this._cache.setMaxSize(B)}handleWrapJump(l){const _=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,_){const A={};for(const k in this._tiles){const B=this._tiles[k];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+_),A[B.tileID.key]=B}this._tiles=A;for(const k in this._timers)clearTimeout(this._timers[k]),delete this._timers[k];for(const k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}}update(l){if(this.transform=l,!this._sourceLoaded||this._paused)return;let _;this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?_=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(J=>new h.OverscaledTileID(J.canonical.z,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y)):(_=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(_=_.filter(J=>this._source.hasTile(J)))):_=[];const A=l.coveringZoomLevel(this._source),k=Math.max(A-gt.maxOverzooming,this._source.minzoom),B=Math.max(A+gt.maxUnderzooming,this._source.minzoom),j=this._updateRetainedTiles(_,A);if(ln(this._source.type)){const J={},ie={},ae=Object.keys(j);for(const ge of ae){const Ae=j[ge],Ke=this._tiles[ge];if(!Ke||Ke.fadeEndTime&&Ke.fadeEndTime<=h.exported.now())continue;const ke=this.findLoadedParent(Ae,k);ke&&(this._addTile(ke.tileID),J[ke.tileID.key]=ke.tileID),ie[ge]=Ae}this._retainLoadedChildren(ie,A,B,j);for(const ge in J)j[ge]||(this._coveredTiles[ge]=!0,j[ge]=J[ge])}for(const J in j)this._tiles[J].clearFadeHold();const Z=h.keysDifference(this._tiles,j);for(const J of Z){const ie=this._tiles[J];ie.hasSymbolBuckets&&!ie.holdingForFade()?ie.setHoldDuration(this.map._fadeDuration):ie.hasSymbolBuckets&&!ie.symbolFadeFinished()||this._removeTile(J)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,_){const A={},k={},B=Math.max(_-gt.maxOverzooming,this._source.minzoom),j=Math.max(_+gt.maxUnderzooming,this._source.minzoom),Z={};for(const J of l){const ie=this._addTile(J);A[J.key]=J,ie.hasData()||_<this._source.maxzoom&&(Z[J.key]=J)}this._retainLoadedChildren(Z,_,j,A);for(const J of l){let ie=this._tiles[J.key];if(ie.hasData())continue;if(_+1>this._source.maxzoom){const ge=J.children(this._source.maxzoom)[0],Ae=this.getTile(ge);if(Ae&&Ae.hasData()){A[ge.key]=ge;continue}}else{const ge=J.children(this._source.maxzoom);if(A[ge[0].key]&&A[ge[1].key]&&A[ge[2].key]&&A[ge[3].key])continue}let ae=ie.wasRequested();for(let ge=J.overscaledZ-1;ge>=B;--ge){const Ae=J.scaledTo(ge);if(k[Ae.key]||(k[Ae.key]=!0,ie=this.getTile(Ae),!ie&&ae&&(ie=this._addTile(Ae)),ie&&(A[Ae.key]=Ae,ae=ie.wasRequested(),ie.hasData())))break}}return A}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const _=[];let A,k=this._tiles[l].tileID;for(;k.overscaledZ>0;){if(k.key in this._loadedParentTiles){A=this._loadedParentTiles[k.key];break}_.push(k.key);const B=k.scaledTo(k.overscaledZ-1);if(A=this._getLoadedTile(B),A)break;k=B}for(const B of _)this._loadedParentTiles[B]=A}}_addTile(l){let _=this._tiles[l.key];if(_)return _;_=this._cache.getAndRemove(l),_&&(this._setTileReloadTimer(l.key,_),_.tileID=l,this._state.initializeTileState(_,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,_)));const A=_;return _||(_=new St(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(_,this._tileLoaded.bind(this,_,l.key,_.state))),_.uses++,this._tiles[l.key]=_,A||this._source.fire(new h.Event("dataloading",{tile:_,coord:_.tileID,dataType:"source"})),_}_setTileReloadTimer(l,_){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const A=_.getExpiryTimeout();A&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},A))}_removeTile(l){const _=this._tiles[l];_&&(_.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),_.uses>0||(_.hasData()&&_.state!=="reloading"?this._cache.add(_.tileID,_,_.getExpiryTimeout()):(_.aborted=!0,this._abortTile(_),this._unloadTile(_))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,_,A){const k=[],B=this.transform;if(!B)return k;const j=A?B.getCameraQueryGeometry(l):l,Z=l.map(ke=>B.pointCoordinate(ke)),J=j.map(ke=>B.pointCoordinate(ke)),ie=this.getIds();let ae=1/0,ge=1/0,Ae=-1/0,Ke=-1/0;for(const ke of J)ae=Math.min(ae,ke.x),ge=Math.min(ge,ke.y),Ae=Math.max(Ae,ke.x),Ke=Math.max(Ke,ke.y);for(let ke=0;ke<ie.length;ke++){const Xe=this._tiles[ie[ke]];if(Xe.holdingForFade())continue;const ct=Xe.tileID,lt=Math.pow(2,B.zoom-Xe.tileID.overscaledZ),bt=_*Xe.queryPadding*h.EXTENT/Xe.tileSize/lt,pt=[ct.getTilePoint(new h.MercatorCoordinate(ae,ge)),ct.getTilePoint(new h.MercatorCoordinate(Ae,Ke))];if(pt[0].x-bt<h.EXTENT&&pt[0].y-bt<h.EXTENT&&pt[1].x+bt>=0&&pt[1].y+bt>=0){const jt=Z.map(Ft=>ct.getTilePoint(Ft)),Rt=J.map(Ft=>ct.getTilePoint(Ft));k.push({tile:Xe,tileID:ct,queryGeometry:jt,cameraQueryGeometry:Rt,scale:lt})}}return k}getVisibleCoordinates(l){const _=this.getRenderableIds(l).map(A=>this._tiles[A].tileID);for(const A of _)A.posMatrix=this.transform.calculatePosMatrix(A.toUnwrapped());return _}hasTransition(){if(this._source.hasTransition())return!0;if(ln(this._source.type))for(const l in this._tiles){const _=this._tiles[l];if(_.fadeEndTime!==void 0&&_.fadeEndTime>=h.exported.now())return!0}return!1}setFeatureState(l,_,A){this._state.updateState(l=l||"_geojsonTileLayer",_,A)}removeFeatureState(l,_,A){this._state.removeFeatureState(l=l||"_geojsonTileLayer",_,A)}getFeatureState(l,_){return this._state.getState(l=l||"_geojsonTileLayer",_)}setDependencies(l,_,A){const k=this._tiles[l];k&&k.setDependencies(_,A)}reloadTilesForDependencies(l,_){for(const A in this._tiles)this._tiles[A].hasDependency(l,_)&&this._reloadTile(A,"reloading");this._cache.filter(A=>!A.hasDependency(l,_))}}function zi(C,l){const _=Math.abs(2*C.wrap)-+(C.wrap<0),A=Math.abs(2*l.wrap)-+(l.wrap<0);return C.overscaledZ-l.overscaledZ||A-_||l.canonical.y-C.canonical.y||l.canonical.x-C.canonical.x}function ln(C){return C==="raster"||C==="image"||C==="video"}gt.maxOverzooming=10,gt.maxUnderzooming=3;const Cn="mapboxgl_preloaded_worker_pool";class Zn{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Zn.workerCount;)this.workers.push(new Worker(ca.workerUrl));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(_=>{_.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Cn]}numActive(){return Object.keys(this.active).length}}const Nr=Math.floor(h.exported.hardwareConcurrency/2);let Kr;function At(){return Kr||(Kr=new Zn),Kr}function Bi(C,l){const _={};for(const A in C)A!=="ref"&&(_[A]=C[A]);return h.refProperties.forEach(A=>{A in l&&(_[A]=l[A])}),_}function Nn(C){C=C.slice();const l=Object.create(null);for(let _=0;_<C.length;_++)l[C[_].id]=C[_];for(let _=0;_<C.length;_++)"ref"in C[_]&&(C[_]=Bi(C[_],l[C[_].ref]));return C}Zn.workerCount=Math.max(Math.min(Nr,6),1);const rn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Jn(C,l,_){_.push({command:rn.addSource,args:[C,l[C]]})}function Ln(C,l,_){l.push({command:rn.removeSource,args:[C]}),_[C]=!0}function zt(C,l,_,A){Ln(C,_,A),Jn(C,l,_)}function Oi(C,l,_){let A;for(A in C[_])if(Object.prototype.hasOwnProperty.call(C[_],A)&&A!=="data"&&!R(C[_][A],l[_][A]))return!1;for(A in l[_])if(Object.prototype.hasOwnProperty.call(l[_],A)&&A!=="data"&&!R(C[_][A],l[_][A]))return!1;return!0}function Ze(C,l,_,A,k,B){let j;for(j in l=l||{},C=C||{})Object.prototype.hasOwnProperty.call(C,j)&&(R(C[j],l[j])||_.push({command:B,args:[A,j,l[j],k]}));for(j in l)Object.prototype.hasOwnProperty.call(l,j)&&!Object.prototype.hasOwnProperty.call(C,j)&&(R(C[j],l[j])||_.push({command:B,args:[A,j,l[j],k]}))}function Bt(C){return C.id}function Ki(C,l){return C[l.id]=l,C}class Vn{constructor(l,_){this.reset(l,_)}reset(l,_){this.points=l||[],this._distances=[0];for(let A=1;A<this.points.length;A++)this._distances[A]=this._distances[A-1]+this.points[A].dist(this.points[A-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(_||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=h.clamp(l,0,1);let _=1,A=this._distances[_];const k=l*this.paddedLength+this.padding;for(;A<k&&_<this._distances.length;)A=this._distances[++_];const B=_-1,j=this._distances[B],Z=A-j,J=Z>0?(k-j)/Z:0;return this.points[B].mult(1-J).add(this.points[_].mult(J))}}function Wn(C,l){let _=!0;return C==="always"||C!=="never"&&l!=="never"||(_=!1),_}class _o{constructor(l,_,A){const k=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(l/A),this.yCellCount=Math.ceil(_/A);for(let j=0;j<this.xCellCount*this.yCellCount;j++)k.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=_,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/_,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,_,A,k,B){this._forEachCell(_,A,k,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(_),this.bboxes.push(A),this.bboxes.push(k),this.bboxes.push(B)}insertCircle(l,_,A,k){this._forEachCell(_-k,A-k,_+k,A+k,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(_),this.circles.push(A),this.circles.push(k)}_insertBoxCell(l,_,A,k,B,j){this.boxCells[B].push(j)}_insertCircleCell(l,_,A,k,B,j){this.circleCells[B].push(j)}_query(l,_,A,k,B,j,Z){if(A<0||l>this.width||k<0||_>this.height)return[];const J=[];if(l<=0&&_<=0&&this.width<=A&&this.height<=k){if(B)return[{key:null,x1:l,y1:_,x2:A,y2:k}];for(let ie=0;ie<this.boxKeys.length;ie++)J.push({key:this.boxKeys[ie],x1:this.bboxes[4*ie],y1:this.bboxes[4*ie+1],x2:this.bboxes[4*ie+2],y2:this.bboxes[4*ie+3]});for(let ie=0;ie<this.circleKeys.length;ie++){const ae=this.circles[3*ie],ge=this.circles[3*ie+1],Ae=this.circles[3*ie+2];J.push({key:this.circleKeys[ie],x1:ae-Ae,y1:ge-Ae,x2:ae+Ae,y2:ge+Ae})}}else this._forEachCell(l,_,A,k,this._queryCell,J,{hitTest:B,overlapMode:j,seenUids:{box:{},circle:{}}},Z);return J}query(l,_,A,k){return this._query(l,_,A,k,!1,null)}hitTest(l,_,A,k,B,j){return this._query(l,_,A,k,!0,B,j).length>0}hitTestCircle(l,_,A,k,B){const j=l-A,Z=l+A,J=_-A,ie=_+A;if(Z<0||j>this.width||ie<0||J>this.height)return!1;const ae=[];return this._forEachCell(j,J,Z,ie,this._queryCellCircle,ae,{hitTest:!0,overlapMode:k,circle:{x:l,y:_,radius:A},seenUids:{box:{},circle:{}}},B),ae.length>0}_queryCell(l,_,A,k,B,j,Z,J){const{seenUids:ie,hitTest:ae,overlapMode:ge}=Z,Ae=this.boxCells[B];if(Ae!==null){const ke=this.bboxes;for(const Xe of Ae)if(!ie.box[Xe]){ie.box[Xe]=!0;const ct=4*Xe,lt=this.boxKeys[Xe];if(l<=ke[ct+2]&&_<=ke[ct+3]&&A>=ke[ct+0]&&k>=ke[ct+1]&&(!J||J(lt))&&(!ae||!Wn(ge,lt.overlapMode))&&(j.push({key:lt,x1:ke[ct],y1:ke[ct+1],x2:ke[ct+2],y2:ke[ct+3]}),ae))return!0}}const Ke=this.circleCells[B];if(Ke!==null){const ke=this.circles;for(const Xe of Ke)if(!ie.circle[Xe]){ie.circle[Xe]=!0;const ct=3*Xe,lt=this.circleKeys[Xe];if(this._circleAndRectCollide(ke[ct],ke[ct+1],ke[ct+2],l,_,A,k)&&(!J||J(lt))&&(!ae||!Wn(ge,lt.overlapMode))){const bt=ke[ct],pt=ke[ct+1],jt=ke[ct+2];if(j.push({key:lt,x1:bt-jt,y1:pt-jt,x2:bt+jt,y2:pt+jt}),ae)return!0}}}return!1}_queryCellCircle(l,_,A,k,B,j,Z,J){const{circle:ie,seenUids:ae,overlapMode:ge}=Z,Ae=this.boxCells[B];if(Ae!==null){const ke=this.bboxes;for(const Xe of Ae)if(!ae.box[Xe]){ae.box[Xe]=!0;const ct=4*Xe,lt=this.boxKeys[Xe];if(this._circleAndRectCollide(ie.x,ie.y,ie.radius,ke[ct+0],ke[ct+1],ke[ct+2],ke[ct+3])&&(!J||J(lt))&&!Wn(ge,lt.overlapMode))return j.push(!0),!0}}const Ke=this.circleCells[B];if(Ke!==null){const ke=this.circles;for(const Xe of Ke)if(!ae.circle[Xe]){ae.circle[Xe]=!0;const ct=3*Xe,lt=this.circleKeys[Xe];if(this._circlesCollide(ke[ct],ke[ct+1],ke[ct+2],ie.x,ie.y,ie.radius)&&(!J||J(lt))&&!Wn(ge,lt.overlapMode))return j.push(!0),!0}}}_forEachCell(l,_,A,k,B,j,Z,J){const ie=this._convertToXCellCoord(l),ae=this._convertToYCellCoord(_),ge=this._convertToXCellCoord(A),Ae=this._convertToYCellCoord(k);for(let Ke=ie;Ke<=ge;Ke++)for(let ke=ae;ke<=Ae;ke++)if(B.call(this,l,_,A,k,this.xCellCount*ke+Ke,j,Z,J))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,_,A,k,B,j){const Z=k-l,J=B-_,ie=A+j;return ie*ie>Z*Z+J*J}_circleAndRectCollide(l,_,A,k,B,j,Z){const J=(j-k)/2,ie=Math.abs(l-(k+J));if(ie>J+A)return!1;const ae=(Z-B)/2,ge=Math.abs(_-(B+ae));if(ge>ae+A)return!1;if(ie<=J||ge<=ae)return!0;const Ae=ie-J,Ke=ge-ae;return Ae*Ae+Ke*Ke<=A*A}}function vo(C,l,_,A,k){const B=h.create();return l?(h.scale(B,B,[1/k,1/k,1]),_||h.rotateZ(B,B,A.angle)):h.multiply(B,A.labelPlaneMatrix,C),B}function aa(C,l,_,A,k){if(l){const B=h.clone(C);return h.scale(B,B,[k,k,1]),_||h.rotateZ(B,B,-A.angle),B}return A.glCoordMatrix}function Ar(C,l){const _=[C.x,C.y,0,1];ue(_,_,l);const A=_[3];return{point:new h.pointGeometry(_[0]/A,_[1]/A),signedDistanceFromCamera:A}}function yi(C,l){return .5+C/l*.5}function On(C,l){const _=C[0]/C[3],A=C[1]/C[3];return _>=-l[0]&&_<=l[0]&&A>=-l[1]&&A<=l[1]}function xn(C,l,_,A,k,B,j,Z,J){const ie=A?C.textSizeData:C.iconSizeData,ae=h.evaluateSizeForZoom(ie,_.transform.zoom),ge=[256/_.width*2+1,256/_.height*2+1],Ae=A?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;Ae.clear();const Ke=C.lineVertexArray,ke=A?C.text.placedSymbolArray:C.icon.placedSymbolArray,Xe=_.transform.width/_.transform.height;let ct=!1;for(let lt=0;lt<ke.length;lt++){const bt=ke.get(lt);if(bt.hidden||bt.writingMode===h.WritingMode.vertical&&!ct){ne(bt.numGlyphs,Ae);continue}ct=!1;const pt=[bt.anchorX,bt.anchorY,0,1];if(h.transformMat4(pt,pt,l),!On(pt,ge)){ne(bt.numGlyphs,Ae);continue}const jt=yi(_.transform.cameraToCenterDistance,pt[3]),Rt=h.evaluateSizeForFeature(ie,ae,bt),Ft=j?Rt/jt:Rt*jt,ti=new h.pointGeometry(bt.anchorX,bt.anchorY),ui=Ar(ti,k).point,qt={},qi=dn(bt,Ft,!1,Z,l,k,B,C.glyphOffsetArray,Ke,Ae,ui,ti,qt,Xe,J);ct=qi.useVertical,(qi.notEnoughRoom||ct||qi.needsFlipping&&dn(bt,Ft,!0,Z,l,k,B,C.glyphOffsetArray,Ke,Ae,ui,ti,qt,Xe,J).notEnoughRoom)&&ne(bt.numGlyphs,Ae)}A?C.text.dynamicLayoutVertexBuffer.updateData(Ae):C.icon.dynamicLayoutVertexBuffer.updateData(Ae)}function ro(C,l,_,A,k,B,j,Z,J,ie,ae,ge){const Ae=Z.glyphStartIndex+Z.numGlyphs,Ke=Z.lineStartIndex,ke=Z.lineStartIndex+Z.lineLength,Xe=l.getoffsetX(Z.glyphStartIndex),ct=l.getoffsetX(Ae-1),lt=Io(C*Xe,_,A,k,B,j,Z.segment,Ke,ke,J,ie,ae,ge);if(!lt)return null;const bt=Io(C*ct,_,A,k,B,j,Z.segment,Ke,ke,J,ie,ae,ge);return bt?{first:lt,last:bt}:null}function co(C,l,_,A){return C===h.WritingMode.horizontal&&Math.abs(_.y-l.y)>Math.abs(_.x-l.x)*A?{useVertical:!0}:(C===h.WritingMode.vertical?l.y<_.y:l.x>_.x)?{needsFlipping:!0}:null}function dn(C,l,_,A,k,B,j,Z,J,ie,ae,ge,Ae,Ke,ke){const Xe=l/24,ct=C.lineOffsetX*Xe,lt=C.lineOffsetY*Xe;let bt;if(C.numGlyphs>1){const pt=C.glyphStartIndex+C.numGlyphs,jt=C.lineStartIndex,Rt=C.lineStartIndex+C.lineLength,Ft=ro(Xe,Z,ct,lt,_,ae,ge,C,J,B,Ae,ke);if(!Ft)return{notEnoughRoom:!0};const ti=Ar(Ft.first.point,j).point,ui=Ar(Ft.last.point,j).point;if(A&&!_){const qt=co(C.writingMode,ti,ui,Ke);if(qt)return qt}bt=[Ft.first];for(let qt=C.glyphStartIndex+1;qt<pt-1;qt++)bt.push(Io(Xe*Z.getoffsetX(qt),ct,lt,_,ae,ge,C.segment,jt,Rt,J,B,Ae,ke));bt.push(Ft.last)}else{if(A&&!_){const jt=Ar(ge,k).point,Rt=C.lineStartIndex+C.segment+1,Ft=new h.pointGeometry(J.getx(Rt),J.gety(Rt)),ti=Ar(Ft,k),ui=ti.signedDistanceFromCamera>0?ti.point:sa(ge,Ft,jt,1,k),qt=co(C.writingMode,jt,ui,Ke);if(qt)return qt}const pt=Io(Xe*Z.getoffsetX(C.glyphStartIndex),ct,lt,_,ae,ge,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,J,B,Ae,ke);if(!pt)return{notEnoughRoom:!0};bt=[pt]}for(const pt of bt)h.addDynamicAttributes(ie,pt.point,pt.angle);return{}}function sa(C,l,_,A,k){const B=Ar(C.add(C.sub(l)._unit()),k).point,j=_.sub(B);return _.add(j._mult(A/j.mag()))}function Io(C,l,_,A,k,B,j,Z,J,ie,ae,ge,Ae){const Ke=A?C-l:C+l;let ke=Ke>0?1:-1,Xe=0;A&&(ke*=-1,Xe=Math.PI),ke<0&&(Xe+=Math.PI);let ct=ke>0?Z+j:Z+j+1,lt=k,bt=k,pt=0,jt=0;const Rt=Math.abs(Ke),Ft=[];for(;pt+jt<=Rt;){if(ct+=ke,ct<Z||ct>=J)return null;if(bt=lt,Ft.push(lt),lt=ge[ct],lt===void 0){const Ci=new h.pointGeometry(ie.getx(ct),ie.gety(ct)),vn=Ar(Ci,ae);if(vn.signedDistanceFromCamera>0)lt=ge[ct]=vn.point;else{const p=ct-ke;lt=sa(pt===0?B:new h.pointGeometry(ie.getx(p),ie.gety(p)),Ci,bt,Rt-pt+1,ae)}}pt+=jt,jt=bt.dist(lt)}const ti=(Rt-pt)/jt,ui=lt.sub(bt),qt=ui.mult(ti)._add(bt);qt._add(ui._unit()._perp()._mult(_*ke));const qi=Xe+Math.atan2(lt.y-bt.y,lt.x-bt.x);return Ft.push(qt),{point:qt,angle:Ae?qi:0,path:Ft}}const xr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ne(C,l){for(let _=0;_<C;_++){const A=l.length;l.resize(A+4),l.float32.set(xr,3*A)}}function ue(C,l,_){const A=l[0],k=l[1];return C[0]=_[0]*A+_[4]*k+_[12],C[1]=_[1]*A+_[5]*k+_[13],C[3]=_[3]*A+_[7]*k+_[15],C}const pe=100;class Se{constructor(l,_=new _o(l.width+200,l.height+200,25),A=new _o(l.width+200,l.height+200,25)){this.transform=l,this.grid=_,this.ignoredGrid=A,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+pe,this.screenBottomBoundary=l.height+pe,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200}placeCollisionBox(l,_,A,k,B){const j=this.projectAndGetPerspectiveRatio(k,l.anchorPointX,l.anchorPointY),Z=A*j.perspectiveRatio,J=l.x1*Z+j.point.x,ie=l.y1*Z+j.point.y,ae=l.x2*Z+j.point.x,ge=l.y2*Z+j.point.y;return!this.isInsideGrid(J,ie,ae,ge)||_!=="always"&&this.grid.hitTest(J,ie,ae,ge,_,B)?{box:[],offscreen:!1}:{box:[J,ie,ae,ge],offscreen:this.isOffscreen(J,ie,ae,ge)}}placeCollisionCircles(l,_,A,k,B,j,Z,J,ie,ae,ge,Ae,Ke){const ke=[],Xe=new h.pointGeometry(_.anchorX,_.anchorY),ct=Ar(Xe,j),lt=yi(this.transform.cameraToCenterDistance,ct.signedDistanceFromCamera),bt=(ae?B/lt:B*lt)/h.ONE_EM,pt=Ar(Xe,Z).point,jt=ro(bt,k,_.lineOffsetX*bt,_.lineOffsetY*bt,!1,pt,Xe,_,A,Z,{},!1);let Rt=!1,Ft=!1,ti=!0;if(jt){const ui=.5*Ae*lt+Ke,qt=new h.pointGeometry(-100,-100),qi=new h.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ci=new Vn,vn=jt.first,p=jt.last;let y=[];for(let L=vn.path.length-1;L>=1;L--)y.push(vn.path[L]);for(let L=1;L<p.path.length;L++)y.push(p.path[L]);const g=2.5*ui;if(J){const L=y.map(F=>Ar(F,J));y=L.some(F=>F.signedDistanceFromCamera<=0)?[]:L.map(F=>F.point)}let w=[];if(y.length>0){const L=y[0].clone(),F=y[0].clone();for(let N=1;N<y.length;N++)L.x=Math.min(L.x,y[N].x),L.y=Math.min(L.y,y[N].y),F.x=Math.max(F.x,y[N].x),F.y=Math.max(F.y,y[N].y);w=L.x>=qt.x&&F.x<=qi.x&&L.y>=qt.y&&F.y<=qi.y?[y]:F.x<qt.x||L.x>qi.x||F.y<qt.y||L.y>qi.y?[]:h.clipLine([y],qt.x,qt.y,qi.x,qi.y)}for(const L of w){Ci.reset(L,.25*ui);let F=0;F=Ci.length<=.5*ui?1:Math.ceil(Ci.paddedLength/g)+1;for(let N=0;N<F;N++){const H=N/Math.max(F-1,1),Q=Ci.lerp(H),oe=Q.x+pe,ye=Q.y+pe;ke.push(oe,ye,ui,0);const be=oe-ui,Ee=ye-ui,Be=oe+ui,Re=ye+ui;if(ti=ti&&this.isOffscreen(be,Ee,Be,Re),Ft=Ft||this.isInsideGrid(be,Ee,Be,Re),l!=="always"&&this.grid.hitTestCircle(oe,ye,ui,l,ge)&&(Rt=!0,!ie))return{circles:[],offscreen:!1,collisionDetected:Rt}}}}return{circles:!ie&&Rt||!Ft?[]:ke,offscreen:ti,collisionDetected:Rt}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const _=[];let A=1/0,k=1/0,B=-1/0,j=-1/0;for(const ae of l){const ge=new h.pointGeometry(ae.x+pe,ae.y+pe);A=Math.min(A,ge.x),k=Math.min(k,ge.y),B=Math.max(B,ge.x),j=Math.max(j,ge.y),_.push(ge)}const Z=this.grid.query(A,k,B,j).concat(this.ignoredGrid.query(A,k,B,j)),J={},ie={};for(const ae of Z){const ge=ae.key;if(J[ge.bucketInstanceId]===void 0&&(J[ge.bucketInstanceId]={}),J[ge.bucketInstanceId][ge.featureIndex])continue;const Ae=[new h.pointGeometry(ae.x1,ae.y1),new h.pointGeometry(ae.x2,ae.y1),new h.pointGeometry(ae.x2,ae.y2),new h.pointGeometry(ae.x1,ae.y2)];h.polygonIntersectsPolygon(_,Ae)&&(J[ge.bucketInstanceId][ge.featureIndex]=!0,ie[ge.bucketInstanceId]===void 0&&(ie[ge.bucketInstanceId]=[]),ie[ge.bucketInstanceId].push(ge.featureIndex))}return ie}insertCollisionBox(l,_,A,k,B,j){(A?this.ignoredGrid:this.grid).insert({bucketInstanceId:k,featureIndex:B,collisionGroupID:j,overlapMode:_},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,_,A,k,B,j){const Z=A?this.ignoredGrid:this.grid,J={bucketInstanceId:k,featureIndex:B,collisionGroupID:j,overlapMode:_};for(let ie=0;ie<l.length;ie+=4)Z.insertCircle(J,l[ie],l[ie+1],l[ie+2])}projectAndGetPerspectiveRatio(l,_,A){const k=[_,A,0,1];return ue(k,k,l),{point:new h.pointGeometry((k[0]/k[3]+1)/2*this.transform.width+pe,(-k[1]/k[3]+1)/2*this.transform.height+pe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/k[3]*.5}}isOffscreen(l,_,A,k){return A<pe||l>=this.screenRightBoundary||k<pe||_>this.screenBottomBoundary}isInsideGrid(l,_,A,k){return A>=0&&l<this.gridRightBoundary&&k>=0&&_<this.gridBottomBoundary}getViewportMatrix(){const l=h.identity([]);return h.translate(l,l,[-100,-100,0]),l}}function ze(C,l,_){return l*(h.EXTENT/(C.tileSize*Math.pow(2,_-C.tileID.overscaledZ)))}class $e{constructor(l,_,A,k){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?_:-_))):k&&A?1:0,this.placed=A}isHidden(){return this.opacity===0&&!this.placed}}class tt{constructor(l,_,A,k,B){this.text=new $e(l?l.text:null,_,A,B),this.icon=new $e(l?l.icon:null,_,k,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ie{constructor(l,_,A){this.text=l,this.icon=_,this.skipFade=A}}class Ne{constructor(){this.invProjMatrix=h.create(),this.viewportMatrix=h.create(),this.circles=[]}}class mt{constructor(l,_,A,k,B){this.bucketInstanceId=l,this.featureIndex=_,this.sourceLayerIndex=A,this.bucketIndex=k,this.tileID=B}}class ce{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const _=++this.maxGroupID;this.collisionGroups[l]={ID:_,predicate:A=>A.collisionGroupID===_}}return this.collisionGroups[l]}}function W(C,l,_,A,k){const{horizontalAlign:B,verticalAlign:j}=h.getAnchorAlignment(C),Z=-(B-.5)*l,J=-(j-.5)*_,ie=h.evaluateVariableOffset(C,A);return new h.pointGeometry(Z+ie[0]*k,J+ie[1]*k)}function X(C,l,_,A,k,B){const{x1:j,x2:Z,y1:J,y2:ie,anchorPointX:ae,anchorPointY:ge}=C,Ae=new h.pointGeometry(l,_);return A&&Ae._rotate(k?B:-B),{x1:j+Ae.x,y1:J+Ae.y,x2:Z+Ae.x,y2:ie+Ae.y,anchorPointX:ae,anchorPointY:ge}}class le{constructor(l,_,A,k){this.transform=l.clone(),this.collisionIndex=new Se(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new ce(A),this.collisionCircleArrays={},this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,_,A,k){const B=A.getBucket(_),j=A.latestFeatureIndex;if(!B||!j||_.id!==B.layerIds[0])return;const Z=A.collisionBoxArray,J=B.layers[0].layout,ie=Math.pow(2,this.transform.zoom-A.tileID.overscaledZ),ae=A.tileSize/h.EXTENT,ge=this.transform.calculatePosMatrix(A.tileID.toUnwrapped()),Ae=J.get("text-pitch-alignment")==="map",Ke=J.get("text-rotation-alignment")==="map",ke=ze(A,1,this.transform.zoom),Xe=vo(ge,Ae,Ke,this.transform,ke);let ct=null;if(Ae){const bt=aa(ge,Ae,Ke,this.transform,ke);ct=h.multiply([],this.transform.labelPlaneMatrix,bt)}this.retainedQueryData[B.bucketInstanceId]=new mt(B.bucketInstanceId,j,B.sourceLayerIndex,B.index,A.tileID);const lt={bucket:B,layout:J,posMatrix:ge,textLabelPlaneMatrix:Xe,labelToScreenMatrix:ct,scale:ie,textPixelRatio:ae,holdingForFade:A.holdingForFade(),collisionBoxArray:Z,partiallyEvaluatedTextSize:h.evaluateSizeForZoom(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(k)for(const bt of B.sortKeyRanges){const{sortKey:pt,symbolInstanceStart:jt,symbolInstanceEnd:Rt}=bt;l.push({sortKey:pt,symbolInstanceStart:jt,symbolInstanceEnd:Rt,parameters:lt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:lt})}attemptAnchorPlacement(l,_,A,k,B,j,Z,J,ie,ae,ge,Ae,Ke,ke,Xe){const ct=[Ae.textOffset0,Ae.textOffset1],lt=W(l,A,k,ct,B),bt=this.collisionIndex.placeCollisionBox(X(_,lt.x,lt.y,j,Z,this.transform.angle),ge,J,ie,ae.predicate);if((!Xe||this.collisionIndex.placeCollisionBox(X(Xe,lt.x,lt.y,j,Z,this.transform.angle),ge,J,ie,ae.predicate).box.length!==0)&&bt.box.length>0){let pt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID].text&&(pt=this.prevPlacement.variableOffsets[Ae.crossTileID].anchor),this.variableOffsets[Ae.crossTileID]={textOffset:ct,width:A,height:k,anchor:l,textBoxScale:B,prevAnchor:pt},this.markUsedJustification(Ke,l,Ae,ke),Ke.allowVerticalPlacement&&(this.markUsedOrientation(Ke,ke,Ae),this.placedOrientations[Ae.crossTileID]=ke),{shift:lt,placedGlyphBoxes:bt}}}placeLayerBucketPart(l,_,A){const{bucket:k,layout:B,posMatrix:j,textLabelPlaneMatrix:Z,labelToScreenMatrix:J,textPixelRatio:ie,holdingForFade:ae,collisionBoxArray:ge,partiallyEvaluatedTextSize:Ae,collisionGroup:Ke}=l.parameters,ke=B.get("text-optional"),Xe=B.get("icon-optional"),ct=h.getOverlapMode(B,"text-overlap","text-allow-overlap"),lt=ct==="always",bt=h.getOverlapMode(B,"icon-overlap","icon-allow-overlap"),pt=bt==="always",jt=B.get("text-rotation-alignment")==="map",Rt=B.get("text-pitch-alignment")==="map",Ft=B.get("icon-text-fit")!=="none",ti=B.get("symbol-z-order")==="viewport-y",ui=lt&&(pt||!k.hasIconData()||Xe),qt=pt&&(lt||!k.hasTextData()||ke);!k.collisionArrays&&ge&&k.deserializeCollisionBoxes(ge);const qi=(Ci,vn)=>{if(_[Ci.crossTileID])return;if(ae)return void(this.placements[Ci.crossTileID]=new Ie(!1,!1,!1));let p=!1,y=!1,g=!0,w=null,L={box:null,offscreen:null},F={box:null,offscreen:null},N=null,H=null,Q=null,oe=0,ye=0,be=0;vn.textFeatureIndex?oe=vn.textFeatureIndex:Ci.useRuntimeCollisionCircles&&(oe=Ci.featureIndex),vn.verticalTextFeatureIndex&&(ye=vn.verticalTextFeatureIndex);const Ee=vn.textBox;if(Ee){const We=Ve=>{let et=h.WritingMode.horizontal;if(k.allowVerticalPlacement&&!Ve&&this.prevPlacement){const dt=this.prevPlacement.placedOrientations[Ci.crossTileID];dt&&(this.placedOrientations[Ci.crossTileID]=dt,et=dt,this.markUsedOrientation(k,et,Ci))}return et},Ce=(Ve,et)=>{if(k.allowVerticalPlacement&&Ci.numVerticalGlyphVertices>0&&vn.verticalTextBox){for(const dt of k.writingModes)if(dt===h.WritingMode.vertical?(L=et(),F=L):L=Ve(),L&&L.box&&L.box.length)break}else L=Ve()};if(B.get("text-variable-anchor")){let Ve=B.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ci.crossTileID]){const xt=this.prevPlacement.variableOffsets[Ci.crossTileID];Ve.indexOf(xt.anchor)>0&&(Ve=Ve.filter(Tt=>Tt!==xt.anchor),Ve.unshift(xt.anchor))}const et=(xt,Tt,kt)=>{const Ht=xt.x2-xt.x1,oi=xt.y2-xt.y1,ri=Ci.textBoxScale,Ti=Ft&&bt==="never"?Tt:null;let Hi={box:[],offscreen:!1};const Qi=ct!=="never"?2*Ve.length:Ve.length;for(let Gi=0;Gi<Qi;++Gi){const Xn=this.attemptAnchorPlacement(Ve[Gi%Ve.length],xt,Ht,oi,ri,jt,Rt,ie,j,Ke,Gi>=Ve.length?ct:"never",Ci,k,kt,Ti);if(Xn&&(Hi=Xn.placedGlyphBoxes,Hi&&Hi.box&&Hi.box.length)){p=!0,w=Xn.shift;break}}return Hi};Ce(()=>et(Ee,vn.iconBox,h.WritingMode.horizontal),()=>{const xt=vn.verticalTextBox;return k.allowVerticalPlacement&&!(L&&L.box&&L.box.length)&&Ci.numVerticalGlyphVertices>0&&xt?et(xt,vn.verticalIconBox,h.WritingMode.vertical):{box:null,offscreen:null}}),L&&(p=L.box,g=L.offscreen);const dt=We(L&&L.box);if(!p&&this.prevPlacement){const xt=this.prevPlacement.variableOffsets[Ci.crossTileID];xt&&(this.variableOffsets[Ci.crossTileID]=xt,this.markUsedJustification(k,xt.anchor,Ci,dt))}}else{const Ve=(et,dt)=>{const xt=this.collisionIndex.placeCollisionBox(et,ct,ie,j,Ke.predicate);return xt&&xt.box&&xt.box.length&&(this.markUsedOrientation(k,dt,Ci),this.placedOrientations[Ci.crossTileID]=dt),xt};Ce(()=>Ve(Ee,h.WritingMode.horizontal),()=>{const et=vn.verticalTextBox;return k.allowVerticalPlacement&&Ci.numVerticalGlyphVertices>0&&et?Ve(et,h.WritingMode.vertical):{box:null,offscreen:null}}),We(L&&L.box&&L.box.length)}}if(N=L,p=N&&N.box&&N.box.length>0,g=N&&N.offscreen,Ci.useRuntimeCollisionCircles){const We=k.text.placedSymbolArray.get(Ci.centerJustifiedTextSymbolIndex),Ce=h.evaluateSizeForFeature(k.textSizeData,Ae,We),Ve=B.get("text-padding");H=this.collisionIndex.placeCollisionCircles(ct,We,k.lineVertexArray,k.glyphOffsetArray,Ce,j,Z,J,A,Rt,Ke.predicate,Ci.collisionCircleDiameter,Ve),p=lt||H.circles.length>0&&!H.collisionDetected,g=g&&H.offscreen}if(vn.iconFeatureIndex&&(be=vn.iconFeatureIndex),vn.iconBox){const We=Ce=>{const Ve=Ft&&w?X(Ce,w.x,w.y,jt,Rt,this.transform.angle):Ce;return this.collisionIndex.placeCollisionBox(Ve,bt,ie,j,Ke.predicate)};F&&F.box&&F.box.length&&vn.verticalIconBox?(Q=We(vn.verticalIconBox),y=Q.box.length>0):(Q=We(vn.iconBox),y=Q.box.length>0),g=g&&Q.offscreen}const Be=ke||Ci.numHorizontalGlyphVertices===0&&Ci.numVerticalGlyphVertices===0,Re=Xe||Ci.numIconVertices===0;if(Be||Re?Re?Be||(y=y&&p):p=y&&p:y=p=y&&p,p&&N&&N.box&&this.collisionIndex.insertCollisionBox(N.box,ct,B.get("text-ignore-placement"),k.bucketInstanceId,F&&F.box&&ye?ye:oe,Ke.ID),y&&Q&&this.collisionIndex.insertCollisionBox(Q.box,bt,B.get("icon-ignore-placement"),k.bucketInstanceId,be,Ke.ID),H&&(p&&this.collisionIndex.insertCollisionCircles(H.circles,ct,B.get("text-ignore-placement"),k.bucketInstanceId,oe,Ke.ID),A)){const We=k.bucketInstanceId;let Ce=this.collisionCircleArrays[We];Ce===void 0&&(Ce=this.collisionCircleArrays[We]=new Ne);for(let Ve=0;Ve<H.circles.length;Ve+=4)Ce.circles.push(H.circles[Ve+0]),Ce.circles.push(H.circles[Ve+1]),Ce.circles.push(H.circles[Ve+2]),Ce.circles.push(H.collisionDetected?1:0)}this.placements[Ci.crossTileID]=new Ie(p||ui,y||qt,g||k.justReloaded),_[Ci.crossTileID]=!0};if(ti){const Ci=k.getSortedSymbolIndexes(this.transform.angle);for(let vn=Ci.length-1;vn>=0;--vn){const p=Ci[vn];qi(k.symbolInstances.get(p),k.collisionArrays[p])}}else for(let Ci=l.symbolInstanceStart;Ci<l.symbolInstanceEnd;Ci++)qi(k.symbolInstances.get(Ci),k.collisionArrays[Ci]);if(A&&k.bucketInstanceId in this.collisionCircleArrays){const Ci=this.collisionCircleArrays[k.bucketInstanceId];h.invert(Ci.invProjMatrix,j),Ci.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1}markUsedJustification(l,_,A,k){let B;B=k===h.WritingMode.vertical?A.verticalPlacedTextSymbolIndex:{left:A.leftJustifiedTextSymbolIndex,center:A.centerJustifiedTextSymbolIndex,right:A.rightJustifiedTextSymbolIndex}[h.getAnchorJustification(_)];const j=[A.leftJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.rightJustifiedTextSymbolIndex,A.verticalPlacedTextSymbolIndex];for(const Z of j)Z>=0&&(l.text.placedSymbolArray.get(Z).crossTileID=B>=0&&Z!==B?0:A.crossTileID)}markUsedOrientation(l,_,A){const k=_===h.WritingMode.horizontal||_===h.WritingMode.horizontalOnly?_:0,B=_===h.WritingMode.vertical?_:0,j=[A.leftJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.rightJustifiedTextSymbolIndex];for(const Z of j)l.text.placedSymbolArray.get(Z).placedOrientation=k;A.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(A.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const _=this.prevPlacement;let A=!1;this.prevZoomAdjustment=_?_.zoomAdjustment(this.transform.zoom):0;const k=_?_.symbolFadeChange(l):1,B=_?_.opacities:{},j=_?_.variableOffsets:{},Z=_?_.placedOrientations:{};for(const J in this.placements){const ie=this.placements[J],ae=B[J];ae?(this.opacities[J]=new tt(ae,k,ie.text,ie.icon),A=A||ie.text!==ae.text.placed||ie.icon!==ae.icon.placed):(this.opacities[J]=new tt(null,k,ie.text,ie.icon,ie.skipFade),A=A||ie.text||ie.icon)}for(const J in B){const ie=B[J];if(!this.opacities[J]){const ae=new tt(ie,k,!1,!1);ae.isHidden()||(this.opacities[J]=ae,A=A||ie.text.placed||ie.icon.placed)}}for(const J in j)this.variableOffsets[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.variableOffsets[J]=j[J]);for(const J in Z)this.placedOrientations[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.placedOrientations[J]=Z[J]);A?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=_?_.lastPlacementChangeTime:l)}updateLayerOpacities(l,_){const A={};for(const k of _){const B=k.getBucket(l);B&&k.latestFeatureIndex&&l.id===B.layerIds[0]&&this.updateBucketOpacities(B,A,k.collisionBoxArray)}}updateBucketOpacities(l,_,A){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const k=l.layers[0].layout,B=new tt(null,0,!1,!1,!0),j=k.get("text-allow-overlap"),Z=k.get("icon-allow-overlap"),J=k.get("text-variable-anchor"),ie=k.get("text-rotation-alignment")==="map",ae=k.get("text-pitch-alignment")==="map",ge=k.get("icon-text-fit")!=="none",Ae=new tt(null,0,j&&(Z||!l.hasIconData()||k.get("icon-optional")),Z&&(j||!l.hasTextData()||k.get("text-optional")),!0);!l.collisionArrays&&A&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(A);const Ke=(ke,Xe,ct)=>{for(let lt=0;lt<Xe/4;lt++)ke.opacityVertexArray.emplaceBack(ct)};for(let ke=0;ke<l.symbolInstances.length;ke++){const Xe=l.symbolInstances.get(ke),{numHorizontalGlyphVertices:ct,numVerticalGlyphVertices:lt,crossTileID:bt}=Xe;let pt=this.opacities[bt];_[bt]?pt=B:pt||(pt=Ae,this.opacities[bt]=pt),_[bt]=!0;const jt=Xe.numIconVertices>0,Rt=this.placedOrientations[Xe.crossTileID],Ft=Rt===h.WritingMode.vertical,ti=Rt===h.WritingMode.horizontal||Rt===h.WritingMode.horizontalOnly;if(ct>0||lt>0){const ui=_t(pt.text);Ke(l.text,ct,Ft?si:ui),Ke(l.text,lt,ti?si:ui);const qt=pt.text.isHidden();[Xe.rightJustifiedTextSymbolIndex,Xe.centerJustifiedTextSymbolIndex,Xe.leftJustifiedTextSymbolIndex].forEach(vn=>{vn>=0&&(l.text.placedSymbolArray.get(vn).hidden=qt||Ft?1:0)}),Xe.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Xe.verticalPlacedTextSymbolIndex).hidden=qt||ti?1:0);const qi=this.variableOffsets[Xe.crossTileID];qi&&this.markUsedJustification(l,qi.anchor,Xe,Rt);const Ci=this.placedOrientations[Xe.crossTileID];Ci&&(this.markUsedJustification(l,"left",Xe,Ci),this.markUsedOrientation(l,Ci,Xe))}if(jt){const ui=_t(pt.icon),qt=!(ge&&Xe.verticalPlacedIconSymbolIndex&&Ft);Xe.placedIconSymbolIndex>=0&&(Ke(l.icon,Xe.numIconVertices,qt?ui:si),l.icon.placedSymbolArray.get(Xe.placedIconSymbolIndex).hidden=pt.icon.isHidden()),Xe.verticalPlacedIconSymbolIndex>=0&&(Ke(l.icon,Xe.numVerticalIconVertices,qt?si:ui),l.icon.placedSymbolArray.get(Xe.verticalPlacedIconSymbolIndex).hidden=pt.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const ui=l.collisionArrays[ke];if(ui){let qt=new h.pointGeometry(0,0);if(ui.textBox||ui.verticalTextBox){let Ci=!0;if(J){const vn=this.variableOffsets[bt];vn?(qt=W(vn.anchor,vn.width,vn.height,vn.textOffset,vn.textBoxScale),ie&&qt._rotate(ae?this.transform.angle:-this.transform.angle)):Ci=!1}ui.textBox&&me(l.textCollisionBox.collisionVertexArray,pt.text.placed,!Ci||Ft,qt.x,qt.y),ui.verticalTextBox&&me(l.textCollisionBox.collisionVertexArray,pt.text.placed,!Ci||ti,qt.x,qt.y)}const qi=Boolean(!ti&&ui.verticalIconBox);ui.iconBox&&me(l.iconCollisionBox.collisionVertexArray,pt.icon.placed,qi,ge?qt.x:0,ge?qt.y:0),ui.verticalIconBox&&me(l.iconCollisionBox.collisionVertexArray,pt.icon.placed,!qi,ge?qt.x:0,ge?qt.y:0)}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const ke=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ke.invProjMatrix,l.placementViewportMatrix=ke.viewportMatrix,l.collisionCircleArray=ke.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,_){const A=this.zoomAtLastRecencyCheck===_?1-this.zoomAdjustment(_):1;return this.zoomAtLastRecencyCheck=_,this.commitTime+this.fadeDuration*A>l}setStale(){this.stale=!0}}function me(C,l,_,A,k){C.emplaceBack(l?1:0,_?1:0,A||0,k||0),C.emplaceBack(l?1:0,_?1:0,A||0,k||0),C.emplaceBack(l?1:0,_?1:0,A||0,k||0),C.emplaceBack(l?1:0,_?1:0,A||0,k||0)}const Te=Math.pow(2,25),xe=Math.pow(2,24),Le=Math.pow(2,17),Me=Math.pow(2,16),Pe=Math.pow(2,9),yt=Math.pow(2,8),st=Math.pow(2,1);function _t(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;const l=C.placed?1:0,_=Math.floor(127*C.opacity);return _*Te+l*xe+_*Le+l*Me+_*Pe+l*yt+_*st+l}const si=0;class De{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,_,A,k,B){const j=this._bucketParts;for(;this._currentTileIndex<l.length;)if(_.getBucketParts(j,k,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,j.sort((Z,J)=>Z.sortKey-J.sortKey));this._currentPartIndex<j.length;)if(_.placeLayerBucketPart(j[this._currentPartIndex],this._seenCrossTileIDs,A),this._currentPartIndex++,B())return!0;return!1}}class Yt{constructor(l,_,A,k,B,j,Z){this.placement=new le(l,B,j,Z),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=A,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(l,_,A){const k=h.exported.now(),B=()=>{const j=h.exported.now()-k;return!this._forceFullPlacement&&j>2};for(;this._currentPlacementIndex>=0;){const j=_[l[this._currentPlacementIndex]],Z=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=Z)&&(!j.maxzoom||j.maxzoom>Z)){if(this._inProgressLayer||(this._inProgressLayer=new De(j)),this._inProgressLayer.continuePlacement(A[j.source],this.placement,this._showCollisionBoxes,j,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const hi=512/h.EXTENT/2;class kn{constructor(l,_,A){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=A;for(let k=0;k<_.length;k++){const B=_.get(k),j=B.key;this.indexedSymbolInstances[j]||(this.indexedSymbolInstances[j]=[]),this.indexedSymbolInstances[j].push({crossTileID:B.crossTileID,coord:this.getScaledCoordinates(B,l)})}}getScaledCoordinates(l,_){const A=hi/Math.pow(2,_.canonical.z-this.tileID.canonical.z);return{x:Math.floor((_.canonical.x*h.EXTENT+l.anchorX)*A),y:Math.floor((_.canonical.y*h.EXTENT+l.anchorY)*A)}}findMatches(l,_,A){const k=this.tileID.canonical.z<_.canonical.z?1:Math.pow(2,this.tileID.canonical.z-_.canonical.z);for(let B=0;B<l.length;B++){const j=l.get(B);if(j.crossTileID)continue;const Z=this.indexedSymbolInstances[j.key];if(!Z)continue;const J=this.getScaledCoordinates(j,_);for(const ie of Z)if(Math.abs(ie.coord.x-J.x)<=k&&Math.abs(ie.coord.y-J.y)<=k&&!A[ie.crossTileID]){A[ie.crossTileID]=!0,j.crossTileID=ie.crossTileID;break}}}}class Wi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class nn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const _=Math.round((l-this.lng)/360);if(_!==0)for(const A in this.indexes){const k=this.indexes[A],B={};for(const j in k){const Z=k[j];Z.tileID=Z.tileID.unwrapTo(Z.tileID.wrap+_),B[Z.tileID.key]=Z}this.indexes[A]=B}this.lng=l}addBucket(l,_,A){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===_.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let B=0;B<_.symbolInstances.length;B++)_.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const k=this.usedCrossTileIDs[l.overscaledZ];for(const B in this.indexes){const j=this.indexes[B];if(Number(B)>l.overscaledZ)for(const Z in j){const J=j[Z];J.tileID.isChildOf(l)&&J.findMatches(_.symbolInstances,l,k)}else{const Z=j[l.scaledTo(Number(B)).key];Z&&Z.findMatches(_.symbolInstances,l,k)}}for(let B=0;B<_.symbolInstances.length;B++){const j=_.symbolInstances.get(B);j.crossTileID||(j.crossTileID=A.generate(),k[j.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new kn(l,_.symbolInstances,_.bucketInstanceId),!0}removeBucketCrossTileIDs(l,_){for(const A in _.indexedSymbolInstances)for(const k of _.indexedSymbolInstances[A])delete this.usedCrossTileIDs[l][k.crossTileID]}removeStaleBuckets(l){let _=!1;for(const A in this.indexes){const k=this.indexes[A];for(const B in k)l[k[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(A,k[B]),delete k[B],_=!0)}return _}}class Fi{constructor(){this.layerIndexes={},this.crossTileIDs=new Wi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,_,A){let k=this.layerIndexes[l.id];k===void 0&&(k=this.layerIndexes[l.id]=new nn);let B=!1;const j={};k.handleWrapJump(A);for(const Z of _){const J=Z.getBucket(l);J&&l.id===J.layerIds[0]&&(J.bucketInstanceId||(J.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket(Z.tileID,J,this.crossTileIDs)&&(B=!0),j[J.bucketInstanceId]=!0)}return k.removeStaleBuckets(j)&&(B=!0),B}pruneUnusedLayers(l){const _={};l.forEach(A=>{_[A]=!0});for(const A in this.layerIndexes)_[A]||delete this.layerIndexes[A]}}const Ii=(C,l)=>h.emitValidationErrors(C,l&&l.filter(_=>_.identifier!=="source.canvas")),hn=h.pick(rn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),cr=h.pick(rn,["setCenter","setZoom","setBearing","setPitch"]),ho=function(){const C={},l=h.spec.$version;for(const _ in h.spec.$root){const A=h.spec.$root[_];if(A.required){let k=null;k=_==="version"?l:A.type==="array"?[]:{},k!=null&&(C[_]=k)}}return C}();class pr extends h.Evented{constructor(l,_={}){super(),this.map=l,this.dispatcher=new Mt(At(),this),this.imageManager=new Ue,this.imageManager.setEventedParent(this),this.glyphManager=new at(l._requestManager,_.localIdeographFontFamily),this.lineAtlas=new qe(256,512),this.crossTileSymbolIndex=new Fi,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new h.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",h.getReferrer());const A=this;this._rtlTextPluginCallback=pr.registerForPluginStateChange(k=>{A.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},(B,j)=>{if(h.triggerPluginCompletionEvent(B),j&&j.every(Z=>Z))for(const Z in A.sourceCaches)A.sourceCaches[Z].reload()})}),this.on("data",k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const B=this.sourceCaches[k.sourceId];if(!B)return;const j=B.getSource();if(j&&j.vectorLayerIds)for(const Z in this._layers){const J=this._layers[Z];J.source===j.id&&this._validateLayer(J)}})}loadURL(l,_={}){this.fire(new h.Event("dataloading",{dataType:"style"}));const A=typeof _.validate!="boolean"||_.validate,k=this.map._requestManager.transformRequest(l,h.ResourceType.Style);this._request=h.getJSON(k,(B,j)=>{this._request=null,B?this.fire(new h.ErrorEvent(B)):j&&this._load(j,A)})}loadJSON(l,_={}){this.fire(new h.Event("dataloading",{dataType:"style"})),this._request=h.exported.frame(()=>{this._request=null,this._load(l,_.validate!==!1)})}loadEmpty(){this.fire(new h.Event("dataloading",{dataType:"style"})),this._load(ho,!1)}_load(l,_){if(_&&Ii(this,h.validateStyle(l)))return;this._loaded=!0,this.stylesheet=l;for(const k in l.sources)this.addSource(k,l.sources[k],{validate:!1});l.sprite?this._loadSprite(l.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(l.glyphs);const A=Nn(this.stylesheet.layers);this._order=A.map(k=>k.id),this._layers={},this._serializedLayers={};for(let k of A)k=h.createStyleLayer(k),k.setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k,this._serializedLayers[k.id]=k.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Dt(this.stylesheet.light),this.fire(new h.Event("data",{dataType:"style"})),this.fire(new h.Event("style.load"))}_loadSprite(l){this._spriteRequest=function(_,A,k,B){let j,Z,J;const ie=k>1?"@2x":"";let ae=h.getJSON(A.transformRequest(A.normalizeSpriteURL(_,ie,".json"),h.ResourceType.SpriteJSON),(Ke,ke)=>{ae=null,J||(J=Ke,j=ke,Ae())}),ge=h.getImage(A.transformRequest(A.normalizeSpriteURL(_,ie,".png"),h.ResourceType.SpriteImage),(Ke,ke)=>{ge=null,J||(J=Ke,Z=ke,Ae())});function Ae(){if(J)B(J);else if(j&&Z){const Ke=h.exported.getImageData(Z),ke={};for(const Xe in j){const{width:ct,height:lt,x:bt,y:pt,sdf:jt,pixelRatio:Rt,stretchX:Ft,stretchY:ti,content:ui}=j[Xe],qt=new h.RGBAImage({width:ct,height:lt});h.RGBAImage.copy(Ke,qt,{x:bt,y:pt},{x:0,y:0},{width:ct,height:lt}),ke[Xe]={data:qt,pixelRatio:Rt,sdf:jt,stretchX:Ft,stretchY:ti,content:ui}}B(null,ke)}}return{cancel(){ae&&(ae.cancel(),ae=null),ge&&(ge.cancel(),ge=null)}}}(l,this.map._requestManager,this.map.getPixelRatio(),(_,A)=>{if(this._spriteRequest=null,_)this.fire(new h.ErrorEvent(_));else if(A)for(const k in A)this.imageManager.addImage(k,A[k]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))})}_validateLayer(l){const _=this.sourceCaches[l.source];if(!_)return;const A=l.sourceLayer;if(!A)return;const k=_.getSource();(k.type==="geojson"||k.vectorLayerIds&&k.vectorLayerIds.indexOf(A)===-1)&&this.fire(new h.ErrorEvent(new Error(`Source layer "${A}" does not exist on source "${k.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const _=[];for(const A of l){const k=this._layers[A];k.type!=="custom"&&_.push(k.serialize())}return _}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const _=this._changed;if(this._changed){const k=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(k.length||B.length)&&this._updateWorkerLayers(k,B);for(const j in this._updatedSources){const Z=this._updatedSources[j];Z==="reload"?this._reloadSource(j):Z==="clear"&&this._clearSource(j)}this._updateTilesForChangedImages();for(const j in this._updatedPaintProps)this._layers[j].updateTransitions(l);this.light.updateTransitions(l),this._resetUpdates()}const A={};for(const k in this.sourceCaches){const B=this.sourceCaches[k];A[k]=B.used,B.used=!1}for(const k of this._order){const B=this._layers[k];B.recalculate(l,this._availableImages),!B.isHidden(l.zoom)&&B.source&&(this.sourceCaches[B.source].used=!0)}for(const k in A){const B=this.sourceCaches[k];A[k]!==B.used&&B.fire(new h.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:k}))}this.light.recalculate(l),this.z=l.zoom,_&&this.fire(new h.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const _ in this.sourceCaches)this.sourceCaches[_].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,_){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:_})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),Ii(this,h.validateStyle(l)))return!1;(l=h.clone$1(l)).layers=Nn(l.layers);const _=function(k,B){if(!k)return[{command:rn.setStyle,args:[B]}];let j=[];try{if(!R(k.version,B.version))return[{command:rn.setStyle,args:[B]}];R(k.center,B.center)||j.push({command:rn.setCenter,args:[B.center]}),R(k.zoom,B.zoom)||j.push({command:rn.setZoom,args:[B.zoom]}),R(k.bearing,B.bearing)||j.push({command:rn.setBearing,args:[B.bearing]}),R(k.pitch,B.pitch)||j.push({command:rn.setPitch,args:[B.pitch]}),R(k.sprite,B.sprite)||j.push({command:rn.setSprite,args:[B.sprite]}),R(k.glyphs,B.glyphs)||j.push({command:rn.setGlyphs,args:[B.glyphs]}),R(k.transition,B.transition)||j.push({command:rn.setTransition,args:[B.transition]}),R(k.light,B.light)||j.push({command:rn.setLight,args:[B.light]});const Z={},J=[];(function(ae,ge,Ae,Ke){let ke;for(ke in ge=ge||{},ae=ae||{})Object.prototype.hasOwnProperty.call(ae,ke)&&(Object.prototype.hasOwnProperty.call(ge,ke)||Ln(ke,Ae,Ke));for(ke in ge)Object.prototype.hasOwnProperty.call(ge,ke)&&(Object.prototype.hasOwnProperty.call(ae,ke)?R(ae[ke],ge[ke])||(ae[ke].type==="geojson"&&ge[ke].type==="geojson"&&Oi(ae,ge,ke)?Ae.push({command:rn.setGeoJSONSourceData,args:[ke,ge[ke].data]}):zt(ke,ge,Ae,Ke)):Jn(ke,ge,Ae))})(k.sources,B.sources,J,Z);const ie=[];k.layers&&k.layers.forEach(ae=>{Z[ae.source]?j.push({command:rn.removeLayer,args:[ae.id]}):ie.push(ae)}),j=j.concat(J),function(ae,ge,Ae){ge=ge||[];const Ke=(ae=ae||[]).map(Bt),ke=ge.map(Bt),Xe=ae.reduce(Ki,{}),ct=ge.reduce(Ki,{}),lt=Ke.slice(),bt=Object.create(null);let pt,jt,Rt,Ft,ti,ui,qt;for(pt=0,jt=0;pt<Ke.length;pt++)Rt=Ke[pt],Object.prototype.hasOwnProperty.call(ct,Rt)?jt++:(Ae.push({command:rn.removeLayer,args:[Rt]}),lt.splice(lt.indexOf(Rt,jt),1));for(pt=0,jt=0;pt<ke.length;pt++)Rt=ke[ke.length-1-pt],lt[lt.length-1-pt]!==Rt&&(Object.prototype.hasOwnProperty.call(Xe,Rt)?(Ae.push({command:rn.removeLayer,args:[Rt]}),lt.splice(lt.lastIndexOf(Rt,lt.length-jt),1)):jt++,ui=lt[lt.length-pt],Ae.push({command:rn.addLayer,args:[ct[Rt],ui]}),lt.splice(lt.length-pt,0,Rt),bt[Rt]=!0);for(pt=0;pt<ke.length;pt++)if(Rt=ke[pt],Ft=Xe[Rt],ti=ct[Rt],!bt[Rt]&&!R(Ft,ti))if(R(Ft.source,ti.source)&&R(Ft["source-layer"],ti["source-layer"])&&R(Ft.type,ti.type)){for(qt in Ze(Ft.layout,ti.layout,Ae,Rt,null,rn.setLayoutProperty),Ze(Ft.paint,ti.paint,Ae,Rt,null,rn.setPaintProperty),R(Ft.filter,ti.filter)||Ae.push({command:rn.setFilter,args:[Rt,ti.filter]}),R(Ft.minzoom,ti.minzoom)&&R(Ft.maxzoom,ti.maxzoom)||Ae.push({command:rn.setLayerZoomRange,args:[Rt,ti.minzoom,ti.maxzoom]}),Ft)Object.prototype.hasOwnProperty.call(Ft,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?Ze(Ft[qt],ti[qt],Ae,Rt,qt.slice(6),rn.setPaintProperty):R(Ft[qt],ti[qt])||Ae.push({command:rn.setLayerProperty,args:[Rt,qt,ti[qt]]}));for(qt in ti)Object.prototype.hasOwnProperty.call(ti,qt)&&!Object.prototype.hasOwnProperty.call(Ft,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?Ze(Ft[qt],ti[qt],Ae,Rt,qt.slice(6),rn.setPaintProperty):R(Ft[qt],ti[qt])||Ae.push({command:rn.setLayerProperty,args:[Rt,qt,ti[qt]]}))}else Ae.push({command:rn.removeLayer,args:[Rt]}),ui=lt[lt.lastIndexOf(Rt)+1],Ae.push({command:rn.addLayer,args:[ti,ui]})}(ie,B.layers,j)}catch(Z){console.warn("Unable to compute style diff:",Z),j=[{command:rn.setStyle,args:[B]}]}return j}(this.serialize(),l).filter(k=>!(k.command in cr));if(_.length===0)return!1;const A=_.filter(k=>!(k.command in hn));if(A.length>0)throw new Error(`Unimplemented: ${A.map(k=>k.command).join(", ")}.`);return _.forEach(k=>{k.command!=="setTransition"&&this[k.command].apply(this,k.args)}),this.stylesheet=l,!0}addImage(l,_){if(this.getImage(l))return this.fire(new h.ErrorEvent(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,_),this._afterImageUpdated(l)}updateImage(l,_){this.imageManager.updateImage(l,_)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new h.ErrorEvent(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,_,A={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!_.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(_).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(_.type)>=0&&this._validate(h.validateStyle.source,`sources.${l}`,_,null,A))return;this.map&&this.map._collectResourceTiming&&(_.collectResourceTiming=!0);const k=this.sourceCaches[l]=new gt(l,_,this.dispatcher);k.style=this,k.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:k.serialize(),sourceId:l})),k.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const A in this._layers)if(this._layers[A].source===l)return this.fire(new h.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${A}" is using it.`)));const _=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],_.fire(new h.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),_.setEventedParent(null),_.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,_){this._checkLoaded(),this.sourceCaches[l].getSource().setData(_),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,_,A={}){this._checkLoaded();const k=l.id;if(this.getLayer(k))return void this.fire(new h.ErrorEvent(new Error(`Layer "${k}" already exists on this map.`)));let B;if(l.type==="custom"){if(Ii(this,h.validateCustomStyleLayer(l)))return;B=h.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(k,l.source),l=h.clone$1(l),l=h.extend(l,{source:k})),this._validate(h.validateStyle.layer,`layers.${k}`,l,{arrayIndex:-1},A))return;B=h.createStyleLayer(l),this._validateLayer(B),B.setEventedParent(this,{layer:{id:k}}),this._serializedLayers[B.id]=B.serialize()}const j=_?this._order.indexOf(_):this._order.length;if(_&&j===-1)this.fire(new h.ErrorEvent(new Error(`Cannot add layer "${k}" before non-existing layer "${_}".`)));else{if(this._order.splice(j,0,k),this._layerOrderChanged=!0,this._layers[k]=B,this._removedLayers[k]&&B.source&&B.type!=="custom"){const Z=this._removedLayers[k];delete this._removedLayers[k],Z.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}moveLayer(l,_){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new h.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===_)return;const A=this._order.indexOf(l);this._order.splice(A,1);const k=_?this._order.indexOf(_):this._order.length;_&&k===-1?this.fire(new h.ErrorEvent(new Error(`Cannot move layer "${l}" before non-existing layer "${_}".`))):(this._order.splice(k,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const _=this._layers[l];if(!_)return void this.fire(new h.ErrorEvent(new Error(`Cannot remove non-existing layer "${l}".`)));_.setEventedParent(null);const A=this._order.indexOf(l);this._order.splice(A,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=_,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],_.onRemove&&_.onRemove(this.map)}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,_,A){this._checkLoaded();const k=this.getLayer(l);k?k.minzoom===_&&k.maxzoom===A||(_!=null&&(k.minzoom=_),A!=null&&(k.maxzoom=A),this._updateLayer(k)):this.fire(new h.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,_,A={}){this._checkLoaded();const k=this.getLayer(l);if(k){if(!R(k.filter,_))return _==null?(k.filter=void 0,void this._updateLayer(k)):void(this._validate(h.validateStyle.filter,`layers.${k.id}.filter`,_,null,A)||(k.filter=h.clone$1(_),this._updateLayer(k)))}else this.fire(new h.ErrorEvent(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return h.clone$1(this.getLayer(l).filter)}setLayoutProperty(l,_,A,k={}){this._checkLoaded();const B=this.getLayer(l);B?R(B.getLayoutProperty(_),A)||(B.setLayoutProperty(_,A,k),this._updateLayer(B)):this.fire(new h.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,_){const A=this.getLayer(l);if(A)return A.getLayoutProperty(_);this.fire(new h.ErrorEvent(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,_,A,k={}){this._checkLoaded();const B=this.getLayer(l);B?R(B.getPaintProperty(_),A)||(B.setPaintProperty(_,A,k)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new h.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,_){return this.getLayer(l).getPaintProperty(_)}setFeatureState(l,_){this._checkLoaded();const A=l.source,k=l.sourceLayer,B=this.sourceCaches[A];if(B===void 0)return void this.fire(new h.ErrorEvent(new Error(`The source '${A}' does not exist in the map's style.`)));const j=B.getSource().type;j==="geojson"&&k?this.fire(new h.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):j!=="vector"||k?(l.id===void 0&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),B.setFeatureState(k,l.id,_)):this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,_){this._checkLoaded();const A=l.source,k=this.sourceCaches[A];if(k===void 0)return void this.fire(new h.ErrorEvent(new Error(`The source '${A}' does not exist in the map's style.`)));const B=k.getSource().type,j=B==="vector"?l.sourceLayer:void 0;B!=="vector"||j?_&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new h.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):k.removeFeatureState(j,l.id,_):this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const _=l.source,A=l.sourceLayer,k=this.sourceCaches[_];if(k!==void 0)return k.getSource().type!=="vector"||A?(l.id===void 0&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),k.getFeatureState(A,l.id)):void this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new h.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)))}getTransition(){return h.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return h.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:h.mapObject(this.sourceCaches,l=>l.serialize()),layers:this._serializeLayers(this._order)},l=>l!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(l){const _=j=>this._layers[j].type==="fill-extrusion",A={},k=[];for(let j=this._order.length-1;j>=0;j--){const Z=this._order[j];if(_(Z)){A[Z]=j;for(const J of l){const ie=J[Z];if(ie)for(const ae of ie)k.push(ae)}}}k.sort((j,Z)=>Z.intersectionZ-j.intersectionZ);const B=[];for(let j=this._order.length-1;j>=0;j--){const Z=this._order[j];if(_(Z))for(let J=k.length-1;J>=0;J--){const ie=k[J].feature;if(A[ie.layer.id]<j)break;B.push(ie),k.pop()}else for(const J of l){const ie=J[Z];if(ie)for(const ae of ie)B.push(ae.feature)}}return B}queryRenderedFeatures(l,_,A){_&&_.filter&&this._validate(h.validateStyle.filter,"queryRenderedFeatures.filter",_.filter,null,_);const k={};if(_&&_.layers){if(!Array.isArray(_.layers))return this.fire(new h.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const j of _.layers){const Z=this._layers[j];if(!Z)return this.fire(new h.ErrorEvent(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];k[Z.source]=!0}}const B=[];_.availableImages=this._availableImages;for(const j in this.sourceCaches)_.layers&&!k[j]||B.push(ht(this.sourceCaches[j],this._layers,this._serializedLayers,l,_,A));return this.placement&&B.push(function(j,Z,J,ie,ae,ge,Ae){const Ke={},ke=ge.queryRenderedSymbols(ie),Xe=[];for(const ct of Object.keys(ke).map(Number))Xe.push(Ae[ct]);Xe.sort(It);for(const ct of Xe){const lt=ct.featureIndex.lookupSymbolFeatures(ke[ct.bucketInstanceId],Z,ct.bucketIndex,ct.sourceLayerIndex,ae.filter,ae.layers,ae.availableImages,j);for(const bt in lt){const pt=Ke[bt]=Ke[bt]||[],jt=lt[bt];jt.sort((Rt,Ft)=>{const ti=ct.featureSortOrder;if(ti){const ui=ti.indexOf(Rt.featureIndex);return ti.indexOf(Ft.featureIndex)-ui}return Ft.featureIndex-Rt.featureIndex});for(const Rt of jt)pt.push(Rt)}}for(const ct in Ke)Ke[ct].forEach(lt=>{const bt=lt.feature,pt=J[j[ct].source].getFeatureState(bt.layer["source-layer"],bt.id);bt.source=bt.layer.source,bt.layer["source-layer"]&&(bt.sourceLayer=bt.layer["source-layer"]),bt.state=pt});return Ke}(this._layers,this._serializedLayers,this.sourceCaches,l,_,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(l,_){_&&_.filter&&this._validate(h.validateStyle.filter,"querySourceFeatures.filter",_.filter,null,_);const A=this.sourceCaches[l];return A?function(k,B){const j=k.getRenderableIds().map(ie=>k.getTileByID(ie)),Z=[],J={};for(let ie=0;ie<j.length;ie++){const ae=j[ie],ge=ae.tileID.canonical.key;J[ge]||(J[ge]=!0,ae.querySourceFeatures(Z,B))}return Z}(A,_):[]}addSourceType(l,_,A){return pr.getSourceType(l)?A(new Error(`A source type called "${l}" already exists.`)):(pr.setSourceType(l,_),_.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:_.workerSourceURL},A):A(null,null))}getLight(){return this.light.getLight()}setLight(l,_={}){this._checkLoaded();const A=this.light.getLight();let k=!1;for(const j in l)if(!R(l[j],A[j])){k=!0;break}if(!k)return;const B={now:h.exported.now(),transition:h.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,_),this.light.updateTransitions(B)}_validate(l,_,A,k,B={}){return(!B||B.validate!==!1)&&Ii(this,l.call(h.validateStyle,h.extend({key:_,style:this.serialize(),value:A,styleSpec:h.spec},k)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),h.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const _=this.sourceCaches[l];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const _ in this.sourceCaches)this.sourceCaches[_].update(l)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,_,A,k,B=!1){let j=!1,Z=!1;const J={};for(const ie of this._order){const ae=this._layers[ie];if(ae.type!=="symbol")continue;if(!J[ae.source]){const Ae=this.sourceCaches[ae.source];J[ae.source]=Ae.getRenderableIds(!0).map(Ke=>Ae.getTileByID(Ke)).sort((Ke,ke)=>ke.tileID.overscaledZ-Ke.tileID.overscaledZ||(Ke.tileID.isLessThan(ke.tileID)?-1:1))}const ge=this.crossTileSymbolIndex.addLayer(ae,J[ae.source],l.center.lng);j=j||ge}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||A===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.exported.now(),l.zoom))&&(this.pauseablePlacement=new Yt(l,this._order,B,_,A,k,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,J),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.exported.now()),Z=!0),j&&this.pauseablePlacement.placement.setStale()),Z||j)for(const ie of this._order){const ae=this._layers[ie];ae.type==="symbol"&&this.placement.updateLayerOpacities(ae,J[ae.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.exported.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,_,A){this.imageManager.getImages(_.icons,A),this._updateTilesForChangedImages();const k=this.sourceCaches[_.source];k&&k.setDependencies(_.tileID.key,_.type,_.icons)}getGlyphs(l,_,A){this.glyphManager.getGlyphs(_.stacks,A)}getResource(l,_,A){return h.makeRequest(_,A)}}pr.getSourceType=function(C){return bi[C]},pr.setSourceType=function(C,l){bi[C]=l},pr.registerForPluginStateChange=h.registerForPluginStateChange;var Zo=h.createLayout([{name:"a_pos",type:"Int16",components:2}]),iu={prelude:Cr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:Cr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Cr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Cr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Cr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Cr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Cr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Cr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Cr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Cr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:Cr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Cr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Cr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Cr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Cr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Cr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Cr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Cr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Cr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:Cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:Cr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Cr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Cr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:Cr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Cr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function Cr(C,l){const _=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,A=l.match(/attribute ([\w]+) ([\w]+)/g),k=C.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=B?B.concat(k):k,Z={};return{fragmentSource:C=C.replace(_,(J,ie,ae,ge,Ae)=>(Z[Ae]=!0,ie==="define"?`
#ifndef HAS_UNIFORM_u_${Ae}
varying ${ae} ${ge} ${Ae};
#else
uniform ${ae} ${ge} u_${Ae};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ae}
    ${ae} ${ge} ${Ae} = u_${Ae};
#endif
`)),vertexSource:l=l.replace(_,(J,ie,ae,ge,Ae)=>{const Ke=ge==="float"?"vec2":"vec4",ke=Ae.match(/color/)?"color":Ke;return Z[Ae]?ie==="define"?`
#ifndef HAS_UNIFORM_u_${Ae}
uniform lowp float u_${Ae}_t;
attribute ${ae} ${Ke} a_${Ae};
varying ${ae} ${ge} ${Ae};
#else
uniform ${ae} ${ge} u_${Ae};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ae}
    ${Ae} = a_${Ae};
#else
    ${ae} ${ge} ${Ae} = u_${Ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ae}
    ${Ae} = unpack_mix_${ke}(a_${Ae}, u_${Ae}_t);
#else
    ${ae} ${ge} ${Ae} = u_${Ae};
#endif
`:ie==="define"?`
#ifndef HAS_UNIFORM_u_${Ae}
uniform lowp float u_${Ae}_t;
attribute ${ae} ${Ke} a_${Ae};
#else
uniform ${ae} ${ge} u_${Ae};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ae}
    ${ae} ${ge} ${Ae} = a_${Ae};
#else
    ${ae} ${ge} ${Ae} = u_${Ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ae}
    ${ae} ${ge} ${Ae} = unpack_mix_${ke}(a_${Ae}, u_${Ae}_t);
#else
    ${ae} ${ge} ${Ae} = u_${Ae};
#endif
`}),staticAttributes:A,staticUniforms:j}}class oo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,_,A,k,B,j,Z,J){this.context=l;let ie=this.boundPaintVertexBuffers.length!==k.length;for(let ae=0;!ie&&ae<k.length;ae++)this.boundPaintVertexBuffers[ae]!==k[ae]&&(ie=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===_&&this.boundLayoutVertexBuffer===A&&!ie&&this.boundIndexBuffer===B&&this.boundVertexOffset===j&&this.boundDynamicVertexBuffer===Z&&this.boundDynamicVertexBuffer2===J?(l.bindVertexArrayOES.set(this.vao),Z&&Z.bind(),B&&B.dynamicDraw&&B.bind(),J&&J.bind()):this.freshBind(_,A,k,B,j,Z,J)}freshBind(l,_,A,k,B,j,Z){let J;const ie=l.numAttributes,ae=this.context,ge=ae.gl;if(ae.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ae.extVertexArrayObject.createVertexArrayOES(),ae.bindVertexArrayOES.set(this.vao),J=0,this.boundProgram=l,this.boundLayoutVertexBuffer=_,this.boundPaintVertexBuffers=A,this.boundIndexBuffer=k,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=j,this.boundDynamicVertexBuffer2=Z;else{J=ae.currentNumAttributes||0;for(let Ae=ie;Ae<J;Ae++)ge.disableVertexAttribArray(Ae)}_.enableAttributes(ge,l);for(const Ae of A)Ae.enableAttributes(ge,l);j&&j.enableAttributes(ge,l),Z&&Z.enableAttributes(ge,l),_.bind(),_.setVertexAttribPointers(ge,l,B);for(const Ae of A)Ae.bind(),Ae.setVertexAttribPointers(ge,l,B);j&&(j.bind(),j.setVertexAttribPointers(ge,l,B)),k&&k.bind(),Z&&(Z.bind(),Z.setVertexAttribPointers(ge,l,B)),ae.currentNumAttributes=ie}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function al(C){const l=[];for(let _=0;_<C.length;_++){if(C[_]===null)continue;const A=C[_].split(" ");l.push(A.pop())}return l}class Qo{constructor(l,_,A,k,B,j){const Z=l.gl;this.program=Z.createProgram();const J=al(A.staticAttributes),ie=k?k.getBinderAttributes():[],ae=J.concat(ie),ge=A.staticUniforms?al(A.staticUniforms):[],Ae=k?k.getBinderUniforms():[],Ke=ge.concat(Ae),ke=[];for(const Rt of Ke)ke.indexOf(Rt)<0&&ke.push(Rt);const Xe=k?k.defines():[];j&&Xe.push("#define OVERDRAW_INSPECTOR;");const ct=Xe.concat(iu.prelude.fragmentSource,A.fragmentSource).join(`
`),lt=Xe.concat(iu.prelude.vertexSource,A.vertexSource).join(`
`),bt=Z.createShader(Z.FRAGMENT_SHADER);if(Z.isContextLost())return void(this.failedToCreate=!0);Z.shaderSource(bt,ct),Z.compileShader(bt),Z.attachShader(this.program,bt);const pt=Z.createShader(Z.VERTEX_SHADER);if(Z.isContextLost())return void(this.failedToCreate=!0);Z.shaderSource(pt,lt),Z.compileShader(pt),Z.attachShader(this.program,pt),this.attributes={};const jt={};this.numAttributes=ae.length;for(let Rt=0;Rt<this.numAttributes;Rt++)ae[Rt]&&(Z.bindAttribLocation(this.program,Rt,ae[Rt]),this.attributes[ae[Rt]]=Rt);Z.linkProgram(this.program),Z.deleteShader(pt),Z.deleteShader(bt);for(let Rt=0;Rt<ke.length;Rt++){const Ft=ke[Rt];if(Ft&&!jt[Ft]){const ti=Z.getUniformLocation(this.program,Ft);ti&&(jt[Ft]=ti)}}this.fixedUniforms=B(l,jt),this.binderUniforms=k?k.getUniforms(l,jt):[]}draw(l,_,A,k,B,j,Z,J,ie,ae,ge,Ae,Ke,ke,Xe,ct){const lt=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(A),l.setStencilMode(k),l.setColorMode(B),l.setCullFace(j);for(const pt in this.fixedUniforms)this.fixedUniforms[pt].set(Z[pt]);ke&&ke.setUniforms(l,this.binderUniforms,Ae,{zoom:Ke});const bt={[lt.LINES]:2,[lt.TRIANGLES]:3,[lt.LINE_STRIP]:1}[_];for(const pt of ge.get()){const jt=pt.vaos||(pt.vaos={});(jt[J]||(jt[J]=new oo)).bind(l,this,ie,ke?ke.getPaintVertexBuffers():[],ae,pt.vertexOffset,Xe,ct),lt.drawElements(_,pt.primitiveLength*bt,lt.UNSIGNED_SHORT,pt.primitiveOffset*bt*2)}}}function bo(C,l,_){const A=1/ze(_,1,l.transform.tileZoom),k=Math.pow(2,_.tileID.overscaledZ),B=_.tileSize*Math.pow(2,l.transform.tileZoom)/k,j=B*(_.tileID.canonical.x+_.tileID.wrap*k),Z=B*_.tileID.canonical.y;return{u_image:0,u_texsize:_.imageAtlasTexture.size,u_scale:[A,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[j>>16,Z>>16],u_pixel_coord_lower:[65535&j,65535&Z]}}const Ma=(C,l,_,A)=>{const k=l.style.light,B=k.properties.get("position"),j=[B.x,B.y,B.z],Z=function(){var ie=new h.ARRAY_TYPE(9);return h.ARRAY_TYPE!=Float32Array&&(ie[1]=0,ie[2]=0,ie[3]=0,ie[5]=0,ie[6]=0,ie[7]=0),ie[0]=1,ie[4]=1,ie[8]=1,ie}();k.properties.get("anchor")==="viewport"&&function(ie,ae){var ge=Math.sin(ae),Ae=Math.cos(ae);ie[0]=Ae,ie[1]=ge,ie[2]=0,ie[3]=-ge,ie[4]=Ae,ie[5]=0,ie[6]=0,ie[7]=0,ie[8]=1}(Z,-l.transform.angle),function(ie,ae,ge){var Ae=ae[0],Ke=ae[1],ke=ae[2];ie[0]=Ae*ge[0]+Ke*ge[3]+ke*ge[6],ie[1]=Ae*ge[1]+Ke*ge[4]+ke*ge[7],ie[2]=Ae*ge[2]+Ke*ge[5]+ke*ge[8]}(j,j,Z);const J=k.properties.get("color");return{u_matrix:C,u_lightpos:j,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[J.r,J.g,J.b],u_vertical_gradient:+_,u_opacity:A}},Br=(C,l,_,A,k,B,j)=>h.extend(Ma(C,l,_,A),bo(B,l,j),{u_height_factor:-Math.pow(2,k.overscaledZ)/j.tileSize/8}),La=C=>({u_matrix:C}),la=(C,l,_,A)=>h.extend(La(C),bo(_,l,A)),_c=(C,l)=>({u_matrix:C,u_world:l}),Pa=(C,l,_,A,k)=>h.extend(la(C,l,_,A),{u_world:k}),sl=(C,l,_,A)=>{const k=C.transform;let B,j;if(A.paint.get("circle-pitch-alignment")==="map"){const Z=ze(_,1,k.zoom);B=!0,j=[Z,Z]}else B=!1,j=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(A.paint.get("circle-pitch-scale")==="map"),u_matrix:C.translatePosMatrix(l.posMatrix,_,A.paint.get("circle-translate"),A.paint.get("circle-translate-anchor")),u_pitch_with_map:+B,u_device_pixel_ratio:C.pixelRatio,u_extrude_scale:j}},Va=(C,l,_)=>{const A=ze(_,1,l.zoom),k=Math.pow(2,l.zoom-_.tileID.overscaledZ),B=_.tileID.overscaleFactor();return{u_matrix:C,u_camera_to_center_distance:l.cameraToCenterDistance,u_pixels_to_tile_units:A,u_extrude_scale:[l.pixelsToGLUnits[0]/(A*k),l.pixelsToGLUnits[1]/(A*k)],u_overscale_factor:B}},ao=(C,l,_=1)=>({u_matrix:C,u_color:l,u_overlay:0,u_overlay_scale:_}),ma=C=>({u_matrix:C}),ko=(C,l,_,A)=>({u_matrix:C,u_extrude_scale:ze(l,1,_),u_intensity:A});function rs(C,l){const _=Math.pow(2,l.canonical.z),A=l.canonical.y;return[new h.MercatorCoordinate(0,A/_).toLngLat().lat,new h.MercatorCoordinate(0,(A+1)/_).toLngLat().lat]}const nu=(C,l,_)=>{const A=C.transform;return{u_matrix:vc(C,l,_),u_ratio:1/ze(l,1,A.zoom),u_device_pixel_ratio:C.pixelRatio,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]]}},Vu=(C,l,_,A)=>h.extend(nu(C,l,_),{u_image:0,u_image_height:A}),ll=(C,l,_,A)=>{const k=C.transform,B=Cl(l,k);return{u_matrix:vc(C,l,_),u_texsize:l.imageAtlasTexture.size,u_ratio:1/ze(l,1,k.zoom),u_device_pixel_ratio:C.pixelRatio,u_image:0,u_scale:[B,A.fromScale,A.toScale],u_fade:A.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},So=(C,l,_,A,k)=>{const B=C.lineAtlas,j=Cl(l,C.transform),Z=_.layout.get("line-cap")==="round",J=B.getDash(A.from,Z),ie=B.getDash(A.to,Z),ae=J.width*k.fromScale,ge=ie.width*k.toScale;return h.extend(nu(C,l,_),{u_patternscale_a:[j/ae,-J.height/2],u_patternscale_b:[j/ge,-ie.height/2],u_sdfgamma:B.width/(256*Math.min(ae,ge)*C.pixelRatio)/2,u_image:0,u_tex_y_a:J.y,u_tex_y_b:ie.y,u_mix:k.t})};function Cl(C,l){return 1/ze(C,1,l.tileZoom)}function vc(C,l,_){return C.translatePosMatrix(l.tileID.posMatrix,l,_.paint.get("line-translate"),_.paint.get("line-translate-anchor"))}const bc=(C,l,_,A,k)=>{return{u_matrix:C,u_tl_parent:l,u_scale_parent:_,u_buffer_scale:1,u_fade_t:A.mix,u_opacity:A.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(j=k.paint.get("raster-saturation"),j>0?1-1/(1.001-j):-j),u_contrast_factor:(B=k.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:xc(k.paint.get("raster-hue-rotate"))};var B,j};function xc(C){C*=Math.PI/180;const l=Math.sin(C),_=Math.cos(C);return[(2*_+1)/3,(-Math.sqrt(3)*l-_+1)/3,(Math.sqrt(3)*l-_+1)/3]}const bs=(C,l,_,A,k,B,j,Z,J,ie)=>{const ae=k.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:ae.cameraToCenterDistance,u_pitch:ae.pitch/360*2*Math.PI,u_rotate_symbol:+_,u_aspect_ratio:ae.width/ae.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:j,u_coord_matrix:Z,u_is_text:+J,u_pitch_with_map:+A,u_texsize:ie,u_texture:0}},ru=(C,l,_,A,k,B,j,Z,J,ie,ae)=>{const ge=k.transform;return h.extend(bs(C,l,_,A,k,B,j,Z,J,ie),{u_gamma_scale:A?Math.cos(ge._pitch)*ge.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:+ae})},ou=(C,l,_,A,k,B,j,Z,J,ie)=>h.extend(ru(C,l,_,A,k,B,j,Z,!0,J,!0),{u_texsize_icon:ie,u_texture_icon:1}),ih=(C,l,_)=>({u_matrix:C,u_opacity:l,u_color:_}),kl=(C,l,_,A,k,B)=>h.extend(function(j,Z,J,ie){const ae=J.imageManager.getPattern(j.from.toString()),ge=J.imageManager.getPattern(j.to.toString()),{width:Ae,height:Ke}=J.imageManager.getPixelSize(),ke=Math.pow(2,ie.tileID.overscaledZ),Xe=ie.tileSize*Math.pow(2,J.transform.tileZoom)/ke,ct=Xe*(ie.tileID.canonical.x+ie.tileID.wrap*ke),lt=Xe*ie.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:ge.tl,u_pattern_br_b:ge.br,u_texsize:[Ae,Ke],u_mix:Z.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:ge.displaySize,u_scale_a:Z.fromScale,u_scale_b:Z.toScale,u_tile_units_to_pixels:1/ze(ie,1,J.transform.tileZoom),u_pixel_coord_upper:[ct>>16,lt>>16],u_pixel_coord_lower:[65535&ct,65535&lt]}}(A,B,_,k),{u_matrix:C,u_opacity:l}),ga={fillExtrusion:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_lightpos:new h.Uniform3f(C,l.u_lightpos),u_lightintensity:new h.Uniform1f(C,l.u_lightintensity),u_lightcolor:new h.Uniform3f(C,l.u_lightcolor),u_vertical_gradient:new h.Uniform1f(C,l.u_vertical_gradient),u_opacity:new h.Uniform1f(C,l.u_opacity)}),fillExtrusionPattern:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_lightpos:new h.Uniform3f(C,l.u_lightpos),u_lightintensity:new h.Uniform1f(C,l.u_lightintensity),u_lightcolor:new h.Uniform3f(C,l.u_lightcolor),u_vertical_gradient:new h.Uniform1f(C,l.u_vertical_gradient),u_height_factor:new h.Uniform1f(C,l.u_height_factor),u_image:new h.Uniform1i(C,l.u_image),u_texsize:new h.Uniform2f(C,l.u_texsize),u_pixel_coord_upper:new h.Uniform2f(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(C,l.u_pixel_coord_lower),u_scale:new h.Uniform3f(C,l.u_scale),u_fade:new h.Uniform1f(C,l.u_fade),u_opacity:new h.Uniform1f(C,l.u_opacity)}),fill:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix)}),fillPattern:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_image:new h.Uniform1i(C,l.u_image),u_texsize:new h.Uniform2f(C,l.u_texsize),u_pixel_coord_upper:new h.Uniform2f(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(C,l.u_pixel_coord_lower),u_scale:new h.Uniform3f(C,l.u_scale),u_fade:new h.Uniform1f(C,l.u_fade)}),fillOutline:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_world:new h.Uniform2f(C,l.u_world)}),fillOutlinePattern:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_world:new h.Uniform2f(C,l.u_world),u_image:new h.Uniform1i(C,l.u_image),u_texsize:new h.Uniform2f(C,l.u_texsize),u_pixel_coord_upper:new h.Uniform2f(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(C,l.u_pixel_coord_lower),u_scale:new h.Uniform3f(C,l.u_scale),u_fade:new h.Uniform1f(C,l.u_fade)}),circle:(C,l)=>({u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_scale_with_map:new h.Uniform1i(C,l.u_scale_with_map),u_pitch_with_map:new h.Uniform1i(C,l.u_pitch_with_map),u_extrude_scale:new h.Uniform2f(C,l.u_extrude_scale),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_matrix:new h.UniformMatrix4f(C,l.u_matrix)}),collisionBox:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_pixels_to_tile_units:new h.Uniform1f(C,l.u_pixels_to_tile_units),u_extrude_scale:new h.Uniform2f(C,l.u_extrude_scale),u_overscale_factor:new h.Uniform1f(C,l.u_overscale_factor)}),collisionCircle:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_inv_matrix:new h.UniformMatrix4f(C,l.u_inv_matrix),u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_viewport_size:new h.Uniform2f(C,l.u_viewport_size)}),debug:(C,l)=>({u_color:new h.UniformColor(C,l.u_color),u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_overlay:new h.Uniform1i(C,l.u_overlay),u_overlay_scale:new h.Uniform1f(C,l.u_overlay_scale)}),clippingMask:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix)}),heatmap:(C,l)=>({u_extrude_scale:new h.Uniform1f(C,l.u_extrude_scale),u_intensity:new h.Uniform1f(C,l.u_intensity),u_matrix:new h.UniformMatrix4f(C,l.u_matrix)}),heatmapTexture:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_world:new h.Uniform2f(C,l.u_world),u_image:new h.Uniform1i(C,l.u_image),u_color_ramp:new h.Uniform1i(C,l.u_color_ramp),u_opacity:new h.Uniform1f(C,l.u_opacity)}),hillshade:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_image:new h.Uniform1i(C,l.u_image),u_latrange:new h.Uniform2f(C,l.u_latrange),u_light:new h.Uniform2f(C,l.u_light),u_shadow:new h.UniformColor(C,l.u_shadow),u_highlight:new h.UniformColor(C,l.u_highlight),u_accent:new h.UniformColor(C,l.u_accent)}),hillshadePrepare:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_image:new h.Uniform1i(C,l.u_image),u_dimension:new h.Uniform2f(C,l.u_dimension),u_zoom:new h.Uniform1f(C,l.u_zoom),u_unpack:new h.Uniform4f(C,l.u_unpack)}),line:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_ratio:new h.Uniform1f(C,l.u_ratio),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(C,l.u_units_to_pixels)}),lineGradient:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_ratio:new h.Uniform1f(C,l.u_ratio),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(C,l.u_units_to_pixels),u_image:new h.Uniform1i(C,l.u_image),u_image_height:new h.Uniform1f(C,l.u_image_height)}),linePattern:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_texsize:new h.Uniform2f(C,l.u_texsize),u_ratio:new h.Uniform1f(C,l.u_ratio),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_image:new h.Uniform1i(C,l.u_image),u_units_to_pixels:new h.Uniform2f(C,l.u_units_to_pixels),u_scale:new h.Uniform3f(C,l.u_scale),u_fade:new h.Uniform1f(C,l.u_fade)}),lineSDF:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_ratio:new h.Uniform1f(C,l.u_ratio),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(C,l.u_units_to_pixels),u_patternscale_a:new h.Uniform2f(C,l.u_patternscale_a),u_patternscale_b:new h.Uniform2f(C,l.u_patternscale_b),u_sdfgamma:new h.Uniform1f(C,l.u_sdfgamma),u_image:new h.Uniform1i(C,l.u_image),u_tex_y_a:new h.Uniform1f(C,l.u_tex_y_a),u_tex_y_b:new h.Uniform1f(C,l.u_tex_y_b),u_mix:new h.Uniform1f(C,l.u_mix)}),raster:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_tl_parent:new h.Uniform2f(C,l.u_tl_parent),u_scale_parent:new h.Uniform1f(C,l.u_scale_parent),u_buffer_scale:new h.Uniform1f(C,l.u_buffer_scale),u_fade_t:new h.Uniform1f(C,l.u_fade_t),u_opacity:new h.Uniform1f(C,l.u_opacity),u_image0:new h.Uniform1i(C,l.u_image0),u_image1:new h.Uniform1i(C,l.u_image1),u_brightness_low:new h.Uniform1f(C,l.u_brightness_low),u_brightness_high:new h.Uniform1f(C,l.u_brightness_high),u_saturation_factor:new h.Uniform1f(C,l.u_saturation_factor),u_contrast_factor:new h.Uniform1f(C,l.u_contrast_factor),u_spin_weights:new h.Uniform3f(C,l.u_spin_weights)}),symbolIcon:(C,l)=>({u_is_size_zoom_constant:new h.Uniform1i(C,l.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(C,l.u_is_size_feature_constant),u_size_t:new h.Uniform1f(C,l.u_size_t),u_size:new h.Uniform1f(C,l.u_size),u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_pitch:new h.Uniform1f(C,l.u_pitch),u_rotate_symbol:new h.Uniform1i(C,l.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(C,l.u_aspect_ratio),u_fade_change:new h.Uniform1f(C,l.u_fade_change),u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(C,l.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(C,l.u_coord_matrix),u_is_text:new h.Uniform1i(C,l.u_is_text),u_pitch_with_map:new h.Uniform1i(C,l.u_pitch_with_map),u_texsize:new h.Uniform2f(C,l.u_texsize),u_texture:new h.Uniform1i(C,l.u_texture)}),symbolSDF:(C,l)=>({u_is_size_zoom_constant:new h.Uniform1i(C,l.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(C,l.u_is_size_feature_constant),u_size_t:new h.Uniform1f(C,l.u_size_t),u_size:new h.Uniform1f(C,l.u_size),u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_pitch:new h.Uniform1f(C,l.u_pitch),u_rotate_symbol:new h.Uniform1i(C,l.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(C,l.u_aspect_ratio),u_fade_change:new h.Uniform1f(C,l.u_fade_change),u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(C,l.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(C,l.u_coord_matrix),u_is_text:new h.Uniform1i(C,l.u_is_text),u_pitch_with_map:new h.Uniform1i(C,l.u_pitch_with_map),u_texsize:new h.Uniform2f(C,l.u_texsize),u_texture:new h.Uniform1i(C,l.u_texture),u_gamma_scale:new h.Uniform1f(C,l.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(C,l.u_is_halo)}),symbolTextAndIcon:(C,l)=>({u_is_size_zoom_constant:new h.Uniform1i(C,l.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(C,l.u_is_size_feature_constant),u_size_t:new h.Uniform1f(C,l.u_size_t),u_size:new h.Uniform1f(C,l.u_size),u_camera_to_center_distance:new h.Uniform1f(C,l.u_camera_to_center_distance),u_pitch:new h.Uniform1f(C,l.u_pitch),u_rotate_symbol:new h.Uniform1i(C,l.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(C,l.u_aspect_ratio),u_fade_change:new h.Uniform1f(C,l.u_fade_change),u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(C,l.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(C,l.u_coord_matrix),u_is_text:new h.Uniform1i(C,l.u_is_text),u_pitch_with_map:new h.Uniform1i(C,l.u_pitch_with_map),u_texsize:new h.Uniform2f(C,l.u_texsize),u_texsize_icon:new h.Uniform2f(C,l.u_texsize_icon),u_texture:new h.Uniform1i(C,l.u_texture),u_texture_icon:new h.Uniform1i(C,l.u_texture_icon),u_gamma_scale:new h.Uniform1f(C,l.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(C,l.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(C,l.u_is_halo)}),background:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_opacity:new h.Uniform1f(C,l.u_opacity),u_color:new h.UniformColor(C,l.u_color)}),backgroundPattern:(C,l)=>({u_matrix:new h.UniformMatrix4f(C,l.u_matrix),u_opacity:new h.Uniform1f(C,l.u_opacity),u_image:new h.Uniform1i(C,l.u_image),u_pattern_tl_a:new h.Uniform2f(C,l.u_pattern_tl_a),u_pattern_br_a:new h.Uniform2f(C,l.u_pattern_br_a),u_pattern_tl_b:new h.Uniform2f(C,l.u_pattern_tl_b),u_pattern_br_b:new h.Uniform2f(C,l.u_pattern_br_b),u_texsize:new h.Uniform2f(C,l.u_texsize),u_mix:new h.Uniform1f(C,l.u_mix),u_pattern_size_a:new h.Uniform2f(C,l.u_pattern_size_a),u_pattern_size_b:new h.Uniform2f(C,l.u_pattern_size_b),u_scale_a:new h.Uniform1f(C,l.u_scale_a),u_scale_b:new h.Uniform1f(C,l.u_scale_b),u_pixel_coord_upper:new h.Uniform2f(C,l.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(C,l.u_pixel_coord_lower),u_tile_units_to_pixels:new h.Uniform1f(C,l.u_tile_units_to_pixels)})};class os{constructor(l,_,A){this.context=l;const k=l.gl;this.buffer=k.createBuffer(),this.dynamicDraw=Boolean(A),this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),k.bufferData(k.ELEMENT_ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete _.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const _=this.context.gl;this.context.unbindVAO(),this.bind(),_.bufferSubData(_.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const as={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ns{constructor(l,_,A,k){this.length=_.length,this.attributes=A,this.itemSize=_.bytesPerElement,this.dynamicDraw=k,this.context=l;const B=l.gl;this.buffer=B.createBuffer(),l.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||delete _.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const _=this.context.gl;this.bind(),_.bufferSubData(_.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,_){for(let A=0;A<this.attributes.length;A++){const k=_.attributes[this.attributes[A].name];k!==void 0&&l.enableVertexAttribArray(k)}}setVertexAttribPointers(l,_,A){for(let k=0;k<this.attributes.length;k++){const B=this.attributes[k],j=_.attributes[B.name];j!==void 0&&l.vertexAttribPointer(j,B.components,l[as[B.type]],!1,this.itemSize,B.offset+this.itemSize*(A||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ir{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Vs extends ir{getDefault(){return h.Color.transparent}set(l){const _=this.current;(l.r!==_.r||l.g!==_.g||l.b!==_.b||l.a!==_.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class js extends ir{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Uo extends ir{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class so extends ir{getDefault(){return[!0,!0,!0,!0]}set(l){const _=this.current;(l[0]!==_[0]||l[1]!==_[1]||l[2]!==_[2]||l[3]!==_[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class No extends ir{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class ju extends ir{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class qu extends ir{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const _=this.current;(l.func!==_.func||l.ref!==_.ref||l.mask!==_.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Gu extends ir{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const _=this.current;(l[0]!==_[0]||l[1]!==_[1]||l[2]!==_[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class au extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const _=this.gl;l?_.enable(_.STENCIL_TEST):_.disable(_.STENCIL_TEST),this.current=l,this.dirty=!1}}class su extends ir{getDefault(){return[0,1]}set(l){const _=this.current;(l[0]!==_[0]||l[1]!==_[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Ml extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const _=this.gl;l?_.enable(_.DEPTH_TEST):_.disable(_.DEPTH_TEST),this.current=l,this.dirty=!1}}class lu extends ir{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Hu extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const _=this.gl;l?_.enable(_.BLEND):_.disable(_.BLEND),this.current=l,this.dirty=!1}}class uu extends ir{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const _=this.current;(l[0]!==_[0]||l[1]!==_[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class nh extends ir{getDefault(){return h.Color.transparent}set(l){const _=this.current;(l.r!==_.r||l.g!==_.g||l.b!==_.b||l.a!==_.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Ll extends ir{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class ss extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const _=this.gl;l?_.enable(_.CULL_FACE):_.disable(_.CULL_FACE),this.current=l,this.dirty=!1}}class rh extends ir{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Vo extends ir{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class wc extends ir{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class qs extends ir{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Gs extends ir{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const _=this.current;(l[0]!==_[0]||l[1]!==_[1]||l[2]!==_[2]||l[3]!==_[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class ul extends ir{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class xs extends ir{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const _=this.gl;_.bindRenderbuffer(_.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class ls extends ir{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const _=this.gl;_.bindTexture(_.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class ja extends ir{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const _=this.gl;_.bindBuffer(_.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Hs extends ir{getDefault(){return null}set(l){const _=this.gl;_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ws extends ir{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class Zu extends ir{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Zs extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class kr extends ir{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class cl extends ir{constructor(l,_){super(l),this.context=l,this.parent=_}getDefault(){return null}}class Es extends cl{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ec extends cl{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferRenderbuffer(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Wu{constructor(l,_,A,k){this.context=l,this.width=_,this.height=A;const B=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new Es(l,B),k&&(this.depthAttachment=new Ec(l,B))}destroy(){const l=this.context.gl,_=this.colorAttachment.get();if(_&&l.deleteTexture(_),this.depthAttachment){const A=this.depthAttachment.get();A&&l.deleteRenderbuffer(A)}l.deleteFramebuffer(this.framebuffer)}}class Pn{constructor(l,_,A){this.blendFunction=l,this.blendColor=_,this.mask=A}}Pn.Replace=[1,0],Pn.disabled=new Pn(Pn.Replace,h.Color.transparent,[!1,!1,!1,!1]),Pn.unblended=new Pn(Pn.Replace,h.Color.transparent,[!0,!0,!0,!0]),Pn.alphaBlended=new Pn([1,771],h.Color.transparent,[!0,!0,!0,!0]);class cu{constructor(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Vs(this),this.clearDepth=new js(this),this.clearStencil=new Uo(this),this.colorMask=new so(this),this.depthMask=new No(this),this.stencilMask=new ju(this),this.stencilFunc=new qu(this),this.stencilOp=new Gu(this),this.stencilTest=new au(this),this.depthRange=new su(this),this.depthTest=new Ml(this),this.depthFunc=new lu(this),this.blend=new Hu(this),this.blendFunc=new uu(this),this.blendColor=new nh(this),this.blendEquation=new Ll(this),this.cullFace=new ss(this),this.cullFaceSide=new rh(this),this.frontFace=new Vo(this),this.program=new wc(this),this.activeTexture=new qs(this),this.viewport=new Gs(this),this.bindFramebuffer=new ul(this),this.bindRenderbuffer=new xs(this),this.bindTexture=new ls(this),this.bindVertexBuffer=new ja(this),this.bindElementBuffer=new Hs(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ws(this),this.pixelStoreUnpack=new Zu(this),this.pixelStoreUnpackPremultiplyAlpha=new Zs(this),this.pixelStoreUnpackFlipY=new kr(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,_){return new os(this,l,_)}createVertexBuffer(l,_,A){return new Ns(this,l,_,A)}createRenderbuffer(l,_,A){const k=this.gl,B=k.createRenderbuffer();return this.bindRenderbuffer.set(B),k.renderbufferStorage(k.RENDERBUFFER,l,_,A),this.bindRenderbuffer.set(null),B}createFramebuffer(l,_,A){return new Wu(this,l,_,A)}clear({color:l,depth:_}){const A=this.gl;let k=0;l&&(k|=A.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),_!==void 0&&(k|=A.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(_),this.depthMask.set(!0)),A.clear(k)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){R(l.blendFunction,Pn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class lr{constructor(l,_,A){this.func=l,this.mask=_,this.range=A}}lr.ReadOnly=!1,lr.ReadWrite=!0,lr.disabled=new lr(519,lr.ReadOnly,[0,1]);const Xa=7680;class Pr{constructor(l,_,A,k,B,j){this.test=l,this.ref=_,this.mask=A,this.fail=k,this.depthFail=B,this.pass=j}}Pr.disabled=new Pr({func:519,mask:0},0,0,Xa,Xa,Xa);class lo{constructor(l,_,A){this.enable=l,this.mode=_,this.frontFace=A}}let hu;function du(C,l,_,A,k,B,j){const Z=C.context,J=Z.gl,ie=C.useProgram("collisionBox"),ae=[];let ge=0,Ae=0;for(let pt=0;pt<A.length;pt++){const jt=A[pt],Rt=l.getTile(jt),Ft=Rt.getBucket(_);if(!Ft)continue;let ti=jt.posMatrix;k[0]===0&&k[1]===0||(ti=C.translatePosMatrix(jt.posMatrix,Rt,k,B));const ui=j?Ft.textCollisionBox:Ft.iconCollisionBox,qt=Ft.collisionCircleArray;if(qt.length>0){const qi=h.create(),Ci=ti;h.mul(qi,Ft.placementInvProjMatrix,C.transform.glCoordMatrix),h.mul(qi,qi,Ft.placementViewportMatrix),ae.push({circleArray:qt,circleOffset:Ae,transform:Ci,invTransform:qi}),ge+=qt.length/4,Ae=ge}ui&&ie.draw(Z,J.LINES,lr.disabled,Pr.disabled,C.colorModeForRenderPass(),lo.disabled,Va(ti,C.transform,Rt),_.id,ui.layoutVertexBuffer,ui.indexBuffer,ui.segments,null,C.transform.zoom,null,null,ui.collisionVertexBuffer)}if(!j||!ae.length)return;const Ke=C.useProgram("collisionCircle"),ke=new h.CollisionCircleLayoutArray;ke.resize(4*ge),ke._trim();let Xe=0;for(const pt of ae)for(let jt=0;jt<pt.circleArray.length/4;jt++){const Rt=4*jt,Ft=pt.circleArray[Rt+0],ti=pt.circleArray[Rt+1],ui=pt.circleArray[Rt+2],qt=pt.circleArray[Rt+3];ke.emplace(Xe++,Ft,ti,ui,qt,0),ke.emplace(Xe++,Ft,ti,ui,qt,1),ke.emplace(Xe++,Ft,ti,ui,qt,2),ke.emplace(Xe++,Ft,ti,ui,qt,3)}(!hu||hu.length<2*ge)&&(hu=function(pt){const jt=2*pt,Rt=new h.QuadTriangleArray;Rt.resize(jt),Rt._trim();for(let Ft=0;Ft<jt;Ft++){const ti=6*Ft;Rt.uint16[ti+0]=4*Ft+0,Rt.uint16[ti+1]=4*Ft+1,Rt.uint16[ti+2]=4*Ft+2,Rt.uint16[ti+3]=4*Ft+2,Rt.uint16[ti+4]=4*Ft+3,Rt.uint16[ti+5]=4*Ft+0}return Rt}(ge));const ct=Z.createIndexBuffer(hu,!0),lt=Z.createVertexBuffer(ke,h.collisionCircleLayout.members,!0);for(const pt of ae){const jt={u_matrix:pt.transform,u_inv_matrix:pt.invTransform,u_camera_to_center_distance:(bt=C.transform).cameraToCenterDistance,u_viewport_size:[bt.width,bt.height]};Ke.draw(Z,J.TRIANGLES,lr.disabled,Pr.disabled,C.colorModeForRenderPass(),lo.disabled,jt,_.id,lt,ct,h.SegmentVector.simpleSegment(0,2*pt.circleOffset,pt.circleArray.length,pt.circleArray.length/2),null,C.transform.zoom,null,null,null)}var bt;lt.destroy(),ct.destroy()}lo.disabled=new lo(!1,1029,2305),lo.backCCW=new lo(!0,1029,2305);const hl=h.identity(new Float32Array(16));function Xu(C,l,_,A,k,B){const{horizontalAlign:j,verticalAlign:Z}=h.getAnchorAlignment(C),J=-(j-.5)*l,ie=-(Z-.5)*_,ae=h.evaluateVariableOffset(C,A);return new h.pointGeometry((J/k+ae[0])*B,(ie/k+ae[1])*B)}function us(C,l,_,A,k,B,j,Z,J,ie){const ae=C.text.placedSymbolArray,ge=C.text.dynamicLayoutVertexArray,Ae=C.icon.dynamicLayoutVertexArray,Ke={};ge.clear();for(let ke=0;ke<ae.length;ke++){const Xe=ae.get(ke),ct=C.allowVerticalPlacement&&!Xe.placedOrientation,lt=Xe.hidden||!Xe.crossTileID||ct?null:A[Xe.crossTileID];if(lt){const bt=new h.pointGeometry(Xe.anchorX,Xe.anchorY),pt=Ar(bt,_?j:B),jt=yi(k.cameraToCenterDistance,pt.signedDistanceFromCamera);let Rt=h.evaluateSizeForFeature(C.textSizeData,J,Xe)*jt/h.ONE_EM;_&&(Rt*=C.tilePixelRatio/Z);const{width:Ft,height:ti,anchor:ui,textOffset:qt,textBoxScale:qi}=lt,Ci=Xu(ui,Ft,ti,qt,qi,Rt),vn=_?Ar(bt.add(Ci),B).point:pt.point.add(l?Ci.rotate(-k.angle):Ci),p=C.allowVerticalPlacement&&Xe.placedOrientation===h.WritingMode.vertical?Math.PI/2:0;for(let y=0;y<Xe.numGlyphs;y++)h.addDynamicAttributes(ge,vn,p);ie&&Xe.associatedIconIndex>=0&&(Ke[Xe.associatedIconIndex]={shiftedAnchor:vn,angle:p})}else ne(Xe.numGlyphs,ge)}if(ie){Ae.clear();const ke=C.icon.placedSymbolArray;for(let Xe=0;Xe<ke.length;Xe++){const ct=ke.get(Xe);if(ct.hidden)ne(ct.numGlyphs,Ae);else{const lt=Ke[Xe];if(lt)for(let bt=0;bt<ct.numGlyphs;bt++)h.addDynamicAttributes(Ae,lt.shiftedAnchor,lt.angle);else ne(ct.numGlyphs,Ae)}}C.icon.dynamicLayoutVertexBuffer.updateData(Ae)}C.text.dynamicLayoutVertexBuffer.updateData(ge)}function cs(C,l,_){return _.iconsInText&&l?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function pu(C,l,_,A,k,B,j,Z,J,ie,ae,ge){const Ae=C.context,Ke=Ae.gl,ke=C.transform,Xe=Z==="map",ct=J==="map",lt=Z!=="viewport"&&_.layout.get("symbol-placement")!=="point",bt=Xe&&!ct&&!lt,pt=!_.layout.get("symbol-sort-key").isConstant();let jt=!1;const Rt=C.depthModeForSublayer(0,lr.ReadOnly),Ft=_.layout.get("text-variable-anchor"),ti=[];for(const ui of A){const qt=l.getTile(ui),qi=qt.getBucket(_);if(!qi)continue;const Ci=k?qi.text:qi.icon;if(!Ci||!Ci.segments.get().length)continue;const vn=Ci.programConfigurations.get(_.id),p=k||qi.sdfIcons,y=k?qi.textSizeData:qi.iconSizeData,g=ct||ke.pitch!==0,w=C.useProgram(cs(p,k,qi),vn),L=h.evaluateSizeForZoom(y,ke.zoom);let F,N,H,Q,oe=[0,0],ye=null;if(k){if(N=qt.glyphAtlasTexture,H=Ke.LINEAR,F=qt.glyphAtlasTexture.size,qi.iconsInText){oe=qt.imageAtlasTexture.size,ye=qt.imageAtlasTexture;const kt=y.kind==="composite"||y.kind==="camera";Q=g||C.options.rotating||C.options.zooming||kt?Ke.LINEAR:Ke.NEAREST}}else{const kt=_.layout.get("icon-size").constantOr(0)!==1||qi.iconsNeedLinear;N=qt.imageAtlasTexture,H=p||C.options.rotating||C.options.zooming||kt||g?Ke.LINEAR:Ke.NEAREST,F=qt.imageAtlasTexture.size}const be=ze(qt,1,C.transform.zoom),Ee=vo(ui.posMatrix,ct,Xe,C.transform,be),Be=aa(ui.posMatrix,ct,Xe,C.transform,be),Re=Ft&&qi.hasTextData(),We=_.layout.get("icon-text-fit")!=="none"&&Re&&qi.hasIconData();if(lt){const kt=_.layout.get("text-rotation-alignment")==="map";xn(qi,ui.posMatrix,C,k,Ee,Be,ct,ie,kt)}const Ce=C.translatePosMatrix(ui.posMatrix,qt,B,j),Ve=lt||k&&Ft||We?hl:Ee,et=C.translatePosMatrix(Be,qt,B,j,!0),dt=p&&_.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let xt;xt=p?qi.iconsInText?ou(y.kind,L,bt,ct,C,Ce,Ve,et,F,oe):ru(y.kind,L,bt,ct,C,Ce,Ve,et,k,F,!0):bs(y.kind,L,bt,ct,C,Ce,Ve,et,k,F);const Tt={program:w,buffers:Ci,uniformValues:xt,atlasTexture:N,atlasTextureIcon:ye,atlasInterpolation:H,atlasInterpolationIcon:Q,isSDF:p,hasHalo:dt};if(pt&&qi.canOverlap){jt=!0;const kt=Ci.segments.get();for(const Ht of kt)ti.push({segments:new h.SegmentVector([Ht]),sortKey:Ht.sortKey,state:Tt})}else ti.push({segments:Ci.segments,sortKey:0,state:Tt})}jt&&ti.sort((ui,qt)=>ui.sortKey-qt.sortKey);for(const ui of ti){const qt=ui.state;if(Ae.activeTexture.set(Ke.TEXTURE0),qt.atlasTexture.bind(qt.atlasInterpolation,Ke.CLAMP_TO_EDGE),qt.atlasTextureIcon&&(Ae.activeTexture.set(Ke.TEXTURE1),qt.atlasTextureIcon&&qt.atlasTextureIcon.bind(qt.atlasInterpolationIcon,Ke.CLAMP_TO_EDGE)),qt.isSDF){const qi=qt.uniformValues;qt.hasHalo&&(qi.u_is_halo=1,Ws(qt.buffers,ui.segments,_,C,qt.program,Rt,ae,ge,qi)),qi.u_is_halo=0}Ws(qt.buffers,ui.segments,_,C,qt.program,Rt,ae,ge,qt.uniformValues)}}function Ws(C,l,_,A,k,B,j,Z,J){const ie=A.context;k.draw(ie,ie.gl.TRIANGLES,B,j,Z,lo.disabled,J,_.id,C.layoutVertexBuffer,C.indexBuffer,l,_.paint,A.transform.zoom,C.programConfigurations.get(_.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function zr(C,l,_,A,k,B,j){const Z=C.context.gl,J=_.paint.get("fill-pattern"),ie=J&&J.constantOr(1),ae=_.getCrossfadeParameters();let ge,Ae,Ke,ke,Xe;j?(Ae=ie&&!_.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ge=Z.LINES):(Ae=ie?"fillPattern":"fill",ge=Z.TRIANGLES);for(const ct of A){const lt=l.getTile(ct);if(ie&&!lt.patternsLoaded())continue;const bt=lt.getBucket(_);if(!bt)continue;const pt=bt.programConfigurations.get(_.id),jt=C.useProgram(Ae,pt);ie&&(C.context.activeTexture.set(Z.TEXTURE0),lt.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),pt.updatePaintBuffers(ae));const Rt=J.constantOr(null);if(Rt&&lt.imageAtlas){const ti=lt.imageAtlas,ui=ti.patternPositions[Rt.to.toString()],qt=ti.patternPositions[Rt.from.toString()];ui&&qt&&pt.setConstantPatternPositions(ui,qt)}const Ft=C.translatePosMatrix(ct.posMatrix,lt,_.paint.get("fill-translate"),_.paint.get("fill-translate-anchor"));if(j){ke=bt.indexBuffer2,Xe=bt.segments2;const ti=[Z.drawingBufferWidth,Z.drawingBufferHeight];Ke=Ae==="fillOutlinePattern"&&ie?Pa(Ft,C,ae,lt,ti):_c(Ft,ti)}else ke=bt.indexBuffer,Xe=bt.segments,Ke=ie?la(Ft,C,ae,lt):La(Ft);jt.draw(C.context,ge,k,C.stencilModeForClipping(ct),B,lo.disabled,Ke,_.id,bt.layoutVertexBuffer,ke,Xe,_.paint,C.transform.zoom,pt)}}function Is(C,l,_,A,k,B,j){const Z=C.context,J=Z.gl,ie=_.paint.get("fill-extrusion-pattern"),ae=ie.constantOr(1),ge=_.getCrossfadeParameters(),Ae=_.paint.get("fill-extrusion-opacity");for(const Ke of A){const ke=l.getTile(Ke),Xe=ke.getBucket(_);if(!Xe)continue;const ct=Xe.programConfigurations.get(_.id),lt=C.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",ct);ae&&(C.context.activeTexture.set(J.TEXTURE0),ke.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),ct.updatePaintBuffers(ge));const bt=ie.constantOr(null);if(bt&&ke.imageAtlas){const Ft=ke.imageAtlas,ti=Ft.patternPositions[bt.to.toString()],ui=Ft.patternPositions[bt.from.toString()];ti&&ui&&ct.setConstantPatternPositions(ti,ui)}const pt=C.translatePosMatrix(Ke.posMatrix,ke,_.paint.get("fill-extrusion-translate"),_.paint.get("fill-extrusion-translate-anchor")),jt=_.paint.get("fill-extrusion-vertical-gradient"),Rt=ae?Br(pt,C,jt,Ae,Ke,ge,ke):Ma(pt,C,jt,Ae);lt.draw(Z,Z.gl.TRIANGLES,k,B,j,lo.backCCW,Rt,_.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,_.paint,C.transform.zoom,ct)}}function Ku(C,l,_,A,k,B){const j=C.context,Z=j.gl,J=l.fbo;if(!J)return;const ie=C.useProgram("hillshade");j.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,J.colorAttachment.get());const ae=((ge,Ae,Ke)=>{const ke=Ke.paint.get("hillshade-shadow-color"),Xe=Ke.paint.get("hillshade-highlight-color"),ct=Ke.paint.get("hillshade-accent-color");let lt=Ke.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ke.paint.get("hillshade-illumination-anchor")==="viewport"&&(lt-=ge.transform.angle);const bt=!ge.options.moving;return{u_matrix:ge.transform.calculatePosMatrix(Ae.tileID.toUnwrapped(),bt),u_image:0,u_latrange:rs(0,Ae.tileID),u_light:[Ke.paint.get("hillshade-exaggeration"),lt],u_shadow:ke,u_highlight:Xe,u_accent:ct}})(C,l,_);ie.draw(j,Z.TRIANGLES,A,k,B,lo.disabled,ae,_.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}function $o(C,l,_,A,k,B){const j=C.context,Z=j.gl,J=l.dem;if(J&&J.data){const ie=J.dim,ae=J.stride,ge=J.getPixels();if(j.activeTexture.set(Z.TEXTURE1),j.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||C.getTileTexture(ae),l.demTexture){const Ke=l.demTexture;Ke.update(ge,{premultiply:!1}),Ke.bind(Z.NEAREST,Z.CLAMP_TO_EDGE)}else l.demTexture=new we(j,ge,Z.RGBA,{premultiply:!1}),l.demTexture.bind(Z.NEAREST,Z.CLAMP_TO_EDGE);j.activeTexture.set(Z.TEXTURE0);let Ae=l.fbo;if(!Ae){const Ke=new we(j,{width:ie,height:ie,data:null},Z.RGBA);Ke.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Ae=l.fbo=j.createFramebuffer(ie,ie,!0),Ae.colorAttachment.set(Ke.texture)}j.bindFramebuffer.set(Ae.framebuffer),j.viewport.set([0,0,ie,ie]),C.useProgram("hillshadePrepare").draw(j,Z.TRIANGLES,A,k,B,lo.disabled,((Ke,ke)=>{const Xe=ke.stride,ct=h.create();return h.ortho(ct,0,h.EXTENT,-h.EXTENT,0,0,1),h.translate(ct,ct,[0,-h.EXTENT,0]),{u_matrix:ct,u_image:1,u_dimension:[Xe,Xe],u_zoom:Ke.overscaledZ,u_unpack:ke.getUnpackVector()}})(l.tileID,J),_.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function Ic(C,l,_,A,k){const B=A.paint.get("raster-fade-duration");if(B>0){const j=h.exported.now(),Z=(j-C.timeAdded)/B,J=l?(j-l.timeAdded)/B:-1,ie=_.getSource(),ae=k.coveringZoomLevel({tileSize:ie.tileSize,roundZoom:ie.roundZoom}),ge=!l||Math.abs(l.tileID.overscaledZ-ae)>Math.abs(C.tileID.overscaledZ-ae),Ae=ge&&C.refreshedUponExpiration?1:h.clamp(ge?Z:1-J,0,1);return C.refreshedUponExpiration&&Z>=1&&(C.refreshedUponExpiration=!1),l?{opacity:1,mix:1-Ae}:{opacity:Ae,mix:0}}return{opacity:1,mix:0}}const oh=new h.Color(1,0,0,1),Sc=new h.Color(0,1,0,1),Ss=new h.Color(0,0,1,1),Ts=new h.Color(1,0,1,1),dl=new h.Color(0,1,1,1);function fu(C,l,_,A){As(C,0,l+_/2,C.transform.width,_,A)}function Xs(C,l,_,A){As(C,l-_/2,0,_,C.transform.height,A)}function As(C,l,_,A,k,B){const j=C.context,Z=j.gl;Z.enable(Z.SCISSOR_TEST),Z.scissor(l*C.pixelRatio,_*C.pixelRatio,A*C.pixelRatio,k*C.pixelRatio),j.clear({color:B}),Z.disable(Z.SCISSOR_TEST)}function Tc(C,l,_){const A=C.context,k=A.gl,B=_.posMatrix,j=C.useProgram("debug"),Z=lr.disabled,J=Pr.disabled,ie=C.colorModeForRenderPass(),ae="$debug";A.activeTexture.set(k.TEXTURE0),C.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),j.draw(A,k.LINE_STRIP,Z,J,ie,lo.disabled,ao(B,h.Color.red),ae,C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments);const ge=l.getTileByID(_.key).latestRawTileData,Ae=Math.floor((ge&&ge.byteLength||0)/1024),Ke=l.getTile(_).tileSize,ke=512/Math.min(Ke,512)*(_.overscaledZ/C.transform.zoom)*.5;let Xe=_.canonical.toString();_.overscaledZ!==_.canonical.z&&(Xe+=` => ${_.overscaledZ}`),function(ct,lt){ct.initDebugOverlayCanvas();const bt=ct.debugOverlayCanvas,pt=ct.context.gl,jt=ct.debugOverlayCanvas.getContext("2d");jt.clearRect(0,0,bt.width,bt.height),jt.shadowColor="white",jt.shadowBlur=2,jt.lineWidth=1.5,jt.strokeStyle="white",jt.textBaseline="top",jt.font="bold 36px Open Sans, sans-serif",jt.fillText(lt,5,5),jt.strokeText(lt,5,5),ct.debugOverlayTexture.update(bt),ct.debugOverlayTexture.bind(pt.LINEAR,pt.CLAMP_TO_EDGE)}(C,`${Xe} ${Ae}kb`),j.draw(A,k.TRIANGLES,Z,J,Pn.alphaBlended,lo.disabled,ao(B,h.Color.transparent,ke),ae,C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments)}const hs={symbol:function(C,l,_,A,k){if(C.renderPass!=="translucent")return;const B=Pr.disabled,j=C.colorModeForRenderPass();_.layout.get("text-variable-anchor")&&function(Z,J,ie,ae,ge,Ae,Ke){const ke=J.transform,Xe=ge==="map",ct=Ae==="map";for(const lt of Z){const bt=ae.getTile(lt),pt=bt.getBucket(ie);if(!pt||!pt.text||!pt.text.segments.get().length)continue;const jt=h.evaluateSizeForZoom(pt.textSizeData,ke.zoom),Rt=ze(bt,1,J.transform.zoom),Ft=vo(lt.posMatrix,ct,Xe,J.transform,Rt),ti=ie.layout.get("icon-text-fit")!=="none"&&pt.hasIconData();if(jt){const ui=Math.pow(2,ke.zoom-bt.tileID.overscaledZ);us(pt,Xe,ct,Ke,ke,Ft,lt.posMatrix,ui,jt,ti)}}}(A,C,_,l,_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),k),_.paint.get("icon-opacity").constantOr(1)!==0&&pu(C,l,_,A,!1,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),_.layout.get("icon-rotation-alignment"),_.layout.get("icon-pitch-alignment"),_.layout.get("icon-keep-upright"),B,j),_.paint.get("text-opacity").constantOr(1)!==0&&pu(C,l,_,A,!0,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),_.layout.get("text-keep-upright"),B,j),l.map.showCollisionBoxes&&(du(C,l,_,A,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),!0),du(C,l,_,A,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),!1))},circle:function(C,l,_,A){if(C.renderPass!=="translucent")return;const k=_.paint.get("circle-opacity"),B=_.paint.get("circle-stroke-width"),j=_.paint.get("circle-stroke-opacity"),Z=!_.layout.get("circle-sort-key").isConstant();if(k.constantOr(1)===0&&(B.constantOr(1)===0||j.constantOr(1)===0))return;const J=C.context,ie=J.gl,ae=C.depthModeForSublayer(0,lr.ReadOnly),ge=Pr.disabled,Ae=C.colorModeForRenderPass(),Ke=[];for(let ke=0;ke<A.length;ke++){const Xe=A[ke],ct=l.getTile(Xe),lt=ct.getBucket(_);if(!lt)continue;const bt=lt.programConfigurations.get(_.id),pt={programConfiguration:bt,program:C.useProgram("circle",bt),layoutVertexBuffer:lt.layoutVertexBuffer,indexBuffer:lt.indexBuffer,uniformValues:sl(C,Xe,ct,_)};if(Z){const jt=lt.segments.get();for(const Rt of jt)Ke.push({segments:new h.SegmentVector([Rt]),sortKey:Rt.sortKey,state:pt})}else Ke.push({segments:lt.segments,sortKey:0,state:pt})}Z&&Ke.sort((ke,Xe)=>ke.sortKey-Xe.sortKey);for(const ke of Ke){const{programConfiguration:Xe,program:ct,layoutVertexBuffer:lt,indexBuffer:bt,uniformValues:pt}=ke.state;ct.draw(J,ie.TRIANGLES,ae,ge,Ae,lo.disabled,pt,_.id,lt,bt,ke.segments,_.paint,C.transform.zoom,Xe)}},heatmap:function(C,l,_,A){if(_.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){const k=C.context,B=k.gl,j=Pr.disabled,Z=new Pn([B.ONE,B.ONE],h.Color.transparent,[!0,!0,!0,!0]);(function(J,ie,ae){const ge=J.gl;J.activeTexture.set(ge.TEXTURE1),J.viewport.set([0,0,ie.width/4,ie.height/4]);let Ae=ae.heatmapFbo;if(Ae)ge.bindTexture(ge.TEXTURE_2D,Ae.colorAttachment.get()),J.bindFramebuffer.set(Ae.framebuffer);else{const Ke=ge.createTexture();ge.bindTexture(ge.TEXTURE_2D,Ke),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_S,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_T,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MIN_FILTER,ge.LINEAR),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MAG_FILTER,ge.LINEAR),Ae=ae.heatmapFbo=J.createFramebuffer(ie.width/4,ie.height/4,!1),function(ke,Xe,ct,lt){const bt=ke.gl;bt.texImage2D(bt.TEXTURE_2D,0,bt.RGBA,Xe.width/4,Xe.height/4,0,bt.RGBA,ke.extRenderToTextureHalfFloat?ke.extTextureHalfFloat.HALF_FLOAT_OES:bt.UNSIGNED_BYTE,null),lt.colorAttachment.set(ct)}(J,ie,Ke,Ae)}})(k,C,_),k.clear({color:h.Color.transparent});for(let J=0;J<A.length;J++){const ie=A[J];if(l.hasRenderableParent(ie))continue;const ae=l.getTile(ie),ge=ae.getBucket(_);if(!ge)continue;const Ae=ge.programConfigurations.get(_.id),Ke=C.useProgram("heatmap",Ae),{zoom:ke}=C.transform;Ke.draw(k,B.TRIANGLES,lr.disabled,j,Z,lo.disabled,ko(ie.posMatrix,ae,ke,_.paint.get("heatmap-intensity")),_.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,_.paint,C.transform.zoom,Ae)}k.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),function(k,B){const j=k.context,Z=j.gl,J=B.heatmapFbo;if(!J)return;j.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,J.colorAttachment.get()),j.activeTexture.set(Z.TEXTURE1);let ie=B.colorRampTexture;ie||(ie=B.colorRampTexture=new we(j,B.colorRamp,Z.RGBA)),ie.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),k.useProgram("heatmapTexture").draw(j,Z.TRIANGLES,lr.disabled,Pr.disabled,k.colorModeForRenderPass(),lo.disabled,((ae,ge,Ae,Ke)=>{const ke=h.create();h.ortho(ke,0,ae.width,ae.height,0,0,1);const Xe=ae.context.gl;return{u_matrix:ke,u_world:[Xe.drawingBufferWidth,Xe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ge.paint.get("heatmap-opacity")}})(k,B),B.id,k.viewportBuffer,k.quadTriangleIndexBuffer,k.viewportSegments,B.paint,k.transform.zoom)}(C,_))},line:function(C,l,_,A){if(C.renderPass!=="translucent")return;const k=_.paint.get("line-opacity"),B=_.paint.get("line-width");if(k.constantOr(1)===0||B.constantOr(1)===0)return;const j=C.depthModeForSublayer(0,lr.ReadOnly),Z=C.colorModeForRenderPass(),J=_.paint.get("line-dasharray"),ie=_.paint.get("line-pattern"),ae=ie.constantOr(1),ge=_.paint.get("line-gradient"),Ae=_.getCrossfadeParameters(),Ke=ae?"linePattern":J?"lineSDF":ge?"lineGradient":"line",ke=C.context,Xe=ke.gl;let ct=!0;for(const lt of A){const bt=l.getTile(lt);if(ae&&!bt.patternsLoaded())continue;const pt=bt.getBucket(_);if(!pt)continue;const jt=pt.programConfigurations.get(_.id),Rt=C.context.program.get(),Ft=C.useProgram(Ke,jt),ti=ct||Ft.program!==Rt,ui=ie.constantOr(null);if(ui&&bt.imageAtlas){const qi=bt.imageAtlas,Ci=qi.patternPositions[ui.to.toString()],vn=qi.patternPositions[ui.from.toString()];Ci&&vn&&jt.setConstantPatternPositions(Ci,vn)}const qt=ae?ll(C,bt,_,Ae):J?So(C,bt,_,J,Ae):ge?Vu(C,bt,_,pt.lineClipsArray.length):nu(C,bt,_);if(ae)ke.activeTexture.set(Xe.TEXTURE0),bt.imageAtlasTexture.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE),jt.updatePaintBuffers(Ae);else if(J&&(ti||C.lineAtlas.dirty))ke.activeTexture.set(Xe.TEXTURE0),C.lineAtlas.bind(ke);else if(ge){const qi=pt.gradients[_.id];let Ci=qi.texture;if(_.gradientVersion!==qi.version){let vn=256;if(_.stepInterpolant){const p=l.getSource().maxzoom,y=lt.canonical.z===p?Math.ceil(1<<C.transform.maxZoom-lt.canonical.z):1;vn=h.clamp(h.nextPowerOfTwo(pt.maxLineLength/h.EXTENT*1024*y),256,ke.maxTextureSize)}qi.gradient=h.renderColorRamp({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:vn,image:qi.gradient||void 0,clips:pt.lineClipsArray}),qi.texture?qi.texture.update(qi.gradient):qi.texture=new we(ke,qi.gradient,Xe.RGBA),qi.version=_.gradientVersion,Ci=qi.texture}ke.activeTexture.set(Xe.TEXTURE0),Ci.bind(_.stepInterpolant?Xe.NEAREST:Xe.LINEAR,Xe.CLAMP_TO_EDGE)}Ft.draw(ke,Xe.TRIANGLES,j,C.stencilModeForClipping(lt),Z,lo.disabled,qt,_.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,_.paint,C.transform.zoom,jt,pt.layoutVertexBuffer2),ct=!1}},fill:function(C,l,_,A){const k=_.paint.get("fill-color"),B=_.paint.get("fill-opacity");if(B.constantOr(1)===0)return;const j=C.colorModeForRenderPass(),Z=_.paint.get("fill-pattern"),J=C.opaquePassEnabledForLayer()&&!Z.constantOr(1)&&k.constantOr(h.Color.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===J){const ie=C.depthModeForSublayer(1,C.renderPass==="opaque"?lr.ReadWrite:lr.ReadOnly);zr(C,l,_,A,ie,j,!1)}if(C.renderPass==="translucent"&&_.paint.get("fill-antialias")){const ie=C.depthModeForSublayer(_.getPaintProperty("fill-outline-color")?2:0,lr.ReadOnly);zr(C,l,_,A,ie,j,!0)}},"fill-extrusion":function(C,l,_,A){const k=_.paint.get("fill-extrusion-opacity");if(k!==0&&C.renderPass==="translucent"){const B=new lr(C.context.gl.LEQUAL,lr.ReadWrite,C.depthRangeFor3D);if(k!==1||_.paint.get("fill-extrusion-pattern").constantOr(1))Is(C,l,_,A,B,Pr.disabled,Pn.disabled),Is(C,l,_,A,B,C.stencilModeFor3D(),C.colorModeForRenderPass());else{const j=C.colorModeForRenderPass();Is(C,l,_,A,B,Pr.disabled,j)}}},hillshade:function(C,l,_,A){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const k=C.context,B=C.depthModeForSublayer(0,lr.ReadOnly),j=C.colorModeForRenderPass(),[Z,J]=C.renderPass==="translucent"?C.stencilConfigForOverlap(A):[{},A];for(const ie of J){const ae=l.getTile(ie);ae.needsHillshadePrepare&&C.renderPass==="offscreen"?$o(C,ae,_,B,Pr.disabled,j):C.renderPass==="translucent"&&Ku(C,ae,_,B,Z[ie.overscaledZ],j)}k.viewport.set([0,0,C.width,C.height])},raster:function(C,l,_,A){if(C.renderPass!=="translucent"||_.paint.get("raster-opacity")===0||!A.length)return;const k=C.context,B=k.gl,j=l.getSource(),Z=C.useProgram("raster"),J=C.colorModeForRenderPass(),[ie,ae]=j instanceof Xi?[{},A]:C.stencilConfigForOverlap(A),ge=ae[ae.length-1].overscaledZ,Ae=!C.options.moving;for(const Ke of ae){const ke=C.depthModeForSublayer(Ke.overscaledZ-ge,_.paint.get("raster-opacity")===1?lr.ReadWrite:lr.ReadOnly,B.LESS),Xe=l.getTile(Ke),ct=C.transform.calculatePosMatrix(Ke.toUnwrapped(),Ae);Xe.registerFadeDuration(_.paint.get("raster-fade-duration"));const lt=l.findLoadedParent(Ke,0),bt=Ic(Xe,lt,l,_,C.transform);let pt,jt;const Rt=_.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR;k.activeTexture.set(B.TEXTURE0),Xe.texture.bind(Rt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(B.TEXTURE1),lt?(lt.texture.bind(Rt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),pt=Math.pow(2,lt.tileID.overscaledZ-Xe.tileID.overscaledZ),jt=[Xe.tileID.canonical.x*pt%1,Xe.tileID.canonical.y*pt%1]):Xe.texture.bind(Rt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const Ft=bc(ct,jt||[0,0],pt||1,bt,_);j instanceof Xi?Z.draw(k,B.TRIANGLES,ke,Pr.disabled,J,lo.disabled,Ft,_.id,j.boundsBuffer,C.quadTriangleIndexBuffer,j.boundsSegments):Z.draw(k,B.TRIANGLES,ke,ie[Ke.overscaledZ],J,lo.disabled,Ft,_.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}},background:function(C,l,_){const A=_.paint.get("background-color"),k=_.paint.get("background-opacity");if(k===0)return;const B=C.context,j=B.gl,Z=C.transform,J=Z.tileSize,ie=_.paint.get("background-pattern");if(C.isPatternMissing(ie))return;const ae=!ie&&A.a===1&&k===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==ae)return;const ge=Pr.disabled,Ae=C.depthModeForSublayer(0,ae==="opaque"?lr.ReadWrite:lr.ReadOnly),Ke=C.colorModeForRenderPass(),ke=C.useProgram(ie?"backgroundPattern":"background"),Xe=Z.coveringTiles({tileSize:J});ie&&(B.activeTexture.set(j.TEXTURE0),C.imageManager.bind(C.context));const ct=_.getCrossfadeParameters();for(const lt of Xe){const bt=C.transform.calculatePosMatrix(lt.toUnwrapped()),pt=ie?kl(bt,k,C,ie,{tileID:lt,tileSize:J},ct):ih(bt,k,A);ke.draw(B,j.TRIANGLES,Ae,ge,Ke,lo.disabled,pt,_.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}},debug:function(C,l,_){for(let A=0;A<_.length;A++)Tc(C,l,_[A])},custom:function(C,l,_){const A=C.context,k=_.implementation;if(C.renderPass==="offscreen"){const B=k.prerender;B&&(C.setCustomLayerDefaults(),A.setColorMode(C.colorModeForRenderPass()),B.call(k,A.gl,C.transform.customLayerMatrix()),A.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),A.setColorMode(C.colorModeForRenderPass()),A.setStencilMode(Pr.disabled);const B=k.renderingMode==="3d"?new lr(C.context.gl.LEQUAL,lr.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,lr.ReadOnly);A.setDepthMode(B),k.render(A.gl,C.transform.customLayerMatrix()),A.setDirty(),C.setBaseState(),A.bindFramebuffer.set(null)}}};class za{constructor(l,_){this.context=new cu(l),this.transform=_,this._tileTextures={},this.setup(),this.numSublayers=gt.maxUnderzooming+gt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fi,this.gpuTimers={}}resize(l,_,A){if(this.width=l*A,this.height=_*A,this.pixelRatio=A,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const k of this.style._order)this.style._layers[k].resize()}setup(){const l=this.context,_=new h.PosArray;_.emplaceBack(0,0),_.emplaceBack(h.EXTENT,0),_.emplaceBack(0,h.EXTENT),_.emplaceBack(h.EXTENT,h.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(_,Zo.members),this.tileExtentSegments=h.SegmentVector.simpleSegment(0,0,4,2);const A=new h.PosArray;A.emplaceBack(0,0),A.emplaceBack(h.EXTENT,0),A.emplaceBack(0,h.EXTENT),A.emplaceBack(h.EXTENT,h.EXTENT),this.debugBuffer=l.createVertexBuffer(A,Zo.members),this.debugSegments=h.SegmentVector.simpleSegment(0,0,4,5);const k=new h.RasterBoundsArray;k.emplaceBack(0,0,0,0),k.emplaceBack(h.EXTENT,0,h.EXTENT,0),k.emplaceBack(0,h.EXTENT,0,h.EXTENT),k.emplaceBack(h.EXTENT,h.EXTENT,h.EXTENT,h.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(k,Xt.members),this.rasterBoundsSegments=h.SegmentVector.simpleSegment(0,0,4,2);const B=new h.PosArray;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(B,Zo.members),this.viewportSegments=h.SegmentVector.simpleSegment(0,0,4,2);const j=new h.LineStripIndexArray;j.emplaceBack(0),j.emplaceBack(1),j.emplaceBack(3),j.emplaceBack(2),j.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(j);const Z=new h.TriangleIndexArray;Z.emplaceBack(0,1,2),Z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(Z),this.emptyTexture=new we(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);const J=this.context.gl;this.stencilClearMode=new Pr({func:J.ALWAYS,mask:0},0,255,J.ZERO,J.ZERO,J.ZERO)}clearStencil(){const l=this.context,_=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const A=h.create();h.ortho(A,0,this.width,this.height,0,0,1),h.scale(A,A,[_.drawingBufferWidth,_.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,_.TRIANGLES,lr.disabled,this.stencilClearMode,Pn.disabled,lo.disabled,ma(A),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,_){if(this.currentStencilSource===l.source||!l.isTileClipped()||!_||!_.length)return;this.currentStencilSource=l.source;const A=this.context,k=A.gl;this.nextStencilID+_.length>256&&this.clearStencil(),A.setColorMode(Pn.disabled),A.setDepthMode(lr.disabled);const B=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const j of _){const Z=this._tileClippingMaskIDs[j.key]=this.nextStencilID++;B.draw(A,k.TRIANGLES,lr.disabled,new Pr({func:k.ALWAYS,mask:0},Z,255,k.KEEP,k.KEEP,k.REPLACE),Pn.disabled,lo.disabled,ma(j.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,_=this.context.gl;return new Pr({func:_.NOTEQUAL,mask:255},l,255,_.KEEP,_.KEEP,_.REPLACE)}stencilModeForClipping(l){const _=this.context.gl;return new Pr({func:_.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,_.KEEP,_.KEEP,_.REPLACE)}stencilConfigForOverlap(l){const _=this.context.gl,A=l.sort((j,Z)=>Z.overscaledZ-j.overscaledZ),k=A[A.length-1].overscaledZ,B=A[0].overscaledZ-k+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const j={};for(let Z=0;Z<B;Z++)j[Z+k]=new Pr({func:_.GEQUAL,mask:255},Z+this.nextStencilID,255,_.KEEP,_.KEEP,_.REPLACE);return this.nextStencilID+=B,[j,A]}return[{[k]:Pr.disabled},A]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Pn([l.CONSTANT_COLOR,l.ONE],new h.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Pn.unblended:Pn.alphaBlended}depthModeForSublayer(l,_,A){if(!this.opaquePassEnabledForLayer())return lr.disabled;const k=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new lr(A||this.context.gl.LEQUAL,_,[k,k])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,_){this.style=l,this.options=_,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(h.exported.now()),this.imageManager.beginFrame();const A=this.style._order,k=this.style.sourceCaches;for(const J in k){const ie=k[J];ie.used&&ie.prepare(this.context)}const B={},j={},Z={};for(const J in k){const ie=k[J];B[J]=ie.getVisibleCoordinates(),j[J]=B[J].slice().reverse(),Z[J]=ie.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let J=0;J<A.length;J++)if(this.style._layers[A[J]].is3D()){this.opaquePassCutoff=J;break}this.renderPass="offscreen";for(const J of A){const ie=this.style._layers[J];if(!ie.hasOffscreenPass()||ie.isHidden(this.transform.zoom))continue;const ae=j[ie.source];(ie.type==="custom"||ae.length)&&this.renderLayer(this,k[ie.source],ie,ae)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:_.showOverdrawInspector?h.Color.black:h.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=_.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=A.length-1;this.currentLayer>=0;this.currentLayer--){const J=this.style._layers[A[this.currentLayer]],ie=k[J.source],ae=B[J.source];this._renderTileClippingMasks(J,ae),this.renderLayer(this,ie,J,ae)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<A.length;this.currentLayer++){const J=this.style._layers[A[this.currentLayer]],ie=k[J.source],ae=(J.type==="symbol"?Z:j)[J.source];this._renderTileClippingMasks(J,B[J.source]),this.renderLayer(this,ie,J,ae)}if(this.options.showTileBoundaries){let J,ie;Object.values(this.style._layers).forEach(ae=>{ae.source&&!ae.isHidden(this.transform.zoom)&&(ae.source!==(ie&&ie.id)&&(ie=this.style.sourceCaches[ae.source]),(!J||J.getSource().maxzoom<ie.getSource().maxzoom)&&(J=ie))}),J&&hs.debug(this,J,J.getVisibleCoordinates())}this.options.showPadding&&function(J){const ie=J.transform.padding;fu(J,J.transform.height-(ie.top||0),3,oh),fu(J,ie.bottom||0,3,Sc),Xs(J,ie.left||0,3,Ss),Xs(J,J.transform.width-(ie.right||0),3,Ts);const ae=J.transform.centerPoint;(function(ge,Ae,Ke,ke){As(ge,Ae-1,Ke-10,2,20,ke),As(ge,Ae-10,Ke-1,20,2,ke)})(J,ae.x,J.transform.height-ae.y,dl)}(this),this.context.setDefault()}renderLayer(l,_,A,k){A.isHidden(this.transform.zoom)||(A.type==="background"||A.type==="custom"||k.length)&&(this.id=A.id,this.gpuTimingStart(A),hs[A.type](l,_,A,k,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const _=this.context.extTimerQuery;let A=this.gpuTimers[l.id];A||(A=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:_.createQueryEXT()}),A.calls++,_.beginQueryEXT(_.TIME_ELAPSED_EXT,A.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}queryGpuTimers(l){const _={};for(const A in l){const k=l[A],B=this.context.extTimerQuery,j=B.getQueryObjectEXT(k.query,B.QUERY_RESULT_EXT)/1e6;B.deleteQueryEXT(k.query),_[A]=j}return _}translatePosMatrix(l,_,A,k,B){if(!A[0]&&!A[1])return l;const j=B?k==="map"?this.transform.angle:0:k==="viewport"?-this.transform.angle:0;if(j){const ie=Math.sin(j),ae=Math.cos(j);A=[A[0]*ae-A[1]*ie,A[0]*ie+A[1]*ae]}const Z=[B?A[0]:ze(_,A[0],this.transform.zoom),B?A[1]:ze(_,A[1],this.transform.zoom),0],J=new Float32Array(16);return h.translate(J,l,Z),J}saveTileTexture(l){const _=this._tileTextures[l.size[0]];_?_.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const _=this._tileTextures[l];return _&&_.length>0?_.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const _=this.imageManager.getPattern(l.from.toString()),A=this.imageManager.getPattern(l.to.toString());return!_||!A}useProgram(l,_){this.cache=this.cache||{};const A=`${l}${_?_.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[A]||(this.cache[A]=new Qo(this.context,l,iu[l],_,ga[l],this._showOverdrawInspector)),this.cache[A]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new we(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class mu{constructor(l,_){this.points=l,this.planes=_}static fromInvProjectionMatrix(l,_,A){const k=Math.pow(2,A),B=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Z=>h.transformMat4([],Z,l)).map(Z=>h.scale$1([],Z,1/Z[3]/_*k)),j=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Z=>{const J=function(Ae,Ke){var ke=Ke[0],Xe=Ke[1],ct=Ke[2],lt=ke*ke+Xe*Xe+ct*ct;return lt>0&&(lt=1/Math.sqrt(lt)),Ae[0]=Ke[0]*lt,Ae[1]=Ke[1]*lt,Ae[2]=Ke[2]*lt,Ae}([],function(Ae,Ke,ke){var Xe=Ke[0],ct=Ke[1],lt=Ke[2],bt=ke[0],pt=ke[1],jt=ke[2];return Ae[0]=ct*jt-lt*pt,Ae[1]=lt*bt-Xe*jt,Ae[2]=Xe*pt-ct*bt,Ae}([],ve([],B[Z[0]],B[Z[1]]),ve([],B[Z[2]],B[Z[1]]))),ie=-((ae=J)[0]*(ge=B[Z[1]])[0]+ae[1]*ge[1]+ae[2]*ge[2]);var ae,ge;return J.concat(ie)});return new mu(B,j)}}class gu{constructor(l,_){this.min=l,this.max=_,this.center=function(A,k,B){return A[0]=.5*k[0],A[1]=.5*k[1],A[2]=.5*k[2],A}([],function(A,k,B){return A[0]=k[0]+B[0],A[1]=k[1]+B[1],A[2]=k[2]+B[2],A}([],this.min,this.max))}quadrant(l){const _=[l%2==0,l<2],A=he(this.min),k=he(this.max);for(let B=0;B<_.length;B++)A[B]=_[B]?this.min[B]:this.center[B],k[B]=_[B]?this.center[B]:this.max[B];return k[2]=this.max[2],new gu(A,k)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const _=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let A=!0;for(let k=0;k<l.planes.length;k++){const B=l.planes[k];let j=0;for(let Z=0;Z<_.length;Z++)h.dot(B,_[Z])>=0&&j++;if(j===0)return 0;j!==_.length&&(A=!1)}if(A)return 2;for(let k=0;k<3;k++){let B=Number.MAX_VALUE,j=-Number.MAX_VALUE;for(let Z=0;Z<l.points.length;Z++){const J=l.points[Z][k]-this.min[k];B=Math.min(B,J),j=Math.max(j,J)}if(j<0||B>this.max[k]-this.min[k])return 0}return 1}}class pl{constructor(l=0,_=0,A=0,k=0){if(isNaN(l)||l<0||isNaN(_)||_<0||isNaN(A)||A<0||isNaN(k)||k<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=_,this.left=A,this.right=k}interpolate(l,_,A){return _.top!=null&&l.top!=null&&(this.top=h.number(l.top,_.top,A)),_.bottom!=null&&l.bottom!=null&&(this.bottom=h.number(l.bottom,_.bottom,A)),_.left!=null&&l.left!=null&&(this.left=h.number(l.left,_.left,A)),_.right!=null&&l.right!=null&&(this.right=h.number(l.right,_.right,A)),this}getCenter(l,_){const A=h.clamp((this.left+l-this.right)/2,0,l),k=h.clamp((this.top+_-this.bottom)/2,0,_);return new h.pointGeometry(A,k)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new pl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ka{constructor(l,_,A,k,B){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=B===void 0||!!B,this._minZoom=l||0,this._maxZoom=_||22,this._minPitch=A==null?0:A,this._maxPitch=k==null?60:k,this.setMaxBounds(),this.width=0,this.height=0,this._center=new h.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new pl,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const l=new Ka(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const _=-h.wrap(l,-180,180)*Math.PI/180;this.angle!==_&&(this._unmodified=!1,this.angle=_,this._calcMatrices(),this.rotationMatrix=function(){var A=new h.ARRAY_TYPE(4);return h.ARRAY_TYPE!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A}(),function(A,k,B){var j=k[0],Z=k[1],J=k[2],ie=k[3],ae=Math.sin(B),ge=Math.cos(B);A[0]=j*ge+J*ae,A[1]=Z*ge+ie*ae,A[2]=j*-ae+J*ge,A[3]=Z*-ae+ie*ge}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const _=h.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==_&&(this._unmodified=!1,this._pitch=_,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const _=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==_&&(this._unmodified=!1,this._zoom=_,this.scale=this.zoomScale(_),this.tileZoom=Math.floor(_),this.zoomFraction=_-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,_,A){this._unmodified=!1,this._edgeInsets.interpolate(l,_,A),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const _=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,_)}getVisibleUnwrappedCoordinates(l){const _=[new h.UnwrappedTileID(0,l)];if(this._renderWorldCopies){const A=this.pointCoordinate(new h.pointGeometry(0,0)),k=this.pointCoordinate(new h.pointGeometry(this.width,0)),B=this.pointCoordinate(new h.pointGeometry(this.width,this.height)),j=this.pointCoordinate(new h.pointGeometry(0,this.height)),Z=Math.floor(Math.min(A.x,k.x,B.x,j.x)),J=Math.floor(Math.max(A.x,k.x,B.x,j.x)),ie=1;for(let ae=Z-ie;ae<=J+ie;ae++)ae!==0&&_.push(new h.UnwrappedTileID(ae,l))}return _}coveringTiles(l){let _=this.coveringZoomLevel(l);const A=_;if(l.minzoom!==void 0&&_<l.minzoom)return[];l.maxzoom!==void 0&&_>l.maxzoom&&(_=l.maxzoom);const k=h.MercatorCoordinate.fromLngLat(this.center),B=Math.pow(2,_),j=[B*k.x,B*k.y,0],Z=mu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,_);let J=l.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(J=_);const ie=ke=>({aabb:new gu([ke*B,0,0],[(ke+1)*B,B,0]),zoom:0,x:0,y:0,wrap:ke,fullyVisible:!1}),ae=[],ge=[],Ae=_,Ke=l.reparseOverscaled?A:_;if(this._renderWorldCopies)for(let ke=1;ke<=3;ke++)ae.push(ie(-ke)),ae.push(ie(ke));for(ae.push(ie(0));ae.length>0;){const ke=ae.pop(),Xe=ke.x,ct=ke.y;let lt=ke.fullyVisible;if(!lt){const Ft=ke.aabb.intersects(Z);if(Ft===0)continue;lt=Ft===2}const bt=ke.aabb.distanceX(j),pt=ke.aabb.distanceY(j),jt=Math.max(Math.abs(bt),Math.abs(pt)),Rt=3+(1<<Ae-ke.zoom)-2;if(ke.zoom===Ae||jt>Rt&&ke.zoom>=J)ge.push({tileID:new h.OverscaledTileID(ke.zoom===Ae?Ke:ke.zoom,ke.wrap,ke.zoom,Xe,ct),distanceSq:se([j[0]-.5-Xe,j[1]-.5-ct])});else for(let Ft=0;Ft<4;Ft++){const ti=(Xe<<1)+Ft%2,ui=(ct<<1)+(Ft>>1);ae.push({aabb:ke.aabb.quadrant(Ft),zoom:ke.zoom+1,x:ti,y:ui,wrap:ke.wrap,fullyVisible:lt})}}return ge.sort((ke,Xe)=>ke.distanceSq-Xe.distanceSq).map(ke=>ke.tileID)}resize(l,_){this.width=l,this.height=_,this.pixelsToGLUnits=[2/l,-2/_],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const _=h.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new h.pointGeometry(h.mercatorXfromLng(l.lng)*this.worldSize,h.mercatorYfromLat(_)*this.worldSize)}unproject(l){return new h.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(l,_){const A=this.pointCoordinate(_),k=this.pointCoordinate(this.centerPoint),B=this.locationCoordinate(l),j=new h.MercatorCoordinate(B.x-(A.x-k.x),B.y-(A.y-k.y));this.center=this.coordinateLocation(j),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l){return this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}locationCoordinate(l){return h.MercatorCoordinate.fromLngLat(l)}coordinateLocation(l){return l.toLngLat()}pointCoordinate(l){const _=[l.x,l.y,0,1],A=[l.x,l.y,1,1];h.transformMat4(_,_,this.pixelMatrixInverse),h.transformMat4(A,A,this.pixelMatrixInverse);const k=_[3],B=A[3],j=_[1]/k,Z=A[1]/B,J=_[2]/k,ie=A[2]/B,ae=J===ie?0:(0-J)/(ie-J);return new h.MercatorCoordinate(h.number(_[0]/k,A[0]/B,ae)/this.worldSize,h.number(j,Z,ae)/this.worldSize)}coordinatePoint(l){const _=[l.x*this.worldSize,l.y*this.worldSize,0,1];return h.transformMat4(_,_,this.pixelMatrix),new h.pointGeometry(_[0]/_[3],_[1]/_[3])}getBounds(){return new h.LngLatBounds().extend(this.pointLocation(new h.pointGeometry(0,0))).extend(this.pointLocation(new h.pointGeometry(this.width,0))).extend(this.pointLocation(new h.pointGeometry(this.width,this.height))).extend(this.pointLocation(new h.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new h.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(l,_=!1){const A=l.key,k=_?this._alignedPosMatrixCache:this._posMatrixCache;if(k[A])return k[A];const B=l.canonical,j=this.worldSize/this.zoomScale(B.z),Z=B.x+Math.pow(2,B.z)*l.wrap,J=h.identity(new Float64Array(16));return h.translate(J,J,[Z*j,B.y*j,0]),h.scale(J,J,[j/h.EXTENT,j/h.EXTENT,1]),h.multiply(J,_?this.alignedProjMatrix:this.projMatrix,J),k[A]=new Float32Array(J),k[A]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let l,_,A,k,B=-90,j=90,Z=-180,J=180;const ie=this.size,ae=this._unmodified;if(this.latRange){const Ke=this.latRange;B=h.mercatorYfromLat(Ke[1])*this.worldSize,j=h.mercatorYfromLat(Ke[0])*this.worldSize,l=j-B<ie.y?ie.y/(j-B):0}if(this.lngRange){const Ke=this.lngRange;Z=h.mercatorXfromLng(Ke[0])*this.worldSize,J=h.mercatorXfromLng(Ke[1])*this.worldSize,_=J-Z<ie.x?ie.x/(J-Z):0}const ge=this.point,Ae=Math.max(_||0,l||0);if(Ae)return this.center=this.unproject(new h.pointGeometry(_?(J+Z)/2:ge.x,l?(j+B)/2:ge.y)),this.zoom+=this.scaleZoom(Ae),this._unmodified=ae,void(this._constraining=!1);if(this.latRange){const Ke=ge.y,ke=ie.y/2;Ke-ke<B&&(k=B+ke),Ke+ke>j&&(k=j-ke)}if(this.lngRange){const Ke=ge.x,ke=ie.x/2;Ke-ke<Z&&(A=Z+ke),Ke+ke>J&&(A=J-ke)}A===void 0&&k===void 0||(this.center=this.unproject(new h.pointGeometry(A!==void 0?A:ge.x,k!==void 0?k:ge.y))),this._unmodified=ae,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const _=Math.PI/2+this._pitch,A=this._fov*(.5+l.y/this.height),k=Math.sin(A)*this.cameraToCenterDistance/Math.sin(h.clamp(Math.PI-_-A,.01,Math.PI-.01)),B=this.point,j=B.x,Z=B.y,J=1.01*(Math.cos(Math.PI/2-this._pitch)*k+this.cameraToCenterDistance),ie=this.height/50;let ae=new Float64Array(16);h.perspective(ae,this._fov,this.width/this.height,ie,J),ae[8]=2*-l.x/this.width,ae[9]=2*l.y/this.height,h.scale(ae,ae,[1,-1,1]),h.translate(ae,ae,[0,0,-this.cameraToCenterDistance]),h.rotateX(ae,ae,this._pitch),h.rotateZ(ae,ae,this.angle),h.translate(ae,ae,[-j,-Z,0]),this.mercatorMatrix=h.scale([],ae,[this.worldSize,this.worldSize,this.worldSize]),h.scale(ae,ae,[1,1,h.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=ae,this.invProjMatrix=h.invert([],this.projMatrix);const ge=this.width%2/2,Ae=this.height%2/2,Ke=Math.cos(this.angle),ke=Math.sin(this.angle),Xe=j-Math.round(j)+Ke*ge+ke*Ae,ct=Z-Math.round(Z)+Ke*Ae+ke*ge,lt=new Float64Array(ae);if(h.translate(lt,lt,[Xe>.5?Xe-1:Xe,ct>.5?ct-1:ct,0]),this.alignedProjMatrix=lt,ae=h.create(),h.scale(ae,ae,[this.width/2,-this.height/2,1]),h.translate(ae,ae,[1,-1,0]),this.labelPlaneMatrix=ae,ae=h.create(),h.scale(ae,ae,[1,-1,1]),h.translate(ae,ae,[-1,-1,0]),h.scale(ae,ae,[2/this.width,2/this.height,1]),this.glCoordMatrix=ae,this.pixelMatrix=h.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),ae=h.invert(new Float64Array(16),this.pixelMatrix),!ae)throw new Error("failed to invert matrix");this.pixelMatrixInverse=ae,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new h.pointGeometry(0,0)),_=[l.x*this.worldSize,l.y*this.worldSize,0,1];return h.transformMat4(_,_,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.pointGeometry(0,l))}getCameraQueryGeometry(l){const _=this.getCameraPoint();if(l.length===1)return[l[0],_];{let A=_.x,k=_.y,B=_.x,j=_.y;for(const Z of l)A=Math.min(A,Z.x),k=Math.min(k,Z.y),B=Math.max(B,Z.x),j=Math.max(j,Z.y);return[new h.pointGeometry(A,k),new h.pointGeometry(B,k),new h.pointGeometry(B,j),new h.pointGeometry(A,j),new h.pointGeometry(A,k)]}}}class Pl{constructor(l){this._hashName=l&&encodeURIComponent(l),h.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(_,A){let k=!1,B=null;const j=()=>{B=null,k&&(_(),B=setTimeout(j,300),k=!1)};return()=>(k=!0,B||j(),B)}(this._updateHashUnthrottled.bind(this))}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(l){const _=this._map.getCenter(),A=Math.round(100*this._map.getZoom())/100,k=Math.ceil((A*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,k),j=Math.round(_.lng*B)/B,Z=Math.round(_.lat*B)/B,J=this._map.getBearing(),ie=this._map.getPitch();let ae="";if(ae+=l?`/${j}/${Z}/${A}`:`${A}/${Z}/${j}`,(J||ie)&&(ae+="/"+Math.round(10*J)/10),ie&&(ae+=`/${Math.round(ie)}`),this._hashName){const ge=this._hashName;let Ae=!1;const Ke=window.location.hash.slice(1).split("&").map(ke=>{const Xe=ke.split("=")[0];return Xe===ge?(Ae=!0,`${Xe}=${ae}`):ke}).filter(ke=>ke);return Ae||Ke.push(`${ge}=${ae}`),`#${Ke.join("&")}`}return`#${ae}`}_getCurrentHash(){const l=window.location.hash.replace("#","");if(this._hashName){let _;return l.split("&").map(A=>A.split("=")).forEach(A=>{A[0]===this._hashName&&(_=A)}),(_&&_[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._getCurrentHash();if(l.length>=3&&!l.some(_=>isNaN(_))){const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:_,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}}}const Ks={linearity:.3,easing:h.bezier(0,0,.3,1)},Ju=h.extend({deceleration:2500,maxSpeed:1400},Ks),yu=h.extend({deceleration:20,maxSpeed:1400},Ks),ah=h.extend({deceleration:1e3,maxSpeed:360},Ks),Cs=h.extend({deceleration:1e3,maxSpeed:90},Ks);class Yu{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,_=h.exported.now();for(;l.length>0&&_-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const _={zoom:0,bearing:0,pitch:0,pan:new h.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)_.zoom+=B.zoomDelta||0,_.bearing+=B.bearingDelta||0,_.pitch+=B.pitchDelta||0,B.panDelta&&_.pan._add(B.panDelta),B.around&&(_.around=B.around),B.pinchAround&&(_.pinchAround=B.pinchAround);const A=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(_.pan.mag()){const B=Dl(_.pan.mag(),A,h.extend({},Ju,l||{}));k.offset=_.pan.mult(B.amount/_.pan.mag()),k.center=this._map.transform.center,zl(k,B)}if(_.zoom){const B=Dl(_.zoom,A,yu);k.zoom=this._map.transform.zoom+B.amount,zl(k,B)}if(_.bearing){const B=Dl(_.bearing,A,ah);k.bearing=this._map.transform.bearing+h.clamp(B.amount,-179,179),zl(k,B)}if(_.pitch){const B=Dl(_.pitch,A,Cs);k.pitch=this._map.transform.pitch+B.amount,zl(k,B)}if(k.zoom||k.bearing){const B=_.pinchAround===void 0?_.around:_.pinchAround;k.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),h.extend(k,{noMoveStart:!0})}}function zl(C,l){(!C.duration||C.duration<l.duration)&&(C.duration=l.duration,C.easing=l.easing)}function Dl(C,l,_){const{maxSpeed:A,linearity:k,deceleration:B}=_,j=h.clamp(C*k/(l/1e3),-A,A),Z=Math.abs(j)/(B*k);return{easing:_.easing,duration:1e3*Z,amount:j*(Z/2)}}class ea extends h.Event{constructor(l,_,A,k={}){const B=O.mousePos(_.getCanvasContainer(),A),j=_.unproject(B);super(l,h.extend({point:B,lngLat:j,originalEvent:A},k)),this._defaultPrevented=!1,this.target=_}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ta extends h.Event{constructor(l,_,A){const k=l==="touchend"?A.changedTouches:A.touches,B=O.touchPos(_.getCanvasContainer(),k),j=B.map(J=>_.unproject(J)),Z=B.reduce((J,ie,ae,ge)=>J.add(ie.div(ge.length)),new h.pointGeometry(0,0));super(l,{points:B,point:Z,lngLats:j,lngLat:_.unproject(Z),originalEvent:A}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ac extends h.Event{constructor(l,_,A){super(l,{originalEvent:A}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ks{constructor(l,_){this._map=l,this._clickTolerance=_.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Ac(l.type,this._map,l))}mousedown(l,_){return this._mousedownPos=_,this._firePreventable(new ea(l.type,this._map,l))}mouseup(l){this._map.fire(new ea(l.type,this._map,l))}click(l,_){this._mousedownPos&&this._mousedownPos.dist(_)>=this._clickTolerance||this._map.fire(new ea(l.type,this._map,l))}dblclick(l){return this._firePreventable(new ea(l.type,this._map,l))}mouseover(l){this._map.fire(new ea(l.type,this._map,l))}mouseout(l){this._map.fire(new ea(l.type,this._map,l))}touchstart(l){return this._firePreventable(new ta(l.type,this._map,l))}touchmove(l){this._map.fire(new ta(l.type,this._map,l))}touchend(l){this._map.fire(new ta(l.type,this._map,l))}touchcancel(l){this._map.fire(new ta(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Rl{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(l){this._map.fire(new ea(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ea("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new ea(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fl{constructor(l,_){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=_.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,_){this.isEnabled()&&l.shiftKey&&l.button===0&&(O.disableDrag(),this._startPos=this._lastPos=_,this._active=!0)}mousemoveWindow(l,_){if(!this._active)return;const A=_;if(this._lastPos.equals(A)||!this._box&&A.dist(this._startPos)<this._clickTolerance)return;const k=this._startPos;this._lastPos=A,this._box||(this._box=O.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const B=Math.min(k.x,A.x),j=Math.max(k.x,A.x),Z=Math.min(k.y,A.y),J=Math.max(k.y,A.y);O.setTransform(this._box,`translate(${B}px,${Z}px)`),this._box.style.width=j-B+"px",this._box.style.height=J-Z+"px"}mouseupWindow(l,_){if(!this._active||l.button!==0)return;const A=this._startPos,k=_;if(this.reset(),O.suppressClick(),A.x!==k.x||A.y!==k.y)return this._map.fire(new h.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:B=>B.fitScreenCoordinates(A,k,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,_){return this._map.fire(new h.Event(l,{originalEvent:_}))}}function Da(C,l){const _={};for(let A=0;A<C.length;A++)_[C[A].identifier]=l[A];return _}class Gr{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,_,A){(this.centroid||A.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),A.length===this.numTouches&&(this.centroid=function(k){const B=new h.pointGeometry(0,0);for(const j of k)B._add(j);return B.div(k.length)}(_),this.touches=Da(A,_)))}touchmove(l,_,A){if(this.aborted||!this.centroid)return;const k=Da(A,_);for(const B in this.touches){const j=this.touches[B],Z=k[B];(!Z||Z.dist(j)>30)&&(this.aborted=!0)}}touchend(l,_,A){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),A.length===0){const k=!this.aborted&&this.centroid;if(this.reset(),k)return k}}}class Ol{constructor(l){this.singleTap=new Gr(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,_,A){this.singleTap.touchstart(l,_,A)}touchmove(l,_,A){this.singleTap.touchmove(l,_,A)}touchend(l,_,A){const k=this.singleTap.touchend(l,_,A);if(k){const B=l.timeStamp-this.lastTime<500,j=!this.lastTap||this.lastTap.dist(k)<30;if(B&&j||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=k,this.count===this.numTaps)return this.reset(),k}}}class ml{constructor(){this._zoomIn=new Ol({numTouches:1,numTaps:2}),this._zoomOut=new Ol({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,_,A){this._zoomIn.touchstart(l,_,A),this._zoomOut.touchstart(l,_,A)}touchmove(l,_,A){this._zoomIn.touchmove(l,_,A),this._zoomOut.touchmove(l,_,A)}touchend(l,_,A){const k=this._zoomIn.touchend(l,_,A),B=this._zoomOut.touchend(l,_,A);return k?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:j.getZoom()+1,around:j.unproject(k)},{originalEvent:l})}):B?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:j.getZoom()-1,around:j.unproject(B)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ms={0:1,2:2};class Bn{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(l,_){return!1}_move(l,_){return{}}mousedown(l,_){if(this._lastPoint)return;const A=O.mouseButton(l);this._correctButton(l,A)&&(this._lastPoint=_,this._eventButton=A)}mousemoveWindow(l,_){const A=this._lastPoint;if(A){if(l.preventDefault(),function(k,B){const j=Ms[B];return k.buttons===void 0||(k.buttons&j)!==j}(l,this._eventButton))this.reset();else if(this._moved||!(_.dist(A)<this._clickTolerance))return this._moved=!0,this._lastPoint=_,this._move(A,_)}}mouseupWindow(l){this._lastPoint&&O.mouseButton(l)===this._eventButton&&(this._moved&&O.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vr extends Bn{mousedown(l,_){super.mousedown(l,_),this._lastPoint&&(this._active=!0)}_correctButton(l,_){return _===0&&!l.ctrlKey}_move(l,_){return{around:_,panDelta:_.sub(l)}}}class Si extends Bn{_correctButton(l,_){return _===0&&l.ctrlKey||_===2}_move(l,_){const A=.8*(_.x-l.x);if(A)return this._active=!0,{bearingDelta:A}}contextmenu(l){l.preventDefault()}}class gl extends Bn{_correctButton(l,_){return _===0&&l.ctrlKey||_===2}_move(l,_){const A=-.5*(_.y-l.y);if(A)return this._active=!0,{pitchDelta:A}}contextmenu(l){l.preventDefault()}}class ds{constructor(l){this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new h.pointGeometry(0,0)}touchstart(l,_,A){return this._calculateTransform(l,_,A)}touchmove(l,_,A){if(this._active&&!(A.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,_,A)}touchend(l,_,A){this._calculateTransform(l,_,A),this._active&&A.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,_,A){A.length>0&&(this._active=!0);const k=Da(A,_),B=new h.pointGeometry(0,0),j=new h.pointGeometry(0,0);let Z=0;for(const ie in k){const ae=k[ie],ge=this._touches[ie];ge&&(B._add(ae),j._add(ae.sub(ge)),Z++,k[ie]=ae)}if(this._touches=k,Z<this._minTouches||!j.mag())return;const J=j.div(Z);return this._sum._add(J),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(Z),panDelta:J}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ja{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(l){}_move(l,_,A){return{}}touchstart(l,_,A){this._firstTwoTouches||A.length<2||(this._firstTwoTouches=[A[0].identifier,A[1].identifier],this._start([_[0],_[1]]))}touchmove(l,_,A){if(!this._firstTwoTouches)return;l.preventDefault();const[k,B]=this._firstTwoTouches,j=_u(A,_,k),Z=_u(A,_,B);if(!j||!Z)return;const J=this._aroundCenter?null:j.add(Z).div(2);return this._move([j,Z],J,l)}touchend(l,_,A){if(!this._firstTwoTouches)return;const[k,B]=this._firstTwoTouches,j=_u(A,_,k),Z=_u(A,_,B);j&&Z||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function _u(C,l,_){for(let A=0;A<C.length;A++)if(C[A].identifier===_)return l[A]}function Mi(C,l){return Math.log(C/l)/Math.LN2}class yl extends Ja{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,_){const A=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Mi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mi(this._distance,A),pinchAround:_}}}function Bl(C,l){return 180*C.angleWith(l)/Math.PI}class Ls extends Ja{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,_){const A=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Bl(this._vector,A),pinchAround:_}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const _=25/(Math.PI*this._minDiameter)*360,A=Bl(l,this._startVector);return Math.abs(A)<_}}function Jr(C){return Math.abs(C.y)>Math.abs(C.x)}class Fl extends Ja{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(l){this._lastPoints=l,Jr(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,_,A){const k=l[0].sub(this._lastPoints[0]),B=l[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(k,B,A.timeStamp),this._valid)return this._lastPoints=l,this._active=!0,{pitchDelta:(k.y+B.y)/2*-.5}}gestureBeginsVertically(l,_,A){if(this._valid!==void 0)return this._valid;const k=l.mag()>=2,B=_.mag()>=2;if(!k&&!B)return;if(!k||!B)return this._firstMove===void 0&&(this._firstMove=A),A-this._firstMove<100&&void 0;const j=l.y>0==_.y>0;return Jr(l)&&Jr(_)&&j}}const Cc={panStep:100,bearingStep:15,pitchStep:10};class po{constructor(){const l=Cc;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let _=0,A=0,k=0,B=0,j=0;switch(l.keyCode){case 61:case 107:case 171:case 187:_=1;break;case 189:case 109:case 173:_=-1;break;case 37:l.shiftKey?A=-1:(l.preventDefault(),B=-1);break;case 39:l.shiftKey?A=1:(l.preventDefault(),B=1);break;case 38:l.shiftKey?k=1:(l.preventDefault(),j=-1);break;case 40:l.shiftKey?k=-1:(l.preventDefault(),j=1);break;default:return}return this._rotationDisabled&&(A=0,k=0),{cameraAnimation:Z=>{const J=Z.getZoom();Z.easeTo({duration:300,easeId:"keyboardHandler",easing:Pi,zoom:_?Math.round(J)+_*(l.shiftKey?2:1):J,bearing:Z.getBearing()+A*this._bearingStep,pitch:Z.getPitch()+k*this._pitchStep,offset:[-B*this._panStep,-j*this._panStep],center:Z.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Pi(C){return C*(2-C)}const Wo=4.000244140625;class Ul{constructor(l,_){this._map=l,this._el=l.getCanvasContainer(),this._handler=_,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,h.bindAll(["_onTimeout"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(l){if(!this.isEnabled())return;let _=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const A=h.exported.now(),k=A-(this._lastWheelEventTime||0);this._lastWheelEventTime=A,_!==0&&_%Wo==0?this._type="wheel":_!==0&&Math.abs(_)<4?this._type="trackpad":k>400?(this._type=null,this._lastValue=_,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(k*_)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,_+=this._lastValue)),l.shiftKey&&_&&(_/=4),this._type&&(this._lastWheelEvent=l,this._delta-=_,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const _=O.mousePos(this._el,l);this._around=h.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(_)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;if(this._delta!==0){const Z=this._type==="wheel"&&Math.abs(this._delta)>Wo?this._wheelZoomRate:this._defaultZoomRate;let J=2/(1+Math.exp(-Math.abs(this._delta*Z)));this._delta<0&&J!==0&&(J=1/J);const ie=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(ie*J))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,A=this._startZoom,k=this._easing;let B,j=!1;if(this._type==="wheel"&&A&&k){const Z=Math.min((h.exported.now()-this._lastWheelEventTime)/200,1),J=k(Z);B=h.number(A,_,J),Z<1?this._frameId||(this._frameId=!0):j=!0}else B=_,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:B-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let _=h.ease;if(this._prevEase){const A=this._prevEase,k=(h.exported.now()-A.start)/A.duration,B=A.easing(k+.01)-A.easing(k),j=.27/Math.sqrt(B*B+1e-4)*.01,Z=Math.sqrt(.0729-j*j);_=h.bezier(j,Z,.25,1)}return this._prevEase={start:h.exported.now(),duration:l,easing:_},_}reset(){this._active=!1}}class Js{constructor(l,_){this._clickZoom=l,this._tapZoom=_}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ra{constructor(){this.reset()}reset(){this._active=!1}dblclick(l,_){return l.preventDefault(),{cameraAnimation:A=>{A.easeTo({duration:300,zoom:A.getZoom()+(l.shiftKey?-1:1),around:A.unproject(_)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hr{constructor(){this._tap=new Ol({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(l,_,A){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?A.length>0&&(this._swipePoint=_[0],this._swipeTouch=A[0].identifier):this._tap.touchstart(l,_,A))}touchmove(l,_,A){if(this._tapTime){if(this._swipePoint){if(A[0].identifier!==this._swipeTouch)return;const k=_[0],B=k.y-this._swipePoint.y;return this._swipePoint=k,l.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(l,_,A)}touchend(l,_,A){this._tapTime?this._swipePoint&&A.length===0&&this.reset():this._tap.touchend(l,_,A)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ps{constructor(l,_,A){this._el=l,this._mousePan=_,this._touchPan=A}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class pi{constructor(l,_,A){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=_,this._mousePitch=A}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class vu{constructor(l,_,A,k){this._el=l,this._touchZoom=_,this._touchRotate=A,this._tapDragZoom=k,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ps=C=>C.zoom||C.drag||C.pitch||C.rotate;class bu extends h.Event{}function ua(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class Yr{constructor(l,_){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yu(l),this._bearingSnap=_.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(_),h.bindAll(["handleEvent","handleWindowEvent"],this);const A=this._el;this._listeners=[[A,"touchstart",{passive:!0}],[A,"touchmove",{passive:!1}],[A,"touchend",void 0],[A,"touchcancel",void 0],[A,"mousedown",void 0],[A,"mousemove",void 0],[A,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[A,"mouseover",void 0],[A,"mouseout",void 0],[A,"dblclick",void 0],[A,"click",void 0],[A,"keydown",{capture:!1}],[A,"keyup",void 0],[A,"wheel",{passive:!1}],[A,"contextmenu",void 0],[window,"blur",void 0]];for(const[k,B,j]of this._listeners)O.addEventListener(k,B,k===document?this.handleWindowEvent:this.handleEvent,j)}destroy(){for(const[l,_,A]of this._listeners)O.removeEventListener(l,_,l===document?this.handleWindowEvent:this.handleEvent,A)}_addDefaultHandlers(l){const _=this._map,A=_.getCanvasContainer();this._add("mapEvent",new ks(_,l));const k=_.boxZoom=new fl(_,l);this._add("boxZoom",k);const B=new ml,j=new Ra;_.doubleClickZoom=new Js(j,B),this._add("tapZoom",B),this._add("clickZoom",j);const Z=new Hr;this._add("tapDragZoom",Z);const J=_.touchPitch=new Fl;this._add("touchPitch",J);const ie=new Si(l),ae=new gl(l);_.dragRotate=new pi(l,ie,ae),this._add("mouseRotate",ie,["mousePitch"]),this._add("mousePitch",ae,["mouseRotate"]);const ge=new vr(l),Ae=new ds(l);_.dragPan=new ps(A,ge,Ae),this._add("mousePan",ge),this._add("touchPan",Ae,["touchZoom","touchRotate"]);const Ke=new Ls,ke=new yl;_.touchZoomRotate=new vu(A,ke,Ke,Z),this._add("touchRotate",Ke,["touchPan","touchZoom"]),this._add("touchZoom",ke,["touchPan","touchRotate"]);const Xe=_.scrollZoom=new Ul(_,this);this._add("scrollZoom",Xe,["mousePan"]);const ct=_.keyboard=new po;this._add("keyboard",ct),this._add("blockableMapEvent",new Rl(_));for(const lt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[lt]&&_[lt].enable(l[lt])}_add(l,_,A){this._handlers.push({handlerName:l,handler:_,allowed:A}),this._handlersById[l]=_}stop(l){if(!this._updatingCamera){for(const{handler:_}of this._handlers)_.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ps(this._eventsInProgress))||this.isZooming()}_blockedByActive(l,_,A){for(const k in l)if(k!==A&&(!_||_.indexOf(k)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const _=[];for(const A of l)this._el.contains(A.target)&&_.push(A);return _}handleEvent(l,_){if(l.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=l.type==="renderFrame"?void 0:l,k={needsRenderFrame:!1},B={},j={},Z=l.touches,J=Z?this._getMapTouches(Z):void 0,ie=J?O.touchPos(this._el,J):O.mousePos(this._el,l);for(const{handlerName:Ae,handler:Ke,allowed:ke}of this._handlers){if(!Ke.isEnabled())continue;let Xe;this._blockedByActive(j,ke,Ae)?Ke.reset():Ke[_||l.type]&&(Xe=Ke[_||l.type](l,ie,J),this.mergeHandlerResult(k,B,Xe,Ae,A),Xe&&Xe.needsRenderFrame&&this._triggerRenderFrame()),(Xe||Ke.isActive())&&(j[Ae]=Ke)}const ae={};for(const Ae in this._previousActiveHandlers)j[Ae]||(ae[Ae]=A);this._previousActiveHandlers=j,(Object.keys(ae).length||ua(k))&&(this._changes.push([k,B,ae]),this._triggerRenderFrame()),(Object.keys(j).length||ua(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ge}=k;ge&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ge(this._map))}mergeHandlerResult(l,_,A,k,B){if(!A)return;h.extend(l,A);const j={handlerName:k,originalEvent:A.originalEvent||B};A.zoomDelta!==void 0&&(_.zoom=j),A.panDelta!==void 0&&(_.drag=j),A.pitchDelta!==void 0&&(_.pitch=j),A.bearingDelta!==void 0&&(_.rotate=j)}_applyChanges(){const l={},_={},A={};for(const[k,B,j]of this._changes)k.panDelta&&(l.panDelta=(l.panDelta||new h.pointGeometry(0,0))._add(k.panDelta)),k.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(l.around=k.around),k.pinchAround!==void 0&&(l.pinchAround=k.pinchAround),k.noInertia&&(l.noInertia=k.noInertia),h.extend(_,B),h.extend(A,j);this._updateMapTransform(l,_,A),this._changes=[]}_updateMapTransform(l,_,A){const k=this._map,B=k.transform;if(!ua(l))return this._fireEvents(_,A,!0);let{panDelta:j,zoomDelta:Z,bearingDelta:J,pitchDelta:ie,around:ae,pinchAround:ge}=l;ge!==void 0&&(ae=ge),k._stop(!0),ae=ae||k.transform.centerPoint;const Ae=B.pointLocation(j?ae.sub(j):ae);J&&(B.bearing+=J),ie&&(B.pitch+=ie),Z&&(B.zoom+=Z),B.setLocationAtPoint(Ae,ae),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(_,A,!0)}_fireEvents(l,_,A){const k=Ps(this._eventsInProgress),B=Ps(l),j={};for(const ae in l){const{originalEvent:ge}=l[ae];this._eventsInProgress[ae]||(j[`${ae}start`]=ge),this._eventsInProgress[ae]=l[ae]}!k&&B&&this._fireEvent("movestart",B.originalEvent);for(const ae in j)this._fireEvent(ae,j[ae]);B&&this._fireEvent("move",B.originalEvent);for(const ae in l){const{originalEvent:ge}=l[ae];this._fireEvent(ae,ge)}const Z={};let J;for(const ae in this._eventsInProgress){const{handlerName:ge,originalEvent:Ae}=this._eventsInProgress[ae];this._handlersById[ge].isActive()||(delete this._eventsInProgress[ae],J=_[ge]||Ae,Z[`${ae}end`]=J)}for(const ae in Z)this._fireEvent(ae,Z[ae]);const ie=Ps(this._eventsInProgress);if(A&&(k||B)&&!ie){this._updatingCamera=!0;const ae=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ge=Ae=>Ae!==0&&-this._bearingSnap<Ae&&Ae<this._bearingSnap;ae?(ge(ae.bearing||this._map.getBearing())&&(ae.bearing=0),this._map.easeTo(ae,{originalEvent:J})):(this._map.fire(new h.Event("moveend",{originalEvent:J})),ge(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,_){this._map.fire(new h.Event(l,_?{originalEvent:_}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new bu("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Vr={extend:(C,...l)=>h.extend(C,...l),run(C){C()},logToElement(C,l=!1,_="log"){const A=window.document.getElementById(_);A&&(l&&(A.innerHTML=""),A.innerHTML+=`<br>${C}`)}};class _l extends h.Evented{constructor(l,_){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=_.bearingSnap,h.bindAll(["_renderFrameCallback"],this)}getCenter(){return new h.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,_){return this.jumpTo({center:l},_)}panBy(l,_,A){return l=h.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,h.extend({offset:l},_),A)}panTo(l,_,A){return this.easeTo(h.extend({center:l},_),A)}getZoom(){return this.transform.zoom}setZoom(l,_){return this.jumpTo({zoom:l},_),this}zoomTo(l,_,A){return this.easeTo(h.extend({zoom:l},_),A)}zoomIn(l,_){return this.zoomTo(this.getZoom()+1,l,_),this}zoomOut(l,_){return this.zoomTo(this.getZoom()-1,l,_),this}getBearing(){return this.transform.bearing}setBearing(l,_){return this.jumpTo({bearing:l},_),this}getPadding(){return this.transform.padding}setPadding(l,_){return this.jumpTo({padding:l},_),this}rotateTo(l,_,A){return this.easeTo(h.extend({bearing:l},_),A)}resetNorth(l,_){return this.rotateTo(0,h.extend({duration:1e3},l),_),this}resetNorthPitch(l,_){return this.easeTo(h.extend({bearing:0,pitch:0,duration:1e3},l),_),this}snapToNorth(l,_){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,_):this}getPitch(){return this.transform.pitch}setPitch(l,_){return this.jumpTo({pitch:l},_),this}cameraForBounds(l,_){l=h.LngLatBounds.convert(l);const A=_&&_.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),A,_)}_cameraForBoxAndBearing(l,_,A,k){const B={top:0,bottom:0,right:0,left:0};if(typeof(k=h.extend({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},k)).padding=="number"){const Rt=k.padding;k.padding={top:Rt,bottom:Rt,right:Rt,left:Rt}}k.padding=h.extend(B,k.padding);const j=this.transform,Z=j.padding,J=j.project(h.LngLat.convert(l)),ie=j.project(h.LngLat.convert(_)),ae=J.rotate(-A*Math.PI/180),ge=ie.rotate(-A*Math.PI/180),Ae=new h.pointGeometry(Math.max(ae.x,ge.x),Math.max(ae.y,ge.y)),Ke=new h.pointGeometry(Math.min(ae.x,ge.x),Math.min(ae.y,ge.y)),ke=Ae.sub(Ke),Xe=(j.width-(Z.left+Z.right+k.padding.left+k.padding.right))/ke.x,ct=(j.height-(Z.top+Z.bottom+k.padding.top+k.padding.bottom))/ke.y;if(ct<0||Xe<0)return void h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const lt=Math.min(j.scaleZoom(j.scale*Math.min(Xe,ct)),k.maxZoom),bt=h.pointGeometry.convert(k.offset),pt=new h.pointGeometry((k.padding.left-k.padding.right)/2,(k.padding.top-k.padding.bottom)/2).rotate(A*Math.PI/180),jt=bt.add(pt).mult(j.scale/j.zoomScale(lt));return{center:j.unproject(J.add(ie).div(2).sub(jt)),zoom:lt,bearing:A}}fitBounds(l,_,A){return this._fitInternal(this.cameraForBounds(l,_),_,A)}fitScreenCoordinates(l,_,A,k,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(h.pointGeometry.convert(l)),this.transform.pointLocation(h.pointGeometry.convert(_)),A,k),k,B)}_fitInternal(l,_,A){return l?(delete(_=h.extend(l,_)).padding,_.linear?this.easeTo(_,A):this.flyTo(_,A)):this}jumpTo(l,_){this.stop();const A=this.transform;let k=!1,B=!1,j=!1;return"zoom"in l&&A.zoom!==+l.zoom&&(k=!0,A.zoom=+l.zoom),l.center!==void 0&&(A.center=h.LngLat.convert(l.center)),"bearing"in l&&A.bearing!==+l.bearing&&(B=!0,A.bearing=+l.bearing),"pitch"in l&&A.pitch!==+l.pitch&&(j=!0,A.pitch=+l.pitch),l.padding==null||A.isPaddingEqual(l.padding)||(A.padding=l.padding),this.fire(new h.Event("movestart",_)).fire(new h.Event("move",_)),k&&this.fire(new h.Event("zoomstart",_)).fire(new h.Event("zoom",_)).fire(new h.Event("zoomend",_)),B&&this.fire(new h.Event("rotatestart",_)).fire(new h.Event("rotate",_)).fire(new h.Event("rotateend",_)),j&&this.fire(new h.Event("pitchstart",_)).fire(new h.Event("pitch",_)).fire(new h.Event("pitchend",_)),this.fire(new h.Event("moveend",_))}easeTo(l,_){this._stop(!1,l.easeId),((l=h.extend({offset:[0,0],duration:500,easing:h.ease},l)).animate===!1||!l.essential&&h.exported.prefersReducedMotion)&&(l.duration=0);const A=this.transform,k=this.getZoom(),B=this.getBearing(),j=this.getPitch(),Z=this.getPadding(),J="zoom"in l?+l.zoom:k,ie="bearing"in l?this._normalizeBearing(l.bearing,B):B,ae="pitch"in l?+l.pitch:j,ge="padding"in l?l.padding:A.padding,Ae=h.pointGeometry.convert(l.offset);let Ke=A.centerPoint.add(Ae);const ke=A.pointLocation(Ke),Xe=h.LngLat.convert(l.center||ke);this._normalizeCenter(Xe);const ct=A.project(ke),lt=A.project(Xe).sub(ct),bt=A.zoomScale(J-k);let pt,jt;l.around&&(pt=h.LngLat.convert(l.around),jt=A.locationPoint(pt));const Rt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||J!==k,this._rotating=this._rotating||B!==ie,this._pitching=this._pitching||ae!==j,this._padding=!A.isPaddingEqual(ge),this._easeId=l.easeId,this._prepareEase(_,l.noMoveStart,Rt),this._ease(Ft=>{if(this._zooming&&(A.zoom=h.number(k,J,Ft)),this._rotating&&(A.bearing=h.number(B,ie,Ft)),this._pitching&&(A.pitch=h.number(j,ae,Ft)),this._padding&&(A.interpolatePadding(Z,ge,Ft),Ke=A.centerPoint.add(Ae)),pt)A.setLocationAtPoint(pt,jt);else{const ti=A.zoomScale(A.zoom-k),ui=J>k?Math.min(2,bt):Math.max(.5,bt),qt=Math.pow(ui,1-Ft),qi=A.unproject(ct.add(lt.mult(Ft*qt)).mult(ti));A.setLocationAtPoint(A.renderWorldCopies?qi.wrap():qi,Ke)}this._fireMoveEvents(_)},Ft=>{this._afterEase(_,Ft)},l),this}_prepareEase(l,_,A={}){this._moving=!0,_||A.moving||this.fire(new h.Event("movestart",l)),this._zooming&&!A.zooming&&this.fire(new h.Event("zoomstart",l)),this._rotating&&!A.rotating&&this.fire(new h.Event("rotatestart",l)),this._pitching&&!A.pitching&&this.fire(new h.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new h.Event("move",l)),this._zooming&&this.fire(new h.Event("zoom",l)),this._rotating&&this.fire(new h.Event("rotate",l)),this._pitching&&this.fire(new h.Event("pitch",l))}_afterEase(l,_){if(this._easeId&&_&&this._easeId===_)return;delete this._easeId;const A=this._zooming,k=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,A&&this.fire(new h.Event("zoomend",l)),k&&this.fire(new h.Event("rotateend",l)),B&&this.fire(new h.Event("pitchend",l)),this.fire(new h.Event("moveend",l))}flyTo(l,_){if(!l.essential&&h.exported.prefersReducedMotion){const g=h.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,_)}this.stop(),l=h.extend({offset:[0,0],speed:1.2,curve:1.42,easing:h.ease},l);const A=this.transform,k=this.getZoom(),B=this.getBearing(),j=this.getPitch(),Z=this.getPadding(),J="zoom"in l?h.clamp(+l.zoom,A.minZoom,A.maxZoom):k,ie="bearing"in l?this._normalizeBearing(l.bearing,B):B,ae="pitch"in l?+l.pitch:j,ge="padding"in l?l.padding:A.padding,Ae=A.zoomScale(J-k),Ke=h.pointGeometry.convert(l.offset);let ke=A.centerPoint.add(Ke);const Xe=A.pointLocation(ke),ct=h.LngLat.convert(l.center||Xe);this._normalizeCenter(ct);const lt=A.project(Xe),bt=A.project(ct).sub(lt);let pt=l.curve;const jt=Math.max(A.width,A.height),Rt=jt/Ae,Ft=bt.mag();if("minZoom"in l){const g=h.clamp(Math.min(l.minZoom,k,J),A.minZoom,A.maxZoom),w=jt/A.zoomScale(g-k);pt=Math.sqrt(w/Ft*2)}const ti=pt*pt;function ui(g){const w=(Rt*Rt-jt*jt+(g?-1:1)*ti*ti*Ft*Ft)/(2*(g?Rt:jt)*ti*Ft);return Math.log(Math.sqrt(w*w+1)-w)}function qt(g){return(Math.exp(g)-Math.exp(-g))/2}function qi(g){return(Math.exp(g)+Math.exp(-g))/2}const Ci=ui(0);let vn=function(g){return qi(Ci)/qi(Ci+pt*g)},p=function(g){return jt*((qi(Ci)*(qt(w=Ci+pt*g)/qi(w))-qt(Ci))/ti)/Ft;var w},y=(ui(1)-Ci)/pt;if(Math.abs(Ft)<1e-6||!isFinite(y)){if(Math.abs(jt-Rt)<1e-6)return this.easeTo(l,_);const g=Rt<jt?-1:1;y=Math.abs(Math.log(Rt/jt))/pt,p=function(){return 0},vn=function(w){return Math.exp(g*pt*w)}}return l.duration="duration"in l?+l.duration:1e3*y/("screenSpeed"in l?+l.screenSpeed/pt:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=B!==ie,this._pitching=ae!==j,this._padding=!A.isPaddingEqual(ge),this._prepareEase(_,!1),this._ease(g=>{const w=g*y,L=1/vn(w);A.zoom=g===1?J:k+A.scaleZoom(L),this._rotating&&(A.bearing=h.number(B,ie,g)),this._pitching&&(A.pitch=h.number(j,ae,g)),this._padding&&(A.interpolatePadding(Z,ge,g),ke=A.centerPoint.add(Ke));const F=g===1?ct:A.unproject(lt.add(bt.mult(p(w))).mult(L));A.setLocationAtPoint(A.renderWorldCopies?F.wrap():F,ke),this._fireMoveEvents(_)},()=>this._afterEase(_),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,_){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const A=this._onEaseEnd;delete this._onEaseEnd,A.call(this,_)}if(!l){const A=this.handlers;A&&A.stop(!1)}return this}_ease(l,_,A){A.animate===!1||A.duration===0?(l(1),_()):(this._easeStart=h.exported.now(),this._easeOptions=A,this._onEaseFrame=l,this._onEaseEnd=_,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((h.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,_){l=h.wrap(l,-180,180);const A=Math.abs(l-_);return Math.abs(l-360-_)<A&&(l-=360),Math.abs(l+360-_)<A&&(l+=360),l}_normalizeCenter(l){const _=this.transform;if(!_.renderWorldCopies||_.lngRange)return;const A=l.lng-_.center.lng;l.lng+=A>180?-360:A<-180?360:0}}class Xo{constructor(l={}){this.options=l,h.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options&&this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,_){const A=this._map._getUIString(`AttributionControl.${_}`);l.title=A,l.setAttribute("aria-label",A)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(k=>typeof k!="string"?"":k)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const k=this._map.style.stylesheet;this.styleOwner=k.owner,this.styleId=k.id}const _=this._map.style.sourceCaches;for(const k in _){const B=_[k];if(B.used){const j=B.getSource();j.attribution&&l.indexOf(j.attribution)<0&&l.push(j.attribution)}}l=l.filter(k=>String(k).trim()),l.sort((k,B)=>k.length-B.length),l=l.filter((k,B)=>{for(let j=B+1;j<l.length;j++)if(l[j].indexOf(k)>=0)return!1;return!0});const A=l.join(" | ");A!==this._attribHTML&&(this._attribHTML=A,l.length?(this._innerContainer.innerHTML=A,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Ya{constructor(l={}){this.options=l,h.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl mapboxgl-ctrl");const _=O.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return _.target="_blank",_.rel="noopener nofollow",_.href="https://maplibre.org/",_.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),_.setAttribute("rel","noopener nofollow"),this._container.appendChild(_),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const l=this._container.children;if(l.length){const _=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact","mapboxgl-compact"):_.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class kc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const _=++this._id;return this._queue.push({callback:l,id:_,cancelled:!1}),_}remove(l){const _=this._currentlyRunning,A=_?this._queue.concat(_):this._queue;for(const k of A)if(k.id===l)return void(k.cancelled=!0)}run(l=0){const _=this._currentlyRunning=this._queue;this._queue=[];for(const A of _)if(!A.cancelled&&(A.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Nl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Mc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},qa={showCompass:!0,showZoom:!0,visualizePitch:!1};class ya{constructor(l,_,A=!1){this._clickTolerance=10,this.element=_,this.mouseRotate=new Si({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,A&&(this.mousePitch=new gl({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),h.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),O.addEventListener(_,"mousedown",this.mousedown),O.addEventListener(_,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(_,"touchmove",this.touchmove),O.addEventListener(_,"touchend",this.touchend),O.addEventListener(_,"touchcancel",this.reset)}down(l,_){this.mouseRotate.mousedown(l,_),this.mousePitch&&this.mousePitch.mousedown(l,_),O.disableDrag()}move(l,_){const A=this.map,k=this.mouseRotate.mousemoveWindow(l,_);if(k&&k.bearingDelta&&A.setBearing(A.getBearing()+k.bearingDelta),this.mousePitch){const B=this.mousePitch.mousemoveWindow(l,_);B&&B.pitchDelta&&A.setPitch(A.getPitch()+B.pitchDelta)}}off(){const l=this.element;O.removeEventListener(l,"mousedown",this.mousedown),O.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(l,"touchmove",this.touchmove),O.removeEventListener(l,"touchend",this.touchend),O.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup)}mousedown(l){this.down(h.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),O.mousePos(this.element,l)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)}mousemove(l){this.move(l,O.mousePos(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Di(C,l,_){if(C=new h.LngLat(C.lng,C.lat),l){const A=new h.LngLat(C.lng-360,C.lat),k=new h.LngLat(C.lng+360,C.lat),B=_.locationPoint(C).distSqr(l);_.locationPoint(A).distSqr(l)<B?C=A:_.locationPoint(k).distSqr(l)<B&&(C=k)}for(;Math.abs(C.lng-_.center.lng)>180;){const A=_.locationPoint(C);if(A.x>=0&&A.y>=0&&A.x<=_.width&&A.y<=_.height)break;C.lng>_.center.lng?C.lng-=360:C.lng+=360}return C}const ci={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _a(C,l,_){const A=C.classList;for(const k in ci)A.remove(`maplibregl-${_}-anchor-${k}`,`mapboxgl-${_}-anchor-${k}`);A.add(`maplibregl-${_}-anchor-${l}`,`mapboxgl-${_}-anchor-${l}`)}class ia extends h.Evented{constructor(l,_){if(super(),(l instanceof HTMLElement||_)&&(l=h.extend({element:l},_)),h.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,l&&l.element)this._element=l.element,this._offset=h.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div"),this._element.setAttribute("aria-label","Map marker");const A=O.createNS("http://www.w3.org/2000/svg","svg"),k=41,B=27;A.setAttributeNS(null,"display","block"),A.setAttributeNS(null,"height",`${k}px`),A.setAttributeNS(null,"width",`${B}px`),A.setAttributeNS(null,"viewBox",`0 0 ${B} ${k}`);const j=O.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"stroke","none"),j.setAttributeNS(null,"stroke-width","1"),j.setAttributeNS(null,"fill","none"),j.setAttributeNS(null,"fill-rule","evenodd");const Z=O.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"fill-rule","nonzero");const J=O.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(3.0, 29.0)"),J.setAttributeNS(null,"fill","#000000");const ie=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const bt of ie){const pt=O.createNS("http://www.w3.org/2000/svg","ellipse");pt.setAttributeNS(null,"opacity","0.04"),pt.setAttributeNS(null,"cx","10.5"),pt.setAttributeNS(null,"cy","5.80029008"),pt.setAttributeNS(null,"rx",bt.rx),pt.setAttributeNS(null,"ry",bt.ry),J.appendChild(pt)}const ae=O.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill",this._color);const ge=O.createNS("http://www.w3.org/2000/svg","path");ge.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ae.appendChild(ge);const Ae=O.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"opacity","0.25"),Ae.setAttributeNS(null,"fill","#000000");const Ke=O.createNS("http://www.w3.org/2000/svg","path");Ke.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ae.appendChild(Ke);const ke=O.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ke.setAttributeNS(null,"fill","#FFFFFF");const Xe=O.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ct=O.createNS("http://www.w3.org/2000/svg","circle");ct.setAttributeNS(null,"fill","#000000"),ct.setAttributeNS(null,"opacity","0.25"),ct.setAttributeNS(null,"cx","5.5"),ct.setAttributeNS(null,"cy","5.5"),ct.setAttributeNS(null,"r","5.4999962");const lt=O.createNS("http://www.w3.org/2000/svg","circle");lt.setAttributeNS(null,"fill","#FFFFFF"),lt.setAttributeNS(null,"cx","5.5"),lt.setAttributeNS(null,"cy","5.5"),lt.setAttributeNS(null,"r","5.4999962"),Xe.appendChild(ct),Xe.appendChild(lt),Z.appendChild(J),Z.appendChild(ae),Z.appendChild(Ae),Z.appendChild(ke),Z.appendChild(Xe),A.appendChild(Z),A.setAttributeNS(null,"height",k*this._scale+"px"),A.setAttributeNS(null,"width",B*this._scale+"px"),this._element.appendChild(A),this._offset=h.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",A=>{A.preventDefault()}),this._element.addEventListener("mousedown",A=>{A.preventDefault()}),_a(this._element,this._anchor,"marker"),this._popup=null}addTo(l){return this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=h.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const k=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[k,-1*(38.1-13.5+k)],"bottom-right":[-k,-1*(38.1-13.5+k)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(l){const _=l.code,A=l.charCode||l.keyCode;_!=="Space"&&_!=="Enter"&&A!==32&&A!==13||this.togglePopup()}_onMapClick(l){const _=l.originalEvent.target,A=this._element;this._popup&&(_===A||A.contains(_))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?l.remove():l.addTo(this._map),this):this}_update(l){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Di(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${ci[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${_}`)}getOffset(){return this._offset}setOffset(l){return this._offset=h.pointGeometry.convert(l),this._update(),this}_onMove(l){if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new h.Event("dragstart"))),this.fire(new h.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new h.Event("dragend")),this._state="inactive"}_addDragHandler(l){this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const To={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Qr,va=0,to=!1;const na={maxWidth:100,unit:"metric"};function zs(C,l,_){const A=_&&_.maxWidth||100,k=C._container.clientHeight/2,B=C.unproject([0,k]),j=C.unproject([A,k]),Z=B.distanceTo(j);if(_&&_.unit==="imperial"){const J=3.2808*Z;J>5280?gi(l,A,J/5280,C._getUIString("ScaleControl.Miles")):gi(l,A,J,C._getUIString("ScaleControl.Feet"))}else _&&_.unit==="nautical"?gi(l,A,Z/1852,C._getUIString("ScaleControl.NauticalMiles")):Z>=1e3?gi(l,A,Z/1e3,C._getUIString("ScaleControl.Kilometers")):gi(l,A,Z,C._getUIString("ScaleControl.Meters"))}function gi(C,l,_,A){const k=function(B){const j=Math.pow(10,`${Math.floor(B)}`.length-1);let Z=B/j;return Z=Z>=10?10:Z>=5?5:Z>=3?3:Z>=2?2:Z>=1?1:function(J){const ie=Math.pow(10,Math.ceil(-Math.log(J)/Math.LN10));return Math.round(J*ie)/ie}(Z),j*Z}(_);C.style.width=l*(k/_)+"px",C.innerHTML=`${k}&nbsp;${A}`}const fi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xo(C){if(C){if(typeof C=="number"){const l=Math.round(Math.sqrt(.5*Math.pow(C,2)));return{center:new h.pointGeometry(0,0),top:new h.pointGeometry(0,C),"top-left":new h.pointGeometry(l,l),"top-right":new h.pointGeometry(-l,l),bottom:new h.pointGeometry(0,-C),"bottom-left":new h.pointGeometry(l,-l),"bottom-right":new h.pointGeometry(-l,-l),left:new h.pointGeometry(C,0),right:new h.pointGeometry(-C,0)}}if(C instanceof h.pointGeometry||Array.isArray(C)){const l=h.pointGeometry.convert(C);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:h.pointGeometry.convert(C.center||[0,0]),top:h.pointGeometry.convert(C.top||[0,0]),"top-left":h.pointGeometry.convert(C["top-left"]||[0,0]),"top-right":h.pointGeometry.convert(C["top-right"]||[0,0]),bottom:h.pointGeometry.convert(C.bottom||[0,0]),"bottom-left":h.pointGeometry.convert(C["bottom-left"]||[0,0]),"bottom-right":h.pointGeometry.convert(C["bottom-right"]||[0,0]),left:h.pointGeometry.convert(C.left||[0,0]),right:h.pointGeometry.convert(C.right||[0,0])}}return xo(new h.pointGeometry(0,0))}const ca={supported:S,setRTLTextPlugin:h.setRTLTextPlugin,getRTLTextPluginStatus:h.getRTLTextPluginStatus,Map:class extends _l{constructor(C){var l;if(h.PerformanceUtils.mark(h.PerformanceMarkers.create),(C=h.extend({},Mc,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ka(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies),{bearingSnap:C.bearingSnap}),this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new kc,this._controls=[],this._mapId=h.uniqueId(),this._locale=h.extend({},Nl,C.locale),this._clickTolerance=C.clickTolerance,this._pixelRatio=(l=C.pixelRatio)!==null&&l!==void 0?l:devicePixelRatio,this._requestManager=new Y(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),h.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Yr(this,C),this._hash=C.hash&&new Pl(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,h.extend({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Xo({customAttribution:C.customAttribution})),C.maplibreLogo&&this.addControl(new Ya,C.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",_=>{this._update(_.dataType==="style"),this.fire(new h.Event(`${_.dataType}data`,_))}),this.on("dataloading",_=>{this.fire(new h.Event(`${_.dataType}dataloading`,_))}),this.on("dataabort",_=>{this.fire(new h.Event("sourcedataabort",_))})}_getMapId(){return this._mapId}addControl(C,l){if(l===void 0&&(l=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const _=C.onAdd(this);this._controls.push(C);const A=this._controlPositions[l];return l.indexOf("bottom")!==-1?A.insertBefore(_,A.firstChild):A.appendChild(_),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(C);return l>-1&&this._controls.splice(l,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}resize(C){const l=this._containerDimensions(),_=l[0],A=l[1];this._resizeCanvas(_,A,this.getPixelRatio()),this.transform.resize(_,A),this.painter.resize(_,A,this.getPixelRatio());const k=!this._moving;return k&&(this.stop(),this.fire(new h.Event("movestart",C)).fire(new h.Event("move",C))),this.fire(new h.Event("resize",C)),k&&this.fire(new h.Event("moveend",C)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(C){const[l,_]=this._containerDimensions();this._pixelRatio=C,this._resizeCanvas(l,_,C),this.painter.resize(l,_,C)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(C){return this.transform.setMaxBounds(h.LngLatBounds.convert(C)),this._update()}setMinZoom(C){if((C=C==null?-2:C)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C==null?22:C)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C==null?0:C)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C==null?60:C)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this._update()}project(C){return this.transform.locationPoint(h.LngLat.convert(C))}unproject(C){return this.transform.pointLocation(h.pointGeometry.convert(C))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(C,l,_){if(C==="mouseenter"||C==="mouseover"){let A=!1;return{layer:l,listener:_,delegates:{mousemove:B=>{const j=this.getLayer(l)?this.queryRenderedFeatures(B.point,{layers:[l]}):[];j.length?A||(A=!0,_.call(this,new ea(C,this,B.originalEvent,{features:j}))):A=!1},mouseout:()=>{A=!1}}}}if(C==="mouseleave"||C==="mouseout"){let A=!1;return{layer:l,listener:_,delegates:{mousemove:j=>{(this.getLayer(l)?this.queryRenderedFeatures(j.point,{layers:[l]}):[]).length?A=!0:A&&(A=!1,_.call(this,new ea(C,this,j.originalEvent)))},mouseout:j=>{A&&(A=!1,_.call(this,new ea(C,this,j.originalEvent)))}}}}{const A=k=>{const B=this.getLayer(l)?this.queryRenderedFeatures(k.point,{layers:[l]}):[];B.length&&(k.features=B,_.call(this,k),delete k.features)};return{layer:l,listener:_,delegates:{[C]:A}}}}on(C,l,_){if(_===void 0)return super.on(C,l);const A=this._createDelegatedListener(C,l,_);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(A);for(const k in A.delegates)this.on(k,A.delegates[k]);return this}once(C,l,_){if(_===void 0)return super.once(C,l);const A=this._createDelegatedListener(C,l,_);for(const k in A.delegates)this.once(k,A.delegates[k]);return this}off(C,l,_){return _===void 0?super.off(C,l):(this._delegatedListeners&&this._delegatedListeners[C]&&(A=>{const k=this._delegatedListeners[C];for(let B=0;B<k.length;B++){const j=k[B];if(j.layer===l&&j.listener===_){for(const Z in j.delegates)this.off(Z,j.delegates[Z]);return k.splice(B,1),this}}})(),this)}queryRenderedFeatures(C,l){if(!this.style)return[];let _;if(l!==void 0||C===void 0||C instanceof h.pointGeometry||Array.isArray(C)||(l=C,C=void 0),l=l||{},(C=C||[[0,0],[this.transform.width,this.transform.height]])instanceof h.pointGeometry||typeof C[0]=="number")_=[h.pointGeometry.convert(C)];else{const A=h.pointGeometry.convert(C[0]),k=h.pointGeometry.convert(C[1]);_=[A,new h.pointGeometry(k.x,A.y),k,new h.pointGeometry(A.x,k.y),A]}return this.style.queryRenderedFeatures(_,l,this.transform)}querySourceFeatures(C,l){return this.style.querySourceFeatures(C,l)}setStyle(C,l){return(l=h.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(C,l))}setTransformRequest(C){return this._requestManager.setTransformRequest(C),this}_getUIString(C){const l=this._locale[C];if(l==null)throw new Error(`Missing UI string '${C}'`);return l}_updateStyle(C,l){return this.style&&(this.style.setEventedParent(null),this.style._remove()),C?(this.style=new pr(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C):this.style.loadJSON(C),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new pr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,l){if(typeof C=="string"){const _=this._requestManager.transformRequest(C,h.ResourceType.Style);h.getJSON(_,(A,k)=>{A?this.fire(new h.ErrorEvent(A)):k&&this._updateDiff(k,l)})}else typeof C=="object"&&this._updateDiff(C,l)}_updateDiff(C,l){try{this.style.setState(C)&&this._update(!0)}catch(_){h.warnOnce(`Unable to perform style diff: ${_.message||_.error||_}.  Rebuilding the style from scratch.`),this._updateStyle(C,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():h.warnOnce("There is no style added to the map.")}addSource(C,l){return this._lazyInitEmptyStyle(),this.style.addSource(C,l),this._update(!0)}isSourceLoaded(C){const l=this.style&&this.style.sourceCaches[C];if(l!==void 0)return l.loaded();this.fire(new h.ErrorEvent(new Error(`There is no source with ID '${C}'`)))}areTilesLoaded(){const C=this.style&&this.style.sourceCaches;for(const l in C){const _=C[l]._tiles;for(const A in _){const k=_[A];if(k.state!=="loaded"&&k.state!=="errored")return!1}}return!0}addSourceType(C,l,_){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,l,_)}removeSource(C){return this.style.removeSource(C),this._update(!0)}getSource(C){return this.style.getSource(C)}addImage(C,l,{pixelRatio:_=1,sdf:A=!1,stretchX:k,stretchY:B,content:j}={}){if(this._lazyInitEmptyStyle(),l instanceof HTMLImageElement||h.isImageBitmap(l)){const{width:Z,height:J,data:ie}=h.exported.getImageData(l);this.style.addImage(C,{data:new h.RGBAImage({width:Z,height:J},ie),pixelRatio:_,stretchX:k,stretchY:B,content:j,sdf:A,version:0})}else{if(l.width===void 0||l.height===void 0)return this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Z,height:J,data:ie}=l,ae=l;this.style.addImage(C,{data:new h.RGBAImage({width:Z,height:J},new Uint8Array(ie)),pixelRatio:_,stretchX:k,stretchY:B,content:j,sdf:A,version:0,userImage:ae}),ae.onAdd&&ae.onAdd(this,C)}}}updateImage(C,l){const _=this.style.getImage(C);if(!_)return this.fire(new h.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const A=l instanceof HTMLImageElement||h.isImageBitmap(l)?h.exported.getImageData(l):l,{width:k,height:B,data:j}=A;if(k===void 0||B===void 0)return this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(k!==_.data.width||B!==_.data.height)return this.fire(new h.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const Z=!(l instanceof HTMLImageElement||h.isImageBitmap(l));_.data.replace(j,Z),this.style.updateImage(C,_)}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new h.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C,l){h.getImage(this._requestManager.transformRequest(C,h.ResourceType.Image),l)}listImages(){return this.style.listImages()}addLayer(C,l){return this._lazyInitEmptyStyle(),this.style.addLayer(C,l),this._update(!0)}moveLayer(C,l){return this.style.moveLayer(C,l),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}setLayerZoomRange(C,l,_){return this.style.setLayerZoomRange(C,l,_),this._update(!0)}setFilter(C,l,_={}){return this.style.setFilter(C,l,_),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,l,_,A={}){return this.style.setPaintProperty(C,l,_,A),this._update(!0)}getPaintProperty(C,l){return this.style.getPaintProperty(C,l)}setLayoutProperty(C,l,_,A={}){return this.style.setLayoutProperty(C,l,_,A),this._update(!0)}getLayoutProperty(C,l){return this.style.getLayoutProperty(C,l)}setLight(C,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,l),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(C,l){return this.style.setFeatureState(C,l),this._update()}removeFeatureState(C,l){return this.style.removeFeatureState(C,l),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let C=0,l=0;return this._container&&(C=this._container.clientWidth||400,l=this._container.clientHeight||300),[C,l]}_setupContainer(){const C=this._container;C.classList.add("maplibregl-map","mapboxgl-map");const l=this._canvasContainer=O.create("div","maplibregl-canvas-container mapboxgl-canvas-container",C);this._interactive&&l.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const _=this._containerDimensions();this._resizeCanvas(_[0],_[1],this.getPixelRatio());const A=this._controlContainer=O.create("div","maplibregl-control-container mapboxgl-control-container",C),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(B=>{k[B]=O.create("div",`maplibregl-ctrl-${B} mapboxgl-ctrl-${B}`,A)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(C,l,_){this._canvas.width=_*C,this._canvas.height=_*l,this._canvas.style.width=`${C}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const C=h.extend({},S.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl",C)||this._canvas.getContext("experimental-webgl",C);l?(this.painter=new za(l,this.transform),h.exported$1.testSupport(l)):this.fire(new h.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(C){C.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new h.Event("webglcontextlost",{originalEvent:C}))}_contextRestored(C){this._setupPainter(),this.resize(),this._update(),this.fire(new h.Event("webglcontextrestored",{originalEvent:C}))}_onMapScroll(C){if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_render(C){let l,_=0;const A=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(l=A.createQueryEXT(),A.beginQueryEXT(A.TIME_ELAPSED_EXT,l),_=h.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),this._removed)return;let k=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const j=this.transform.zoom,Z=h.exported.now();this.style.zoomHistory.update(j,Z);const J=new h.EvaluationParameters(j,{now:Z,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ie=J.crossFadingFactor();ie===1&&ie===this._crossFadingFactor||(k=!0,this._crossFadingFactor=ie),this.style.update(J)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new h.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,h.PerformanceUtils.mark(h.PerformanceMarkers.load),this.fire(new h.Event("load"))),this.style&&(this.style.hasTransitions()||k)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const j=h.exported.now()-_;A.endQueryEXT(A.TIME_ELAPSED_EXT,l),setTimeout(()=>{const Z=A.getQueryObjectEXT(l,A.QUERY_RESULT_EXT)/1e6;A.deleteQueryEXT(l),this.fire(new h.Event("gpu-timing-frame",{cpuTime:j,gpuTime:Z}))},50)}if(this.listens("gpu-timing-layer")){const j=this.painter.collectGpuTimers();setTimeout(()=>{const Z=this.painter.queryGpuTimers(j);this.fire(new h.Event("gpu-timing-layer",{layerTimes:Z}))},50)}const B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new h.Event("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,h.PerformanceUtils.mark(h.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const C=this.painter.context.gl.getExtension("WEBGL_lose_context");C&&C.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),h.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new h.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=h.exported.frame(C=>{h.PerformanceUtils.frame(C),this._frame=null,this._render(C)}))}_onWindowOnline(){this._update()}_onWindowResize(C){this._trackResize&&this.resize({originalEvent:C})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}_setCacheLimits(C,l){h.setCacheLimits(C,l)}},NavigationControl:class{constructor(C){this.options=h.extend({},qa,C),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(h.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(h.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const C=this._map.getZoom(),l=C===this._map.getMaxZoom(),_=C===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const C=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=C}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ya(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(C,l){const _=O.create("button",C,this._container);return _.type="button",_.addEventListener("click",l),_}_setButtonTitle(C,l){const _=this._map._getUIString(`NavigationControl.${l}`);C.title=_,C.setAttribute("aria-label",_)}},GeolocateControl:class extends h.Evented{constructor(C){super(),this.options=h.extend({},To,C),h.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(C){var l;return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),l=this._setupUI,Qr!==void 0?l(Qr):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(_=>{Qr=_.state!=="denied",l(Qr)}):(Qr=!!window.navigator.geolocation,l(Qr)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,va=0,to=!1}_isOutOfMapMaxBounds(C){const l=this._map.getMaxBounds(),_=C.coords;return l&&(_.longitude<l.getWest()||_.longitude>l.getEast()||_.latitude<l.getSouth()||_.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(C){if(this._map){if(this._isOutOfMapMaxBounds(C))return this._setErrorState(),this.fire(new h.Event("outofmaxbounds",C)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=C,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(C),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(C),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new h.Event("geolocate",C)),this._finish()}}_updateCamera(C){const l=new h.LngLat(C.coords.longitude,C.coords.latitude),_=C.coords.accuracy,A=this._map.getBearing(),k=h.extend({bearing:A},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(_),k,{geolocateSource:!0})}_updateMarker(C){if(C){const l=new h.LngLat(C.coords.longitude,C.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=C.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const C=this._map._container.clientHeight/2,l=this._map.unproject([0,C]),_=this._map.unproject([1,C]),A=l.distanceTo(_),k=Math.ceil(2*this._accuracy/A);this._circleElement.style.width=`${k}px`,this._circleElement.style.height=`${k}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(C){if(this._map){if(this.options.trackUserLocation)if(C.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(C.code===3&&to)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new h.Event("error",C)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(C){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",C===!1){h.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new ia(this._dotElement),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ia({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new h.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return h.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":va--,to=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new h.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),va++,va>1?(C={maximumAge:6e5,timeout:0},to=!0):(C=this.options.positionOptions,to=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Xo,LogoControl:Ya,ScaleControl:class{constructor(C){this.options=h.extend({},na,C),h.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){zs(this._map,this._container,this.options)}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(C){this.options.unit=C,zs(this._map,this._container,this.options)}},FullscreenControl:class{constructor(C){this._fullscreen=!1,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:h.warnOnce("Full screen control 'container' must be a DOM element.")),h.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",h.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const C=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends h.Evented{constructor(C){super(),this.options=h.extend(Object.create(fi),C),h.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new h.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new h.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(C){return this._lngLat=h.LngLat.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){const l=document.createDocumentFragment(),_=document.createElement("body");let A;for(_.innerHTML=C;A=_.firstChild,A;)l.appendChild(A);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(C){this._container&&this._container.classList.add(C)}removeClassName(C){this._container&&this._container.classList.remove(C)}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){if(this._container)return this._container.classList.toggle(C)}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(C){this._update(C.point)}_onMouseMove(C){this._update(C.point)}_onDrag(C){this._update(C.point)}_update(C){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=O.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(B=>this._container.classList.add(B)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Di(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!C))return;const l=this._pos=this._trackPointer&&C?C:this._map.project(this._lngLat);let _=this.options.anchor;const A=xo(this.options.offset);if(!_){const B=this._container.offsetWidth,j=this._container.offsetHeight;let Z;Z=l.y+A.bottom.y<j?["top"]:l.y>this._map.transform.height-j?["bottom"]:[],l.x<B/2?Z.push("left"):l.x>this._map.transform.width-B/2&&Z.push("right"),_=Z.length===0?"bottom":Z.join("-")}const k=l.add(A[_]).round();O.setTransform(this._container,`${ci[_]} translate(${k.x}px,${k.y}px)`),_a(this._container,_,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(xu);C&&C.focus()}_onClose(){this.remove()}},Marker:ia,Style:pr,LngLat:h.LngLat,LngLatBounds:h.LngLatBounds,Point:h.pointGeometry,MercatorCoordinate:h.MercatorCoordinate,Evented:h.Evented,AJAXError:h.AJAXError,config:h.config,CanvasSource:Jt,GeoJSONSource:ni,ImageSource:Xi,RasterDEMTileSource:Pt,RasterTileSource:Je,VectorTileSource:Gt,VideoSource:ei,prewarm:function(){At().acquire(Cn)},clearPrewarmedResources:function(){const C=Kr;C&&(C.isPreloaded()&&C.numActive()===1?(C.release(Cn),Kr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return Zn.workerCount},set workerCount(C){Zn.workerCount=C},get maxParallelImageRequests(){return h.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(C){h.config.MAX_PARALLEL_IMAGE_REQUESTS=C},clearStorage(C){h.clearTileCache(C)},workerUrl:"",addProtocol(C,l){h.config.REGISTERED_PROTOCOLS[C]=l},removeProtocol(C){delete h.config.REGISTERED_PROTOCOLS[C]}};return Vr.extend(ca,{isSafari:h.isSafari,getPerformanceMetrics:h.PerformanceUtils.getPerformanceMetrics}),ca});var c=f;return c})})(wd);var FC=wd.exports,xp=NC,UC=Object.prototype.hasOwnProperty;function NC(){for(var o={},e=0;e<arguments.length;e++){var n=arguments[e];for(var s in n)UC.call(n,s)&&(o[s]=n[s])}return o}var M1={exports:{}};(function(o,e){(function(){var n={};o.exports=n,n.simpleFilter=function(s,f){return f.filter(function(v){return n.test(s,v)})},n.test=function(s,f){return n.match(s,f)!==null},n.match=function(s,f,v){v=v||{};var c=0,h=[],S=f.length,P=0,D=0,R=v.pre||"",O=v.post||"",Y=v.caseSensitive&&f||f.toLowerCase(),ee;s=v.caseSensitive&&s||s.toLowerCase();for(var he=0;he<S;he++)ee=f[he],Y[he]===s[c]?(ee=R+ee+O,c+=1,D+=1+D):D=0,P+=D,h[h.length]=ee;return c===s.length?(P=Y===s?1/0:P,{rendered:h.join(""),score:P}):null},n.filter=function(s,f,v){return!f||f.length===0?[]:typeof s!="string"?f:(v=v||{},f.reduce(function(c,h,S,P){var D=h;v.extract&&(D=v.extract(h));var R=n.match(s,D,v);return R!=null&&(c[c.length]={string:R.rendered,score:R.score,index:S,original:h}),c},[]).sort(function(c,h){var S=h.score-c.score;return S||c.index-h.index}))}})()})(M1);var ol=function(o){return this.component=o,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,o.el.parentNode.insertBefore(this.wrapper,o.el.nextSibling),this};ol.prototype.show=function(){this.element.style.display="block"};ol.prototype.hide=function(){this.element.style.display="none"};ol.prototype.add=function(o){this.items.push(o)};ol.prototype.clear=function(){this.items=[],this.active=0};ol.prototype.isEmpty=function(){return!this.items.length};ol.prototype.isVisible=function(){return this.element.style.display==="block"};ol.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var o=0;o<this.items.length;o++)this.drawItem(this.items[o],this.active===o);this.show()};ol.prototype.drawItem=function(o,e){var n=document.createElement("li"),s=document.createElement("a");e&&(n.className+=" active"),s.innerHTML=o.string,n.appendChild(s),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,o)}.bind(this))};ol.prototype.handleMouseUp=function(o){this.selectingListItem=!1,this.component.value(o.original),this.clear(),this.draw()};ol.prototype.move=function(o){this.active=o,this.draw()};ol.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};ol.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};ol.prototype.drawError=function(o){var e=document.createElement("li");e.innerHTML=o,this.element.appendChild(e),this.show()};var VC=ol,jC=xp,qC=M1.exports,GC=VC,vs=function(o,e,n){return n=n||{},this.options=jC({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=o,this.data=e||[],this.list=new GC(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(s){this.handleKeyUp(s.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(s){this.handleKeyDown(s)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(s){this.handlePaste(s)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};vs.prototype.handleKeyUp=function(o){o===40||o===38||o===27||o===13||o===9||this.handleInputChange(this.el.value)};vs.prototype.handleKeyDown=function(o){switch(o.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&o.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};vs.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};vs.prototype.handlePaste=function(o){if(o.clipboardData)this.handleInputChange(o.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(o.target.value)},100)}};vs.prototype.handleInputChange=function(o){if(this.query=this.normalize(o),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(e){for(var n=0;n<e.length&&(this.list.add(e[n]),n!==this.options.limit-1);n++);this.list.draw()}.bind(this))};vs.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};vs.prototype.update=function(o){this.data=o,this.handleKeyUp()};vs.prototype.clear=function(){this.data=[],this.list.clear()};vs.prototype.normalize=function(o){return o=o.toLowerCase(),o};vs.prototype.match=function(o,e){return o.indexOf(e)>-1};vs.prototype.value=function(o){if(this.selected=o,this.el.value=this.getItemValue(o),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};vs.prototype.getCandidates=function(o){var e={pre:"<strong>",post:"</strong>",extract:function(s){return this.getItemValue(s)}.bind(this)},n;this.options.filter?(n=qC.filter(this.query,this.data,e),n=n.map(function(s){return{original:s.original,string:this.render(s.original,s.string)}}.bind(this))):n=this.data.map(function(s){var f=this.render(s);return{original:s,string:f}}.bind(this)),o(n)};vs.prototype.getItemValue=function(o){return o};vs.prototype.render=function(o,e){if(e)return e;for(var n=o.original?this.getItemValue(o.original):this.getItemValue(o),s=this.normalize(n),f=s.lastIndexOf(this.query);f>-1;){var v=f+this.query.length;n=n.slice(0,f)+"<strong>"+n.slice(f,v)+"</strong>"+n.slice(v),f=s.slice(0,f).lastIndexOf(this.query)}return n};vs.prototype.renderError=function(o){this.list.drawError(o)};var HC=vs,L1=HC,ZC=L1;typeof window!="undefined"&&(window.Suggestions=L1);var WC="Expected a function",E0=0/0,XC="[object Symbol]",KC=/^\s+|\s+$/g,JC=/^[-+]0x[0-9a-f]+$/i,YC=/^0b[01]+$/i,QC=/^0o[0-7]+$/i,$C=parseInt,ek=typeof Xl=="object"&&Xl&&Xl.Object===Object&&Xl,tk=typeof self=="object"&&self&&self.Object===Object&&self,ik=ek||tk||Function("return this")(),nk=Object.prototype,rk=nk.toString,ok=Math.max,ak=Math.min,ny=function(){return ik.Date.now()};function sk(o,e,n){var s,f,v,c,h,S,P=0,D=!1,R=!1,O=!0;if(typeof o!="function")throw new TypeError(WC);e=I0(e)||0,Iy(n)&&(D=!!n.leading,R="maxWait"in n,v=R?ok(I0(n.maxWait)||0,e):v,O="trailing"in n?!!n.trailing:O);function Y(He){var fe=s,ut=f;return s=f=void 0,P=He,c=o.apply(ut,fe),c}function ee(He){return P=He,h=setTimeout(ve,e),D?Y(He):c}function he(He){var fe=He-S,ut=He-P,at=e-fe;return R?ak(at,v-ut):at}function re(He){var fe=He-S,ut=He-P;return S===void 0||fe>=e||fe<0||R&&ut>=v}function ve(){var He=ny();if(re(He))return se(He);h=setTimeout(ve,he(He))}function se(He){return h=void 0,O&&s?Y(He):(s=f=void 0,c)}function we(){h!==void 0&&clearTimeout(h),P=0,s=S=f=h=void 0}function Ge(){return h===void 0?c:se(ny())}function Ue(){var He=ny(),fe=re(He);if(s=arguments,f=this,S=He,fe){if(h===void 0)return ee(S);if(R)return h=setTimeout(ve,e),Y(S)}return h===void 0&&(h=setTimeout(ve,e)),c}return Ue.cancel=we,Ue.flush=Ge,Ue}function Iy(o){var e=typeof o;return!!o&&(e=="object"||e=="function")}function lk(o){return!!o&&typeof o=="object"}function uk(o){return typeof o=="symbol"||lk(o)&&rk.call(o)==XC}function I0(o){if(typeof o=="number")return o;if(uk(o))return E0;if(Iy(o)){var e=typeof o.valueOf=="function"?o.valueOf():o;o=Iy(e)?e+"":e}if(typeof o!="string")return o===0?o:+o;o=o.replace(KC,"");var n=YC.test(o);return n||QC.test(o)?$C(o.slice(2),n?2:8):JC.test(o)?E0:+o}var ck=sk,i_={exports:{}},pp=typeof Reflect=="object"?Reflect:null,S0=pp&&typeof pp.apply=="function"?pp.apply:function(e,n,s){return Function.prototype.apply.call(e,n,s)},_m;pp&&typeof pp.ownKeys=="function"?_m=pp.ownKeys:Object.getOwnPropertySymbols?_m=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:_m=function(e){return Object.getOwnPropertyNames(e)};function hk(o){console&&console.warn&&console.warn(o)}var P1=Number.isNaN||function(e){return e!==e};function go(){go.init.call(this)}i_.exports=go;i_.exports.once=mk;go.EventEmitter=go;go.prototype._events=void 0;go.prototype._eventsCount=0;go.prototype._maxListeners=void 0;var T0=10;function Hm(o){if(typeof o!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}Object.defineProperty(go,"defaultMaxListeners",{enumerable:!0,get:function(){return T0},set:function(o){if(typeof o!="number"||o<0||P1(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");T0=o}});go.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};go.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||P1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function z1(o){return o._maxListeners===void 0?go.defaultMaxListeners:o._maxListeners}go.prototype.getMaxListeners=function(){return z1(this)};go.prototype.emit=function(e){for(var n=[],s=1;s<arguments.length;s++)n.push(arguments[s]);var f=e==="error",v=this._events;if(v!==void 0)f=f&&v.error===void 0;else if(!f)return!1;if(f){var c;if(n.length>0&&(c=n[0]),c instanceof Error)throw c;var h=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw h.context=c,h}var S=v[e];if(S===void 0)return!1;if(typeof S=="function")S0(S,this,n);else for(var P=S.length,D=F1(S,P),s=0;s<P;++s)S0(D[s],this,n);return!0};function D1(o,e,n,s){var f,v,c;if(Hm(n),v=o._events,v===void 0?(v=o._events=Object.create(null),o._eventsCount=0):(v.newListener!==void 0&&(o.emit("newListener",e,n.listener?n.listener:n),v=o._events),c=v[e]),c===void 0)c=v[e]=n,++o._eventsCount;else if(typeof c=="function"?c=v[e]=s?[n,c]:[c,n]:s?c.unshift(n):c.push(n),f=z1(o),f>0&&c.length>f&&!c.warned){c.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=o,h.type=e,h.count=c.length,hk(h)}return o}go.prototype.addListener=function(e,n){return D1(this,e,n,!1)};go.prototype.on=go.prototype.addListener;go.prototype.prependListener=function(e,n){return D1(this,e,n,!0)};function dk(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function R1(o,e,n){var s={fired:!1,wrapFn:void 0,target:o,type:e,listener:n},f=dk.bind(s);return f.listener=n,s.wrapFn=f,f}go.prototype.once=function(e,n){return Hm(n),this.on(e,R1(this,e,n)),this};go.prototype.prependOnceListener=function(e,n){return Hm(n),this.prependListener(e,R1(this,e,n)),this};go.prototype.removeListener=function(e,n){var s,f,v,c,h;if(Hm(n),f=this._events,f===void 0)return this;if(s=f[e],s===void 0)return this;if(s===n||s.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete f[e],f.removeListener&&this.emit("removeListener",e,s.listener||n));else if(typeof s!="function"){for(v=-1,c=s.length-1;c>=0;c--)if(s[c]===n||s[c].listener===n){h=s[c].listener,v=c;break}if(v<0)return this;v===0?s.shift():pk(s,v),s.length===1&&(f[e]=s[0]),f.removeListener!==void 0&&this.emit("removeListener",e,h||n)}return this};go.prototype.off=go.prototype.removeListener;go.prototype.removeAllListeners=function(e){var n,s,f;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var v=Object.keys(s),c;for(f=0;f<v.length;++f)c=v[f],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=s[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(f=n.length-1;f>=0;f--)this.removeListener(e,n[f]);return this};function O1(o,e,n){var s=o._events;if(s===void 0)return[];var f=s[e];return f===void 0?[]:typeof f=="function"?n?[f.listener||f]:[f]:n?fk(f):F1(f,f.length)}go.prototype.listeners=function(e){return O1(this,e,!0)};go.prototype.rawListeners=function(e){return O1(this,e,!1)};go.listenerCount=function(o,e){return typeof o.listenerCount=="function"?o.listenerCount(e):B1.call(o,e)};go.prototype.listenerCount=B1;function B1(o){var e=this._events;if(e!==void 0){var n=e[o];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}go.prototype.eventNames=function(){return this._eventsCount>0?_m(this._events):[]};function F1(o,e){for(var n=new Array(e),s=0;s<e;++s)n[s]=o[s];return n}function pk(o,e){for(;e+1<o.length;e++)o[e]=o[e+1];o.pop()}function fk(o){for(var e=new Array(o.length),n=0;n<e.length;++n)e[n]=o[n].listener||o[n];return e}function mk(o,e){return new Promise(function(n,s){function f(c){o.removeListener(e,v),s(c)}function v(){typeof o.removeListener=="function"&&o.removeListener("error",f),n([].slice.call(arguments))}U1(o,e,v,{once:!0}),e!=="error"&&gk(o,f,{once:!0})})}function gk(o,e,n){typeof o.on=="function"&&U1(o,"error",e,n)}function U1(o,e,n,s){if(typeof o.on=="function")s.once?o.once(e,n):o.on(e,n);else if(typeof o.addEventListener=="function")o.addEventListener(e,function f(v){s.once&&o.removeEventListener(e,f),n(v)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof o)}var yk={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function _k(o){var e=o.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}function vk(o){var e=o.match(/<?([^>]*)>(.*)/);if(!e)return null;var n=e[1],s=e[2].split(";"),f=null,v=s.reduce(function(c,h){var S=_k(h);return S?S.key==="rel"?(f||(f=S.value),c):(c[S.key]=S.value,c):c},{});return f?{url:n,rel:f,params:v}:null}function bk(o){return o?o.split(/,\s*</).reduce(function(e,n){var s=vk(n);if(!s)return e;var f=s.rel.split(/\s+/);return f.forEach(function(v){e[v]||(e[v]={url:s.url,params:s.params})}),e},{}):{}}var xk=bk,wk=xk;function n_(o,e){this.request=o,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch{this.body=e.body}this.links=wk(this.headers.link)}n_.prototype.hasNextPage=function(){return!!this.links.next};n_.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var Ek=n_,Zm={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},A0=Zm;function Ik(o){var e=o.type||A0.ERROR_HTTP,n;if(o.body)try{n=JSON.parse(o.body)}catch{n=o.body}else n=null;var s=o.message||null;s||(typeof n=="string"?s=n:n&&typeof n.message=="string"?s=n.message:e===A0.ERROR_REQUEST_ABORTED&&(s="Request aborted")),this.message=s,this.type=e,this.statusCode=o.statusCode||null,this.request=o.request,this.body=n}var Sk=Ik;function Tk(o){var e=o.indexOf(":"),n=o.substring(0,e).trim().toLowerCase(),s=o.substring(e+1).trim();return{name:n,value:s}}function Ak(o){var e={};return o&&o.trim().split(/[\r|\n]+/).forEach(function(n){var s=Tk(n);e[s.name]=s.value}),e}var Ck=Ak,kk=Ek,C0=Sk,ry=Zm,Mk=Ck,Am={};function Lk(o){var e=Am[o.id];!e||(e.abort(),delete Am[o.id])}function Pk(o,e){return new kk(o,{body:e.response,headers:Mk(e.getAllResponseHeaders()),statusCode:e.status})}function k0(o){var e=o.total,n=o.loaded,s=100*n/e;return{total:e,transferred:n,percent:s}}function N1(o,e){return new Promise(function(n,s){e.onprogress=function(c){o.emitter.emit(ry.EVENT_PROGRESS_DOWNLOAD,k0(c))};var f=o.file;f&&(e.upload.onprogress=function(c){o.emitter.emit(ry.EVENT_PROGRESS_UPLOAD,k0(c))}),e.onerror=function(c){s(c)},e.onabort=function(){var c=new C0({request:o,type:ry.ERROR_REQUEST_ABORTED});s(c)},e.onload=function(){if(delete Am[o.id],e.status<200||e.status>=400){var c=new C0({request:o,body:e.response,statusCode:e.status});s(c);return}n(e)};var v=o.body;typeof v=="string"?e.send(v):v?e.send(JSON.stringify(v)):f?e.send(f):e.send(),Am[o.id]=e}).then(function(n){return Pk(o,n)})}function V1(o,e){var n=o.url(e),s=new window.XMLHttpRequest;return s.open(o.method,n),Object.keys(o.headers).forEach(function(f){s.setRequestHeader(f,o.headers[f])}),s}function zk(o){return Promise.resolve().then(function(){var e=V1(o,o.client.accessToken);return N1(o,e)})}var Dk={browserAbort:Lk,sendRequestXhr:N1,browserSend:zk,createRequestXhr:V1},Sy={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */(function(o,e){(function(n){var s=e,f=o&&o.exports==s&&o,v=typeof Xl=="object"&&Xl;(v.global===v||v.window===v)&&(n=v);var c=function(ee){this.message=ee};c.prototype=new Error,c.prototype.name="InvalidCharacterError";var h=function(ee){throw new c(ee)},S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=/[\t\n\f\r ]/g,D=function(ee){ee=String(ee).replace(P,"");var he=ee.length;he%4==0&&(ee=ee.replace(/==?$/,""),he=ee.length),(he%4==1||/[^+a-zA-Z0-9/]/.test(ee))&&h("Invalid character: the string to be decoded is not correctly encoded.");for(var re=0,ve,se,we="",Ge=-1;++Ge<he;)se=S.indexOf(ee.charAt(Ge)),ve=re%4?ve*64+se:se,re++%4&&(we+=String.fromCharCode(255&ve>>(-2*re&6)));return we},R=function(ee){ee=String(ee),/[^\0-\xFF]/.test(ee)&&h("The string to be encoded contains characters outside of the Latin1 range.");for(var he=ee.length%3,re="",ve=-1,se,we,Ge,Ue,He=ee.length-he;++ve<He;)se=ee.charCodeAt(ve)<<16,we=ee.charCodeAt(++ve)<<8,Ge=ee.charCodeAt(++ve),Ue=se+we+Ge,re+=S.charAt(Ue>>18&63)+S.charAt(Ue>>12&63)+S.charAt(Ue>>6&63)+S.charAt(Ue&63);return he==2?(se=ee.charCodeAt(ve)<<8,we=ee.charCodeAt(++ve),Ue=se+we,re+=S.charAt(Ue>>10)+S.charAt(Ue>>4&63)+S.charAt(Ue<<2&63)+"="):he==1&&(Ue=ee.charCodeAt(ve),re+=S.charAt(Ue>>2)+S.charAt(Ue<<4&63)+"=="),re},O={encode:R,decode:D,version:"0.1.0"};if(s&&!s.nodeType)if(f)f.exports=O;else for(var Y in O)O.hasOwnProperty(Y)&&(s[Y]=O[Y]);else n.base64=O})(Xl)})(Sy,Sy.exports);var Rk=Sy.exports,oy={};function Ok(o){if(oy[o])return oy[o];var e=o.split("."),n=e[0],s=e[1];if(!s)throw new Error("Invalid token");var f=Bk(s),v={usage:n,user:f.u};return vd(f,"a")&&(v.authorization=f.a),vd(f,"exp")&&(v.expires=f.exp*1e3),vd(f,"iat")&&(v.created=f.iat*1e3),vd(f,"scopes")&&(v.scopes=f.scopes),vd(f,"client")&&(v.client=f.client),vd(f,"ll")&&(v.lastLogin=f.ll),vd(f,"iu")&&(v.impersonator=f.iu),oy[o]=v,v}function Bk(o){try{return JSON.parse(Rk.decode(o))}catch{throw new Error("Invalid token")}}function vd(o,e){return Object.prototype.hasOwnProperty.call(o,e)}var j1=Ok,q1={exports:{}};(function(o){var e=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function f(S,P,D){this.fn=S,this.context=P,this.once=D||!1}function v(S,P,D,R,O){if(typeof D!="function")throw new TypeError("The listener must be a function");var Y=new f(D,R||S,O),ee=n?n+P:P;return S._events[ee]?S._events[ee].fn?S._events[ee]=[S._events[ee],Y]:S._events[ee].push(Y):(S._events[ee]=Y,S._eventsCount++),S}function c(S,P){--S._eventsCount===0?S._events=new s:delete S._events[P]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var P=[],D,R;if(this._eventsCount===0)return P;for(R in D=this._events)e.call(D,R)&&P.push(n?R.slice(1):R);return Object.getOwnPropertySymbols?P.concat(Object.getOwnPropertySymbols(D)):P},h.prototype.listeners=function(P){var D=n?n+P:P,R=this._events[D];if(!R)return[];if(R.fn)return[R.fn];for(var O=0,Y=R.length,ee=new Array(Y);O<Y;O++)ee[O]=R[O].fn;return ee},h.prototype.listenerCount=function(P){var D=n?n+P:P,R=this._events[D];return R?R.fn?1:R.length:0},h.prototype.emit=function(P,D,R,O,Y,ee){var he=n?n+P:P;if(!this._events[he])return!1;var re=this._events[he],ve=arguments.length,se,we;if(re.fn){switch(re.once&&this.removeListener(P,re.fn,void 0,!0),ve){case 1:return re.fn.call(re.context),!0;case 2:return re.fn.call(re.context,D),!0;case 3:return re.fn.call(re.context,D,R),!0;case 4:return re.fn.call(re.context,D,R,O),!0;case 5:return re.fn.call(re.context,D,R,O,Y),!0;case 6:return re.fn.call(re.context,D,R,O,Y,ee),!0}for(we=1,se=new Array(ve-1);we<ve;we++)se[we-1]=arguments[we];re.fn.apply(re.context,se)}else{var Ge=re.length,Ue;for(we=0;we<Ge;we++)switch(re[we].once&&this.removeListener(P,re[we].fn,void 0,!0),ve){case 1:re[we].fn.call(re[we].context);break;case 2:re[we].fn.call(re[we].context,D);break;case 3:re[we].fn.call(re[we].context,D,R);break;case 4:re[we].fn.call(re[we].context,D,R,O);break;default:if(!se)for(Ue=1,se=new Array(ve-1);Ue<ve;Ue++)se[Ue-1]=arguments[Ue];re[we].fn.apply(re[we].context,se)}}return!0},h.prototype.on=function(P,D,R){return v(this,P,D,R,!1)},h.prototype.once=function(P,D,R){return v(this,P,D,R,!0)},h.prototype.removeListener=function(P,D,R,O){var Y=n?n+P:P;if(!this._events[Y])return this;if(!D)return c(this,Y),this;var ee=this._events[Y];if(ee.fn)ee.fn===D&&(!O||ee.once)&&(!R||ee.context===R)&&c(this,Y);else{for(var he=0,re=[],ve=ee.length;he<ve;he++)(ee[he].fn!==D||O&&!ee[he].once||R&&ee[he].context!==R)&&re.push(ee[he]);re.length?this._events[Y]=re.length===1?re[0]:re:c(this,Y)}return this},h.prototype.removeAllListeners=function(P){var D;return P?(D=n?n+P:P,this._events[D]&&c(this,D)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,o.exports=h})(q1);function Fk(o){return o.map(encodeURIComponent).join(",")}function G1(o){return Array.isArray(o)?Fk(o):encodeURIComponent(String(o))}function H1(o,e,n){if(n===!1||n===null)return o;var s=/\?/.test(o)?"&":"?",f=encodeURIComponent(e);return n!==void 0&&n!==""&&n!==!0&&(f+="="+G1(n)),""+o+s+f}function Uk(o,e){if(!e)return o;var n=o;return Object.keys(e).forEach(function(s){var f=e[s];f!==void 0&&(Array.isArray(f)&&(f=f.filter(function(v){return v!=null}).join(",")),n=H1(n,s,f))}),n}function Nk(o,e){if(!e||o.slice(0,4)==="http")return o;var n=o[0]==="/"?"":"/";return""+e.replace(/\/$/,"")+n+o}function Vk(o,e){return e?o.replace(/\/:([a-zA-Z0-9]+)/g,function(n,s){var f=e[s];if(f===void 0)throw new Error("Unspecified route parameter "+s);var v=G1(f);return"/"+v}):o}var jk={appendQueryObject:Uk,appendQueryParam:H1,prependOrigin:Nk,interpolateRouteParams:Vk},qk=j1,r_=xp,Gk=q1.exports,dm=jk,M0=Zm,Hk=1;function Uh(o,e){if(!o)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var s=r_(n,e.headers),f=Object.keys(s).reduce(function(v,c){return v[c.toLowerCase()]=s[c],v},{});this.id=Hk++,this._options=e,this.emitter=new Gk,this.client=o,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||o.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.encoding=e.encoding||"utf8",this.sendFileAs=e.sendFileAs||null,this.headers=f}Uh.prototype.url=function(e){var n=dm.prependOrigin(this.path,this.origin);n=dm.appendQueryObject(n,this.query);var s=this.params,f=e==null?this.client.accessToken:e;if(f){n=dm.appendQueryParam(n,"access_token",f);var v=qk(f).user;s=r_({ownerId:v},s)}return n=dm.interpolateRouteParams(n,s),n};Uh.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then(function(n){return e.response=n,e.emitter.emit(M0.EVENT_RESPONSE,n),n},function(n){throw e.error=n,e.emitter.emit(M0.EVENT_ERROR,n),n})};Uh.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Uh.prototype.eachPage=function(e){var n=this;function s(c){function h(){delete n._nextPageRequest;var S=c.nextPage();S&&(n._nextPageRequest=S,v(S))}e(null,c,h)}function f(c){e(c,null,function(){})}function v(c){c.send().then(s,f)}v(this)};Uh.prototype.clone=function(){return this._extend()};Uh.prototype._extend=function(e){var n=r_(this._options,e);return new Uh(this.client,n)};var Zk=Uh,Wk=j1,Xk=Zk,Kk=Zm;function Z1(o){if(!o||!o.accessToken)throw new Error("Cannot create a client without an access token");Wk(o.accessToken),this.accessToken=o.accessToken,this.origin=o.origin||Kk.API_ORIGIN}Z1.prototype.createRequest=function(e){return new Xk(this,e)};var W1=Z1,X1=Dk,K1=W1;function gp(o){K1.call(this,o)}gp.prototype=Object.create(K1.prototype);gp.prototype.constructor=gp;gp.prototype.sendRequest=X1.browserSend;gp.prototype.abortRequest=X1.browserAbort;function Jk(o){return new gp(o)}var J1=Jk,Yk=J1,Qk=Yk,$k=Object.prototype.toString,eM=function(o){var e;return $k.call(o)==="[object Object]"&&(e=Object.getPrototypeOf(o),e===null||e===Object.getPrototypeOf({}))},tM=eM,iM=xp,Y1="value",ay=`
  `,Co={};Co.assert=function(o,e){return e=e||{},function(n){var s=Nh(o,n);if(!!s){var f=o_(s,e);throw e.apiName&&(f=e.apiName+": "+f),new Error(f)}}};Co.shape=function(e){var n=aM(e);return function(f){var v=Nh(Co.plainObject,f);if(v)return v;for(var c,h,S=[],P=0;P<n.length;P++)c=n[P].key,h=n[P].value,v=Nh(h,f[c]),v&&S.push([c].concat(v));return S.length<2?S[0]:function(D){S=S.map(function(Y){var ee=Y[0],he=o_(Y,D).split(`
`).join(ay);return"- "+ee+": "+he});var R=D.path.join("."),O=R===Y1?"":" of "+R;return"The following properties"+O+" have invalid values:"+ay+S.join(ay)}}};Co.strictShape=function(e){var n=Co.shape(e);return function(f){var v=n(f);if(v)return v;var c=Object.keys(f).reduce(function(h,S){return e[S]===void 0&&h.push(S),h},[]);if(c.length!==0)return function(){return"The following keys are invalid: "+c.join(", ")}}};Co.arrayOf=function(e){return Q1(e)};Co.tuple=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return Q1(e)};function Q1(o){var e=Array.isArray(o),n=function(s){return e?o[s]:o};return function(f){var v=Nh(Co.plainArray,f);if(v)return v;if(e&&f.length!==o.length)return"an array with "+o.length+" items";for(var c=0;c<f.length;c++)if(v=Nh(n(c),f[c]),v)return[c].concat(v)}}Co.required=function(e){function n(s){return s==null?function(f){return $1(f,eb(f.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return n.__required=!0,n};Co.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(s){var f=e.map(function(v){return Nh(v,s)}).filter(Boolean);if(f.length===e.length)return f.every(function(v){return v.length===1&&typeof v[0]=="string"})?nM(f.map(function(v){return v[0]})):f.reduce(function(v,c){return c.length>v.length?c:v})}};Co.equal=function(e){return function(s){if(s!==e)return JSON.stringify(e)}};Co.oneOf=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=e.map(function(s){return Co.equal(s)});return Co.oneOfType.apply(this,n)};Co.range=function(e){var n=e[0],s=e[1];return function(v){var c=Nh(Co.number,v);if(c||v<n||v>s)return"number between "+n+" & "+s+" (inclusive)"}};Co.any=function(){};Co.boolean=function(e){if(typeof e!="boolean")return"boolean"};Co.number=function(e){if(typeof e!="number")return"number"};Co.plainArray=function(e){if(!Array.isArray(e))return"array"};Co.plainObject=function(e){if(!tM(e))return"object"};Co.string=function(e){if(typeof e!="string")return"string"};Co.func=function(e){if(typeof e!="function")return"function"};function Nh(o,e){if(!(e==null&&!o.hasOwnProperty("__required"))){var n=o(e);if(n)return Array.isArray(n)?n:[n]}}function o_(o,e){var n=o.length,s=o[n-1],f=o.slice(0,n-1);return f.length===0&&(f=[Y1]),e=iM(e,{path:f}),typeof s=="function"?s(e):$1(e,rM(s))}function nM(o){return o.length<2?o[0]:o.length===2?o.join(" or "):o.slice(0,-1).join(", ")+", or "+o.slice(-1)}function rM(o){return"must be "+oM(o)+"."}function oM(o){return/^an? /.test(o)?o:/^[aeiou]/i.test(o)?"an "+o:/^[a-z]/i.test(o)?"a "+o:o}function $1(o,e){var n=eb(o.path),s=o.path.join(".")+" "+e,f=n?"Item at position ":"";return f+s}function eb(o){return typeof o[o.length-1]=="number"||typeof o[0]=="number"}function aM(o){return Object.keys(o||{}).map(function(e){return{key:e,value:o[e]}})}Co.validate=Nh;Co.processMessage=o_;var sM=Co,lM=xp,fp=sM;function uM(o){if(typeof window!="undefined")return o instanceof Xl.Blob||o instanceof Xl.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof o=="string"||o.pipe!==void 0))return"Filename or Readable stream"}function cM(o,e){return fp.assert(fp.strictShape(o),e)}function hM(o){var e="date";if(typeof o=="boolean")return e;try{var n=new Date(o);if(n.getTime&&isNaN(n.getTime()))return e}catch{return e}}function dM(o){return fp.tuple(fp.number,fp.number)(o)}var pM=lM(fp,{file:uM,date:hM,coordinates:dM,assertShape:cM});function fM(o,e){var n=function(s,f){return e.indexOf(s)!==-1&&f!==void 0};return typeof e=="function"&&(n=e),Object.keys(o).filter(function(s){return n(s,o[s])}).reduce(function(s,f){return s[f]=o[f],s},{})}var mM=fM;function gM(o,e){return Object.keys(o).reduce(function(n,s){return n[s]=e(s,o[s]),n},{})}var yM=gM,_M=yM;function vM(o){return _M(o,function(e,n){return typeof n=="boolean"?JSON.stringify(n):n})}var bM=vM,xM=W1,wM=J1;function EM(o){return function(e){var n;xM.prototype.isPrototypeOf(e)?n=e:n=wM(e);var s=Object.create(o);return s.client=n,s}}var IM=EM,tb=xp,Ur=pM,Cm=mM,ib=bM,SM=IM,a_={},nb=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];a_.forwardGeocode=function(o){Ur.assertShape({query:Ur.required(Ur.string),mode:Ur.oneOf("mapbox.places","mapbox.places-permanent"),countries:Ur.arrayOf(Ur.string),proximity:Ur.oneOf(Ur.coordinates,"ip"),types:Ur.arrayOf(Ur.oneOf(nb)),autocomplete:Ur.boolean,bbox:Ur.arrayOf(Ur.number),limit:Ur.number,language:Ur.arrayOf(Ur.string),routing:Ur.boolean,fuzzyMatch:Ur.boolean,worldview:Ur.string})(o),o.mode=o.mode||"mapbox.places";var e=ib(tb({country:o.countries},Cm(o,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Cm(o,["mode","query"]),query:e})};a_.reverseGeocode=function(o){Ur.assertShape({query:Ur.required(Ur.coordinates),mode:Ur.oneOf("mapbox.places","mapbox.places-permanent"),countries:Ur.arrayOf(Ur.string),types:Ur.arrayOf(Ur.oneOf(nb)),bbox:Ur.arrayOf(Ur.number),limit:Ur.number,language:Ur.arrayOf(Ur.string),reverseMode:Ur.oneOf("distance","score"),routing:Ur.boolean,worldview:Ur.string})(o),o.mode=o.mode||"mapbox.places";var e=ib(tb({country:o.countries},Cm(o,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Cm(o,["mode","query"]),query:e})};var TM=SM(a_);let AM="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",rb=o=>crypto.getRandomValues(new Uint8Array(o)),ob=(o,e,n)=>{let s=(2<<Math.log(o.length-1)/Math.LN2)-1,f=-~(1.6*s*e/o.length);return(v=e)=>{let c="";for(;;){let h=n(f),S=f;for(;S--;)if(c+=o[h[S]&s]||"",c.length===v)return c}}},CM=(o,e=21)=>ob(o,e,rb),kM=(o=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(o));for(;o--;){let s=n[o]&63;s<36?e+=s.toString(36):s<62?e+=(s-26).toString(36).toUpperCase():s<63?e+="_":e+="-"}return e};var MM=Object.freeze(Object.defineProperty({__proto__:null,nanoid:kM,customAlphabet:CM,customRandom:ob,urlAlphabet:AM,random:rb},Symbol.toStringTag,{value:"Module"})),LM=pC(MM),PM=LM.nanoid;function ab(o){this.origin=o.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=o.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=o,this.send=this.send.bind(this),this.countries=o.countries?o.countries.split(","):null,this.types=o.types?o.types.split(","):null,this.bbox=o.bbox?o.bbox:null,this.language=o.language?o.language.split(","):null,this.limit=o.limit?+o.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(o),this.eventQueue=new Array,this.flushInterval=o.flushInterval||1e3,this.maxQueueSize=o.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}ab.prototype={select:function(o,e){var n=this.getSelectedIndex(o,e),s=this.getEventPayload("search.select",e);if(s.resultIndex=n,s.resultPlaceName=o.place_name,s.resultId=o.id,!(n===this.lastSentIndex&&s.queryString===this.lastSentInput||n==-1)&&(this.lastSentIndex=n,this.lastSentInput=s.queryString,!!s.queryString))return this.push(s)},start:function(o){var e=this.getEventPayload("search.start",o);if(!!e.queryString)return this.push(e)},keyevent:function(o,e){if(!!o.key&&!(o.metaKey||[9,27,37,39,13,38,40].indexOf(o.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",e);if(n.lastAction=o.key,!!n.queryString)return this.push(n)}},send:function(o,e){if(!this.enableEventLogging)return e?e():void 0;var n=this.getRequestOptions(o);this.request(n,function(s){if(s)return this.handleError(s,e);if(e)return e()}.bind(this))},getRequestOptions:function(o){Array.isArray(o)||(o=[o]);var e={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(o)};return e},getEventPayload:function(o,e){var n;e.options.proximity?typeof e.options.proximity=="object"?n=[e.options.proximity.longitude,e.options.proximity.latitude]:e.options.proximity==="ip"?n=[999,999]:n=e.options.proximity:n=null;var s=e._map?e._map.getZoom():void 0,f={event:o,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:e.options.autocomplete,fuzzyMatch:e.options.fuzzyMatch,proximity:n,limit:e.options.limit,routing:e.options.routing,worldview:e.options.worldview,mapZoom:s,keyboardLocale:this.locale};return o==="search.select"?f.queryString=e.inputString:o!="search.select"&&e._inputEl?f.queryString=e._inputEl.value:f.queryString=e.inputString,f},request:function(o,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?e(null):e(this.statusText)},n.open(o.method,o.host+"/"+o.path,!0);for(var s in o.headers){var f=o.headers[s];n.setRequestHeader(s,f)}n.send(o.body)},handleError:function(o,e){if(e)return e(o)},generateSessionID:function(){return PM()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(o,e){if(!!e._typeahead){var n=e._typeahead.data,s=o.id,f=n.map(function(c){return c.id}),v=f.indexOf(s);return v}},shouldEnableLogging:function(o){return!(o.enableEventLogging===!1||o.origin&&o.origin.indexOf("api.mapbox.com")==-1||o.localGeocoder||o.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(o,e){this.eventQueue.push(o),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}};var zM=ab,DM={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"},RM={placeholder:DM},sb={exports:{}};(function(o){(function(e,n,s){o.exports?o.exports=s():e[n]=s()})(Xl,"subtag",function(){var e="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function s(S){return S.match(n)||[]}function f(S){return s(S).filter(function(P,D){return P&&D})}function v(S){return S=s(S),{language:S[1]||e,extlang:S[2]||e,script:S[3]||e,region:S[4]||e}}function c(S,P,D){Object.defineProperty(S,P,{value:D,enumerable:!0})}function h(S,P,D){function R(O){return s(O)[S]||e}c(R,"pattern",P),c(v,D,R)}return h(1,/^[a-zA-Z]{2,3}$/,"language"),h(2,/^[a-zA-Z]{3}$/,"extlang"),h(3,/^[a-zA-Z]{4}$/,"script"),h(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),c(v,"split",f),v})})(sb);function lb(){}lb.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const o={enableHighAccuracy:!0};return new Promise(function(e,n){window.navigator.geolocation.getCurrentPosition(e,n,o)})}};var OM=lb;function BM(o,e){const n=ub(o),s=["address","street","place","country"];var f;if(typeof e=="function")return e(n);const v=s.indexOf(e);return v===-1?f=s:f=s.slice(v),f.reduce(function(c,h){return n[h]?(c!==""&&(c=c+", "),c+n[h]):c},"")}function ub(o){const e=o.address||"",n=o.text||"",s=o.place_name||"",v={address:s.split(",")[0],houseNumber:e,street:n,placeName:s};return o.context.forEach(function(c){const h=c.id.split(".")[0];v[h]=c.text}),v}var FM={transformFeatureToGeolocationText:BM,getAddressInfo:ub},UM=ZC,NM=ck,bd=xp,VM=i_.exports.EventEmitter,L0=yk,sy=Qk,ly=TM,jM=zM,qM=RM,GM=sb.exports,HM=OM,ZM=FM;const zh={FORWARD:0,LOCAL:1,REVERSE:2};function WM(){var o=document.createElement("div");return o.className="mapboxgl-ctrl-geocoder--powered-by",o.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',o}function cb(o){this._eventEmitter=new VM,this.options=bd({},this.options,o),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new HM}cb.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(o){return o.place_name},render:function(o){var e=o.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"}},addTo:function(o){function e(n,s){if(!document.body.contains(s))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const f=n.onAdd();s.appendChild(f)}if(o._controlContainer)o.addControl(this);else if(o instanceof HTMLElement)e(this,o);else if(typeof o=="string"){const n=document.querySelectorAll(o);if(n.length===0)throw new Error("Element ",o,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(o){if(o&&typeof o!="string"&&(this._map=o),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=ly(sy({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new jM(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",NM(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(P){this.eventManager.keyevent(P,this)}.bind(this));var s=document.createElement("div");s.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var f=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(f),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),s.appendChild(this._clearEl),s.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(s),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var v=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(v),s.appendChild(this._geolocateEl),this._showGeolocateButton()}var c=this._typeahead=new UM(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),c.getItemValue=this.options.getItemValue;var h=c.list.draw,S=this._footerNode=WM();return c.list.draw=function(){h.call(this),S.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),S.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(S)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),e},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(o){this._hideLoadingIcon();const e={geometry:{type:"Point",coordinates:[o.coords.longitude,o.coords.latitude]}};this._handleMarker(e),this._fly(e),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(e),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:e.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const s=e.geometry.coordinates[0]+","+e.geometry.coordinates[1];this._setInputValue(s),this._eventEmitter.emit("result",{result:e})}else this.geocoderService.reverseGeocode(n).send().then(function(s){const f=s.body.features[0];if(f){const v=ZM.transformFeatureToGeolocationText(f,this.options.addressAccuracy);this._setInputValue(v),f.user_coordinates=e.geometry.coordinates,this._eventEmitter.emit("result",{result:f})}else this._eventEmitter.emit("result",{result:{user_coordinates:e.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(o){o.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(o,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+o),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=e,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(o){this._inputEl.value=o,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(o){var e=(o.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this._geocode(e)},_onKeyDown:function(o){var e=27,n=9;if(o.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(o),this._inputEl.blur();var s=o.target&&o.target.shadowRoot?o.target.shadowRoot.activeElement:o.target,f=s?s.value:"";if(!f)return this.fresh=!0,o.keyCode!==n&&this.clear(o),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(o.metaKey||[n,e,37,39,13,38,40].indexOf(o.keyCode)!==-1)&&s.value.length>=this.options.minLength&&this._geocode(s.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(o){this.options.clearOnBlur&&this._clearOnBlur(o),this.options.collapsed&&this._collapse()},_onChange:function(){var o=this._typeahead.selected;o&&JSON.stringify(o)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(o),this.options.marker&&this._mapboxgl&&this._handleMarker(o),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(o),this._eventEmitter.emit("result",{result:o}),this.eventManager.select(o,this))},_fly:function(o){var e;if(o.properties&&L0[o.properties.short_code])e=bd({},this.options.flyTo),this._map&&this._map.fitBounds(L0[o.properties.short_code].bbox,e);else if(o.bbox){var n=o.bbox;e=bd({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],e)}else{var s={zoom:this.options.zoom};e=bd({},s,this.options.flyTo),o.center?e.center=o.center:o.geometry&&o.geometry.type&&o.geometry.type==="Point"&&o.geometry.coordinates&&(e.center=o.geometry.coordinates),this._map&&this._map.flyTo(e)}},_requestType:function(o,e){var n;const s=/^[ ]*(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;return o.localGeocoderOnly?n=zh.LOCAL:o.reverseGeocode&&s.test(e)?n=zh.REVERSE:n=zh.FORWARD,n},_setupConfig:function(o,e){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],s=/[\s,]+/;var f=this,v=n.reduce(function(h,S){if(f.options[S]===void 0||f.options[S]===null)return h;["countries","types","language"].indexOf(S)>-1?h[S]=f.options[S].split(s):h[S]=f.options[S];const P=typeof f.options[S].longitude=="number"&&typeof f.options[S].latitude=="number";if(S==="proximity"&&P){const D=f.options[S].longitude,R=f.options[S].latitude;h[S]=[D,R]}return h},{});switch(o){case zh.REVERSE:{var c=e.split(s).map(function(h){return parseFloat(h,10)});f.options.flipCoordinates||c.reverse(),v.types&&v.types[0],v=bd(v,{query:c,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(h){h in v&&delete v[h]})}break;case zh.FORWARD:/^[ ]*(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)*[ ]*$/.test(e)&&(e=e.replace(/,/g," ")),v=bd(v,{query:e});break}return v},_geocode:function(o){this.inputString=o,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:o});const e=this._requestType(this.options,o),n=this._setupConfig(e,o);var s;switch(e){case zh.LOCAL:s=Promise.resolve();break;case zh.FORWARD:s=this.geocoderService.forwardGeocode(n).send();break;case zh.REVERSE:s=this.geocoderService.reverseGeocode(n).send();break}var f=this.options.localGeocoder?this.options.localGeocoder(o)||[]:[],v=[],c=null;return s.catch(function(h){c=h}.bind(this)).then(function(h){this._hideLoadingIcon();var S={};return h?h.statusCode=="200"&&(S=h.body,S.request=h.request,S.headers=h.headers):S={type:"FeatureCollection",features:[]},S.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),S.features=S.features?f.concat(S.features):f,this.options.externalGeocoder?(v=this.options.externalGeocoder(o,S.features)||Promise.resolve([]),v.then(function(P){return S.features=S.features?P.concat(S.features):P,S},function(){return S})):S}.bind(this)).then(function(h){if(c)throw c;this.options.filter&&h.features.length&&(h.features=h.features.filter(this.options.filter)),h.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",h),this._typeahead.update(h.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",h))}.bind(this)).catch(function(h){this._hideLoadingIcon(),this._hideAttribution(),f.length&&this.options.localGeocoder||v.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(f)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:f}),this._eventEmitter.emit("error",{error:h})}.bind(this)),s},_clear:function(o){o&&o.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(o){this._clear(o),this._inputEl.focus()},_clearOnBlur:function(o){var e=this;o.relatedTarget&&e._clear(o)},_onQueryResult:function(o){var e=o.body;if(!!e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var o=this._map.getCenter().wrap();this.setProximity({longitude:o.lng,latitude:o.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(o){return this._geocode(o).then(this._onQueryResult),this},_renderError:function(){var o="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(o)},_renderLocationError:function(){var o="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(o)},_renderNoResults:function(){var o="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(o)},_renderUserDeniedGeolocationError:function(){var o="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(o)},_renderMessage:function(o){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(o)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var o=this.options.language.split(",")[0],e=GM.language(o),n=qM.placeholder[e];if(n)return n}return"Search"},setInput:function(o){return this._inputEl.value=o,this._typeahead.selected=null,this._typeahead.clear(),o.length>=this.options.minLength&&this._geocode(o),this},setProximity:function(o,e=!0){return this.options.proximity=o,e&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(o){return o&&typeof o=="function"&&(this._typeahead.render=o),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(o){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=o||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(o){return this.options.zoom=o,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(o){return this.options.flyTo=o,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(o){return this.placeholder=o||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(o){return this.options.bbox=o,this},getCountries:function(){return this.options.countries},setCountries:function(o){return this.options.countries=o,this},getTypes:function(){return this.options.types},setTypes:function(o){return this.options.types=o,this},getMinLength:function(){return this.options.minLength},setMinLength:function(o){return this.options.minLength=o,this._typeahead&&(this._typeahead.options.minLength=o),this},getLimit:function(){return this.options.limit},setLimit:function(o){return this.options.limit=o,this._typeahead&&(this._typeahead.options.limit=o),this},getFilter:function(){return this.options.filter},setFilter:function(o){return this.options.filter=o,this},setOrigin:function(o){return this.options.origin=o,this.geocoderService=ly(sy({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(o){return this.options.accessToken=o,this.geocoderService=ly(sy({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(o){return this.options.autocomplete=o,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(o){return this.options.fuzzyMatch=o,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(o){return this.options.routing=o,this},getRouting:function(){return this.options.routing},setWorldview:function(o){return this.options.worldview=o,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(o){if(!!this._map){this._removeMarker();var e={color:"#4668F2"},n=bd({},e,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),o.center?this.mapMarker.setLngLat(o.center).addTo(this._map):o.geometry&&o.geometry.type&&o.geometry.type==="Point"&&o.geometry.coordinates&&this.mapMarker.setLngLat(o.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(o,e){return this._eventEmitter.on(o,e),this},off:function(o,e){return this._eventEmitter.removeListener(o,e),this.eventManager.remove(),this}};var XM=cb,hb={};Object.defineProperty(hb,"__esModule",{value:!0});class Fh{constructor(e,n){this.areas=e||Fh.DEFAULT_AREAS,this.limit_no_areas=n||Fh.DEFAULT_NO_AREAS,this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(e){this.map=e;const n=this;if(this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.areas.length<=this.limit_no_areas){this.mapAreaContainer=document.createElement("div"),this.areaButton=document.createElement("button"),this.mapAreaContainer.classList.add("mapboxgl-area-list");for(const s of this.areas){const f=document.createElement("button");f.innerText=s.title,f.classList.add(s.title.replace(/[^a-z0-9-]/gi,"_")),f.value=JSON.stringify({center:s.latlng,zoom:s.zoom}),f.addEventListener("click",v=>{const c=v.srcElement;this.map.jumpTo(JSON.parse(c.value)),this.mapAreaContainer.style.display="none",this.areaButton.style.display="block";const h=this.mapAreaContainer.getElementsByClassName("active");for(;h[0];)h[0].classList.remove("active");c.classList.add("active")}),s.title===Fh.DEFAULT_AREA&&f.classList.add("active"),this.mapAreaContainer.appendChild(f)}this.areaButton.classList.add("mapboxgl-ctrl-icon"),this.areaButton.classList.add("mapboxgl-area-switcher"),this.areaButton.addEventListener("click",()=>{this.areaButton.style.display="none",this.mapAreaContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.areaButton),this.controlContainer.appendChild(this.mapAreaContainer)}else this.controlContainer.classList.add("mapboxgl-ctrl-area-switch"),this.select=document.createElement("select"),this.select.setAttribute("type","select"),this.select.addEventListener("change",function(s){!s.target||n.map.flyTo(JSON.parse(s.target[this.selectedIndex].value))}),this.controlContainer.appendChild(this.select),this.areas.forEach(function(s){var f=document.createElement("option");f.setAttribute("type","option"),f.text=s.title,f.value=JSON.stringify({center:s.latlng,zoom:s.zoom}),n.select.appendChild(f)});return this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.areaButton||(this.areaButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.mapAreaContainer&&this.areaButton&&(this.mapAreaContainer.style.display="none",this.areaButton.style.display="block")}}var KM=hb.default=Fh;Fh.DEFAULT_AREA="Narok";Fh.DEFAULT_AREAS=[{title:"Narok",latlng:[35.86974,-1.08707],zoom:13},{title:"Nairobi",latlng:[36.8034,-1.2809],zoom:11},{title:"Mombasa",latlng:[39.65449,-4.05099],zoom:12}];Fh.DEFAULT_NO_AREAS=5;var db={},s_={},l_={},Wm={},u_={exports:{}},pb=function(e,n){return function(){for(var f=new Array(arguments.length),v=0;v<f.length;v++)f[v]=arguments[v];return e.apply(n,f)}},JM=pb,kd=Object.prototype.toString;function c_(o){return kd.call(o)==="[object Array]"}function Ty(o){return typeof o=="undefined"}function YM(o){return o!==null&&!Ty(o)&&o.constructor!==null&&!Ty(o.constructor)&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function QM(o){return kd.call(o)==="[object ArrayBuffer]"}function $M(o){return typeof FormData!="undefined"&&o instanceof FormData}function eL(o){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(o):e=o&&o.buffer&&o.buffer instanceof ArrayBuffer,e}function tL(o){return typeof o=="string"}function iL(o){return typeof o=="number"}function fb(o){return o!==null&&typeof o=="object"}function vm(o){if(kd.call(o)!=="[object Object]")return!1;var e=Object.getPrototypeOf(o);return e===null||e===Object.prototype}function nL(o){return kd.call(o)==="[object Date]"}function rL(o){return kd.call(o)==="[object File]"}function oL(o){return kd.call(o)==="[object Blob]"}function mb(o){return kd.call(o)==="[object Function]"}function aL(o){return fb(o)&&mb(o.pipe)}function sL(o){return typeof URLSearchParams!="undefined"&&o instanceof URLSearchParams}function lL(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function uL(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function h_(o,e){if(!(o===null||typeof o=="undefined"))if(typeof o!="object"&&(o=[o]),c_(o))for(var n=0,s=o.length;n<s;n++)e.call(null,o[n],n,o);else for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&e.call(null,o[f],f,o)}function Ay(){var o={};function e(f,v){vm(o[v])&&vm(f)?o[v]=Ay(o[v],f):vm(f)?o[v]=Ay({},f):c_(f)?o[v]=f.slice():o[v]=f}for(var n=0,s=arguments.length;n<s;n++)h_(arguments[n],e);return o}function cL(o,e,n){return h_(e,function(f,v){n&&typeof f=="function"?o[v]=JM(f,n):o[v]=f}),o}function hL(o){return o.charCodeAt(0)===65279&&(o=o.slice(1)),o}var Al={isArray:c_,isArrayBuffer:QM,isBuffer:YM,isFormData:$M,isArrayBufferView:eL,isString:tL,isNumber:iL,isObject:fb,isPlainObject:vm,isUndefined:Ty,isDate:nL,isFile:rL,isBlob:oL,isFunction:mb,isStream:aL,isURLSearchParams:sL,isStandardBrowserEnv:uL,forEach:h_,merge:Ay,extend:cL,trim:lL,stripBOM:hL},op=Al;function P0(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var gb=function(e,n,s){if(!n)return e;var f;if(s)f=s(n);else if(op.isURLSearchParams(n))f=n.toString();else{var v=[];op.forEach(n,function(S,P){S===null||typeof S=="undefined"||(op.isArray(S)?P=P+"[]":S=[S],op.forEach(S,function(R){op.isDate(R)?R=R.toISOString():op.isObject(R)&&(R=JSON.stringify(R)),v.push(P0(P)+"="+P0(R))}))}),f=v.join("&")}if(f){var c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e},dL=Al;function Xm(){this.handlers=[]}Xm.prototype.use=function(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};Xm.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Xm.prototype.forEach=function(e){dL.forEach(this.handlers,function(s){s!==null&&e(s)})};var pL=Xm,fL=Al,mL=function(e,n){fL.forEach(e,function(f,v){v!==n&&v.toUpperCase()===n.toUpperCase()&&(e[n]=f,delete e[v])})},yb=function(e,n,s,f,v){return e.config=n,s&&(e.code=s),e.request=f,e.response=v,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},gL=yb,_b=function(e,n,s,f,v){var c=new Error(e);return gL(c,n,s,f,v)},yL=_b,_L=function(e,n,s){var f=s.config.validateStatus;!s.status||!f||f(s.status)?e(s):n(yL("Request failed with status code "+s.status,s.config,null,s.request,s))},pm=Al,vL=pm.isStandardBrowserEnv()?function(){return{write:function(n,s,f,v,c,h){var S=[];S.push(n+"="+encodeURIComponent(s)),pm.isNumber(f)&&S.push("expires="+new Date(f).toGMTString()),pm.isString(v)&&S.push("path="+v),pm.isString(c)&&S.push("domain="+c),h===!0&&S.push("secure"),document.cookie=S.join("; ")},read:function(n){var s=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),bL=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},xL=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},wL=bL,EL=xL,IL=function(e,n){return e&&!wL(n)?EL(e,n):n},uy=Al,SL=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],TL=function(e){var n={},s,f,v;return e&&uy.forEach(e.split(`
`),function(h){if(v=h.indexOf(":"),s=uy.trim(h.substr(0,v)).toLowerCase(),f=uy.trim(h.substr(v+1)),s){if(n[s]&&SL.indexOf(s)>=0)return;s==="set-cookie"?n[s]=(n[s]?n[s]:[]).concat([f]):n[s]=n[s]?n[s]+", "+f:f}}),n},z0=Al,AL=z0.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),s;function f(v){var c=v;return e&&(n.setAttribute("href",c),c=n.href),n.setAttribute("href",c),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=f(window.location.href),function(c){var h=z0.isString(c)?f(c):c;return h.protocol===s.protocol&&h.host===s.host}}():function(){return function(){return!0}}(),fm=Al,CL=_L,kL=vL,ML=gb,LL=IL,PL=TL,zL=AL,cy=_b,D0=function(e){return new Promise(function(s,f){var v=e.data,c=e.headers,h=e.responseType;fm.isFormData(v)&&delete c["Content-Type"];var S=new XMLHttpRequest;if(e.auth){var P=e.auth.username||"",D=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";c.Authorization="Basic "+btoa(P+":"+D)}var R=LL(e.baseURL,e.url);S.open(e.method.toUpperCase(),ML(R,e.params,e.paramsSerializer),!0),S.timeout=e.timeout;function O(){if(!!S){var ee="getAllResponseHeaders"in S?PL(S.getAllResponseHeaders()):null,he=!h||h==="text"||h==="json"?S.responseText:S.response,re={data:he,status:S.status,statusText:S.statusText,headers:ee,config:e,request:S};CL(s,f,re),S=null}}if("onloadend"in S?S.onloadend=O:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(O)},S.onabort=function(){!S||(f(cy("Request aborted",e,"ECONNABORTED",S)),S=null)},S.onerror=function(){f(cy("Network Error",e,null,S)),S=null},S.ontimeout=function(){var he="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(he=e.timeoutErrorMessage),f(cy(he,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",S)),S=null},fm.isStandardBrowserEnv()){var Y=(e.withCredentials||zL(R))&&e.xsrfCookieName?kL.read(e.xsrfCookieName):void 0;Y&&(c[e.xsrfHeaderName]=Y)}"setRequestHeader"in S&&fm.forEach(c,function(he,re){typeof v=="undefined"&&re.toLowerCase()==="content-type"?delete c[re]:S.setRequestHeader(re,he)}),fm.isUndefined(e.withCredentials)||(S.withCredentials=!!e.withCredentials),h&&h!=="json"&&(S.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&S.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(he){!S||(S.abort(),f(he),S=null)}),v||(v=null),S.send(v)})},ts=Al,R0=mL,DL=yb,RL={"Content-Type":"application/x-www-form-urlencoded"};function O0(o,e){!ts.isUndefined(o)&&ts.isUndefined(o["Content-Type"])&&(o["Content-Type"]=e)}function OL(){var o;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(o=D0),o}function BL(o,e,n){if(ts.isString(o))try{return(e||JSON.parse)(o),ts.trim(o)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(o)}var Km={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:OL(),transformRequest:[function(e,n){return R0(n,"Accept"),R0(n,"Content-Type"),ts.isFormData(e)||ts.isArrayBuffer(e)||ts.isBuffer(e)||ts.isStream(e)||ts.isFile(e)||ts.isBlob(e)?e:ts.isArrayBufferView(e)?e.buffer:ts.isURLSearchParams(e)?(O0(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ts.isObject(e)||n&&n["Content-Type"]==="application/json"?(O0(n,"application/json"),BL(e)):e}],transformResponse:[function(e){var n=this.transitional,s=n&&n.silentJSONParsing,f=n&&n.forcedJSONParsing,v=!s&&this.responseType==="json";if(v||f&&ts.isString(e)&&e.length)try{return JSON.parse(e)}catch(c){if(v)throw c.name==="SyntaxError"?DL(c,this,"E_JSON_PARSE"):c}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};Km.headers={common:{Accept:"application/json, text/plain, */*"}};ts.forEach(["delete","get","head"],function(e){Km.headers[e]={}});ts.forEach(["post","put","patch"],function(e){Km.headers[e]=ts.merge(RL)});var d_=Km,FL=Al,UL=d_,NL=function(e,n,s){var f=this||UL;return FL.forEach(s,function(c){e=c.call(f,e,n)}),e},vb=function(e){return!!(e&&e.__CANCEL__)},B0=Al,hy=NL,VL=vb,jL=d_;function dy(o){o.cancelToken&&o.cancelToken.throwIfRequested()}var qL=function(e){dy(e),e.headers=e.headers||{},e.data=hy.call(e,e.data,e.headers,e.transformRequest),e.headers=B0.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),B0.forEach(["delete","get","head","post","put","patch","common"],function(f){delete e.headers[f]});var n=e.adapter||jL.adapter;return n(e).then(function(f){return dy(e),f.data=hy.call(e,f.data,f.headers,e.transformResponse),f},function(f){return VL(f)||(dy(e),f&&f.response&&(f.response.data=hy.call(e,f.response.data,f.response.headers,e.transformResponse))),Promise.reject(f)})},ys=Al,bb=function(e,n){n=n||{};var s={},f=["url","method","data"],v=["headers","auth","proxy","params"],c=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],h=["validateStatus"];function S(O,Y){return ys.isPlainObject(O)&&ys.isPlainObject(Y)?ys.merge(O,Y):ys.isPlainObject(Y)?ys.merge({},Y):ys.isArray(Y)?Y.slice():Y}function P(O){ys.isUndefined(n[O])?ys.isUndefined(e[O])||(s[O]=S(void 0,e[O])):s[O]=S(e[O],n[O])}ys.forEach(f,function(Y){ys.isUndefined(n[Y])||(s[Y]=S(void 0,n[Y]))}),ys.forEach(v,P),ys.forEach(c,function(Y){ys.isUndefined(n[Y])?ys.isUndefined(e[Y])||(s[Y]=S(void 0,e[Y])):s[Y]=S(void 0,n[Y])}),ys.forEach(h,function(Y){Y in n?s[Y]=S(e[Y],n[Y]):Y in e&&(s[Y]=S(void 0,e[Y]))});var D=f.concat(v).concat(c).concat(h),R=Object.keys(e).concat(Object.keys(n)).filter(function(Y){return D.indexOf(Y)===-1});return ys.forEach(R,P),s};const GL="axios",HL="0.21.4",ZL="Promise based HTTP client for the browser and node.js",WL="index.js",XL={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},KL={type:"git",url:"https://github.com/axios/axios.git"},JL=["xhr","http","ajax","promise","node"],YL="Matt Zabriskie",QL="MIT",$L={url:"https://github.com/axios/axios/issues"},eP="https://axios-http.com",tP={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},iP={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},nP="dist/axios.min.js",rP="dist/axios.min.js",oP="./index.d.ts",aP={"follow-redirects":"^1.14.0"},sP=[{path:"./dist/axios.min.js",threshold:"5kB"}];var lP={name:GL,version:HL,description:ZL,main:WL,scripts:XL,repository:KL,keywords:JL,author:YL,license:QL,bugs:$L,homepage:eP,devDependencies:tP,browser:iP,jsdelivr:nP,unpkg:rP,typings:oP,dependencies:aP,bundlesize:sP},xb=lP,p_={};["object","boolean","number","function","string","symbol"].forEach(function(o,e){p_[o]=function(s){return typeof s===o||"a"+(e<1?"n ":" ")+o}});var F0={},uP=xb.version.split(".");function wb(o,e){for(var n=e?e.split("."):uP,s=o.split("."),f=0;f<3;f++){if(n[f]>s[f])return!0;if(n[f]<s[f])return!1}return!1}p_.transitional=function(e,n,s){var f=n&&wb(n);function v(c,h){return"[Axios v"+xb.version+"] Transitional option '"+c+"'"+h+(s?". "+s:"")}return function(c,h,S){if(e===!1)throw new Error(v(h," has been removed in "+n));return f&&!F0[h]&&(F0[h]=!0,console.warn(v(h," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(c,h,S):!0}};function cP(o,e,n){if(typeof o!="object")throw new TypeError("options must be an object");for(var s=Object.keys(o),f=s.length;f-- >0;){var v=s[f],c=e[v];if(c){var h=o[v],S=h===void 0||c(h,v,o);if(S!==!0)throw new TypeError("option "+v+" must be "+S);continue}if(n!==!0)throw Error("Unknown option "+v)}}var hP={isOlderVersion:wb,assertOptions:cP,validators:p_},Eb=Al,dP=gb,U0=pL,N0=qL,Jm=bb,Ib=hP,ap=Ib.validators;function wf(o){this.defaults=o,this.interceptors={request:new U0,response:new U0}}wf.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Jm(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;n!==void 0&&Ib.assertOptions(n,{silentJSONParsing:ap.transitional(ap.boolean,"1.0.0"),forcedJSONParsing:ap.transitional(ap.boolean,"1.0.0"),clarifyTimeoutError:ap.transitional(ap.boolean,"1.0.0")},!1);var s=[],f=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(e)===!1||(f=f&&O.synchronous,s.unshift(O.fulfilled,O.rejected))});var v=[];this.interceptors.response.forEach(function(O){v.push(O.fulfilled,O.rejected)});var c;if(!f){var h=[N0,void 0];for(Array.prototype.unshift.apply(h,s),h=h.concat(v),c=Promise.resolve(e);h.length;)c=c.then(h.shift(),h.shift());return c}for(var S=e;s.length;){var P=s.shift(),D=s.shift();try{S=P(S)}catch(R){D(R);break}}try{c=N0(S)}catch(R){return Promise.reject(R)}for(;v.length;)c=c.then(v.shift(),v.shift());return c};wf.prototype.getUri=function(e){return e=Jm(this.defaults,e),dP(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Eb.forEach(["delete","get","head","options"],function(e){wf.prototype[e]=function(n,s){return this.request(Jm(s||{},{method:e,url:n,data:(s||{}).data}))}});Eb.forEach(["post","put","patch"],function(e){wf.prototype[e]=function(n,s,f){return this.request(Jm(f||{},{method:e,url:n,data:s}))}});var pP=wf;function f_(o){this.message=o}f_.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};f_.prototype.__CANCEL__=!0;var Sb=f_,fP=Sb;function km(o){if(typeof o!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(f){e=f});var n=this;o(function(f){n.reason||(n.reason=new fP(f),e(n.reason))})}km.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};km.source=function(){var e,n=new km(function(f){e=f});return{token:n,cancel:e}};var mP=km,gP=function(e){return function(s){return e.apply(null,s)}},yP=function(e){return typeof e=="object"&&e.isAxiosError===!0},V0=Al,_P=pb,bm=pP,vP=bb,bP=d_;function Tb(o){var e=new bm(o),n=_P(bm.prototype.request,e);return V0.extend(n,bm.prototype,e),V0.extend(n,e),n}var Nu=Tb(bP);Nu.Axios=bm;Nu.create=function(e){return Tb(vP(Nu.defaults,e))};Nu.Cancel=Sb;Nu.CancelToken=mP;Nu.isCancel=vb;Nu.all=function(e){return Promise.all(e)};Nu.spread=gP;Nu.isAxiosError=yP;u_.exports=Nu;u_.exports.default=Nu;var xP=u_.exports,Ab={exports:{}};(function(o,e){(function(n,s){o.exports=s()})(Xl,function(){var n,s,f;function v(c,h){if(!n)n=h;else if(!s)s=h;else{var S="var sharedChunk = {}; ("+n+")(sharedChunk); ("+s+")(sharedChunk);",P={};n(P),f=h(P),typeof window!="undefined"&&(f.workerUrl=window.URL.createObjectURL(new Blob([S],{type:"text/javascript"})))}}return v(["exports"],function(c){function h(t,a){return t(a={exports:{}},a.exports),a.exports}var S=P;function P(t,a,d,x){this.cx=3*t,this.bx=3*(d-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(x-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=x,this.p2x=d,this.p2y=x}P.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},P.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},P.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},P.prototype.solveCurveX=function(t,a){var d,x,I,M,r;for(a===void 0&&(a=1e-6),I=t,r=0;r<8;r++){if(M=this.sampleCurveX(I)-t,Math.abs(M)<a)return I;var i=this.sampleCurveDerivativeX(I);if(Math.abs(i)<1e-6)break;I-=M/i}if((I=t)<(d=0))return d;if(I>(x=1))return x;for(;d<x;){if(M=this.sampleCurveX(I),Math.abs(M-t)<a)return I;t>M?d=I:x=I,I=.5*(x-d)+d}return I},P.prototype.solve=function(t,a){return this.sampleCurveY(this.solveCurveX(t,a))};var D=R;function R(t,a){this.x=t,this.y=a}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,a){return this.clone()._rotateAround(t,a)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var a=t.x-this.x,d=t.y-this.y;return a*a+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,a){return Math.atan2(this.x*a-this.y*t,this.x*t+this.y*a)},_matMult:function(t){var a=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=a,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var a=Math.cos(t),d=Math.sin(t),x=d*this.x+a*this.y;return this.x=a*this.x-d*this.y,this.y=x,this},_rotateAround:function(t,a){var d=Math.cos(t),x=Math.sin(t),I=a.y+x*(this.x-a.x)+d*(this.y-a.y);return this.x=a.x+d*(this.x-a.x)-x*(this.y-a.y),this.y=I,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},R.convert=function(t){return t instanceof R?t:Array.isArray(t)?new R(t[0],t[1]):t};var O=typeof self!="undefined"?self:{},Y=Math.pow(2,53)-1;function ee(t,a,d,x){var I=new S(t,a,d,x);return function(M){return I.solve(M)}}var he=ee(.25,.1,.25,1);function re(t,a,d){return Math.min(d,Math.max(a,t))}function ve(t,a,d){var x=d-a,I=((t-a)%x+x)%x+a;return I===a?d:I}function se(t){for(var a=[],d=arguments.length-1;d-- >0;)a[d]=arguments[d+1];for(var x=0,I=a;x<I.length;x+=1){var M=I[x];for(var r in M)t[r]=M[r]}return t}var we=1;function Ge(){return we++}function Ue(){return function t(a){return a?(a^16*Math.random()>>a/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function He(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function fe(t,a){t.forEach(function(d){a[d]&&(a[d]=a[d].bind(a))})}function ut(t,a){return t.indexOf(a,t.length-a.length)!==-1}function at(t,a,d){var x={};for(var I in t)x[I]=a.call(d||this,t[I],I,t);return x}function je(t,a,d){var x={};for(var I in t)a.call(d||this,t[I],I,t)&&(x[I]=t[I]);return x}function Fe(t){return Array.isArray(t)?t.map(Fe):typeof t=="object"&&t?at(t,Fe):t}var Dt={};function qe(t){Dt[t]||(typeof console!="undefined"&&console.warn(t),Dt[t]=!0)}function Mt(t,a,d){return(d.y-t.y)*(a.x-t.x)>(a.y-t.y)*(d.x-t.x)}function li(t){for(var a=0,d=0,x=t.length,I=x-1,M=void 0,r=void 0;d<x;I=d++)a+=((r=t[I]).x-(M=t[d]).x)*(M.y+r.y);return a}function Et(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Gt(t){var a={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(x,I,M,r){var i=M||r;return a[I]=!i||i.toLowerCase(),""}),a["max-age"]){var d=parseInt(a["max-age"],10);isNaN(d)?delete a["max-age"]:a["max-age"]=d}return a}var Je=null;function wt(t){if(Je==null){var a=t.navigator?t.navigator.userAgent:null;Je=!!t.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return Je}function Pt(t){try{var a=O[t];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch{return!1}}var ni,Xt,Xi,ei,Jt=O.performance&&O.performance.now?O.performance.now.bind(O.performance):Date.now.bind(Date),bi=O.requestAnimationFrame||O.mozRequestAnimationFrame||O.webkitRequestAnimationFrame||O.msRequestAnimationFrame,ai=O.cancelAnimationFrame||O.mozCancelAnimationFrame||O.webkitCancelAnimationFrame||O.msCancelAnimationFrame,ht={now:Jt,frame:function(t){var a=bi(t);return{cancel:function(){return ai(a)}}},getImageData:function(t,a){a===void 0&&(a=0);var d=O.document.createElement("canvas"),x=d.getContext("2d");if(!x)throw new Error("failed to create canvas 2d context");return d.width=t.width,d.height=t.height,x.drawImage(t,0,0,t.width,t.height),x.getImageData(-a,-a,t.width+2*a,t.height+2*a)},resolveURL:function(t){return ni||(ni=O.document.createElement("a")),ni.href=t,ni.href},hardwareConcurrency:O.navigator&&O.navigator.hardwareConcurrency||4,get devicePixelRatio(){return O.devicePixelRatio},get prefersReducedMotion(){return!!O.matchMedia&&(Xt==null&&(Xt=O.matchMedia("(prefers-reduced-motion: reduce)")),Xt.matches)}},It={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},St={supported:!1,testSupport:function(t){!Ji&&ei&&(Qt?gt(t):Xi=t)}},Ji=!1,Qt=!1;function gt(t){var a=t.createTexture();t.bindTexture(t.TEXTURE_2D,a);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,ei),t.isContextLost())return;St.supported=!0}catch{}t.deleteTexture(a),Ji=!0}O.document&&((ei=O.document.createElement("img")).onload=function(){Xi&&gt(Xi),Xi=null,Qt=!0},ei.onerror=function(){Ji=!0,Xi=null},ei.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var zi="01",ln=function(t,a){this._transformRequestFn=t,this._customAccessToken=a,this._createSkuToken()};function Cn(t){return t.indexOf("mapbox:")===0}ln.prototype._createSkuToken=function(){var t=function(){for(var a="",d=0;d<10;d++)a+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",zi,a].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},ln.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ln.prototype.transformRequest=function(t,a){return this._transformRequestFn&&this._transformRequestFn(t,a)||{url:t}},ln.prototype.normalizeStyleURL=function(t,a){if(!Cn(t))return t;var d=At(t);return d.path="/styles/v1"+d.path,this._makeAPIURL(d,this._customAccessToken||a)},ln.prototype.normalizeGlyphsURL=function(t,a){if(!Cn(t))return t;var d=At(t);return d.path="/fonts/v1"+d.path,this._makeAPIURL(d,this._customAccessToken||a)},ln.prototype.normalizeSourceURL=function(t,a){if(!Cn(t))return t;var d=At(t);return d.path="/v4/"+d.authority+".json",d.params.push("secure"),this._makeAPIURL(d,this._customAccessToken||a)},ln.prototype.normalizeSpriteURL=function(t,a,d,x){var I=At(t);return Cn(t)?(I.path="/styles/v1"+I.path+"/sprite"+a+d,this._makeAPIURL(I,this._customAccessToken||x)):(I.path+=""+a+d,Bi(I))},ln.prototype.normalizeTileURL=function(t,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!Cn(t))return t;var d=At(t);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ht.devicePixelRatio>=2||a===512?"@2x":"")+(St.supported?".webp":"$1")),d.path=d.path.replace(/^.+\/v4\//,"/"),d.path="/v4"+d.path;var x=this._customAccessToken||function(I){for(var M=0,r=I;M<r.length;M+=1){var i=r[M].match(/^access_token=(.*)$/);if(i)return i[1]}return null}(d.params)||It.ACCESS_TOKEN;return It.REQUIRE_ACCESS_TOKEN&&x&&this._skuToken&&d.params.push("sku="+this._skuToken),this._makeAPIURL(d,x)},ln.prototype.canonicalizeTileURL=function(t,a){var d=At(t);if(!d.path.match(/(^\/v4\/)/)||!d.path.match(/\.[\w]+$/))return t;var x="mapbox://tiles/";x+=d.path.replace("/v4/","");var I=d.params;return a&&(I=I.filter(function(M){return!M.match(/^access_token=/)})),I.length&&(x+="?"+I.join("&")),x},ln.prototype.canonicalizeTileset=function(t,a){for(var d=!!a&&Cn(a),x=[],I=0,M=t.tiles||[];I<M.length;I+=1){var r=M[I];Nr(r)?x.push(this.canonicalizeTileURL(r,d)):x.push(r)}return x},ln.prototype._makeAPIURL=function(t,a){var d="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",x=At(It.API_URL);if(t.protocol=x.protocol,t.authority=x.authority,t.protocol==="http"){var I=t.params.indexOf("secure");I>=0&&t.params.splice(I,1)}if(x.path!=="/"&&(t.path=""+x.path+t.path),!It.REQUIRE_ACCESS_TOKEN)return Bi(t);if(!(a=a||It.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+d);if(a[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+d);return t.params=t.params.filter(function(M){return M.indexOf("access_token")===-1}),t.params.push("access_token="+a),Bi(t)};var Zn=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Nr(t){return Zn.test(t)}var Kr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function At(t){var a=t.match(Kr);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function Bi(t){var a=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+a}function Nn(t){if(!t)return null;var a=t.split(".");if(!a||a.length!==3)return null;try{return JSON.parse(decodeURIComponent(O.atob(a[1]).split("").map(function(d){return"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var rn=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};rn.prototype.getStorageKey=function(t){var a,d=Nn(It.ACCESS_TOKEN);return a=d&&d.u?O.btoa(encodeURIComponent(d.u).replace(/%([0-9A-F]{2})/g,function(x,I){return String.fromCharCode(Number("0x"+I))})):It.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+a:"mapbox.eventData:"+a},rn.prototype.fetchEventData=function(){var t=Pt("localStorage"),a=this.getStorageKey(),d=this.getStorageKey("uuid");if(t)try{var x=O.localStorage.getItem(a);x&&(this.eventData=JSON.parse(x));var I=O.localStorage.getItem(d);I&&(this.anonId=I)}catch{qe("Unable to read from LocalStorage")}},rn.prototype.saveEventData=function(){var t=Pt("localStorage"),a=this.getStorageKey(),d=this.getStorageKey("uuid");if(t)try{O.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&O.localStorage.setItem(a,JSON.stringify(this.eventData))}catch{qe("Unable to write to LocalStorage")}},rn.prototype.processRequests=function(t){},rn.prototype.postEvent=function(t,a,d,x){var I=this;if(It.EVENTS_URL){var M=At(It.EVENTS_URL);M.params.push("access_token="+(x||It.ACCESS_TOKEN||""));var r={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:zi,userId:this.anonId},i=a?se(r,a):r,u={url:Bi(M),headers:{"Content-Type":"text/plain"},body:JSON.stringify([i])};this.pendingRequest=xr(u,function(m){I.pendingRequest=null,d(m),I.saveEventData(),I.processRequests(x)})}},rn.prototype.queueRequest=function(t,a){this.queue.push(t),this.processRequests(a)};var Jn,Ln,zt=function(t){function a(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.postMapLoadEvent=function(d,x,I,M){this.skuToken=I,(It.EVENTS_URL&&M||It.ACCESS_TOKEN&&Array.isArray(d)&&d.some(function(r){return Cn(r)||Nr(r)}))&&this.queueRequest({id:x,timestamp:Date.now()},M)},a.prototype.processRequests=function(d){var x=this;if(!this.pendingRequest&&this.queue.length!==0){var I=this.queue.shift(),M=I.id,r=I.timestamp;M&&this.success[M]||(this.anonId||this.fetchEventData(),He(this.anonId)||(this.anonId=Ue()),this.postEvent(r,{skuToken:this.skuToken},function(i){i||M&&(x.success[M]=!0)},d))}},a}(rn),Oi=new(function(t){function a(d){t.call(this,"appUserTurnstile"),this._customAccessToken=d}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.postTurnstileEvent=function(d,x){It.EVENTS_URL&&It.ACCESS_TOKEN&&Array.isArray(d)&&d.some(function(I){return Cn(I)||Nr(I)})&&this.queueRequest(Date.now(),x)},a.prototype.processRequests=function(d){var x=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var I=Nn(It.ACCESS_TOKEN),M=I?I.u:It.ACCESS_TOKEN,r=M!==this.eventData.tokenU;He(this.anonId)||(this.anonId=Ue(),r=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var u=new Date(this.eventData.lastSuccess),m=new Date(i),b=(i-this.eventData.lastSuccess)/864e5;r=r||b>=1||b<-1||u.getDate()!==m.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},function(E){E||(x.eventData.lastSuccess=i,x.eventData.tokenU=M)},d)}},a}(rn)),Ze=Oi.postTurnstileEvent.bind(Oi),Bt=new zt,Ki=Bt.postMapLoadEvent.bind(Bt),Vn=500,Wn=50;function _o(){O.caches&&!Jn&&(Jn=O.caches.open("mapbox-tiles"))}function vo(t){var a=t.indexOf("?");return a<0?t:t.slice(0,a)}var aa,Ar=1/0;function yi(){return aa==null&&(aa=O.OffscreenCanvas&&new O.OffscreenCanvas(1,1).getContext("2d")&&typeof O.createImageBitmap=="function"),aa}var On={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(On);var xn=function(t){function a(d,x,I){x===401&&Nr(I)&&(d+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,d),this.status=x,this.url=I,this.name=this.constructor.name,this.message=d}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},a}(Error),ro=Et()?function(){return self.worker&&self.worker.referrer}:function(){return(O.location.protocol==="blob:"?O.parent:O).location.href},co,dn,sa=function(t,a){if(!(/^file:/.test(d=t.url)||/^file:/.test(ro())&&!/^\w+:/.test(d))){if(O.fetch&&O.Request&&O.AbortController&&O.Request.prototype.hasOwnProperty("signal"))return function(x,I){var M,r=new O.AbortController,i=new O.Request(x.url,{method:x.method||"GET",body:x.body,credentials:x.credentials,headers:x.headers,referrer:ro(),signal:r.signal}),u=!1,m=!1,b=(M=i.url).indexOf("sku=")>0&&Nr(M);x.type==="json"&&i.headers.set("Accept","application/json");var E=function(z,U,V){if(!m){if(z&&z.message!=="SecurityError"&&qe(z),U&&V)return T(U);var G=Date.now();O.fetch(i).then(function(q){if(q.ok){var K=b?q.clone():null;return T(q,K,G)}return I(new xn(q.statusText,q.status,x.url))}).catch(function(q){q.code!==20&&I(new Error(q.message))})}},T=function(z,U,V){(x.type==="arrayBuffer"?z.arrayBuffer():x.type==="json"?z.json():z.text()).then(function(G){m||(U&&V&&function(q,K,$){if(_o(),Jn){var te={status:K.status,statusText:K.statusText,headers:new O.Headers};K.headers.forEach(function(_e,Oe){return te.headers.set(Oe,_e)});var de=Gt(K.headers.get("Cache-Control")||"");de["no-store"]||(de["max-age"]&&te.headers.set("Expires",new Date($+1e3*de["max-age"]).toUTCString()),new Date(te.headers.get("Expires")).getTime()-$<42e4||function(_e,Oe){if(Ln===void 0)try{new Response(new ReadableStream),Ln=!0}catch{Ln=!1}Ln?Oe(_e.body):_e.blob().then(Oe)}(K,function(_e){var Oe=new O.Response(_e,te);_o(),Jn&&Jn.then(function(Ye){return Ye.put(vo(q.url),Oe)}).catch(function(Ye){return qe(Ye.message)})}))}}(i,U,V),u=!0,I(null,G,z.headers.get("Cache-Control"),z.headers.get("Expires")))}).catch(function(G){m||I(new Error(G.message))})};return b?function(z,U){if(_o(),!Jn)return U(null);var V=vo(z.url);Jn.then(function(G){G.match(V).then(function(q){var K=function($){if(!$)return!1;var te=new Date($.headers.get("Expires")||0),de=Gt($.headers.get("Cache-Control")||"");return te>Date.now()&&!de["no-cache"]}(q);G.delete(V),K&&G.put(V,q.clone()),U(null,q,K)}).catch(U)}).catch(U)}(i,E):E(null,null),{cancel:function(){m=!0,u||r.abort()}}}(t,a);if(Et()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,a,void 0,!0)}var d;return function(x,I){var M=new O.XMLHttpRequest;for(var r in M.open(x.method||"GET",x.url,!0),x.type==="arrayBuffer"&&(M.responseType="arraybuffer"),x.headers)M.setRequestHeader(r,x.headers[r]);return x.type==="json"&&(M.responseType="text",M.setRequestHeader("Accept","application/json")),M.withCredentials=x.credentials==="include",M.onerror=function(){I(new Error(M.statusText))},M.onload=function(){if((M.status>=200&&M.status<300||M.status===0)&&M.response!==null){var i=M.response;if(x.type==="json")try{i=JSON.parse(M.response)}catch(u){return I(u)}I(null,i,M.getResponseHeader("Cache-Control"),M.getResponseHeader("Expires"))}else I(new xn(M.statusText,M.status,x.url))},M.send(x.body),{cancel:function(){return M.abort()}}}(t,a)},Io=function(t,a){return sa(se(t,{type:"arrayBuffer"}),a)},xr=function(t,a){return sa(se(t,{method:"POST"}),a)},ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";co=[],dn=0;var ue=function(t,a){if(St.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),dn>=It.MAX_PARALLEL_IMAGE_REQUESTS){var d={requestParameters:t,callback:a,cancelled:!1,cancel:function(){this.cancelled=!0}};return co.push(d),d}dn++;var x=!1,I=function(){if(!x)for(x=!0,dn--;co.length&&dn<It.MAX_PARALLEL_IMAGE_REQUESTS;){var r=co.shift();r.cancelled||(r.cancel=ue(r.requestParameters,r.callback).cancel)}},M=Io(t,function(r,i,u,m){I(),r?a(r):i&&(yi()?function(b,E){var T=new O.Blob([new Uint8Array(b)],{type:"image/png"});O.createImageBitmap(T).then(function(z){E(null,z)}).catch(function(z){E(new Error("Could not load image because of "+z.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(i,a):function(b,E,T,z){var U=new O.Image,V=O.URL;U.onload=function(){E(null,U),V.revokeObjectURL(U.src),U.onload=null,O.requestAnimationFrame(function(){U.src=ne})},U.onerror=function(){return E(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var G=new O.Blob([new Uint8Array(b)],{type:"image/png"});U.cacheControl=T,U.expires=z,U.src=b.byteLength?V.createObjectURL(G):ne}(i,a,u,m))});return{cancel:function(){M.cancel(),I()}}};function pe(t,a,d){d[t]&&d[t].indexOf(a)!==-1||(d[t]=d[t]||[],d[t].push(a))}function Se(t,a,d){if(d&&d[t]){var x=d[t].indexOf(a);x!==-1&&d[t].splice(x,1)}}var ze=function(t,a){a===void 0&&(a={}),se(this,a),this.type=t},$e=function(t){function a(d,x){x===void 0&&(x={}),t.call(this,"error",se({error:d},x))}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a}(ze),tt=function(){};tt.prototype.on=function(t,a){return this._listeners=this._listeners||{},pe(t,a,this._listeners),this},tt.prototype.off=function(t,a){return Se(t,a,this._listeners),Se(t,a,this._oneTimeListeners),this},tt.prototype.once=function(t,a){return this._oneTimeListeners=this._oneTimeListeners||{},pe(t,a,this._oneTimeListeners),this},tt.prototype.fire=function(t,a){typeof t=="string"&&(t=new ze(t,a||{}));var d=t.type;if(this.listens(d)){t.target=this;for(var x=0,I=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];x<I.length;x+=1)I[x].call(this,t);for(var M=0,r=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];M<r.length;M+=1){var i=r[M];Se(d,i,this._oneTimeListeners),i.call(this,t)}var u=this._eventedParent;u&&(se(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof $e&&console.error(t.error);return this},tt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},tt.prototype.setEventedParent=function(t,a){return this._eventedParent=t,this._eventedParentData=a,this};var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ne=function(t,a,d,x){this.message=(t?t+": ":"")+d,x&&(this.identifier=x),a!=null&&a.__line__&&(this.line=a.__line__)};function mt(t){var a=t.value;return a?[new Ne(t.key,a,"constants have been deprecated as of v8")]:[]}function ce(t){for(var a=[],d=arguments.length-1;d-- >0;)a[d]=arguments[d+1];for(var x=0,I=a;x<I.length;x+=1){var M=I[x];for(var r in M)t[r]=M[r]}return t}function W(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function X(t){if(Array.isArray(t))return t.map(X);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var a={};for(var d in t)a[d]=X(t[d]);return a}return W(t)}var le=function(t){function a(d,x){t.call(this,x),this.message=x,this.key=d}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a}(Error),me=function(t,a){a===void 0&&(a=[]),this.parent=t,this.bindings={};for(var d=0,x=a;d<x.length;d+=1){var I=x[d];this.bindings[I[0]]=I[1]}};me.prototype.concat=function(t){return new me(this,t)},me.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},me.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Te={kind:"null"},xe={kind:"number"},Le={kind:"string"},Me={kind:"boolean"},Pe={kind:"color"},yt={kind:"object"},st={kind:"value"},_t={kind:"collator"},si={kind:"formatted"},De={kind:"resolvedImage"};function Yt(t,a){return{kind:"array",itemType:t,N:a}}function hi(t){if(t.kind==="array"){var a=hi(t.itemType);return typeof t.N=="number"?"array<"+a+", "+t.N+">":t.itemType.kind==="value"?"array":"array<"+a+">"}return t.kind}var kn=[Te,xe,Le,Me,Pe,si,yt,Yt(st),De];function Wi(t,a){if(a.kind==="error")return null;if(t.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!Wi(t.itemType,a.itemType))&&(typeof t.N!="number"||t.N===a.N))return null}else{if(t.kind===a.kind)return null;if(t.kind==="value"){for(var d=0,x=kn;d<x.length;d+=1)if(!Wi(x[d],a))return null}}return"Expected "+hi(t)+" but found "+hi(a)+" instead."}function nn(t,a){return a.some(function(d){return d.kind===t.kind})}function Fi(t,a){return a.some(function(d){return d==="null"?t===null:d==="array"?Array.isArray(t):d==="object"?t&&!Array.isArray(t)&&typeof t=="object":d===typeof t})}var Ii=h(function(t,a){var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function x(i){return(i=Math.round(i))<0?0:i>255?255:i}function I(i){return x(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function M(i){return(u=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:u>1?1:u;var u}function r(i,u,m){return m<0?m+=1:m>1&&(m-=1),6*m<1?i+(u-i)*m*6:2*m<1?u:3*m<2?i+(u-i)*(2/3-m)*6:i}try{a.parseCSSColor=function(i){var u,m=i.replace(/ /g,"").toLowerCase();if(m in d)return d[m].slice();if(m[0]==="#")return m.length===4?(u=parseInt(m.substr(1),16))>=0&&u<=4095?[(3840&u)>>4|(3840&u)>>8,240&u|(240&u)>>4,15&u|(15&u)<<4,1]:null:m.length===7&&(u=parseInt(m.substr(1),16))>=0&&u<=16777215?[(16711680&u)>>16,(65280&u)>>8,255&u,1]:null;var b=m.indexOf("("),E=m.indexOf(")");if(b!==-1&&E+1===m.length){var T=m.substr(0,b),z=m.substr(b+1,E-(b+1)).split(","),U=1;switch(T){case"rgba":if(z.length!==4)return null;U=M(z.pop());case"rgb":return z.length!==3?null:[I(z[0]),I(z[1]),I(z[2]),U];case"hsla":if(z.length!==4)return null;U=M(z.pop());case"hsl":if(z.length!==3)return null;var V=(parseFloat(z[0])%360+360)%360/360,G=M(z[1]),q=M(z[2]),K=q<=.5?q*(G+1):q+G-q*G,$=2*q-K;return[x(255*r($,K,V+1/3)),x(255*r($,K,V)),x(255*r($,K,V-1/3)),U];default:return null}}return null}}catch{}}).parseCSSColor,hn=function(t,a,d,x){x===void 0&&(x=1),this.r=t,this.g=a,this.b=d,this.a=x};hn.parse=function(t){if(t){if(t instanceof hn)return t;if(typeof t=="string"){var a=Ii(t);if(a)return new hn(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3])}}},hn.prototype.toString=function(){var t=this.toArray(),a=t[1],d=t[2],x=t[3];return"rgba("+Math.round(t[0])+","+Math.round(a)+","+Math.round(d)+","+x+")"},hn.prototype.toArray=function(){var t=this.a;return t===0?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},hn.black=new hn(0,0,0,1),hn.white=new hn(1,1,1,1),hn.transparent=new hn(0,0,0,0),hn.red=new hn(1,0,0,1);var cr=function(t,a,d){this.sensitivity=t?a?"variant":"case":a?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};cr.prototype.compare=function(t,a){return this.collator.compare(t,a)},cr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ho=function(t,a,d,x,I){this.text=t,this.image=a,this.scale=d,this.fontStack=x,this.textColor=I},pr=function(t){this.sections=t};pr.fromString=function(t){return new pr([new ho(t,null,null,null,null)])},pr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(t){return t.text.length!==0||t.image&&t.image.name.length!==0})},pr.factory=function(t){return t instanceof pr?t:pr.fromString(t)},pr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(t){return t.text}).join("")},pr.prototype.serialize=function(){for(var t=["format"],a=0,d=this.sections;a<d.length;a+=1){var x=d[a];if(x.image)t.push(["image",x.image.name]);else{t.push(x.text);var I={};x.fontStack&&(I["text-font"]=["literal",x.fontStack.split(",")]),x.scale&&(I["font-scale"]=x.scale),x.textColor&&(I["text-color"]=["rgba"].concat(x.textColor.toArray())),t.push(I)}}return t};var Zo=function(t){this.name=t.name,this.available=t.available};function iu(t,a,d,x){return typeof t=="number"&&t>=0&&t<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof d=="number"&&d>=0&&d<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:"Invalid rgba value ["+[t,a,d,x].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof x=="number"?[t,a,d,x]:[t,a,d]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Cr(t){if(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||t instanceof hn||t instanceof cr||t instanceof pr||t instanceof Zo)return!0;if(Array.isArray(t)){for(var a=0,d=t;a<d.length;a+=1)if(!Cr(d[a]))return!1;return!0}if(typeof t=="object"){for(var x in t)if(!Cr(t[x]))return!1;return!0}return!1}function oo(t){if(t===null)return Te;if(typeof t=="string")return Le;if(typeof t=="boolean")return Me;if(typeof t=="number")return xe;if(t instanceof hn)return Pe;if(t instanceof cr)return _t;if(t instanceof pr)return si;if(t instanceof Zo)return De;if(Array.isArray(t)){for(var a,d=t.length,x=0,I=t;x<I.length;x+=1){var M=oo(I[x]);if(a){if(a===M)continue;a=st;break}a=M}return Yt(a||st,d)}return yt}function al(t){var a=typeof t;return t===null?"":a==="string"||a==="number"||a==="boolean"?String(t):t instanceof hn||t instanceof pr||t instanceof Zo?t.toString():JSON.stringify(t)}Zo.prototype.toString=function(){return this.name},Zo.fromString=function(t){return t?new Zo({name:t,available:!1}):null},Zo.prototype.serialize=function(){return["image",this.name]};var Qo=function(t,a){this.type=t,this.value=a};Qo.parse=function(t,a){if(t.length!==2)return a.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!Cr(t[1]))return a.error("invalid value");var d=t[1],x=oo(d),I=a.expectedType;return x.kind!=="array"||x.N!==0||!I||I.kind!=="array"||typeof I.N=="number"&&I.N!==0||(x=I),new Qo(x,d)},Qo.prototype.evaluate=function(){return this.value},Qo.prototype.eachChild=function(){},Qo.prototype.outputDefined=function(){return!0},Qo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof hn?["rgba"].concat(this.value.toArray()):this.value instanceof pr?this.value.serialize():this.value};var bo=function(t){this.name="ExpressionEvaluationError",this.message=t};bo.prototype.toJSON=function(){return this.message};var Ma={string:Le,number:xe,boolean:Me,object:yt},Br=function(t,a){this.type=t,this.args=a};Br.parse=function(t,a){if(t.length<2)return a.error("Expected at least one argument.");var d,x=1,I=t[0];if(I==="array"){var M,r;if(t.length>2){var i=t[1];if(typeof i!="string"||!(i in Ma)||i==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);M=Ma[i],x++}else M=st;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return a.error('The length argument to "array" must be a positive integer literal',2);r=t[2],x++}d=Yt(M,r)}else d=Ma[I];for(var u=[];x<t.length;x++){var m=a.parse(t[x],x,st);if(!m)return null;u.push(m)}return new Br(d,u)},Br.prototype.evaluate=function(t){for(var a=0;a<this.args.length;a++){var d=this.args[a].evaluate(t);if(!Wi(this.type,oo(d)))return d;if(a===this.args.length-1)throw new bo("Expected value to be of type "+hi(this.type)+", but found "+hi(oo(d))+" instead.")}return null},Br.prototype.eachChild=function(t){this.args.forEach(t)},Br.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Br.prototype.serialize=function(){var t=this.type,a=[t.kind];if(t.kind==="array"){var d=t.itemType;if(d.kind==="string"||d.kind==="number"||d.kind==="boolean"){a.push(d.kind);var x=t.N;(typeof x=="number"||this.args.length>1)&&a.push(x)}}return a.concat(this.args.map(function(I){return I.serialize()}))};var La=function(t){this.type=si,this.sections=t};La.parse=function(t,a){if(t.length<2)return a.error("Expected at least one argument.");var d=t[1];if(!Array.isArray(d)&&typeof d=="object")return a.error("First argument must be an image or text section.");for(var x=[],I=!1,M=1;M<=t.length-1;++M){var r=t[M];if(I&&typeof r=="object"&&!Array.isArray(r)){I=!1;var i=null;if(r["font-scale"]&&!(i=a.parse(r["font-scale"],1,xe)))return null;var u=null;if(r["text-font"]&&!(u=a.parse(r["text-font"],1,Yt(Le))))return null;var m=null;if(r["text-color"]&&!(m=a.parse(r["text-color"],1,Pe)))return null;var b=x[x.length-1];b.scale=i,b.font=u,b.textColor=m}else{var E=a.parse(t[M],1,st);if(!E)return null;var T=E.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");I=!0,x.push({content:E,scale:null,font:null,textColor:null})}}return new La(x)},La.prototype.evaluate=function(t){return new pr(this.sections.map(function(a){var d=a.content.evaluate(t);return oo(d)===De?new ho("",d,null,null,null):new ho(al(d),null,a.scale?a.scale.evaluate(t):null,a.font?a.font.evaluate(t).join(","):null,a.textColor?a.textColor.evaluate(t):null)}))},La.prototype.eachChild=function(t){for(var a=0,d=this.sections;a<d.length;a+=1){var x=d[a];t(x.content),x.scale&&t(x.scale),x.font&&t(x.font),x.textColor&&t(x.textColor)}},La.prototype.outputDefined=function(){return!1},La.prototype.serialize=function(){for(var t=["format"],a=0,d=this.sections;a<d.length;a+=1){var x=d[a];t.push(x.content.serialize());var I={};x.scale&&(I["font-scale"]=x.scale.serialize()),x.font&&(I["text-font"]=x.font.serialize()),x.textColor&&(I["text-color"]=x.textColor.serialize()),t.push(I)}return t};var la=function(t){this.type=De,this.input=t};la.parse=function(t,a){if(t.length!==2)return a.error("Expected two arguments.");var d=a.parse(t[1],1,Le);return d?new la(d):a.error("No image name provided.")},la.prototype.evaluate=function(t){var a=this.input.evaluate(t),d=Zo.fromString(a);return d&&t.availableImages&&(d.available=t.availableImages.indexOf(a)>-1),d},la.prototype.eachChild=function(t){t(this.input)},la.prototype.outputDefined=function(){return!1},la.prototype.serialize=function(){return["image",this.input.serialize()]};var _c={"to-boolean":Me,"to-color":Pe,"to-number":xe,"to-string":Le},Pa=function(t,a){this.type=t,this.args=a};Pa.parse=function(t,a){if(t.length<2)return a.error("Expected at least one argument.");var d=t[0];if((d==="to-boolean"||d==="to-string")&&t.length!==2)return a.error("Expected one argument.");for(var x=_c[d],I=[],M=1;M<t.length;M++){var r=a.parse(t[M],M,st);if(!r)return null;I.push(r)}return new Pa(x,I)},Pa.prototype.evaluate=function(t){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(t));if(this.type.kind==="color"){for(var a,d,x=0,I=this.args;x<I.length;x+=1){if(d=null,(a=I[x].evaluate(t))instanceof hn)return a;if(typeof a=="string"){var M=t.parseColor(a);if(M)return M}else if(Array.isArray(a)&&!(d=a.length<3||a.length>4?"Invalid rbga value "+JSON.stringify(a)+": expected an array containing either three or four numeric values.":iu(a[0],a[1],a[2],a[3])))return new hn(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new bo(d||"Could not parse color from value '"+(typeof a=="string"?a:String(JSON.stringify(a)))+"'")}if(this.type.kind==="number"){for(var r=null,i=0,u=this.args;i<u.length;i+=1){if((r=u[i].evaluate(t))===null)return 0;var m=Number(r);if(!isNaN(m))return m}throw new bo("Could not convert "+JSON.stringify(r)+" to number.")}return this.type.kind==="formatted"?pr.fromString(al(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?Zo.fromString(al(this.args[0].evaluate(t))):al(this.args[0].evaluate(t))},Pa.prototype.eachChild=function(t){this.args.forEach(t)},Pa.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Pa.prototype.serialize=function(){if(this.type.kind==="formatted")return new La([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new la(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(a){t.push(a.serialize())}),t};var sl=["Unknown","Point","LineString","Polygon"],Va=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Va.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Va.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?sl[this.feature.type]:this.feature.type:null},Va.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Va.prototype.canonicalID=function(){return this.canonical},Va.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Va.prototype.parseColor=function(t){var a=this._parseColorCache[t];return a||(a=this._parseColorCache[t]=hn.parse(t)),a};var ao=function(t,a,d,x){this.name=t,this.type=a,this._evaluate=d,this.args=x};ao.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ao.prototype.eachChild=function(t){this.args.forEach(t)},ao.prototype.outputDefined=function(){return!1},ao.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},ao.parse=function(t,a){var d,x=t[0],I=ao.definitions[x];if(!I)return a.error('Unknown expression "'+x+'". If you wanted a literal array, use ["literal", [...]].',0);for(var M=Array.isArray(I)?I[0]:I.type,r=Array.isArray(I)?[[I[1],I[2]]]:I.overloads,i=r.filter(function(vt){var ot=vt[0];return!Array.isArray(ot)||ot.length===t.length-1}),u=null,m=0,b=i;m<b.length;m+=1){var E=b[m],T=E[0],z=E[1];u=new Vs(a.registry,a.path,null,a.scope);for(var U=[],V=!1,G=1;G<t.length;G++){var q=t[G],K=Array.isArray(T)?T[G-1]:T.type,$=u.parse(q,1+U.length,K);if(!$){V=!0;break}U.push($)}if(!V)if(Array.isArray(T)&&T.length!==U.length)u.error("Expected "+T.length+" arguments, but found "+U.length+" instead.");else{for(var te=0;te<U.length;te++){var de=Array.isArray(T)?T[te]:T.type,_e=U[te];u.concat(te+1).checkSubtype(de,_e.type)}if(u.errors.length===0)return new ao(x,M,z,U)}}if(i.length===1)(d=a.errors).push.apply(d,u.errors);else{for(var Oe=(i.length?i:r).map(function(vt){var ot;return ot=vt[0],Array.isArray(ot)?"("+ot.map(hi).join(", ")+")":"("+hi(ot.type)+"...)"}).join(" | "),Ye=[],it=1;it<t.length;it++){var nt=a.parse(t[it],1+Ye.length);if(!nt)return null;Ye.push(hi(nt.type))}a.error("Expected arguments of type "+Oe+", but found ("+Ye.join(", ")+") instead.")}return null},ao.register=function(t,a){for(var d in ao.definitions=a,a)t[d]=ao};var ma=function(t,a,d){this.type=_t,this.locale=d,this.caseSensitive=t,this.diacriticSensitive=a};function ko(t,a){t[0]=Math.min(t[0],a[0]),t[1]=Math.min(t[1],a[1]),t[2]=Math.max(t[2],a[0]),t[3]=Math.max(t[3],a[1])}function rs(t,a){return!(t[0]<=a[0]||t[2]>=a[2]||t[1]<=a[1]||t[3]>=a[3])}function nu(t,a){var d=(180+t[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,I=Math.pow(2,a.z);return[Math.round(d*I*8192),Math.round(x*I*8192)]}function Vu(t,a,d){return a[1]>t[1]!=d[1]>t[1]&&t[0]<(d[0]-a[0])*(t[1]-a[1])/(d[1]-a[1])+a[0]}function ll(t,a){for(var d,x,I,M,r,i,u,m=!1,b=0,E=a.length;b<E;b++)for(var T=a[b],z=0,U=T.length;z<U-1;z++){if((M=(d=t)[0]-(x=T[z])[0])*(u=d[1]-(I=T[z+1])[1])-(i=d[0]-I[0])*(r=d[1]-x[1])==0&&M*i<=0&&r*u<=0)return!1;Vu(t,T[z],T[z+1])&&(m=!m)}return m}function So(t,a){for(var d=0;d<a.length;d++)if(ll(t,a[d]))return!0;return!1}function Cl(t,a,d,x){var I=x[0]-d[0],M=x[1]-d[1],r=(t[0]-d[0])*M-I*(t[1]-d[1]),i=(a[0]-d[0])*M-I*(a[1]-d[1]);return r>0&&i<0||r<0&&i>0}function vc(t,a,d){for(var x=0,I=d;x<I.length;x+=1)for(var M=I[x],r=0;r<M.length-1;++r)if((E=[(b=M[r+1])[0]-(m=M[r])[0],b[1]-m[1]])[0]*(T=[(u=a)[0]-(i=t)[0],u[1]-i[1]])[1]-E[1]*T[0]!=0&&Cl(i,u,m,b)&&Cl(m,b,i,u))return!0;var i,u,m,b,E,T;return!1}function bc(t,a){for(var d=0;d<t.length;++d)if(!ll(t[d],a))return!1;for(var x=0;x<t.length-1;++x)if(vc(t[x],t[x+1],a))return!1;return!0}function xc(t,a){for(var d=0;d<a.length;d++)if(bc(t,a[d]))return!0;return!1}function bs(t,a,d){for(var x=[],I=0;I<t.length;I++){for(var M=[],r=0;r<t[I].length;r++){var i=nu(t[I][r],d);ko(a,i),M.push(i)}x.push(M)}return x}function ru(t,a,d){for(var x=[],I=0;I<t.length;I++){var M=bs(t[I],a,d);x.push(M)}return x}function ou(t,a,d,x){if(t[0]<d[0]||t[0]>d[2]){var I=.5*x,M=t[0]-d[0]>I?-x:d[0]-t[0]>I?x:0;M===0&&(M=t[0]-d[2]>I?-x:d[2]-t[0]>I?x:0),t[0]+=M}ko(a,t)}function ih(t,a,d,x){for(var I=8192*Math.pow(2,x.z),M=[8192*x.x,8192*x.y],r=[],i=0,u=t;i<u.length;i+=1)for(var m=0,b=u[i];m<b.length;m+=1){var E=b[m],T=[E.x+M[0],E.y+M[1]];ou(T,a,d,I),r.push(T)}return r}function kl(t,a,d,x){for(var I,M=8192*Math.pow(2,x.z),r=[8192*x.x,8192*x.y],i=[],u=0,m=t;u<m.length;u+=1){for(var b=[],E=0,T=m[u];E<T.length;E+=1){var z=T[E],U=[z.x+r[0],z.y+r[1]];ko(a,U),b.push(U)}i.push(b)}if(a[2]-a[0]<=M/2){(I=a)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(var V=0,G=i;V<G.length;V+=1)for(var q=0,K=G[V];q<K.length;q+=1)ou(K[q],a,d,M)}return i}ma.parse=function(t,a){if(t.length!==2)return a.error("Expected one argument.");var d=t[1];if(typeof d!="object"||Array.isArray(d))return a.error("Collator options argument must be an object.");var x=a.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Me);if(!x)return null;var I=a.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Me);if(!I)return null;var M=null;return d.locale&&!(M=a.parse(d.locale,1,Le))?null:new ma(x,I,M)},ma.prototype.evaluate=function(t){return new cr(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ma.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ma.prototype.outputDefined=function(){return!1},ma.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var ga=function(t,a){this.type=Me,this.geojson=t,this.geometries=a};function os(t){if(t instanceof ao&&(t.name==="get"&&t.args.length===1||t.name==="feature-state"||t.name==="has"&&t.args.length===1||t.name==="properties"||t.name==="geometry-type"||t.name==="id"||/^filter-/.test(t.name))||t instanceof ga)return!1;var a=!0;return t.eachChild(function(d){a&&!os(d)&&(a=!1)}),a}function as(t){if(t instanceof ao&&t.name==="feature-state")return!1;var a=!0;return t.eachChild(function(d){a&&!as(d)&&(a=!1)}),a}function Ns(t,a){if(t instanceof ao&&a.indexOf(t.name)>=0)return!1;var d=!0;return t.eachChild(function(x){d&&!Ns(x,a)&&(d=!1)}),d}ga.parse=function(t,a){if(t.length!==2)return a.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(Cr(t[1])){var d=t[1];if(d.type==="FeatureCollection")for(var x=0;x<d.features.length;++x){var I=d.features[x].geometry.type;if(I==="Polygon"||I==="MultiPolygon")return new ga(d,d.features[x].geometry)}else if(d.type==="Feature"){var M=d.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new ga(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new ga(d,d)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ga.prototype.evaluate=function(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(a,d){var x=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],M=a.canonicalID();if(d.type==="Polygon"){var r=bs(d.coordinates,I,M),i=ih(a.geometry(),x,I,M);if(!rs(x,I))return!1;for(var u=0,m=i;u<m.length;u+=1)if(!ll(m[u],r))return!1}if(d.type==="MultiPolygon"){var b=ru(d.coordinates,I,M),E=ih(a.geometry(),x,I,M);if(!rs(x,I))return!1;for(var T=0,z=E;T<z.length;T+=1)if(!So(z[T],b))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(a,d){var x=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],M=a.canonicalID();if(d.type==="Polygon"){var r=bs(d.coordinates,I,M),i=kl(a.geometry(),x,I,M);if(!rs(x,I))return!1;for(var u=0,m=i;u<m.length;u+=1)if(!bc(m[u],r))return!1}if(d.type==="MultiPolygon"){var b=ru(d.coordinates,I,M),E=kl(a.geometry(),x,I,M);if(!rs(x,I))return!1;for(var T=0,z=E;T<z.length;T+=1)if(!xc(z[T],b))return!1}return!0}(t,this.geometries)}return!1},ga.prototype.eachChild=function(){},ga.prototype.outputDefined=function(){return!0},ga.prototype.serialize=function(){return["within",this.geojson]};var ir=function(t,a){this.type=a.type,this.name=t,this.boundExpression=a};ir.parse=function(t,a){if(t.length!==2||typeof t[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");var d=t[1];return a.scope.has(d)?new ir(d,a.scope.get(d)):a.error('Unknown variable "'+d+'". Make sure "'+d+'" has been bound in an enclosing "let" expression before using it.',1)},ir.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},ir.prototype.eachChild=function(){},ir.prototype.outputDefined=function(){return!1},ir.prototype.serialize=function(){return["var",this.name]};var Vs=function(t,a,d,x,I){a===void 0&&(a=[]),x===void 0&&(x=new me),I===void 0&&(I=[]),this.registry=t,this.path=a,this.key=a.map(function(M){return"["+M+"]"}).join(""),this.scope=x,this.errors=I,this.expectedType=d};function js(t,a){for(var d,x=t.length-1,I=0,M=x,r=0;I<=M;)if((d=t[r=Math.floor((I+M)/2)])<=a){if(r===x||a<t[r+1])return r;I=r+1}else{if(!(d>a))throw new bo("Input is not a number.");M=r-1}return 0}Vs.prototype.parse=function(t,a,d,x,I){return I===void 0&&(I={}),a?this.concat(a,d,x)._parse(t,I):this._parse(t,I)},Vs.prototype._parse=function(t,a){function d(m,b,E){return E==="assert"?new Br(b,[m]):E==="coerce"?new Pa(b,[m]):m}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var x=t[0];if(typeof x!="string")return this.error("Expression name must be a string, but found "+typeof x+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var I=this.registry[x];if(I){var M=I.parse(t,this);if(!M)return null;if(this.expectedType){var r=this.expectedType,i=M.type;if(r.kind!=="string"&&r.kind!=="number"&&r.kind!=="boolean"&&r.kind!=="object"&&r.kind!=="array"||i.kind!=="value")if(r.kind!=="color"&&r.kind!=="formatted"&&r.kind!=="resolvedImage"||i.kind!=="value"&&i.kind!=="string"){if(this.checkSubtype(r,i))return null}else M=d(M,r,a.typeAnnotation||"coerce");else M=d(M,r,a.typeAnnotation||"assert")}if(!(M instanceof Qo)&&M.type.kind!=="resolvedImage"&&function m(b){if(b instanceof ir)return m(b.boundExpression);if(b instanceof ao&&b.name==="error"||b instanceof ma||b instanceof ga)return!1;var E=b instanceof Pa||b instanceof Br,T=!0;return b.eachChild(function(z){T=E?T&&m(z):T&&z instanceof Qo}),!!T&&os(b)&&Ns(b,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(M)){var u=new Va;try{M=new Qo(M.type,M.evaluate(u))}catch(m){return this.error(m.message),null}}return M}return this.error('Unknown expression "'+x+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Vs.prototype.concat=function(t,a,d){var x=typeof t=="number"?this.path.concat(t):this.path,I=d?this.scope.concat(d):this.scope;return new Vs(this.registry,x,a||null,I,this.errors)},Vs.prototype.error=function(t){for(var a=[],d=arguments.length-1;d-- >0;)a[d]=arguments[d+1];var x=""+this.key+a.map(function(I){return"["+I+"]"}).join("");this.errors.push(new le(x,t))},Vs.prototype.checkSubtype=function(t,a){var d=Wi(t,a);return d&&this.error(d),d};var Uo=function(t,a,d){this.type=t,this.input=a,this.labels=[],this.outputs=[];for(var x=0,I=d;x<I.length;x+=1){var M=I[x],r=M[1];this.labels.push(M[0]),this.outputs.push(r)}};function so(t,a,d){return t*(1-d)+a*d}Uo.parse=function(t,a){if(t.length-1<4)return a.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");var d=a.parse(t[1],1,xe);if(!d)return null;var x=[],I=null;a.expectedType&&a.expectedType.kind!=="value"&&(I=a.expectedType);for(var M=1;M<t.length;M+=2){var r=M===1?-1/0:t[M],i=t[M+1],u=M,m=M+1;if(typeof r!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(x.length&&x[x.length-1][0]>=r)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var b=a.parse(i,m,I);if(!b)return null;I=I||b.type,x.push([r,b])}return new Uo(I,d,x)},Uo.prototype.evaluate=function(t){var a=this.labels,d=this.outputs;if(a.length===1)return d[0].evaluate(t);var x=this.input.evaluate(t);if(x<=a[0])return d[0].evaluate(t);var I=a.length;return x>=a[I-1]?d[I-1].evaluate(t):d[js(a,x)].evaluate(t)},Uo.prototype.eachChild=function(t){t(this.input);for(var a=0,d=this.outputs;a<d.length;a+=1)t(d[a])},Uo.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},Uo.prototype.serialize=function(){for(var t=["step",this.input.serialize()],a=0;a<this.labels.length;a++)a>0&&t.push(this.labels[a]),t.push(this.outputs[a].serialize());return t};var No=Object.freeze({__proto__:null,number:so,color:function(t,a,d){return new hn(so(t.r,a.r,d),so(t.g,a.g,d),so(t.b,a.b,d),so(t.a,a.a,d))},array:function(t,a,d){return t.map(function(x,I){return so(x,a[I],d)})}}),ju=6/29*3*(6/29),qu=Math.PI/180,Gu=180/Math.PI;function au(t){return t>.008856451679035631?Math.pow(t,1/3):t/ju+4/29}function su(t){return t>6/29?t*t*t:ju*(t-4/29)}function Ml(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function lu(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Hu(t){var a=lu(t.r),d=lu(t.g),x=lu(t.b),I=au((.4124564*a+.3575761*d+.1804375*x)/.95047),M=au((.2126729*a+.7151522*d+.072175*x)/1);return{l:116*M-16,a:500*(I-M),b:200*(M-au((.0193339*a+.119192*d+.9503041*x)/1.08883)),alpha:t.a}}function uu(t){var a=(t.l+16)/116,d=isNaN(t.a)?a:a+t.a/500,x=isNaN(t.b)?a:a-t.b/200;return a=1*su(a),d=.95047*su(d),x=1.08883*su(x),new hn(Ml(3.2404542*d-1.5371385*a-.4985314*x),Ml(-.969266*d+1.8760108*a+.041556*x),Ml(.0556434*d-.2040259*a+1.0572252*x),t.alpha)}function nh(t,a,d){var x=a-t;return t+d*(x>180||x<-180?x-360*Math.round(x/360):x)}var Ll={forward:Hu,reverse:uu,interpolate:function(t,a,d){return{l:so(t.l,a.l,d),a:so(t.a,a.a,d),b:so(t.b,a.b,d),alpha:so(t.alpha,a.alpha,d)}}},ss={forward:function(t){var a=Hu(t),d=a.l,x=a.a,I=a.b,M=Math.atan2(I,x)*Gu;return{h:M<0?M+360:M,c:Math.sqrt(x*x+I*I),l:d,alpha:t.a}},reverse:function(t){var a=t.h*qu,d=t.c;return uu({l:t.l,a:Math.cos(a)*d,b:Math.sin(a)*d,alpha:t.alpha})},interpolate:function(t,a,d){return{h:nh(t.h,a.h,d),c:so(t.c,a.c,d),l:so(t.l,a.l,d),alpha:so(t.alpha,a.alpha,d)}}},rh=Object.freeze({__proto__:null,lab:Ll,hcl:ss}),Vo=function(t,a,d,x,I){this.type=t,this.operator=a,this.interpolation=d,this.input=x,this.labels=[],this.outputs=[];for(var M=0,r=I;M<r.length;M+=1){var i=r[M],u=i[1];this.labels.push(i[0]),this.outputs.push(u)}};function wc(t,a,d,x){var I=x-d,M=t-d;return I===0?0:a===1?M/I:(Math.pow(a,M)-1)/(Math.pow(a,I)-1)}Vo.interpolationFactor=function(t,a,d,x){var I=0;if(t.name==="exponential")I=wc(a,t.base,d,x);else if(t.name==="linear")I=wc(a,1,d,x);else if(t.name==="cubic-bezier"){var M=t.controlPoints;I=new S(M[0],M[1],M[2],M[3]).solve(wc(a,1,d,x))}return I},Vo.parse=function(t,a){var d=t[0],x=t[1],I=t[2],M=t.slice(3);if(!Array.isArray(x)||x.length===0)return a.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){var r=x[1];if(typeof r!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:r}}else{if(x[0]!=="cubic-bezier")return a.error("Unknown interpolation type "+String(x[0]),1,0);var i=x.slice(1);if(i.length!==4||i.some(function(G){return typeof G!="number"||G<0||G>1}))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:i}}if(t.length-1<4)return a.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(!(I=a.parse(I,2,xe)))return null;var u=[],m=null;d==="interpolate-hcl"||d==="interpolate-lab"?m=Pe:a.expectedType&&a.expectedType.kind!=="value"&&(m=a.expectedType);for(var b=0;b<M.length;b+=2){var E=M[b],T=M[b+1],z=b+3,U=b+4;if(typeof E!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(u.length&&u[u.length-1][0]>=E)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',z);var V=a.parse(T,U,m);if(!V)return null;m=m||V.type,u.push([E,V])}return m.kind==="number"||m.kind==="color"||m.kind==="array"&&m.itemType.kind==="number"&&typeof m.N=="number"?new Vo(m,d,x,I,u):a.error("Type "+hi(m)+" is not interpolatable.")},Vo.prototype.evaluate=function(t){var a=this.labels,d=this.outputs;if(a.length===1)return d[0].evaluate(t);var x=this.input.evaluate(t);if(x<=a[0])return d[0].evaluate(t);var I=a.length;if(x>=a[I-1])return d[I-1].evaluate(t);var M=js(a,x),r=Vo.interpolationFactor(this.interpolation,x,a[M],a[M+1]),i=d[M].evaluate(t),u=d[M+1].evaluate(t);return this.operator==="interpolate"?No[this.type.kind.toLowerCase()](i,u,r):this.operator==="interpolate-hcl"?ss.reverse(ss.interpolate(ss.forward(i),ss.forward(u),r)):Ll.reverse(Ll.interpolate(Ll.forward(i),Ll.forward(u),r))},Vo.prototype.eachChild=function(t){t(this.input);for(var a=0,d=this.outputs;a<d.length;a+=1)t(d[a])},Vo.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},Vo.prototype.serialize=function(){var t;t=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var a=[this.operator,t,this.input.serialize()],d=0;d<this.labels.length;d++)a.push(this.labels[d],this.outputs[d].serialize());return a};var qs=function(t,a){this.type=t,this.args=a};qs.parse=function(t,a){if(t.length<2)return a.error("Expectected at least one argument.");var d=null,x=a.expectedType;x&&x.kind!=="value"&&(d=x);for(var I=[],M=0,r=t.slice(1);M<r.length;M+=1){var i=a.parse(r[M],1+I.length,d,void 0,{typeAnnotation:"omit"});if(!i)return null;d=d||i.type,I.push(i)}var u=x&&I.some(function(m){return Wi(x,m.type)});return new qs(u?st:d,I)},qs.prototype.evaluate=function(t){for(var a,d=null,x=0,I=0,M=this.args;I<M.length&&(x++,(d=M[I].evaluate(t))&&d instanceof Zo&&!d.available&&(a||(a=d.name),d=null,x===this.args.length&&(d=a)),d===null);I+=1);return d},qs.prototype.eachChild=function(t){this.args.forEach(t)},qs.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},qs.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(a){t.push(a.serialize())}),t};var Gs=function(t,a){this.type=a.type,this.bindings=[].concat(t),this.result=a};Gs.prototype.evaluate=function(t){return this.result.evaluate(t)},Gs.prototype.eachChild=function(t){for(var a=0,d=this.bindings;a<d.length;a+=1)t(d[a][1]);t(this.result)},Gs.parse=function(t,a){if(t.length<4)return a.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var d=[],x=1;x<t.length-1;x+=2){var I=t[x];if(typeof I!="string")return a.error("Expected string, but found "+typeof I+" instead.",x);if(/[^a-zA-Z0-9_]/.test(I))return a.error("Variable names must contain only alphanumeric characters or '_'.",x);var M=a.parse(t[x+1],x+1);if(!M)return null;d.push([I,M])}var r=a.parse(t[t.length-1],t.length-1,a.expectedType,d);return r?new Gs(d,r):null},Gs.prototype.outputDefined=function(){return this.result.outputDefined()},Gs.prototype.serialize=function(){for(var t=["let"],a=0,d=this.bindings;a<d.length;a+=1){var x=d[a];t.push(x[0],x[1].serialize())}return t.push(this.result.serialize()),t};var ul=function(t,a,d){this.type=t,this.index=a,this.input=d};ul.parse=function(t,a){if(t.length!==3)return a.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var d=a.parse(t[1],1,xe),x=a.parse(t[2],2,Yt(a.expectedType||st));return d&&x?new ul(x.type.itemType,d,x):null},ul.prototype.evaluate=function(t){var a=this.index.evaluate(t),d=this.input.evaluate(t);if(a<0)throw new bo("Array index out of bounds: "+a+" < 0.");if(a>=d.length)throw new bo("Array index out of bounds: "+a+" > "+(d.length-1)+".");if(a!==Math.floor(a))throw new bo("Array index must be an integer, but found "+a+" instead.");return d[a]},ul.prototype.eachChild=function(t){t(this.index),t(this.input)},ul.prototype.outputDefined=function(){return!1},ul.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var xs=function(t,a){this.type=Me,this.needle=t,this.haystack=a};xs.parse=function(t,a){if(t.length!==3)return a.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var d=a.parse(t[1],1,st),x=a.parse(t[2],2,st);return d&&x?nn(d.type,[Me,Le,xe,Te,st])?new xs(d,x):a.error("Expected first argument to be of type boolean, string, number or null, but found "+hi(d.type)+" instead"):null},xs.prototype.evaluate=function(t){var a=this.needle.evaluate(t),d=this.haystack.evaluate(t);if(!d)return!1;if(!Fi(a,["boolean","string","number","null"]))throw new bo("Expected first argument to be of type boolean, string, number or null, but found "+hi(oo(a))+" instead.");if(!Fi(d,["string","array"]))throw new bo("Expected second argument to be of type array or string, but found "+hi(oo(d))+" instead.");return d.indexOf(a)>=0},xs.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},xs.prototype.outputDefined=function(){return!0},xs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ls=function(t,a,d){this.type=xe,this.needle=t,this.haystack=a,this.fromIndex=d};ls.parse=function(t,a){if(t.length<=2||t.length>=5)return a.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var d=a.parse(t[1],1,st),x=a.parse(t[2],2,st);if(!d||!x)return null;if(!nn(d.type,[Me,Le,xe,Te,st]))return a.error("Expected first argument to be of type boolean, string, number or null, but found "+hi(d.type)+" instead");if(t.length===4){var I=a.parse(t[3],3,xe);return I?new ls(d,x,I):null}return new ls(d,x)},ls.prototype.evaluate=function(t){var a=this.needle.evaluate(t),d=this.haystack.evaluate(t);if(!Fi(a,["boolean","string","number","null"]))throw new bo("Expected first argument to be of type boolean, string, number or null, but found "+hi(oo(a))+" instead.");if(!Fi(d,["string","array"]))throw new bo("Expected second argument to be of type array or string, but found "+hi(oo(d))+" instead.");if(this.fromIndex){var x=this.fromIndex.evaluate(t);return d.indexOf(a,x)}return d.indexOf(a)},ls.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},ls.prototype.outputDefined=function(){return!1},ls.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ja=function(t,a,d,x,I,M){this.inputType=t,this.type=a,this.input=d,this.cases=x,this.outputs=I,this.otherwise=M};ja.parse=function(t,a){if(t.length<5)return a.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return a.error("Expected an even number of arguments.");var d,x;a.expectedType&&a.expectedType.kind!=="value"&&(x=a.expectedType);for(var I={},M=[],r=2;r<t.length-1;r+=2){var i=t[r],u=t[r+1];Array.isArray(i)||(i=[i]);var m=a.concat(r);if(i.length===0)return m.error("Expected at least one branch label.");for(var b=0,E=i;b<E.length;b+=1){var T=E[b];if(typeof T!="number"&&typeof T!="string")return m.error("Branch labels must be numbers or strings.");if(typeof T=="number"&&Math.abs(T)>Number.MAX_SAFE_INTEGER)return m.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof T=="number"&&Math.floor(T)!==T)return m.error("Numeric branch labels must be integer values.");if(d){if(m.checkSubtype(d,oo(T)))return null}else d=oo(T);if(I[String(T)]!==void 0)return m.error("Branch labels must be unique.");I[String(T)]=M.length}var z=a.parse(u,r,x);if(!z)return null;x=x||z.type,M.push(z)}var U=a.parse(t[1],1,st);if(!U)return null;var V=a.parse(t[t.length-1],t.length-1,x);return V?U.type.kind!=="value"&&a.concat(1).checkSubtype(d,U.type)?null:new ja(d,x,U,I,M,V):null},ja.prototype.evaluate=function(t){var a=this.input.evaluate(t);return(oo(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(t)},ja.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},ja.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()},ja.prototype.serialize=function(){for(var t=this,a=["match",this.input.serialize()],d=[],x={},I=0,M=Object.keys(this.cases).sort();I<M.length;I+=1){var r=M[I];(E=x[this.cases[r]])===void 0?(x[this.cases[r]]=d.length,d.push([this.cases[r],[r]])):d[E][1].push(r)}for(var i=function(z){return t.inputType.kind==="number"?Number(z):z},u=0,m=d;u<m.length;u+=1){var b=m[u],E=b[0],T=b[1];a.push(T.length===1?i(T[0]):T.map(i)),a.push(this.outputs[outputIndex$1].serialize())}return a.push(this.otherwise.serialize()),a};var Hs=function(t,a,d){this.type=t,this.branches=a,this.otherwise=d};Hs.parse=function(t,a){if(t.length<4)return a.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return a.error("Expected an odd number of arguments.");var d;a.expectedType&&a.expectedType.kind!=="value"&&(d=a.expectedType);for(var x=[],I=1;I<t.length-1;I+=2){var M=a.parse(t[I],I,Me);if(!M)return null;var r=a.parse(t[I+1],I+1,d);if(!r)return null;x.push([M,r]),d=d||r.type}var i=a.parse(t[t.length-1],t.length-1,d);return i?new Hs(d,x,i):null},Hs.prototype.evaluate=function(t){for(var a=0,d=this.branches;a<d.length;a+=1){var x=d[a],I=x[1];if(x[0].evaluate(t))return I.evaluate(t)}return this.otherwise.evaluate(t)},Hs.prototype.eachChild=function(t){for(var a=0,d=this.branches;a<d.length;a+=1){var x=d[a],I=x[1];t(x[0]),t(I)}t(this.otherwise)},Hs.prototype.outputDefined=function(){return this.branches.every(function(t){return t[1].outputDefined()})&&this.otherwise.outputDefined()},Hs.prototype.serialize=function(){var t=["case"];return this.eachChild(function(a){t.push(a.serialize())}),t};var ws=function(t,a,d,x){this.type=t,this.input=a,this.beginIndex=d,this.endIndex=x};function Zu(t,a){return t==="=="||t==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function Zs(t,a,d,x){return x.compare(a,d)===0}function kr(t,a,d){var x=t!=="=="&&t!=="!=";return function(){function I(M,r,i){this.type=Me,this.lhs=M,this.rhs=r,this.collator=i,this.hasUntypedArgument=M.type.kind==="value"||r.type.kind==="value"}return I.parse=function(M,r){if(M.length!==3&&M.length!==4)return r.error("Expected two or three arguments.");var i=M[0],u=r.parse(M[1],1,st);if(!u)return null;if(!Zu(i,u.type))return r.concat(1).error('"'+i+`" comparisons are not supported for type '`+hi(u.type)+"'.");var m=r.parse(M[2],2,st);if(!m)return null;if(!Zu(i,m.type))return r.concat(2).error('"'+i+`" comparisons are not supported for type '`+hi(m.type)+"'.");if(u.type.kind!==m.type.kind&&u.type.kind!=="value"&&m.type.kind!=="value")return r.error("Cannot compare types '"+hi(u.type)+"' and '"+hi(m.type)+"'.");x&&(u.type.kind==="value"&&m.type.kind!=="value"?u=new Br(m.type,[u]):u.type.kind!=="value"&&m.type.kind==="value"&&(m=new Br(u.type,[m])));var b=null;if(M.length===4){if(u.type.kind!=="string"&&m.type.kind!=="string"&&u.type.kind!=="value"&&m.type.kind!=="value")return r.error("Cannot use collator to compare non-string types.");if(!(b=r.parse(M[3],3,_t)))return null}return new I(u,m,b)},I.prototype.evaluate=function(M){var r=this.lhs.evaluate(M),i=this.rhs.evaluate(M);if(x&&this.hasUntypedArgument){var u=oo(r),m=oo(i);if(u.kind!==m.kind||u.kind!=="string"&&u.kind!=="number")throw new bo('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+u.kind+", "+m.kind+") instead.")}if(this.collator&&!x&&this.hasUntypedArgument){var b=oo(r),E=oo(i);if(b.kind!=="string"||E.kind!=="string")return a(M,r,i)}return this.collator?d(M,r,i,this.collator.evaluate(M)):a(M,r,i)},I.prototype.eachChild=function(M){M(this.lhs),M(this.rhs),this.collator&&M(this.collator)},I.prototype.outputDefined=function(){return!0},I.prototype.serialize=function(){var M=[t];return this.eachChild(function(r){M.push(r.serialize())}),M},I}()}ws.parse=function(t,a){if(t.length<=2||t.length>=5)return a.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var d=a.parse(t[1],1,st),x=a.parse(t[2],2,xe);if(!d||!x)return null;if(!nn(d.type,[Yt(st),Le,st]))return a.error("Expected first argument to be of type array or string, but found "+hi(d.type)+" instead");if(t.length===4){var I=a.parse(t[3],3,xe);return I?new ws(d.type,d,x,I):null}return new ws(d.type,d,x)},ws.prototype.evaluate=function(t){var a=this.input.evaluate(t),d=this.beginIndex.evaluate(t);if(!Fi(a,["string","array"]))throw new bo("Expected first argument to be of type array or string, but found "+hi(oo(a))+" instead.");if(this.endIndex){var x=this.endIndex.evaluate(t);return a.slice(d,x)}return a.slice(d)},ws.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},ws.prototype.outputDefined=function(){return!1},ws.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var cl=kr("==",function(t,a,d){return a===d},Zs),Es=kr("!=",function(t,a,d){return a!==d},function(t,a,d,x){return!Zs(0,a,d,x)}),Ec=kr("<",function(t,a,d){return a<d},function(t,a,d,x){return x.compare(a,d)<0}),Wu=kr(">",function(t,a,d){return a>d},function(t,a,d,x){return x.compare(a,d)>0}),Pn=kr("<=",function(t,a,d){return a<=d},function(t,a,d,x){return x.compare(a,d)<=0}),cu=kr(">=",function(t,a,d){return a>=d},function(t,a,d,x){return x.compare(a,d)>=0}),lr=function(t,a,d,x,I){this.type=Le,this.number=t,this.locale=a,this.currency=d,this.minFractionDigits=x,this.maxFractionDigits=I};lr.parse=function(t,a){if(t.length!==3)return a.error("Expected two arguments.");var d=a.parse(t[1],1,xe);if(!d)return null;var x=t[2];if(typeof x!="object"||Array.isArray(x))return a.error("NumberFormat options argument must be an object.");var I=null;if(x.locale&&!(I=a.parse(x.locale,1,Le)))return null;var M=null;if(x.currency&&!(M=a.parse(x.currency,1,Le)))return null;var r=null;if(x["min-fraction-digits"]&&!(r=a.parse(x["min-fraction-digits"],1,xe)))return null;var i=null;return x["max-fraction-digits"]&&!(i=a.parse(x["max-fraction-digits"],1,xe))?null:new lr(d,I,M,r,i)},lr.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},lr.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},lr.prototype.outputDefined=function(){return!1},lr.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Xa=function(t){this.type=xe,this.input=t};Xa.parse=function(t,a){if(t.length!==2)return a.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var d=a.parse(t[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?a.error("Expected argument of type string or array, but found "+hi(d.type)+" instead."):new Xa(d):null},Xa.prototype.evaluate=function(t){var a=this.input.evaluate(t);if(typeof a=="string"||Array.isArray(a))return a.length;throw new bo("Expected value to be of type string or array, but found "+hi(oo(a))+" instead.")},Xa.prototype.eachChild=function(t){t(this.input)},Xa.prototype.outputDefined=function(){return!1},Xa.prototype.serialize=function(){var t=["length"];return this.eachChild(function(a){t.push(a.serialize())}),t};var Pr={"==":cl,"!=":Es,">":Wu,"<":Ec,">=":cu,"<=":Pn,array:Br,at:ul,boolean:Br,case:Hs,coalesce:qs,collator:ma,format:La,image:la,in:xs,"index-of":ls,interpolate:Vo,"interpolate-hcl":Vo,"interpolate-lab":Vo,length:Xa,let:Gs,literal:Qo,match:ja,number:Br,"number-format":lr,object:Br,slice:ws,step:Uo,string:Br,"to-boolean":Pa,"to-color":Pa,"to-number":Pa,"to-string":Pa,var:ir,within:ga};function lo(t,a){var d=a[0],x=a[1],I=a[2],M=a[3];d=d.evaluate(t),x=x.evaluate(t),I=I.evaluate(t);var r=M?M.evaluate(t):1,i=iu(d,x,I,r);if(i)throw new bo(i);return new hn(d/255*r,x/255*r,I/255*r,r)}function hu(t,a){return t in a}function du(t,a){var d=a[t];return d===void 0?null:d}function hl(t){return{type:t}}function Xu(t){return{result:"success",value:t}}function us(t){return{result:"error",value:t}}function cs(t){return t["property-type"]==="data-driven"||t["property-type"]==="cross-faded-data-driven"}function pu(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Ws(t){return!!t.expression&&t.expression.interpolated}function zr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":t===null?"null":typeof t}function Is(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function Ku(t){return t}function $o(t,a,d){return t!==void 0?t:a!==void 0?a:d!==void 0?d:void 0}function Ic(t,a,d,x,I){return $o(typeof d===I?x[d]:void 0,t.default,a.default)}function oh(t,a,d){if(zr(d)!=="number")return $o(t.default,a.default);var x=t.stops.length;if(x===1||d<=t.stops[0][0])return t.stops[0][1];if(d>=t.stops[x-1][0])return t.stops[x-1][1];var I=js(t.stops.map(function(M){return M[0]}),d);return t.stops[I][1]}function Sc(t,a,d){var x=t.base!==void 0?t.base:1;if(zr(d)!=="number")return $o(t.default,a.default);var I=t.stops.length;if(I===1||d<=t.stops[0][0])return t.stops[0][1];if(d>=t.stops[I-1][0])return t.stops[I-1][1];var M=js(t.stops.map(function(E){return E[0]}),d),r=function(E,T,z,U){var V=U-z,G=E-z;return V===0?0:T===1?G/V:(Math.pow(T,G)-1)/(Math.pow(T,V)-1)}(d,x,t.stops[M][0],t.stops[M+1][0]),i=t.stops[M][1],u=t.stops[M+1][1],m=No[a.type]||Ku;if(t.colorSpace&&t.colorSpace!=="rgb"){var b=rh[t.colorSpace];m=function(E,T){return b.reverse(b.interpolate(b.forward(E),b.forward(T),r))}}return typeof i.evaluate=="function"?{evaluate:function(){for(var E=[],T=arguments.length;T--;)E[T]=arguments[T];var z=i.evaluate.apply(void 0,E),U=u.evaluate.apply(void 0,E);if(z!==void 0&&U!==void 0)return m(z,U,r)}}:m(i,u,r)}function Ss(t,a,d){return a.type==="color"?d=hn.parse(d):a.type==="formatted"?d=pr.fromString(d.toString()):a.type==="resolvedImage"?d=Zo.fromString(d.toString()):zr(d)===a.type||a.type==="enum"&&a.values[d]||(d=void 0),$o(d,t.default,a.default)}ao.register(Pr,{error:[{kind:"error"},[Le],function(t,a){throw new bo(a[0].evaluate(t))}],typeof:[Le,[st],function(t,a){return hi(oo(a[0].evaluate(t)))}],"to-rgba":[Yt(xe,4),[Pe],function(t,a){return a[0].evaluate(t).toArray()}],rgb:[Pe,[xe,xe,xe],lo],rgba:[Pe,[xe,xe,xe,xe],lo],has:{type:Me,overloads:[[[Le],function(t,a){return hu(a[0].evaluate(t),t.properties())}],[[Le,yt],function(t,a){var d=a[1];return hu(a[0].evaluate(t),d.evaluate(t))}]]},get:{type:st,overloads:[[[Le],function(t,a){return du(a[0].evaluate(t),t.properties())}],[[Le,yt],function(t,a){var d=a[1];return du(a[0].evaluate(t),d.evaluate(t))}]]},"feature-state":[st,[Le],function(t,a){return du(a[0].evaluate(t),t.featureState||{})}],properties:[yt,[],function(t){return t.properties()}],"geometry-type":[Le,[],function(t){return t.geometryType()}],id:[st,[],function(t){return t.id()}],zoom:[xe,[],function(t){return t.globals.zoom}],"heatmap-density":[xe,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[xe,[],function(t){return t.globals.lineProgress||0}],accumulated:[st,[],function(t){return t.globals.accumulated===void 0?null:t.globals.accumulated}],"+":[xe,hl(xe),function(t,a){for(var d=0,x=0,I=a;x<I.length;x+=1)d+=I[x].evaluate(t);return d}],"*":[xe,hl(xe),function(t,a){for(var d=1,x=0,I=a;x<I.length;x+=1)d*=I[x].evaluate(t);return d}],"-":{type:xe,overloads:[[[xe,xe],function(t,a){var d=a[1];return a[0].evaluate(t)-d.evaluate(t)}],[[xe],function(t,a){return-a[0].evaluate(t)}]]},"/":[xe,[xe,xe],function(t,a){var d=a[1];return a[0].evaluate(t)/d.evaluate(t)}],"%":[xe,[xe,xe],function(t,a){var d=a[1];return a[0].evaluate(t)%d.evaluate(t)}],ln2:[xe,[],function(){return Math.LN2}],pi:[xe,[],function(){return Math.PI}],e:[xe,[],function(){return Math.E}],"^":[xe,[xe,xe],function(t,a){var d=a[1];return Math.pow(a[0].evaluate(t),d.evaluate(t))}],sqrt:[xe,[xe],function(t,a){return Math.sqrt(a[0].evaluate(t))}],log10:[xe,[xe],function(t,a){return Math.log(a[0].evaluate(t))/Math.LN10}],ln:[xe,[xe],function(t,a){return Math.log(a[0].evaluate(t))}],log2:[xe,[xe],function(t,a){return Math.log(a[0].evaluate(t))/Math.LN2}],sin:[xe,[xe],function(t,a){return Math.sin(a[0].evaluate(t))}],cos:[xe,[xe],function(t,a){return Math.cos(a[0].evaluate(t))}],tan:[xe,[xe],function(t,a){return Math.tan(a[0].evaluate(t))}],asin:[xe,[xe],function(t,a){return Math.asin(a[0].evaluate(t))}],acos:[xe,[xe],function(t,a){return Math.acos(a[0].evaluate(t))}],atan:[xe,[xe],function(t,a){return Math.atan(a[0].evaluate(t))}],min:[xe,hl(xe),function(t,a){return Math.min.apply(Math,a.map(function(d){return d.evaluate(t)}))}],max:[xe,hl(xe),function(t,a){return Math.max.apply(Math,a.map(function(d){return d.evaluate(t)}))}],abs:[xe,[xe],function(t,a){return Math.abs(a[0].evaluate(t))}],round:[xe,[xe],function(t,a){var d=a[0].evaluate(t);return d<0?-Math.round(-d):Math.round(d)}],floor:[xe,[xe],function(t,a){return Math.floor(a[0].evaluate(t))}],ceil:[xe,[xe],function(t,a){return Math.ceil(a[0].evaluate(t))}],"filter-==":[Me,[Le,st],function(t,a){var d=a[0],x=a[1];return t.properties()[d.value]===x.value}],"filter-id-==":[Me,[st],function(t,a){var d=a[0];return t.id()===d.value}],"filter-type-==":[Me,[Le],function(t,a){var d=a[0];return t.geometryType()===d.value}],"filter-<":[Me,[Le,st],function(t,a){var d=a[0],x=a[1],I=t.properties()[d.value],M=x.value;return typeof I==typeof M&&I<M}],"filter-id-<":[Me,[st],function(t,a){var d=a[0],x=t.id(),I=d.value;return typeof x==typeof I&&x<I}],"filter->":[Me,[Le,st],function(t,a){var d=a[0],x=a[1],I=t.properties()[d.value],M=x.value;return typeof I==typeof M&&I>M}],"filter-id->":[Me,[st],function(t,a){var d=a[0],x=t.id(),I=d.value;return typeof x==typeof I&&x>I}],"filter-<=":[Me,[Le,st],function(t,a){var d=a[0],x=a[1],I=t.properties()[d.value],M=x.value;return typeof I==typeof M&&I<=M}],"filter-id-<=":[Me,[st],function(t,a){var d=a[0],x=t.id(),I=d.value;return typeof x==typeof I&&x<=I}],"filter->=":[Me,[Le,st],function(t,a){var d=a[0],x=a[1],I=t.properties()[d.value],M=x.value;return typeof I==typeof M&&I>=M}],"filter-id->=":[Me,[st],function(t,a){var d=a[0],x=t.id(),I=d.value;return typeof x==typeof I&&x>=I}],"filter-has":[Me,[st],function(t,a){return a[0].value in t.properties()}],"filter-has-id":[Me,[],function(t){return t.id()!==null&&t.id()!==void 0}],"filter-type-in":[Me,[Yt(Le)],function(t,a){return a[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Me,[Yt(st)],function(t,a){return a[0].value.indexOf(t.id())>=0}],"filter-in-small":[Me,[Le,Yt(st)],function(t,a){var d=a[0];return a[1].value.indexOf(t.properties()[d.value])>=0}],"filter-in-large":[Me,[Le,Yt(st)],function(t,a){var d=a[0],x=a[1];return function(I,M,r,i){for(;r<=i;){var u=r+i>>1;if(M[u]===I)return!0;M[u]>I?i=u-1:r=u+1}return!1}(t.properties()[d.value],x.value,0,x.value.length-1)}],all:{type:Me,overloads:[[[Me,Me],function(t,a){var d=a[1];return a[0].evaluate(t)&&d.evaluate(t)}],[hl(Me),function(t,a){for(var d=0,x=a;d<x.length;d+=1)if(!x[d].evaluate(t))return!1;return!0}]]},any:{type:Me,overloads:[[[Me,Me],function(t,a){var d=a[1];return a[0].evaluate(t)||d.evaluate(t)}],[hl(Me),function(t,a){for(var d=0,x=a;d<x.length;d+=1)if(x[d].evaluate(t))return!0;return!1}]]},"!":[Me,[Me],function(t,a){return!a[0].evaluate(t)}],"is-supported-script":[Me,[Le],function(t,a){var d=t.globals&&t.globals.isSupportedScript;return!d||d(a[0].evaluate(t))}],upcase:[Le,[Le],function(t,a){return a[0].evaluate(t).toUpperCase()}],downcase:[Le,[Le],function(t,a){return a[0].evaluate(t).toLowerCase()}],concat:[Le,hl(st),function(t,a){return a.map(function(d){return al(d.evaluate(t))}).join("")}],"resolved-locale":[Le,[_t],function(t,a){return a[0].evaluate(t).resolvedLocale()}]});var Ts=function(t,a){this.expression=t,this._warningHistory={},this._evaluator=new Va,this._defaultValue=a?function(d){return d.type==="color"&&Is(d.default)?new hn(0,0,0,0):d.type==="color"?hn.parse(d.default)||null:d.default===void 0?null:d.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null};function dl(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in Pr}function fu(t,a){var d=new Vs(Pr,[],a?function(I){var M={color:Pe,string:Le,number:xe,enum:Le,boolean:Me,formatted:si,resolvedImage:De};return I.type==="array"?Yt(M[I.value]||st,I.length):M[I.type]}(a):void 0),x=d.parse(t,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?Xu(new Ts(x,a)):us(d.errors)}Ts.prototype.evaluateWithoutErrorHandling=function(t,a,d,x,I,M){return this._evaluator.globals=t,this._evaluator.feature=a,this._evaluator.featureState=d,this._evaluator.canonical=x,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)},Ts.prototype.evaluate=function(t,a,d,x,I,M){this._evaluator.globals=t,this._evaluator.feature=a||null,this._evaluator.featureState=d||null,this._evaluator.canonical=x,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=M||null;try{var r=this.expression.evaluate(this._evaluator);if(r==null||typeof r=="number"&&r!=r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new bo("Expected value to be one of "+Object.keys(this._enumValues).map(function(i){return JSON.stringify(i)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(i){return this._warningHistory[i.message]||(this._warningHistory[i.message]=!0,typeof console!="undefined"&&console.warn(i.message)),this._defaultValue}};var Xs=function(t,a){this.kind=t,this._styleExpression=a,this.isStateDependent=t!=="constant"&&!as(a.expression)};Xs.prototype.evaluateWithoutErrorHandling=function(t,a,d,x,I,M){return this._styleExpression.evaluateWithoutErrorHandling(t,a,d,x,I,M)},Xs.prototype.evaluate=function(t,a,d,x,I,M){return this._styleExpression.evaluate(t,a,d,x,I,M)};var As=function(t,a,d,x){this.kind=t,this.zoomStops=d,this._styleExpression=a,this.isStateDependent=t!=="camera"&&!as(a.expression),this.interpolationType=x};function Tc(t,a){if((t=fu(t,a)).result==="error")return t;var d=t.value.expression,x=os(d);if(!x&&!cs(a))return us([new le("","data expressions not supported")]);var I=Ns(d,["zoom"]);if(!I&&!pu(a))return us([new le("","zoom expressions not supported")]);var M=function r(i){var u=null;if(i instanceof Gs)u=r(i.result);else if(i instanceof qs)for(var m=0,b=i.args;m<b.length&&!(u=r(b[m]));m+=1);else(i instanceof Uo||i instanceof Vo)&&i.input instanceof ao&&i.input.name==="zoom"&&(u=i);return u instanceof le||i.eachChild(function(E){var T=r(E);T instanceof le?u=T:!u&&T?u=new le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&T&&u!==T&&(u=new le("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}(d);return M||I?M instanceof le?us([M]):M instanceof Vo&&!Ws(a)?us([new le("",'"interpolate" expressions cannot be used with this property')]):Xu(M?new As(x?"camera":"composite",t.value,M.labels,M instanceof Vo?M.interpolation:void 0):new Xs(x?"constant":"source",t.value)):us([new le("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}As.prototype.evaluateWithoutErrorHandling=function(t,a,d,x,I,M){return this._styleExpression.evaluateWithoutErrorHandling(t,a,d,x,I,M)},As.prototype.evaluate=function(t,a,d,x,I,M){return this._styleExpression.evaluate(t,a,d,x,I,M)},As.prototype.interpolationFactor=function(t,a,d){return this.interpolationType?Vo.interpolationFactor(this.interpolationType,t,a,d):0};var hs=function(t,a){this._parameters=t,this._specification=a,ce(this,function d(x,I){var M,r,i,u=I.type==="color",m=x.stops&&typeof x.stops[0][0]=="object",b=m||!(m||x.property!==void 0),E=x.type||(Ws(I)?"exponential":"interval");if(u&&((x=ce({},x)).stops&&(x.stops=x.stops.map(function(nt){return[nt[0],hn.parse(nt[1])]})),x.default=hn.parse(x.default?x.default:I.default)),x.colorSpace&&x.colorSpace!=="rgb"&&!rh[x.colorSpace])throw new Error("Unknown color space: "+x.colorSpace);if(E==="exponential")M=Sc;else if(E==="interval")M=oh;else if(E==="categorical"){M=Ic,r=Object.create(null);for(var T=0,z=x.stops;T<z.length;T+=1){var U=z[T];r[U[0]]=U[1]}i=typeof x.stops[0][0]}else{if(E!=="identity")throw new Error('Unknown function type "'+E+'"');M=Ss}if(m){for(var V={},G=[],q=0;q<x.stops.length;q++){var K=x.stops[q],$=K[0].zoom;V[$]===void 0&&(V[$]={zoom:$,type:x.type,property:x.property,default:x.default,stops:[]},G.push($)),V[$].stops.push([K[0].value,K[1]])}for(var te=[],de=0,_e=G;de<_e.length;de+=1){var Oe=_e[de];te.push([V[Oe].zoom,d(V[Oe],I)])}var Ye={name:"linear"};return{kind:"composite",interpolationType:Ye,interpolationFactor:Vo.interpolationFactor.bind(void 0,Ye),zoomStops:te.map(function(nt){return nt[0]}),evaluate:function(nt,vt){var ot=nt.zoom;return Sc({stops:te,base:x.base},I,ot).evaluate(ot,vt)}}}if(b){var it=E==="exponential"?{name:"exponential",base:x.base!==void 0?x.base:1}:null;return{kind:"camera",interpolationType:it,interpolationFactor:Vo.interpolationFactor.bind(void 0,it),zoomStops:x.stops.map(function(nt){return nt[0]}),evaluate:function(nt){return M(x,I,nt.zoom,r,i)}}}return{kind:"source",evaluate:function(nt,vt){var ot=vt&&vt.properties?vt.properties[x.property]:void 0;return ot===void 0?$o(x.default,I.default):M(x,I,ot,r,i)}}}(this._parameters,this._specification))};function za(t){var a=t.key,d=t.value,x=t.valueSpec||{},I=t.objectElementValidators||{},M=t.style,r=t.styleSpec,i=[],u=zr(d);if(u!=="object")return[new Ne(a,d,"object expected, "+u+" found")];for(var m in d){var b=m.split(".")[0],E=x[b]||x["*"],T=void 0;if(I[b])T=I[b];else if(x[b])T=Bn;else if(I["*"])T=I["*"];else{if(!x["*"]){i.push(new Ne(a,d[m],'unknown property "'+m+'"'));continue}T=Bn}i=i.concat(T({key:(a&&a+".")+m,value:d[m],valueSpec:E,style:M,styleSpec:r,object:d,objectKey:m},d))}for(var z in x)I[z]||x[z].required&&x[z].default===void 0&&d[z]===void 0&&i.push(new Ne(a,d,'missing required property "'+z+'"'));return i}function mu(t){var a=t.value,d=t.valueSpec,x=t.style,I=t.styleSpec,M=t.key,r=t.arrayElementValidator||Bn;if(zr(a)!=="array")return[new Ne(M,a,"array expected, "+zr(a)+" found")];if(d.length&&a.length!==d.length)return[new Ne(M,a,"array length "+d.length+" expected, length "+a.length+" found")];if(d["min-length"]&&a.length<d["min-length"])return[new Ne(M,a,"array length at least "+d["min-length"]+" expected, length "+a.length+" found")];var i={type:d.value,values:d.values};I.$version<7&&(i.function=d.function),zr(d.value)==="object"&&(i=d.value);for(var u=[],m=0;m<a.length;m++)u=u.concat(r({array:a,arrayIndex:m,value:a[m],valueSpec:i,style:x,styleSpec:I,key:M+"["+m+"]"}));return u}function gu(t){var a=t.key,d=t.value,x=t.valueSpec,I=zr(d);return I==="number"&&d!=d&&(I="NaN"),I!=="number"?[new Ne(a,d,"number expected, "+I+" found")]:"minimum"in x&&d<x.minimum?[new Ne(a,d,d+" is less than the minimum value "+x.minimum)]:"maximum"in x&&d>x.maximum?[new Ne(a,d,d+" is greater than the maximum value "+x.maximum)]:[]}function pl(t){var a,d,x,I=t.valueSpec,M=W(t.value.type),r={},i=M!=="categorical"&&t.value.property===void 0,u=!i,m=zr(t.value.stops)==="array"&&zr(t.value.stops[0])==="array"&&zr(t.value.stops[0][0])==="object",b=za({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(z){if(M==="identity")return[new Ne(z.key,z.value,'identity function may not have a "stops" property')];var U=[],V=z.value;return U=U.concat(mu({key:z.key,value:V,valueSpec:z.valueSpec,style:z.style,styleSpec:z.styleSpec,arrayElementValidator:E})),zr(V)==="array"&&V.length===0&&U.push(new Ne(z.key,V,"array must have at least one stop")),U},default:function(z){return Bn({key:z.key,value:z.value,valueSpec:I,style:z.style,styleSpec:z.styleSpec})}}});return M==="identity"&&i&&b.push(new Ne(t.key,t.value,'missing required property "property"')),M==="identity"||t.value.stops||b.push(new Ne(t.key,t.value,'missing required property "stops"')),M==="exponential"&&t.valueSpec.expression&&!Ws(t.valueSpec)&&b.push(new Ne(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!cs(t.valueSpec)?b.push(new Ne(t.key,t.value,"property functions not supported")):i&&!pu(t.valueSpec)&&b.push(new Ne(t.key,t.value,"zoom functions not supported"))),M!=="categorical"&&!m||t.value.property!==void 0||b.push(new Ne(t.key,t.value,'"property" property is required')),b;function E(z){var U=[],V=z.value,G=z.key;if(zr(V)!=="array")return[new Ne(G,V,"array expected, "+zr(V)+" found")];if(V.length!==2)return[new Ne(G,V,"array length 2 expected, length "+V.length+" found")];if(m){if(zr(V[0])!=="object")return[new Ne(G,V,"object expected, "+zr(V[0])+" found")];if(V[0].zoom===void 0)return[new Ne(G,V,"object stop key must have zoom")];if(V[0].value===void 0)return[new Ne(G,V,"object stop key must have value")];if(x&&x>W(V[0].zoom))return[new Ne(G,V[0].zoom,"stop zoom values must appear in ascending order")];W(V[0].zoom)!==x&&(x=W(V[0].zoom),d=void 0,r={}),U=U.concat(za({key:G+"[0]",value:V[0],valueSpec:{zoom:{}},style:z.style,styleSpec:z.styleSpec,objectElementValidators:{zoom:gu,value:T}}))}else U=U.concat(T({key:G+"[0]",value:V[0],valueSpec:{},style:z.style,styleSpec:z.styleSpec},V));return dl(X(V[1]))?U.concat([new Ne(G+"[1]",V[1],"expressions are not allowed in function stops.")]):U.concat(Bn({key:G+"[1]",value:V[1],valueSpec:I,style:z.style,styleSpec:z.styleSpec}))}function T(z,U){var V=zr(z.value),G=W(z.value),q=z.value!==null?z.value:U;if(a){if(V!==a)return[new Ne(z.key,q,V+" stop domain type must match previous stop domain type "+a)]}else a=V;if(V!=="number"&&V!=="string"&&V!=="boolean")return[new Ne(z.key,q,"stop domain value must be a number, string, or boolean")];if(V!=="number"&&M!=="categorical"){var K="number expected, "+V+" found";return cs(I)&&M===void 0&&(K+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ne(z.key,q,K)]}return M!=="categorical"||V!=="number"||isFinite(G)&&Math.floor(G)===G?M!=="categorical"&&V==="number"&&d!==void 0&&G<d?[new Ne(z.key,q,"stop domain values must appear in ascending order")]:(d=G,M==="categorical"&&G in r?[new Ne(z.key,q,"stop domain values must be unique")]:(r[G]=!0,[])):[new Ne(z.key,q,"integer expected, found "+G)]}}function Ka(t){var a=(t.expressionContext==="property"?Tc:fu)(X(t.value),t.valueSpec);if(a.result==="error")return a.value.map(function(x){return new Ne(""+t.key+x.key,t.value,x.message)});var d=a.value.expression||a.value._styleExpression.expression;if(t.expressionContext==="property"&&t.propertyKey==="text-font"&&!d.outputDefined())return[new Ne(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if(t.expressionContext==="property"&&t.propertyType==="layout"&&!as(d))return[new Ne(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if(t.expressionContext==="filter"&&!as(d))return[new Ne(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&t.expressionContext.indexOf("cluster")===0){if(!Ns(d,["zoom","feature-state"]))return[new Ne(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(t.expressionContext==="cluster-initial"&&!os(d))return[new Ne(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Pl(t){var a=t.key,d=t.value,x=t.valueSpec,I=[];return Array.isArray(x.values)?x.values.indexOf(W(d))===-1&&I.push(new Ne(a,d,"expected one of ["+x.values.join(", ")+"], "+JSON.stringify(d)+" found")):Object.keys(x.values).indexOf(W(d))===-1&&I.push(new Ne(a,d,"expected one of ["+Object.keys(x.values).join(", ")+"], "+JSON.stringify(d)+" found")),I}function Ks(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var a=0,d=t.slice(1);a<d.length;a+=1){var x=d[a];if(!Ks(x)&&typeof x!="boolean")return!1}return!0;default:return!0}}hs.deserialize=function(t){return new hs(t._parameters,t._specification)},hs.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Ju={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function yu(t){if(t==null)return{filter:function(){return!0},needGeometry:!1};Ks(t)||(t=Cs(t));var a=fu(t,Ju);if(a.result==="error")throw new Error(a.value.map(function(d){return d.key+": "+d.message}).join(", "));return{filter:function(d,x,I){return a.value.evaluate(d,x,{},I)},needGeometry:function d(x){if(!Array.isArray(x))return!1;if(x[0]==="within")return!0;for(var I=1;I<x.length;I++)if(d(x[I]))return!0;return!1}(t)}}function ah(t,a){return t<a?-1:t>a?1:0}function Cs(t){if(!t)return!0;var a,d=t[0];return t.length<=1?d!=="any":d==="=="?Yu(t[1],t[2],"=="):d==="!="?ea(Yu(t[1],t[2],"==")):d==="<"||d===">"||d==="<="||d===">="?Yu(t[1],t[2],d):d==="any"?(a=t.slice(1),["any"].concat(a.map(Cs))):d==="all"?["all"].concat(t.slice(1).map(Cs)):d==="none"?["all"].concat(t.slice(1).map(Cs).map(ea)):d==="in"?zl(t[1],t.slice(2)):d==="!in"?ea(zl(t[1],t.slice(2))):d==="has"?Dl(t[1]):d==="!has"?ea(Dl(t[1])):d!=="within"||t}function Yu(t,a,d){switch(t){case"$type":return["filter-type-"+d,a];case"$id":return["filter-id-"+d,a];default:return["filter-"+d,t,a]}}function zl(t,a){if(a.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(function(d){return typeof d!=typeof a[0]})?["filter-in-large",t,["literal",a.sort(ah)]]:["filter-in-small",t,["literal",a]]}}function Dl(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ea(t){return["!",t]}function ta(t){return Ks(X(t.value))?Ka(ce({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function a(d){var x=d.value,I=d.key;if(zr(x)!=="array")return[new Ne(I,x,"array expected, "+zr(x)+" found")];var M,r=d.styleSpec,i=[];if(x.length<1)return[new Ne(I,x,"filter array must have at least 1 element")];switch(i=i.concat(Pl({key:I+"[0]",value:x[0],valueSpec:r.filter_operator,style:d.style,styleSpec:d.styleSpec})),W(x[0])){case"<":case"<=":case">":case">=":x.length>=2&&W(x[1])==="$type"&&i.push(new Ne(I,x,'"$type" cannot be use with operator "'+x[0]+'"'));case"==":case"!=":x.length!==3&&i.push(new Ne(I,x,'filter array for operator "'+x[0]+'" must have 3 elements'));case"in":case"!in":x.length>=2&&(M=zr(x[1]))!=="string"&&i.push(new Ne(I+"[1]",x[1],"string expected, "+M+" found"));for(var u=2;u<x.length;u++)M=zr(x[u]),W(x[1])==="$type"?i=i.concat(Pl({key:I+"["+u+"]",value:x[u],valueSpec:r.geometry_type,style:d.style,styleSpec:d.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&i.push(new Ne(I+"["+u+"]",x[u],"string, number, or boolean expected, "+M+" found"));break;case"any":case"all":case"none":for(var m=1;m<x.length;m++)i=i.concat(a({key:I+"["+m+"]",value:x[m],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":M=zr(x[1]),x.length!==2?i.push(new Ne(I,x,'filter array for "'+x[0]+'" operator must have 2 elements')):M!=="string"&&i.push(new Ne(I+"[1]",x[1],"string expected, "+M+" found"));break;case"within":M=zr(x[1]),x.length!==2?i.push(new Ne(I,x,'filter array for "'+x[0]+'" operator must have 2 elements')):M!=="object"&&i.push(new Ne(I+"[1]",x[1],"object expected, "+M+" found"))}return i}(t)}function Ac(t,a){var d=t.key,x=t.style,I=t.styleSpec,M=t.value,r=t.objectKey,i=I[a+"_"+t.layerType];if(!i)return[];var u=r.match(/^(.*)-transition$/);if(a==="paint"&&u&&i[u[1]]&&i[u[1]].transition)return Bn({key:d,value:M,valueSpec:I.transition,style:x,styleSpec:I});var m,b=t.valueSpec||i[r];if(!b)return[new Ne(d,M,'unknown property "'+r+'"')];if(zr(M)==="string"&&cs(b)&&!b.tokens&&(m=/^{([^}]+)}$/.exec(M)))return[new Ne(d,M,'"'+r+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(m[1])+" }`.")];var E=[];return t.layerType==="symbol"&&(r==="text-field"&&x&&!x.glyphs&&E.push(new Ne(d,M,'use of "text-field" requires a style "glyphs" property')),r==="text-font"&&Is(X(M))&&W(M.type)==="identity"&&E.push(new Ne(d,M,'"text-font" does not support identity functions'))),E.concat(Bn({key:t.key,value:M,valueSpec:b,style:x,styleSpec:I,expressionContext:"property",propertyType:a,propertyKey:r}))}function ks(t){return Ac(t,"paint")}function Rl(t){return Ac(t,"layout")}function fl(t){var a=[],d=t.value,x=t.key,I=t.style,M=t.styleSpec;d.type||d.ref||a.push(new Ne(x,d,'either "type" or "ref" is required'));var r,i=W(d.type),u=W(d.ref);if(d.id)for(var m=W(d.id),b=0;b<t.arrayIndex;b++){var E=I.layers[b];W(E.id)===m&&a.push(new Ne(x,d.id,'duplicate layer id "'+d.id+'", previously used at line '+E.id.__line__))}if("ref"in d)["type","source","source-layer","filter","layout"].forEach(function(U){U in d&&a.push(new Ne(x,d[U],'"'+U+'" is prohibited for ref layers'))}),I.layers.forEach(function(U){W(U.id)===u&&(r=U)}),r?r.ref?a.push(new Ne(x,d.ref,"ref cannot reference another ref layer")):i=W(r.type):a.push(new Ne(x,d.ref,'ref layer "'+u+'" not found'));else if(i!=="background")if(d.source){var T=I.sources&&I.sources[d.source],z=T&&W(T.type);T?z==="vector"&&i==="raster"?a.push(new Ne(x,d.source,'layer "'+d.id+'" requires a raster source')):z==="raster"&&i!=="raster"?a.push(new Ne(x,d.source,'layer "'+d.id+'" requires a vector source')):z!=="vector"||d["source-layer"]?z==="raster-dem"&&i!=="hillshade"?a.push(new Ne(x,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):i!=="line"||!d.paint||!d.paint["line-gradient"]||z==="geojson"&&T.lineMetrics||a.push(new Ne(x,d,'layer "'+d.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):a.push(new Ne(x,d,'layer "'+d.id+'" must specify a "source-layer"')):a.push(new Ne(x,d.source,'source "'+d.source+'" not found'))}else a.push(new Ne(x,d,'missing required property "source"'));return a=a.concat(za({key:x,value:d,valueSpec:M.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Bn({key:x+".type",value:d.type,valueSpec:M.layer.type,style:t.style,styleSpec:t.styleSpec,object:d,objectKey:"type"})},filter:ta,layout:function(U){return za({layer:d,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{"*":function(V){return Rl(ce({layerType:i},V))}}})},paint:function(U){return za({layer:d,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{"*":function(V){return ks(ce({layerType:i},V))}}})}}}))}function Da(t){var a=t.value,d=t.key,x=zr(a);return x!=="string"?[new Ne(d,a,"string expected, "+x+" found")]:[]}var Gr={promoteId:function(t){var a=t.key,d=t.value;if(zr(d)==="string")return Da({key:a,value:d});var x=[];for(var I in d)x.push.apply(x,Da({key:a+"."+I,value:d[I]}));return x}};function Ol(t){var a=t.value,d=t.key,x=t.styleSpec,I=t.style;if(!a.type)return[new Ne(d,a,'"type" is required')];var M,r=W(a.type);switch(r){case"vector":case"raster":case"raster-dem":return za({key:d,value:a,valueSpec:x["source_"+r.replace("-","_")],style:t.style,styleSpec:x,objectElementValidators:Gr});case"geojson":if(M=za({key:d,value:a,valueSpec:x.source_geojson,style:I,styleSpec:x,objectElementValidators:Gr}),a.cluster)for(var i in a.clusterProperties){var u=a.clusterProperties[i],m=u[0],b=typeof m=="string"?[m,["accumulated"],["get",i]]:m;M.push.apply(M,Ka({key:d+"."+i+".map",value:u[1],expressionContext:"cluster-map"})),M.push.apply(M,Ka({key:d+"."+i+".reduce",value:b,expressionContext:"cluster-reduce"}))}return M;case"video":return za({key:d,value:a,valueSpec:x.source_video,style:I,styleSpec:x});case"image":return za({key:d,value:a,valueSpec:x.source_image,style:I,styleSpec:x});case"canvas":return[new Ne(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pl({key:d+".type",value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:I,styleSpec:x})}}function ml(t){var a=t.value,d=t.styleSpec,x=d.light,I=t.style,M=[],r=zr(a);if(a===void 0)return M;if(r!=="object")return M.concat([new Ne("light",a,"object expected, "+r+" found")]);for(var i in a){var u=i.match(/^(.*)-transition$/);M=M.concat(u&&x[u[1]]&&x[u[1]].transition?Bn({key:i,value:a[i],valueSpec:d.transition,style:I,styleSpec:d}):x[i]?Bn({key:i,value:a[i],valueSpec:x[i],style:I,styleSpec:d}):[new Ne(i,a[i],'unknown property "'+i+'"')])}return M}var Ms={"*":function(){return[]},array:mu,boolean:function(t){var a=t.value,d=t.key,x=zr(a);return x!=="boolean"?[new Ne(d,a,"boolean expected, "+x+" found")]:[]},number:gu,color:function(t){var a=t.key,d=t.value,x=zr(d);return x!=="string"?[new Ne(a,d,"color expected, "+x+" found")]:Ii(d)===null?[new Ne(a,d,'color expected, "'+d+'" found')]:[]},constants:mt,enum:Pl,filter:ta,function:pl,layer:fl,object:za,source:Ol,light:ml,string:Da,formatted:function(t){return Da(t).length===0?[]:Ka(t)},resolvedImage:function(t){return Da(t).length===0?[]:Ka(t)}};function Bn(t){var a=t.value,d=t.valueSpec,x=t.styleSpec;return d.expression&&Is(W(a))?pl(t):d.expression&&dl(X(a))?Ka(t):d.type&&Ms[d.type]?Ms[d.type](t):za(ce({},t,{valueSpec:d.type?x[d.type]:d}))}function vr(t){var a=t.value,d=t.key,x=Da(t);return x.length||(a.indexOf("{fontstack}")===-1&&x.push(new Ne(d,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&x.push(new Ne(d,a,'"glyphs" url must include a "{range}" token'))),x}function Si(t,a){a===void 0&&(a=Ie);var d=[];return d=d.concat(Bn({key:"",value:t,valueSpec:a.$root,styleSpec:a,style:t,objectElementValidators:{glyphs:vr,"*":function(){return[]}}})),t.constants&&(d=d.concat(mt({key:"constants",value:t.constants,style:t,styleSpec:a}))),gl(d)}function gl(t){return[].concat(t).sort(function(a,d){return a.line-d.line})}function ds(t){return function(){for(var a=[],d=arguments.length;d--;)a[d]=arguments[d];return gl(t.apply(this,a))}}Si.source=ds(Ol),Si.light=ds(ml),Si.layer=ds(fl),Si.filter=ds(ta),Si.paintProperty=ds(ks),Si.layoutProperty=ds(Rl);var Ja=Si,_u=Ja.light,Mi=Ja.paintProperty,yl=Ja.layoutProperty;function Bl(t,a){var d=!1;if(a&&a.length)for(var x=0,I=a;x<I.length;x+=1)t.fire(new $e(new Error(I[x].message))),d=!0;return d}var Ls=Jr;function Jr(t,a,d){var x=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var I=new Int32Array(this.arrayBuffer);t=I[0],this.d=(a=I[1])+2*(d=I[2]);for(var M=0;M<this.d*this.d;M++){var r=I[3+M],i=I[3+M+1];x.push(r===i?null:I.subarray(r,i))}var u=I[3+x.length+1];this.keys=I.subarray(I[3+x.length],u),this.bboxes=I.subarray(u),this.insert=this._insertReadonly}else{this.d=a+2*d;for(var m=0;m<this.d*this.d;m++)x.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=t,this.padding=d,this.scale=a/t,this.uid=0;var b=d/a*t;this.min=-b,this.max=t+b}Jr.prototype.insert=function(t,a,d,x,I){this._forEachCell(a,d,x,I,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(x),this.bboxes.push(I)},Jr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Jr.prototype._insertCell=function(t,a,d,x,I,M){this.cells[I].push(M)},Jr.prototype.query=function(t,a,d,x,I){var M=this.min,r=this.max;if(t<=M&&a<=M&&r<=d&&r<=x&&!I)return Array.prototype.slice.call(this.keys);var i=[];return this._forEachCell(t,a,d,x,this._queryCell,i,{},I),i},Jr.prototype._queryCell=function(t,a,d,x,I,M,r,i){var u=this.cells[I];if(u!==null)for(var m=this.keys,b=this.bboxes,E=0;E<u.length;E++){var T=u[E];if(r[T]===void 0){var z=4*T;(i?i(b[z+0],b[z+1],b[z+2],b[z+3]):t<=b[z+2]&&a<=b[z+3]&&d>=b[z+0]&&x>=b[z+1])?(r[T]=!0,M.push(m[T])):r[T]=!1}}},Jr.prototype._forEachCell=function(t,a,d,x,I,M,r,i){for(var u=this._convertToCellCoord(t),m=this._convertToCellCoord(a),b=this._convertToCellCoord(d),E=this._convertToCellCoord(x),T=u;T<=b;T++)for(var z=m;z<=E;z++){var U=this.d*z+T;if((!i||i(this._convertFromCellCoord(T),this._convertFromCellCoord(z),this._convertFromCellCoord(T+1),this._convertFromCellCoord(z+1)))&&I.call(this,t,a,d,x,U,M,r,i))return}},Jr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Jr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Jr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,a=3+this.cells.length+1+1,d=0,x=0;x<this.cells.length;x++)d+=this.cells[x].length;var I=new Int32Array(a+d+this.keys.length+this.bboxes.length);I[0]=this.extent,I[1]=this.n,I[2]=this.padding;for(var M=a,r=0;r<t.length;r++){var i=t[r];I[3+r]=M,I.set(i,M),M+=i.length}return I[3+t.length]=M,I.set(this.keys,M),I[3+t.length+1]=M+=this.keys.length,I.set(this.bboxes,M),M+=this.bboxes.length,I.buffer};var Fl=O.ImageData,Cc=O.ImageBitmap,po={};function Pi(t,a,d){d===void 0&&(d={}),Object.defineProperty(a,"_classRegistryKey",{value:t,writeable:!1}),po[t]={klass:a,omit:d.omit||[],shallow:d.shallow||[]}}for(var Wo in Pi("Object",Object),Ls.serialize=function(t,a){var d=t.toArrayBuffer();return a&&a.push(d),{buffer:d}},Ls.deserialize=function(t){return new Ls(t.buffer)},Pi("Grid",Ls),Pi("Color",hn),Pi("Error",Error),Pi("ResolvedImage",Zo),Pi("StylePropertyFunction",hs),Pi("StyleExpression",Ts,{omit:["_evaluator"]}),Pi("ZoomDependentExpression",As),Pi("ZoomConstantExpression",Xs),Pi("CompoundExpression",ao,{omit:["_evaluate"]}),Pr)Pr[Wo]._classRegistryKey||Pi("Expression_"+Wo,Pr[Wo]);function Ul(t){return t&&typeof ArrayBuffer!="undefined"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}function Js(t){return Cc&&t instanceof Cc}function Ra(t,a){if(t==null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Ul(t)||Js(t))return a&&a.push(t),t;if(ArrayBuffer.isView(t)){var d=t;return a&&a.push(d.buffer),d}if(t instanceof Fl)return a&&a.push(t.data.buffer),t;if(Array.isArray(t)){for(var x=[],I=0,M=t;I<M.length;I+=1)x.push(Ra(M[I],a));return x}if(typeof t=="object"){var r=t.constructor,i=r._classRegistryKey;if(!i)throw new Error("can't serialize object of unregistered class");var u=r.serialize?r.serialize(t,a):{};if(!r.serialize){for(var m in t)if(t.hasOwnProperty(m)&&!(po[i].omit.indexOf(m)>=0)){var b=t[m];u[m]=po[i].shallow.indexOf(m)>=0?b:Ra(b,a)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return i!=="Object"&&(u.$name=i),u}throw new Error("can't serialize object of type "+typeof t)}function Hr(t){if(t==null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Ul(t)||Js(t)||ArrayBuffer.isView(t)||t instanceof Fl)return t;if(Array.isArray(t))return t.map(Hr);if(typeof t=="object"){var a=t.$name||"Object",d=po[a].klass;if(!d)throw new Error("can't deserialize unregistered class "+a);if(d.deserialize)return d.deserialize(t);for(var x=Object.create(d.prototype),I=0,M=Object.keys(t);I<M.length;I+=1){var r=M[I];if(r!=="$name"){var i=t[r];x[r]=po[a].shallow.indexOf(r)>=0?i:Hr(i)}}return x}throw new Error("can't deserialize object of type "+typeof t)}var ps=function(){this.first=!0};ps.prototype.update=function(t,a){var d=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=a),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=d,!0))};var pi={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function vu(t){for(var a=0,d=t;a<d.length;a+=1)if(Ps(d[a].charCodeAt(0)))return!0;return!1}function Ps(t){return!(t!==746&&t!==747&&(t<4352||!(pi["Bopomofo Extended"](t)||pi.Bopomofo(t)||pi["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||pi["CJK Compatibility Ideographs"](t)||pi["CJK Compatibility"](t)||pi["CJK Radicals Supplement"](t)||pi["CJK Strokes"](t)||!(!pi["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||t===12336)||pi["CJK Unified Ideographs Extension A"](t)||pi["CJK Unified Ideographs"](t)||pi["Enclosed CJK Letters and Months"](t)||pi["Hangul Compatibility Jamo"](t)||pi["Hangul Jamo Extended-A"](t)||pi["Hangul Jamo Extended-B"](t)||pi["Hangul Jamo"](t)||pi["Hangul Syllables"](t)||pi.Hiragana(t)||pi["Ideographic Description Characters"](t)||pi.Kanbun(t)||pi["Kangxi Radicals"](t)||pi["Katakana Phonetic Extensions"](t)||pi.Katakana(t)&&t!==12540||!(!pi["Halfwidth and Fullwidth Forms"](t)||t===65288||t===65289||t===65293||t>=65306&&t<=65310||t===65339||t===65341||t===65343||t>=65371&&t<=65503||t===65507||t>=65512&&t<=65519)||!(!pi["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||pi["Unified Canadian Aboriginal Syllabics"](t)||pi["Unified Canadian Aboriginal Syllabics Extended"](t)||pi["Vertical Forms"](t)||pi["Yijing Hexagram Symbols"](t)||pi["Yi Syllables"](t)||pi["Yi Radicals"](t))))}function bu(t){return!(Ps(t)||function(a){return!!(pi["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||pi["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||pi["Letterlike Symbols"](a)||pi["Number Forms"](a)||pi["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||pi["Control Pictures"](a)&&a!==9251||pi["Optical Character Recognition"](a)||pi["Enclosed Alphanumerics"](a)||pi["Geometric Shapes"](a)||pi["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||pi["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||pi["CJK Symbols and Punctuation"](a)||pi.Katakana(a)||pi["Private Use Area"](a)||pi["CJK Compatibility Forms"](a)||pi["Small Form Variants"](a)||pi["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(t))}function ua(t){return t>=1424&&t<=2303||pi["Arabic Presentation Forms-A"](t)||pi["Arabic Presentation Forms-B"](t)}function Yr(t,a){return!(!a&&ua(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||pi.Khmer(t))}function Vr(t){for(var a=0,d=t;a<d.length;a+=1)if(ua(d[a].charCodeAt(0)))return!0;return!1}var _l=null,Xo="unavailable",Ya=null,kc=function(t){t&&typeof t=="string"&&t.indexOf("NetworkError")>-1&&(Xo="error"),_l&&_l(t)};function Nl(){Mc.fire(new ze("pluginStateChange",{pluginStatus:Xo,pluginURL:Ya}))}var Mc=new tt,qa=function(){return Xo},ya=function(){if(Xo!=="deferred"||!Ya)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xo="loading",Nl(),Ya&&Io({url:Ya},function(t){t?kc(t):(Xo="loaded",Nl())})},Di={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Xo==="loaded"||Di.applyArabicShaping!=null},isLoading:function(){return Xo==="loading"},setState:function(t){Xo=t.pluginStatus,Ya=t.pluginURL},isParsed:function(){return Di.applyArabicShaping!=null&&Di.processBidirectionalText!=null&&Di.processStyledBidirectionalText!=null},getPluginURL:function(){return Ya}},ci=function(t,a){this.zoom=t,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ps,this.transition={})};ci.prototype.isSupportedScript=function(t){return function(a,d){for(var x=0,I=a;x<I.length;x+=1)if(!Yr(I[x].charCodeAt(0),d))return!1;return!0}(t,Di.isLoaded())},ci.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ci.prototype.getCrossfadeParameters=function(){var t=this.zoom,a=t-Math.floor(t),d=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*a}};var _a=function(t,a){this.property=t,this.value=a,this.expression=function(d,x){if(Is(d))return new hs(d,x);if(dl(d)){var I=Tc(d,x);if(I.result==="error")throw new Error(I.value.map(function(r){return r.key+": "+r.message}).join(", "));return I.value}var M=d;return typeof d=="string"&&x.type==="color"&&(M=hn.parse(d)),{kind:"constant",evaluate:function(){return M}}}(a===void 0?t.specification.default:a,t.specification)};_a.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},_a.prototype.possiblyEvaluate=function(t,a,d){return this.property.possiblyEvaluate(this,t,a,d)};var ia=function(t){this.property=t,this.value=new _a(t,void 0)};ia.prototype.transitioned=function(t,a){return new Qr(this.property,this.value,a,se({},t.transition,this.transition),t.now)},ia.prototype.untransitioned=function(){return new Qr(this.property,this.value,null,{},0)};var To=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};To.prototype.getValue=function(t){return Fe(this._values[t].value.value)},To.prototype.setValue=function(t,a){this._values.hasOwnProperty(t)||(this._values[t]=new ia(this._values[t].property)),this._values[t].value=new _a(this._values[t].property,a===null?void 0:Fe(a))},To.prototype.getTransition=function(t){return Fe(this._values[t].transition)},To.prototype.setTransition=function(t,a){this._values.hasOwnProperty(t)||(this._values[t]=new ia(this._values[t].property)),this._values[t].transition=Fe(a)||void 0},To.prototype.serialize=function(){for(var t={},a=0,d=Object.keys(this._values);a<d.length;a+=1){var x=d[a],I=this.getValue(x);I!==void 0&&(t[x]=I);var M=this.getTransition(x);M!==void 0&&(t[x+"-transition"]=M)}return t},To.prototype.transitioned=function(t,a){for(var d=new va(this._properties),x=0,I=Object.keys(this._values);x<I.length;x+=1){var M=I[x];d._values[M]=this._values[M].transitioned(t,a._values[M])}return d},To.prototype.untransitioned=function(){for(var t=new va(this._properties),a=0,d=Object.keys(this._values);a<d.length;a+=1){var x=d[a];t._values[x]=this._values[x].untransitioned()}return t};var Qr=function(t,a,d,x,I){this.property=t,this.value=a,this.begin=I+x.delay||0,this.end=this.begin+x.duration||0,t.specification.transition&&(x.delay||x.duration)&&(this.prior=d)};Qr.prototype.possiblyEvaluate=function(t,a,d){var x=t.now||0,I=this.value.possiblyEvaluate(t,a,d),M=this.prior;if(M){if(x>this.end)return this.prior=null,I;if(this.value.isDataDriven())return this.prior=null,I;if(x<this.begin)return M.possiblyEvaluate(t,a,d);var r=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(t,a,d),I,function(i){if(i<=0)return 0;if(i>=1)return 1;var u=i*i,m=u*i;return 4*(i<.5?m:3*(i-u)+m-.75)}(r))}return I};var va=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};va.prototype.possiblyEvaluate=function(t,a,d){for(var x=new zs(this._properties),I=0,M=Object.keys(this._values);I<M.length;I+=1){var r=M[I];x._values[r]=this._values[r].possiblyEvaluate(t,a,d)}return x},va.prototype.hasTransition=function(){for(var t=0,a=Object.keys(this._values);t<a.length;t+=1)if(this._values[a[t]].prior)return!0;return!1};var to=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};to.prototype.getValue=function(t){return Fe(this._values[t].value)},to.prototype.setValue=function(t,a){this._values[t]=new _a(this._values[t].property,a===null?void 0:Fe(a))},to.prototype.serialize=function(){for(var t={},a=0,d=Object.keys(this._values);a<d.length;a+=1){var x=d[a],I=this.getValue(x);I!==void 0&&(t[x]=I)}return t},to.prototype.possiblyEvaluate=function(t,a,d){for(var x=new zs(this._properties),I=0,M=Object.keys(this._values);I<M.length;I+=1){var r=M[I];x._values[r]=this._values[r].possiblyEvaluate(t,a,d)}return x};var na=function(t,a,d){this.property=t,this.value=a,this.parameters=d};na.prototype.isConstant=function(){return this.value.kind==="constant"},na.prototype.constantOr=function(t){return this.value.kind==="constant"?this.value.value:t},na.prototype.evaluate=function(t,a,d,x){return this.property.evaluate(this.value,this.parameters,t,a,d,x)};var zs=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};zs.prototype.get=function(t){return this._values[t]};var gi=function(t){this.specification=t};gi.prototype.possiblyEvaluate=function(t,a){return t.expression.evaluate(a)},gi.prototype.interpolate=function(t,a,d){var x=No[this.specification.type];return x?x(t,a,d):t};var fi=function(t,a){this.specification=t,this.overrides=a};fi.prototype.possiblyEvaluate=function(t,a,d,x){return new na(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(a,null,{},d,x)}:t.expression,a)},fi.prototype.interpolate=function(t,a,d){if(t.value.kind!=="constant"||a.value.kind!=="constant")return t;if(t.value.value===void 0||a.value.value===void 0)return new na(this,{kind:"constant",value:void 0},t.parameters);var x=No[this.specification.type];return x?new na(this,{kind:"constant",value:x(t.value.value,a.value.value,d)},t.parameters):t},fi.prototype.evaluate=function(t,a,d,x,I,M){return t.kind==="constant"?t.value:t.evaluate(a,d,x,I,M)};var xu=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.possiblyEvaluate=function(d,x,I,M){if(d.value===void 0)return new na(this,{kind:"constant",value:void 0},x);if(d.expression.kind==="constant"){var r=d.expression.evaluate(x,null,{},I,M),i=d.property.specification.type==="resolvedImage"&&typeof r!="string"?r.name:r,u=this._calculate(i,i,i,x);return new na(this,{kind:"constant",value:u},x)}if(d.expression.kind==="camera"){var m=this._calculate(d.expression.evaluate({zoom:x.zoom-1}),d.expression.evaluate({zoom:x.zoom}),d.expression.evaluate({zoom:x.zoom+1}),x);return new na(this,{kind:"constant",value:m},x)}return new na(this,d.expression,x)},a.prototype.evaluate=function(d,x,I,M,r,i){if(d.kind==="source"){var u=d.evaluate(x,I,M,r,i);return this._calculate(u,u,u,x)}return d.kind==="composite"?this._calculate(d.evaluate({zoom:Math.floor(x.zoom)-1},I,M),d.evaluate({zoom:Math.floor(x.zoom)},I,M),d.evaluate({zoom:Math.floor(x.zoom)+1},I,M),x):d.value},a.prototype._calculate=function(d,x,I,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:d,to:x}:{from:I,to:x}},a.prototype.interpolate=function(d){return d},a}(fi),xo=function(t){this.specification=t};xo.prototype.possiblyEvaluate=function(t,a,d,x){if(t.value!==void 0){if(t.expression.kind==="constant"){var I=t.expression.evaluate(a,null,{},d,x);return this._calculate(I,I,I,a)}return this._calculate(t.expression.evaluate(new ci(Math.floor(a.zoom-1),a)),t.expression.evaluate(new ci(Math.floor(a.zoom),a)),t.expression.evaluate(new ci(Math.floor(a.zoom+1),a)),a)}},xo.prototype._calculate=function(t,a,d,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:t,to:a}:{from:d,to:a}},xo.prototype.interpolate=function(t){return t};var ca=function(t){this.specification=t};ca.prototype.possiblyEvaluate=function(t,a,d,x){return!!t.expression.evaluate(a,null,{},d,x)},ca.prototype.interpolate=function(){return!1};var C=function(t){for(var a in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var d=t[a];d.specification.overridable&&this.overridableProperties.push(a);var x=this.defaultPropertyValues[a]=new _a(d,void 0),I=this.defaultTransitionablePropertyValues[a]=new ia(d);this.defaultTransitioningPropertyValues[a]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=x.possiblyEvaluate({})}};Pi("DataDrivenProperty",fi),Pi("DataConstantProperty",gi),Pi("CrossFadedDataDrivenProperty",xu),Pi("CrossFadedProperty",xo),Pi("ColorRampProperty",ca);var l=function(t){function a(d,x){if(t.call(this),this.id=d.id,this.type=d.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},d.type!=="custom"&&(this.metadata=(d=d).metadata,this.minzoom=d.minzoom,this.maxzoom=d.maxzoom,d.type!=="background"&&(this.source=d.source,this.sourceLayer=d["source-layer"],this.filter=d.filter),x.layout&&(this._unevaluatedLayout=new to(x.layout)),x.paint)){for(var I in this._transitionablePaint=new To(x.paint),d.paint)this.setPaintProperty(I,d.paint[I],{validate:!1});for(var M in d.layout)this.setLayoutProperty(M,d.layout[M],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new zs(x.paint)}}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},a.prototype.getLayoutProperty=function(d){return d==="visibility"?this.visibility:this._unevaluatedLayout.getValue(d)},a.prototype.setLayoutProperty=function(d,x,I){I===void 0&&(I={}),x!=null&&this._validate(yl,"layers."+this.id+".layout."+d,d,x,I)||(d!=="visibility"?this._unevaluatedLayout.setValue(d,x):this.visibility=x)},a.prototype.getPaintProperty=function(d){return ut(d,"-transition")?this._transitionablePaint.getTransition(d.slice(0,-11)):this._transitionablePaint.getValue(d)},a.prototype.setPaintProperty=function(d,x,I){if(I===void 0&&(I={}),x!=null&&this._validate(Mi,"layers."+this.id+".paint."+d,d,x,I))return!1;if(ut(d,"-transition"))return this._transitionablePaint.setTransition(d.slice(0,-11),x||void 0),!1;var M=this._transitionablePaint._values[d],r=M.property.specification["property-type"]==="cross-faded-data-driven",i=M.value.isDataDriven(),u=M.value;this._transitionablePaint.setValue(d,x),this._handleSpecialPaintPropertyUpdate(d);var m=this._transitionablePaint._values[d].value;return m.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(d,u,m)},a.prototype._handleSpecialPaintPropertyUpdate=function(d){},a.prototype._handleOverridablePaintPropertyUpdate=function(d,x,I){return!1},a.prototype.isHidden=function(d){return!!(this.minzoom&&d<this.minzoom)||!!(this.maxzoom&&d>=this.maxzoom)||this.visibility==="none"},a.prototype.updateTransitions=function(d){this._transitioningPaint=this._transitionablePaint.transitioned(d,this._transitioningPaint)},a.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},a.prototype.recalculate=function(d,x){d.getCrossfadeParameters&&(this._crossfadeParameters=d.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(d,void 0,x)),this.paint=this._transitioningPaint.possiblyEvaluate(d,void 0,x)},a.prototype.serialize=function(){var d={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(d.layout=d.layout||{},d.layout.visibility=this.visibility),je(d,function(x,I){return!(x===void 0||I==="layout"&&!Object.keys(x).length||I==="paint"&&!Object.keys(x).length)})},a.prototype._validate=function(d,x,I,M,r){return r===void 0&&(r={}),(!r||r.validate!==!1)&&Bl(this,d.call(Ja,{key:x,layerType:this.type,objectKey:I,value:M,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))},a.prototype.is3D=function(){return!1},a.prototype.isTileClipped=function(){return!1},a.prototype.hasOffscreenPass=function(){return!1},a.prototype.resize=function(){},a.prototype.isStateDependent=function(){for(var d in this.paint._values){var x=this.paint.get(d);if(x instanceof na&&cs(x.property.specification)&&(x.value.kind==="source"||x.value.kind==="composite")&&x.value.isStateDependent)return!0}return!1},a}(tt),_={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},A=function(t,a){this._structArray=t,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},k=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function B(t,a){a===void 0&&(a=1);var d=0,x=0;return{members:t.map(function(I){var M=_[I.type].BYTES_PER_ELEMENT,r=d=j(d,Math.max(a,M)),i=I.components||1;return x=Math.max(x,M),d+=M*i,{name:I.name,type:I.type,components:i,offset:r}}),size:j(d,Math.max(x,a)),alignment:a}}function j(t,a){return Math.ceil(t/a)*a}k.serialize=function(t,a){return t._trim(),a&&(t.isTransferred=!0,a.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},k.deserialize=function(t){var a=Object.create(this.prototype);return a.arrayBuffer=t.arrayBuffer,a.length=t.length,a.capacity=t.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a},k.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},k.prototype.clear=function(){this.length=0},k.prototype.resize=function(t){this.reserve(t),this.length=t},k.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}},k.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Z=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x){var I=this.length;return this.resize(I+1),this.emplace(I,d,x)},a.prototype.emplace=function(d,x,I){var M=2*d;return this.int16[M+0]=x,this.int16[M+1]=I,d},a}(k);Z.prototype.bytesPerElement=4,Pi("StructArrayLayout2i4",Z);var J=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M){var r=this.length;return this.resize(r+1),this.emplace(r,d,x,I,M)},a.prototype.emplace=function(d,x,I,M,r){var i=4*d;return this.int16[i+0]=x,this.int16[i+1]=I,this.int16[i+2]=M,this.int16[i+3]=r,d},a}(k);J.prototype.bytesPerElement=8,Pi("StructArrayLayout4i8",J);var ie=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M,r,i){var u=this.length;return this.resize(u+1),this.emplace(u,d,x,I,M,r,i)},a.prototype.emplace=function(d,x,I,M,r,i,u){var m=6*d;return this.int16[m+0]=x,this.int16[m+1]=I,this.int16[m+2]=M,this.int16[m+3]=r,this.int16[m+4]=i,this.int16[m+5]=u,d},a}(k);ie.prototype.bytesPerElement=12,Pi("StructArrayLayout2i4i12",ie);var ae=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M,r,i){var u=this.length;return this.resize(u+1),this.emplace(u,d,x,I,M,r,i)},a.prototype.emplace=function(d,x,I,M,r,i,u){var m=4*d,b=8*d;return this.int16[m+0]=x,this.int16[m+1]=I,this.uint8[b+4]=M,this.uint8[b+5]=r,this.uint8[b+6]=i,this.uint8[b+7]=u,d},a}(k);ae.prototype.bytesPerElement=8,Pi("StructArrayLayout2i4ub8",ae);var ge=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x){var I=this.length;return this.resize(I+1),this.emplace(I,d,x)},a.prototype.emplace=function(d,x,I){var M=2*d;return this.float32[M+0]=x,this.float32[M+1]=I,d},a}(k);ge.prototype.bytesPerElement=8,Pi("StructArrayLayout2f8",ge);var Ae=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M,r,i,u,m,b,E){var T=this.length;return this.resize(T+1),this.emplace(T,d,x,I,M,r,i,u,m,b,E)},a.prototype.emplace=function(d,x,I,M,r,i,u,m,b,E,T){var z=10*d;return this.uint16[z+0]=x,this.uint16[z+1]=I,this.uint16[z+2]=M,this.uint16[z+3]=r,this.uint16[z+4]=i,this.uint16[z+5]=u,this.uint16[z+6]=m,this.uint16[z+7]=b,this.uint16[z+8]=E,this.uint16[z+9]=T,d},a}(k);Ae.prototype.bytesPerElement=20,Pi("StructArrayLayout10ui20",Ae);var Ke=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M,r,i,u,m,b,E,T,z){var U=this.length;return this.resize(U+1),this.emplace(U,d,x,I,M,r,i,u,m,b,E,T,z)},a.prototype.emplace=function(d,x,I,M,r,i,u,m,b,E,T,z,U){var V=12*d;return this.int16[V+0]=x,this.int16[V+1]=I,this.int16[V+2]=M,this.int16[V+3]=r,this.uint16[V+4]=i,this.uint16[V+5]=u,this.uint16[V+6]=m,this.uint16[V+7]=b,this.int16[V+8]=E,this.int16[V+9]=T,this.int16[V+10]=z,this.int16[V+11]=U,d},a}(k);Ke.prototype.bytesPerElement=24,Pi("StructArrayLayout4i4ui4i24",Ke);var ke=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I){var M=this.length;return this.resize(M+1),this.emplace(M,d,x,I)},a.prototype.emplace=function(d,x,I,M){var r=3*d;return this.float32[r+0]=x,this.float32[r+1]=I,this.float32[r+2]=M,d},a}(k);ke.prototype.bytesPerElement=12,Pi("StructArrayLayout3f12",ke);var Xe=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d){var x=this.length;return this.resize(x+1),this.emplace(x,d)},a.prototype.emplace=function(d,x){return this.uint32[1*d+0]=x,d},a}(k);Xe.prototype.bytesPerElement=4,Pi("StructArrayLayout1ul4",Xe);var ct=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M,r,i,u,m,b){var E=this.length;return this.resize(E+1),this.emplace(E,d,x,I,M,r,i,u,m,b)},a.prototype.emplace=function(d,x,I,M,r,i,u,m,b,E){var T=10*d,z=5*d;return this.int16[T+0]=x,this.int16[T+1]=I,this.int16[T+2]=M,this.int16[T+3]=r,this.int16[T+4]=i,this.int16[T+5]=u,this.uint32[z+3]=m,this.uint16[T+8]=b,this.uint16[T+9]=E,d},a}(k);ct.prototype.bytesPerElement=20,Pi("StructArrayLayout6i1ul2ui20",ct);var lt=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M,r,i){var u=this.length;return this.resize(u+1),this.emplace(u,d,x,I,M,r,i)},a.prototype.emplace=function(d,x,I,M,r,i,u){var m=6*d;return this.int16[m+0]=x,this.int16[m+1]=I,this.int16[m+2]=M,this.int16[m+3]=r,this.int16[m+4]=i,this.int16[m+5]=u,d},a}(k);lt.prototype.bytesPerElement=12,Pi("StructArrayLayout2i2i2i12",lt);var bt=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M,r){var i=this.length;return this.resize(i+1),this.emplace(i,d,x,I,M,r)},a.prototype.emplace=function(d,x,I,M,r,i){var u=4*d,m=8*d;return this.float32[u+0]=x,this.float32[u+1]=I,this.float32[u+2]=M,this.int16[m+6]=r,this.int16[m+7]=i,d},a}(k);bt.prototype.bytesPerElement=16,Pi("StructArrayLayout2f1f2i16",bt);var pt=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M){var r=this.length;return this.resize(r+1),this.emplace(r,d,x,I,M)},a.prototype.emplace=function(d,x,I,M,r){var i=12*d,u=3*d;return this.uint8[i+0]=x,this.uint8[i+1]=I,this.float32[u+1]=M,this.float32[u+2]=r,d},a}(k);pt.prototype.bytesPerElement=12,Pi("StructArrayLayout2ub2f12",pt);var jt=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I){var M=this.length;return this.resize(M+1),this.emplace(M,d,x,I)},a.prototype.emplace=function(d,x,I,M){var r=3*d;return this.uint16[r+0]=x,this.uint16[r+1]=I,this.uint16[r+2]=M,d},a}(k);jt.prototype.bytesPerElement=6,Pi("StructArrayLayout3ui6",jt);var Rt=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M,r,i,u,m,b,E,T,z,U,V,G,q,K){var $=this.length;return this.resize($+1),this.emplace($,d,x,I,M,r,i,u,m,b,E,T,z,U,V,G,q,K)},a.prototype.emplace=function(d,x,I,M,r,i,u,m,b,E,T,z,U,V,G,q,K,$){var te=24*d,de=12*d,_e=48*d;return this.int16[te+0]=x,this.int16[te+1]=I,this.uint16[te+2]=M,this.uint16[te+3]=r,this.uint32[de+2]=i,this.uint32[de+3]=u,this.uint32[de+4]=m,this.uint16[te+10]=b,this.uint16[te+11]=E,this.uint16[te+12]=T,this.float32[de+7]=z,this.float32[de+8]=U,this.uint8[_e+36]=V,this.uint8[_e+37]=G,this.uint8[_e+38]=q,this.uint32[de+10]=K,this.int16[te+22]=$,d},a}(k);Rt.prototype.bytesPerElement=48,Pi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Rt);var Ft=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M,r,i,u,m,b,E,T,z,U,V,G,q,K,$,te,de,_e,Oe,Ye,it,nt,vt,ot,Kt){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,d,x,I,M,r,i,u,m,b,E,T,z,U,V,G,q,K,$,te,de,_e,Oe,Ye,it,nt,vt,ot,Kt)},a.prototype.emplace=function(d,x,I,M,r,i,u,m,b,E,T,z,U,V,G,q,K,$,te,de,_e,Oe,Ye,it,nt,vt,ot,Kt,Wt){var Lt=34*d,Zt=17*d;return this.int16[Lt+0]=x,this.int16[Lt+1]=I,this.int16[Lt+2]=M,this.int16[Lt+3]=r,this.int16[Lt+4]=i,this.int16[Lt+5]=u,this.int16[Lt+6]=m,this.int16[Lt+7]=b,this.uint16[Lt+8]=E,this.uint16[Lt+9]=T,this.uint16[Lt+10]=z,this.uint16[Lt+11]=U,this.uint16[Lt+12]=V,this.uint16[Lt+13]=G,this.uint16[Lt+14]=q,this.uint16[Lt+15]=K,this.uint16[Lt+16]=$,this.uint16[Lt+17]=te,this.uint16[Lt+18]=de,this.uint16[Lt+19]=_e,this.uint16[Lt+20]=Oe,this.uint16[Lt+21]=Ye,this.uint16[Lt+22]=it,this.uint32[Zt+12]=nt,this.float32[Zt+13]=vt,this.float32[Zt+14]=ot,this.float32[Zt+15]=Kt,this.float32[Zt+16]=Wt,d},a}(k);Ft.prototype.bytesPerElement=68,Pi("StructArrayLayout8i15ui1ul4f68",Ft);var ti=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d){var x=this.length;return this.resize(x+1),this.emplace(x,d)},a.prototype.emplace=function(d,x){return this.float32[1*d+0]=x,d},a}(k);ti.prototype.bytesPerElement=4,Pi("StructArrayLayout1f4",ti);var ui=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I){var M=this.length;return this.resize(M+1),this.emplace(M,d,x,I)},a.prototype.emplace=function(d,x,I,M){var r=3*d;return this.int16[r+0]=x,this.int16[r+1]=I,this.int16[r+2]=M,d},a}(k);ui.prototype.bytesPerElement=6,Pi("StructArrayLayout3i6",ui);var qt=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I){var M=this.length;return this.resize(M+1),this.emplace(M,d,x,I)},a.prototype.emplace=function(d,x,I,M){var r=4*d;return this.uint32[2*d+0]=x,this.uint16[r+2]=I,this.uint16[r+3]=M,d},a}(k);qt.prototype.bytesPerElement=8,Pi("StructArrayLayout1ul2ui8",qt);var qi=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x){var I=this.length;return this.resize(I+1),this.emplace(I,d,x)},a.prototype.emplace=function(d,x,I){var M=2*d;return this.uint16[M+0]=x,this.uint16[M+1]=I,d},a}(k);qi.prototype.bytesPerElement=4,Pi("StructArrayLayout2ui4",qi);var Ci=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d){var x=this.length;return this.resize(x+1),this.emplace(x,d)},a.prototype.emplace=function(d,x){return this.uint16[1*d+0]=x,d},a}(k);Ci.prototype.bytesPerElement=2,Pi("StructArrayLayout1ui2",Ci);var vn=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(d,x,I,M){var r=this.length;return this.resize(r+1),this.emplace(r,d,x,I,M)},a.prototype.emplace=function(d,x,I,M,r){var i=4*d;return this.float32[i+0]=x,this.float32[i+1]=I,this.float32[i+2]=M,this.float32[i+3]=r,d},a}(k);vn.prototype.bytesPerElement=16,Pi("StructArrayLayout4f16",vn);var p=function(t){function a(){t.apply(this,arguments)}t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a;var d={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return d.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},d.x1.get=function(){return this._structArray.int16[this._pos2+2]},d.y1.get=function(){return this._structArray.int16[this._pos2+3]},d.x2.get=function(){return this._structArray.int16[this._pos2+4]},d.y2.get=function(){return this._structArray.int16[this._pos2+5]},d.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},d.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},d.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},d.anchorPoint.get=function(){return new D(this.anchorPointX,this.anchorPointY)},Object.defineProperties(a.prototype,d),a}(A);p.prototype.size=20;var y=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.get=function(d){return new p(this,d)},a}(ct);Pi("CollisionBoxArray",y);var g=function(t){function a(){t.apply(this,arguments)}t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a;var d={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return d.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},d.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},d.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},d.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},d.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},d.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},d.segment.get=function(){return this._structArray.uint16[this._pos2+10]},d.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},d.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},d.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},d.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},d.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},d.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},d.placedOrientation.set=function(x){this._structArray.uint8[this._pos1+37]=x},d.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},d.hidden.set=function(x){this._structArray.uint8[this._pos1+38]=x},d.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},d.crossTileID.set=function(x){this._structArray.uint32[this._pos4+10]=x},d.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(a.prototype,d),a}(A);g.prototype.size=48;var w=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.get=function(d){return new g(this,d)},a}(Rt);Pi("PlacedSymbolArray",w);var L=function(t){function a(){t.apply(this,arguments)}t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a;var d={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return d.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},d.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},d.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},d.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},d.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},d.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},d.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},d.key.get=function(){return this._structArray.uint16[this._pos2+8]},d.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},d.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},d.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},d.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},d.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},d.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},d.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},d.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},d.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},d.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},d.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},d.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},d.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},d.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},d.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},d.crossTileID.set=function(x){this._structArray.uint32[this._pos4+12]=x},d.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},d.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},d.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},d.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(a.prototype,d),a}(A);L.prototype.size=68;var F=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.get=function(d){return new L(this,d)},a}(Ft);Pi("SymbolInstanceArray",F);var N=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.getoffsetX=function(d){return this.float32[1*d+0]},a}(ti);Pi("GlyphOffsetArray",N);var H=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.getx=function(d){return this.int16[3*d+0]},a.prototype.gety=function(d){return this.int16[3*d+1]},a.prototype.gettileUnitDistanceFromAnchor=function(d){return this.int16[3*d+2]},a}(ui);Pi("SymbolLineVertexArray",H);var Q=function(t){function a(){t.apply(this,arguments)}t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a;var d={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return d.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},d.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},d.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(a.prototype,d),a}(A);Q.prototype.size=8;var oe=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.get=function(d){return new Q(this,d)},a}(qt);Pi("FeatureIndexArray",oe);var ye=B([{name:"a_pos",components:2,type:"Int16"}],4).members,be=function(t){t===void 0&&(t=[]),this.segments=t};function Ee(t,a){return 256*(t=re(Math.floor(t),0,255))+re(Math.floor(a),0,255)}be.prototype.prepareSegment=function(t,a,d,x){var I=this.segments[this.segments.length-1];return t>be.MAX_VERTEX_ARRAY_LENGTH&&qe("Max vertices per segment is "+be.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!I||I.vertexLength+t>be.MAX_VERTEX_ARRAY_LENGTH||I.sortKey!==x)&&(I={vertexOffset:a.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},x!==void 0&&(I.sortKey=x),this.segments.push(I)),I},be.prototype.get=function(){return this.segments},be.prototype.destroy=function(){for(var t=0,a=this.segments;t<a.length;t+=1){var d=a[t];for(var x in d.vaos)d.vaos[x].destroy()}},be.simpleSegment=function(t,a,d,x){return new be([{vertexOffset:t,primitiveOffset:a,vertexLength:d,primitiveLength:x,vaos:{},sortKey:0}])},be.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pi("SegmentVector",be);var Be=B([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Re=h(function(t){t.exports=function(a,d){var x,I,M,r,i,u,m,b;for(I=a.length-(x=3&a.length),M=d,i=3432918353,u=461845907,b=0;b<I;)m=255&a.charCodeAt(b)|(255&a.charCodeAt(++b))<<8|(255&a.charCodeAt(++b))<<16|(255&a.charCodeAt(++b))<<24,++b,M=27492+(65535&(r=5*(65535&(M=(M^=m=(65535&(m=(m=(65535&m)*i+(((m>>>16)*i&65535)<<16)&4294967295)<<15|m>>>17))*u+(((m>>>16)*u&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(r>>>16)&65535)<<16);switch(m=0,x){case 3:m^=(255&a.charCodeAt(b+2))<<16;case 2:m^=(255&a.charCodeAt(b+1))<<8;case 1:M^=m=(65535&(m=(m=(65535&(m^=255&a.charCodeAt(b)))*i+(((m>>>16)*i&65535)<<16)&4294967295)<<15|m>>>17))*u+(((m>>>16)*u&65535)<<16)&4294967295}return M^=a.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0}}),We=h(function(t){t.exports=function(a,d){for(var x,I=a.length,M=d^I,r=0;I>=4;)x=1540483477*(65535&(x=255&a.charCodeAt(r)|(255&a.charCodeAt(++r))<<8|(255&a.charCodeAt(++r))<<16|(255&a.charCodeAt(++r))<<24))+((1540483477*(x>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(x=1540483477*(65535&(x^=x>>>24))+((1540483477*(x>>>16)&65535)<<16)),I-=4,++r;switch(I){case 3:M^=(255&a.charCodeAt(r+2))<<16;case 2:M^=(255&a.charCodeAt(r+1))<<8;case 1:M=1540483477*(65535&(M^=255&a.charCodeAt(r)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0}}),Ce=Re,Ve=We;Ce.murmur3=Re,Ce.murmur2=Ve;var et=function(){this.ids=[],this.positions=[],this.indexed=!1};et.prototype.add=function(t,a,d,x){this.ids.push(xt(t)),this.positions.push(a,d,x)},et.prototype.getPositions=function(t){for(var a=xt(t),d=0,x=this.ids.length-1;d<x;){var I=d+x>>1;this.ids[I]>=a?x=I:d=I+1}for(var M=[];this.ids[d]===a;)M.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return M},et.serialize=function(t,a){var d=new Float64Array(t.ids),x=new Uint32Array(t.positions);return function I(M,r,i,u){for(;i<u;){for(var m=M[i+u>>1],b=i-1,E=u+1;;){do b++;while(M[b]<m);do E--;while(M[E]>m);if(b>=E)break;Tt(M,b,E),Tt(r,3*b,3*E),Tt(r,3*b+1,3*E+1),Tt(r,3*b+2,3*E+2)}E-i<u-E?(I(M,r,i,E),i=E+1):(I(M,r,E+1,u),u=E)}}(d,x,0,d.length-1),a&&a.push(d.buffer,x.buffer),{ids:d,positions:x}},et.deserialize=function(t){var a=new et;return a.ids=t.ids,a.positions=t.positions,a.indexed=!0,a};var dt=Math.pow(2,53)-1;function xt(t){var a=+t;return!isNaN(a)&&a<=dt?a:Ce(String(t))}function Tt(t,a,d){var x=t[a];t[a]=t[d],t[d]=x}Pi("FeaturePositionMap",et);var kt=function(t,a){this.gl=t.gl,this.location=a},Ht=function(t){function a(d,x){t.call(this,d,x),this.current=0}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.set=function(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))},a}(kt),oi=function(t){function a(d,x){t.call(this,d,x),this.current=0}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.set=function(d){this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))},a}(kt),ri=function(t){function a(d,x){t.call(this,d,x),this.current=[0,0]}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))},a}(kt),Ti=function(t){function a(d,x){t.call(this,d,x),this.current=[0,0,0]}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))},a}(kt),Hi=function(t){function a(d,x){t.call(this,d,x),this.current=[0,0,0,0]}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3]))},a}(kt),Qi=function(t){function a(d,x){t.call(this,d,x),this.current=hn.transparent}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.set=function(d){d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a))},a}(kt),Gi=new Float32Array(16),Xn=function(t){function a(d,x){t.call(this,d,x),this.current=Gi}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.set=function(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(var x=1;x<16;x++)if(d[x]!==this.current[x]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}},a}(kt);function Li(t){return[Ee(255*t.r,255*t.g),Ee(255*t.b,255*t.a)]}var pn=function(t,a,d){this.value=t,this.uniformNames=a.map(function(x){return"u_"+x}),this.type=d};pn.prototype.setUniform=function(t,a,d){t.set(d.constantOr(this.value))},pn.prototype.getBinding=function(t,a,d){return this.type==="color"?new Qi(t,a):new oi(t,a)};var Fn=function(t,a){this.uniformNames=a.map(function(d){return"u_"+d}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Fn.prototype.setConstantPatternPositions=function(t,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=t.tlbr},Fn.prototype.setUniform=function(t,a,d,x){var I=x==="u_pattern_to"?this.patternTo:x==="u_pattern_from"?this.patternFrom:x==="u_pixel_ratio_to"?this.pixelRatioTo:x==="u_pixel_ratio_from"?this.pixelRatioFrom:null;I&&t.set(I)},Fn.prototype.getBinding=function(t,a,d){return d.substr(0,9)==="u_pattern"?new Hi(t,a):new oi(t,a)};var cn=function(t,a,d,x){this.expression=t,this.type=d,this.maxValue=0,this.paintVertexAttributes=a.map(function(I){return{name:"a_"+I,type:"Float32",components:d==="color"?2:1,offset:0}}),this.paintVertexArray=new x};cn.prototype.populatePaintArray=function(t,a,d,x,I){var M=this.paintVertexArray.length,r=this.expression.evaluate(new ci(0),a,{},x,[],I);this.paintVertexArray.resize(t),this._setPaintValue(M,t,r)},cn.prototype.updatePaintArray=function(t,a,d,x){var I=this.expression.evaluate({zoom:0},d,x);this._setPaintValue(t,a,I)},cn.prototype._setPaintValue=function(t,a,d){if(this.type==="color")for(var x=Li(d),I=t;I<a;I++)this.paintVertexArray.emplace(I,x[0],x[1]);else{for(var M=t;M<a;M++)this.paintVertexArray.emplace(M,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}},cn.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},cn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var an=function(t,a,d,x,I,M){this.expression=t,this.uniformNames=a.map(function(r){return"u_"+r+"_t"}),this.type=d,this.useIntegerZoom=x,this.zoom=I,this.maxValue=0,this.paintVertexAttributes=a.map(function(r){return{name:"a_"+r,type:"Float32",components:d==="color"?4:2,offset:0}}),this.paintVertexArray=new M};an.prototype.populatePaintArray=function(t,a,d,x,I){var M=this.expression.evaluate(new ci(this.zoom),a,{},x,[],I),r=this.expression.evaluate(new ci(this.zoom+1),a,{},x,[],I),i=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(i,t,M,r)},an.prototype.updatePaintArray=function(t,a,d,x){var I=this.expression.evaluate({zoom:this.zoom},d,x),M=this.expression.evaluate({zoom:this.zoom+1},d,x);this._setPaintValue(t,a,I,M)},an.prototype._setPaintValue=function(t,a,d,x){if(this.type==="color")for(var I=Li(d),M=Li(x),r=t;r<a;r++)this.paintVertexArray.emplace(r,I[0],I[1],M[0],M[1]);else{for(var i=t;i<a;i++)this.paintVertexArray.emplace(i,d,x);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(x))}},an.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},an.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},an.prototype.setUniform=function(t,a){var d=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,x=re(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);t.set(x)},an.prototype.getBinding=function(t,a,d){return new oi(t,a)};var wn=function(t,a,d,x,I,M){this.expression=t,this.type=a,this.useIntegerZoom=d,this.zoom=x,this.layerId=M,this.zoomInPaintVertexArray=new I,this.zoomOutPaintVertexArray=new I};wn.prototype.populatePaintArray=function(t,a,d){var x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(x,t,a.patterns&&a.patterns[this.layerId],d)},wn.prototype.updatePaintArray=function(t,a,d,x,I){this._setPaintValues(t,a,d.patterns&&d.patterns[this.layerId],I)},wn.prototype._setPaintValues=function(t,a,d,x){if(x&&d){var I=x[d.min],M=x[d.mid],r=x[d.max];if(I&&M&&r)for(var i=t;i<a;i++)this.zoomInPaintVertexArray.emplace(i,M.tl[0],M.tl[1],M.br[0],M.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],M.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(i,M.tl[0],M.tl[1],M.br[0],M.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],M.pixelRatio,r.pixelRatio)}},wn.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Be.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Be.members,this.expression.isStateDependent))},wn.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var tn=function(t,a,d){this.binders={},this._buffers=[];var x=[];for(var I in t.paint._values)if(d(I)){var M=t.paint.get(I);if(M instanceof na&&cs(M.property.specification)){var r=$r(I,t.type),i=M.value,u=M.property.specification.type,m=M.property.useIntegerZoom,b=M.property.specification["property-type"],E=b==="cross-faded"||b==="cross-faded-data-driven";if(i.kind==="constant")this.binders[I]=E?new Fn(i.value,r):new pn(i.value,r,u),x.push("/u_"+I);else if(i.kind==="source"||E){var T=uo(I,u,"source");this.binders[I]=E?new wn(i,u,m,a,T,t.id):new cn(i,r,u,T),x.push("/a_"+I)}else{var z=uo(I,u,"composite");this.binders[I]=new an(i,r,u,m,a,z),x.push("/z_"+I)}}}this.cacheKey=x.sort().join("")};tn.prototype.getMaxValue=function(t){var a=this.binders[t];return a instanceof cn||a instanceof an?a.maxValue:0},tn.prototype.populatePaintArrays=function(t,a,d,x,I){for(var M in this.binders){var r=this.binders[M];(r instanceof cn||r instanceof an||r instanceof wn)&&r.populatePaintArray(t,a,d,x,I)}},tn.prototype.setConstantPatternPositions=function(t,a){for(var d in this.binders){var x=this.binders[d];x instanceof Fn&&x.setConstantPatternPositions(t,a)}},tn.prototype.updatePaintArrays=function(t,a,d,x,I){var M=!1;for(var r in t)for(var i=0,u=a.getPositions(r);i<u.length;i+=1){var m=u[i],b=d.feature(m.index);for(var E in this.binders){var T=this.binders[E];if((T instanceof cn||T instanceof an||T instanceof wn)&&T.expression.isStateDependent===!0){var z=x.paint.get(E);T.expression=z.value,T.updatePaintArray(m.start,m.end,b,t[r],I),M=!0}}}return M},tn.prototype.defines=function(){var t=[];for(var a in this.binders){var d=this.binders[a];(d instanceof pn||d instanceof Fn)&&t.push.apply(t,d.uniformNames.map(function(x){return"#define HAS_UNIFORM_"+x}))}return t},tn.prototype.getBinderAttributes=function(){var t=[];for(var a in this.binders){var d=this.binders[a];if(d instanceof cn||d instanceof an)for(var x=0;x<d.paintVertexAttributes.length;x++)t.push(d.paintVertexAttributes[x].name);else if(d instanceof wn)for(var I=0;I<Be.members.length;I++)t.push(Be.members[I].name)}return t},tn.prototype.getBinderUniforms=function(){var t=[];for(var a in this.binders){var d=this.binders[a];if(d instanceof pn||d instanceof Fn||d instanceof an)for(var x=0,I=d.uniformNames;x<I.length;x+=1)t.push(I[x])}return t},tn.prototype.getPaintVertexBuffers=function(){return this._buffers},tn.prototype.getUniforms=function(t,a){var d=[];for(var x in this.binders){var I=this.binders[x];if(I instanceof pn||I instanceof Fn||I instanceof an)for(var M=0,r=I.uniformNames;M<r.length;M+=1){var i=r[M];if(a[i]){var u=I.getBinding(t,a[i],i);d.push({name:i,property:x,binding:u})}}}return d},tn.prototype.setUniforms=function(t,a,d,x){for(var I=0,M=a;I<M.length;I+=1){var r=M[I],i=r.name,u=r.property;this.binders[u].setUniform(r.binding,x,d.get(u),i)}},tn.prototype.updatePaintBuffers=function(t){for(var a in this._buffers=[],this.binders){var d=this.binders[a];if(t&&d instanceof wn){var x=t.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(d instanceof cn||d instanceof an)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}},tn.prototype.upload=function(t){for(var a in this.binders){var d=this.binders[a];(d instanceof cn||d instanceof an||d instanceof wn)&&d.upload(t)}this.updatePaintBuffers()},tn.prototype.destroy=function(){for(var t in this.binders){var a=this.binders[t];(a instanceof cn||a instanceof an||a instanceof wn)&&a.destroy()}};var Yi=function(t,a,d){d===void 0&&(d=function(){return!0}),this.programConfigurations={};for(var x=0,I=t;x<I.length;x+=1){var M=I[x];this.programConfigurations[M.id]=new tn(M,a,d)}this.needsUpload=!1,this._featureMap=new et,this._bufferOffset=0};function $r(t,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(a+"-","").replace(/-/g,"_")]}function uo(t,a,d){var x={color:{source:ge,composite:vn},number:{source:ti,composite:ge}},I=function(M){return{"line-pattern":{source:Ae,composite:Ae},"fill-pattern":{source:Ae,composite:Ae},"fill-extrusion-pattern":{source:Ae,composite:Ae}}[M]}(t);return I&&I[d]||x[a][d]}Yi.prototype.populatePaintArrays=function(t,a,d,x,I,M){for(var r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,a,x,I,M);a.id!==void 0&&this._featureMap.add(a.id,d,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Yi.prototype.updatePaintArrays=function(t,a,d,x){for(var I=0,M=d;I<M.length;I+=1){var r=M[I];this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(t,this._featureMap,a,r,x)||this.needsUpload}},Yi.prototype.get=function(t){return this.programConfigurations[t]},Yi.prototype.upload=function(t){if(this.needsUpload){for(var a in this.programConfigurations)this.programConfigurations[a].upload(t);this.needsUpload=!1}},Yi.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Pi("ConstantBinder",pn),Pi("CrossFadedConstantBinder",Fn),Pi("SourceExpressionBinder",cn),Pi("CrossFadedCompositeBinder",wn),Pi("CompositeExpressionBinder",an),Pi("ProgramConfiguration",tn,{omit:["_buffers"]}),Pi("ProgramConfigurationSet",Yi);var wo=Math.pow(2,14)-1,Ko=-wo-1;function io(t){for(var a=8192/t.extent,d=t.loadGeometry(),x=0;x<d.length;x++)for(var I=d[x],M=0;M<I.length;M++){var r=I[M],i=Math.round(r.x*a),u=Math.round(r.y*a);r.x=re(i,Ko,wo),r.y=re(u,Ko,wo),(i<r.x||i>r.x+1||u<r.y||u>r.y+1)&&qe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return d}function er(t,a){return{type:t.type,id:t.id,properties:t.properties,geometry:a?io(t):[]}}function ba(t,a,d,x,I){t.emplaceBack(2*a+(x+1)/2,2*d+(I+1)/2)}var ha=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(a){return a.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Z,this.indexArray=new jt,this.segments=new be,this.programConfigurations=new Yi(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(a){return a.isStateDependent()}).map(function(a){return a.id})};function Ga(t,a){for(var d=0;d<t.length;d++)if(Ys(a,t[d]))return!0;for(var x=0;x<a.length;x++)if(Ys(t,a[x]))return!0;return!!Qu(t,a)}function Mo(t,a,d){return!!Ys(t,a)||!!vl(a,t,d)}function Ha(t,a){if(t.length===1)return wu(a,t[0]);for(var d=0;d<a.length;d++)for(var x=a[d],I=0;I<x.length;I++)if(Ys(t,x[I]))return!0;for(var M=0;M<t.length;M++)if(wu(a,t[M]))return!0;for(var r=0;r<a.length;r++)if(Qu(t,a[r]))return!0;return!1}function Za(t,a,d){if(t.length>1){if(Qu(t,a))return!0;for(var x=0;x<a.length;x++)if(vl(a[x],t,d))return!0}for(var I=0;I<t.length;I++)if(vl(t[I],a,d))return!0;return!1}function Qu(t,a){if(t.length===0||a.length===0)return!1;for(var d=0;d<t.length-1;d++)for(var x=t[d],I=t[d+1],M=0;M<a.length-1;M++)if($u(x,I,a[M],a[M+1]))return!0;return!1}function $u(t,a,d,x){return Mt(t,d,x)!==Mt(a,d,x)&&Mt(t,a,d)!==Mt(t,a,x)}function vl(t,a,d){var x=d*d;if(a.length===1)return t.distSqr(a[0])<x;for(var I=1;I<a.length;I++)if(ec(t,a[I-1],a[I])<x)return!0;return!1}function ec(t,a,d){var x=a.distSqr(d);if(x===0)return t.distSqr(a);var I=((t.x-a.x)*(d.x-a.x)+(t.y-a.y)*(d.y-a.y))/x;return t.distSqr(I<0?a:I>1?d:d.sub(a)._mult(I)._add(a))}function wu(t,a){for(var d,x,I,M=!1,r=0;r<t.length;r++)for(var i=0,u=(d=t[r]).length-1;i<d.length;u=i++)(x=d[i]).y>a.y!=(I=d[u]).y>a.y&&a.x<(I.x-x.x)*(a.y-x.y)/(I.y-x.y)+x.x&&(M=!M);return M}function Ys(t,a){for(var d=!1,x=0,I=t.length-1;x<t.length;I=x++){var M=t[x],r=t[I];M.y>a.y!=r.y>a.y&&a.x<(r.x-M.x)*(a.y-M.y)/(r.y-M.y)+M.x&&(d=!d)}return d}function Eu(t,a,d){var x=d[0],I=d[2];if(t.x<x.x&&a.x<x.x||t.x>I.x&&a.x>I.x||t.y<x.y&&a.y<x.y||t.y>I.y&&a.y>I.y)return!1;var M=Mt(t,a,d[0]);return M!==Mt(t,a,d[1])||M!==Mt(t,a,d[2])||M!==Mt(t,a,d[3])}function Ds(t,a,d){var x=a.paint.get(t).value;return x.kind==="constant"?x.value:d.programConfigurations.get(a.id).getMaxValue(t)}function Lo(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Wa(t,a,d,x,I){if(!a[0]&&!a[1])return t;var M=D.convert(a)._mult(I);d==="viewport"&&M._rotate(-x);for(var r=[],i=0;i<t.length;i++)r.push(t[i].sub(M));return r}ha.prototype.populate=function(t,a,d){var x=this.layers[0],I=[],M=null;x.type==="circle"&&(M=x.layout.get("circle-sort-key"));for(var r=0,i=t;r<i.length;r+=1){var u=i[r],m=u.feature,b=u.id,E=u.index,T=u.sourceLayerIndex,z=this.layers[0]._featureFilter.needGeometry,U=er(m,z);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),U,d)){var V=M?M.evaluate(U,{},d):void 0,G={id:b,properties:m.properties,type:m.type,sourceLayerIndex:T,index:E,geometry:z?U.geometry:io(m),patterns:{},sortKey:V};I.push(G)}}M&&I.sort(function(Ye,it){return Ye.sortKey-it.sortKey});for(var q=0,K=I;q<K.length;q+=1){var $=K[q],te=$.geometry,de=$.index,_e=$.sourceLayerIndex,Oe=t[de].feature;this.addFeature($,te,de,d),a.featureIndex.insert(Oe,te,de,_e,this.index)}},ha.prototype.update=function(t,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,d)},ha.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ha.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ha.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ye),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ha.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ha.prototype.addFeature=function(t,a,d,x){for(var I=0,M=a;I<M.length;I+=1)for(var r=0,i=M[I];r<i.length;r+=1){var u=i[r],m=u.x,b=u.y;if(!(m<0||m>=8192||b<0||b>=8192)){var E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),T=E.vertexLength;ba(this.layoutVertexArray,m,b,-1,-1),ba(this.layoutVertexArray,m,b,1,-1),ba(this.layoutVertexArray,m,b,1,1),ba(this.layoutVertexArray,m,b,-1,1),this.indexArray.emplaceBack(T,T+1,T+2),this.indexArray.emplaceBack(T,T+3,T+2),E.vertexLength+=4,E.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,d,{},x)},Pi("CircleBucket",ha,{omit:["layers"]});var Vl=new C({"circle-sort-key":new fi(Ie.layout_circle["circle-sort-key"])}),Rs={paint:new C({"circle-radius":new fi(Ie.paint_circle["circle-radius"]),"circle-color":new fi(Ie.paint_circle["circle-color"]),"circle-blur":new fi(Ie.paint_circle["circle-blur"]),"circle-opacity":new fi(Ie.paint_circle["circle-opacity"]),"circle-translate":new gi(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new gi(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gi(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gi(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new fi(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new fi(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new fi(Ie.paint_circle["circle-stroke-opacity"])}),layout:Vl},ur=typeof Float32Array!="undefined"?Float32Array:Array;function xa(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Oa(t,a,d){var x=a[0],I=a[1],M=a[2],r=a[3],i=a[4],u=a[5],m=a[6],b=a[7],E=a[8],T=a[9],z=a[10],U=a[11],V=a[12],G=a[13],q=a[14],K=a[15],$=d[0],te=d[1],de=d[2],_e=d[3];return t[0]=$*x+te*i+de*E+_e*V,t[1]=$*I+te*u+de*T+_e*G,t[2]=$*M+te*m+de*z+_e*q,t[3]=$*r+te*b+de*U+_e*K,t[4]=($=d[4])*x+(te=d[5])*i+(de=d[6])*E+(_e=d[7])*V,t[5]=$*I+te*u+de*T+_e*G,t[6]=$*M+te*m+de*z+_e*q,t[7]=$*r+te*b+de*U+_e*K,t[8]=($=d[8])*x+(te=d[9])*i+(de=d[10])*E+(_e=d[11])*V,t[9]=$*I+te*u+de*T+_e*G,t[10]=$*M+te*m+de*z+_e*q,t[11]=$*r+te*b+de*U+_e*K,t[12]=($=d[12])*x+(te=d[13])*i+(de=d[14])*E+(_e=d[15])*V,t[13]=$*I+te*u+de*T+_e*G,t[14]=$*M+te*m+de*z+_e*q,t[15]=$*r+te*b+de*U+_e*K,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,a=0,d=arguments.length;d--;)a+=t[d]*t[d];return Math.sqrt(a)});var Iu,tc=Oa;function ic(t,a,d){var x=a[0],I=a[1],M=a[2],r=a[3];return t[0]=d[0]*x+d[4]*I+d[8]*M+d[12]*r,t[1]=d[1]*x+d[5]*I+d[9]*M+d[13]*r,t[2]=d[2]*x+d[6]*I+d[10]*M+d[14]*r,t[3]=d[3]*x+d[7]*I+d[11]*M+d[15]*r,t}Iu=new ur(3),ur!=Float32Array&&(Iu[0]=0,Iu[1]=0,Iu[2]=0),function(){var t=new ur(4);ur!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var Md=(function(){var t=new ur(2);ur!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function a(d){t.call(this,d,Rs)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.createBucket=function(d){return new ha(d)},a.prototype.queryRadius=function(d){var x=d;return Ds("circle-radius",this,x)+Ds("circle-stroke-width",this,x)+Lo(this.paint.get("circle-translate"))},a.prototype.queryIntersectsFeature=function(d,x,I,M,r,i,u,m){for(var b=Wa(d,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i.angle,u),E=this.paint.get("circle-radius").evaluate(x,I)+this.paint.get("circle-stroke-width").evaluate(x,I),T=this.paint.get("circle-pitch-alignment")==="map",z=T?b:function(Oe,Ye){return Oe.map(function(it){return bl(it,Ye)})}(b,m),U=T?E*u:E,V=0,G=M;V<G.length;V+=1)for(var q=0,K=G[V];q<K.length;q+=1){var $=K[q],te=T?$:bl($,m),de=U,_e=ic([],[$.x,$.y,0,1],m);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?de*=_e[3]/i.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(de*=i.cameraToCenterDistance/_e[3]),Mo(z,te,de))return!0}return!1},a}(l));function bl(t,a){var d=ic([],[t.x,t.y,0,1],a);return new D(d[0]/d[3],d[1]/d[3])}var Ld=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a}(ha);function xl(t,a,d,x){var I=a.width,M=a.height;if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==I*M*d)throw new RangeError("mismatched image size")}else x=new Uint8Array(I*M*d);return t.width=I,t.height=M,t.data=x,t}function Lc(t,a,d){var x=a.width,I=a.height;if(x!==t.width||I!==t.height){var M=xl({},{width:x,height:I},d);Pd(t,M,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,x),height:Math.min(t.height,I)},d),t.width=x,t.height=I,t.data=M.data}}function Pd(t,a,d,x,I,M){if(I.width===0||I.height===0)return a;if(I.width>t.width||I.height>t.height||d.x>t.width-I.width||d.y>t.height-I.height)throw new RangeError("out of range source coordinates for image copy");if(I.width>a.width||I.height>a.height||x.x>a.width-I.width||x.y>a.height-I.height)throw new RangeError("out of range destination coordinates for image copy");for(var r=t.data,i=a.data,u=0;u<I.height;u++)for(var m=((d.y+u)*t.width+d.x)*M,b=((x.y+u)*a.width+x.x)*M,E=0;E<I.width*M;E++)i[b+E]=r[m+E];return a}Pi("HeatmapBucket",Ld,{omit:["layers"]});var Pc=function(t,a){xl(this,t,1,a)};Pc.prototype.resize=function(t){Lc(this,t,1)},Pc.prototype.clone=function(){return new Pc({width:this.width,height:this.height},new Uint8Array(this.data))},Pc.copy=function(t,a,d,x,I){Pd(t,a,d,x,I,1)};var wa=function(t,a){xl(this,t,4,a)};wa.prototype.resize=function(t){Lc(this,t,4)},wa.prototype.replace=function(t,a){a?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},wa.prototype.clone=function(){return new wa({width:this.width,height:this.height},new Uint8Array(this.data))},wa.copy=function(t,a,d,x,I){Pd(t,a,d,x,I,4)},Pi("AlphaImage",Pc),Pi("RGBAImage",wa);var Ef={paint:new C({"heatmap-radius":new fi(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new fi(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gi(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ca(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gi(Ie.paint_heatmap["heatmap-opacity"])})};function zd(t){var a={},d=t.resolution||256,x=t.clips?t.clips.length:1,I=t.image||new wa({width:d,height:x}),M=function(U,V,G){a[t.evaluationKey]=G;var q=t.expression.evaluate(a);I.data[U+V+0]=Math.floor(255*q.r/q.a),I.data[U+V+1]=Math.floor(255*q.g/q.a),I.data[U+V+2]=Math.floor(255*q.b/q.a),I.data[U+V+3]=Math.floor(255*q.a)};if(t.clips)for(var r=0,i=0;r<x;++r,i+=4*d)for(var u=0,m=0;u<d;u++,m+=4){var b=u/(d-1),E=t.clips[r];M(i,m,E.start*(1-b)+E.end*b)}else for(var T=0,z=0;T<d;T++,z+=4)M(0,z,T/(d-1));return I}var jh=function(t){function a(d){t.call(this,d,Ef),this._updateColorRamp()}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.createBucket=function(d){return new Ld(d)},a.prototype._handleSpecialPaintPropertyUpdate=function(d){d==="heatmap-color"&&this._updateColorRamp()},a.prototype._updateColorRamp=function(){this.colorRamp=zd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},a.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},a.prototype.queryRadius=function(){return 0},a.prototype.queryIntersectsFeature=function(){return!1},a.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},a}(l),Os={paint:new C({"hillshade-illumination-direction":new gi(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new gi(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gi(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gi(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gi(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gi(Ie.paint_hillshade["hillshade-accent-color"])})},If=function(t){function a(d){t.call(this,d,Os)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},a}(l),Qm=B([{name:"a_pos",components:2,type:"Int16"}],4).members,wp=sh,$m=sh;function sh(t,a,d){d=d||2;var x,I,M,r,i,u,m,b=a&&a.length,E=b?a[0]*d:t.length,T=qh(t,0,E,d,!0),z=[];if(!T||T.next===T.prev)return z;if(b&&(T=function(V,G,q,K){var $,te,de,_e=[];for($=0,te=G.length;$<te;$++)(de=qh(V,G[$]*K,$<te-1?G[$+1]*K:V.length,K,!1))===de.next&&(de.steiner=!0),_e.push(Ip(de));for(_e.sort(ng),$=0;$<_e.length;$++)rg(_e[$],q),q=Su(q,q.next);return q}(t,a,T,d)),t.length>80*d){x=M=t[0],I=r=t[1];for(var U=d;U<E;U+=d)(i=t[U])<x&&(x=i),(u=t[U+1])<I&&(I=u),i>M&&(M=i),u>r&&(r=u);m=(m=Math.max(M-x,r-I))!==0?1/m:0}return Qs(T,z,d,x,I,m),z}function qh(t,a,d,x,I){var M,r;if(I===Wh(t,a,d,x)>0)for(M=a;M<d;M+=x)r=Sp(M,t[M],t[M+1],r);else for(M=d-x;M>=a;M-=x)r=Sp(M,t[M],t[M+1],r);return r&&fo(r,r.next)&&(hh(r),r=r.next),r}function Su(t,a){if(!t)return t;a||(a=t);var d,x=t;do if(d=!1,x.steiner||!fo(x,x.next)&&Po(x.prev,x,x.next)!==0)x=x.next;else{if(hh(x),(x=a=x.prev)===x.next)break;d=!0}while(d||x!==a);return a}function Qs(t,a,d,x,I,M,r){if(t){!r&&M&&function(b,E,T,z){var U=b;do U.z===null&&(U.z=Ep(U.x,U.y,E,T,z)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==b);U.prevZ.nextZ=null,U.prevZ=null,function(V){var G,q,K,$,te,de,_e,Oe,Ye=1;do{for(q=V,V=null,te=null,de=0;q;){for(de++,K=q,_e=0,G=0;G<Ye&&(_e++,K=K.nextZ);G++);for(Oe=Ye;_e>0||Oe>0&&K;)_e!==0&&(Oe===0||!K||q.z<=K.z)?($=q,q=q.nextZ,_e--):($=K,K=K.nextZ,Oe--),te?te.nextZ=$:V=$,$.prevZ=te,te=$;q=K}te.nextZ=null,Ye*=2}while(de>1)}(U)}(t,x,I,M);for(var i,u,m=t;t.prev!==t.next;)if(i=t.prev,u=t.next,M?eg(t,x,I,M):Gh(t))a.push(i.i/d),a.push(t.i/d),a.push(u.i/d),hh(t),t=u.next,m=u.next;else if((t=u)===m){r?r===1?Qs(t=tg(Su(t),a,d),a,d,x,I,M,2):r===2&&ig(t,a,d,x,I,M):Qs(Su(t),a,d,x,I,M,1);break}}}function Gh(t){var a=t.prev,d=t,x=t.next;if(Po(a,d,x)>=0)return!1;for(var I=t.next.next;I!==t.prev;){if(lh(a.x,a.y,d.x,d.y,x.x,x.y,I.x,I.y)&&Po(I.prev,I,I.next)>=0)return!1;I=I.next}return!0}function eg(t,a,d,x){var I=t.prev,M=t,r=t.next;if(Po(I,M,r)>=0)return!1;for(var i=I.x>M.x?I.x>r.x?I.x:r.x:M.x>r.x?M.x:r.x,u=I.y>M.y?I.y>r.y?I.y:r.y:M.y>r.y?M.y:r.y,m=Ep(I.x<M.x?I.x<r.x?I.x:r.x:M.x<r.x?M.x:r.x,I.y<M.y?I.y<r.y?I.y:r.y:M.y<r.y?M.y:r.y,a,d,x),b=Ep(i,u,a,d,x),E=t.prevZ,T=t.nextZ;E&&E.z>=m&&T&&T.z<=b;){if(E!==t.prev&&E!==t.next&&lh(I.x,I.y,M.x,M.y,r.x,r.y,E.x,E.y)&&Po(E.prev,E,E.next)>=0||(E=E.prevZ,T!==t.prev&&T!==t.next&&lh(I.x,I.y,M.x,M.y,r.x,r.y,T.x,T.y)&&Po(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;E&&E.z>=m;){if(E!==t.prev&&E!==t.next&&lh(I.x,I.y,M.x,M.y,r.x,r.y,E.x,E.y)&&Po(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;T&&T.z<=b;){if(T!==t.prev&&T!==t.next&&lh(I.x,I.y,M.x,M.y,r.x,r.y,T.x,T.y)&&Po(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function tg(t,a,d){var x=t;do{var I=x.prev,M=x.next.next;!fo(I,M)&&Hh(I,x,x.next,M)&&nc(I,M)&&nc(M,I)&&(a.push(I.i/d),a.push(x.i/d),a.push(M.i/d),hh(x),hh(x.next),x=t=M),x=x.next}while(x!==t);return Su(x)}function ig(t,a,d,x,I,M){var r=t;do{for(var i=r.next.next;i!==r.prev;){if(r.i!==i.i&&uh(r,i)){var u=ch(r,i);return r=Su(r,r.next),u=Su(u,u.next),Qs(r,a,d,x,I,M),void Qs(u,a,d,x,I,M)}i=i.next}r=r.next}while(r!==t)}function ng(t,a){return t.x-a.x}function rg(t,a){if(a=function(x,I){var M,r=I,i=x.x,u=x.y,m=-1/0;do{if(u<=r.y&&u>=r.next.y&&r.next.y!==r.y){var b=r.x+(u-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(b<=i&&b>m){if(m=b,b===i){if(u===r.y)return r;if(u===r.next.y)return r.next}M=r.x<r.next.x?r:r.next}}r=r.next}while(r!==I);if(!M)return null;if(i===m)return M;var E,T=M,z=M.x,U=M.y,V=1/0;r=M;do i>=r.x&&r.x>=z&&i!==r.x&&lh(u<U?i:m,u,z,U,u<U?m:i,u,r.x,r.y)&&(E=Math.abs(u-r.y)/(i-r.x),nc(r,x)&&(E<V||E===V&&(r.x>M.x||r.x===M.x&&og(M,r)))&&(M=r,V=E)),r=r.next;while(r!==T);return M}(t,a)){var d=ch(a,t);Su(a,a.next),Su(d,d.next)}}function og(t,a){return Po(t.prev,t,a.prev)<0&&Po(a.next,t,t.next)<0}function Ep(t,a,d,x,I){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-d)*I)|t<<8))|t<<4))|t<<2))|t<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-x)*I)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function Ip(t){var a=t,d=t;do(a.x<d.x||a.x===d.x&&a.y<d.y)&&(d=a),a=a.next;while(a!==t);return d}function lh(t,a,d,x,I,M,r,i){return(I-r)*(a-i)-(t-r)*(M-i)>=0&&(t-r)*(x-i)-(d-r)*(a-i)>=0&&(d-r)*(M-i)-(I-r)*(x-i)>=0}function uh(t,a){return t.next.i!==a.i&&t.prev.i!==a.i&&!function(d,x){var I=d;do{if(I.i!==d.i&&I.next.i!==d.i&&I.i!==x.i&&I.next.i!==x.i&&Hh(I,I.next,d,x))return!0;I=I.next}while(I!==d);return!1}(t,a)&&(nc(t,a)&&nc(a,t)&&function(d,x){var I=d,M=!1,r=(d.x+x.x)/2,i=(d.y+x.y)/2;do I.y>i!=I.next.y>i&&I.next.y!==I.y&&r<(I.next.x-I.x)*(i-I.y)/(I.next.y-I.y)+I.x&&(M=!M),I=I.next;while(I!==d);return M}(t,a)&&(Po(t.prev,t,a.prev)||Po(t,a.prev,a))||fo(t,a)&&Po(t.prev,t,t.next)>0&&Po(a.prev,a,a.next)>0)}function Po(t,a,d){return(a.y-t.y)*(d.x-a.x)-(a.x-t.x)*(d.y-a.y)}function fo(t,a){return t.x===a.x&&t.y===a.y}function Hh(t,a,d,x){var I=zc(Po(t,a,d)),M=zc(Po(t,a,x)),r=zc(Po(d,x,t)),i=zc(Po(d,x,a));return I!==M&&r!==i||!(I!==0||!Zh(t,d,a))||!(M!==0||!Zh(t,x,a))||!(r!==0||!Zh(d,t,x))||!(i!==0||!Zh(d,a,x))}function Zh(t,a,d){return a.x<=Math.max(t.x,d.x)&&a.x>=Math.min(t.x,d.x)&&a.y<=Math.max(t.y,d.y)&&a.y>=Math.min(t.y,d.y)}function zc(t){return t>0?1:t<0?-1:0}function nc(t,a){return Po(t.prev,t,t.next)<0?Po(t,a,t.next)>=0&&Po(t,t.prev,a)>=0:Po(t,a,t.prev)<0||Po(t,t.next,a)<0}function ch(t,a){var d=new Dc(t.i,t.x,t.y),x=new Dc(a.i,a.x,a.y),I=t.next,M=a.prev;return t.next=a,a.prev=t,d.next=I,I.prev=d,x.next=d,d.prev=x,M.next=x,x.prev=M,x}function Sp(t,a,d,x){var I=new Dc(t,a,d);return x?(I.next=x.next,I.prev=x,x.next.prev=I,x.next=I):(I.prev=I,I.next=I),I}function hh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Dc(t,a,d){this.i=t,this.x=a,this.y=d,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wh(t,a,d,x){for(var I=0,M=a,r=d-x;M<d;M+=x)I+=(t[r]-t[M])*(t[M+1]+t[r+1]),r=M;return I}function Tp(t,a,d,x,I){(function M(r,i,u,m,b){for(;m>u;){if(m-u>600){var E=m-u+1,T=i-u+1,z=Math.log(E),U=.5*Math.exp(2*z/3),V=.5*Math.sqrt(z*U*(E-U)/E)*(T-E/2<0?-1:1);M(r,i,Math.max(u,Math.floor(i-T*U/E+V)),Math.min(m,Math.floor(i+(E-T)*U/E+V)),b)}var G=r[i],q=u,K=m;for(dh(r,u,i),b(r[m],G)>0&&dh(r,u,m);q<K;){for(dh(r,q,K),q++,K--;b(r[q],G)<0;)q++;for(;b(r[K],G)>0;)K--}b(r[u],G)===0?dh(r,u,K):dh(r,++K,m),K<=i&&(u=K+1),i<=K&&(m=K-1)}})(t,a,d||0,x||t.length-1,I||ag)}function dh(t,a,d){var x=t[a];t[a]=t[d],t[d]=x}function ag(t,a){return t<a?-1:t>a?1:0}function Dd(t,a){var d=t.length;if(d<=1)return[t];for(var x,I,M=[],r=0;r<d;r++){var i=li(t[r]);i!==0&&(t[r].area=Math.abs(i),I===void 0&&(I=i<0),I===i<0?(x&&M.push(x),x=[t[r]]):x.push(t[r]))}if(x&&M.push(x),a>1)for(var u=0;u<M.length;u++)M[u].length<=a||(Tp(M[u],a,1,M[u].length-1,Xh),M[u]=M[u].slice(0,a));return M}function Xh(t,a){return a.area-t.area}function Ap(t,a,d){for(var x=d.patternDependencies,I=!1,M=0,r=a;M<r.length;M+=1){var i=r[M].paint.get(t+"-pattern");i.isConstant()||(I=!0);var u=i.constantOr(null);u&&(I=!0,x[u.to]=!0,x[u.from]=!0)}return I}function Kh(t,a,d,x,I){for(var M=I.patternDependencies,r=0,i=a;r<i.length;r+=1){var u=i[r],m=u.paint.get(t+"-pattern").value;if(m.kind!=="constant"){var b=m.evaluate({zoom:x-1},d,{},I.availableImages),E=m.evaluate({zoom:x},d,{},I.availableImages),T=m.evaluate({zoom:x+1},d,{},I.availableImages);E=E&&E.name?E.name:E,T=T&&T.name?T.name:T,M[b=b&&b.name?b.name:b]=!0,M[E]=!0,M[T]=!0,d.patterns[u.id]={min:b,mid:E,max:T}}}return d}sh.deviation=function(t,a,d,x){var I=a&&a.length,M=Math.abs(Wh(t,0,I?a[0]*d:t.length,d));if(I)for(var r=0,i=a.length;r<i;r++)M-=Math.abs(Wh(t,a[r]*d,r<i-1?a[r+1]*d:t.length,d));var u=0;for(r=0;r<x.length;r+=3){var m=x[r]*d,b=x[r+1]*d,E=x[r+2]*d;u+=Math.abs((t[m]-t[E])*(t[b+1]-t[m+1])-(t[m]-t[b])*(t[E+1]-t[m+1]))}return M===0&&u===0?0:Math.abs((u-M)/M)},sh.flatten=function(t){for(var a=t[0][0].length,d={vertices:[],holes:[],dimensions:a},x=0,I=0;I<t.length;I++){for(var M=0;M<t[I].length;M++)for(var r=0;r<a;r++)d.vertices.push(t[I][M][r]);I>0&&d.holes.push(x+=t[I-1].length)}return d},wp.default=$m;var wl=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(a){return a.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Z,this.indexArray=new jt,this.indexArray2=new qi,this.programConfigurations=new Yi(t.layers,t.zoom),this.segments=new be,this.segments2=new be,this.stateDependentLayerIds=this.layers.filter(function(a){return a.isStateDependent()}).map(function(a){return a.id})};wl.prototype.populate=function(t,a,d){this.hasPattern=Ap("fill",this.layers,a);for(var x=this.layers[0].layout.get("fill-sort-key"),I=[],M=0,r=t;M<r.length;M+=1){var i=r[M],u=i.feature,m=i.id,b=i.index,E=i.sourceLayerIndex,T=this.layers[0]._featureFilter.needGeometry,z=er(u,T);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),z,d)){var U=x?x.evaluate(z,{},d,a.availableImages):void 0,V={id:m,properties:u.properties,type:u.type,sourceLayerIndex:E,index:b,geometry:T?z.geometry:io(u),patterns:{},sortKey:U};I.push(V)}}x&&I.sort(function(Oe,Ye){return Oe.sortKey-Ye.sortKey});for(var G=0,q=I;G<q.length;G+=1){var K=q[G],$=K.geometry,te=K.index,de=K.sourceLayerIndex;if(this.hasPattern){var _e=Kh("fill",this.layers,K,this.zoom,a);this.patternFeatures.push(_e)}else this.addFeature(K,$,te,d,{});a.featureIndex.insert(t[te].feature,$,te,de,this.index)}},wl.prototype.update=function(t,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,d)},wl.prototype.addFeatures=function(t,a,d){for(var x=0,I=this.patternFeatures;x<I.length;x+=1){var M=I[x];this.addFeature(M,M.geometry,M.index,a,d)}},wl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},wl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},wl.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Qm),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},wl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},wl.prototype.addFeature=function(t,a,d,x,I){for(var M=0,r=Dd(a,500);M<r.length;M+=1){for(var i=r[M],u=0,m=0,b=i;m<b.length;m+=1)u+=b[m].length;for(var E=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),T=E.vertexLength,z=[],U=[],V=0,G=i;V<G.length;V+=1){var q=G[V];if(q.length!==0){q!==i[0]&&U.push(z.length/2);var K=this.segments2.prepareSegment(q.length,this.layoutVertexArray,this.indexArray2),$=K.vertexLength;this.layoutVertexArray.emplaceBack(q[0].x,q[0].y),this.indexArray2.emplaceBack($+q.length-1,$),z.push(q[0].x),z.push(q[0].y);for(var te=1;te<q.length;te++)this.layoutVertexArray.emplaceBack(q[te].x,q[te].y),this.indexArray2.emplaceBack($+te-1,$+te),z.push(q[te].x),z.push(q[te].y);K.vertexLength+=q.length,K.primitiveLength+=q.length}}for(var de=wp(z,U),_e=0;_e<de.length;_e+=3)this.indexArray.emplaceBack(T+de[_e],T+de[_e+1],T+de[_e+2]);E.vertexLength+=u,E.primitiveLength+=de.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,d,I,x)},Pi("FillBucket",wl,{omit:["layers","patternFeatures"]});var Cp=new C({"fill-sort-key":new fi(Ie.layout_fill["fill-sort-key"])}),kp={paint:new C({"fill-antialias":new gi(Ie.paint_fill["fill-antialias"]),"fill-opacity":new fi(Ie.paint_fill["fill-opacity"]),"fill-color":new fi(Ie.paint_fill["fill-color"]),"fill-outline-color":new fi(Ie.paint_fill["fill-outline-color"]),"fill-translate":new gi(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new gi(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new xu(Ie.paint_fill["fill-pattern"])}),layout:Cp},Mp=function(t){function a(d){t.call(this,d,kp)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.recalculate=function(d,x){t.prototype.recalculate.call(this,d,x);var I=this.paint._values["fill-outline-color"];I.value.kind==="constant"&&I.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},a.prototype.createBucket=function(d){return new wl(d)},a.prototype.queryRadius=function(){return Lo(this.paint.get("fill-translate"))},a.prototype.queryIntersectsFeature=function(d,x,I,M,r,i,u){return Ha(Wa(d,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i.angle,u),M)},a.prototype.isTileClipped=function(){return!0},a}(l),sg=B([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Sf=ph;function ph(t,a,d,x,I){this.properties={},this.extent=d,this.type=0,this._pbf=t,this._geometry=-1,this._keys=x,this._values=I,t.readFields(lg,this,a)}function lg(t,a,d){t==1?a.id=d.readVarint():t==2?function(x,I){for(var M=x.readVarint()+x.pos;x.pos<M;){var r=I._keys[x.readVarint()],i=I._values[x.readVarint()];I.properties[r]=i}}(d,a):t==3?a.type=d.readVarint():t==4&&(a._geometry=d.pos)}function rc(t){for(var a,d,x=0,I=0,M=t.length,r=M-1;I<M;r=I++)x+=((d=t[r]).x-(a=t[I]).x)*(a.y+d.y);return x}ph.types=["Unknown","Point","LineString","Polygon"],ph.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var a,d=t.readVarint()+t.pos,x=1,I=0,M=0,r=0,i=[];t.pos<d;){if(I<=0){var u=t.readVarint();x=7&u,I=u>>3}if(I--,x===1||x===2)M+=t.readSVarint(),r+=t.readSVarint(),x===1&&(a&&i.push(a),a=[]),a.push(new D(M,r));else{if(x!==7)throw new Error("unknown command "+x);a&&a.push(a[0].clone())}}return a&&i.push(a),i},ph.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var a=t.readVarint()+t.pos,d=1,x=0,I=0,M=0,r=1/0,i=-1/0,u=1/0,m=-1/0;t.pos<a;){if(x<=0){var b=t.readVarint();d=7&b,x=b>>3}if(x--,d===1||d===2)(I+=t.readSVarint())<r&&(r=I),I>i&&(i=I),(M+=t.readSVarint())<u&&(u=M),M>m&&(m=M);else if(d!==7)throw new Error("unknown command "+d)}return[r,u,i,m]},ph.prototype.toGeoJSON=function(t,a,d){var x,I,M=this.extent*Math.pow(2,d),r=this.extent*t,i=this.extent*a,u=this.loadGeometry(),m=ph.types[this.type];function b(z){for(var U=0;U<z.length;U++){var V=z[U];z[U]=[360*(V.x+r)/M-180,360/Math.PI*Math.atan(Math.exp((180-360*(V.y+i)/M)*Math.PI/180))-90]}}switch(this.type){case 1:var E=[];for(x=0;x<u.length;x++)E[x]=u[x][0];b(u=E);break;case 2:for(x=0;x<u.length;x++)b(u[x]);break;case 3:for(u=function(z){var U=z.length;if(U<=1)return[z];for(var V,G,q=[],K=0;K<U;K++){var $=rc(z[K]);$!==0&&(G===void 0&&(G=$<0),G===$<0?(V&&q.push(V),V=[z[K]]):V.push(z[K]))}return V&&q.push(V),q}(u),x=0;x<u.length;x++)for(I=0;I<u[x].length;I++)b(u[x][I])}u.length===1?u=u[0]:m="Multi"+m;var T={type:"Feature",geometry:{type:m,coordinates:u},properties:this.properties};return"id"in this&&(T.id=this.id),T};var Tf=Lp;function Lp(t,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(fh,this,a),this.length=this._features.length}function fh(t,a,d){t===15?a.version=d.readVarint():t===1?a.name=d.readString():t===5?a.extent=d.readVarint():t===2?a._features.push(d.pos):t===3?a._keys.push(d.readString()):t===4&&a._values.push(function(x){for(var I=null,M=x.readVarint()+x.pos;x.pos<M;){var r=x.readVarint()>>3;I=r===1?x.readString():r===2?x.readFloat():r===3?x.readDouble():r===4?x.readVarint64():r===5?x.readVarint():r===6?x.readSVarint():r===7?x.readBoolean():null}return I}(d))}function ug(t,a,d){if(t===3){var x=new Tf(d,d.readVarint()+d.pos);x.length&&(a[x.name]=x)}}Lp.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var a=this._pbf.readVarint()+this._pbf.pos;return new Sf(this._pbf,a,this.extent,this._keys,this._values)};var mh={VectorTile:function(t,a){this.layers=t.readFields(ug,{},a)},VectorTileFeature:Sf,VectorTileLayer:Tf},cg=mh.VectorTileFeature.types,Rd=Math.pow(2,13);function gh(t,a,d,x,I,M,r,i){t.emplaceBack(a,d,2*Math.floor(x*Rd)+r,I*Rd*2,M*Rd*2,Math.round(i))}var El=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(a){return a.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ie,this.indexArray=new jt,this.programConfigurations=new Yi(t.layers,t.zoom),this.segments=new be,this.stateDependentLayerIds=this.layers.filter(function(a){return a.isStateDependent()}).map(function(a){return a.id})};function hg(t,a){return t.x===a.x&&(t.x<0||t.x>8192)||t.y===a.y&&(t.y<0||t.y>8192)}El.prototype.populate=function(t,a,d){this.features=[],this.hasPattern=Ap("fill-extrusion",this.layers,a);for(var x=0,I=t;x<I.length;x+=1){var M=I[x],r=M.feature,i=M.id,u=M.index,m=M.sourceLayerIndex,b=this.layers[0]._featureFilter.needGeometry,E=er(r,b);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),E,d)){var T={id:i,sourceLayerIndex:m,index:u,geometry:b?E.geometry:io(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(Kh("fill-extrusion",this.layers,T,this.zoom,a)):this.addFeature(T,T.geometry,u,d,{}),a.featureIndex.insert(r,T.geometry,u,m,this.index,!0)}}},El.prototype.addFeatures=function(t,a,d){for(var x=0,I=this.features;x<I.length;x+=1){var M=I[x];this.addFeature(M,M.geometry,M.index,a,d)}},El.prototype.update=function(t,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,d)},El.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},El.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},El.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,sg),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},El.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},El.prototype.addFeature=function(t,a,d,x,I){for(var M=0,r=Dd(a,500);M<r.length;M+=1){for(var i=r[M],u=0,m=0,b=i;m<b.length;m+=1)u+=b[m].length;for(var E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),T=0,z=i;T<z.length;T+=1){var U=z[T];if(U.length!==0&&!((Zt=U).every(function(Nt){return Nt.x<0})||Zt.every(function(Nt){return Nt.x>8192})||Zt.every(function(Nt){return Nt.y<0})||Zt.every(function(Nt){return Nt.y>8192})))for(var V=0,G=0;G<U.length;G++){var q=U[G];if(G>=1){var K=U[G-1];if(!hg(q,K)){E.vertexLength+4>be.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var $=q.sub(K)._perp()._unit(),te=K.dist(q);V+te>32768&&(V=0),gh(this.layoutVertexArray,q.x,q.y,$.x,$.y,0,0,V),gh(this.layoutVertexArray,q.x,q.y,$.x,$.y,0,1,V),gh(this.layoutVertexArray,K.x,K.y,$.x,$.y,0,0,V+=te),gh(this.layoutVertexArray,K.x,K.y,$.x,$.y,0,1,V);var de=E.vertexLength;this.indexArray.emplaceBack(de,de+2,de+1),this.indexArray.emplaceBack(de+1,de+2,de+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+u>be.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),cg[t.type]==="Polygon"){for(var _e=[],Oe=[],Ye=E.vertexLength,it=0,nt=i;it<nt.length;it+=1){var vt=nt[it];if(vt.length!==0){vt!==i[0]&&Oe.push(_e.length/2);for(var ot=0;ot<vt.length;ot++){var Kt=vt[ot];gh(this.layoutVertexArray,Kt.x,Kt.y,0,0,1,1,0),_e.push(Kt.x),_e.push(Kt.y)}}}for(var Wt=wp(_e,Oe),Lt=0;Lt<Wt.length;Lt+=3)this.indexArray.emplaceBack(Ye+Wt[Lt],Ye+Wt[Lt+2],Ye+Wt[Lt+1]);E.primitiveLength+=Wt.length/3,E.vertexLength+=u}}var Zt;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,d,I,x)},Pi("FillExtrusionBucket",El,{omit:["layers","features"]});var dg={paint:new C({"fill-extrusion-opacity":new gi(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new fi(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gi(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gi(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xu(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new fi(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new fi(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gi(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},pg=function(t){function a(d){t.call(this,d,dg)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.createBucket=function(d){return new El(d)},a.prototype.queryRadius=function(){return Lo(this.paint.get("fill-extrusion-translate"))},a.prototype.is3D=function(){return!0},a.prototype.queryIntersectsFeature=function(d,x,I,M,r,i,u,m){var b=Wa(d,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),i.angle,u),E=this.paint.get("fill-extrusion-height").evaluate(x,I),T=this.paint.get("fill-extrusion-base").evaluate(x,I),z=function(V,G,q,K){for(var $=[],te=0,de=V;te<de.length;te+=1){var _e=de[te],Oe=[_e.x,_e.y,0,1];ic(Oe,Oe,G),$.push(new D(Oe[0]/Oe[3],Oe[1]/Oe[3]))}return $}(b,m),U=function(V,G,q,K){for(var $=[],te=[],de=K[8]*G,_e=K[9]*G,Oe=K[10]*G,Ye=K[11]*G,it=K[8]*q,nt=K[9]*q,vt=K[10]*q,ot=K[11]*q,Kt=0,Wt=V;Kt<Wt.length;Kt+=1){for(var Lt=[],Zt=[],Nt=0,$t=Wt[Kt];Nt<$t.length;Nt+=1){var Ot=$t[Nt],Vt=Ot.x,ki=Ot.y,Ai=K[0]*Vt+K[4]*ki+K[12],on=K[1]*Vt+K[5]*ki+K[13],un=K[2]*Vt+K[6]*ki+K[14],zn=K[3]*Vt+K[7]*ki+K[15],Kn=un+Oe,fr=zn+Ye,mr=Ai+it,or=on+nt,wr=un+vt,ar=zn+ot,Er=new D((Ai+de)/fr,(on+_e)/fr);Er.z=Kn/fr,Lt.push(Er);var fn=new D(mr/ar,or/ar);fn.z=wr/ar,Zt.push(fn)}$.push(Lt),te.push(Zt)}return[$,te]}(M,T,E,m);return function(V,G,q){var K=1/0;Ha(q,G)&&(K=yh(q,G[0]));for(var $=0;$<G.length;$++)for(var te=G[$],de=V[$],_e=0;_e<te.length-1;_e++){var Oe=te[_e],Ye=[Oe,te[_e+1],de[_e+1],de[_e],Oe];Ga(q,Ye)&&(K=Math.min(K,yh(q,Ye)))}return K!==1/0&&K}(U[0],U[1],z)},a}(l);function Rc(t,a){return t.x*a.x+t.y*a.y}function yh(t,a){if(t.length===1){for(var d,x=0,I=a[x++];!d||I.equals(d);)if(!(d=a[x++]))return 1/0;for(;x<a.length;x++){var M=a[x],r=t[0],i=d.sub(I),u=M.sub(I),m=r.sub(I),b=Rc(i,i),E=Rc(i,u),T=Rc(u,u),z=Rc(m,i),U=Rc(m,u),V=b*T-E*E,G=(T*z-E*U)/V,q=(b*U-E*z)/V,K=I.z*(1-G-q)+d.z*G+M.z*q;if(isFinite(K))return K}return 1/0}for(var $=1/0,te=0,de=a;te<de.length;te+=1)$=Math.min($,de[te].z);return $}var Pp=B([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,fg=B([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,mg=mh.VectorTileFeature.types,gg=Math.cos(Math.PI/180*37.5),_h=Math.pow(2,14)/.5,Ea=function(t){var a=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(d){a.gradients[d.id]={}}),this.layoutVertexArray=new ae,this.layoutVertexArray2=new ge,this.indexArray=new jt,this.programConfigurations=new Yi(t.layers,t.zoom),this.segments=new be,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};Ea.prototype.populate=function(t,a,d){this.hasPattern=Ap("line",this.layers,a);for(var x=this.layers[0].layout.get("line-sort-key"),I=[],M=0,r=t;M<r.length;M+=1){var i=r[M],u=i.feature,m=i.id,b=i.index,E=i.sourceLayerIndex,T=this.layers[0]._featureFilter.needGeometry,z=er(u,T);if(this.layers[0]._featureFilter.filter(new ci(this.zoom),z,d)){var U=x?x.evaluate(z,{},d):void 0,V={id:m,properties:u.properties,type:u.type,sourceLayerIndex:E,index:b,geometry:T?z.geometry:io(u),patterns:{},sortKey:U};I.push(V)}}x&&I.sort(function(Oe,Ye){return Oe.sortKey-Ye.sortKey});for(var G=0,q=I;G<q.length;G+=1){var K=q[G],$=K.geometry,te=K.index,de=K.sourceLayerIndex;if(this.hasPattern){var _e=Kh("line",this.layers,K,this.zoom,a);this.patternFeatures.push(_e)}else this.addFeature(K,$,te,d,{});a.featureIndex.insert(t[te].feature,$,te,de,this.index)}},Ea.prototype.update=function(t,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,d)},Ea.prototype.addFeatures=function(t,a,d){for(var x=0,I=this.patternFeatures;x<I.length;x+=1){var M=I[x];this.addFeature(M,M.geometry,M.index,a,d)}},Ea.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ea.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ea.prototype.upload=function(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,fg)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Pp),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ea.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ea.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Ea.prototype.addFeature=function(t,a,d,x,I){var M=this.layers[0].layout,r=M.get("line-join").evaluate(t,{}),i=M.get("line-cap"),u=M.get("line-miter-limit"),m=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var b=0,E=a;b<E.length;b+=1)this.addLine(E[b],t,r,i,u,m);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,d,I,x)},Ea.prototype.addLine=function(t,a,d,x,I,M){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var r=0;r<t.length-1;r++)this.totalDistance+=t[r].dist(t[r+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var i=mg[a.type]==="Polygon",u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var m=0;m<u-1&&t[m].equals(t[m+1]);)m++;if(!(u<(i?3:2))){d==="bevel"&&(I=1.05);var b,E=this.overscaling<=16?122880/(512*this.overscaling):0,T=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),z=void 0,U=void 0,V=void 0,G=void 0;this.e1=this.e2=-1,i&&(G=t[m].sub(b=t[u-2])._unit()._perp());for(var q=m;q<u;q++)if(!(U=q===u-1?i?t[m+1]:void 0:t[q+1])||!t[q].equals(U)){G&&(V=G),b&&(z=b),b=t[q],G=U?U.sub(b)._unit()._perp():V;var K=(V=V||G).add(G);K.x===0&&K.y===0||K._unit();var $=V.x*G.x+V.y*G.y,te=K.x*G.x+K.y*G.y,de=te!==0?1/te:1/0,_e=2*Math.sqrt(2-2*te),Oe=te<gg&&z&&U,Ye=V.x*G.y-V.y*G.x>0;if(Oe&&q>m){var it=b.dist(z);if(it>2*E){var nt=b.sub(b.sub(z)._mult(E/it)._round());this.updateDistance(z,nt),this.addCurrentVertex(nt,V,0,0,T),z=nt}}var vt=z&&U,ot=vt?d:i?"butt":x;if(vt&&ot==="round"&&(de<M?ot="miter":de<=2&&(ot="fakeround")),ot==="miter"&&de>I&&(ot="bevel"),ot==="bevel"&&(de>2&&(ot="flipbevel"),de<I&&(ot="miter")),z&&this.updateDistance(z,b),ot==="miter")K._mult(de),this.addCurrentVertex(b,K,0,0,T);else if(ot==="flipbevel"){if(de>100)K=G.mult(-1);else{var Kt=de*V.add(G).mag()/V.sub(G).mag();K._perp()._mult(Kt*(Ye?-1:1))}this.addCurrentVertex(b,K,0,0,T),this.addCurrentVertex(b,K.mult(-1),0,0,T)}else if(ot==="bevel"||ot==="fakeround"){var Wt=-Math.sqrt(de*de-1),Lt=Ye?Wt:0,Zt=Ye?0:Wt;if(z&&this.addCurrentVertex(b,V,Lt,Zt,T),ot==="fakeround")for(var Nt=Math.round(180*_e/Math.PI/20),$t=1;$t<Nt;$t++){var Ot=$t/Nt;if(Ot!==.5){var Vt=Ot-.5;Ot+=Ot*Vt*(Ot-1)*((1.0904+$*($*(3.55645-1.43519*$)-3.2452))*Vt*Vt+(.848013+$*(.215638*$-1.06021)))}var ki=G.sub(V)._mult(Ot)._add(V)._unit()._mult(Ye?-1:1);this.addHalfVertex(b,ki.x,ki.y,!1,Ye,0,T)}U&&this.addCurrentVertex(b,G,-Lt,-Zt,T)}else if(ot==="butt")this.addCurrentVertex(b,K,0,0,T);else if(ot==="square"){var Ai=z?1:-1;this.addCurrentVertex(b,K,Ai,Ai,T)}else ot==="round"&&(z&&(this.addCurrentVertex(b,V,0,0,T),this.addCurrentVertex(b,V,1,1,T,!0)),U&&(this.addCurrentVertex(b,G,-1,-1,T,!0),this.addCurrentVertex(b,G,0,0,T)));if(Oe&&q<u-1){var on=b.dist(U);if(on>2*E){var un=b.add(U.sub(b)._mult(E/on)._round());this.updateDistance(b,un),this.addCurrentVertex(un,G,0,0,T),b=un}}}}},Ea.prototype.addCurrentVertex=function(t,a,d,x,I,M){M===void 0&&(M=!1);var r=a.y*x-a.x,i=-a.y-a.x*x;this.addHalfVertex(t,a.x+a.y*d,a.y-a.x*d,M,!1,d,I),this.addHalfVertex(t,r,i,M,!0,-x,I),this.distance>_h/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(t,a,d,x,I,M))},Ea.prototype.addHalfVertex=function(t,a,d,x,I,M,r){var i=.5*(this.lineClips?this.scaledDistance*(_h-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(x?1:0),(t.y<<1)+(I?1:0),Math.round(63*a)+128,Math.round(63*d)+128,1+(M===0?0:M<0?-1:1)|(63&i)<<2,i>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var u=r.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),r.primitiveLength++),I?this.e2=u:this.e1=u},Ea.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ea.prototype.updateDistance=function(t,a){this.distance+=t.dist(a),this.updateScaledDistance()},Pi("LineBucket",Ea,{omit:["layers","patternFeatures"]});var yg=new C({"line-cap":new gi(Ie.layout_line["line-cap"]),"line-join":new fi(Ie.layout_line["line-join"]),"line-miter-limit":new gi(Ie.layout_line["line-miter-limit"]),"line-round-limit":new gi(Ie.layout_line["line-round-limit"]),"line-sort-key":new fi(Ie.layout_line["line-sort-key"])}),Af={paint:new C({"line-opacity":new fi(Ie.paint_line["line-opacity"]),"line-color":new fi(Ie.paint_line["line-color"]),"line-translate":new gi(Ie.paint_line["line-translate"]),"line-translate-anchor":new gi(Ie.paint_line["line-translate-anchor"]),"line-width":new fi(Ie.paint_line["line-width"]),"line-gap-width":new fi(Ie.paint_line["line-gap-width"]),"line-offset":new fi(Ie.paint_line["line-offset"]),"line-blur":new fi(Ie.paint_line["line-blur"]),"line-dasharray":new xo(Ie.paint_line["line-dasharray"]),"line-pattern":new xu(Ie.paint_line["line-pattern"]),"line-gradient":new ca(Ie.paint_line["line-gradient"])}),layout:yg},Cf=new(function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.possiblyEvaluate=function(d,x){return x=new ci(Math.floor(x.zoom),{now:x.now,fadeDuration:x.fadeDuration,zoomHistory:x.zoomHistory,transition:x.transition}),t.prototype.possiblyEvaluate.call(this,d,x)},a.prototype.evaluate=function(d,x,I,M){return x=se({},x,{zoom:Math.floor(x.zoom)}),t.prototype.evaluate.call(this,d,x,I,M)},a}(fi))(Af.paint.properties["line-width"].specification);Cf.useIntegerZoom=!0;var _g=function(t){function a(d){t.call(this,d,Af),this.gradientVersion=0}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype._handleSpecialPaintPropertyUpdate=function(d){d==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Uo,this.gradientVersion=(this.gradientVersion+1)%Y)},a.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},a.prototype.recalculate=function(d,x){t.prototype.recalculate.call(this,d,x),this.paint._values["line-floorwidth"]=Cf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)},a.prototype.createBucket=function(d){return new Ea(d)},a.prototype.queryRadius=function(d){var x=d,I=kf(Ds("line-width",this,x),Ds("line-gap-width",this,x)),M=Ds("line-offset",this,x);return I/2+Math.abs(M)+Lo(this.paint.get("line-translate"))},a.prototype.queryIntersectsFeature=function(d,x,I,M,r,i,u){var m=Wa(d,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),i.angle,u),b=u/2*kf(this.paint.get("line-width").evaluate(x,I),this.paint.get("line-gap-width").evaluate(x,I)),E=this.paint.get("line-offset").evaluate(x,I);return E&&(M=function(T,z){for(var U=[],V=new D(0,0),G=0;G<T.length;G++){for(var q=T[G],K=[],$=0;$<q.length;$++){var te=q[$],de=q[$+1],_e=$===0?V:te.sub(q[$-1])._unit()._perp(),Oe=$===q.length-1?V:de.sub(te)._unit()._perp(),Ye=_e._add(Oe)._unit();Ye._mult(1/(Ye.x*Oe.x+Ye.y*Oe.y)),K.push(Ye._mult(z)._add(te))}U.push(K)}return U}(M,E*u)),function(T,z,U){for(var V=0;V<z.length;V++){var G=z[V];if(T.length>=3){for(var q=0;q<G.length;q++)if(Ys(T,G[q]))return!0}if(Za(T,G,U))return!0}return!1}(m,M,b)},a.prototype.isTileClipped=function(){return!0},a}(l);function kf(t,a){return a>0?a+2*t:t}var vg=B([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mf=B([{name:"a_projected_pos",components:3,type:"Float32"}],4),zp=(B([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),B([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Lf=(B([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),B([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Pf=B([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function zf(t,a,d){return t.sections.forEach(function(x){x.text=function(I,M,r){var i=M.layout.get("text-transform").evaluate(r,{});return i==="uppercase"?I=I.toLocaleUpperCase():i==="lowercase"&&(I=I.toLocaleLowerCase()),Di.applyArabicShaping&&(I=Di.applyArabicShaping(I)),I}(x.text,a,d)}),t}B([{name:"triangle",components:3,type:"Uint16"}]),B([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),B([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),B([{type:"Float32",name:"offsetX"}]),B([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var vh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Df=function(t,a,d,x,I){var M,r,i=8*I-x-1,u=(1<<i)-1,m=u>>1,b=-7,E=d?I-1:0,T=d?-1:1,z=t[a+E];for(E+=T,M=z&(1<<-b)-1,z>>=-b,b+=i;b>0;M=256*M+t[a+E],E+=T,b-=8);for(r=M&(1<<-b)-1,M>>=-b,b+=x;b>0;r=256*r+t[a+E],E+=T,b-=8);if(M===0)M=1-m;else{if(M===u)return r?NaN:1/0*(z?-1:1);r+=Math.pow(2,x),M-=m}return(z?-1:1)*r*Math.pow(2,M-x)},Rf=function(t,a,d,x,I,M){var r,i,u,m=8*M-I-1,b=(1<<m)-1,E=b>>1,T=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,z=x?0:M-1,U=x?1:-1,V=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(i=isNaN(a)?1:0,r=b):(r=Math.floor(Math.log(a)/Math.LN2),a*(u=Math.pow(2,-r))<1&&(r--,u*=2),(a+=r+E>=1?T/u:T*Math.pow(2,1-E))*u>=2&&(r++,u/=2),r+E>=b?(i=0,r=b):r+E>=1?(i=(a*u-1)*Math.pow(2,I),r+=E):(i=a*Math.pow(2,E-1)*Math.pow(2,I),r=0));I>=8;t[d+z]=255&i,z+=U,i/=256,I-=8);for(r=r<<I|i,m+=I;m>0;t[d+z]=255&r,z+=U,r/=256,m-=8);t[d+z-U]|=128*V},Od=jr;function jr(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}jr.Varint=0,jr.Fixed64=1,jr.Bytes=2,jr.Fixed32=5;var Of=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Tu(t){return t.type===jr.Bytes?t.readVarint()+t.pos:t.pos+1}function jl(t,a,d){return d?4294967296*a+(t>>>0):4294967296*(a>>>0)+(t>>>0)}function ra(t,a,d){var x=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));d.realloc(x);for(var I=d.pos-1;I>=t;I--)d.buf[I+x]=d.buf[I]}function Dp(t,a){for(var d=0;d<t.length;d++)a.writeVarint(t[d])}function Bf(t,a){for(var d=0;d<t.length;d++)a.writeSVarint(t[d])}function Ff(t,a){for(var d=0;d<t.length;d++)a.writeFloat(t[d])}function Zr(t,a){for(var d=0;d<t.length;d++)a.writeDouble(t[d])}function oc(t,a){for(var d=0;d<t.length;d++)a.writeBoolean(t[d])}function Rp(t,a){for(var d=0;d<t.length;d++)a.writeFixed32(t[d])}function Uf(t,a){for(var d=0;d<t.length;d++)a.writeSFixed32(t[d])}function Nf(t,a){for(var d=0;d<t.length;d++)a.writeFixed64(t[d])}function Au(t,a){for(var d=0;d<t.length;d++)a.writeSFixed64(t[d])}function Cu(t,a){return(t[a]|t[a+1]<<8|t[a+2]<<16)+16777216*t[a+3]}function Oc(t,a,d){t[d]=a,t[d+1]=a>>>8,t[d+2]=a>>>16,t[d+3]=a>>>24}function Vf(t,a){return(t[a]|t[a+1]<<8|t[a+2]<<16)+(t[a+3]<<24)}function bg(t,a,d){t===1&&d.readMessage(xg,a)}function xg(t,a,d){if(t===3){var x=d.readMessage(wg,{}),I=x.width,M=x.height,r=x.left,i=x.top,u=x.advance;a.push({id:x.id,bitmap:new Pc({width:I+6,height:M+6},x.bitmap),metrics:{width:I,height:M,left:r,top:i,advance:u}})}}function wg(t,a,d){t===1?a.id=d.readVarint():t===2?a.bitmap=d.readBytes():t===3?a.width=d.readVarint():t===4?a.height=d.readVarint():t===5?a.left=d.readSVarint():t===6?a.top=d.readSVarint():t===7&&(a.advance=d.readVarint())}function jf(t){for(var a=0,d=0,x=0,I=t;x<I.length;x+=1){var M=I[x];a+=M.w*M.h,d=Math.max(d,M.w)}t.sort(function(V,G){return G.h-V.h});for(var r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),d),h:1/0}],i=0,u=0,m=0,b=t;m<b.length;m+=1)for(var E=b[m],T=r.length-1;T>=0;T--){var z=r[T];if(!(E.w>z.w||E.h>z.h)){if(E.x=z.x,E.y=z.y,u=Math.max(u,E.y+E.h),i=Math.max(i,E.x+E.w),E.w===z.w&&E.h===z.h){var U=r.pop();T<r.length&&(r[T]=U)}else E.h===z.h?(z.x+=E.w,z.w-=E.w):E.w===z.w?(z.y+=E.h,z.h-=E.h):(r.push({x:z.x+E.w,y:z.y,w:z.w-E.w,h:E.h}),z.y+=E.h,z.h-=E.h);break}}return{w:i,h:u,fill:a/(i*u)||0}}jr.prototype={destroy:function(){this.buf=null},readFields:function(t,a,d){for(d=d||this.length;this.pos<d;){var x=this.readVarint(),I=x>>3,M=this.pos;this.type=7&x,t(I,a,this),this.pos===M&&this.skip(x)}return a},readMessage:function(t,a){return this.readFields(t,a,this.readVarint()+this.pos)},readFixed32:function(){var t=Cu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Vf(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Cu(this.buf,this.pos)+4294967296*Cu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Cu(this.buf,this.pos)+4294967296*Vf(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Df(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Df(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var a,d,x=this.buf;return a=127&(d=x[this.pos++]),d<128?a:(a|=(127&(d=x[this.pos++]))<<7,d<128?a:(a|=(127&(d=x[this.pos++]))<<14,d<128?a:(a|=(127&(d=x[this.pos++]))<<21,d<128?a:function(I,M,r){var i,u,m=r.buf;if(i=(112&(u=m[r.pos++]))>>4,u<128||(i|=(127&(u=m[r.pos++]))<<3,u<128)||(i|=(127&(u=m[r.pos++]))<<10,u<128)||(i|=(127&(u=m[r.pos++]))<<17,u<128)||(i|=(127&(u=m[r.pos++]))<<24,u<128)||(i|=(1&(u=m[r.pos++]))<<31,u<128))return jl(I,i,M);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(d=x[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,a=this.pos;return this.pos=t,t-a>=12&&Of?function(d,x,I){return Of.decode(d.subarray(x,I))}(this.buf,a,t):function(d,x,I){for(var M="",r=x;r<I;){var i,u,m,b=d[r],E=null,T=b>239?4:b>223?3:b>191?2:1;if(r+T>I)break;T===1?b<128&&(E=b):T===2?(192&(i=d[r+1]))==128&&(E=(31&b)<<6|63&i)<=127&&(E=null):T===3?(u=d[r+2],(192&(i=d[r+1]))==128&&(192&u)==128&&((E=(15&b)<<12|(63&i)<<6|63&u)<=2047||E>=55296&&E<=57343)&&(E=null)):T===4&&(u=d[r+2],m=d[r+3],(192&(i=d[r+1]))==128&&(192&u)==128&&(192&m)==128&&((E=(15&b)<<18|(63&i)<<12|(63&u)<<6|63&m)<=65535||E>=1114112)&&(E=null)),E===null?(E=65533,T=1):E>65535&&(E-=65536,M+=String.fromCharCode(E>>>10&1023|55296),E=56320|1023&E),M+=String.fromCharCode(E),r+=T}return M}(this.buf,a,t)},readBytes:function(){var t=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,t);return this.pos=t,a},readPackedVarint:function(t,a){if(this.type!==jr.Bytes)return t.push(this.readVarint(a));var d=Tu(this);for(t=t||[];this.pos<d;)t.push(this.readVarint(a));return t},readPackedSVarint:function(t){if(this.type!==jr.Bytes)return t.push(this.readSVarint());var a=Tu(this);for(t=t||[];this.pos<a;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==jr.Bytes)return t.push(this.readBoolean());var a=Tu(this);for(t=t||[];this.pos<a;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==jr.Bytes)return t.push(this.readFloat());var a=Tu(this);for(t=t||[];this.pos<a;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==jr.Bytes)return t.push(this.readDouble());var a=Tu(this);for(t=t||[];this.pos<a;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==jr.Bytes)return t.push(this.readFixed32());var a=Tu(this);for(t=t||[];this.pos<a;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==jr.Bytes)return t.push(this.readSFixed32());var a=Tu(this);for(t=t||[];this.pos<a;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==jr.Bytes)return t.push(this.readFixed64());var a=Tu(this);for(t=t||[];this.pos<a;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==jr.Bytes)return t.push(this.readSFixed64());var a=Tu(this);for(t=t||[];this.pos<a;)t.push(this.readSFixed64());return t},skip:function(t){var a=7&t;if(a===jr.Varint)for(;this.buf[this.pos++]>127;);else if(a===jr.Bytes)this.pos=this.readVarint()+this.pos;else if(a===jr.Fixed32)this.pos+=4;else{if(a!==jr.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(t,a){this.writeVarint(t<<3|a)},realloc:function(t){for(var a=this.length||16;a<this.pos+t;)a*=2;if(a!==this.length){var d=new Uint8Array(a);d.set(this.buf),this.buf=d,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Oc(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Oc(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Oc(this.buf,-1&t,this.pos),Oc(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Oc(this.buf,-1&t,this.pos),Oc(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(a,d){var x,I;if(a>=0?(x=a%4294967296|0,I=a/4294967296|0):(I=~(-a/4294967296),4294967295^(x=~(-a%4294967296))?x=x+1|0:(x=0,I=I+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(M,r,i){i.buf[i.pos++]=127&M|128,M>>>=7,i.buf[i.pos++]=127&M|128,M>>>=7,i.buf[i.pos++]=127&M|128,M>>>=7,i.buf[i.pos++]=127&M|128,i.buf[i.pos]=127&(M>>>=7)}(x,0,d),function(M,r){var i=(7&M)<<4;r.buf[r.pos++]|=i|((M>>>=3)?128:0),M&&(r.buf[r.pos++]=127&M|((M>>>=7)?128:0),M&&(r.buf[r.pos++]=127&M|((M>>>=7)?128:0),M&&(r.buf[r.pos++]=127&M|((M>>>=7)?128:0),M&&(r.buf[r.pos++]=127&M|((M>>>=7)?128:0),M&&(r.buf[r.pos++]=127&M)))))}(I,d)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var a=this.pos;this.pos=function(x,I,M){for(var r,i,u=0;u<I.length;u++){if((r=I.charCodeAt(u))>55295&&r<57344){if(!i){r>56319||u+1===I.length?(x[M++]=239,x[M++]=191,x[M++]=189):i=r;continue}if(r<56320){x[M++]=239,x[M++]=191,x[M++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(x[M++]=239,x[M++]=191,x[M++]=189,i=null);r<128?x[M++]=r:(r<2048?x[M++]=r>>6|192:(r<65536?x[M++]=r>>12|224:(x[M++]=r>>18|240,x[M++]=r>>12&63|128),x[M++]=r>>6&63|128),x[M++]=63&r|128)}return M}(this.buf,t,this.pos);var d=this.pos-a;d>=128&&ra(a,d,this),this.pos=a-1,this.writeVarint(d),this.pos+=d},writeFloat:function(t){this.realloc(4),Rf(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Rf(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var a=t.length;this.writeVarint(a),this.realloc(a);for(var d=0;d<a;d++)this.buf[this.pos++]=t[d]},writeRawMessage:function(t,a){this.pos++;var d=this.pos;t(a,this);var x=this.pos-d;x>=128&&ra(d,x,this),this.pos=d-1,this.writeVarint(x),this.pos+=x},writeMessage:function(t,a,d){this.writeTag(t,jr.Bytes),this.writeRawMessage(a,d)},writePackedVarint:function(t,a){a.length&&this.writeMessage(t,Dp,a)},writePackedSVarint:function(t,a){a.length&&this.writeMessage(t,Bf,a)},writePackedBoolean:function(t,a){a.length&&this.writeMessage(t,oc,a)},writePackedFloat:function(t,a){a.length&&this.writeMessage(t,Ff,a)},writePackedDouble:function(t,a){a.length&&this.writeMessage(t,Zr,a)},writePackedFixed32:function(t,a){a.length&&this.writeMessage(t,Rp,a)},writePackedSFixed32:function(t,a){a.length&&this.writeMessage(t,Uf,a)},writePackedFixed64:function(t,a){a.length&&this.writeMessage(t,Nf,a)},writePackedSFixed64:function(t,a){a.length&&this.writeMessage(t,Au,a)},writeBytesField:function(t,a){this.writeTag(t,jr.Bytes),this.writeBytes(a)},writeFixed32Field:function(t,a){this.writeTag(t,jr.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(t,a){this.writeTag(t,jr.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(t,a){this.writeTag(t,jr.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(t,a){this.writeTag(t,jr.Fixed64),this.writeSFixed64(a)},writeVarintField:function(t,a){this.writeTag(t,jr.Varint),this.writeVarint(a)},writeSVarintField:function(t,a){this.writeTag(t,jr.Varint),this.writeSVarint(a)},writeStringField:function(t,a){this.writeTag(t,jr.Bytes),this.writeString(a)},writeFloatField:function(t,a){this.writeTag(t,jr.Fixed32),this.writeFloat(a)},writeDoubleField:function(t,a){this.writeTag(t,jr.Fixed64),this.writeDouble(a)},writeBooleanField:function(t,a){this.writeVarintField(t,Boolean(a))}};var Bd=function(t,a){var d=a.pixelRatio,x=a.version,I=a.stretchX,M=a.stretchY,r=a.content;this.paddedRect=t,this.pixelRatio=d,this.stretchX=I,this.stretchY=M,this.content=r,this.version=x},Jh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Jh.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Jh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Jh.tlbr.get=function(){return this.tl.concat(this.br)},Jh.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Bd.prototype,Jh);var Yh=function(t,a){var d={},x={};this.haveRenderCallbacks=[];var I=[];this.addImages(t,d,I),this.addImages(a,x,I);var M=jf(I),r=new wa({width:M.w||1,height:M.h||1});for(var i in t){var u=t[i],m=d[i].paddedRect;wa.copy(u.data,r,{x:0,y:0},{x:m.x+1,y:m.y+1},u.data)}for(var b in a){var E=a[b],T=x[b].paddedRect,z=T.x+1,U=T.y+1,V=E.data.width,G=E.data.height;wa.copy(E.data,r,{x:0,y:0},{x:z,y:U},E.data),wa.copy(E.data,r,{x:0,y:G-1},{x:z,y:U-1},{width:V,height:1}),wa.copy(E.data,r,{x:0,y:0},{x:z,y:U+G},{width:V,height:1}),wa.copy(E.data,r,{x:V-1,y:0},{x:z-1,y:U},{width:1,height:G}),wa.copy(E.data,r,{x:0,y:0},{x:z+V,y:U},{width:1,height:G})}this.image=r,this.iconPositions=d,this.patternPositions=x};Yh.prototype.addImages=function(t,a,d){for(var x in t){var I=t[x],M={x:0,y:0,w:I.data.width+2,h:I.data.height+2};d.push(M),a[x]=new Bd(M,I),I.hasRenderCallback&&this.haveRenderCallbacks.push(x)}},Yh.prototype.patchUpdatedImages=function(t,a){for(var d in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[d],t.getImage(d),a),this.patchUpdatedImage(this.patternPositions[d],t.getImage(d),a)},Yh.prototype.patchUpdatedImage=function(t,a,d){if(t&&a&&t.version!==a.version){t.version=a.version;var x=t.tl;d.update(a.data,void 0,{x:x[0],y:x[1]})}},Pi("ImagePosition",Bd),Pi("ImageAtlas",Yh);var fs={horizontal:1,vertical:2,horizontalOnly:3},ku=function(){this.scale=1,this.fontStack="",this.imageName=null};ku.forText=function(t,a){var d=new ku;return d.scale=t||1,d.fontStack=a,d},ku.forImage=function(t){var a=new ku;return a.imageName=t,a};var zo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Qh(t,a,d,x,I,M,r,i,u,m,b,E,T,z,U,V){var G,q=zo.fromFeature(t,I);E===fs.vertical&&q.verticalizePunctuation();var K=Di.processBidirectionalText,$=Di.processStyledBidirectionalText;if(K&&q.sections.length===1){G=[];for(var te=0,de=K(q.toString(),bh(q,m,M,a,x,z,U));te<de.length;te+=1){var _e=de[te],Oe=new zo;Oe.text=_e,Oe.sections=q.sections;for(var Ye=0;Ye<_e.length;Ye++)Oe.sectionIndex.push(0);G.push(Oe)}}else if($){G=[];for(var it=0,nt=$(q.text,q.sectionIndex,bh(q,m,M,a,x,z,U));it<nt.length;it+=1){var vt=nt[it],ot=new zo;ot.text=vt[0],ot.sectionIndex=vt[1],ot.sections=q.sections,G.push(ot)}}else G=function(Lt,Zt){for(var Nt=[],$t=Lt.text,Ot=0,Vt=0,ki=Zt;Vt<ki.length;Vt+=1){var Ai=ki[Vt];Nt.push(Lt.substring(Ot,Ai)),Ot=Ai}return Ot<$t.length&&Nt.push(Lt.substring(Ot,$t.length)),Nt}(q,bh(q,m,M,a,x,z,U));var Kt=[],Wt={positionedLines:Kt,text:q.toString(),top:b[1],bottom:b[1],left:b[0],right:b[0],writingMode:E,iconsInText:!1,verticalizable:!1};return function(Lt,Zt,Nt,$t,Ot,Vt,ki,Ai,on,un,zn,Kn){for(var fr=0,mr=-17,or=0,wr=0,ar=Ai==="right"?1:Ai==="left"?0:.5,Er=0,fn=0,Mn=Ot;fn<Mn.length;fn+=1){var Dn=Mn[fn];Dn.trim();var En=Dn.getMaxScale(),qr=24*(En-1),Fr={positionedGlyphs:[],lineOffset:0};Lt.positionedLines[Er]=Fr;var nr=Fr.positionedGlyphs,jn=0;if(Dn.length()){for(var br=0;br<Dn.length();br++){var Ui=Dn.getSection(br),Ro=Dn.getSectionIndex(br),Wr=Dn.getCharCode(br),mo=0,Lr=null,oa=null,qo=null,ms=24,Ia=!(on===fs.horizontal||!zn&&!Ps(Wr)||zn&&(Fd[Wr]||(Hl=Wr,pi.Arabic(Hl)||pi["Arabic Supplement"](Hl)||pi["Arabic Extended-A"](Hl)||pi["Arabic Presentation Forms-A"](Hl)||pi["Arabic Presentation Forms-B"](Hl))));if(Ui.imageName){var Sa=$t[Ui.imageName];if(!Sa)continue;qo=Ui.imageName,Lt.iconsInText=Lt.iconsInText||!0,oa=Sa.paddedRect;var Oo=Sa.displaySize;Ui.scale=24*Ui.scale/Kn,mo=qr+(24-Oo[1]*Ui.scale),ms=(Lr={width:Oo[0],height:Oo[1],left:1,top:-3,advance:Ia?Oo[1]:Oo[0]}).advance;var gs=Ia?Oo[0]*Ui.scale-24*En:Oo[1]*Ui.scale-24*En;gs>0&&gs>jn&&(jn=gs)}else{var dc=Nt[Ui.fontStack],qc=dc&&dc[Wr];if(qc&&qc.rect)oa=qc.rect,Lr=qc.metrics;else{var Gc=Zt[Ui.fontStack],Ah=Gc&&Gc[Wr];if(!Ah)continue;Lr=Ah.metrics}mo=24*(En-Ui.scale)}Ia?(Lt.verticalizable=!0,nr.push({glyph:Wr,imageName:qo,x:fr,y:mr+mo,vertical:Ia,scale:Ui.scale,fontStack:Ui.fontStack,sectionIndex:Ro,metrics:Lr,rect:oa}),fr+=ms*Ui.scale+un):(nr.push({glyph:Wr,imageName:qo,x:fr,y:mr+mo,vertical:Ia,scale:Ui.scale,fontStack:Ui.fontStack,sectionIndex:Ro,metrics:Lr,rect:oa}),fr+=Lr.advance*Ui.scale+un)}nr.length!==0&&(or=Math.max(fr-un,or),xh(nr,0,nr.length-1,ar,jn)),fr=0;var el=Vt*En+jn;Fr.lineOffset=Math.max(jn,qr),mr+=el,wr=Math.max(el,wr),++Er}else mr+=Vt,++Er}var Hl,Hc=mr- -17,pc=Bc(ki),zu=pc.horizontalAlign,Ch=pc.verticalAlign;(function(Jd,Yd,ld,ud,Qd,cd,hd,$a,Zc){var Wc,Ta=(Yd-ld)*Qd;Wc=cd!==hd?-$a*ud- -17:(-ud*Zc+.5)*hd;for(var es=0,Du=Jd;es<Du.length;es+=1)for(var Il=0,kh=Du[es].positionedGlyphs;Il<kh.length;Il+=1){var tl=kh[Il];tl.x+=Ta,tl.y+=Wc}})(Lt.positionedLines,ar,zu,Ch,or,wr,Vt,Hc,Ot.length),Lt.top+=-Ch*Hc,Lt.bottom=Lt.top+Hc,Lt.left+=-zu*or,Lt.right=Lt.left+or}(Wt,a,d,x,G,r,i,u,E,m,T,V),!function(Lt){for(var Zt=0,Nt=Lt;Zt<Nt.length;Zt+=1)if(Nt[Zt].positionedGlyphs.length!==0)return!1;return!0}(Kt)&&Wt}zo.fromFeature=function(t,a){for(var d=new zo,x=0;x<t.sections.length;x++){var I=t.sections[x];I.image?d.addImageSection(I):d.addTextSection(I,a)}return d},zo.prototype.length=function(){return this.text.length},zo.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},zo.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},zo.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},zo.prototype.verticalizePunctuation=function(){this.text=function(t){for(var a="",d=0;d<t.length;d++){var x=t.charCodeAt(d+1)||null,I=t.charCodeAt(d-1)||null;a+=x&&bu(x)&&!vh[t[d+1]]||I&&bu(I)&&!vh[t[d-1]]||!vh[t[d]]?t[d]:vh[t[d]]}return a}(this.text)},zo.prototype.trim=function(){for(var t=0,a=0;a<this.text.length&&Fd[this.text.charCodeAt(a)];a++)t++;for(var d=this.text.length,x=this.text.length-1;x>=0&&x>=t&&Fd[this.text.charCodeAt(x)];x--)d--;this.text=this.text.substring(t,d),this.sectionIndex=this.sectionIndex.slice(t,d)},zo.prototype.substring=function(t,a){var d=new zo;return d.text=this.text.substring(t,a),d.sectionIndex=this.sectionIndex.slice(t,a),d.sections=this.sections,d},zo.prototype.toString=function(){return this.text},zo.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(a,d){return Math.max(a,t.sections[d].scale)},0)},zo.prototype.addTextSection=function(t,a){this.text+=t.text,this.sections.push(ku.forText(t.scale,t.fontStack||a));for(var d=this.sections.length-1,x=0;x<t.text.length;++x)this.sectionIndex.push(d)},zo.prototype.addImageSection=function(t){var a=t.image?t.image.name:"";if(a.length!==0){var d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(ku.forImage(a)),this.sectionIndex.push(this.sections.length-1)):qe("Reached maximum number of images 6401")}else qe("Can't add FormattedSection with an empty image.")},zo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Fd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qa={};function qf(t,a,d,x,I,M){if(a.imageName){var r=x[a.imageName];return r?r.displaySize[0]*a.scale*24/M+I:0}var i=d[a.fontStack],u=i&&i[t];return u?u.metrics.advance*a.scale+I:0}function Op(t,a,d,x){var I=Math.pow(t-a,2);return x?t<a?I/2:2*I:I+Math.abs(d)*d}function Bp(t,a,d){var x=0;return t===10&&(x-=1e4),d&&(x+=150),t!==40&&t!==65288||(x+=50),a!==41&&a!==65289||(x+=50),x}function Fp(t,a,d,x,I,M){for(var r=null,i=Op(a,d,I,M),u=0,m=x;u<m.length;u+=1){var b=m[u],E=Op(a-b.x,d,I,M)+b.badness;E<=i&&(r=b,i=E)}return{index:t,x:a,priorBreak:r,badness:i}}function bh(t,a,d,x,I,M,r){if(M!=="point")return[];if(!t)return[];for(var i,u=[],m=function(G,q,K,$,te,de){for(var _e=0,Oe=0;Oe<G.length();Oe++){var Ye=G.getSection(Oe);_e+=qf(G.getCharCode(Oe),Ye,$,te,q,de)}return _e/Math.max(1,Math.ceil(_e/K))}(t,a,d,x,I,r),b=t.text.indexOf("\u200B")>=0,E=0,T=0;T<t.length();T++){var z=t.getSection(T),U=t.getCharCode(T);if(Fd[U]||(E+=qf(U,z,x,I,a,r)),T<t.length()-1){var V=!((i=U)<11904||!(pi["Bopomofo Extended"](i)||pi.Bopomofo(i)||pi["CJK Compatibility Forms"](i)||pi["CJK Compatibility Ideographs"](i)||pi["CJK Compatibility"](i)||pi["CJK Radicals Supplement"](i)||pi["CJK Strokes"](i)||pi["CJK Symbols and Punctuation"](i)||pi["CJK Unified Ideographs Extension A"](i)||pi["CJK Unified Ideographs"](i)||pi["Enclosed CJK Letters and Months"](i)||pi["Halfwidth and Fullwidth Forms"](i)||pi.Hiragana(i)||pi["Ideographic Description Characters"](i)||pi["Kangxi Radicals"](i)||pi["Katakana Phonetic Extensions"](i)||pi.Katakana(i)||pi["Vertical Forms"](i)||pi["Yi Radicals"](i)||pi["Yi Syllables"](i)));(Qa[U]||V||z.imageName)&&u.push(Fp(T+1,E,m,u,Bp(U,t.getCharCode(T+1),V&&b),!1))}}return function G(q){return q?G(q.priorBreak).concat(q.index):[]}(Fp(t.length(),E,m,u,0,!0))}function Bc(t){var a=.5,d=.5;switch(t){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:a,verticalAlign:d}}function xh(t,a,d,x,I){if(x||I)for(var M=t[d],r=(t[d].x+M.metrics.advance*M.scale)*x,i=a;i<=d;i++)t[i].x-=r,t[i].y+=I}function $h(t,a,d,x,I,M){var r,i=t.image;if(i.content){var u=i.content,m=i.pixelRatio||1;r=[u[0]/m,u[1]/m,i.displaySize[0]-u[2]/m,i.displaySize[1]-u[3]/m]}var b,E,T,z,U=a.left*M,V=a.right*M;d==="width"||d==="both"?(z=I[0]+U-x[3],E=I[0]+V+x[1]):E=(z=I[0]+(U+V-i.displaySize[0])/2)+i.displaySize[0];var G=a.top*M,q=a.bottom*M;return d==="height"||d==="both"?(b=I[1]+G-x[0],T=I[1]+q+x[2]):T=(b=I[1]+(G+q-i.displaySize[1])/2)+i.displaySize[1],{image:i,top:b,right:E,bottom:T,left:z,collisionPadding:r}}Qa[10]=!0,Qa[32]=!0,Qa[38]=!0,Qa[40]=!0,Qa[41]=!0,Qa[43]=!0,Qa[45]=!0,Qa[47]=!0,Qa[173]=!0,Qa[183]=!0,Qa[8203]=!0,Qa[8208]=!0,Qa[8211]=!0,Qa[8231]=!0;var Mu=function(t){function a(d,x,I,M){t.call(this,d,x),this.angle=I,M!==void 0&&(this.segment=M)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.clone=function(){return new a(this.x,this.y,this.angle,this.segment)},a}(D);function Up(t,a){var d=a.expression;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new ci(t+1))};if(d.kind==="source")return{kind:"source"};for(var x=d.zoomStops,I=d.interpolationType,M=0;M<x.length&&x[M]<=t;)M++;for(var r=M=Math.max(0,M-1);r<x.length&&x[r]<t+1;)r++;r=Math.min(x.length-1,r);var i=x[M],u=x[r];return d.kind==="composite"?{kind:"composite",minZoom:i,maxZoom:u,interpolationType:I}:{kind:"camera",minZoom:i,maxZoom:u,minSize:d.evaluate(new ci(i)),maxSize:d.evaluate(new ci(u)),interpolationType:I}}function Np(t,a,d){var x=a.uSize,I=d.lowerSize;return t.kind==="source"?I/128:t.kind==="composite"?so(I/128,d.upperSize/128,a.uSizeT):x}function Vp(t,a){var d=0,x=0;if(t.kind==="constant")x=t.layoutSize;else if(t.kind!=="source"){var I=t.interpolationType,M=I?re(Vo.interpolationFactor(I,a,t.minZoom,t.maxZoom),0,1):0;t.kind==="camera"?x=so(t.minSize,t.maxSize,M):d=M}return{uSizeT:d,uSize:x}}Pi("Anchor",Mu);var Eg=Object.freeze({__proto__:null,getSizeData:Up,evaluateSizeForFeature:Np,evaluateSizeForZoom:Vp,SIZE_PACK_FACTOR:128});function jp(t,a,d,x,I){if(a.segment===void 0)return!0;for(var M=a,r=a.segment+1,i=0;i>-d/2;){if(--r<0)return!1;i-=t[r].dist(M),M=t[r]}i+=t[r].dist(t[r+1]),r++;for(var u=[],m=0;i<d/2;){var b=t[r],E=t[r+1];if(!E)return!1;var T=t[r-1].angleTo(b)-b.angleTo(E);for(T=Math.abs((T+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:i,angleDelta:T}),m+=T;i-u[0].distance>x;)m-=u.shift().angleDelta;if(m>I)return!1;r++,i+=b.dist(E)}return!0}function qp(t){for(var a=0,d=0;d<t.length-1;d++)a+=t[d].dist(t[d+1]);return a}function Ud(t,a,d){return t?.6*a*d:0}function Nd(t,a){return Math.max(t?t.right-t.left:0,a?a.right-a.left:0)}function Ig(t,a,d,x,I,M){for(var r=Ud(d,I,M),i=Nd(d,x)*M,u=0,m=qp(t)/2,b=0;b<t.length-1;b++){var E=t[b],T=t[b+1],z=E.dist(T);if(u+z>m){var U=(m-u)/z,V=so(E.x,T.x,U),G=so(E.y,T.y,U),q=new Mu(V,G,T.angleTo(E),b);return q._round(),!r||jp(t,q,i,r,a)?q:void 0}u+=z}}function Sg(t,a,d,x,I,M,r,i,u){var m=Ud(x,M,r),b=Nd(x,I),E=b*r,T=t[0].x===0||t[0].x===u||t[0].y===0||t[0].y===u;return a-E<a/4&&(a=E+a/4),function z(U,V,G,q,K,$,te,de,_e){for(var Oe=$/2,Ye=qp(U),it=0,nt=V-G,vt=[],ot=0;ot<U.length-1;ot++){for(var Kt=U[ot],Wt=U[ot+1],Lt=Kt.dist(Wt),Zt=Wt.angleTo(Kt);nt+G<it+Lt;){var Nt=((nt+=G)-it)/Lt,$t=so(Kt.x,Wt.x,Nt),Ot=so(Kt.y,Wt.y,Nt);if($t>=0&&$t<_e&&Ot>=0&&Ot<_e&&nt-Oe>=0&&nt+Oe<=Ye){var Vt=new Mu($t,Ot,Zt,ot);Vt._round(),q&&!jp(U,Vt,$,q,K)||vt.push(Vt)}}it+=Lt}return de||vt.length||te||(vt=z(U,it/2,G,q,K,$,te,!0,_e)),vt}(t,T?a/2*i%a:(b/2+2*M)*r*i%a,a,m,d,E,T,!1,u)}function Gp(t,a,d,x,I){for(var M=[],r=0;r<t.length;r++)for(var i=t[r],u=void 0,m=0;m<i.length-1;m++){var b=i[m],E=i[m+1];b.x<a&&E.x<a||(b.x<a?b=new D(a,b.y+(a-b.x)/(E.x-b.x)*(E.y-b.y))._round():E.x<a&&(E=new D(a,b.y+(a-b.x)/(E.x-b.x)*(E.y-b.y))._round()),b.y<d&&E.y<d||(b.y<d?b=new D(b.x+(d-b.y)/(E.y-b.y)*(E.x-b.x),d)._round():E.y<d&&(E=new D(b.x+(d-b.y)/(E.y-b.y)*(E.x-b.x),d)._round()),b.x>=x&&E.x>=x||(b.x>=x?b=new D(x,b.y+(x-b.x)/(E.x-b.x)*(E.y-b.y))._round():E.x>=x&&(E=new D(x,b.y+(x-b.x)/(E.x-b.x)*(E.y-b.y))._round()),b.y>=I&&E.y>=I||(b.y>=I?b=new D(b.x+(I-b.y)/(E.y-b.y)*(E.x-b.x),I)._round():E.y>=I&&(E=new D(b.x+(I-b.y)/(E.y-b.y)*(E.x-b.x),I)._round()),u&&b.equals(u[u.length-1])||M.push(u=[b]),u.push(E)))))}return M}function ql(t,a,d,x){var I=[],M=t.image,r=M.pixelRatio,i=M.paddedRect.w-2,u=M.paddedRect.h-2,m=t.right-t.left,b=t.bottom-t.top,E=M.stretchX||[[0,i]],T=M.stretchY||[[0,u]],z=function($t,Ot){return $t+Ot[1]-Ot[0]},U=E.reduce(z,0),V=T.reduce(z,0),G=i-U,q=u-V,K=0,$=U,te=0,de=V,_e=0,Oe=G,Ye=0,it=q;if(M.content&&x){var nt=M.content;K=ed(E,0,nt[0]),te=ed(T,0,nt[1]),$=ed(E,nt[0],nt[2]),de=ed(T,nt[1],nt[3]),_e=nt[0]-K,Ye=nt[1]-te,Oe=nt[2]-nt[0]-$,it=nt[3]-nt[1]-de}var vt=function($t,Ot,Vt,ki){var Ai=td($t.stretch-K,$,m,t.left),on=id($t.fixed-_e,Oe,$t.stretch,U),un=td(Ot.stretch-te,de,b,t.top),zn=id(Ot.fixed-Ye,it,Ot.stretch,V),Kn=td(Vt.stretch-K,$,m,t.left),fr=id(Vt.fixed-_e,Oe,Vt.stretch,U),mr=td(ki.stretch-te,de,b,t.top),or=id(ki.fixed-Ye,it,ki.stretch,V),wr=new D(Ai,un),ar=new D(Kn,un),Er=new D(Kn,mr),fn=new D(Ai,mr),Mn=new D(on/r,zn/r),Dn=new D(fr/r,or/r),En=a*Math.PI/180;if(En){var qr=Math.sin(En),Fr=Math.cos(En),nr=[Fr,-qr,qr,Fr];wr._matMult(nr),ar._matMult(nr),fn._matMult(nr),Er._matMult(nr)}var jn=$t.stretch+$t.fixed,br=Ot.stretch+Ot.fixed;return{tl:wr,tr:ar,bl:fn,br:Er,tex:{x:M.paddedRect.x+1+jn,y:M.paddedRect.y+1+br,w:Vt.stretch+Vt.fixed-jn,h:ki.stretch+ki.fixed-br},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mn,pixelOffsetBR:Dn,minFontScaleX:Oe/r/m,minFontScaleY:it/r/b,isSDF:d}};if(x&&(M.stretchX||M.stretchY))for(var ot=Lu(E,G,U),Kt=Lu(T,q,V),Wt=0;Wt<ot.length-1;Wt++)for(var Lt=ot[Wt],Zt=ot[Wt+1],Nt=0;Nt<Kt.length-1;Nt++)I.push(vt(Lt,Kt[Nt],Zt,Kt[Nt+1]));else I.push(vt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:i+1},{fixed:0,stretch:u+1}));return I}function ed(t,a,d){for(var x=0,I=0,M=t;I<M.length;I+=1){var r=M[I];x+=Math.max(a,Math.min(d,r[1]))-Math.max(a,Math.min(d,r[0]))}return x}function Lu(t,a,d){for(var x=[{fixed:-1,stretch:0}],I=0,M=t;I<M.length;I+=1){var r=M[I],i=r[0],u=r[1],m=x[x.length-1];x.push({fixed:i-m.stretch,stretch:m.stretch}),x.push({fixed:i-m.stretch,stretch:m.stretch+(u-i)})}return x.push({fixed:a+1,stretch:d}),x}function td(t,a,d,x){return t/a*d+x}function id(t,a,d,x){return t-a*d/x}var nd=function(t,a,d,x,I,M,r,i,u,m){if(this.boxStartIndex=t.length,u){var b=M.top,E=M.bottom,T=M.collisionPadding;T&&(b-=T[1],E+=T[3]);var z=E-b;z>0&&(z=Math.max(10,z),this.circleDiameter=z)}else{var U=M.top*r-i,V=M.bottom*r+i,G=M.left*r-i,q=M.right*r+i,K=M.collisionPadding;if(K&&(G-=K[0]*r,U-=K[1]*r,q+=K[2]*r,V+=K[3]*r),m){var $=new D(G,U),te=new D(q,U),de=new D(G,V),_e=new D(q,V),Oe=m*Math.PI/180;$._rotate(Oe),te._rotate(Oe),de._rotate(Oe),_e._rotate(Oe),G=Math.min($.x,te.x,de.x,_e.x),q=Math.max($.x,te.x,de.x,_e.x),U=Math.min($.y,te.y,de.y,_e.y),V=Math.max($.y,te.y,de.y,_e.y)}t.emplaceBack(a.x,a.y,G,U,q,V,d,x,I)}this.boxEndIndex=t.length},Fc=function(t,a){if(t===void 0&&(t=[]),a===void 0&&(a=Tg),this.data=t,this.length=this.data.length,this.compare=a,this.length>0)for(var d=(this.length>>1)-1;d>=0;d--)this._down(d)};function Tg(t,a){return t<a?-1:t>a?1:0}function Ag(t,a,d){a===void 0&&(a=1),d===void 0&&(d=!1);for(var x=1/0,I=1/0,M=-1/0,r=-1/0,i=t[0],u=0;u<i.length;u++){var m=i[u];(!u||m.x<x)&&(x=m.x),(!u||m.y<I)&&(I=m.y),(!u||m.x>M)&&(M=m.x),(!u||m.y>r)&&(r=m.y)}var b=Math.min(M-x,r-I),E=b/2,T=new Fc([],Gf);if(b===0)return new D(x,I);for(var z=x;z<M;z+=b)for(var U=I;U<r;U+=b)T.push(new Uc(z+E,U+E,E,t));for(var V=function(K){for(var $=0,te=0,de=0,_e=K[0],Oe=0,Ye=_e.length,it=Ye-1;Oe<Ye;it=Oe++){var nt=_e[Oe],vt=_e[it],ot=nt.x*vt.y-vt.x*nt.y;te+=(nt.x+vt.x)*ot,de+=(nt.y+vt.y)*ot,$+=3*ot}return new Uc(te/$,de/$,0,K)}(t),G=T.length;T.length;){var q=T.pop();(q.d>V.d||!V.d)&&(V=q,d&&console.log("found best %d after %d probes",Math.round(1e4*q.d)/1e4,G)),q.max-V.d<=a||(T.push(new Uc(q.p.x-(E=q.h/2),q.p.y-E,E,t)),T.push(new Uc(q.p.x+E,q.p.y-E,E,t)),T.push(new Uc(q.p.x-E,q.p.y+E,E,t)),T.push(new Uc(q.p.x+E,q.p.y+E,E,t)),G+=4)}return d&&(console.log("num probes: "+G),console.log("best distance: "+V.d)),V.p}function Gf(t,a){return a.max-t.max}function Uc(t,a,d,x){this.p=new D(t,a),this.h=d,this.d=function(I,M){for(var r=!1,i=1/0,u=0;u<M.length;u++)for(var m=M[u],b=0,E=m.length,T=E-1;b<E;T=b++){var z=m[b],U=m[T];z.y>I.y!=U.y>I.y&&I.x<(U.x-z.x)*(I.y-z.y)/(U.y-z.y)+z.x&&(r=!r),i=Math.min(i,ec(I,z,U))}return(r?1:-1)*Math.sqrt(i)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}Fc.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Fc.prototype.pop=function(){if(this.length!==0){var t=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),t}},Fc.prototype.peek=function(){return this.data[0]},Fc.prototype._up=function(t){for(var a=this.data,d=this.compare,x=a[t];t>0;){var I=t-1>>1,M=a[I];if(d(x,M)>=0)break;a[t]=M,t=I}a[t]=x},Fc.prototype._down=function(t){for(var a=this.data,d=this.compare,x=this.length>>1,I=a[t];t<x;){var M=1+(t<<1),r=a[M],i=M+1;if(i<this.length&&d(a[i],r)<0&&(M=i,r=a[i]),d(r,I)>=0)break;a[t]=r,t=M}a[t]=I};var Vd=Number.POSITIVE_INFINITY;function rd(t,a){return a[1]!==Vd?function(d,x,I){var M=0,r=0;switch(x=Math.abs(x),I=Math.abs(I),d){case"top-right":case"top-left":case"top":r=I-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-I}switch(d){case"top-right":case"bottom-right":case"right":M=-x;break;case"top-left":case"bottom-left":case"left":M=x}return[M,r]}(t,a[0],a[1]):function(d,x){var I=0,M=0;x<0&&(x=0);var r=x/Math.sqrt(2);switch(d){case"top-right":case"top-left":M=r-7;break;case"bottom-right":case"bottom-left":M=7-r;break;case"bottom":M=7-x;break;case"top":M=x-7}switch(d){case"top-right":case"bottom-right":I=-r;break;case"top-left":case"bottom-left":I=r;break;case"left":I=x;break;case"right":I=-x}return[I,M]}(t,a[0])}function jd(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function od(t,a,d,x,I,M,r,i,u,m,b,E,T,z,U){var V=function(te,de,_e,Oe,Ye,it,nt,vt){for(var ot=Oe.layout.get("text-rotate").evaluate(it,{})*Math.PI/180,Kt=[],Wt=0,Lt=de.positionedLines;Wt<Lt.length;Wt+=1)for(var Zt=Lt[Wt],Nt=0,$t=Zt.positionedGlyphs;Nt<$t.length;Nt+=1){var Ot=$t[Nt];if(Ot.rect){var Vt=Ot.rect||{},ki=4,Ai=!0,on=1,un=0,zn=(Ye||vt)&&Ot.vertical,Kn=Ot.metrics.advance*Ot.scale/2;if(vt&&de.verticalizable&&(un=Zt.lineOffset/2-(Ot.imageName?-(24-Ot.metrics.width*Ot.scale)/2:24*(Ot.scale-1))),Ot.imageName){var fr=nt[Ot.imageName];Ai=fr.sdf,ki=1/(on=fr.pixelRatio)}var mr=Ye?[Ot.x+Kn,Ot.y]:[0,0],or=Ye?[0,0]:[Ot.x+Kn+_e[0],Ot.y+_e[1]-un],wr=[0,0];zn&&(wr=or,or=[0,0]);var ar=(Ot.metrics.left-ki)*Ot.scale-Kn+or[0],Er=(-Ot.metrics.top-ki)*Ot.scale+or[1],fn=ar+Vt.w*Ot.scale/on,Mn=Er+Vt.h*Ot.scale/on,Dn=new D(ar,Er),En=new D(fn,Er),qr=new D(ar,Mn),Fr=new D(fn,Mn);if(zn){var nr=new D(-Kn,Kn- -17),jn=-Math.PI/2,br=12-Kn,Ui=new D(22-br,-(Ot.imageName?br:0)),Ro=new(Function.prototype.bind.apply(D,[null].concat(wr)));Dn._rotateAround(jn,nr)._add(Ui)._add(Ro),En._rotateAround(jn,nr)._add(Ui)._add(Ro),qr._rotateAround(jn,nr)._add(Ui)._add(Ro),Fr._rotateAround(jn,nr)._add(Ui)._add(Ro)}if(ot){var Wr=Math.sin(ot),mo=Math.cos(ot),Lr=[mo,-Wr,Wr,mo];Dn._matMult(Lr),En._matMult(Lr),qr._matMult(Lr),Fr._matMult(Lr)}var oa=new D(0,0),qo=new D(0,0);Kt.push({tl:Dn,tr:En,bl:qr,br:Fr,tex:Vt,writingMode:de.writingMode,glyphOffset:mr,sectionIndex:Ot.sectionIndex,isSDF:Ai,pixelOffsetTL:oa,pixelOffsetBR:qo,minFontScaleX:0,minFontScaleY:0})}}return Kt}(0,d,i,I,M,r,x,t.allowVerticalPlacement),G=t.textSizeData,q=null;G.kind==="source"?(q=[128*I.layout.get("text-size").evaluate(r,{})])[0]>32640&&qe(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):G.kind==="composite"&&((q=[128*z.compositeTextSizes[0].evaluate(r,{},U),128*z.compositeTextSizes[1].evaluate(r,{},U)])[0]>32640||q[1]>32640)&&qe(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,V,q,i,M,r,m,a,u.lineStartIndex,u.lineLength,T,U);for(var K=0,$=b;K<$.length;K+=1)E[$[K]]=t.text.placedSymbolArray.length-1;return 4*V.length}function ad(t){for(var a in t)return t[a];return null}function qd(t,a,d,x){var I=t.compareText;if(a in I){for(var M=I[a],r=M.length-1;r>=0;r--)if(x.dist(M[r])<d)return!0}else I[a]=[];return I[a].push(x),!1}var Cg=mh.VectorTileFeature.types,kg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Gd(t,a,d,x,I,M,r,i,u,m,b,E,T){var z=i?Math.min(32640,Math.round(i[0])):0,U=i?Math.min(32640,Math.round(i[1])):0;t.emplaceBack(a,d,Math.round(32*x),Math.round(32*I),M,r,(z<<1)+(u?1:0),U,16*m,16*b,256*E,256*T)}function Hp(t,a,d){t.emplaceBack(a.x,a.y,d),t.emplaceBack(a.x,a.y,d),t.emplaceBack(a.x,a.y,d),t.emplaceBack(a.x,a.y,d)}function wh(t){for(var a=0,d=t.sections;a<d.length;a+=1)if(Vr(d[a].text))return!0;return!1}var ac=function(t){this.layoutVertexArray=new Ke,this.indexArray=new jt,this.programConfigurations=t,this.segments=new be,this.dynamicLayoutVertexArray=new ke,this.opacityVertexArray=new Xe,this.placedSymbolArray=new w};ac.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},ac.prototype.upload=function(t,a,d,x){this.isEmpty()||(d&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,vg.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Mf.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,kg,!0),this.opacityVertexBuffer.itemSize=1),(d||x)&&this.programConfigurations.upload(t))},ac.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Pi("SymbolBuffers",ac);var Eh=function(t,a,d){this.layoutVertexArray=new t,this.layoutAttributes=a,this.indexArray=new d,this.segments=new be,this.collisionVertexArray=new pt};Eh.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,zp.members,!0)},Eh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Pi("CollisionBuffers",Eh);var Mr=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(M){return M.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=xa([]),this.placementViewportMatrix=xa([]);var a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Up(this.zoom,a["text-size"]),this.iconSizeData=Up(this.zoom,a["icon-size"]);var d=this.layers[0].layout,x=d.get("symbol-sort-key"),I=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=I!=="viewport-y"&&x.constantOr(1)!==void 0,this.sortFeaturesByY=(I==="viewport-y"||I==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(function(M){return fs[M]})),this.stateDependentLayerIds=this.layers.filter(function(M){return M.isStateDependent()}).map(function(M){return M.id}),this.sourceID=t.sourceID};Mr.prototype.createArrays=function(){this.text=new ac(new Yi(this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new ac(new Yi(this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.glyphOffsetArray=new N,this.lineVertexArray=new H,this.symbolInstances=new F},Mr.prototype.calculateGlyphDependencies=function(t,a,d,x,I){for(var M=0;M<t.length;M++)if(a[t.charCodeAt(M)]=!0,(d||x)&&I){var r=vh[t.charAt(M)];r&&(a[r.charCodeAt(0)]=!0)}},Mr.prototype.populate=function(t,a,d){var x=this.layers[0],I=x.layout,M=I.get("text-font"),r=I.get("text-field"),i=I.get("icon-image"),u=(r.value.kind!=="constant"||r.value.value instanceof pr&&!r.value.value.isEmpty()||r.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),m=i.value.kind!=="constant"||!!i.value.value||Object.keys(i.parameters).length>0,b=I.get("symbol-sort-key");if(this.features=[],u||m){for(var E=a.iconDependencies,T=a.glyphDependencies,z=a.availableImages,U=new ci(this.zoom),V=0,G=t;V<G.length;V+=1){var q=G[V],K=q.feature,$=q.id,te=q.index,de=q.sourceLayerIndex,_e=x._featureFilter.needGeometry,Oe=er(K,_e);if(x._featureFilter.filter(U,Oe,d)){_e||(Oe.geometry=io(K));var Ye=void 0;if(u){var it=x.getValueAndResolveTokens("text-field",Oe,d,z),nt=pr.factory(it);wh(nt)&&(this.hasRTLText=!0),(!this.hasRTLText||qa()==="unavailable"||this.hasRTLText&&Di.isParsed())&&(Ye=zf(nt,x,Oe))}var vt=void 0;if(m){var ot=x.getValueAndResolveTokens("icon-image",Oe,d,z);vt=ot instanceof Zo?ot:Zo.fromString(ot)}if(Ye||vt){var Kt=this.sortFeaturesByKey?b.evaluate(Oe,{},d):void 0;if(this.features.push({id:$,text:Ye,icon:vt,index:te,sourceLayerIndex:de,geometry:Oe.geometry,properties:K.properties,type:Cg[K.type],sortKey:Kt}),vt&&(E[vt.name]=!0),Ye){var Wt=M.evaluate(Oe,{},d).join(","),Lt=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(fs.vertical)>=0;for(var Zt=0,Nt=Ye.sections;Zt<Nt.length;Zt+=1){var $t=Nt[Zt];if($t.image)E[$t.image.name]=!0;else{var Ot=vu(Ye.toString()),Vt=$t.fontStack||Wt,ki=T[Vt]=T[Vt]||{};this.calculateGlyphDependencies($t.text,ki,Lt,this.allowVerticalPlacement,Ot)}}}}}}I.get("symbol-placement")==="line"&&(this.features=function(Ai){var on={},un={},zn=[],Kn=0;function fr(nr){zn.push(Ai[nr]),Kn++}function mr(nr,jn,br){var Ui=un[nr];return delete un[nr],un[jn]=Ui,zn[Ui].geometry[0].pop(),zn[Ui].geometry[0]=zn[Ui].geometry[0].concat(br[0]),Ui}function or(nr,jn,br){var Ui=on[jn];return delete on[jn],on[nr]=Ui,zn[Ui].geometry[0].shift(),zn[Ui].geometry[0]=br[0].concat(zn[Ui].geometry[0]),Ui}function wr(nr,jn,br){var Ui=br?jn[0][jn[0].length-1]:jn[0][0];return nr+":"+Ui.x+":"+Ui.y}for(var ar=0;ar<Ai.length;ar++){var Er=Ai[ar],fn=Er.geometry,Mn=Er.text?Er.text.toString():null;if(Mn){var Dn=wr(Mn,fn),En=wr(Mn,fn,!0);if(Dn in un&&En in on&&un[Dn]!==on[En]){var qr=or(Dn,En,fn),Fr=mr(Dn,En,zn[qr].geometry);delete on[Dn],delete un[En],un[wr(Mn,zn[Fr].geometry,!0)]=Fr,zn[qr].geometry=null}else Dn in un?mr(Dn,En,fn):En in on?or(Dn,En,fn):(fr(ar),on[Dn]=Kn-1,un[En]=Kn-1)}else fr(ar)}return zn.filter(function(nr){return nr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ai,on){return Ai.sortKey-on.sortKey})}},Mr.prototype.update=function(t,a,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,a,this.layers,d),this.icon.programConfigurations.updatePaintArrays(t,a,this.layers,d))},Mr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Mr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Mr.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Mr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Mr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Mr.prototype.addToLineVertexArray=function(t,a){var d=this.lineVertexArray.length;if(t.segment!==void 0){for(var x=t.dist(a[t.segment+1]),I=t.dist(a[t.segment]),M={},r=t.segment+1;r<a.length;r++)M[r]={x:a[r].x,y:a[r].y,tileUnitDistanceFromAnchor:x},r<a.length-1&&(x+=a[r+1].dist(a[r]));for(var i=t.segment||0;i>=0;i--)M[i]={x:a[i].x,y:a[i].y,tileUnitDistanceFromAnchor:I},i>0&&(I+=a[i-1].dist(a[i]));for(var u=0;u<a.length;u++){var m=M[u];this.lineVertexArray.emplaceBack(m.x,m.y,m.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}},Mr.prototype.addSymbols=function(t,a,d,x,I,M,r,i,u,m,b,E){for(var T=t.indexArray,z=t.layoutVertexArray,U=t.segments.prepareSegment(4*a.length,z,T,this.canOverlap?M.sortKey:void 0),V=this.glyphOffsetArray.length,G=U.vertexLength,q=this.allowVerticalPlacement&&r===fs.vertical?Math.PI/2:0,K=M.text&&M.text.sections,$=0;$<a.length;$++){var te=a[$],de=te.tl,_e=te.tr,Oe=te.bl,Ye=te.br,it=te.tex,nt=te.pixelOffsetTL,vt=te.pixelOffsetBR,ot=te.minFontScaleX,Kt=te.minFontScaleY,Wt=te.glyphOffset,Lt=te.isSDF,Zt=te.sectionIndex,Nt=U.vertexLength,$t=Wt[1];Gd(z,i.x,i.y,de.x,$t+de.y,it.x,it.y,d,Lt,nt.x,nt.y,ot,Kt),Gd(z,i.x,i.y,_e.x,$t+_e.y,it.x+it.w,it.y,d,Lt,vt.x,nt.y,ot,Kt),Gd(z,i.x,i.y,Oe.x,$t+Oe.y,it.x,it.y+it.h,d,Lt,nt.x,vt.y,ot,Kt),Gd(z,i.x,i.y,Ye.x,$t+Ye.y,it.x+it.w,it.y+it.h,d,Lt,vt.x,vt.y,ot,Kt),Hp(t.dynamicLayoutVertexArray,i,q),T.emplaceBack(Nt,Nt+1,Nt+2),T.emplaceBack(Nt+1,Nt+2,Nt+3),U.vertexLength+=4,U.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Wt[0]),$!==a.length-1&&Zt===a[$+1].sectionIndex||t.programConfigurations.populatePaintArrays(z.length,M,M.index,{},E,K&&K[Zt])}t.placedSymbolArray.emplaceBack(i.x,i.y,V,this.glyphOffsetArray.length-V,G,u,m,i.segment,d?d[0]:0,d?d[1]:0,x[0],x[1],r,0,!1,0,b)},Mr.prototype._addCollisionDebugVertex=function(t,a,d,x,I,M){return a.emplaceBack(0,0),t.emplaceBack(d.x,d.y,x,I,Math.round(M.x),Math.round(M.y))},Mr.prototype.addCollisionDebugVertices=function(t,a,d,x,I,M,r){var i=I.segments.prepareSegment(4,I.layoutVertexArray,I.indexArray),u=i.vertexLength,m=I.layoutVertexArray,b=I.collisionVertexArray,E=r.anchorX,T=r.anchorY;this._addCollisionDebugVertex(m,b,M,E,T,new D(t,a)),this._addCollisionDebugVertex(m,b,M,E,T,new D(d,a)),this._addCollisionDebugVertex(m,b,M,E,T,new D(d,x)),this._addCollisionDebugVertex(m,b,M,E,T,new D(t,x)),i.vertexLength+=4;var z=I.indexArray;z.emplaceBack(u,u+1),z.emplaceBack(u+1,u+2),z.emplaceBack(u+2,u+3),z.emplaceBack(u+3,u),i.primitiveLength+=4},Mr.prototype.addDebugCollisionBoxes=function(t,a,d,x){for(var I=t;I<a;I++){var M=this.collisionBoxArray.get(I);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,x?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,d)}},Mr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Eh(lt,Lf.members,qi),this.iconCollisionBox=new Eh(lt,Lf.members,qi);for(var t=0;t<this.symbolInstances.length;t++){var a=this.symbolInstances.get(t);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}},Mr.prototype._deserializeCollisionBoxesForSymbol=function(t,a,d,x,I,M,r,i,u){for(var m={},b=a;b<d;b++){var E=t.get(b);m.textBox={x1:E.x1,y1:E.y1,x2:E.x2,y2:E.y2,anchorPointX:E.anchorPointX,anchorPointY:E.anchorPointY},m.textFeatureIndex=E.featureIndex;break}for(var T=x;T<I;T++){var z=t.get(T);m.verticalTextBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY},m.verticalTextFeatureIndex=z.featureIndex;break}for(var U=M;U<r;U++){var V=t.get(U);m.iconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},m.iconFeatureIndex=V.featureIndex;break}for(var G=i;G<u;G++){var q=t.get(G);m.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},m.verticalIconFeatureIndex=q.featureIndex;break}return m},Mr.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var a=0;a<this.symbolInstances.length;a++){var d=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}},Mr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Mr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Mr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Mr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Mr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Mr.prototype.addIndicesForPlacedSymbol=function(t,a){for(var d=t.placedSymbolArray.get(a),x=d.vertexStartIndex+4*d.numGlyphs,I=d.vertexStartIndex;I<x;I+=4)t.indexArray.emplaceBack(I,I+1,I+2),t.indexArray.emplaceBack(I+1,I+2,I+3)},Mr.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var a=Math.sin(t),d=Math.cos(t),x=[],I=[],M=[],r=0;r<this.symbolInstances.length;++r){M.push(r);var i=this.symbolInstances.get(r);x.push(0|Math.round(a*i.anchorX+d*i.anchorY)),I.push(i.featureIndex)}return M.sort(function(u,m){return x[u]-x[m]||I[m]-I[u]}),M},Mr.prototype.addToSortKeyRanges=function(t,a){var d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===a?d.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:t,symbolInstanceEnd:t+1})},Mr.prototype.sortFeatures=function(t){var a=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var d=0,x=this.symbolInstanceIndexes;d<x.length;d+=1){var I=this.symbolInstances.get(x[d]);this.featureSortOrder.push(I.featureIndex),[I.rightJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.leftJustifiedTextSymbolIndex].forEach(function(M,r,i){M>=0&&i.indexOf(M)===r&&a.addIndicesForPlacedSymbol(a.text,M)}),I.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,I.verticalPlacedTextSymbolIndex),I.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,I.placedIconSymbolIndex),I.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,I.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Pi("SymbolBucket",Mr,{omit:["layers","collisionBoxArray","features","compareText"]}),Mr.MAX_GLYPHS=65535,Mr.addDynamicAttributes=Hp;var Mg=new C({"symbol-placement":new gi(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new gi(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gi(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new fi(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gi(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gi(Ie.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new gi(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new gi(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gi(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new fi(Ie.layout_symbol["icon-size"]),"icon-text-fit":new gi(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gi(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new fi(Ie.layout_symbol["icon-image"]),"icon-rotate":new fi(Ie.layout_symbol["icon-rotate"]),"icon-padding":new gi(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new gi(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new fi(Ie.layout_symbol["icon-offset"]),"icon-anchor":new fi(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gi(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gi(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gi(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new fi(Ie.layout_symbol["text-field"]),"text-font":new fi(Ie.layout_symbol["text-font"]),"text-size":new fi(Ie.layout_symbol["text-size"]),"text-max-width":new fi(Ie.layout_symbol["text-max-width"]),"text-line-height":new gi(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new fi(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new fi(Ie.layout_symbol["text-justify"]),"text-radial-offset":new fi(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gi(Ie.layout_symbol["text-variable-anchor"]),"text-anchor":new fi(Ie.layout_symbol["text-anchor"]),"text-max-angle":new gi(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new gi(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new fi(Ie.layout_symbol["text-rotate"]),"text-padding":new gi(Ie.layout_symbol["text-padding"]),"text-keep-upright":new gi(Ie.layout_symbol["text-keep-upright"]),"text-transform":new fi(Ie.layout_symbol["text-transform"]),"text-offset":new fi(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new gi(Ie.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new gi(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new gi(Ie.layout_symbol["text-optional"])}),Gl={paint:new C({"icon-opacity":new fi(Ie.paint_symbol["icon-opacity"]),"icon-color":new fi(Ie.paint_symbol["icon-color"]),"icon-halo-color":new fi(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new fi(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new fi(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new gi(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new gi(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new fi(Ie.paint_symbol["text-opacity"]),"text-color":new fi(Ie.paint_symbol["text-color"],{runtimeType:Pe,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new fi(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new fi(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new fi(Ie.paint_symbol["text-halo-blur"]),"text-translate":new gi(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new gi(Ie.paint_symbol["text-translate-anchor"])}),layout:Mg},Nc=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Te,this.defaultValue=t};Nc.prototype.evaluate=function(t){if(t.formattedSection){var a=this.defaultValue.property.overrides;if(a&&a.hasOverride(t.formattedSection))return a.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},Nc.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},Nc.prototype.outputDefined=function(){return!1},Nc.prototype.serialize=function(){return null},Pi("FormatSectionOverride",Nc,{omit:["defaultValue"]});var Hf=function(t){function a(d){t.call(this,d,Gl)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.recalculate=function(d,x){if(t.prototype.recalculate.call(this,d,x),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var I=this.layout.get("text-writing-mode");if(I){for(var M=[],r=0,i=I;r<i.length;r+=1){var u=i[r];M.indexOf(u)<0&&M.push(u)}this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},a.prototype.getValueAndResolveTokens=function(d,x,I,M){var r=this.layout.get(d).evaluate(x,{},I,M),i=this._unevaluatedLayout._values[d];return i.isDataDriven()||dl(i.value)||!r?r:function(u,m){return m.replace(/{([^{}]+)}/g,function(b,E){return E in u?String(u[E]):""})}(x.properties,r)},a.prototype.createBucket=function(d){return new Mr(d)},a.prototype.queryRadius=function(){return 0},a.prototype.queryIntersectsFeature=function(){return!1},a.prototype._setPaintOverrides=function(){for(var d=0,x=Gl.paint.overridableProperties;d<x.length;d+=1){var I=x[d];if(a.hasPaintOverride(this.layout,I)){var M,r=this.paint.get(I),i=new Nc(r),u=new Ts(i,r.property.specification);M=r.value.kind==="constant"||r.value.kind==="source"?new Xs("source",u):new As("composite",u,r.value.zoomStops,r.value._interpolationType),this.paint._values[I]=new na(r.property,M,r.parameters)}}},a.prototype._handleOverridablePaintPropertyUpdate=function(d,x,I){return!(!this.layout||x.isDataDriven()||I.isDataDriven())&&a.hasPaintOverride(this.layout,d)},a.hasPaintOverride=function(d,x){var I=d.get("text-field"),M=Gl.paint.properties[x],r=!1,i=function(b){for(var E=0,T=b;E<T.length;E+=1)if(M.overrides&&M.overrides.hasOverride(T[E]))return void(r=!0)};if(I.value.kind==="constant"&&I.value.value instanceof pr)i(I.value.value.sections);else if(I.value.kind==="source"){var u=function(b){r||(b instanceof Qo&&oo(b.value)===si?i(b.value.sections):b instanceof La?i(b.sections):b.eachChild(u))},m=I.value;m._styleExpression&&u(m._styleExpression.expression)}return r},a}(l),Lg={paint:new C({"background-color":new gi(Ie.paint_background["background-color"]),"background-pattern":new xo(Ie.paint_background["background-pattern"]),"background-opacity":new gi(Ie.paint_background["background-opacity"])})},Pg=function(t){function a(d){t.call(this,d,Lg)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a}(l),zg={paint:new C({"raster-opacity":new gi(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new gi(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gi(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gi(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new gi(Ie.paint_raster["raster-saturation"]),"raster-contrast":new gi(Ie.paint_raster["raster-contrast"]),"raster-resampling":new gi(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new gi(Ie.paint_raster["raster-fade-duration"])})},Hd=function(t){function a(d){t.call(this,d,zg)}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a}(l),Zp=function(t){function a(d){t.call(this,d,{}),this.implementation=d}return t&&(a.__proto__=t),(a.prototype=Object.create(t&&t.prototype)).constructor=a,a.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},a.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},a.prototype.recalculate=function(){},a.prototype.updateTransitions=function(){},a.prototype.hasTransition=function(){},a.prototype.serialize=function(){},a.prototype.onAdd=function(d){this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},a.prototype.onRemove=function(d){this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},a}(l),Dg={circle:Md,heatmap:jh,hillshade:If,fill:Mp,"fill-extrusion":pg,line:_g,symbol:Hf,background:Pg,raster:Hd},Zd=O.HTMLImageElement,Wd=O.HTMLCanvasElement,Vc=O.HTMLVideoElement,Zf=O.ImageData,Ih=O.ImageBitmap,sc=function(t,a,d,x){this.context=t,this.format=d,this.texture=t.gl.createTexture(),this.update(a,x)};sc.prototype.update=function(t,a,d){var x=t.width,I=t.height,M=!(this.size&&this.size[0]===x&&this.size[1]===I||d),r=this.context,i=r.gl;if(this.useMipmap=Boolean(a&&a.useMipmap),i.bindTexture(i.TEXTURE_2D,this.texture),r.pixelStoreUnpackFlipY.set(!1),r.pixelStoreUnpack.set(1),r.pixelStoreUnpackPremultiplyAlpha.set(this.format===i.RGBA&&(!a||a.premultiply!==!1)),M)this.size=[x,I],t instanceof Zd||t instanceof Wd||t instanceof Vc||t instanceof Zf||Ih&&t instanceof Ih?i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,i.UNSIGNED_BYTE,t):i.texImage2D(i.TEXTURE_2D,0,this.format,x,I,0,this.format,i.UNSIGNED_BYTE,t.data);else{var u=d||{x:0,y:0},m=u.x,b=u.y;t instanceof Zd||t instanceof Wd||t instanceof Vc||t instanceof Zf||Ih&&t instanceof Ih?i.texSubImage2D(i.TEXTURE_2D,0,m,b,i.RGBA,i.UNSIGNED_BYTE,t):i.texSubImage2D(i.TEXTURE_2D,0,m,b,x,I,i.RGBA,i.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&i.generateMipmap(i.TEXTURE_2D)},sc.prototype.bind=function(t,a,d){var x=this.context.gl;x.bindTexture(x.TEXTURE_2D,this.texture),d!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=x.LINEAR),t!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,t),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,d||t),this.filter=t),a!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,a),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,a),this.wrap=a)},sc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},sc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Sh=function(t){var a=this;this._callback=t,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){a._triggered=!1,a._callback()})};Sh.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},Sh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var lc=function(t,a,d){this.target=t,this.parent=a,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},fe(["receive","process"],this),this.invoker=new Sh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Et()?t:O};function Wf(t,a,d){var x=2*Math.PI*6378137/256/Math.pow(2,d);return[t*x-2*Math.PI*6378137/2,a*x-2*Math.PI*6378137/2]}lc.prototype.send=function(t,a,d,x,I){var M=this;I===void 0&&(I=!1);var r=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[r]=d);var i=wt(this.globalScope)?void 0:[];return this.target.postMessage({id:r,type:t,hasCallback:!!d,targetMapId:x,mustQueue:I,sourceMapId:this.mapId,data:Ra(a,i)},i),{cancel:function(){d&&delete M.callbacks[r],M.target.postMessage({id:r,type:"<cancel>",targetMapId:x,sourceMapId:M.mapId})}}},lc.prototype.receive=function(t){var a=t.data,d=a.id;if(d&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){delete this.tasks[d];var x=this.cancelCallbacks[d];delete this.cancelCallbacks[d],x&&x()}else Et()||a.mustQueue?(this.tasks[d]=a,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,a)},lc.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),a=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),a&&this.processTask(t,a)}},lc.prototype.processTask=function(t,a){var d=this;if(a.type==="<response>"){var x=this.callbacks[t];delete this.callbacks[t],x&&(a.error?x(Hr(a.error)):x(null,Hr(a.data)))}else{var I=!1,M=wt(this.globalScope)?void 0:[],r=a.hasCallback?function(b,E){I=!0,delete d.cancelCallbacks[t],d.target.postMessage({id:t,type:"<response>",sourceMapId:d.mapId,error:b?Ra(b):null,data:Ra(E,M)},M)}:function(b){I=!0},i=null,u=Hr(a.data);if(this.parent[a.type])i=this.parent[a.type](a.sourceMapId,u,r);else if(this.parent.getWorkerSource){var m=a.type.split(".");i=this.parent.getWorkerSource(a.sourceMapId,m[0],u.source)[m[1]](u,r)}else r(new Error("Could not find function "+a.type));!I&&i&&i.cancel&&(this.cancelCallbacks[t]=i.cancel)}},lc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Do=function(t,a){t&&(a?this.setSouthWest(t).setNorthEast(a):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Do.prototype.setNorthEast=function(t){return this._ne=t instanceof eo?new eo(t.lng,t.lat):eo.convert(t),this},Do.prototype.setSouthWest=function(t){return this._sw=t instanceof eo?new eo(t.lng,t.lat):eo.convert(t),this},Do.prototype.extend=function(t){var a,d,x=this._sw,I=this._ne;if(t instanceof eo)a=t,d=t;else{if(!(t instanceof Do))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Do.convert(t)):this.extend(eo.convert(t)):this;if(d=t._ne,!(a=t._sw)||!d)return this}return x||I?(x.lng=Math.min(a.lng,x.lng),x.lat=Math.min(a.lat,x.lat),I.lng=Math.max(d.lng,I.lng),I.lat=Math.max(d.lat,I.lat)):(this._sw=new eo(a.lng,a.lat),this._ne=new eo(d.lng,d.lat)),this},Do.prototype.getCenter=function(){return new eo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Do.prototype.getSouthWest=function(){return this._sw},Do.prototype.getNorthEast=function(){return this._ne},Do.prototype.getNorthWest=function(){return new eo(this.getWest(),this.getNorth())},Do.prototype.getSouthEast=function(){return new eo(this.getEast(),this.getSouth())},Do.prototype.getWest=function(){return this._sw.lng},Do.prototype.getSouth=function(){return this._sw.lat},Do.prototype.getEast=function(){return this._ne.lng},Do.prototype.getNorth=function(){return this._ne.lat},Do.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Do.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Do.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Do.prototype.contains=function(t){var a=eo.convert(t),d=a.lng,x=a.lat,I=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(I=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&I},Do.convert=function(t){return!t||t instanceof Do?t:new Do(t)};var eo=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid LngLat object: ("+t+", "+a+")");if(this.lng=+t,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};eo.prototype.wrap=function(){return new eo(ve(this.lng,-180,180),this.lat)},eo.prototype.toArray=function(){return[this.lng,this.lat]},eo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},eo.prototype.distanceTo=function(t){var a=Math.PI/180,d=this.lat*a,x=t.lat*a,I=Math.sin(d)*Math.sin(x)+Math.cos(d)*Math.cos(x)*Math.cos((t.lng-this.lng)*a);return 63710088e-1*Math.acos(Math.min(I,1))},eo.prototype.toBounds=function(t){t===void 0&&(t=0);var a=360*t/40075017,d=a/Math.cos(Math.PI/180*this.lat);return new Do(new eo(this.lng-d,this.lat-a),new eo(this.lng+d,this.lat+a))},eo.convert=function(t){if(t instanceof eo)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new eo(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new eo(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Xf=2*Math.PI*63710088e-1;function Kf(t){return Xf*Math.cos(t*Math.PI/180)}function Wp(t){return(180+t)/360}function Eo(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function uc(t,a){return t/Kf(a)}function Xd(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var cc=function(t,a,d){d===void 0&&(d=0),this.x=+t,this.y=+a,this.z=+d};cc.fromLngLat=function(t,a){a===void 0&&(a=0);var d=eo.convert(t);return new cc(Wp(d.lng),Eo(d.lat),uc(a,d.lat))},cc.prototype.toLngLat=function(){return new eo(360*this.x-180,Xd(this.y))},cc.prototype.toAltitude=function(){return this.z*Kf(Xd(this.y))},cc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Xf*(t=Xd(this.y),1/Math.cos(t*Math.PI/180));var t};var hc=function(t,a,d){this.z=t,this.x=a,this.y=d,this.key=jc(0,t,t,a,d)};hc.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},hc.prototype.url=function(t,a){var d,x,I,M,r,i=(x=this.y,I=this.z,M=Wf(256*(d=this.x),256*(x=Math.pow(2,I)-x-1),I),r=Wf(256*(d+1),256*(x+1),I),M[0]+","+M[1]+","+r[0]+","+r[1]),u=function(m,b,E){for(var T,z="",U=m;U>0;U--)z+=(b&(T=1<<U-1)?1:0)+(E&T?2:0);return z}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",i)},hc.prototype.getTilePoint=function(t){var a=Math.pow(2,this.z);return new D(8192*(t.x*a-this.x),8192*(t.y*a-this.y))},hc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Xp=function(t,a){this.wrap=t,this.canonical=a,this.key=jc(t,a.z,a.z,a.x,a.y)},Ao=function(t,a,d,x,I){this.overscaledZ=t,this.wrap=a,this.canonical=new hc(d,+x,+I),this.key=jc(a,t,d,x,I)};function jc(t,a,d,x,I){(t*=2)<0&&(t=-1*t-1);var M=1<<d;return(M*M*t+M*I+x).toString(36)+d.toString(36)+a.toString(36)}Ao.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Ao.prototype.scaledTo=function(t){var a=this.canonical.z-t;return t>this.canonical.z?new Ao(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ao(t,this.wrap,t,this.canonical.x>>a,this.canonical.y>>a)},Ao.prototype.calculateScaledKey=function(t,a){var d=this.canonical.z-t;return t>this.canonical.z?jc(this.wrap*+a,t,this.canonical.z,this.canonical.x,this.canonical.y):jc(this.wrap*+a,t,t,this.canonical.x>>d,this.canonical.y>>d)},Ao.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var a=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>a&&t.canonical.y===this.canonical.y>>a},Ao.prototype.children=function(t){if(this.overscaledZ>=t)return[new Ao(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var a=this.canonical.z+1,d=2*this.canonical.x,x=2*this.canonical.y;return[new Ao(a,this.wrap,a,d,x),new Ao(a,this.wrap,a,d+1,x),new Ao(a,this.wrap,a,d,x+1),new Ao(a,this.wrap,a,d+1,x+1)]},Ao.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Ao.prototype.wrapped=function(){return new Ao(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ao.prototype.unwrapTo=function(t){return new Ao(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Ao.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ao.prototype.toUnwrapped=function(){return new Xp(this.wrap,this.canonical)},Ao.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ao.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new cc(t.x-this.wrap,t.y))},Pi("CanonicalTileID",hc),Pi("OverscaledTileID",Ao,{omit:["posMatrix"]});var $s=function(t,a,d){if(this.uid=t,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return qe('"'+d+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=a.height;var x=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=d||"mapbox";for(var I=0;I<x;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(x,I)]=this.data[this._idx(x-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,x)]=this.data[this._idx(I,x-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(x,-1)]=this.data[this._idx(x-1,0)],this.data[this._idx(-1,x)]=this.data[this._idx(0,x-1)],this.data[this._idx(x,x)]=this.data[this._idx(x-1,x-1)]};$s.prototype.get=function(t,a){var d=new Uint8Array(this.data.buffer),x=4*this._idx(t,a);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(d[x],d[x+1],d[x+2])},$s.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},$s.prototype._idx=function(t,a){if(t<-1||t>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(t+1)},$s.prototype._unpackMapbox=function(t,a,d){return(256*t*256+256*a+d)/10-1e4},$s.prototype._unpackTerrarium=function(t,a,d){return 256*t+a+d/256-32768},$s.prototype.getPixels=function(){return new wa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},$s.prototype.backfillBorder=function(t,a,d){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var x=a*this.dim,I=a*this.dim+this.dim,M=d*this.dim,r=d*this.dim+this.dim;switch(a){case-1:x=I-1;break;case 1:I=x+1}switch(d){case-1:M=r-1;break;case 1:r=M+1}for(var i=-a*this.dim,u=-d*this.dim,m=M;m<r;m++)for(var b=x;b<I;b++)this.data[this._idx(b,m)]=t.data[this._idx(b+i,m+u)]},Pi("DEMData",$s);var sd=function(t){this._stringToNumber={},this._numberToString=[];for(var a=0;a<t.length;a++){var d=t[a];this._stringToNumber[d]=a,this._numberToString[a]=d}};sd.prototype.encode=function(t){return this._stringToNumber[t]},sd.prototype.decode=function(t){return this._numberToString[t]};var Th=function(t,a,d,x,I){this.type="Feature",this._vectorTileFeature=t,t._z=a,t._x=d,t._y=x,this.properties=t.properties,this.id=I},Kd={geometry:{configurable:!0}};Kd.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Kd.geometry.set=function(t){this._geometry=t},Th.prototype.toJSON=function(){var t={geometry:this.geometry};for(var a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(t[a]=this[a]);return t},Object.defineProperties(Th.prototype,Kd);var Ba=function(){this.state={},this.stateChanges={},this.deletedStates={}};Ba.prototype.updateState=function(t,a,d){var x=String(a);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][x]=this.stateChanges[t][x]||{},se(this.stateChanges[t][x],d),this.deletedStates[t]===null)for(var I in this.deletedStates[t]={},this.state[t])I!==x&&(this.deletedStates[t][I]=null);else if(this.deletedStates[t]&&this.deletedStates[t][x]===null)for(var M in this.deletedStates[t][x]={},this.state[t][x])d[M]||(this.deletedStates[t][x][M]=null);else for(var r in d)this.deletedStates[t]&&this.deletedStates[t][x]&&this.deletedStates[t][x][r]===null&&delete this.deletedStates[t][x][r]},Ba.prototype.removeFeatureState=function(t,a,d){if(this.deletedStates[t]!==null){var x=String(a);if(this.deletedStates[t]=this.deletedStates[t]||{},d&&a!==void 0)this.deletedStates[t][x]!==null&&(this.deletedStates[t][x]=this.deletedStates[t][x]||{},this.deletedStates[t][x][d]=null);else if(a!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][x])for(d in this.deletedStates[t][x]={},this.stateChanges[t][x])this.deletedStates[t][x][d]=null;else this.deletedStates[t][x]=null;else this.deletedStates[t]=null}},Ba.prototype.getState=function(t,a){var d=String(a),x=se({},(this.state[t]||{})[d],(this.stateChanges[t]||{})[d]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){var I=this.deletedStates[t][a];if(I===null)return{};for(var M in I)delete x[M]}return x},Ba.prototype.initializeTileState=function(t,a){t.setFeatureState(this.state,a)},Ba.prototype.coalesceChanges=function(t,a){var d={};for(var x in this.stateChanges){this.state[x]=this.state[x]||{};var I={};for(var M in this.stateChanges[x])this.state[x][M]||(this.state[x][M]={}),se(this.state[x][M],this.stateChanges[x][M]),I[M]=this.state[x][M];d[x]=I}for(var r in this.deletedStates){this.state[r]=this.state[r]||{};var i={};if(this.deletedStates[r]===null)for(var u in this.state[r])i[u]={},this.state[r][u]={};else for(var m in this.deletedStates[r]){if(this.deletedStates[r][m]===null)this.state[r][m]={};else for(var b=0,E=Object.keys(this.deletedStates[r][m]);b<E.length;b+=1)delete this.state[r][m][E[b]];i[m]=this.state[r][m]}d[r]=d[r]||{},se(d[r],i)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(var T in t)t[T].setFeatureState(d,a)};var Bs=function(t,a){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ls(8192,16,0),this.grid3D=new Ls(8192,16,0),this.featureIndexArray=new oe,this.promoteId=a};function Kp(t,a,d,x,I){return at(t,function(M,r){var i=a instanceof zs?a.get(r):null;return i&&i.evaluate?i.evaluate(d,x,I):i})}function Jp(t){for(var a=1/0,d=1/0,x=-1/0,I=-1/0,M=0,r=t;M<r.length;M+=1){var i=r[M];a=Math.min(a,i.x),d=Math.min(d,i.y),x=Math.max(x,i.x),I=Math.max(I,i.y)}return{minX:a,minY:d,maxX:x,maxY:I}}function Jf(t,a){return a-t}Bs.prototype.insert=function(t,a,d,x,I,M){var r=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,x,I);for(var i=M?this.grid3D:this.grid,u=0;u<a.length;u++){for(var m=a[u],b=[1/0,1/0,-1/0,-1/0],E=0;E<m.length;E++){var T=m[E];b[0]=Math.min(b[0],T.x),b[1]=Math.min(b[1],T.y),b[2]=Math.max(b[2],T.x),b[3]=Math.max(b[3],T.y)}b[0]<8192&&b[1]<8192&&b[2]>=0&&b[3]>=0&&i.insert(r,b[0],b[1],b[2],b[3])}},Bs.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new mh.VectorTile(new Od(this.rawTileData)).layers,this.sourceLayerCoder=new sd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Bs.prototype.query=function(t,a,d,x){var I=this;this.loadVTLayers();for(var M=t.params||{},r=8192/t.tileSize/t.scale,i=yu(M.filter),u=t.queryGeometry,m=t.queryPadding*r,b=Jp(u),E=this.grid.query(b.minX-m,b.minY-m,b.maxX+m,b.maxY+m),T=Jp(t.cameraQueryGeometry),z=this.grid3D.query(T.minX-m,T.minY-m,T.maxX+m,T.maxY+m,function(te,de,_e,Oe){return function(Ye,it,nt,vt,ot){for(var Kt=0,Wt=Ye;Kt<Wt.length;Kt+=1){var Lt=Wt[Kt];if(it<=Lt.x&&nt<=Lt.y&&vt>=Lt.x&&ot>=Lt.y)return!0}var Zt=[new D(it,nt),new D(it,ot),new D(vt,ot),new D(vt,nt)];if(Ye.length>2){for(var Nt=0,$t=Zt;Nt<$t.length;Nt+=1)if(Ys(Ye,$t[Nt]))return!0}for(var Ot=0;Ot<Ye.length-1;Ot++)if(Eu(Ye[Ot],Ye[Ot+1],Zt))return!0;return!1}(t.cameraQueryGeometry,te-m,de-m,_e+m,Oe+m)}),U=0,V=z;U<V.length;U+=1)E.push(V[U]);E.sort(Jf);for(var G,q={},K=function(te){var de=E[te];if(de!==G){G=de;var _e=I.featureIndexArray.get(de),Oe=null;I.loadMatchingFeature(q,_e.bucketIndex,_e.sourceLayerIndex,_e.featureIndex,i,M.layers,M.availableImages,a,d,x,function(Ye,it,nt){return Oe||(Oe=io(Ye)),it.queryIntersectsFeature(u,Ye,nt,Oe,I.z,t.transform,r,t.pixelPosMatrix)})}},$=0;$<E.length;$++)K($);return q},Bs.prototype.loadMatchingFeature=function(t,a,d,x,I,M,r,i,u,m,b){var E=this.bucketLayerIDs[a];if(!M||function(Ye,it){for(var nt=0;nt<Ye.length;nt++)if(it.indexOf(Ye[nt])>=0)return!0;return!1}(M,E)){var T=this.sourceLayerCoder.decode(d),z=this.vtLayers[T].feature(x);if(I.needGeometry){var U=er(z,!0);if(!I.filter(new ci(this.tileID.overscaledZ),U,this.tileID.canonical))return}else if(!I.filter(new ci(this.tileID.overscaledZ),z))return;for(var V=this.getId(z,T),G=0;G<E.length;G++){var q=E[G];if(!(M&&M.indexOf(q)<0)){var K=i[q];if(K){var $={};V!==void 0&&m&&($=m.getState(K.sourceLayer||"_geojsonTileLayer",V));var te=se({},u[q]);te.paint=Kp(te.paint,K.paint,z,$,r),te.layout=Kp(te.layout,K.layout,z,$,r);var de=!b||b(z,K,$);if(de){var _e=new Th(z,this.z,this.x,this.y,V);_e.layer=te;var Oe=t[q];Oe===void 0&&(Oe=t[q]=[]),Oe.push({featureIndex:x,feature:_e,intersectionZ:de})}}}}}},Bs.prototype.lookupSymbolFeatures=function(t,a,d,x,I,M,r,i){var u={};this.loadVTLayers();for(var m=yu(I),b=0,E=t;b<E.length;b+=1)this.loadMatchingFeature(u,d,x,E[b],m,M,r,i,a);return u},Bs.prototype.hasLayer=function(t){for(var a=0,d=this.bucketLayerIDs;a<d.length;a+=1)for(var x=0,I=d[a];x<I.length;x+=1)if(t===I[x])return!0;return!1},Bs.prototype.getId=function(t,a){var d=t.id;return this.promoteId&&typeof(d=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]])=="boolean"&&(d=Number(d)),d},Pi("FeatureIndex",Bs,{omit:["rawTileData","sourceLayerCoder"]});var jo=function(t,a){this.tileID=t,this.uid=Ge(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};jo.prototype.registerFadeDuration=function(t){var a=t+this.timeAdded;a<ht.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)},jo.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},jo.prototype.loadVectorData=function(t,a,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var x in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(m,b){var E={};if(!b)return E;for(var T=function(){var V=U[z],G=V.layerIds.map(function($){return b.getLayer($)}).filter(Boolean);if(G.length!==0){V.layers=G,V.stateDependentLayerIds&&(V.stateDependentLayers=V.stateDependentLayerIds.map(function($){return G.filter(function(te){return te.id===$})[0]}));for(var q=0,K=G;q<K.length;q+=1)E[K[q].id]=V}},z=0,U=m;z<U.length;z+=1)T();return E}(t.buckets,a.style),this.hasSymbolBuckets=!1,this.buckets){var I=this.buckets[x];if(I instanceof Mr){if(this.hasSymbolBuckets=!0,!d)break;I.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var M in this.buckets){var r=this.buckets[M];if(r instanceof Mr&&r.hasRTLText){this.hasRTLText=!0,Di.isLoading()||Di.isLoaded()||qa()!=="deferred"||ya();break}}for(var i in this.queryPadding=0,this.buckets){var u=this.buckets[i];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(i).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new y},jo.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},jo.prototype.getBucket=function(t){return this.buckets[t.id]},jo.prototype.upload=function(t){for(var a in this.buckets){var d=this.buckets[a];d.uploadPending()&&d.upload(t)}var x=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new sc(t,this.imageAtlas.image,x.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new sc(t,this.glyphAtlasImage,x.ALPHA),this.glyphAtlasImage=null)},jo.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},jo.prototype.queryRenderedFeatures=function(t,a,d,x,I,M,r,i,u,m){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:x,cameraQueryGeometry:I,scale:M,tileSize:this.tileSize,pixelPosMatrix:m,transform:i,params:r,queryPadding:this.queryPadding*u},t,a,d):{}},jo.prototype.querySourceFeatures=function(t,a){var d=this.latestFeatureIndex;if(d&&d.rawTileData){var x=d.loadVTLayers(),I=a?a.sourceLayer:"",M=x._geojsonTileLayer||x[I];if(M)for(var r=yu(a&&a.filter),i=this.tileID.canonical,u=i.z,m=i.x,b=i.y,E={z:u,x:m,y:b},T=0;T<M.length;T++){var z=M.feature(T);if(r.needGeometry){var U=er(z,!0);if(!r.filter(new ci(this.tileID.overscaledZ),U,this.tileID.canonical))continue}else if(!r.filter(new ci(this.tileID.overscaledZ),z))continue;var V=d.getId(z,I),G=new Th(z,u,m,b,V);G.tile=E,t.push(G)}}},jo.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},jo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},jo.prototype.setExpiryData=function(t){var a=this.expirationTime;if(t.cacheControl){var d=Gt(t.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var x=Date.now(),I=!1;if(this.expirationTime>x)I=!1;else if(a)if(this.expirationTime<a)I=!0;else{var M=this.expirationTime-a;M?this.expirationTime=x+Math.max(M,3e4):I=!0}else I=!0;I?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},jo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},jo.prototype.setFeatureState=function(t,a){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(t).length!==0){var d=this.latestFeatureIndex.loadVTLayers();for(var x in this.buckets)if(a.style.hasLayer(x)){var I=this.buckets[x],M=I.layers[0].sourceLayer||"_geojsonTileLayer",r=d[M],i=t[M];if(r&&i&&Object.keys(i).length!==0){I.update(i,r,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=a&&a.style&&a.style.getLayer(x);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(I)))}}}},jo.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},jo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ht.now()},jo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},jo.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=ht.now()+t},jo.prototype.setDependencies=function(t,a){for(var d={},x=0,I=a;x<I.length;x+=1)d[I[x]]=!0;this.dependencies[t]=d},jo.prototype.hasDependency=function(t,a){for(var d=0,x=t;d<x.length;d+=1){var I=this.dependencies[x[d]];if(I){for(var M=0,r=a;M<r.length;M+=1)if(I[r[M]])return!0}}return!1};var Pu=O.performance,Yp=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},Pu.mark(this._marks.start)};Yp.prototype.finish=function(){Pu.mark(this._marks.end);var t=Pu.getEntriesByName(this._marks.measure);return t.length===0&&(Pu.measure(this._marks.measure,this._marks.start,this._marks.end),t=Pu.getEntriesByName(this._marks.measure),Pu.clearMarks(this._marks.start),Pu.clearMarks(this._marks.end),Pu.clearMeasures(this._marks.measure)),t},c.Actor=lc,c.AlphaImage=Pc,c.CanonicalTileID=hc,c.CollisionBoxArray=y,c.Color=hn,c.DEMData=$s,c.DataConstantProperty=gi,c.DictionaryCoder=sd,c.EXTENT=8192,c.ErrorEvent=$e,c.EvaluationParameters=ci,c.Event=ze,c.Evented=tt,c.FeatureIndex=Bs,c.FillBucket=wl,c.FillExtrusionBucket=El,c.ImageAtlas=Yh,c.ImagePosition=Bd,c.LineBucket=Ea,c.LngLat=eo,c.LngLatBounds=Do,c.MercatorCoordinate=cc,c.ONE_EM=24,c.OverscaledTileID=Ao,c.Point=D,c.Point$1=D,c.Properties=C,c.Protobuf=Od,c.RGBAImage=wa,c.RequestManager=ln,c.RequestPerformance=Yp,c.ResourceType=On,c.SegmentVector=be,c.SourceFeatureState=Ba,c.StructArrayLayout1ui2=Ci,c.StructArrayLayout2f1f2i16=bt,c.StructArrayLayout2i4=Z,c.StructArrayLayout3ui6=jt,c.StructArrayLayout4i8=J,c.SymbolBucket=Mr,c.Texture=sc,c.Tile=jo,c.Transitionable=To,c.Uniform1f=oi,c.Uniform1i=Ht,c.Uniform2f=ri,c.Uniform3f=Ti,c.Uniform4f=Hi,c.UniformColor=Qi,c.UniformMatrix4f=Xn,c.UnwrappedTileID=Xp,c.ValidationError=Ne,c.WritingMode=fs,c.ZoomHistory=ps,c.add=function(t,a,d){return t[0]=a[0]+d[0],t[1]=a[1]+d[1],t[2]=a[2]+d[2],t},c.addDynamicAttributes=Hp,c.asyncAll=function(t,a,d){if(!t.length)return d(null,[]);var x=t.length,I=new Array(t.length),M=null;t.forEach(function(r,i){a(r,function(u,m){u&&(M=u),I[i]=m,--x==0&&d(M,I)})})},c.bezier=ee,c.bindAll=fe,c.browser=ht,c.cacheEntryPossiblyAdded=function(t){++Ar>Wn&&(t.getActor().send("enforceCacheSizeLimit",Vn),Ar=0)},c.clamp=re,c.clearTileCache=function(t){var a=O.caches.delete("mapbox-tiles");t&&a.catch(t).then(function(){return t()})},c.clipLine=Gp,c.clone=function(t){var a=new ur(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},c.clone$1=Fe,c.clone$2=function(t){var a=new ur(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},c.collisionCircleLayout=Pf,c.config=It,c.create=function(){var t=new ur(16);return ur!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},c.create$1=function(){var t=new ur(9);return ur!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},c.create$2=function(){var t=new ur(4);return ur!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},c.createCommonjsModule=h,c.createExpression=fu,c.createLayout=B,c.createStyleLayer=function(t){return t.type==="custom"?new Zp(t):new Dg[t.type](t)},c.cross=function(t,a,d){var x=a[0],I=a[1],M=a[2],r=d[0],i=d[1],u=d[2];return t[0]=I*u-M*i,t[1]=M*r-x*u,t[2]=x*i-I*r,t},c.deepEqual=function t(a,d){if(Array.isArray(a)){if(!Array.isArray(d)||a.length!==d.length)return!1;for(var x=0;x<a.length;x++)if(!t(a[x],d[x]))return!1;return!0}if(typeof a=="object"&&a!==null&&d!==null){if(typeof d!="object"||Object.keys(a).length!==Object.keys(d).length)return!1;for(var I in a)if(!t(a[I],d[I]))return!1;return!0}return a===d},c.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},c.dot$1=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},c.ease=he,c.emitValidationErrors=Bl,c.endsWith=ut,c.enforceCacheSizeLimit=function(t){_o(),Jn&&Jn.then(function(a){a.keys().then(function(d){for(var x=0;x<d.length-t;x++)a.delete(d[x])})})},c.evaluateSizeForFeature=Np,c.evaluateSizeForZoom=Vp,c.evaluateVariableOffset=rd,c.evented=Mc,c.extend=se,c.featureFilter=yu,c.filterObject=je,c.fromRotation=function(t,a){var d=Math.sin(a),x=Math.cos(a);return t[0]=x,t[1]=d,t[2]=0,t[3]=-d,t[4]=x,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},c.getAnchorAlignment=Bc,c.getAnchorJustification=jd,c.getArrayBuffer=Io,c.getImage=ue,c.getJSON=function(t,a){return sa(se(t,{type:"json"}),a)},c.getRTLTextPluginStatus=qa,c.getReferrer=ro,c.getVideo=function(t,a){var d,x,I=O.document.createElement("video");I.muted=!0,I.onloadstart=function(){a(null,I)};for(var M=0;M<t.length;M++){var r=O.document.createElement("source");d=t[M],x=void 0,(x=O.document.createElement("a")).href=d,(x.protocol!==O.document.location.protocol||x.host!==O.document.location.host)&&(I.crossOrigin="Anonymous"),r.src=t[M],I.appendChild(r)}return{cancel:function(){}}},c.identity=xa,c.invert=function(t,a){var d=a[0],x=a[1],I=a[2],M=a[3],r=a[4],i=a[5],u=a[6],m=a[7],b=a[8],E=a[9],T=a[10],z=a[11],U=a[12],V=a[13],G=a[14],q=a[15],K=d*i-x*r,$=d*u-I*r,te=d*m-M*r,de=x*u-I*i,_e=x*m-M*i,Oe=I*m-M*u,Ye=b*V-E*U,it=b*G-T*U,nt=b*q-z*U,vt=E*G-T*V,ot=E*q-z*V,Kt=T*q-z*G,Wt=K*Kt-$*ot+te*vt+de*nt-_e*it+Oe*Ye;return Wt?(t[0]=(i*Kt-u*ot+m*vt)*(Wt=1/Wt),t[1]=(I*ot-x*Kt-M*vt)*Wt,t[2]=(V*Oe-G*_e+q*de)*Wt,t[3]=(T*_e-E*Oe-z*de)*Wt,t[4]=(u*nt-r*Kt-m*it)*Wt,t[5]=(d*Kt-I*nt+M*it)*Wt,t[6]=(G*te-U*Oe-q*$)*Wt,t[7]=(b*Oe-T*te+z*$)*Wt,t[8]=(r*ot-i*nt+m*Ye)*Wt,t[9]=(x*nt-d*ot-M*Ye)*Wt,t[10]=(U*_e-V*te+q*K)*Wt,t[11]=(E*te-b*_e-z*K)*Wt,t[12]=(i*it-r*vt-u*Ye)*Wt,t[13]=(d*vt-x*it+I*Ye)*Wt,t[14]=(V*$-U*de-G*K)*Wt,t[15]=(b*de-E*$+T*K)*Wt,t):null},c.isChar=pi,c.isMapboxURL=Cn,c.keysDifference=function(t,a){var d=[];for(var x in t)x in a||d.push(x);return d},c.makeRequest=sa,c.mapObject=at,c.mercatorXfromLng=Wp,c.mercatorYfromLat=Eo,c.mercatorZfromAltitude=uc,c.mul=tc,c.multiply=Oa,c.mvt=mh,c.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},c.normalize=function(t,a){var d=a[0],x=a[1],I=a[2],M=d*d+x*x+I*I;return M>0&&(M=1/Math.sqrt(M)),t[0]=a[0]*M,t[1]=a[1]*M,t[2]=a[2]*M,t},c.number=so,c.offscreenCanvasSupported=yi,c.ortho=function(t,a,d,x,I,M,r){var i=1/(a-d),u=1/(x-I),m=1/(M-r);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*m,t[11]=0,t[12]=(a+d)*i,t[13]=(I+x)*u,t[14]=(r+M)*m,t[15]=1,t},c.parseGlyphPBF=function(t){return new Od(t).readFields(bg,[])},c.pbf=Od,c.performSymbolLayout=function(t,a,d,x,I,M,r){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var i=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,m={};if(t.textSizeData.kind==="composite"){var b=t.textSizeData,E=b.maxZoom;m.compositeTextSizes=[u["text-size"].possiblyEvaluate(new ci(b.minZoom),r),u["text-size"].possiblyEvaluate(new ci(E),r)]}if(t.iconSizeData.kind==="composite"){var T=t.iconSizeData,z=T.maxZoom;m.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new ci(T.minZoom),r),u["icon-size"].possiblyEvaluate(new ci(z),r)]}m.layoutTextSize=u["text-size"].possiblyEvaluate(new ci(t.zoom+1),r),m.layoutIconSize=u["icon-size"].possiblyEvaluate(new ci(t.zoom+1),r),m.textMaxSize=u["text-size"].possiblyEvaluate(new ci(18));for(var U=24*i.get("text-line-height"),V=i.get("text-rotation-alignment")==="map"&&i.get("symbol-placement")!=="point",G=i.get("text-keep-upright"),q=i.get("text-size"),K=function(){var de=te[$],_e=i.get("text-font").evaluate(de,{},r).join(","),Oe=q.evaluate(de,{},r),Ye=m.layoutTextSize.evaluate(de,{},r),it=m.layoutIconSize.evaluate(de,{},r),nt={horizontal:{},vertical:void 0},vt=de.text,ot=[0,0];if(vt){var Kt=vt.toString(),Wt=24*i.get("text-letter-spacing").evaluate(de,{},r),Lt=function(fn){for(var Mn=0,Dn=fn;Mn<Dn.length;Mn+=1)if(En=Dn[Mn].charCodeAt(0),pi.Arabic(En)||pi["Arabic Supplement"](En)||pi["Arabic Extended-A"](En)||pi["Arabic Presentation Forms-A"](En)||pi["Arabic Presentation Forms-B"](En))return!1;var En;return!0}(Kt)?Wt:0,Zt=i.get("text-anchor").evaluate(de,{},r),Nt=i.get("text-variable-anchor");if(!Nt){var $t=i.get("text-radial-offset").evaluate(de,{},r);ot=$t?rd(Zt,[24*$t,Vd]):i.get("text-offset").evaluate(de,{},r).map(function(fn){return 24*fn})}var Ot=V?"center":i.get("text-justify").evaluate(de,{},r),Vt=i.get("symbol-placement"),ki=Vt==="point"?24*i.get("text-max-width").evaluate(de,{},r):0,Ai=function(){t.allowVerticalPlacement&&vu(Kt)&&(nt.vertical=Qh(vt,a,d,I,_e,ki,U,Zt,"left",Lt,ot,fs.vertical,!0,Vt,Ye,Oe))};if(!V&&Nt){for(var on=Ot==="auto"?Nt.map(function(fn){return jd(fn)}):[Ot],un=!1,zn=0;zn<on.length;zn++){var Kn=on[zn];if(!nt.horizontal[Kn])if(un)nt.horizontal[Kn]=nt.horizontal[0];else{var fr=Qh(vt,a,d,I,_e,ki,U,"center",Kn,Lt,ot,fs.horizontal,!1,Vt,Ye,Oe);fr&&(nt.horizontal[Kn]=fr,un=fr.positionedLines.length===1)}}Ai()}else{Ot==="auto"&&(Ot=jd(Zt));var mr=Qh(vt,a,d,I,_e,ki,U,Zt,Ot,Lt,ot,fs.horizontal,!1,Vt,Ye,Oe);mr&&(nt.horizontal[Ot]=mr),Ai(),vu(Kt)&&V&&G&&(nt.vertical=Qh(vt,a,d,I,_e,ki,U,Zt,Ot,Lt,ot,fs.vertical,!1,Vt,Ye,Oe))}}var or=void 0,wr=!1;if(de.icon&&de.icon.name){var ar=x[de.icon.name];ar&&(or=function(fn,Mn,Dn){var En=Bc(Dn),qr=Mn[0]-fn.displaySize[0]*En.horizontalAlign,Fr=Mn[1]-fn.displaySize[1]*En.verticalAlign;return{image:fn,top:Fr,bottom:Fr+fn.displaySize[1],left:qr,right:qr+fn.displaySize[0]}}(I[de.icon.name],i.get("icon-offset").evaluate(de,{},r),i.get("icon-anchor").evaluate(de,{},r)),wr=ar.sdf,t.sdfIcons===void 0?t.sdfIcons=ar.sdf:t.sdfIcons!==ar.sdf&&qe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ar.pixelRatio!==t.pixelRatio||i.get("icon-rotate").constantOr(1)!==0)&&(t.iconsNeedLinear=!0))}var Er=ad(nt.horizontal)||nt.vertical;t.iconsInText=!!Er&&Er.iconsInText,(Er||or)&&function(fn,Mn,Dn,En,qr,Fr,nr,jn,br,Ui,Ro){var Wr=Fr.textMaxSize.evaluate(Mn,{});Wr===void 0&&(Wr=nr);var mo,Lr=fn.layers[0].layout,oa=Lr.get("icon-offset").evaluate(Mn,{},Ro),qo=ad(Dn.horizontal),ms=nr/24,Ia=fn.tilePixelRatio*ms,Sa=fn.tilePixelRatio*Wr/24,Oo=fn.tilePixelRatio*jn,gs=fn.tilePixelRatio*Lr.get("symbol-spacing"),dc=Lr.get("text-padding")*fn.tilePixelRatio,qc=Lr.get("icon-padding")*fn.tilePixelRatio,Gc=Lr.get("text-max-angle")/180*Math.PI,Ah=Lr.get("text-rotation-alignment")==="map"&&Lr.get("symbol-placement")!=="point",el=Lr.get("icon-rotation-alignment")==="map"&&Lr.get("symbol-placement")!=="point",Hl=Lr.get("symbol-placement"),Hc=gs/2,pc=Lr.get("icon-text-fit");En&&pc!=="none"&&(fn.allowVerticalPlacement&&Dn.vertical&&(mo=$h(En,Dn.vertical,pc,Lr.get("icon-text-fit-padding"),oa,ms)),qo&&(En=$h(En,qo,pc,Lr.get("icon-text-fit-padding"),oa,ms)));var zu=function(Cb,Qp){Qp.x<0||Qp.x>=8192||Qp.y<0||Qp.y>=8192||function(Bo,Ru,kb,Mh,Fg,__,Yf,fc,Qf,$p,$f,em,Ug,v_,ef,b_,x_,w_,E_,I_,il,tm,S_,mc,Mb){var T_,dd,$d,ep,tp,ip=Bo.addToLineVertexArray(Ru,kb),A_=0,C_=0,k_=0,M_=0,Ng=-1,Vg=-1,Xc={},L_=Ce(""),jg=0,qg=0;if(fc._unevaluatedLayout.getValue("text-radial-offset")===void 0?(jg=(T_=fc.layout.get("text-offset").evaluate(il,{},mc).map(function(nf){return 24*nf}))[0],qg=T_[1]):(jg=24*fc.layout.get("text-radial-offset").evaluate(il,{},mc),qg=Vd),Bo.allowVerticalPlacement&&Mh.vertical){var P_=fc.layout.get("text-rotate").evaluate(il,{},mc)+90;ep=new nd(Qf,Ru,$p,$f,em,Mh.vertical,Ug,v_,ef,P_),Yf&&(tp=new nd(Qf,Ru,$p,$f,em,Yf,x_,w_,ef,P_))}if(Fg){var Gg=fc.layout.get("icon-rotate").evaluate(il,{}),z_=fc.layout.get("icon-text-fit")!=="none",D_=ql(Fg,Gg,S_,z_),Hg=Yf?ql(Yf,Gg,S_,z_):void 0;$d=new nd(Qf,Ru,$p,$f,em,Fg,x_,w_,!1,Gg),A_=4*D_.length;var R_=Bo.iconSizeData,tf=null;R_.kind==="source"?(tf=[128*fc.layout.get("icon-size").evaluate(il,{})])[0]>32640&&qe(Bo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):R_.kind==="composite"&&((tf=[128*tm.compositeIconSizes[0].evaluate(il,{},mc),128*tm.compositeIconSizes[1].evaluate(il,{},mc)])[0]>32640||tf[1]>32640)&&qe(Bo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Bo.addSymbols(Bo.icon,D_,tf,I_,E_,il,!1,Ru,ip.lineStartIndex,ip.lineLength,-1,mc),Ng=Bo.icon.placedSymbolArray.length-1,Hg&&(C_=4*Hg.length,Bo.addSymbols(Bo.icon,Hg,tf,I_,E_,il,fs.vertical,Ru,ip.lineStartIndex,ip.lineLength,-1,mc),Vg=Bo.icon.placedSymbolArray.length-1)}for(var O_ in Mh.horizontal){var im=Mh.horizontal[O_];if(!dd){L_=Ce(im.text);var Lb=fc.layout.get("text-rotate").evaluate(il,{},mc);dd=new nd(Qf,Ru,$p,$f,em,im,Ug,v_,ef,Lb)}var B_=im.positionedLines.length===1;if(k_+=od(Bo,Ru,im,__,fc,ef,il,b_,ip,Mh.vertical?fs.horizontal:fs.horizontalOnly,B_?Object.keys(Mh.horizontal):[O_],Xc,Ng,tm,mc),B_)break}Mh.vertical&&(M_+=od(Bo,Ru,Mh.vertical,__,fc,ef,il,b_,ip,fs.vertical,["vertical"],Xc,Vg,tm,mc));var Pb=dd?dd.boxStartIndex:Bo.collisionBoxArray.length,zb=dd?dd.boxEndIndex:Bo.collisionBoxArray.length,Db=ep?ep.boxStartIndex:Bo.collisionBoxArray.length,Rb=ep?ep.boxEndIndex:Bo.collisionBoxArray.length,Ob=$d?$d.boxStartIndex:Bo.collisionBoxArray.length,Bb=$d?$d.boxEndIndex:Bo.collisionBoxArray.length,Fb=tp?tp.boxStartIndex:Bo.collisionBoxArray.length,Ub=tp?tp.boxEndIndex:Bo.collisionBoxArray.length,gc=-1,nm=function(nf,U_){return nf&&nf.circleDiameter?Math.max(nf.circleDiameter,U_):U_};gc=nm(dd,gc),gc=nm(ep,gc),gc=nm($d,gc);var F_=(gc=nm(tp,gc))>-1?1:0;F_&&(gc*=Mb/24),Bo.glyphOffsetArray.length>=Mr.MAX_GLYPHS&&qe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),il.sortKey!==void 0&&Bo.addToSortKeyRanges(Bo.symbolInstances.length,il.sortKey),Bo.symbolInstances.emplaceBack(Ru.x,Ru.y,Xc.right>=0?Xc.right:-1,Xc.center>=0?Xc.center:-1,Xc.left>=0?Xc.left:-1,Xc.vertical||-1,Ng,Vg,L_,Pb,zb,Db,Rb,Ob,Bb,Fb,Ub,$p,k_,M_,A_,C_,F_,0,Ug,jg,qg,gc)}(fn,Qp,Cb,Dn,En,qr,mo,fn.layers[0],fn.collisionBoxArray,Mn.index,Mn.sourceLayerIndex,fn.index,Ia,dc,Ah,br,Oo,qc,el,oa,Mn,Fr,Ui,Ro,nr)};if(Hl==="line")for(var Ch=0,Jd=Gp(Mn.geometry,0,0,8192,8192);Ch<Jd.length;Ch+=1)for(var Yd=Jd[Ch],ld=0,ud=Sg(Yd,gs,Gc,Dn.vertical||qo,En,24,Sa,fn.overscaling,8192);ld<ud.length;ld+=1){var Qd=ud[ld];qo&&qd(fn,qo.text,Hc,Qd)||zu(Yd,Qd)}else if(Hl==="line-center")for(var cd=0,hd=Mn.geometry;cd<hd.length;cd+=1){var $a=hd[cd];if($a.length>1){var Zc=Ig($a,Gc,Dn.vertical||qo,En,24,Sa);Zc&&zu($a,Zc)}}else if(Mn.type==="Polygon")for(var Wc=0,Ta=Dd(Mn.geometry,0);Wc<Ta.length;Wc+=1){var es=Ta[Wc],Du=Ag(es,16);zu(es[0],new Mu(Du.x,Du.y,0))}else if(Mn.type==="LineString")for(var Il=0,kh=Mn.geometry;Il<kh.length;Il+=1){var tl=kh[Il];zu(tl,new Mu(tl[0].x,tl[0].y,0))}else if(Mn.type==="Point")for(var Rg=0,g_=Mn.geometry;Rg<g_.length;Rg+=1)for(var Og=0,y_=g_[Rg];Og<y_.length;Og+=1){var Bg=y_[Og];zu([Bg],new Mu(Bg.x,Bg.y,0))}}(t,de,nt,or,x,m,Ye,it,ot,wr,r)},$=0,te=t.features;$<te.length;$+=1)K();M&&t.generateCollisionDebugBuffers()},c.perspective=function(t,a,d,x,I){var M,r=1/Math.tan(a/2);return t[0]=r/d,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,I!=null&&I!==1/0?(t[10]=(I+x)*(M=1/(x-I)),t[14]=2*I*x*M):(t[10]=-1,t[14]=-2*x),t},c.pick=function(t,a){for(var d={},x=0;x<a.length;x++){var I=a[x];I in t&&(d[I]=t[I])}return d},c.plugin=Di,c.polygonIntersectsPolygon=Ga,c.postMapLoadEvent=Ki,c.postTurnstileEvent=Ze,c.potpack=jf,c.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],c.register=Pi,c.registerForPluginStateChange=function(t){return t({pluginStatus:Xo,pluginURL:Ya}),Mc.on("pluginStateChange",t),t},c.renderColorRamp=zd,c.rotate=function(t,a,d){var x=a[0],I=a[1],M=a[2],r=a[3],i=Math.sin(d),u=Math.cos(d);return t[0]=x*u+M*i,t[1]=I*u+r*i,t[2]=x*-i+M*u,t[3]=I*-i+r*u,t},c.rotateX=function(t,a,d){var x=Math.sin(d),I=Math.cos(d),M=a[4],r=a[5],i=a[6],u=a[7],m=a[8],b=a[9],E=a[10],T=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=M*I+m*x,t[5]=r*I+b*x,t[6]=i*I+E*x,t[7]=u*I+T*x,t[8]=m*I-M*x,t[9]=b*I-r*x,t[10]=E*I-i*x,t[11]=T*I-u*x,t},c.rotateZ=function(t,a,d){var x=Math.sin(d),I=Math.cos(d),M=a[0],r=a[1],i=a[2],u=a[3],m=a[4],b=a[5],E=a[6],T=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=M*I+m*x,t[1]=r*I+b*x,t[2]=i*I+E*x,t[3]=u*I+T*x,t[4]=m*I-M*x,t[5]=b*I-r*x,t[6]=E*I-i*x,t[7]=T*I-u*x,t},c.scale=function(t,a,d){var x=d[0],I=d[1],M=d[2];return t[0]=a[0]*x,t[1]=a[1]*x,t[2]=a[2]*x,t[3]=a[3]*x,t[4]=a[4]*I,t[5]=a[5]*I,t[6]=a[6]*I,t[7]=a[7]*I,t[8]=a[8]*M,t[9]=a[9]*M,t[10]=a[10]*M,t[11]=a[11]*M,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},c.scale$1=function(t,a,d){return t[0]=a[0]*d,t[1]=a[1]*d,t[2]=a[2]*d,t[3]=a[3]*d,t},c.scale$2=function(t,a,d){return t[0]=a[0]*d,t[1]=a[1]*d,t[2]=a[2]*d,t},c.setCacheLimits=function(t,a){Vn=t,Wn=a},c.setRTLTextPlugin=function(t,a,d){if(d===void 0&&(d=!1),Xo==="deferred"||Xo==="loading"||Xo==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ya=ht.resolveURL(t),Xo="deferred",_l=a,Nl(),d||ya()},c.sphericalToCartesian=function(t){var a=t[0],d=t[1],x=t[2];return d+=90,d*=Math.PI/180,x*=Math.PI/180,{x:a*Math.cos(d)*Math.sin(x),y:a*Math.sin(d)*Math.sin(x),z:a*Math.cos(x)}},c.sqrLen=function(t){var a=t[0],d=t[1];return a*a+d*d},c.styleSpec=Ie,c.sub=function(t,a,d){return t[0]=a[0]-d[0],t[1]=a[1]-d[1],t[2]=a[2]-d[2],t},c.symbolSize=Eg,c.transformMat3=function(t,a,d){var x=a[0],I=a[1],M=a[2];return t[0]=x*d[0]+I*d[3]+M*d[6],t[1]=x*d[1]+I*d[4]+M*d[7],t[2]=x*d[2]+I*d[5]+M*d[8],t},c.transformMat4=ic,c.translate=function(t,a,d){var x,I,M,r,i,u,m,b,E,T,z,U,V=d[0],G=d[1],q=d[2];return a===t?(t[12]=a[0]*V+a[4]*G+a[8]*q+a[12],t[13]=a[1]*V+a[5]*G+a[9]*q+a[13],t[14]=a[2]*V+a[6]*G+a[10]*q+a[14],t[15]=a[3]*V+a[7]*G+a[11]*q+a[15]):(I=a[1],M=a[2],r=a[3],i=a[4],u=a[5],m=a[6],b=a[7],E=a[8],T=a[9],z=a[10],U=a[11],t[0]=x=a[0],t[1]=I,t[2]=M,t[3]=r,t[4]=i,t[5]=u,t[6]=m,t[7]=b,t[8]=E,t[9]=T,t[10]=z,t[11]=U,t[12]=x*V+i*G+E*q+a[12],t[13]=I*V+u*G+T*q+a[13],t[14]=M*V+m*G+z*q+a[14],t[15]=r*V+b*G+U*q+a[15]),t},c.triggerPluginCompletionEvent=kc,c.uniqueId=Ge,c.validateCustomStyleLayer=function(t){var a=[],d=t.id;return d===void 0&&a.push({message:"layers."+d+': missing required property "id"'}),t.render===void 0&&a.push({message:"layers."+d+': missing required method "render"'}),t.renderingMode&&t.renderingMode!=="2d"&&t.renderingMode!=="3d"&&a.push({message:"layers."+d+': property "renderingMode" must be either "2d" or "3d"'}),a},c.validateLight=_u,c.validateStyle=Ja,c.values=function(t){var a=[];for(var d in t)a.push(t[d]);return a},c.vectorTile=mh,c.version="1.13.2",c.warnOnce=qe,c.webpSupported=St,c.window=O,c.wrap=ve}),v(["./shared"],function(c){function h(ne){var ue=typeof ne;if(ue==="number"||ue==="boolean"||ue==="string"||ne==null)return JSON.stringify(ne);if(Array.isArray(ne)){for(var pe="[",Se=0,ze=ne;Se<ze.length;Se+=1)pe+=h(ze[Se])+",";return pe+"]"}for(var $e=Object.keys(ne).sort(),tt="{",Ie=0;Ie<$e.length;Ie++)tt+=JSON.stringify($e[Ie])+":"+h(ne[$e[Ie]])+",";return tt+"}"}function S(ne){for(var ue="",pe=0,Se=c.refProperties;pe<Se.length;pe+=1)ue+="/"+h(ne[Se[pe]]);return ue}var P=function(ne){this.keyCache={},ne&&this.replace(ne)};P.prototype.replace=function(ne){this._layerConfigs={},this._layers={},this.update(ne,[])},P.prototype.update=function(ne,ue){for(var pe=this,Se=0,ze=ne;Se<ze.length;Se+=1){var $e=ze[Se];this._layerConfigs[$e.id]=$e;var tt=this._layers[$e.id]=c.createStyleLayer($e);tt._featureFilter=c.featureFilter(tt.filter),this.keyCache[$e.id]&&delete this.keyCache[$e.id]}for(var Ie=0,Ne=ue;Ie<Ne.length;Ie+=1){var mt=Ne[Ie];delete this.keyCache[mt],delete this._layerConfigs[mt],delete this._layers[mt]}this.familiesBySource={};for(var ce=0,W=function(Me,Pe){for(var yt={},st=0;st<Me.length;st++){var _t=Pe&&Pe[Me[st].id]||S(Me[st]);Pe&&(Pe[Me[st].id]=_t);var si=yt[_t];si||(si=yt[_t]=[]),si.push(Me[st])}var De=[];for(var Yt in yt)De.push(yt[Yt]);return De}(c.values(this._layerConfigs),this.keyCache);ce<W.length;ce+=1){var X=W[ce].map(function(Me){return pe._layers[Me.id]}),le=X[0];if(le.visibility!=="none"){var me=le.source||"",Te=this.familiesBySource[me];Te||(Te=this.familiesBySource[me]={});var xe=le.sourceLayer||"_geojsonTileLayer",Le=Te[xe];Le||(Le=Te[xe]=[]),Le.push(X)}}};var D=function(ne){var ue={},pe=[];for(var Se in ne){var ze=ne[Se],$e=ue[Se]={};for(var tt in ze){var Ie=ze[+tt];if(Ie&&Ie.bitmap.width!==0&&Ie.bitmap.height!==0){var Ne={x:0,y:0,w:Ie.bitmap.width+2,h:Ie.bitmap.height+2};pe.push(Ne),$e[tt]={rect:Ne,metrics:Ie.metrics}}}}var mt=c.potpack(pe),ce=new c.AlphaImage({width:mt.w||1,height:mt.h||1});for(var W in ne){var X=ne[W];for(var le in X){var me=X[+le];if(me&&me.bitmap.width!==0&&me.bitmap.height!==0){var Te=ue[W][le].rect;c.AlphaImage.copy(me.bitmap,ce,{x:0,y:0},{x:Te.x+1,y:Te.y+1},me.bitmap)}}}this.image=ce,this.positions=ue};c.register("GlyphAtlas",D);var R=function(ne){this.tileID=new c.OverscaledTileID(ne.tileID.overscaledZ,ne.tileID.wrap,ne.tileID.canonical.z,ne.tileID.canonical.x,ne.tileID.canonical.y),this.uid=ne.uid,this.zoom=ne.zoom,this.pixelRatio=ne.pixelRatio,this.tileSize=ne.tileSize,this.source=ne.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ne.showCollisionBoxes,this.collectResourceTiming=!!ne.collectResourceTiming,this.returnDependencies=!!ne.returnDependencies,this.promoteId=ne.promoteId};function O(ne,ue,pe){for(var Se=new c.EvaluationParameters(ue),ze=0,$e=ne;ze<$e.length;ze+=1)$e[ze].recalculate(Se,pe)}function Y(ne,ue){var pe=c.getArrayBuffer(ne.request,function(Se,ze,$e,tt){Se?ue(Se):ze&&ue(null,{vectorTile:new c.vectorTile.VectorTile(new c.pbf(ze)),rawData:ze,cacheControl:$e,expires:tt})});return function(){pe.cancel(),ue()}}R.prototype.parse=function(ne,ue,pe,Se,ze){var $e=this;this.status="parsing",this.data=ne,this.collisionBoxArray=new c.CollisionBoxArray;var tt=new c.DictionaryCoder(Object.keys(ne.layers).sort()),Ie=new c.FeatureIndex(this.tileID,this.promoteId);Ie.bucketLayerIDs=[];var Ne,mt,ce,W,X={},le={featureIndex:Ie,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:pe},me=ue.familiesBySource[this.source];for(var Te in me){var xe=ne.layers[Te];if(xe){xe.version===1&&c.warnOnce('Vector tile source "'+this.source+'" layer "'+Te+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Le=tt.encode(Te),Me=[],Pe=0;Pe<xe.length;Pe++){var yt=xe.feature(Pe),st=Ie.getId(yt,Te);Me.push({feature:yt,id:st,index:Pe,sourceLayerIndex:Le})}for(var _t=0,si=me[Te];_t<si.length;_t+=1){var De=si[_t],Yt=De[0];Yt.minzoom&&this.zoom<Math.floor(Yt.minzoom)||Yt.maxzoom&&this.zoom>=Yt.maxzoom||Yt.visibility!=="none"&&(O(De,this.zoom,pe),(X[Yt.id]=Yt.createBucket({index:Ie.bucketLayerIDs.length,layers:De,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Le,sourceID:this.source})).populate(Me,le,this.tileID.canonical),Ie.bucketLayerIDs.push(De.map(function(Fi){return Fi.id})))}}}var hi=c.mapObject(le.glyphDependencies,function(Fi){return Object.keys(Fi).map(Number)});Object.keys(hi).length?Se.send("getGlyphs",{uid:this.uid,stacks:hi},function(Fi,Ii){Ne||(Ne=Fi,mt=Ii,nn.call($e))}):mt={};var kn=Object.keys(le.iconDependencies);kn.length?Se.send("getImages",{icons:kn,source:this.source,tileID:this.tileID,type:"icons"},function(Fi,Ii){Ne||(Ne=Fi,ce=Ii,nn.call($e))}):ce={};var Wi=Object.keys(le.patternDependencies);function nn(){if(Ne)return ze(Ne);if(mt&&ce&&W){var Fi=new D(mt),Ii=new c.ImageAtlas(ce,W);for(var hn in X){var cr=X[hn];cr instanceof c.SymbolBucket?(O(cr.layers,this.zoom,pe),c.performSymbolLayout(cr,mt,Fi.positions,ce,Ii.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):cr.hasPattern&&(cr instanceof c.LineBucket||cr instanceof c.FillBucket||cr instanceof c.FillExtrusionBucket)&&(O(cr.layers,this.zoom,pe),cr.addFeatures(le,this.tileID.canonical,Ii.patternPositions))}this.status="done",ze(null,{buckets:c.values(X).filter(function(ho){return!ho.isEmpty()}),featureIndex:Ie,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fi.image,imageAtlas:Ii,glyphMap:this.returnDependencies?mt:null,iconMap:this.returnDependencies?ce:null,glyphPositions:this.returnDependencies?Fi.positions:null})}}Wi.length?Se.send("getImages",{icons:Wi,source:this.source,tileID:this.tileID,type:"patterns"},function(Fi,Ii){Ne||(Ne=Fi,W=Ii,nn.call($e))}):W={},nn.call(this)};var ee=function(ne,ue,pe,Se){this.actor=ne,this.layerIndex=ue,this.availableImages=pe,this.loadVectorData=Se||Y,this.loading={},this.loaded={}};ee.prototype.loadTile=function(ne,ue){var pe=this,Se=ne.uid;this.loading||(this.loading={});var ze=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new c.RequestPerformance(ne.request),$e=this.loading[Se]=new R(ne);$e.abort=this.loadVectorData(ne,function(tt,Ie){if(delete pe.loading[Se],tt||!Ie)return $e.status="done",pe.loaded[Se]=$e,ue(tt);var Ne=Ie.rawData,mt={};Ie.expires&&(mt.expires=Ie.expires),Ie.cacheControl&&(mt.cacheControl=Ie.cacheControl);var ce={};if(ze){var W=ze.finish();W&&(ce.resourceTiming=JSON.parse(JSON.stringify(W)))}$e.vectorTile=Ie.vectorTile,$e.parse(Ie.vectorTile,pe.layerIndex,pe.availableImages,pe.actor,function(X,le){if(X||!le)return ue(X);ue(null,c.extend({rawTileData:Ne.slice(0)},le,mt,ce))}),pe.loaded=pe.loaded||{},pe.loaded[Se]=$e})},ee.prototype.reloadTile=function(ne,ue){var pe=this,Se=this.loaded,ze=ne.uid,$e=this;if(Se&&Se[ze]){var tt=Se[ze];tt.showCollisionBoxes=ne.showCollisionBoxes;var Ie=function(Ne,mt){var ce=tt.reloadCallback;ce&&(delete tt.reloadCallback,tt.parse(tt.vectorTile,$e.layerIndex,pe.availableImages,$e.actor,ce)),ue(Ne,mt)};tt.status==="parsing"?tt.reloadCallback=Ie:tt.status==="done"&&(tt.vectorTile?tt.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.actor,Ie):Ie())}},ee.prototype.abortTile=function(ne,ue){var pe=this.loading,Se=ne.uid;pe&&pe[Se]&&pe[Se].abort&&(pe[Se].abort(),delete pe[Se]),ue()},ee.prototype.removeTile=function(ne,ue){var pe=this.loaded,Se=ne.uid;pe&&pe[Se]&&delete pe[Se],ue()};var he=c.window.ImageBitmap,re=function(){this.loaded={}};function ve(ne,ue){if(ne.length!==0){se(ne[0],ue);for(var pe=1;pe<ne.length;pe++)se(ne[pe],!ue)}}function se(ne,ue){for(var pe=0,Se=0,ze=ne.length,$e=ze-1;Se<ze;$e=Se++)pe+=(ne[Se][0]-ne[$e][0])*(ne[$e][1]+ne[Se][1]);pe>=0!=!!ue&&ne.reverse()}re.prototype.loadTile=function(ne,ue){var pe=ne.uid,Se=ne.encoding,ze=ne.rawImageData,$e=he&&ze instanceof he?this.getImageData(ze):ze,tt=new c.DEMData(pe,$e,Se);this.loaded=this.loaded||{},this.loaded[pe]=tt,ue(null,tt)},re.prototype.getImageData=function(ne){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ne.width,ne.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ne.width,this.offscreenCanvas.height=ne.height,this.offscreenCanvasContext.drawImage(ne,0,0,ne.width,ne.height);var ue=this.offscreenCanvasContext.getImageData(-1,-1,ne.width+2,ne.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new c.RGBAImage({width:ue.width,height:ue.height},ue.data)},re.prototype.removeTile=function(ne){var ue=this.loaded,pe=ne.uid;ue&&ue[pe]&&delete ue[pe]};var we=c.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ge=function(ne){this._feature=ne,this.extent=c.EXTENT,this.type=ne.type,this.properties=ne.tags,"id"in ne&&!isNaN(ne.id)&&(this.id=parseInt(ne.id,10))};Ge.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ne=[],ue=0,pe=this._feature.geometry;ue<pe.length;ue+=1){var Se=pe[ue];ne.push([new c.Point$1(Se[0],Se[1])])}return ne}for(var ze=[],$e=0,tt=this._feature.geometry;$e<tt.length;$e+=1){for(var Ie=[],Ne=0,mt=tt[$e];Ne<mt.length;Ne+=1){var ce=mt[Ne];Ie.push(new c.Point$1(ce[0],ce[1]))}ze.push(Ie)}return ze},Ge.prototype.toGeoJSON=function(ne,ue,pe){return we.call(this,ne,ue,pe)};var Ue=function(ne){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=ne.length,this._features=ne};Ue.prototype.feature=function(ne){return new Ge(this._features[ne])};var He=c.vectorTile.VectorTileFeature,fe=ut;function ut(ne,ue){this.options=ue||{},this.features=ne,this.length=ne.length}function at(ne,ue){this.id=typeof ne.id=="number"?ne.id:void 0,this.type=ne.type,this.rawGeometry=ne.type===1?[ne.geometry]:ne.geometry,this.properties=ne.tags,this.extent=ue||4096}ut.prototype.feature=function(ne){return new at(this.features[ne],this.options.extent)},at.prototype.loadGeometry=function(){var ne=this.rawGeometry;this.geometry=[];for(var ue=0;ue<ne.length;ue++){for(var pe=ne[ue],Se=[],ze=0;ze<pe.length;ze++)Se.push(new c.Point$1(pe[ze][0],pe[ze][1]));this.geometry.push(Se)}return this.geometry},at.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ne=this.geometry,ue=1/0,pe=-1/0,Se=1/0,ze=-1/0,$e=0;$e<ne.length;$e++)for(var tt=ne[$e],Ie=0;Ie<tt.length;Ie++){var Ne=tt[Ie];ue=Math.min(ue,Ne.x),pe=Math.max(pe,Ne.x),Se=Math.min(Se,Ne.y),ze=Math.max(ze,Ne.y)}return[ue,Se,pe,ze]},at.prototype.toGeoJSON=He.prototype.toGeoJSON;var je=Dt,Fe=fe;function Dt(ne){var ue=new c.pbf;return function(pe,Se){for(var ze in pe.layers)Se.writeMessage(3,qe,pe.layers[ze])}(ne,ue),ue.finish()}function qe(ne,ue){var pe;ue.writeVarintField(15,ne.version||1),ue.writeStringField(1,ne.name||""),ue.writeVarintField(5,ne.extent||4096);var Se={keys:[],values:[],keycache:{},valuecache:{}};for(pe=0;pe<ne.length;pe++)Se.feature=ne.feature(pe),ue.writeMessage(2,Mt,Se);var ze=Se.keys;for(pe=0;pe<ze.length;pe++)ue.writeStringField(3,ze[pe]);var $e=Se.values;for(pe=0;pe<$e.length;pe++)ue.writeMessage(4,wt,$e[pe])}function Mt(ne,ue){var pe=ne.feature;pe.id!==void 0&&ue.writeVarintField(1,pe.id),ue.writeMessage(2,li,ne),ue.writeVarintField(3,pe.type),ue.writeMessage(4,Je,pe)}function li(ne,ue){var pe=ne.feature,Se=ne.keys,ze=ne.values,$e=ne.keycache,tt=ne.valuecache;for(var Ie in pe.properties){var Ne=$e[Ie];Ne===void 0&&(Se.push(Ie),$e[Ie]=Ne=Se.length-1),ue.writeVarint(Ne);var mt=pe.properties[Ie],ce=typeof mt;ce!=="string"&&ce!=="boolean"&&ce!=="number"&&(mt=JSON.stringify(mt));var W=ce+":"+mt,X=tt[W];X===void 0&&(ze.push(mt),tt[W]=X=ze.length-1),ue.writeVarint(X)}}function Et(ne,ue){return(ue<<3)+(7&ne)}function Gt(ne){return ne<<1^ne>>31}function Je(ne,ue){for(var pe=ne.loadGeometry(),Se=ne.type,ze=0,$e=0,tt=pe.length,Ie=0;Ie<tt;Ie++){var Ne=pe[Ie],mt=1;Se===1&&(mt=Ne.length),ue.writeVarint(Et(1,mt));for(var ce=Se===3?Ne.length-1:Ne.length,W=0;W<ce;W++){W===1&&Se!==1&&ue.writeVarint(Et(2,ce-1));var X=Ne[W].x-ze,le=Ne[W].y-$e;ue.writeVarint(Gt(X)),ue.writeVarint(Gt(le)),ze+=X,$e+=le}Se===3&&ue.writeVarint(Et(7,1))}}function wt(ne,ue){var pe=typeof ne;pe==="string"?ue.writeStringField(1,ne):pe==="boolean"?ue.writeBooleanField(7,ne):pe==="number"&&(ne%1!=0?ue.writeDoubleField(3,ne):ne<0?ue.writeSVarintField(6,ne):ue.writeVarintField(5,ne))}function Pt(ne,ue,pe,Se){ni(ne,pe,Se),ni(ue,2*pe,2*Se),ni(ue,2*pe+1,2*Se+1)}function ni(ne,ue,pe){var Se=ne[ue];ne[ue]=ne[pe],ne[pe]=Se}function Xt(ne,ue,pe,Se){var ze=ne-pe,$e=ue-Se;return ze*ze+$e*$e}je.fromVectorTileJs=Dt,je.fromGeojsonVt=function(ne,ue){ue=ue||{};var pe={};for(var Se in ne)pe[Se]=new fe(ne[Se].features,ue),pe[Se].name=Se,pe[Se].version=ue.version,pe[Se].extent=ue.extent;return Dt({layers:pe})},je.GeoJSONWrapper=Fe;var Xi=function(ne){return ne[0]},ei=function(ne){return ne[1]},Jt=function(ne,ue,pe,Se,ze){ue===void 0&&(ue=Xi),pe===void 0&&(pe=ei),Se===void 0&&(Se=64),ze===void 0&&(ze=Float64Array),this.nodeSize=Se,this.points=ne;for(var $e=ne.length<65536?Uint16Array:Uint32Array,tt=this.ids=new $e(ne.length),Ie=this.coords=new ze(2*ne.length),Ne=0;Ne<ne.length;Ne++)tt[Ne]=Ne,Ie[2*Ne]=ue(ne[Ne]),Ie[2*Ne+1]=pe(ne[Ne]);(function mt(ce,W,X,le,me,Te){if(!(me-le<=X)){var xe=le+me>>1;(function Le(Me,Pe,yt,st,_t,si){for(;_t>st;){if(_t-st>600){var De=_t-st+1,Yt=yt-st+1,hi=Math.log(De),kn=.5*Math.exp(2*hi/3),Wi=.5*Math.sqrt(hi*kn*(De-kn)/De)*(Yt-De/2<0?-1:1);Le(Me,Pe,yt,Math.max(st,Math.floor(yt-Yt*kn/De+Wi)),Math.min(_t,Math.floor(yt+(De-Yt)*kn/De+Wi)),si)}var nn=Pe[2*yt+si],Fi=st,Ii=_t;for(Pt(Me,Pe,st,yt),Pe[2*_t+si]>nn&&Pt(Me,Pe,st,_t);Fi<Ii;){for(Pt(Me,Pe,Fi,Ii),Fi++,Ii--;Pe[2*Fi+si]<nn;)Fi++;for(;Pe[2*Ii+si]>nn;)Ii--}Pe[2*st+si]===nn?Pt(Me,Pe,st,Ii):Pt(Me,Pe,++Ii,_t),Ii<=yt&&(st=Ii+1),yt<=Ii&&(_t=Ii-1)}})(ce,W,xe,le,me,Te%2),mt(ce,W,X,le,xe-1,Te+1),mt(ce,W,X,xe+1,me,Te+1)}})(tt,Ie,Se,0,tt.length-1,0)};Jt.prototype.range=function(ne,ue,pe,Se){return function(ze,$e,tt,Ie,Ne,mt,ce){for(var W,X,le=[0,ze.length-1,0],me=[];le.length;){var Te=le.pop(),xe=le.pop(),Le=le.pop();if(xe-Le<=ce)for(var Me=Le;Me<=xe;Me++)X=$e[2*Me+1],(W=$e[2*Me])>=tt&&W<=Ne&&X>=Ie&&X<=mt&&me.push(ze[Me]);else{var Pe=Math.floor((Le+xe)/2);X=$e[2*Pe+1],(W=$e[2*Pe])>=tt&&W<=Ne&&X>=Ie&&X<=mt&&me.push(ze[Pe]);var yt=(Te+1)%2;(Te===0?tt<=W:Ie<=X)&&(le.push(Le),le.push(Pe-1),le.push(yt)),(Te===0?Ne>=W:mt>=X)&&(le.push(Pe+1),le.push(xe),le.push(yt))}}return me}(this.ids,this.coords,ne,ue,pe,Se,this.nodeSize)},Jt.prototype.within=function(ne,ue,pe){return function(Se,ze,$e,tt,Ie,Ne){for(var mt=[0,Se.length-1,0],ce=[],W=Ie*Ie;mt.length;){var X=mt.pop(),le=mt.pop(),me=mt.pop();if(le-me<=Ne)for(var Te=me;Te<=le;Te++)Xt(ze[2*Te],ze[2*Te+1],$e,tt)<=W&&ce.push(Se[Te]);else{var xe=Math.floor((me+le)/2),Le=ze[2*xe],Me=ze[2*xe+1];Xt(Le,Me,$e,tt)<=W&&ce.push(Se[xe]);var Pe=(X+1)%2;(X===0?$e-Ie<=Le:tt-Ie<=Me)&&(mt.push(me),mt.push(xe-1),mt.push(Pe)),(X===0?$e+Ie>=Le:tt+Ie>=Me)&&(mt.push(xe+1),mt.push(le),mt.push(Pe))}}return ce}(this.ids,this.coords,ne,ue,pe,this.nodeSize)};var bi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ne){return ne}},ai=function(ne){this.options=zi(Object.create(bi),ne),this.trees=new Array(this.options.maxZoom+1)};function ht(ne,ue,pe,Se,ze){return{x:ne,y:ue,zoom:1/0,id:pe,parentId:-1,numPoints:Se,properties:ze}}function It(ne,ue){var pe=ne.geometry.coordinates,Se=pe[1];return{x:Qt(pe[0]),y:gt(Se),zoom:1/0,index:ue,parentId:-1}}function St(ne){return{type:"Feature",id:ne.id,properties:Ji(ne),geometry:{type:"Point",coordinates:[(Se=ne.x,360*(Se-.5)),(ue=ne.y,pe=(180-360*ue)*Math.PI/180,360*Math.atan(Math.exp(pe))/Math.PI-90)]}};var ue,pe,Se}function Ji(ne){var ue=ne.numPoints,pe=ue>=1e4?Math.round(ue/1e3)+"k":ue>=1e3?Math.round(ue/100)/10+"k":ue;return zi(zi({},ne.properties),{cluster:!0,cluster_id:ne.id,point_count:ue,point_count_abbreviated:pe})}function Qt(ne){return ne/360+.5}function gt(ne){var ue=Math.sin(ne*Math.PI/180),pe=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return pe<0?0:pe>1?1:pe}function zi(ne,ue){for(var pe in ue)ne[pe]=ue[pe];return ne}function ln(ne){return ne.x}function Cn(ne){return ne.y}function Zn(ne,ue,pe,Se,ze,$e){var tt=ze-pe,Ie=$e-Se;if(tt!==0||Ie!==0){var Ne=((ne-pe)*tt+(ue-Se)*Ie)/(tt*tt+Ie*Ie);Ne>1?(pe=ze,Se=$e):Ne>0&&(pe+=tt*Ne,Se+=Ie*Ne)}return(tt=ne-pe)*tt+(Ie=ue-Se)*Ie}function Nr(ne,ue,pe,Se){var ze={id:ne===void 0?null:ne,type:ue,geometry:pe,tags:Se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function($e){var tt=$e.geometry,Ie=$e.type;if(Ie==="Point"||Ie==="MultiPoint"||Ie==="LineString")Kr($e,tt);else if(Ie==="Polygon"||Ie==="MultiLineString")for(var Ne=0;Ne<tt.length;Ne++)Kr($e,tt[Ne]);else if(Ie==="MultiPolygon")for(Ne=0;Ne<tt.length;Ne++)for(var mt=0;mt<tt[Ne].length;mt++)Kr($e,tt[Ne][mt])}(ze),ze}function Kr(ne,ue){for(var pe=0;pe<ue.length;pe+=3)ne.minX=Math.min(ne.minX,ue[pe]),ne.minY=Math.min(ne.minY,ue[pe+1]),ne.maxX=Math.max(ne.maxX,ue[pe]),ne.maxY=Math.max(ne.maxY,ue[pe+1])}function At(ne,ue,pe,Se){if(ue.geometry){var ze=ue.geometry.coordinates,$e=ue.geometry.type,tt=Math.pow(pe.tolerance/((1<<pe.maxZoom)*pe.extent),2),Ie=[],Ne=ue.id;if(pe.promoteId?Ne=ue.properties[pe.promoteId]:pe.generateId&&(Ne=Se||0),$e==="Point")Bi(ze,Ie);else if($e==="MultiPoint")for(var mt=0;mt<ze.length;mt++)Bi(ze[mt],Ie);else if($e==="LineString")Nn(ze,Ie,tt,!1);else if($e==="MultiLineString"){if(pe.lineMetrics){for(mt=0;mt<ze.length;mt++)Nn(ze[mt],Ie=[],tt,!1),ne.push(Nr(Ne,"LineString",Ie,ue.properties));return}rn(ze,Ie,tt,!1)}else if($e==="Polygon")rn(ze,Ie,tt,!0);else{if($e!=="MultiPolygon"){if($e==="GeometryCollection"){for(mt=0;mt<ue.geometry.geometries.length;mt++)At(ne,{id:Ne,geometry:ue.geometry.geometries[mt],properties:ue.properties},pe,Se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(mt=0;mt<ze.length;mt++){var ce=[];rn(ze[mt],ce,tt,!0),Ie.push(ce)}}ne.push(Nr(Ne,$e,Ie,ue.properties))}}function Bi(ne,ue){ue.push(Jn(ne[0])),ue.push(Ln(ne[1])),ue.push(0)}function Nn(ne,ue,pe,Se){for(var ze,$e,tt=0,Ie=0;Ie<ne.length;Ie++){var Ne=Jn(ne[Ie][0]),mt=Ln(ne[Ie][1]);ue.push(Ne),ue.push(mt),ue.push(0),Ie>0&&(tt+=Se?(ze*mt-Ne*$e)/2:Math.sqrt(Math.pow(Ne-ze,2)+Math.pow(mt-$e,2))),ze=Ne,$e=mt}var ce=ue.length-3;ue[2]=1,function W(X,le,me,Te){for(var xe,Le=Te,Me=me-le>>1,Pe=me-le,yt=X[le],st=X[le+1],_t=X[me],si=X[me+1],De=le+3;De<me;De+=3){var Yt=Zn(X[De],X[De+1],yt,st,_t,si);if(Yt>Le)xe=De,Le=Yt;else if(Yt===Le){var hi=Math.abs(De-Me);hi<Pe&&(xe=De,Pe=hi)}}Le>Te&&(xe-le>3&&W(X,le,xe,Te),X[xe+2]=Le,me-xe>3&&W(X,xe,me,Te))}(ue,0,ce,pe),ue[ce+2]=1,ue.size=Math.abs(tt),ue.start=0,ue.end=ue.size}function rn(ne,ue,pe,Se){for(var ze=0;ze<ne.length;ze++){var $e=[];Nn(ne[ze],$e,pe,Se),ue.push($e)}}function Jn(ne){return ne/360+.5}function Ln(ne){var ue=Math.sin(ne*Math.PI/180),pe=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return pe<0?0:pe>1?1:pe}function zt(ne,ue,pe,Se,ze,$e,tt,Ie){if(Se/=ue,$e>=(pe/=ue)&&tt<Se)return ne;if(tt<pe||$e>=Se)return null;for(var Ne=[],mt=0;mt<ne.length;mt++){var ce=ne[mt],W=ce.geometry,X=ce.type,le=ze===0?ce.minX:ce.minY,me=ze===0?ce.maxX:ce.maxY;if(le>=pe&&me<Se)Ne.push(ce);else if(!(me<pe||le>=Se)){var Te=[];if(X==="Point"||X==="MultiPoint")Oi(W,Te,pe,Se,ze);else if(X==="LineString")Ze(W,Te,pe,Se,ze,!1,Ie.lineMetrics);else if(X==="MultiLineString")Ki(W,Te,pe,Se,ze,!1);else if(X==="Polygon")Ki(W,Te,pe,Se,ze,!0);else if(X==="MultiPolygon")for(var xe=0;xe<W.length;xe++){var Le=[];Ki(W[xe],Le,pe,Se,ze,!0),Le.length&&Te.push(Le)}if(Te.length){if(Ie.lineMetrics&&X==="LineString"){for(xe=0;xe<Te.length;xe++)Ne.push(Nr(ce.id,X,Te[xe],ce.tags));continue}X!=="LineString"&&X!=="MultiLineString"||(Te.length===1?(X="LineString",Te=Te[0]):X="MultiLineString"),X!=="Point"&&X!=="MultiPoint"||(X=Te.length===3?"Point":"MultiPoint"),Ne.push(Nr(ce.id,X,Te,ce.tags))}}}return Ne.length?Ne:null}function Oi(ne,ue,pe,Se,ze){for(var $e=0;$e<ne.length;$e+=3){var tt=ne[$e+ze];tt>=pe&&tt<=Se&&(ue.push(ne[$e]),ue.push(ne[$e+1]),ue.push(ne[$e+2]))}}function Ze(ne,ue,pe,Se,ze,$e,tt){for(var Ie,Ne,mt=Bt(ne),ce=ze===0?Wn:_o,W=ne.start,X=0;X<ne.length-3;X+=3){var le=ne[X],me=ne[X+1],Te=ne[X+2],xe=ne[X+3],Le=ne[X+4],Me=ze===0?le:me,Pe=ze===0?xe:Le,yt=!1;tt&&(Ie=Math.sqrt(Math.pow(le-xe,2)+Math.pow(me-Le,2))),Me<pe?Pe>pe&&(Ne=ce(mt,le,me,xe,Le,pe),tt&&(mt.start=W+Ie*Ne)):Me>Se?Pe<Se&&(Ne=ce(mt,le,me,xe,Le,Se),tt&&(mt.start=W+Ie*Ne)):Vn(mt,le,me,Te),Pe<pe&&Me>=pe&&(Ne=ce(mt,le,me,xe,Le,pe),yt=!0),Pe>Se&&Me<=Se&&(Ne=ce(mt,le,me,xe,Le,Se),yt=!0),!$e&&yt&&(tt&&(mt.end=W+Ie*Ne),ue.push(mt),mt=Bt(ne)),tt&&(W+=Ie)}var st=ne.length-3;le=ne[st],me=ne[st+1],Te=ne[st+2],(Me=ze===0?le:me)>=pe&&Me<=Se&&Vn(mt,le,me,Te),st=mt.length-3,$e&&st>=3&&(mt[st]!==mt[0]||mt[st+1]!==mt[1])&&Vn(mt,mt[0],mt[1],mt[2]),mt.length&&ue.push(mt)}function Bt(ne){var ue=[];return ue.size=ne.size,ue.start=ne.start,ue.end=ne.end,ue}function Ki(ne,ue,pe,Se,ze,$e){for(var tt=0;tt<ne.length;tt++)Ze(ne[tt],ue,pe,Se,ze,$e,!1)}function Vn(ne,ue,pe,Se){ne.push(ue),ne.push(pe),ne.push(Se)}function Wn(ne,ue,pe,Se,ze,$e){var tt=($e-ue)/(Se-ue);return ne.push($e),ne.push(pe+(ze-pe)*tt),ne.push(1),tt}function _o(ne,ue,pe,Se,ze,$e){var tt=($e-pe)/(ze-pe);return ne.push(ue+(Se-ue)*tt),ne.push($e),ne.push(1),tt}function vo(ne,ue){for(var pe=[],Se=0;Se<ne.length;Se++){var ze,$e=ne[Se],tt=$e.type;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")ze=aa($e.geometry,ue);else if(tt==="MultiLineString"||tt==="Polygon"){ze=[];for(var Ie=0;Ie<$e.geometry.length;Ie++)ze.push(aa($e.geometry[Ie],ue))}else if(tt==="MultiPolygon")for(ze=[],Ie=0;Ie<$e.geometry.length;Ie++){for(var Ne=[],mt=0;mt<$e.geometry[Ie].length;mt++)Ne.push(aa($e.geometry[Ie][mt],ue));ze.push(Ne)}pe.push(Nr($e.id,tt,ze,$e.tags))}return pe}function aa(ne,ue){var pe=[];pe.size=ne.size,ne.start!==void 0&&(pe.start=ne.start,pe.end=ne.end);for(var Se=0;Se<ne.length;Se+=3)pe.push(ne[Se]+ue,ne[Se+1],ne[Se+2]);return pe}function Ar(ne,ue){if(ne.transformed)return ne;var pe,Se,ze,$e=1<<ne.z,tt=ne.x,Ie=ne.y;for(pe=0;pe<ne.features.length;pe++){var Ne=ne.features[pe],mt=Ne.geometry,ce=Ne.type;if(Ne.geometry=[],ce===1)for(Se=0;Se<mt.length;Se+=2)Ne.geometry.push(yi(mt[Se],mt[Se+1],ue,$e,tt,Ie));else for(Se=0;Se<mt.length;Se++){var W=[];for(ze=0;ze<mt[Se].length;ze+=2)W.push(yi(mt[Se][ze],mt[Se][ze+1],ue,$e,tt,Ie));Ne.geometry.push(W)}}return ne.transformed=!0,ne}function yi(ne,ue,pe,Se,ze,$e){return[Math.round(pe*(ne*Se-ze)),Math.round(pe*(ue*Se-$e))]}function On(ne,ue,pe,Se,ze){for(var $e=ue===ze.maxZoom?0:ze.tolerance/((1<<ue)*ze.extent),tt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:pe,y:Se,z:ue,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ie=0;Ie<ne.length;Ie++){tt.numFeatures++,xn(tt,ne[Ie],$e,ze);var Ne=ne[Ie].minX,mt=ne[Ie].minY,ce=ne[Ie].maxX,W=ne[Ie].maxY;Ne<tt.minX&&(tt.minX=Ne),mt<tt.minY&&(tt.minY=mt),ce>tt.maxX&&(tt.maxX=ce),W>tt.maxY&&(tt.maxY=W)}return tt}function xn(ne,ue,pe,Se){var ze=ue.geometry,$e=ue.type,tt=[];if($e==="Point"||$e==="MultiPoint")for(var Ie=0;Ie<ze.length;Ie+=3)tt.push(ze[Ie]),tt.push(ze[Ie+1]),ne.numPoints++,ne.numSimplified++;else if($e==="LineString")ro(tt,ze,ne,pe,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(Ie=0;Ie<ze.length;Ie++)ro(tt,ze[Ie],ne,pe,$e==="Polygon",Ie===0);else if($e==="MultiPolygon")for(var Ne=0;Ne<ze.length;Ne++){var mt=ze[Ne];for(Ie=0;Ie<mt.length;Ie++)ro(tt,mt[Ie],ne,pe,!0,Ie===0)}if(tt.length){var ce=ue.tags||null;if($e==="LineString"&&Se.lineMetrics){for(var W in ce={},ue.tags)ce[W]=ue.tags[W];ce.mapbox_clip_start=ze.start/ze.size,ce.mapbox_clip_end=ze.end/ze.size}var X={geometry:tt,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:ce};ue.id!==null&&(X.id=ue.id),ne.features.push(X)}}function ro(ne,ue,pe,Se,ze,$e){var tt=Se*Se;if(Se>0&&ue.size<(ze?tt:Se))pe.numPoints+=ue.length/3;else{for(var Ie=[],Ne=0;Ne<ue.length;Ne+=3)(Se===0||ue[Ne+2]>tt)&&(pe.numSimplified++,Ie.push(ue[Ne]),Ie.push(ue[Ne+1])),pe.numPoints++;ze&&function(mt,ce){for(var W=0,X=0,le=mt.length,me=le-2;X<le;me=X,X+=2)W+=(mt[X]-mt[me])*(mt[X+1]+mt[me+1]);if(W>0===ce)for(X=0,le=mt.length;X<le/2;X+=2){var Te=mt[X],xe=mt[X+1];mt[X]=mt[le-2-X],mt[X+1]=mt[le-1-X],mt[le-2-X]=Te,mt[le-1-X]=xe}}(Ie,$e),ne.push(Ie)}}function co(ne,ue){var pe=(ue=this.options=function(ze,$e){for(var tt in $e)ze[tt]=$e[tt];return ze}(Object.create(this.options),ue)).debug;if(pe&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");var Se=function(ze,$e){var tt=[];if(ze.type==="FeatureCollection")for(var Ie=0;Ie<ze.features.length;Ie++)At(tt,ze.features[Ie],$e,Ie);else At(tt,ze.type==="Feature"?ze:{geometry:ze},$e);return tt}(ne,ue);this.tiles={},this.tileCoords=[],pe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Se=function(ze,$e){var tt=$e.buffer/$e.extent,Ie=ze,Ne=zt(ze,1,-1-tt,tt,0,-1,2,$e),mt=zt(ze,1,1-tt,2+tt,0,-1,2,$e);return(Ne||mt)&&(Ie=zt(ze,1,-tt,1+tt,0,-1,2,$e)||[],Ne&&(Ie=vo(Ne,1).concat(Ie)),mt&&(Ie=Ie.concat(vo(mt,-1)))),Ie}(Se,ue)).length&&this.splitTile(Se,0,0,0),pe&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function dn(ne,ue,pe){return 32*((1<<ne)*pe+ue)+ne}function sa(ne,ue){var pe=ne.tileID.canonical;if(!this._geoJSONIndex)return ue(null,null);var Se=this._geoJSONIndex.getTile(pe.z,pe.x,pe.y);if(!Se)return ue(null,null);var ze=new Ue(Se.features),$e=je(ze);$e.byteOffset===0&&$e.byteLength===$e.buffer.byteLength||($e=new Uint8Array($e)),ue(null,{vectorTile:ze,rawData:$e.buffer})}ai.prototype.load=function(ne){var ue=this.options,pe=ue.log,Se=ue.minZoom,ze=ue.maxZoom,$e=ue.nodeSize;pe&&console.time("total time");var tt="prepare "+ne.length+" points";pe&&console.time(tt),this.points=ne;for(var Ie=[],Ne=0;Ne<ne.length;Ne++)ne[Ne].geometry&&Ie.push(It(ne[Ne],Ne));this.trees[ze+1]=new Jt(Ie,ln,Cn,$e,Float32Array),pe&&console.timeEnd(tt);for(var mt=ze;mt>=Se;mt--){var ce=+Date.now();Ie=this._cluster(Ie,mt),this.trees[mt]=new Jt(Ie,ln,Cn,$e,Float32Array),pe&&console.log("z%d: %d clusters in %dms",mt,Ie.length,+Date.now()-ce)}return pe&&console.timeEnd("total time"),this},ai.prototype.getClusters=function(ne,ue){var pe=((ne[0]+180)%360+360)%360-180,Se=Math.max(-90,Math.min(90,ne[1])),ze=ne[2]===180?180:((ne[2]+180)%360+360)%360-180,$e=Math.max(-90,Math.min(90,ne[3]));if(ne[2]-ne[0]>=360)pe=-180,ze=180;else if(pe>ze){var tt=this.getClusters([pe,Se,180,$e],ue),Ie=this.getClusters([-180,Se,ze,$e],ue);return tt.concat(Ie)}for(var Ne=this.trees[this._limitZoom(ue)],mt=[],ce=0,W=Ne.range(Qt(pe),gt($e),Qt(ze),gt(Se));ce<W.length;ce+=1){var X=Ne.points[W[ce]];mt.push(X.numPoints?St(X):this.points[X.index])}return mt},ai.prototype.getChildren=function(ne){var ue=this._getOriginId(ne),pe=this._getOriginZoom(ne),Se="No cluster with the specified id.",ze=this.trees[pe];if(!ze)throw new Error(Se);var $e=ze.points[ue];if(!$e)throw new Error(Se);for(var tt=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),Ie=[],Ne=0,mt=ze.within($e.x,$e.y,tt);Ne<mt.length;Ne+=1){var ce=ze.points[mt[Ne]];ce.parentId===ne&&Ie.push(ce.numPoints?St(ce):this.points[ce.index])}if(Ie.length===0)throw new Error(Se);return Ie},ai.prototype.getLeaves=function(ne,ue,pe){var Se=[];return this._appendLeaves(Se,ne,ue=ue||10,pe=pe||0,0),Se},ai.prototype.getTile=function(ne,ue,pe){var Se=this.trees[this._limitZoom(ne)],ze=Math.pow(2,ne),$e=this.options,tt=$e.radius/$e.extent,Ie=(pe-tt)/ze,Ne=(pe+1+tt)/ze,mt={features:[]};return this._addTileFeatures(Se.range((ue-tt)/ze,Ie,(ue+1+tt)/ze,Ne),Se.points,ue,pe,ze,mt),ue===0&&this._addTileFeatures(Se.range(1-tt/ze,Ie,1,Ne),Se.points,ze,pe,ze,mt),ue===ze-1&&this._addTileFeatures(Se.range(0,Ie,tt/ze,Ne),Se.points,-1,pe,ze,mt),mt.features.length?mt:null},ai.prototype.getClusterExpansionZoom=function(ne){for(var ue=this._getOriginZoom(ne)-1;ue<=this.options.maxZoom;){var pe=this.getChildren(ne);if(ue++,pe.length!==1)break;ne=pe[0].properties.cluster_id}return ue},ai.prototype._appendLeaves=function(ne,ue,pe,Se,ze){for(var $e=0,tt=this.getChildren(ue);$e<tt.length;$e+=1){var Ie=tt[$e],Ne=Ie.properties;if(Ne&&Ne.cluster?ze+Ne.point_count<=Se?ze+=Ne.point_count:ze=this._appendLeaves(ne,Ne.cluster_id,pe,Se,ze):ze<Se?ze++:ne.push(Ie),ne.length===pe)break}return ze},ai.prototype._addTileFeatures=function(ne,ue,pe,Se,ze,$e){for(var tt=0,Ie=ne;tt<Ie.length;tt+=1){var Ne=ue[Ie[tt]],mt=Ne.numPoints,ce={type:1,geometry:[[Math.round(this.options.extent*(Ne.x*ze-pe)),Math.round(this.options.extent*(Ne.y*ze-Se))]],tags:mt?Ji(Ne):this.points[Ne.index].properties},W=void 0;mt?W=Ne.id:this.options.generateId?W=Ne.index:this.points[Ne.index].id&&(W=this.points[Ne.index].id),W!==void 0&&(ce.id=W),$e.features.push(ce)}},ai.prototype._limitZoom=function(ne){return Math.max(this.options.minZoom,Math.min(+ne,this.options.maxZoom+1))},ai.prototype._cluster=function(ne,ue){for(var pe=[],Se=this.options,ze=Se.reduce,$e=Se.minPoints,tt=Se.radius/(Se.extent*Math.pow(2,ue)),Ie=0;Ie<ne.length;Ie++){var Ne=ne[Ie];if(!(Ne.zoom<=ue)){Ne.zoom=ue;for(var mt=this.trees[ue+1],ce=mt.within(Ne.x,Ne.y,tt),W=Ne.numPoints||1,X=W,le=0,me=ce;le<me.length;le+=1){var Te=mt.points[me[le]];Te.zoom>ue&&(X+=Te.numPoints||1)}if(X>=$e){for(var xe=Ne.x*W,Le=Ne.y*W,Me=ze&&W>1?this._map(Ne,!0):null,Pe=(Ie<<5)+(ue+1)+this.points.length,yt=0,st=ce;yt<st.length;yt+=1){var _t=mt.points[st[yt]];if(!(_t.zoom<=ue)){_t.zoom=ue;var si=_t.numPoints||1;xe+=_t.x*si,Le+=_t.y*si,_t.parentId=Pe,ze&&(Me||(Me=this._map(Ne,!0)),ze(Me,this._map(_t)))}}Ne.parentId=Pe,pe.push(ht(xe/X,Le/X,Pe,X,Me))}else if(pe.push(Ne),X>1)for(var De=0,Yt=ce;De<Yt.length;De+=1){var hi=mt.points[Yt[De]];hi.zoom<=ue||(hi.zoom=ue,pe.push(hi))}}}return pe},ai.prototype._getOriginId=function(ne){return ne-this.points.length>>5},ai.prototype._getOriginZoom=function(ne){return(ne-this.points.length)%32},ai.prototype._map=function(ne,ue){if(ne.numPoints)return ue?zi({},ne.properties):ne.properties;var pe=this.points[ne.index].properties,Se=this.options.map(pe);return ue&&Se===pe?zi({},Se):Se},co.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},co.prototype.splitTile=function(ne,ue,pe,Se,ze,$e,tt){for(var Ie=[ne,ue,pe,Se],Ne=this.options,mt=Ne.debug;Ie.length;){Se=Ie.pop(),pe=Ie.pop(),ue=Ie.pop(),ne=Ie.pop();var ce=1<<ue,W=dn(ue,pe,Se),X=this.tiles[W];if(!X&&(mt>1&&console.time("creation"),X=this.tiles[W]=On(ne,ue,pe,Se,Ne),this.tileCoords.push({z:ue,x:pe,y:Se}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,pe,Se,X.numFeatures,X.numPoints,X.numSimplified),console.timeEnd("creation"));var le="z"+ue;this.stats[le]=(this.stats[le]||0)+1,this.total++}if(X.source=ne,ze){if(ue===Ne.maxZoom||ue===ze)continue;var me=1<<ze-ue;if(pe!==Math.floor($e/me)||Se!==Math.floor(tt/me))continue}else if(ue===Ne.indexMaxZoom||X.numPoints<=Ne.indexMaxPoints)continue;if(X.source=null,ne.length!==0){mt>1&&console.time("clipping");var Te,xe,Le,Me,Pe,yt,st=.5*Ne.buffer/Ne.extent,_t=.5-st,si=.5+st,De=1+st;Te=xe=Le=Me=null,Pe=zt(ne,ce,pe-st,pe+si,0,X.minX,X.maxX,Ne),yt=zt(ne,ce,pe+_t,pe+De,0,X.minX,X.maxX,Ne),ne=null,Pe&&(Te=zt(Pe,ce,Se-st,Se+si,1,X.minY,X.maxY,Ne),xe=zt(Pe,ce,Se+_t,Se+De,1,X.minY,X.maxY,Ne),Pe=null),yt&&(Le=zt(yt,ce,Se-st,Se+si,1,X.minY,X.maxY,Ne),Me=zt(yt,ce,Se+_t,Se+De,1,X.minY,X.maxY,Ne),yt=null),mt>1&&console.timeEnd("clipping"),Ie.push(Te||[],ue+1,2*pe,2*Se),Ie.push(xe||[],ue+1,2*pe,2*Se+1),Ie.push(Le||[],ue+1,2*pe+1,2*Se),Ie.push(Me||[],ue+1,2*pe+1,2*Se+1)}}},co.prototype.getTile=function(ne,ue,pe){var Se=this.options,ze=Se.extent,$e=Se.debug;if(ne<0||ne>24)return null;var tt=1<<ne,Ie=dn(ne,ue=(ue%tt+tt)%tt,pe);if(this.tiles[Ie])return Ar(this.tiles[Ie],ze);$e>1&&console.log("drilling down to z%d-%d-%d",ne,ue,pe);for(var Ne,mt=ne,ce=ue,W=pe;!Ne&&mt>0;)mt--,ce=Math.floor(ce/2),W=Math.floor(W/2),Ne=this.tiles[dn(mt,ce,W)];return Ne&&Ne.source?($e>1&&console.log("found parent tile z%d-%d-%d",mt,ce,W),$e>1&&console.time("drilling down"),this.splitTile(Ne.source,mt,ce,W,ne,ue,pe),$e>1&&console.timeEnd("drilling down"),this.tiles[Ie]?Ar(this.tiles[Ie],ze):null):null};var Io=function(ne){function ue(pe,Se,ze,$e){ne.call(this,pe,Se,ze,sa),$e&&(this.loadGeoJSON=$e)}return ne&&(ue.__proto__=ne),(ue.prototype=Object.create(ne&&ne.prototype)).constructor=ue,ue.prototype.loadData=function(pe,Se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Se,this._pendingLoadDataParams=pe,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ue.prototype._loadData=function(){var pe=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Se=this._pendingCallback,ze=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var $e=!!(ze&&ze.request&&ze.request.collectResourceTiming)&&new c.RequestPerformance(ze.request);this.loadGeoJSON(ze,function(tt,Ie){if(tt||!Ie)return Se(tt);if(typeof Ie!="object")return Se(new Error("Input data given to '"+ze.source+"' is not a valid GeoJSON object."));(function X(le,me){var Te,xe=le&&le.type;if(xe==="FeatureCollection")for(Te=0;Te<le.features.length;Te++)X(le.features[Te],me);else if(xe==="GeometryCollection")for(Te=0;Te<le.geometries.length;Te++)X(le.geometries[Te],me);else if(xe==="Feature")X(le.geometry,me);else if(xe==="Polygon")ve(le.coordinates,me);else if(xe==="MultiPolygon")for(Te=0;Te<le.coordinates.length;Te++)ve(le.coordinates[Te],me);return le})(Ie,!0);try{if(ze.filter){var Ne=c.createExpression(ze.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(function(X){return X.key+": "+X.message}).join(", "));var mt=Ie.features.filter(function(X){return Ne.value.evaluate({zoom:0},X)});Ie={type:"FeatureCollection",features:mt}}pe._geoJSONIndex=ze.cluster?new ai(function(X){var le=X.superclusterOptions,me=X.clusterProperties;if(!me||!le)return le;for(var Te={},xe={},Le={accumulated:null,zoom:0},Me={properties:null},Pe=Object.keys(me),yt=0,st=Pe;yt<st.length;yt+=1){var _t=st[yt],si=me[_t],De=si[0],Yt=c.createExpression(si[1]),hi=c.createExpression(typeof De=="string"?[De,["accumulated"],["get",_t]]:De);Te[_t]=Yt.value,xe[_t]=hi.value}return le.map=function(kn){Me.properties=kn;for(var Wi={},nn=0,Fi=Pe;nn<Fi.length;nn+=1){var Ii=Fi[nn];Wi[Ii]=Te[Ii].evaluate(Le,Me)}return Wi},le.reduce=function(kn,Wi){Me.properties=Wi;for(var nn=0,Fi=Pe;nn<Fi.length;nn+=1){var Ii=Fi[nn];Le.accumulated=kn[Ii],kn[Ii]=xe[Ii].evaluate(Le,Me)}},le}(ze)).load(Ie.features):function(X,le){return new co(X,le)}(Ie,ze.geojsonVtOptions)}catch(X){return Se(X)}pe.loaded={};var ce={};if($e){var W=$e.finish();W&&(ce.resourceTiming={},ce.resourceTiming[ze.source]=JSON.parse(JSON.stringify(W)))}Se(null,ce)})}},ue.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ue.prototype.reloadTile=function(pe,Se){var ze=this.loaded;return ze&&ze[pe.uid]?ne.prototype.reloadTile.call(this,pe,Se):this.loadTile(pe,Se)},ue.prototype.loadGeoJSON=function(pe,Se){if(pe.request)c.getJSON(pe.request,Se);else{if(typeof pe.data!="string")return Se(new Error("Input data given to '"+pe.source+"' is not a valid GeoJSON object."));try{return Se(null,JSON.parse(pe.data))}catch{return Se(new Error("Input data given to '"+pe.source+"' is not a valid GeoJSON object."))}}},ue.prototype.removeSource=function(pe,Se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Se()},ue.prototype.getClusterExpansionZoom=function(pe,Se){try{Se(null,this._geoJSONIndex.getClusterExpansionZoom(pe.clusterId))}catch(ze){Se(ze)}},ue.prototype.getClusterChildren=function(pe,Se){try{Se(null,this._geoJSONIndex.getChildren(pe.clusterId))}catch(ze){Se(ze)}},ue.prototype.getClusterLeaves=function(pe,Se){try{Se(null,this._geoJSONIndex.getLeaves(pe.clusterId,pe.limit,pe.offset))}catch(ze){Se(ze)}},ue}(ee),xr=function(ne){var ue=this;this.self=ne,this.actor=new c.Actor(ne,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ee,geojson:Io},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(pe,Se){if(ue.workerSourceTypes[pe])throw new Error('Worker source with name "'+pe+'" already registered.');ue.workerSourceTypes[pe]=Se},this.self.registerRTLTextPlugin=function(pe){if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=pe.applyArabicShaping,c.plugin.processBidirectionalText=pe.processBidirectionalText,c.plugin.processStyledBidirectionalText=pe.processStyledBidirectionalText}};return xr.prototype.setReferrer=function(ne,ue){this.referrer=ue},xr.prototype.setImages=function(ne,ue,pe){for(var Se in this.availableImages[ne]=ue,this.workerSources[ne]){var ze=this.workerSources[ne][Se];for(var $e in ze)ze[$e].availableImages=ue}pe()},xr.prototype.setLayers=function(ne,ue,pe){this.getLayerIndex(ne).replace(ue),pe()},xr.prototype.updateLayers=function(ne,ue,pe){this.getLayerIndex(ne).update(ue.layers,ue.removedIds),pe()},xr.prototype.loadTile=function(ne,ue,pe){this.getWorkerSource(ne,ue.type,ue.source).loadTile(ue,pe)},xr.prototype.loadDEMTile=function(ne,ue,pe){this.getDEMWorkerSource(ne,ue.source).loadTile(ue,pe)},xr.prototype.reloadTile=function(ne,ue,pe){this.getWorkerSource(ne,ue.type,ue.source).reloadTile(ue,pe)},xr.prototype.abortTile=function(ne,ue,pe){this.getWorkerSource(ne,ue.type,ue.source).abortTile(ue,pe)},xr.prototype.removeTile=function(ne,ue,pe){this.getWorkerSource(ne,ue.type,ue.source).removeTile(ue,pe)},xr.prototype.removeDEMTile=function(ne,ue){this.getDEMWorkerSource(ne,ue.source).removeTile(ue)},xr.prototype.removeSource=function(ne,ue,pe){if(this.workerSources[ne]&&this.workerSources[ne][ue.type]&&this.workerSources[ne][ue.type][ue.source]){var Se=this.workerSources[ne][ue.type][ue.source];delete this.workerSources[ne][ue.type][ue.source],Se.removeSource!==void 0?Se.removeSource(ue,pe):pe()}},xr.prototype.loadWorkerSource=function(ne,ue,pe){try{this.self.importScripts(ue.url),pe()}catch(Se){pe(Se.toString())}},xr.prototype.syncRTLPluginState=function(ne,ue,pe){try{c.plugin.setState(ue);var Se=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&Se!=null){this.self.importScripts(Se);var ze=c.plugin.isParsed();pe(ze?void 0:new Error("RTL Text Plugin failed to import scripts from "+Se),ze)}}catch($e){pe($e.toString())}},xr.prototype.getAvailableImages=function(ne){var ue=this.availableImages[ne];return ue||(ue=[]),ue},xr.prototype.getLayerIndex=function(ne){var ue=this.layerIndexes[ne];return ue||(ue=this.layerIndexes[ne]=new P),ue},xr.prototype.getWorkerSource=function(ne,ue,pe){var Se=this;return this.workerSources[ne]||(this.workerSources[ne]={}),this.workerSources[ne][ue]||(this.workerSources[ne][ue]={}),this.workerSources[ne][ue][pe]||(this.workerSources[ne][ue][pe]=new this.workerSourceTypes[ue]({send:function(ze,$e,tt){Se.actor.send(ze,$e,tt,ne)}},this.getLayerIndex(ne),this.getAvailableImages(ne))),this.workerSources[ne][ue][pe]},xr.prototype.getDEMWorkerSource=function(ne,ue){return this.demWorkerSources[ne]||(this.demWorkerSources[ne]={}),this.demWorkerSources[ne][ue]||(this.demWorkerSources[ne][ue]=new re),this.demWorkerSources[ne][ue]},xr.prototype.enforceCacheSizeLimit=function(ne,ue){c.enforceCacheSizeLimit(ue)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new xr(self)),xr}),v(["./shared"],function(c){var h=c.createCommonjsModule(function(p){function y(L){return!g(L)}function g(L){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var N,H,Q=new Blob([""],{type:"text/javascript"}),oe=URL.createObjectURL(Q);try{H=new Worker(oe),N=!0}catch{N=!1}return H&&H.terminate(),URL.revokeObjectURL(oe),N}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var N=document.createElement("canvas");N.width=N.height=1;var H=N.getContext("2d");if(!H)return!1;var Q=H.getImageData(0,0,1,1);return Q&&Q.width===N.width}()?(w[F=L&&L.failIfMajorPerformanceCaveat]===void 0&&(w[F]=function(N){var H=function(oe){var ye=document.createElement("canvas"),be=Object.create(y.webGLContextAttributes);return be.failIfMajorPerformanceCaveat=oe,ye.probablySupportsContext?ye.probablySupportsContext("webgl",be)||ye.probablySupportsContext("experimental-webgl",be):ye.supportsContext?ye.supportsContext("webgl",be)||ye.supportsContext("experimental-webgl",be):ye.getContext("webgl",be)||ye.getContext("experimental-webgl",be)}(N);if(!H)return!1;var Q=H.createShader(H.VERTEX_SHADER);return!(!Q||H.isContextLost())&&(H.shaderSource(Q,"void main() {}"),H.compileShader(Q),H.getShaderParameter(Q,H.COMPILE_STATUS)===!0)}(F)),w[F]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var F}p.exports?p.exports=y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=y,window.mapboxgl.notSupportedReason=g);var w={};y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),S={create:function(p,y,g){var w=c.window.document.createElement(p);return y!==void 0&&(w.className=y),g&&g.appendChild(w),w},createNS:function(p,y){return c.window.document.createElementNS(p,y)}},P=c.window.document&&c.window.document.documentElement.style;function D(p){if(!P)return p[0];for(var y=0;y<p.length;y++)if(p[y]in P)return p[y];return p[0]}var R,O=D(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);S.disableDrag=function(){P&&O&&(R=P[O],P[O]="none")},S.enableDrag=function(){P&&O&&(P[O]=R)};var Y=D(["transform","WebkitTransform"]);S.setTransform=function(p,y){p.style[Y]=y};var ee=!1;try{var he=Object.defineProperty({},"passive",{get:function(){ee=!0}});c.window.addEventListener("test",he,he),c.window.removeEventListener("test",he,he)}catch{ee=!1}S.addEventListener=function(p,y,g,w){w===void 0&&(w={}),p.addEventListener(y,g,"passive"in w&&ee?w:w.capture)},S.removeEventListener=function(p,y,g,w){w===void 0&&(w={}),p.removeEventListener(y,g,"passive"in w&&ee?w:w.capture)};var re=function(p){p.preventDefault(),p.stopPropagation(),c.window.removeEventListener("click",re,!0)};function ve(p){var y=p.userImage;return!!(y&&y.render&&y.render())&&(p.data.replace(new Uint8Array(y.data.buffer)),!0)}S.suppressClick=function(){c.window.addEventListener("click",re,!0),c.window.setTimeout(function(){c.window.removeEventListener("click",re,!0)},0)},S.mousePos=function(p,y){var g=p.getBoundingClientRect();return new c.Point(y.clientX-g.left-p.clientLeft,y.clientY-g.top-p.clientTop)},S.touchPos=function(p,y){for(var g=p.getBoundingClientRect(),w=[],L=0;L<y.length;L++)w.push(new c.Point(y[L].clientX-g.left-p.clientLeft,y[L].clientY-g.top-p.clientTop));return w},S.mouseButton=function(p){return c.window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&c.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button},S.remove=function(p){p.parentNode&&p.parentNode.removeChild(p)};var se=function(p){function y(){p.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.isLoaded=function(){return this.loaded},y.prototype.setLoaded=function(g){if(this.loaded!==g&&(this.loaded=g,g)){for(var w=0,L=this.requestors;w<L.length;w+=1){var F=L[w];this._notify(F.ids,F.callback)}this.requestors=[]}},y.prototype.getImage=function(g){return this.images[g]},y.prototype.addImage=function(g,w){this._validate(g,w)&&(this.images[g]=w)},y.prototype._validate=function(g,w){var L=!0;return this._validateStretch(w.stretchX,w.data&&w.data.width)||(this.fire(new c.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchX" value'))),L=!1),this._validateStretch(w.stretchY,w.data&&w.data.height)||(this.fire(new c.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchY" value'))),L=!1),this._validateContent(w.content,w)||(this.fire(new c.ErrorEvent(new Error('Image "'+g+'" has invalid "content" value'))),L=!1),L},y.prototype._validateStretch=function(g,w){if(!g)return!0;for(var L=0,F=0,N=g;F<N.length;F+=1){var H=N[F];if(H[0]<L||H[1]<H[0]||w<H[1])return!1;L=H[1]}return!0},y.prototype._validateContent=function(g,w){return!(g&&(g.length!==4||g[0]<0||w.data.width<g[0]||g[1]<0||w.data.height<g[1]||g[2]<0||w.data.width<g[2]||g[3]<0||w.data.height<g[3]||g[2]<g[0]||g[3]<g[1]))},y.prototype.updateImage=function(g,w){w.version=this.images[g].version+1,this.images[g]=w,this.updatedImages[g]=!0},y.prototype.removeImage=function(g){var w=this.images[g];delete this.images[g],delete this.patterns[g],w.userImage&&w.userImage.onRemove&&w.userImage.onRemove()},y.prototype.listImages=function(){return Object.keys(this.images)},y.prototype.getImages=function(g,w){var L=!0;if(!this.isLoaded())for(var F=0,N=g;F<N.length;F+=1)this.images[N[F]]||(L=!1);this.isLoaded()||L?this._notify(g,w):this.requestors.push({ids:g,callback:w})},y.prototype._notify=function(g,w){for(var L={},F=0,N=g;F<N.length;F+=1){var H=N[F];this.images[H]||this.fire(new c.Event("styleimagemissing",{id:H}));var Q=this.images[H];Q?L[H]={data:Q.data.clone(),pixelRatio:Q.pixelRatio,sdf:Q.sdf,version:Q.version,stretchX:Q.stretchX,stretchY:Q.stretchY,content:Q.content,hasRenderCallback:Boolean(Q.userImage&&Q.userImage.render)}:c.warnOnce('Image "'+H+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}w(null,L)},y.prototype.getPixelSize=function(){var g=this.atlasImage;return{width:g.width,height:g.height}},y.prototype.getPattern=function(g){var w=this.patterns[g],L=this.getImage(g);if(!L)return null;if(w&&w.position.version===L.version)return w.position;if(w)w.position.version=L.version;else{var F={w:L.data.width+2,h:L.data.height+2,x:0,y:0},N=new c.ImagePosition(F,L);this.patterns[g]={bin:F,position:N}}return this._updatePatternAtlas(),this.patterns[g].position},y.prototype.bind=function(g){var w=g.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.Texture(g,this.atlasImage,w.RGBA),this.atlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE)},y.prototype._updatePatternAtlas=function(){var g=[];for(var w in this.patterns)g.push(this.patterns[w].bin);var L=c.potpack(g),F=L.w,N=L.h,H=this.atlasImage;for(var Q in H.resize({width:F||1,height:N||1}),this.patterns){var oe=this.patterns[Q].bin,ye=oe.x+1,be=oe.y+1,Ee=this.images[Q].data,Be=Ee.width,Re=Ee.height;c.RGBAImage.copy(Ee,H,{x:0,y:0},{x:ye,y:be},{width:Be,height:Re}),c.RGBAImage.copy(Ee,H,{x:0,y:Re-1},{x:ye,y:be-1},{width:Be,height:1}),c.RGBAImage.copy(Ee,H,{x:0,y:0},{x:ye,y:be+Re},{width:Be,height:1}),c.RGBAImage.copy(Ee,H,{x:Be-1,y:0},{x:ye-1,y:be},{width:1,height:Re}),c.RGBAImage.copy(Ee,H,{x:0,y:0},{x:ye+Be,y:be},{width:1,height:Re})}this.dirty=!0},y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},y.prototype.dispatchRenderCallbacks=function(g){for(var w=0,L=g;w<L.length;w+=1){var F=L[w];if(!this.callbackDispatchedThisFrame[F]){this.callbackDispatchedThisFrame[F]=!0;var N=this.images[F];ve(N)&&this.updateImage(F,N)}}},y}(c.Evented),we=He,Ge=He,Ue=1e20;function He(p,y,g,w,L,F){this.fontSize=p||24,this.buffer=y===void 0?3:y,this.cutoff=w||.25,this.fontFamily=L||"sans-serif",this.fontWeight=F||"normal",this.radius=g||8;var N=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=N,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.d=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Int16Array(N),this.middle=Math.round(N/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function fe(p,y,g,w,L,F,N){for(var H=0;H<y;H++){for(var Q=0;Q<g;Q++)w[Q]=p[Q*y+H];for(ut(w,L,F,N,g),Q=0;Q<g;Q++)p[Q*y+H]=L[Q]}for(Q=0;Q<g;Q++){for(H=0;H<y;H++)w[H]=p[Q*y+H];for(ut(w,L,F,N,y),H=0;H<y;H++)p[Q*y+H]=Math.sqrt(L[H])}}function ut(p,y,g,w,L){g[0]=0,w[0]=-Ue,w[1]=+Ue;for(var F=1,N=0;F<L;F++){for(var H=(p[F]+F*F-(p[g[N]]+g[N]*g[N]))/(2*F-2*g[N]);H<=w[N];)N--,H=(p[F]+F*F-(p[g[N]]+g[N]*g[N]))/(2*F-2*g[N]);g[++N]=F,w[N]=H,w[N+1]=+Ue}for(F=0,N=0;F<L;F++){for(;w[N+1]<F;)N++;y[F]=(F-g[N])*(F-g[N])+p[g[N]]}}He.prototype.draw=function(p){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(p,this.buffer,this.middle);for(var y=this.ctx.getImageData(0,0,this.size,this.size),g=new Uint8ClampedArray(this.size*this.size),w=0;w<this.size*this.size;w++){var L=y.data[4*w+3]/255;this.gridOuter[w]=L===1?0:L===0?Ue:Math.pow(Math.max(0,.5-L),2),this.gridInner[w]=L===1?Ue:L===0?0:Math.pow(Math.max(0,L-.5),2)}for(fe(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),fe(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),w=0;w<this.size*this.size;w++)g[w]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[w]-this.gridInner[w])/this.radius+this.cutoff))));return g},we.default=Ge;var at=function(p,y){this.requestManager=p,this.localIdeographFontFamily=y,this.entries={}};at.prototype.setURL=function(p){this.url=p},at.prototype.getGlyphs=function(p,y){var g=this,w=[];for(var L in p)for(var F=0,N=p[L];F<N.length;F+=1)w.push({stack:L,id:N[F]});c.asyncAll(w,function(H,Q){var oe=H.stack,ye=H.id,be=g.entries[oe];be||(be=g.entries[oe]={glyphs:{},requests:{},ranges:{}});var Ee=be.glyphs[ye];if(Ee===void 0){if(Ee=g._tinySDF(be,oe,ye))return be.glyphs[ye]=Ee,void Q(null,{stack:oe,id:ye,glyph:Ee});var Be=Math.floor(ye/256);if(256*Be>65535)Q(new Error("glyphs > 65535 not supported"));else if(be.ranges[Be])Q(null,{stack:oe,id:ye,glyph:Ee});else{var Re=be.requests[Be];Re||(Re=be.requests[Be]=[],at.loadGlyphRange(oe,Be,g.url,g.requestManager,function(We,Ce){if(Ce){for(var Ve in Ce)g._doesCharSupportLocalGlyph(+Ve)||(be.glyphs[+Ve]=Ce[+Ve]);be.ranges[Be]=!0}for(var et=0,dt=Re;et<dt.length;et+=1)(0,dt[et])(We,Ce);delete be.requests[Be]})),Re.push(function(We,Ce){We?Q(We):Ce&&Q(null,{stack:oe,id:ye,glyph:Ce[ye]||null})})}}else Q(null,{stack:oe,id:ye,glyph:Ee})},function(H,Q){if(H)y(H);else if(Q){for(var oe={},ye=0,be=Q;ye<be.length;ye+=1){var Ee=be[ye],Be=Ee.stack,Re=Ee.id,We=Ee.glyph;(oe[Be]||(oe[Be]={}))[Re]=We&&{id:We.id,bitmap:We.bitmap.clone(),metrics:We.metrics}}y(null,oe)}})},at.prototype._doesCharSupportLocalGlyph=function(p){return!!this.localIdeographFontFamily&&(c.isChar["CJK Unified Ideographs"](p)||c.isChar["Hangul Syllables"](p)||c.isChar.Hiragana(p)||c.isChar.Katakana(p))},at.prototype._tinySDF=function(p,y,g){var w=this.localIdeographFontFamily;if(w&&this._doesCharSupportLocalGlyph(g)){var L=p.tinySDF;if(!L){var F="400";/bold/i.test(y)?F="900":/medium/i.test(y)?F="500":/light/i.test(y)&&(F="200"),L=p.tinySDF=new at.TinySDF(24,3,8,.25,w,F)}return{id:g,bitmap:new c.AlphaImage({width:30,height:30},L.draw(String.fromCharCode(g))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},at.loadGlyphRange=function(p,y,g,w,L){var F=256*y,N=F+255,H=w.transformRequest(w.normalizeGlyphsURL(g).replace("{fontstack}",p).replace("{range}",F+"-"+N),c.ResourceType.Glyphs);c.getArrayBuffer(H,function(Q,oe){if(Q)L(Q);else if(oe){for(var ye={},be=0,Ee=c.parseGlyphPBF(oe);be<Ee.length;be+=1){var Be=Ee[be];ye[Be.id]=Be}L(null,ye)}})},at.TinySDF=we;var je=function(){this.specification=c.styleSpec.light.position};je.prototype.possiblyEvaluate=function(p,y){return c.sphericalToCartesian(p.expression.evaluate(y))},je.prototype.interpolate=function(p,y,g){return{x:c.number(p.x,y.x,g),y:c.number(p.y,y.y,g),z:c.number(p.z,y.z,g)}};var Fe=new c.Properties({anchor:new c.DataConstantProperty(c.styleSpec.light.anchor),position:new je,color:new c.DataConstantProperty(c.styleSpec.light.color),intensity:new c.DataConstantProperty(c.styleSpec.light.intensity)}),Dt=function(p){function y(g){p.call(this),this._transitionable=new c.Transitionable(Fe),this.setLight(g),this._transitioning=this._transitionable.untransitioned()}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getLight=function(){return this._transitionable.serialize()},y.prototype.setLight=function(g,w){if(w===void 0&&(w={}),!this._validate(c.validateLight,g,w))for(var L in g){var F=g[L];c.endsWith(L,"-transition")?this._transitionable.setTransition(L.slice(0,-11),F):this._transitionable.setValue(L,F)}},y.prototype.updateTransitions=function(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)},y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},y.prototype.recalculate=function(g){this.properties=this._transitioning.possiblyEvaluate(g)},y.prototype._validate=function(g,w,L){return(!L||L.validate!==!1)&&c.emitValidationErrors(this,g.call(c.validateStyle,c.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:c.styleSpec})))},y}(c.Evented),qe=function(p,y){this.width=p,this.height=y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};qe.prototype.getDash=function(p,y){var g=p.join(",")+String(y);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(p,y)),this.dashEntry[g]},qe.prototype.getDashRanges=function(p,y,g){var w=[],L=p.length%2==1?-p[p.length-1]*g:0,F=p[0]*g,N=!0;w.push({left:L,right:F,isDash:N,zeroLength:p[0]===0});for(var H=p[0],Q=1;Q<p.length;Q++){var oe=p[Q];w.push({left:L=H*g,right:F=(H+=oe)*g,isDash:N=!N,zeroLength:oe===0})}return w},qe.prototype.addRoundDash=function(p,y,g){for(var w=y/2,L=-g;L<=g;L++)for(var F=this.width*(this.nextRow+g+L),N=0,H=p[N],Q=0;Q<this.width;Q++){Q/H.right>1&&(H=p[++N]);var oe=Math.abs(Q-H.left),ye=Math.abs(Q-H.right),be=Math.min(oe,ye),Ee=void 0,Be=L/g*(w+1);if(H.isDash){var Re=w-Math.abs(Be);Ee=Math.sqrt(be*be+Re*Re)}else Ee=w-Math.sqrt(be*be+Be*Be);this.data[F+Q]=Math.max(0,Math.min(255,Ee+128))}},qe.prototype.addRegularDash=function(p){for(var y=p.length-1;y>=0;--y){var g=p[y],w=p[y+1];g.zeroLength?p.splice(y,1):w&&w.isDash===g.isDash&&(w.left=g.left,p.splice(y,1))}var L=p[0],F=p[p.length-1];L.isDash===F.isDash&&(L.left=F.left-this.width,F.right=L.right+this.width);for(var N=this.width*this.nextRow,H=0,Q=p[H],oe=0;oe<this.width;oe++){oe/Q.right>1&&(Q=p[++H]);var ye=Math.abs(oe-Q.left),be=Math.abs(oe-Q.right),Ee=Math.min(ye,be);this.data[N+oe]=Math.max(0,Math.min(255,(Q.isDash?Ee:-Ee)+128))}},qe.prototype.addDash=function(p,y){var g=y?7:0,w=2*g+1;if(this.nextRow+w>this.height)return c.warnOnce("LineAtlas out of space"),null;for(var L=0,F=0;F<p.length;F++)L+=p[F];if(L!==0){var N=this.width/L,H=this.getDashRanges(p,this.width,N);y?this.addRoundDash(H,N,g):this.addRegularDash(H)}var Q={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:L};return this.nextRow+=w,this.dirty=!0,Q},qe.prototype.bind=function(p){var y=p.gl;this.texture?(y.bindTexture(y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,y.texSubImage2D(y.TEXTURE_2D,0,0,0,this.width,this.height,y.ALPHA,y.UNSIGNED_BYTE,this.data))):(this.texture=y.createTexture(),y.bindTexture(y.TEXTURE_2D,this.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texImage2D(y.TEXTURE_2D,0,y.ALPHA,this.width,this.height,0,y.ALPHA,y.UNSIGNED_BYTE,this.data))};var Mt=function p(y,g){this.workerPool=y,this.actors=[],this.currentActor=0,this.id=c.uniqueId();for(var w=this.workerPool.acquire(this.id),L=0;L<w.length;L++){var F=new p.Actor(w[L],g,this.id);F.name="Worker "+L,this.actors.push(F)}};function li(p,y,g){var w=function(L,F){if(L)return g(L);if(F){var N=c.pick(c.extend(F,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);F.vector_layers&&(N.vectorLayers=F.vector_layers,N.vectorLayerIds=N.vectorLayers.map(function(H){return H.id})),N.tiles=y.canonicalizeTileset(N,p.url),g(null,N)}};return p.url?c.getJSON(y.transformRequest(y.normalizeSourceURL(p.url),c.ResourceType.Source),w):c.browser.frame(function(){return w(null,p)})}Mt.prototype.broadcast=function(p,y,g){c.asyncAll(this.actors,function(w,L){w.send(p,y,L)},g=g||function(){})},Mt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Mt.prototype.remove=function(){this.actors.forEach(function(p){p.remove()}),this.actors=[],this.workerPool.release(this.id)},Mt.Actor=c.Actor;var Et=function(p,y,g){this.bounds=c.LngLatBounds.convert(this.validateBounds(p)),this.minzoom=y||0,this.maxzoom=g||24};Et.prototype.validateBounds=function(p){return Array.isArray(p)&&p.length===4?[Math.max(-180,p[0]),Math.max(-90,p[1]),Math.min(180,p[2]),Math.min(90,p[3])]:[-180,-90,180,90]},Et.prototype.contains=function(p){var y=Math.pow(2,p.z),g=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*y),w=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*y),L=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*y),F=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*y);return p.x>=g&&p.x<L&&p.y>=w&&p.y<F};var Gt=function(p){function y(g,w,L,F){if(p.call(this),this.id=g,this.dispatcher=L,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(w,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},w),this._collectResourceTiming=w.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(F)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=li(this._options,this.map._requestManager,function(w,L){g._tileJSONRequest=null,g._loaded=!0,w?g.fire(new c.ErrorEvent(w)):L&&(c.extend(g,L),L.bounds&&(g.tileBounds=new Et(L.bounds,g.minzoom,g.maxzoom)),c.postTurnstileEvent(L.tiles,g.map._requestManager._customAccessToken),c.postMapLoadEvent(L.tiles,g.map._getMapId(),g.map._requestManager._skuToken,g.map._requestManager._customAccessToken),g.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})},y.prototype.loaded=function(){return this._loaded},y.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.setSourceProperty=function(g){this._tileJSONRequest&&this._tileJSONRequest.cancel(),g(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},y.prototype.setTiles=function(g){var w=this;return this.setSourceProperty(function(){w._options.tiles=g}),this},y.prototype.setUrl=function(g){var w=this;return this.setSourceProperty(function(){w.url=g,w._options.url=g}),this},y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},y.prototype.serialize=function(){return c.extend({},this._options)},y.prototype.loadTile=function(g,w){var L=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme)),F={request:this.map._requestManager.transformRequest(L,c.ResourceType.Tile),uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,tileSize:this.tileSize*g.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:c.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function N(H,Q){return delete g.request,g.aborted?w(null):H&&H.status!==404?w(H):(Q&&Q.resourceTiming&&(g.resourceTiming=Q.resourceTiming),this.map._refreshExpiredTiles&&Q&&g.setExpiryData(Q),g.loadVectorData(Q,this.map.painter),c.cacheEntryPossiblyAdded(this.dispatcher),w(null),void(g.reloadCallback&&(this.loadTile(g,g.reloadCallback),g.reloadCallback=null)))}F.request.collectResourceTiming=this._collectResourceTiming,g.actor&&g.state!=="expired"?g.state==="loading"?g.reloadCallback=w:g.request=g.actor.send("reloadTile",F,N.bind(this)):(g.actor=this.dispatcher.getActor(),g.request=g.actor.send("loadTile",F,N.bind(this)))},y.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.actor&&g.actor.send("abortTile",{uid:g.uid,type:this.type,source:this.id},void 0)},y.prototype.unloadTile=function(g){g.unloadVectorData(),g.actor&&g.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id},void 0)},y.prototype.hasTransition=function(){return!1},y}(c.Evented),Je=function(p){function y(g,w,L,F){p.call(this),this.id=g,this.dispatcher=L,this.setEventedParent(F),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},w),c.extend(this,c.pick(w,["url","scheme","tileSize"]))}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=li(this._options,this.map._requestManager,function(w,L){g._tileJSONRequest=null,g._loaded=!0,w?g.fire(new c.ErrorEvent(w)):L&&(c.extend(g,L),L.bounds&&(g.tileBounds=new Et(L.bounds,g.minzoom,g.maxzoom)),c.postTurnstileEvent(L.tiles),c.postMapLoadEvent(L.tiles,g.map._getMapId(),g.map._requestManager._skuToken),g.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})},y.prototype.loaded=function(){return this._loaded},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},y.prototype.serialize=function(){return c.extend({},this._options)},y.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},y.prototype.loadTile=function(g,w){var L=this,F=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);g.request=c.getImage(this.map._requestManager.transformRequest(F,c.ResourceType.Tile),function(N,H){if(delete g.request,g.aborted)g.state="unloaded",w(null);else if(N)g.state="errored",w(N);else if(H){L.map._refreshExpiredTiles&&g.setExpiryData(H),delete H.cacheControl,delete H.expires;var Q=L.map.painter.context,oe=Q.gl;g.texture=L.map.painter.getTileTexture(H.width),g.texture?g.texture.update(H,{useMipmap:!0}):(g.texture=new c.Texture(Q,H,oe.RGBA,{useMipmap:!0}),g.texture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),Q.extTextureFilterAnisotropic&&oe.texParameterf(oe.TEXTURE_2D,Q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Q.extTextureFilterAnisotropicMax)),g.state="loaded",c.cacheEntryPossiblyAdded(L.dispatcher),w(null)}})},y.prototype.abortTile=function(g,w){g.request&&(g.request.cancel(),delete g.request),w()},y.prototype.unloadTile=function(g,w){g.texture&&this.map.painter.saveTileTexture(g.texture),w()},y.prototype.hasTransition=function(){return!1},y}(c.Evented),wt=function(p){function y(g,w,L,F){p.call(this,g,w,L,F),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},w),this.encoding=w.encoding||"mapbox"}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},y.prototype.loadTile=function(g,w){var L=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function F(N,H){N&&(g.state="errored",w(N)),H&&(g.dem=H,g.needsHillshadePrepare=!0,g.state="loaded",w(null))}g.request=c.getImage(this.map._requestManager.transformRequest(L,c.ResourceType.Tile),function(N,H){if(delete g.request,g.aborted)g.state="unloaded",w(null);else if(N)g.state="errored",w(N);else if(H){this.map._refreshExpiredTiles&&g.setExpiryData(H),delete H.cacheControl,delete H.expires;var Q=c.window.ImageBitmap&&H instanceof c.window.ImageBitmap&&c.offscreenCanvasSupported()?H:c.browser.getImageData(H,1),oe={uid:g.uid,coord:g.tileID,source:this.id,rawImageData:Q,encoding:this.encoding};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",oe,F.bind(this)))}}.bind(this)),g.neighboringTiles=this._getNeighboringTiles(g.tileID)},y.prototype._getNeighboringTiles=function(g){var w=g.canonical,L=Math.pow(2,w.z),F=(w.x-1+L)%L,N=w.x===0?g.wrap-1:g.wrap,H=(w.x+1+L)%L,Q=w.x+1===L?g.wrap+1:g.wrap,oe={};return oe[new c.OverscaledTileID(g.overscaledZ,N,w.z,F,w.y).key]={backfilled:!1},oe[new c.OverscaledTileID(g.overscaledZ,Q,w.z,H,w.y).key]={backfilled:!1},w.y>0&&(oe[new c.OverscaledTileID(g.overscaledZ,N,w.z,F,w.y-1).key]={backfilled:!1},oe[new c.OverscaledTileID(g.overscaledZ,g.wrap,w.z,w.x,w.y-1).key]={backfilled:!1},oe[new c.OverscaledTileID(g.overscaledZ,Q,w.z,H,w.y-1).key]={backfilled:!1}),w.y+1<L&&(oe[new c.OverscaledTileID(g.overscaledZ,N,w.z,F,w.y+1).key]={backfilled:!1},oe[new c.OverscaledTileID(g.overscaledZ,g.wrap,w.z,w.x,w.y+1).key]={backfilled:!1},oe[new c.OverscaledTileID(g.overscaledZ,Q,w.z,H,w.y+1).key]={backfilled:!1}),oe},y.prototype.unloadTile=function(g){g.demTexture&&this.map.painter.saveTileTexture(g.demTexture),g.fbo&&(g.fbo.destroy(),delete g.fbo),g.dem&&delete g.dem,delete g.neighboringTiles,g.state="unloaded",g.actor&&g.actor.send("removeDEMTile",{uid:g.uid,source:this.id})},y}(Je),Pt=function(p){function y(g,w,L,F){p.call(this),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=L.getActor(),this.setEventedParent(F),this._data=w.data,this._options=c.extend({},w),this._collectResourceTiming=w.collectResourceTiming,this._resourceTiming=[],w.maxzoom!==void 0&&(this.maxzoom=w.maxzoom),w.type&&(this.type=w.type),w.attribution&&(this.attribution=w.attribution),this.promoteId=w.promoteId;var N=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:w.cluster||!1,geojsonVtOptions:{buffer:(w.buffer!==void 0?w.buffer:128)*N,tolerance:(w.tolerance!==void 0?w.tolerance:.375)*N,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:w.lineMetrics||!1,generateId:w.generateId||!1},superclusterOptions:{maxZoom:w.clusterMaxZoom!==void 0?Math.min(w.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,w.clusterMinPoints||2),extent:c.EXTENT,radius:(w.clusterRadius||50)*N,log:!1,generateId:w.generateId||!1},clusterProperties:w.clusterProperties,filter:w.filter},w.workerOptions)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(){var g=this;this.fire(new c.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(w){if(w)g.fire(new c.ErrorEvent(w));else{var L={dataType:"source",sourceDataType:"metadata"};g._collectResourceTiming&&g._resourceTiming&&g._resourceTiming.length>0&&(L.resourceTiming=g._resourceTiming,g._resourceTiming=[]),g.fire(new c.Event("data",L))}})},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.setData=function(g){var w=this;return this._data=g,this.fire(new c.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(L){if(L)w.fire(new c.ErrorEvent(L));else{var F={dataType:"source",sourceDataType:"content"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(F.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new c.Event("data",F))}}),this},y.prototype.getClusterExpansionZoom=function(g,w){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id},w),this},y.prototype.getClusterChildren=function(g,w){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id},w),this},y.prototype.getClusterLeaves=function(g,w,L,F){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:g,limit:w,offset:L},F),this},y.prototype._updateWorkerData=function(g){var w=this;this._loaded=!1;var L=c.extend({},this.workerOptions),F=this._data;typeof F=="string"?(L.request=this.map._requestManager.transformRequest(c.browser.resolveURL(F),c.ResourceType.Source),L.request.collectResourceTiming=this._collectResourceTiming):L.data=JSON.stringify(F),this.actor.send(this.type+".loadData",L,function(N,H){w._removed||H&&H.abandoned||(w._loaded=!0,H&&H.resourceTiming&&H.resourceTiming[w.id]&&(w._resourceTiming=H.resourceTiming[w.id].slice(0)),w.actor.send(w.type+".coalesce",{source:L.source},null),g(N))})},y.prototype.loaded=function(){return this._loaded},y.prototype.loadTile=function(g,w){var L=this,F=g.actor?"reloadTile":"loadTile";g.actor=this.actor,g.request=this.actor.send(F,{type:this.type,uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:c.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(N,H){return delete g.request,g.unloadVectorData(),g.aborted?w(null):N?w(N):(g.loadVectorData(H,L.map.painter,F==="reloadTile"),w(null))})},y.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0},y.prototype.unloadTile=function(g){g.unloadVectorData(),this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id})},y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},y.prototype.serialize=function(){return c.extend({},this._options,{type:this.type,data:this._data})},y.prototype.hasTransition=function(){return!1},y}(c.Evented),ni=c.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Xt=function(p){function y(g,w,L,F){p.call(this),this.id=g,this.dispatcher=L,this.coordinates=w.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(F),this.options=w}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(g,w){var L=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,c.getImage(this.map._requestManager.transformRequest(this.url,c.ResourceType.Image),function(F,N){L._loaded=!0,F?L.fire(new c.ErrorEvent(F)):N&&(L.image=N,g&&(L.coordinates=g),w&&w(),L._finishLoading())})},y.prototype.loaded=function(){return this._loaded},y.prototype.updateImage=function(g){var w=this;return this.image&&g.url?(this.options.url=g.url,this.load(g.coordinates,function(){w.texture=null}),this):this},y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))},y.prototype.onAdd=function(g){this.map=g,this.load()},y.prototype.setCoordinates=function(g){var w=this;this.coordinates=g;var L=g.map(c.MercatorCoordinate.fromLngLat);this.tileID=function(N){for(var H=1/0,Q=1/0,oe=-1/0,ye=-1/0,be=0,Ee=N;be<Ee.length;be+=1){var Be=Ee[be];H=Math.min(H,Be.x),Q=Math.min(Q,Be.y),oe=Math.max(oe,Be.x),ye=Math.max(ye,Be.y)}var Re=Math.max(oe-H,ye-Q),We=Math.max(0,Math.floor(-Math.log(Re)/Math.LN2)),Ce=Math.pow(2,We);return new c.CanonicalTileID(We,Math.floor((H+oe)/2*Ce),Math.floor((Q+ye)/2*Ce))}(L),this.minzoom=this.maxzoom=this.tileID.z;var F=L.map(function(N){return w.tileID.getTilePoint(N)._round()});return this._boundsArray=new c.StructArrayLayout4i8,this._boundsArray.emplaceBack(F[0].x,F[0].y,0,0),this._boundsArray.emplaceBack(F[1].x,F[1].y,c.EXTENT,0),this._boundsArray.emplaceBack(F[3].x,F[3].y,0,c.EXTENT),this._boundsArray.emplaceBack(F[2].x,F[2].y,c.EXTENT,c.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this},y.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var g=this.map.painter.context,w=g.gl;for(var L in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,ni.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new c.Texture(g,this.image,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE)),this.tiles){var F=this.tiles[L];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}},y.prototype.loadTile=function(g,w){this.tileID&&this.tileID.equals(g.tileID.canonical)?(this.tiles[String(g.tileID.wrap)]=g,g.buckets={},w(null)):(g.state="errored",w(null))},y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},y.prototype.hasTransition=function(){return!1},y}(c.Evented),Xi=function(p){function y(g,w,L,F){p.call(this,g,w,L,F),this.roundZoom=!0,this.type="video",this.options=w}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(){var g=this;this._loaded=!1;var w=this.options;this.urls=[];for(var L=0,F=w.urls;L<F.length;L+=1)this.urls.push(this.map._requestManager.transformRequest(F[L],c.ResourceType.Source).url);c.getVideo(this.urls,function(N,H){g._loaded=!0,N?g.fire(new c.ErrorEvent(N)):H&&(g.video=H,g.video.loop=!0,g.video.addEventListener("playing",function(){g.map.triggerRepaint()}),g.map&&g.video.play(),g._finishLoading())})},y.prototype.pause=function(){this.video&&this.video.pause()},y.prototype.play=function(){this.video&&this.video.play()},y.prototype.seek=function(g){if(this.video){var w=this.video.seekable;g<w.start(0)||g>w.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+w.start(0)+" and "+w.end(0)+"-second mark."))):this.video.currentTime=g}},y.prototype.getVideo=function(){return this.video},y.prototype.onAdd=function(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var g=this.map.painter.context,w=g.gl;for(var L in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,ni.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE),w.texSubImage2D(w.TEXTURE_2D,0,0,0,w.RGBA,w.UNSIGNED_BYTE,this.video)):(this.texture=new c.Texture(g,this.video,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE)),this.tiles){var F=this.tiles[L];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}},y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},y.prototype.hasTransition=function(){return this.video&&!this.video.paused},y}(Xt),ei=function(p){function y(g,w,L,F){p.call(this,g,w,L,F),w.coordinates?Array.isArray(w.coordinates)&&w.coordinates.length===4&&!w.coordinates.some(function(N){return!Array.isArray(N)||N.length!==2||N.some(function(H){return typeof H!="number"})})||this.fire(new c.ErrorEvent(new c.ValidationError("sources."+g,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError("sources."+g,null,'missing required property "coordinates"'))),w.animate&&typeof w.animate!="boolean"&&this.fire(new c.ErrorEvent(new c.ValidationError("sources."+g,null,'optional "animate" property must be a boolean value'))),w.canvas?typeof w.canvas=="string"||w.canvas instanceof c.window.HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError("sources."+g,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError("sources."+g,null,'missing required property "canvas"'))),this.options=w,this.animate=w.animate===void 0||w.animate}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof c.window.HTMLCanvasElement?this.options.canvas:c.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},y.prototype.getCanvas=function(){return this.canvas},y.prototype.onAdd=function(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()},y.prototype.onRemove=function(){this.pause()},y.prototype.prepare=function(){var g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var w=this.map.painter.context,L=w.gl;for(var F in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,ni.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(g||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new c.Texture(w,this.canvas,L.RGBA,{premultiply:!0}),this.tiles){var N=this.tiles[F];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture)}}},y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},y.prototype.hasTransition=function(){return this._playing},y.prototype._hasInvalidDimensions=function(){for(var g=0,w=[this.canvas.width,this.canvas.height];g<w.length;g+=1){var L=w[g];if(isNaN(L)||L<=0)return!0}return!1},y}(Xt),Jt={vector:Gt,raster:Je,"raster-dem":wt,geojson:Pt,video:Xi,image:Xt,canvas:ei};function bi(p,y){var g=c.identity([]);return c.translate(g,g,[1,1,0]),c.scale(g,g,[.5*p.width,.5*p.height,1]),c.multiply(g,g,p.calculatePosMatrix(y.toUnwrapped()))}function ai(p,y,g,w,L,F){var N=function(We,Ce,Ve){if(We)for(var et=0,dt=We;et<dt.length;et+=1){var xt=Ce[dt[et]];if(xt&&xt.source===Ve&&xt.type==="fill-extrusion")return!0}else for(var Tt in Ce){var kt=Ce[Tt];if(kt.source===Ve&&kt.type==="fill-extrusion")return!0}return!1}(L&&L.layers,y,p.id),H=F.maxPitchScaleFactor(),Q=p.tilesIn(w,H,N);Q.sort(ht);for(var oe=[],ye=0,be=Q;ye<be.length;ye+=1){var Ee=be[ye];oe.push({wrappedTileID:Ee.tileID.wrapped().key,queryResults:Ee.tile.queryRenderedFeatures(y,g,p._state,Ee.queryGeometry,Ee.cameraQueryGeometry,Ee.scale,L,F,H,bi(p.transform,Ee.tileID))})}var Be=function(We){for(var Ce={},Ve={},et=0,dt=We;et<dt.length;et+=1){var xt=dt[et],Tt=xt.queryResults,kt=xt.wrappedTileID,Ht=Ve[kt]=Ve[kt]||{};for(var oi in Tt)for(var ri=Tt[oi],Ti=Ht[oi]=Ht[oi]||{},Hi=Ce[oi]=Ce[oi]||[],Qi=0,Gi=ri;Qi<Gi.length;Qi+=1){var Xn=Gi[Qi];Ti[Xn.featureIndex]||(Ti[Xn.featureIndex]=!0,Hi.push(Xn))}}return Ce}(oe);for(var Re in Be)Be[Re].forEach(function(We){var Ce=We.feature,Ve=p.getFeatureState(Ce.layer["source-layer"],Ce.id);Ce.source=Ce.layer.source,Ce.layer["source-layer"]&&(Ce.sourceLayer=Ce.layer["source-layer"]),Ce.state=Ve});return Be}function ht(p,y){var g=p.tileID,w=y.tileID;return g.overscaledZ-w.overscaledZ||g.canonical.y-w.canonical.y||g.wrap-w.wrap||g.canonical.x-w.canonical.x}var It=function(p,y){this.max=p,this.onRemove=y,this.reset()};It.prototype.reset=function(){for(var p in this.data)for(var y=0,g=this.data[p];y<g.length;y+=1){var w=g[y];w.timeout&&clearTimeout(w.timeout),this.onRemove(w.value)}return this.data={},this.order=[],this},It.prototype.add=function(p,y,g){var w=this,L=p.wrapped().key;this.data[L]===void 0&&(this.data[L]=[]);var F={value:y,timeout:void 0};if(g!==void 0&&(F.timeout=setTimeout(function(){w.remove(p,F)},g)),this.data[L].push(F),this.order.push(L),this.order.length>this.max){var N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this},It.prototype.has=function(p){return p.wrapped().key in this.data},It.prototype.getAndRemove=function(p){return this.has(p)?this._getAndRemoveByKey(p.wrapped().key):null},It.prototype._getAndRemoveByKey=function(p){var y=this.data[p].shift();return y.timeout&&clearTimeout(y.timeout),this.data[p].length===0&&delete this.data[p],this.order.splice(this.order.indexOf(p),1),y.value},It.prototype.getByKey=function(p){var y=this.data[p];return y?y[0].value:null},It.prototype.get=function(p){return this.has(p)?this.data[p.wrapped().key][0].value:null},It.prototype.remove=function(p,y){if(!this.has(p))return this;var g=p.wrapped().key,w=y===void 0?0:this.data[g].indexOf(y),L=this.data[g][w];return this.data[g].splice(w,1),L.timeout&&clearTimeout(L.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(L.value),this.order.splice(this.order.indexOf(g),1),this},It.prototype.setMaxSize=function(p){for(this.max=p;this.order.length>this.max;){var y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this},It.prototype.filter=function(p){var y=[];for(var g in this.data)for(var w=0,L=this.data[g];w<L.length;w+=1){var F=L[w];p(F.value)||y.push(F)}for(var N=0,H=y;N<H.length;N+=1){var Q=H[N];this.remove(Q.value.tileID,Q)}};var St=function(p,y,g){this.context=p;var w=p.gl;this.buffer=w.createBuffer(),this.dynamicDraw=Boolean(g),this.context.unbindVAO(),p.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer};St.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},St.prototype.updateData=function(p){var y=this.context.gl;this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,p.arrayBuffer)},St.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ji={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Qt=function(p,y,g,w){this.length=y.length,this.attributes=g,this.itemSize=y.bytesPerElement,this.dynamicDraw=w,this.context=p;var L=p.gl;this.buffer=L.createBuffer(),p.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer};Qt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Qt.prototype.updateData=function(p){var y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,p.arrayBuffer)},Qt.prototype.enableAttributes=function(p,y){for(var g=0;g<this.attributes.length;g++){var w=y.attributes[this.attributes[g].name];w!==void 0&&p.enableVertexAttribArray(w)}},Qt.prototype.setVertexAttribPointers=function(p,y,g){for(var w=0;w<this.attributes.length;w++){var L=this.attributes[w],F=y.attributes[L.name];F!==void 0&&p.vertexAttribPointer(F,L.components,p[Ji[L.type]],!1,this.itemSize,L.offset+this.itemSize*(g||0))}},Qt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var gt=function(p){this.gl=p.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};gt.prototype.get=function(){return this.current},gt.prototype.set=function(p){},gt.prototype.getDefault=function(){return this.default},gt.prototype.setDefault=function(){this.set(this.default)};var zi=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return c.Color.transparent},y.prototype.set=function(g){var w=this.current;(g.r!==w.r||g.g!==w.g||g.b!==w.b||g.a!==w.a||this.dirty)&&(this.gl.clearColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},y}(gt),ln=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return 1},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearDepth(g),this.current=g,this.dirty=!1)},y}(gt),Cn=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return 0},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearStencil(g),this.current=g,this.dirty=!1)},y}(gt),Zn=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return[!0,!0,!0,!0]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||g[3]!==w[3]||this.dirty)&&(this.gl.colorMask(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},y}(gt),Nr=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!0},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthMask(g),this.current=g,this.dirty=!1)},y}(gt),Kr=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return 255},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.stencilMask(g),this.current=g,this.dirty=!1)},y}(gt),At=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},y.prototype.set=function(g){var w=this.current;(g.func!==w.func||g.ref!==w.ref||g.mask!==w.mask||this.dirty)&&(this.gl.stencilFunc(g.func,g.ref,g.mask),this.current=g,this.dirty=!1)},y}(gt),Bi=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){var g=this.gl;return[g.KEEP,g.KEEP,g.KEEP]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||this.dirty)&&(this.gl.stencilOp(g[0],g[1],g[2]),this.current=g,this.dirty=!1)},y}(gt),Nn=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this.current=g,this.dirty=!1}},y}(gt),rn=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return[0,1]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||this.dirty)&&(this.gl.depthRange(g[0],g[1]),this.current=g,this.dirty=!1)},y}(gt),Jn=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this.current=g,this.dirty=!1}},y}(gt),Ln=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.LESS},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthFunc(g),this.current=g,this.dirty=!1)},y}(gt),zt=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.BLEND):w.disable(w.BLEND),this.current=g,this.dirty=!1}},y}(gt),Oi=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){var g=this.gl;return[g.ONE,g.ZERO]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||this.dirty)&&(this.gl.blendFunc(g[0],g[1]),this.current=g,this.dirty=!1)},y}(gt),Ze=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return c.Color.transparent},y.prototype.set=function(g){var w=this.current;(g.r!==w.r||g.g!==w.g||g.b!==w.b||g.a!==w.a||this.dirty)&&(this.gl.blendColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},y}(gt),Bt=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.FUNC_ADD},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.blendEquation(g),this.current=g,this.dirty=!1)},y}(gt),Ki=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;g?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this.current=g,this.dirty=!1}},y}(gt),Vn=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.BACK},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.cullFace(g),this.current=g,this.dirty=!1)},y}(gt),Wn=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.CCW},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.frontFace(g),this.current=g,this.dirty=!1)},y}(gt),_o=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)},y}(gt),vo=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return this.gl.TEXTURE0},y.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.activeTexture(g),this.current=g,this.dirty=!1)},y}(gt),aa=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){var g=this.gl;return[0,0,g.drawingBufferWidth,g.drawingBufferHeight]},y.prototype.set=function(g){var w=this.current;(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||g[3]!==w[3]||this.dirty)&&(this.gl.viewport(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},y}(gt),Ar=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,g),this.current=g,this.dirty=!1}},y}(gt),yi=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindRenderbuffer(w.RENDERBUFFER,g),this.current=g,this.dirty=!1}},y}(gt),On=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindTexture(w.TEXTURE_2D,g),this.current=g,this.dirty=!1}},y}(gt),xn=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.bindBuffer(w.ARRAY_BUFFER,g),this.current=g,this.dirty=!1}},y}(gt),ro=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){var w=this.gl;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,g),this.current=g,this.dirty=!1},y}(gt),co=function(p){function y(g){p.call(this,g),this.vao=g.extVertexArrayObject}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(g){this.vao&&(g!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(g),this.current=g,this.dirty=!1)},y}(gt),dn=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return 4},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_ALIGNMENT,g),this.current=g,this.dirty=!1}},y}(gt),sa=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g),this.current=g,this.dirty=!1}},y}(gt),Io=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(g){if(g!==this.current||this.dirty){var w=this.gl;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,g),this.current=g,this.dirty=!1}},y}(gt),xr=function(p){function y(g,w){p.call(this,g),this.context=g,this.parent=w}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getDefault=function(){return null},y}(gt),ne=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.setDirty=function(){this.dirty=!0},y.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,g,0),this.current=g,this.dirty=!1}},y}(xr),ue=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,g),this.current=g,this.dirty=!1}},y}(xr),pe=function(p,y,g,w){this.context=p,this.width=y,this.height=g;var L=this.framebuffer=p.gl.createFramebuffer();this.colorAttachment=new ne(p,L),w&&(this.depthAttachment=new ue(p,L))};pe.prototype.destroy=function(){var p=this.context.gl,y=this.colorAttachment.get();if(y&&p.deleteTexture(y),this.depthAttachment){var g=this.depthAttachment.get();g&&p.deleteRenderbuffer(g)}p.deleteFramebuffer(this.framebuffer)};var Se=function(p,y,g){this.func=p,this.mask=y,this.range=g};Se.ReadOnly=!1,Se.ReadWrite=!0,Se.disabled=new Se(519,Se.ReadOnly,[0,1]);var ze=function(p,y,g,w,L,F){this.test=p,this.ref=y,this.mask=g,this.fail=w,this.depthFail=L,this.pass=F};ze.disabled=new ze({func:519,mask:0},0,0,7680,7680,7680);var $e=function(p,y,g){this.blendFunction=p,this.blendColor=y,this.mask=g};$e.disabled=new $e($e.Replace=[1,0],c.Color.transparent,[!1,!1,!1,!1]),$e.unblended=new $e($e.Replace,c.Color.transparent,[!0,!0,!0,!0]),$e.alphaBlended=new $e([1,771],c.Color.transparent,[!0,!0,!0,!0]);var tt=function(p,y,g){this.enable=p,this.mode=y,this.frontFace=g};tt.disabled=new tt(!1,1029,2305),tt.backCCW=new tt(!0,1029,2305);var Ie=function(p){this.gl=p,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new zi(this),this.clearDepth=new ln(this),this.clearStencil=new Cn(this),this.colorMask=new Zn(this),this.depthMask=new Nr(this),this.stencilMask=new Kr(this),this.stencilFunc=new At(this),this.stencilOp=new Bi(this),this.stencilTest=new Nn(this),this.depthRange=new rn(this),this.depthTest=new Jn(this),this.depthFunc=new Ln(this),this.blend=new zt(this),this.blendFunc=new Oi(this),this.blendColor=new Ze(this),this.blendEquation=new Bt(this),this.cullFace=new Ki(this),this.cullFaceSide=new Vn(this),this.frontFace=new Wn(this),this.program=new _o(this),this.activeTexture=new vo(this),this.viewport=new aa(this),this.bindFramebuffer=new Ar(this),this.bindRenderbuffer=new yi(this),this.bindTexture=new On(this),this.bindVertexBuffer=new xn(this),this.bindElementBuffer=new ro(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new co(this),this.pixelStoreUnpack=new dn(this),this.pixelStoreUnpackPremultiplyAlpha=new sa(this),this.pixelStoreUnpackFlipY=new Io(this),this.extTextureFilterAnisotropic=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=p.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=p.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(p.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=p.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=p.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=p.getParameter(p.MAX_TEXTURE_SIZE)};Ie.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ie.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ie.prototype.createIndexBuffer=function(p,y){return new St(this,p,y)},Ie.prototype.createVertexBuffer=function(p,y,g){return new Qt(this,p,y,g)},Ie.prototype.createRenderbuffer=function(p,y,g){var w=this.gl,L=w.createRenderbuffer();return this.bindRenderbuffer.set(L),w.renderbufferStorage(w.RENDERBUFFER,p,y,g),this.bindRenderbuffer.set(null),L},Ie.prototype.createFramebuffer=function(p,y,g){return new pe(this,p,y,g)},Ie.prototype.clear=function(p){var y=p.color,g=p.depth,w=this.gl,L=0;y&&(L|=w.COLOR_BUFFER_BIT,this.clearColor.set(y),this.colorMask.set([!0,!0,!0,!0])),g!==void 0&&(L|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),w.clear(L)},Ie.prototype.setCullFace=function(p){p.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(p.mode),this.frontFace.set(p.frontFace))},Ie.prototype.setDepthMode=function(p){p.func!==this.gl.ALWAYS||p.mask?(this.depthTest.set(!0),this.depthFunc.set(p.func),this.depthMask.set(p.mask),this.depthRange.set(p.range)):this.depthTest.set(!1)},Ie.prototype.setStencilMode=function(p){p.test.func!==this.gl.ALWAYS||p.mask?(this.stencilTest.set(!0),this.stencilMask.set(p.mask),this.stencilOp.set([p.fail,p.depthFail,p.pass]),this.stencilFunc.set({func:p.test.func,ref:p.ref,mask:p.test.mask})):this.stencilTest.set(!1)},Ie.prototype.setColorMode=function(p){c.deepEqual(p.blendFunction,$e.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(p.blendFunction),this.blendColor.set(p.blendColor)),this.colorMask.set(p.mask)},Ie.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ne=function(p){function y(g,w,L){var F=this;p.call(this),this.id=g,this.dispatcher=L,this.on("data",function(N){N.dataType==="source"&&N.sourceDataType==="metadata"&&(F._sourceLoaded=!0),F._sourceLoaded&&!F._paused&&N.dataType==="source"&&N.sourceDataType==="content"&&(F.reload(),F.transform&&F.update(F.transform))}),this.on("error",function(){F._sourceErrored=!0}),this._source=function(N,H,Q,oe){var ye=new Jt[H.type](N,H,Q,oe);if(ye.id!==N)throw new Error("Expected Source id to be "+N+" instead of "+ye.id);return c.bindAll(["load","abort","unload","serialize","prepare"],ye),ye}(g,w,L,this),this._tiles={},this._cache=new It(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new c.SourceFeatureState}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.onAdd=function(g){this.map=g,this._maxTileCacheSize=g?g._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(g)},y.prototype.onRemove=function(g){this._source&&this._source.onRemove&&this._source.onRemove(g)},y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var g in this._tiles){var w=this._tiles[g];if(w.state!=="loaded"&&w.state!=="errored")return!1}return!0},y.prototype.getSource=function(){return this._source},y.prototype.pause=function(){this._paused=!0},y.prototype.resume=function(){if(this._paused){var g=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,g&&this.reload(),this.transform&&this.update(this.transform)}},y.prototype._loadTile=function(g,w){return this._source.loadTile(g,w)},y.prototype._unloadTile=function(g){if(this._source.unloadTile)return this._source.unloadTile(g,function(){})},y.prototype._abortTile=function(g){if(this._source.abortTile)return this._source.abortTile(g,function(){})},y.prototype.serialize=function(){return this._source.serialize()},y.prototype.prepare=function(g){for(var w in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var L=this._tiles[w];L.upload(g),L.prepare(this.map.style.imageManager)}},y.prototype.getIds=function(){return c.values(this._tiles).map(function(g){return g.tileID}).sort(mt).map(function(g){return g.key})},y.prototype.getRenderableIds=function(g){var w=this,L=[];for(var F in this._tiles)this._isIdRenderable(F,g)&&L.push(this._tiles[F]);return g?L.sort(function(N,H){var Q=N.tileID,oe=H.tileID,ye=new c.Point(Q.canonical.x,Q.canonical.y)._rotate(w.transform.angle),be=new c.Point(oe.canonical.x,oe.canonical.y)._rotate(w.transform.angle);return Q.overscaledZ-oe.overscaledZ||be.y-ye.y||be.x-ye.x}).map(function(N){return N.tileID.key}):L.map(function(N){return N.tileID}).sort(mt).map(function(N){return N.key})},y.prototype.hasRenderableParent=function(g){var w=this.findLoadedParent(g,0);return!!w&&this._isIdRenderable(w.tileID.key)},y.prototype._isIdRenderable=function(g,w){return this._tiles[g]&&this._tiles[g].hasData()&&!this._coveredTiles[g]&&(w||!this._tiles[g].holdingForFade())},y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var g in this._cache.reset(),this._tiles)this._tiles[g].state!=="errored"&&this._reloadTile(g,"reloading")},y.prototype._reloadTile=function(g,w){var L=this._tiles[g];L&&(L.state!=="loading"&&(L.state=w),this._loadTile(L,this._tileLoaded.bind(this,L,g,w)))},y.prototype._tileLoaded=function(g,w,L,F){if(F)return g.state="errored",void(F.status!==404?this._source.fire(new c.ErrorEvent(F,{tile:g})):this.update(this.transform));g.timeAdded=c.browser.now(),L==="expired"&&(g.refreshedUponExpiration=!0),this._setTileReloadTimer(w,g),this.getSource().type==="raster-dem"&&g.dem&&this._backfillDEM(g),this._state.initializeTileState(g,this.map?this.map.painter:null),this._source.fire(new c.Event("data",{dataType:"source",tile:g,coord:g.tileID}))},y.prototype._backfillDEM=function(g){for(var w=this.getRenderableIds(),L=0;L<w.length;L++){var F=w[L];if(g.neighboringTiles&&g.neighboringTiles[F]){var N=this.getTileByID(F);H(g,N),H(N,g)}}function H(Q,oe){Q.needsHillshadePrepare=!0;var ye=oe.tileID.canonical.x-Q.tileID.canonical.x,be=oe.tileID.canonical.y-Q.tileID.canonical.y,Ee=Math.pow(2,Q.tileID.canonical.z),Be=oe.tileID.key;ye===0&&be===0||Math.abs(be)>1||(Math.abs(ye)>1&&(Math.abs(ye+Ee)===1?ye+=Ee:Math.abs(ye-Ee)===1&&(ye-=Ee)),oe.dem&&Q.dem&&(Q.dem.backfillBorder(oe.dem,ye,be),Q.neighboringTiles&&Q.neighboringTiles[Be]&&(Q.neighboringTiles[Be].backfilled=!0)))}},y.prototype.getTile=function(g){return this.getTileByID(g.key)},y.prototype.getTileByID=function(g){return this._tiles[g]},y.prototype._retainLoadedChildren=function(g,w,L,F){for(var N in this._tiles){var H=this._tiles[N];if(!(F[N]||!H.hasData()||H.tileID.overscaledZ<=w||H.tileID.overscaledZ>L)){for(var Q=H.tileID;H&&H.tileID.overscaledZ>w+1;){var oe=H.tileID.scaledTo(H.tileID.overscaledZ-1);(H=this._tiles[oe.key])&&H.hasData()&&(Q=oe)}for(var ye=Q;ye.overscaledZ>w;)if(g[(ye=ye.scaledTo(ye.overscaledZ-1)).key]){F[Q.key]=Q;break}}}},y.prototype.findLoadedParent=function(g,w){if(g.key in this._loadedParentTiles){var L=this._loadedParentTiles[g.key];return L&&L.tileID.overscaledZ>=w?L:null}for(var F=g.overscaledZ-1;F>=w;F--){var N=g.scaledTo(F),H=this._getLoadedTile(N);if(H)return H}},y.prototype._getLoadedTile=function(g){var w=this._tiles[g.key];return w&&w.hasData()?w:this._cache.getByKey(g.wrapped().key)},y.prototype.updateCacheSize=function(g){var w=Math.ceil(g.width/this._source.tileSize)+1,L=Math.ceil(g.height/this._source.tileSize)+1,F=Math.floor(w*L*5),N=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,F):F;this._cache.setMaxSize(N)},y.prototype.handleWrapJump=function(g){var w=Math.round((g-(this._prevLng===void 0?g:this._prevLng))/360);if(this._prevLng=g,w){var L={};for(var F in this._tiles){var N=this._tiles[F];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+w),L[N.tileID.key]=N}for(var H in this._tiles=L,this._timers)clearTimeout(this._timers[H]),delete this._timers[H];for(var Q in this._tiles)this._setTileReloadTimer(Q,this._tiles[Q])}},y.prototype.update=function(g){var w=this;if(this.transform=g,this._sourceLoaded&&!this._paused){var L;this.updateCacheSize(g),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?L=g.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ht){return new c.OverscaledTileID(Ht.canonical.z,Ht.wrap,Ht.canonical.z,Ht.canonical.x,Ht.canonical.y)}):(L=g.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(L=L.filter(function(Ht){return w._source.hasTile(Ht)}))):L=[];var F=g.coveringZoomLevel(this._source),N=Math.max(F-y.maxOverzooming,this._source.minzoom),H=Math.max(F+y.maxUnderzooming,this._source.minzoom),Q=this._updateRetainedTiles(L,F);if(ce(this._source.type)){for(var oe={},ye={},be=0,Ee=Object.keys(Q);be<Ee.length;be+=1){var Be=Ee[be],Re=Q[Be],We=this._tiles[Be];if(We&&!(We.fadeEndTime&&We.fadeEndTime<=c.browser.now())){var Ce=this.findLoadedParent(Re,N);Ce&&(this._addTile(Ce.tileID),oe[Ce.tileID.key]=Ce.tileID),ye[Be]=Re}}for(var Ve in this._retainLoadedChildren(ye,F,H,Q),oe)Q[Ve]||(this._coveredTiles[Ve]=!0,Q[Ve]=oe[Ve])}for(var et in Q)this._tiles[et].clearFadeHold();for(var dt=0,xt=c.keysDifference(this._tiles,Q);dt<xt.length;dt+=1){var Tt=xt[dt],kt=this._tiles[Tt];kt.hasSymbolBuckets&&!kt.holdingForFade()?kt.setHoldDuration(this.map._fadeDuration):kt.hasSymbolBuckets&&!kt.symbolFadeFinished()||this._removeTile(Tt)}this._updateLoadedParentTileCache()}},y.prototype.releaseSymbolFadeTiles=function(){for(var g in this._tiles)this._tiles[g].holdingForFade()&&this._removeTile(g)},y.prototype._updateRetainedTiles=function(g,w){for(var L={},F={},N=Math.max(w-y.maxOverzooming,this._source.minzoom),H=Math.max(w+y.maxUnderzooming,this._source.minzoom),Q={},oe=0,ye=g;oe<ye.length;oe+=1){var be=ye[oe],Ee=this._addTile(be);L[be.key]=be,Ee.hasData()||w<this._source.maxzoom&&(Q[be.key]=be)}this._retainLoadedChildren(Q,w,H,L);for(var Be=0,Re=g;Be<Re.length;Be+=1){var We=Re[Be],Ce=this._tiles[We.key];if(!Ce.hasData()){if(w+1>this._source.maxzoom){var Ve=We.children(this._source.maxzoom)[0],et=this.getTile(Ve);if(et&&et.hasData()){L[Ve.key]=Ve;continue}}else{var dt=We.children(this._source.maxzoom);if(L[dt[0].key]&&L[dt[1].key]&&L[dt[2].key]&&L[dt[3].key])continue}for(var xt=Ce.wasRequested(),Tt=We.overscaledZ-1;Tt>=N;--Tt){var kt=We.scaledTo(Tt);if(F[kt.key]||(F[kt.key]=!0,!(Ce=this.getTile(kt))&&xt&&(Ce=this._addTile(kt)),Ce&&(L[kt.key]=kt,xt=Ce.wasRequested(),Ce.hasData())))break}}}return L},y.prototype._updateLoadedParentTileCache=function(){for(var g in this._loadedParentTiles={},this._tiles){for(var w=[],L=void 0,F=this._tiles[g].tileID;F.overscaledZ>0;){if(F.key in this._loadedParentTiles){L=this._loadedParentTiles[F.key];break}w.push(F.key);var N=F.scaledTo(F.overscaledZ-1);if(L=this._getLoadedTile(N))break;F=N}for(var H=0,Q=w;H<Q.length;H+=1)this._loadedParentTiles[Q[H]]=L}},y.prototype._addTile=function(g){var w=this._tiles[g.key];if(w)return w;(w=this._cache.getAndRemove(g))&&(this._setTileReloadTimer(g.key,w),w.tileID=g,this._state.initializeTileState(w,this.map?this.map.painter:null),this._cacheTimers[g.key]&&(clearTimeout(this._cacheTimers[g.key]),delete this._cacheTimers[g.key],this._setTileReloadTimer(g.key,w)));var L=Boolean(w);return L||(w=new c.Tile(g,this._source.tileSize*g.overscaleFactor()),this._loadTile(w,this._tileLoaded.bind(this,w,g.key,w.state))),w?(w.uses++,this._tiles[g.key]=w,L||this._source.fire(new c.Event("dataloading",{tile:w,coord:w.tileID,dataType:"source"})),w):null},y.prototype._setTileReloadTimer=function(g,w){var L=this;g in this._timers&&(clearTimeout(this._timers[g]),delete this._timers[g]);var F=w.getExpiryTimeout();F&&(this._timers[g]=setTimeout(function(){L._reloadTile(g,"expired"),delete L._timers[g]},F))},y.prototype._removeTile=function(g){var w=this._tiles[g];w&&(w.uses--,delete this._tiles[g],this._timers[g]&&(clearTimeout(this._timers[g]),delete this._timers[g]),w.uses>0||(w.hasData()&&w.state!=="reloading"?this._cache.add(w.tileID,w,w.getExpiryTimeout()):(w.aborted=!0,this._abortTile(w),this._unloadTile(w))))},y.prototype.clearTiles=function(){for(var g in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(g);this._cache.reset()},y.prototype.tilesIn=function(g,w,L){var F=this,N=[],H=this.transform;if(!H)return N;for(var Q=L?H.getCameraQueryGeometry(g):g,oe=g.map(function(Tt){return H.pointCoordinate(Tt)}),ye=Q.map(function(Tt){return H.pointCoordinate(Tt)}),be=this.getIds(),Ee=1/0,Be=1/0,Re=-1/0,We=-1/0,Ce=0,Ve=ye;Ce<Ve.length;Ce+=1){var et=Ve[Ce];Ee=Math.min(Ee,et.x),Be=Math.min(Be,et.y),Re=Math.max(Re,et.x),We=Math.max(We,et.y)}for(var dt=function(Tt){var kt=F._tiles[be[Tt]];if(!kt.holdingForFade()){var Ht=kt.tileID,oi=Math.pow(2,H.zoom-kt.tileID.overscaledZ),ri=w*kt.queryPadding*c.EXTENT/kt.tileSize/oi,Ti=[Ht.getTilePoint(new c.MercatorCoordinate(Ee,Be)),Ht.getTilePoint(new c.MercatorCoordinate(Re,We))];if(Ti[0].x-ri<c.EXTENT&&Ti[0].y-ri<c.EXTENT&&Ti[1].x+ri>=0&&Ti[1].y+ri>=0){var Hi=oe.map(function(Gi){return Ht.getTilePoint(Gi)}),Qi=ye.map(function(Gi){return Ht.getTilePoint(Gi)});N.push({tile:kt,tileID:Ht,queryGeometry:Hi,cameraQueryGeometry:Qi,scale:oi})}}},xt=0;xt<be.length;xt++)dt(xt);return N},y.prototype.getVisibleCoordinates=function(g){for(var w=this,L=this.getRenderableIds(g).map(function(Q){return w._tiles[Q].tileID}),F=0,N=L;F<N.length;F+=1){var H=N[F];H.posMatrix=this.transform.calculatePosMatrix(H.toUnwrapped())}return L},y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ce(this._source.type))for(var g in this._tiles){var w=this._tiles[g];if(w.fadeEndTime!==void 0&&w.fadeEndTime>=c.browser.now())return!0}return!1},y.prototype.setFeatureState=function(g,w,L){this._state.updateState(g=g||"_geojsonTileLayer",w,L)},y.prototype.removeFeatureState=function(g,w,L){this._state.removeFeatureState(g=g||"_geojsonTileLayer",w,L)},y.prototype.getFeatureState=function(g,w){return this._state.getState(g=g||"_geojsonTileLayer",w)},y.prototype.setDependencies=function(g,w,L){var F=this._tiles[g];F&&F.setDependencies(w,L)},y.prototype.reloadTilesForDependencies=function(g,w){for(var L in this._tiles)this._tiles[L].hasDependency(g,w)&&this._reloadTile(L,"reloading");this._cache.filter(function(F){return!F.hasDependency(g,w)})},y}(c.Evented);function mt(p,y){var g=Math.abs(2*p.wrap)-+(p.wrap<0),w=Math.abs(2*y.wrap)-+(y.wrap<0);return p.overscaledZ-y.overscaledZ||w-g||y.canonical.y-p.canonical.y||y.canonical.x-p.canonical.x}function ce(p){return p==="raster"||p==="image"||p==="video"}function W(){return new c.window.Worker(vn.workerUrl)}Ne.maxOverzooming=10,Ne.maxUnderzooming=3;var X="mapboxgl_preloaded_worker_pool",le=function(){this.active={}};le.prototype.acquire=function(p){if(!this.workers)for(this.workers=[];this.workers.length<le.workerCount;)this.workers.push(new W);return this.active[p]=!0,this.workers.slice()},le.prototype.release=function(p){delete this.active[p],this.numActive()===0&&(this.workers.forEach(function(y){y.terminate()}),this.workers=null)},le.prototype.isPreloaded=function(){return!!this.active[X]},le.prototype.numActive=function(){return Object.keys(this.active).length};var me,Te=Math.floor(c.browser.hardwareConcurrency/2);function xe(){return me||(me=new le),me}function Le(p,y){var g={};for(var w in p)w!=="ref"&&(g[w]=p[w]);return c.refProperties.forEach(function(L){L in y&&(g[L]=y[L])}),g}function Me(p){p=p.slice();for(var y=Object.create(null),g=0;g<p.length;g++)y[p[g].id]=p[g];for(var w=0;w<p.length;w++)"ref"in p[w]&&(p[w]=Le(p[w],y[p[w].ref]));return p}le.workerCount=Math.max(Math.min(Te,6),1);var Pe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function yt(p,y,g){g.push({command:Pe.addSource,args:[p,y[p]]})}function st(p,y,g){y.push({command:Pe.removeSource,args:[p]}),g[p]=!0}function _t(p,y,g,w){st(p,g,w),yt(p,y,g)}function si(p,y,g){var w;for(w in p[g])if(p[g].hasOwnProperty(w)&&w!=="data"&&!c.deepEqual(p[g][w],y[g][w]))return!1;for(w in y[g])if(y[g].hasOwnProperty(w)&&w!=="data"&&!c.deepEqual(p[g][w],y[g][w]))return!1;return!0}function De(p,y,g,w,L,F){var N;for(N in y=y||{},p=p||{})p.hasOwnProperty(N)&&(c.deepEqual(p[N],y[N])||g.push({command:F,args:[w,N,y[N],L]}));for(N in y)y.hasOwnProperty(N)&&!p.hasOwnProperty(N)&&(c.deepEqual(p[N],y[N])||g.push({command:F,args:[w,N,y[N],L]}))}function Yt(p){return p.id}function hi(p,y){return p[y.id]=y,p}var kn=function(p,y){this.reset(p,y)};kn.prototype.reset=function(p,y){this.points=p||[],this._distances=[0];for(var g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(y||0,.5*this.length),this.paddedLength=this.length-2*this.padding},kn.prototype.lerp=function(p){if(this.points.length===1)return this.points[0];p=c.clamp(p,0,1);for(var y=1,g=this._distances[y],w=p*this.paddedLength+this.padding;g<w&&y<this._distances.length;)g=this._distances[++y];var L=y-1,F=this._distances[L],N=g-F,H=N>0?(w-F)/N:0;return this.points[L].mult(1-H).add(this.points[y].mult(H))};var Wi=function(p,y,g){var w=this.boxCells=[],L=this.circleCells=[];this.xCellCount=Math.ceil(p/g),this.yCellCount=Math.ceil(y/g);for(var F=0;F<this.xCellCount*this.yCellCount;F++)w.push([]),L.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=p,this.height=y,this.xScale=this.xCellCount/p,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0};function nn(p,y,g,w,L){var F=c.create();return y?(c.scale(F,F,[1/L,1/L,1]),g||c.rotateZ(F,F,w.angle)):c.multiply(F,w.labelPlaneMatrix,p),F}function Fi(p,y,g,w,L){if(y){var F=c.clone(p);return c.scale(F,F,[L,L,1]),g||c.rotateZ(F,F,-w.angle),F}return w.glCoordMatrix}function Ii(p,y){var g=[p.x,p.y,0,1];bo(g,g,y);var w=g[3];return{point:new c.Point(g[0]/w,g[1]/w),signedDistanceFromCamera:w}}function hn(p,y){return .5+p/y*.5}function cr(p,y){var g=p[0]/p[3],w=p[1]/p[3];return g>=-y[0]&&g<=y[0]&&w>=-y[1]&&w<=y[1]}function ho(p,y,g,w,L,F,N,H){var Q=w?p.textSizeData:p.iconSizeData,oe=c.evaluateSizeForZoom(Q,g.transform.zoom),ye=[256/g.width*2+1,256/g.height*2+1],be=w?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;be.clear();for(var Ee=p.lineVertexArray,Be=w?p.text.placedSymbolArray:p.icon.placedSymbolArray,Re=g.transform.width/g.transform.height,We=!1,Ce=0;Ce<Be.length;Ce++){var Ve=Be.get(Ce);if(Ve.hidden||Ve.writingMode===c.WritingMode.vertical&&!We)Qo(Ve.numGlyphs,be);else{We=!1;var et=[Ve.anchorX,Ve.anchorY,0,1];if(c.transformMat4(et,et,y),cr(et,ye)){var dt=hn(g.transform.cameraToCenterDistance,et[3]),xt=c.evaluateSizeForFeature(Q,oe,Ve),Tt=N?xt/dt:xt*dt,kt=new c.Point(Ve.anchorX,Ve.anchorY),Ht=Ii(kt,L).point,oi={},ri=iu(Ve,Tt,!1,H,y,L,F,p.glyphOffsetArray,Ee,be,Ht,kt,oi,Re);We=ri.useVertical,(ri.notEnoughRoom||We||ri.needsFlipping&&iu(Ve,Tt,!0,H,y,L,F,p.glyphOffsetArray,Ee,be,Ht,kt,oi,Re).notEnoughRoom)&&Qo(Ve.numGlyphs,be)}else Qo(Ve.numGlyphs,be)}}w?p.text.dynamicLayoutVertexBuffer.updateData(be):p.icon.dynamicLayoutVertexBuffer.updateData(be)}function pr(p,y,g,w,L,F,N,H,Q,oe,ye){var be=H.glyphStartIndex+H.numGlyphs,Ee=H.lineStartIndex,Be=H.lineStartIndex+H.lineLength,Re=y.getoffsetX(H.glyphStartIndex),We=y.getoffsetX(be-1),Ce=oo(p*Re,g,w,L,F,N,H.segment,Ee,Be,Q,oe,ye);if(!Ce)return null;var Ve=oo(p*We,g,w,L,F,N,H.segment,Ee,Be,Q,oe,ye);return Ve?{first:Ce,last:Ve}:null}function Zo(p,y,g,w){return p===c.WritingMode.horizontal&&Math.abs(g.y-y.y)>Math.abs(g.x-y.x)*w?{useVertical:!0}:(p===c.WritingMode.vertical?y.y<g.y:y.x>g.x)?{needsFlipping:!0}:null}function iu(p,y,g,w,L,F,N,H,Q,oe,ye,be,Ee,Be){var Re,We=y/24,Ce=p.lineOffsetX*We,Ve=p.lineOffsetY*We;if(p.numGlyphs>1){var et=p.glyphStartIndex+p.numGlyphs,dt=p.lineStartIndex,xt=p.lineStartIndex+p.lineLength,Tt=pr(We,H,Ce,Ve,g,ye,be,p,Q,F,Ee);if(!Tt)return{notEnoughRoom:!0};var kt=Ii(Tt.first.point,N).point,Ht=Ii(Tt.last.point,N).point;if(w&&!g){var oi=Zo(p.writingMode,kt,Ht,Be);if(oi)return oi}Re=[Tt.first];for(var ri=p.glyphStartIndex+1;ri<et-1;ri++)Re.push(oo(We*H.getoffsetX(ri),Ce,Ve,g,ye,be,p.segment,dt,xt,Q,F,Ee));Re.push(Tt.last)}else{if(w&&!g){var Ti=Ii(be,L).point,Hi=p.lineStartIndex+p.segment+1,Qi=new c.Point(Q.getx(Hi),Q.gety(Hi)),Gi=Ii(Qi,L),Xn=Gi.signedDistanceFromCamera>0?Gi.point:Cr(be,Qi,Ti,1,L),Li=Zo(p.writingMode,Ti,Xn,Be);if(Li)return Li}var pn=oo(We*H.getoffsetX(p.glyphStartIndex),Ce,Ve,g,ye,be,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,Q,F,Ee);if(!pn)return{notEnoughRoom:!0};Re=[pn]}for(var Fn=0,cn=Re;Fn<cn.length;Fn+=1){var an=cn[Fn];c.addDynamicAttributes(oe,an.point,an.angle)}return{}}function Cr(p,y,g,w,L){var F=Ii(p.add(p.sub(y)._unit()),L).point,N=g.sub(F);return g.add(N._mult(w/N.mag()))}function oo(p,y,g,w,L,F,N,H,Q,oe,ye,be){var Ee=w?p-y:p+y,Be=Ee>0?1:-1,Re=0;w&&(Be*=-1,Re=Math.PI),Be<0&&(Re+=Math.PI);for(var We=Be>0?H+N:H+N+1,Ce=L,Ve=L,et=0,dt=0,xt=Math.abs(Ee),Tt=[];et+dt<=xt;){if((We+=Be)<H||We>=Q)return null;if(Ve=Ce,Tt.push(Ce),(Ce=be[We])===void 0){var kt=new c.Point(oe.getx(We),oe.gety(We)),Ht=Ii(kt,ye);if(Ht.signedDistanceFromCamera>0)Ce=be[We]=Ht.point;else{var oi=We-Be;Ce=Cr(et===0?F:new c.Point(oe.getx(oi),oe.gety(oi)),kt,Ve,xt-et+1,ye)}}et+=dt,dt=Ve.dist(Ce)}var ri=(xt-et)/dt,Ti=Ce.sub(Ve),Hi=Ti.mult(ri)._add(Ve);Hi._add(Ti._unit()._perp()._mult(g*Be));var Qi=Re+Math.atan2(Ce.y-Ve.y,Ce.x-Ve.x);return Tt.push(Hi),{point:Hi,angle:Qi,path:Tt}}Wi.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Wi.prototype.insert=function(p,y,g,w,L){this._forEachCell(y,g,w,L,this._insertBoxCell,this.boxUid++),this.boxKeys.push(p),this.bboxes.push(y),this.bboxes.push(g),this.bboxes.push(w),this.bboxes.push(L)},Wi.prototype.insertCircle=function(p,y,g,w){this._forEachCell(y-w,g-w,y+w,g+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(p),this.circles.push(y),this.circles.push(g),this.circles.push(w)},Wi.prototype._insertBoxCell=function(p,y,g,w,L,F){this.boxCells[L].push(F)},Wi.prototype._insertCircleCell=function(p,y,g,w,L,F){this.circleCells[L].push(F)},Wi.prototype._query=function(p,y,g,w,L,F){if(g<0||p>this.width||w<0||y>this.height)return!L&&[];var N=[];if(p<=0&&y<=0&&this.width<=g&&this.height<=w){if(L)return!0;for(var H=0;H<this.boxKeys.length;H++)N.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(var Q=0;Q<this.circleKeys.length;Q++){var oe=this.circles[3*Q],ye=this.circles[3*Q+1],be=this.circles[3*Q+2];N.push({key:this.circleKeys[Q],x1:oe-be,y1:ye-be,x2:oe+be,y2:ye+be})}return F?N.filter(F):N}return this._forEachCell(p,y,g,w,this._queryCell,N,{hitTest:L,seenUids:{box:{},circle:{}}},F),L?N.length>0:N},Wi.prototype._queryCircle=function(p,y,g,w,L){var F=p-g,N=p+g,H=y-g,Q=y+g;if(N<0||F>this.width||Q<0||H>this.height)return!w&&[];var oe=[];return this._forEachCell(F,H,N,Q,this._queryCellCircle,oe,{hitTest:w,circle:{x:p,y,radius:g},seenUids:{box:{},circle:{}}},L),w?oe.length>0:oe},Wi.prototype.query=function(p,y,g,w,L){return this._query(p,y,g,w,!1,L)},Wi.prototype.hitTest=function(p,y,g,w,L){return this._query(p,y,g,w,!0,L)},Wi.prototype.hitTestCircle=function(p,y,g,w){return this._queryCircle(p,y,g,!0,w)},Wi.prototype._queryCell=function(p,y,g,w,L,F,N,H){var Q=N.seenUids,oe=this.boxCells[L];if(oe!==null)for(var ye=this.bboxes,be=0,Ee=oe;be<Ee.length;be+=1){var Be=Ee[be];if(!Q.box[Be]){Q.box[Be]=!0;var Re=4*Be;if(p<=ye[Re+2]&&y<=ye[Re+3]&&g>=ye[Re+0]&&w>=ye[Re+1]&&(!H||H(this.boxKeys[Be]))){if(N.hitTest)return F.push(!0),!0;F.push({key:this.boxKeys[Be],x1:ye[Re],y1:ye[Re+1],x2:ye[Re+2],y2:ye[Re+3]})}}}var We=this.circleCells[L];if(We!==null)for(var Ce=this.circles,Ve=0,et=We;Ve<et.length;Ve+=1){var dt=et[Ve];if(!Q.circle[dt]){Q.circle[dt]=!0;var xt=3*dt;if(this._circleAndRectCollide(Ce[xt],Ce[xt+1],Ce[xt+2],p,y,g,w)&&(!H||H(this.circleKeys[dt]))){if(N.hitTest)return F.push(!0),!0;var Tt=Ce[xt],kt=Ce[xt+1],Ht=Ce[xt+2];F.push({key:this.circleKeys[dt],x1:Tt-Ht,y1:kt-Ht,x2:Tt+Ht,y2:kt+Ht})}}}},Wi.prototype._queryCellCircle=function(p,y,g,w,L,F,N,H){var Q=N.circle,oe=N.seenUids,ye=this.boxCells[L];if(ye!==null)for(var be=this.bboxes,Ee=0,Be=ye;Ee<Be.length;Ee+=1){var Re=Be[Ee];if(!oe.box[Re]){oe.box[Re]=!0;var We=4*Re;if(this._circleAndRectCollide(Q.x,Q.y,Q.radius,be[We+0],be[We+1],be[We+2],be[We+3])&&(!H||H(this.boxKeys[Re])))return F.push(!0),!0}}var Ce=this.circleCells[L];if(Ce!==null)for(var Ve=this.circles,et=0,dt=Ce;et<dt.length;et+=1){var xt=dt[et];if(!oe.circle[xt]){oe.circle[xt]=!0;var Tt=3*xt;if(this._circlesCollide(Ve[Tt],Ve[Tt+1],Ve[Tt+2],Q.x,Q.y,Q.radius)&&(!H||H(this.circleKeys[xt])))return F.push(!0),!0}}},Wi.prototype._forEachCell=function(p,y,g,w,L,F,N,H){for(var Q=this._convertToXCellCoord(p),oe=this._convertToYCellCoord(y),ye=this._convertToXCellCoord(g),be=this._convertToYCellCoord(w),Ee=Q;Ee<=ye;Ee++)for(var Be=oe;Be<=be;Be++)if(L.call(this,p,y,g,w,this.xCellCount*Be+Ee,F,N,H))return},Wi.prototype._convertToXCellCoord=function(p){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(p*this.xScale)))},Wi.prototype._convertToYCellCoord=function(p){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(p*this.yScale)))},Wi.prototype._circlesCollide=function(p,y,g,w,L,F){var N=w-p,H=L-y,Q=g+F;return Q*Q>N*N+H*H},Wi.prototype._circleAndRectCollide=function(p,y,g,w,L,F,N){var H=(F-w)/2,Q=Math.abs(p-(w+H));if(Q>H+g)return!1;var oe=(N-L)/2,ye=Math.abs(y-(L+oe));if(ye>oe+g)return!1;if(Q<=H||ye<=oe)return!0;var be=Q-H,Ee=ye-oe;return be*be+Ee*Ee<=g*g};var al=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Qo(p,y){for(var g=0;g<p;g++){var w=y.length;y.resize(w+4),y.float32.set(al,3*w)}}function bo(p,y,g){var w=y[0],L=y[1];return p[0]=g[0]*w+g[4]*L+g[12],p[1]=g[1]*w+g[5]*L+g[13],p[3]=g[3]*w+g[7]*L+g[15],p}var Ma=function(p,y,g){y===void 0&&(y=new Wi(p.width+200,p.height+200,25)),g===void 0&&(g=new Wi(p.width+200,p.height+200,25)),this.transform=p,this.grid=y,this.ignoredGrid=g,this.pitchfactor=Math.cos(p._pitch)*p.cameraToCenterDistance,this.screenRightBoundary=p.width+100,this.screenBottomBoundary=p.height+100,this.gridRightBoundary=p.width+200,this.gridBottomBoundary=p.height+200};function Br(p,y,g){return y*(c.EXTENT/(p.tileSize*Math.pow(2,g-p.tileID.overscaledZ)))}Ma.prototype.placeCollisionBox=function(p,y,g,w,L){var F=this.projectAndGetPerspectiveRatio(w,p.anchorPointX,p.anchorPointY),N=g*F.perspectiveRatio,H=p.x1*N+F.point.x,Q=p.y1*N+F.point.y,oe=p.x2*N+F.point.x,ye=p.y2*N+F.point.y;return!this.isInsideGrid(H,Q,oe,ye)||!y&&this.grid.hitTest(H,Q,oe,ye,L)?{box:[],offscreen:!1}:{box:[H,Q,oe,ye],offscreen:this.isOffscreen(H,Q,oe,ye)}},Ma.prototype.placeCollisionCircles=function(p,y,g,w,L,F,N,H,Q,oe,ye,be,Ee){var Be=[],Re=new c.Point(y.anchorX,y.anchorY),We=Ii(Re,F),Ce=hn(this.transform.cameraToCenterDistance,We.signedDistanceFromCamera),Ve=(oe?L/Ce:L*Ce)/c.ONE_EM,et=Ii(Re,N).point,dt=pr(Ve,w,y.lineOffsetX*Ve,y.lineOffsetY*Ve,!1,et,Re,y,g,N,{}),xt=!1,Tt=!1,kt=!0;if(dt){for(var Ht=.5*be*Ce+Ee,oi=new c.Point(-100,-100),ri=new c.Point(this.screenRightBoundary,this.screenBottomBoundary),Ti=new kn,Hi=dt.first,Qi=dt.last,Gi=[],Xn=Hi.path.length-1;Xn>=1;Xn--)Gi.push(Hi.path[Xn]);for(var Li=1;Li<Qi.path.length;Li++)Gi.push(Qi.path[Li]);var pn=2.5*Ht;if(H){var Fn=Gi.map(function(Za){return Ii(Za,H)});Gi=Fn.some(function(Za){return Za.signedDistanceFromCamera<=0})?[]:Fn.map(function(Za){return Za.point})}var cn=[];if(Gi.length>0){for(var an=Gi[0].clone(),wn=Gi[0].clone(),tn=1;tn<Gi.length;tn++)an.x=Math.min(an.x,Gi[tn].x),an.y=Math.min(an.y,Gi[tn].y),wn.x=Math.max(wn.x,Gi[tn].x),wn.y=Math.max(wn.y,Gi[tn].y);cn=an.x>=oi.x&&wn.x<=ri.x&&an.y>=oi.y&&wn.y<=ri.y?[Gi]:wn.x<oi.x||an.x>ri.x||wn.y<oi.y||an.y>ri.y?[]:c.clipLine([Gi],oi.x,oi.y,ri.x,ri.y)}for(var Yi=0,$r=cn;Yi<$r.length;Yi+=1){var uo;Ti.reset($r[Yi],.25*Ht),uo=Ti.length<=.5*Ht?1:Math.ceil(Ti.paddedLength/pn)+1;for(var wo=0;wo<uo;wo++){var Ko=wo/Math.max(uo-1,1),io=Ti.lerp(Ko),er=io.x+100,ba=io.y+100;Be.push(er,ba,Ht,0);var ha=er-Ht,Ga=ba-Ht,Mo=er+Ht,Ha=ba+Ht;if(kt=kt&&this.isOffscreen(ha,Ga,Mo,Ha),Tt=Tt||this.isInsideGrid(ha,Ga,Mo,Ha),!p&&this.grid.hitTestCircle(er,ba,Ht,ye)&&(xt=!0,!Q))return{circles:[],offscreen:!1,collisionDetected:xt}}}}return{circles:!Q&&xt||!Tt?[]:Be,offscreen:kt,collisionDetected:xt}},Ma.prototype.queryRenderedSymbols=function(p){if(p.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var y=[],g=1/0,w=1/0,L=-1/0,F=-1/0,N=0,H=p;N<H.length;N+=1){var Q=H[N],oe=new c.Point(Q.x+100,Q.y+100);g=Math.min(g,oe.x),w=Math.min(w,oe.y),L=Math.max(L,oe.x),F=Math.max(F,oe.y),y.push(oe)}for(var ye={},be={},Ee=0,Be=this.grid.query(g,w,L,F).concat(this.ignoredGrid.query(g,w,L,F));Ee<Be.length;Ee+=1){var Re=Be[Ee],We=Re.key;if(ye[We.bucketInstanceId]===void 0&&(ye[We.bucketInstanceId]={}),!ye[We.bucketInstanceId][We.featureIndex]){var Ce=[new c.Point(Re.x1,Re.y1),new c.Point(Re.x2,Re.y1),new c.Point(Re.x2,Re.y2),new c.Point(Re.x1,Re.y2)];c.polygonIntersectsPolygon(y,Ce)&&(ye[We.bucketInstanceId][We.featureIndex]=!0,be[We.bucketInstanceId]===void 0&&(be[We.bucketInstanceId]=[]),be[We.bucketInstanceId].push(We.featureIndex))}}return be},Ma.prototype.insertCollisionBox=function(p,y,g,w,L){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:w,collisionGroupID:L},p[0],p[1],p[2],p[3])},Ma.prototype.insertCollisionCircles=function(p,y,g,w,L){for(var F=y?this.ignoredGrid:this.grid,N={bucketInstanceId:g,featureIndex:w,collisionGroupID:L},H=0;H<p.length;H+=4)F.insertCircle(N,p[H],p[H+1],p[H+2])},Ma.prototype.projectAndGetPerspectiveRatio=function(p,y,g){var w=[y,g,0,1];return bo(w,w,p),{point:new c.Point((w[0]/w[3]+1)/2*this.transform.width+100,(-w[1]/w[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w[3]*.5}},Ma.prototype.isOffscreen=function(p,y,g,w){return g<100||p>=this.screenRightBoundary||w<100||y>this.screenBottomBoundary},Ma.prototype.isInsideGrid=function(p,y,g,w){return g>=0&&p<this.gridRightBoundary&&w>=0&&y<this.gridBottomBoundary},Ma.prototype.getViewportMatrix=function(){var p=c.identity([]);return c.translate(p,p,[-100,-100,0]),p};var La=function(p,y,g,w){this.opacity=p?Math.max(0,Math.min(1,p.opacity+(p.placed?y:-y))):w&&g?1:0,this.placed=g};La.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var la=function(p,y,g,w,L){this.text=new La(p?p.text:null,y,g,L),this.icon=new La(p?p.icon:null,y,w,L)};la.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var _c=function(p,y,g){this.text=p,this.icon=y,this.skipFade=g},Pa=function(){this.invProjMatrix=c.create(),this.viewportMatrix=c.create(),this.circles=[]},sl=function(p,y,g,w,L){this.bucketInstanceId=p,this.featureIndex=y,this.sourceLayerIndex=g,this.bucketIndex=w,this.tileID=L},Va=function(p){this.crossSourceCollisions=p,this.maxGroupID=0,this.collisionGroups={}};function ao(p,y,g,w,L){var F=c.getAnchorAlignment(p),N=-(F.horizontalAlign-.5)*y,H=-(F.verticalAlign-.5)*g,Q=c.evaluateVariableOffset(p,w);return new c.Point(N+Q[0]*L,H+Q[1]*L)}function ma(p,y,g,w,L,F){var N=p.x1,H=p.x2,Q=p.y1,oe=p.y2,ye=p.anchorPointX,be=p.anchorPointY,Ee=new c.Point(y,g);return w&&Ee._rotate(L?F:-F),{x1:N+Ee.x,y1:Q+Ee.y,x2:H+Ee.x,y2:oe+Ee.y,anchorPointX:ye,anchorPointY:be}}Va.prototype.get=function(p){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[p]){var y=++this.maxGroupID;this.collisionGroups[p]={ID:y,predicate:function(g){return g.collisionGroupID===y}}}return this.collisionGroups[p]};var ko=function(p,y,g,w){this.transform=p.clone(),this.collisionIndex=new Ma(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Va(g),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}};function rs(p,y,g,w,L){p.emplaceBack(y?1:0,g?1:0,w||0,L||0),p.emplaceBack(y?1:0,g?1:0,w||0,L||0),p.emplaceBack(y?1:0,g?1:0,w||0,L||0),p.emplaceBack(y?1:0,g?1:0,w||0,L||0)}ko.prototype.getBucketParts=function(p,y,g,w){var L=g.getBucket(y),F=g.latestFeatureIndex;if(L&&F&&y.id===L.layerIds[0]){var N=g.collisionBoxArray,H=L.layers[0].layout,Q=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),oe=g.tileSize/c.EXTENT,ye=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),be=H.get("text-pitch-alignment")==="map",Ee=H.get("text-rotation-alignment")==="map",Be=Br(g,1,this.transform.zoom),Re=nn(ye,be,Ee,this.transform,Be),We=null;if(be){var Ce=Fi(ye,be,Ee,this.transform,Be);We=c.multiply([],this.transform.labelPlaneMatrix,Ce)}this.retainedQueryData[L.bucketInstanceId]=new sl(L.bucketInstanceId,F,L.sourceLayerIndex,L.index,g.tileID);var Ve={bucket:L,layout:H,posMatrix:ye,textLabelPlaneMatrix:Re,labelToScreenMatrix:We,scale:Q,textPixelRatio:oe,holdingForFade:g.holdingForFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(L.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(L.sourceID)};if(w)for(var et=0,dt=L.sortKeyRanges;et<dt.length;et+=1){var xt=dt[et];p.push({sortKey:xt.sortKey,symbolInstanceStart:xt.symbolInstanceStart,symbolInstanceEnd:xt.symbolInstanceEnd,parameters:Ve})}else p.push({symbolInstanceStart:0,symbolInstanceEnd:L.symbolInstances.length,parameters:Ve})}},ko.prototype.attemptAnchorPlacement=function(p,y,g,w,L,F,N,H,Q,oe,ye,be,Ee,Be,Re){var We,Ce=[be.textOffset0,be.textOffset1],Ve=ao(p,g,w,Ce,L),et=this.collisionIndex.placeCollisionBox(ma(y,Ve.x,Ve.y,F,N,this.transform.angle),ye,H,Q,oe.predicate);if(!Re||this.collisionIndex.placeCollisionBox(ma(Re,Ve.x,Ve.y,F,N,this.transform.angle),ye,H,Q,oe.predicate).box.length!==0)return et.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID].text&&(We=this.prevPlacement.variableOffsets[be.crossTileID].anchor),this.variableOffsets[be.crossTileID]={textOffset:Ce,width:g,height:w,anchor:p,textBoxScale:L,prevAnchor:We},this.markUsedJustification(Ee,p,be,Be),Ee.allowVerticalPlacement&&(this.markUsedOrientation(Ee,Be,be),this.placedOrientations[be.crossTileID]=Be),{shift:Ve,placedGlyphBoxes:et}):void 0},ko.prototype.placeLayerBucketPart=function(p,y,g){var w=this,L=p.parameters,F=L.bucket,N=L.layout,H=L.posMatrix,Q=L.textLabelPlaneMatrix,oe=L.labelToScreenMatrix,ye=L.textPixelRatio,be=L.holdingForFade,Ee=L.collisionBoxArray,Be=L.partiallyEvaluatedTextSize,Re=L.collisionGroup,We=N.get("text-optional"),Ce=N.get("icon-optional"),Ve=N.get("text-allow-overlap"),et=N.get("icon-allow-overlap"),dt=N.get("text-rotation-alignment")==="map",xt=N.get("text-pitch-alignment")==="map",Tt=N.get("icon-text-fit")!=="none",kt=N.get("symbol-z-order")==="viewport-y",Ht=Ve&&(et||!F.hasIconData()||Ce),oi=et&&(Ve||!F.hasTextData()||We);!F.collisionArrays&&Ee&&F.deserializeCollisionBoxes(Ee);var ri=function(Li,pn){if(!y[Li.crossTileID])if(be)w.placements[Li.crossTileID]=new _c(!1,!1,!1);else{var Fn,cn=!1,an=!1,wn=!0,tn=null,Yi={box:null,offscreen:null},$r={box:null,offscreen:null},uo=null,wo=null,Ko=0,io=0,er=0;pn.textFeatureIndex?Ko=pn.textFeatureIndex:Li.useRuntimeCollisionCircles&&(Ko=Li.featureIndex),pn.verticalTextFeatureIndex&&(io=pn.verticalTextFeatureIndex);var ba=pn.textBox;if(ba){var ha=function(ur){var xa=c.WritingMode.horizontal;if(F.allowVerticalPlacement&&!ur&&w.prevPlacement){var Oa=w.prevPlacement.placedOrientations[Li.crossTileID];Oa&&(w.placedOrientations[Li.crossTileID]=Oa,w.markUsedOrientation(F,xa=Oa,Li))}return xa},Ga=function(ur,xa){if(F.allowVerticalPlacement&&Li.numVerticalGlyphVertices>0&&pn.verticalTextBox)for(var Oa=0,Iu=F.writingModes;Oa<Iu.length&&(Iu[Oa]===c.WritingMode.vertical?(Yi=xa(),$r=Yi):Yi=ur(),!(Yi&&Yi.box&&Yi.box.length));Oa+=1);else Yi=ur()};if(N.get("text-variable-anchor")){var Mo=N.get("text-variable-anchor");if(w.prevPlacement&&w.prevPlacement.variableOffsets[Li.crossTileID]){var Ha=w.prevPlacement.variableOffsets[Li.crossTileID];Mo.indexOf(Ha.anchor)>0&&(Mo=Mo.filter(function(ur){return ur!==Ha.anchor})).unshift(Ha.anchor)}var Za=function(ur,xa,Oa){for(var Iu=ur.x2-ur.x1,tc=ur.y2-ur.y1,ic=Li.textBoxScale,Md=Tt&&!et?xa:null,bl={box:[],offscreen:!1},Ld=Ve?2*Mo.length:Mo.length,xl=0;xl<Ld;++xl){var Lc=w.attemptAnchorPlacement(Mo[xl%Mo.length],ur,Iu,tc,ic,dt,xt,ye,H,Re,xl>=Mo.length,Li,F,Oa,Md);if(Lc&&(bl=Lc.placedGlyphBoxes)&&bl.box&&bl.box.length){cn=!0,tn=Lc.shift;break}}return bl};Ga(function(){return Za(ba,pn.iconBox,c.WritingMode.horizontal)},function(){var ur=pn.verticalTextBox;return F.allowVerticalPlacement&&!(Yi&&Yi.box&&Yi.box.length)&&Li.numVerticalGlyphVertices>0&&ur?Za(ur,pn.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null}}),Yi&&(cn=Yi.box,wn=Yi.offscreen);var Qu=ha(Yi&&Yi.box);if(!cn&&w.prevPlacement){var $u=w.prevPlacement.variableOffsets[Li.crossTileID];$u&&(w.variableOffsets[Li.crossTileID]=$u,w.markUsedJustification(F,$u.anchor,Li,Qu))}}else{var vl=function(ur,xa){var Oa=w.collisionIndex.placeCollisionBox(ur,Ve,ye,H,Re.predicate);return Oa&&Oa.box&&Oa.box.length&&(w.markUsedOrientation(F,xa,Li),w.placedOrientations[Li.crossTileID]=xa),Oa};Ga(function(){return vl(ba,c.WritingMode.horizontal)},function(){var ur=pn.verticalTextBox;return F.allowVerticalPlacement&&Li.numVerticalGlyphVertices>0&&ur?vl(ur,c.WritingMode.vertical):{box:null,offscreen:null}}),ha(Yi&&Yi.box&&Yi.box.length)}}if(cn=(Fn=Yi)&&Fn.box&&Fn.box.length>0,wn=Fn&&Fn.offscreen,Li.useRuntimeCollisionCircles){var ec=F.text.placedSymbolArray.get(Li.centerJustifiedTextSymbolIndex),wu=c.evaluateSizeForFeature(F.textSizeData,Be,ec),Ys=N.get("text-padding");uo=w.collisionIndex.placeCollisionCircles(Ve,ec,F.lineVertexArray,F.glyphOffsetArray,wu,H,Q,oe,g,xt,Re.predicate,Li.collisionCircleDiameter,Ys),cn=Ve||uo.circles.length>0&&!uo.collisionDetected,wn=wn&&uo.offscreen}if(pn.iconFeatureIndex&&(er=pn.iconFeatureIndex),pn.iconBox){var Eu=function(ur){var xa=Tt&&tn?ma(ur,tn.x,tn.y,dt,xt,w.transform.angle):ur;return w.collisionIndex.placeCollisionBox(xa,et,ye,H,Re.predicate)};an=$r&&$r.box&&$r.box.length&&pn.verticalIconBox?(wo=Eu(pn.verticalIconBox)).box.length>0:(wo=Eu(pn.iconBox)).box.length>0,wn=wn&&wo.offscreen}var Ds=We||Li.numHorizontalGlyphVertices===0&&Li.numVerticalGlyphVertices===0,Lo=Ce||Li.numIconVertices===0;if(Ds||Lo?Lo?Ds||(an=an&&cn):cn=an&&cn:an=cn=an&&cn,cn&&Fn&&Fn.box&&w.collisionIndex.insertCollisionBox(Fn.box,N.get("text-ignore-placement"),F.bucketInstanceId,$r&&$r.box&&io?io:Ko,Re.ID),an&&wo&&w.collisionIndex.insertCollisionBox(wo.box,N.get("icon-ignore-placement"),F.bucketInstanceId,er,Re.ID),uo&&(cn&&w.collisionIndex.insertCollisionCircles(uo.circles,N.get("text-ignore-placement"),F.bucketInstanceId,Ko,Re.ID),g)){var Wa=F.bucketInstanceId,Vl=w.collisionCircleArrays[Wa];Vl===void 0&&(Vl=w.collisionCircleArrays[Wa]=new Pa);for(var Rs=0;Rs<uo.circles.length;Rs+=4)Vl.circles.push(uo.circles[Rs+0]),Vl.circles.push(uo.circles[Rs+1]),Vl.circles.push(uo.circles[Rs+2]),Vl.circles.push(uo.collisionDetected?1:0)}w.placements[Li.crossTileID]=new _c(cn||Ht,an||oi,wn||F.justReloaded),y[Li.crossTileID]=!0}};if(kt)for(var Ti=F.getSortedSymbolIndexes(this.transform.angle),Hi=Ti.length-1;Hi>=0;--Hi){var Qi=Ti[Hi];ri(F.symbolInstances.get(Qi),F.collisionArrays[Qi])}else for(var Gi=p.symbolInstanceStart;Gi<p.symbolInstanceEnd;Gi++)ri(F.symbolInstances.get(Gi),F.collisionArrays[Gi]);if(g&&F.bucketInstanceId in this.collisionCircleArrays){var Xn=this.collisionCircleArrays[F.bucketInstanceId];c.invert(Xn.invProjMatrix,H),Xn.viewportMatrix=this.collisionIndex.getViewportMatrix()}F.justReloaded=!1},ko.prototype.markUsedJustification=function(p,y,g,w){var L;L=w===c.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[c.getAnchorJustification(y)];for(var F=0,N=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];F<N.length;F+=1){var H=N[F];H>=0&&(p.text.placedSymbolArray.get(H).crossTileID=L>=0&&H!==L?0:g.crossTileID)}},ko.prototype.markUsedOrientation=function(p,y,g){for(var w=y===c.WritingMode.horizontal||y===c.WritingMode.horizontalOnly?y:0,L=y===c.WritingMode.vertical?y:0,F=0,N=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];F<N.length;F+=1)p.text.placedSymbolArray.get(N[F]).placedOrientation=w;g.verticalPlacedTextSymbolIndex&&(p.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=L)},ko.prototype.commit=function(p){this.commitTime=p,this.zoomAtLastRecencyCheck=this.transform.zoom;var y=this.prevPlacement,g=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;var w=y?y.symbolFadeChange(p):1,L=y?y.opacities:{},F=y?y.variableOffsets:{},N=y?y.placedOrientations:{};for(var H in this.placements){var Q=this.placements[H],oe=L[H];oe?(this.opacities[H]=new la(oe,w,Q.text,Q.icon),g=g||Q.text!==oe.text.placed||Q.icon!==oe.icon.placed):(this.opacities[H]=new la(null,w,Q.text,Q.icon,Q.skipFade),g=g||Q.text||Q.icon)}for(var ye in L){var be=L[ye];if(!this.opacities[ye]){var Ee=new la(be,w,!1,!1);Ee.isHidden()||(this.opacities[ye]=Ee,g=g||be.text.placed||be.icon.placed)}}for(var Be in F)this.variableOffsets[Be]||!this.opacities[Be]||this.opacities[Be].isHidden()||(this.variableOffsets[Be]=F[Be]);for(var Re in N)this.placedOrientations[Re]||!this.opacities[Re]||this.opacities[Re].isHidden()||(this.placedOrientations[Re]=N[Re]);g?this.lastPlacementChangeTime=p:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:p)},ko.prototype.updateLayerOpacities=function(p,y){for(var g={},w=0,L=y;w<L.length;w+=1){var F=L[w],N=F.getBucket(p);N&&F.latestFeatureIndex&&p.id===N.layerIds[0]&&this.updateBucketOpacities(N,g,F.collisionBoxArray)}},ko.prototype.updateBucketOpacities=function(p,y,g){var w=this;p.hasTextData()&&p.text.opacityVertexArray.clear(),p.hasIconData()&&p.icon.opacityVertexArray.clear(),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexArray.clear(),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexArray.clear();var L=p.layers[0].layout,F=new la(null,0,!1,!1,!0),N=L.get("text-allow-overlap"),H=L.get("icon-allow-overlap"),Q=L.get("text-variable-anchor"),oe=L.get("text-rotation-alignment")==="map",ye=L.get("text-pitch-alignment")==="map",be=L.get("icon-text-fit")!=="none",Ee=new la(null,0,N&&(H||!p.hasIconData()||L.get("icon-optional")),H&&(N||!p.hasTextData()||L.get("text-optional")),!0);!p.collisionArrays&&g&&(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData())&&p.deserializeCollisionBoxes(g);for(var Be=function(Ve,et,dt){for(var xt=0;xt<et/4;xt++)Ve.opacityVertexArray.emplaceBack(dt)},Re=function(Ve){var et=p.symbolInstances.get(Ve),dt=et.numHorizontalGlyphVertices,xt=et.numVerticalGlyphVertices,Tt=et.crossTileID,kt=w.opacities[Tt];y[Tt]?kt=F:kt||(w.opacities[Tt]=kt=Ee),y[Tt]=!0;var Ht=et.numIconVertices>0,oi=w.placedOrientations[et.crossTileID],ri=oi===c.WritingMode.vertical,Ti=oi===c.WritingMode.horizontal||oi===c.WritingMode.horizontalOnly;if(dt>0||xt>0){var Hi=xc(kt.text);Be(p.text,dt,ri?bs:Hi),Be(p.text,xt,Ti?bs:Hi);var Qi=kt.text.isHidden();[et.rightJustifiedTextSymbolIndex,et.centerJustifiedTextSymbolIndex,et.leftJustifiedTextSymbolIndex].forEach(function(Yi){Yi>=0&&(p.text.placedSymbolArray.get(Yi).hidden=Qi||ri?1:0)}),et.verticalPlacedTextSymbolIndex>=0&&(p.text.placedSymbolArray.get(et.verticalPlacedTextSymbolIndex).hidden=Qi||Ti?1:0);var Gi=w.variableOffsets[et.crossTileID];Gi&&w.markUsedJustification(p,Gi.anchor,et,oi);var Xn=w.placedOrientations[et.crossTileID];Xn&&(w.markUsedJustification(p,"left",et,Xn),w.markUsedOrientation(p,Xn,et))}if(Ht){var Li=xc(kt.icon),pn=!(be&&et.verticalPlacedIconSymbolIndex&&ri);et.placedIconSymbolIndex>=0&&(Be(p.icon,et.numIconVertices,pn?Li:bs),p.icon.placedSymbolArray.get(et.placedIconSymbolIndex).hidden=kt.icon.isHidden()),et.verticalPlacedIconSymbolIndex>=0&&(Be(p.icon,et.numVerticalIconVertices,pn?bs:Li),p.icon.placedSymbolArray.get(et.verticalPlacedIconSymbolIndex).hidden=kt.icon.isHidden())}if(p.hasIconCollisionBoxData()||p.hasTextCollisionBoxData()){var Fn=p.collisionArrays[Ve];if(Fn){var cn=new c.Point(0,0);if(Fn.textBox||Fn.verticalTextBox){var an=!0;if(Q){var wn=w.variableOffsets[Tt];wn?(cn=ao(wn.anchor,wn.width,wn.height,wn.textOffset,wn.textBoxScale),oe&&cn._rotate(ye?w.transform.angle:-w.transform.angle)):an=!1}Fn.textBox&&rs(p.textCollisionBox.collisionVertexArray,kt.text.placed,!an||ri,cn.x,cn.y),Fn.verticalTextBox&&rs(p.textCollisionBox.collisionVertexArray,kt.text.placed,!an||Ti,cn.x,cn.y)}var tn=Boolean(!Ti&&Fn.verticalIconBox);Fn.iconBox&&rs(p.iconCollisionBox.collisionVertexArray,kt.icon.placed,tn,be?cn.x:0,be?cn.y:0),Fn.verticalIconBox&&rs(p.iconCollisionBox.collisionVertexArray,kt.icon.placed,!tn,be?cn.x:0,be?cn.y:0)}}},We=0;We<p.symbolInstances.length;We++)Re(We);if(p.sortFeatures(this.transform.angle),this.retainedQueryData[p.bucketInstanceId]&&(this.retainedQueryData[p.bucketInstanceId].featureSortOrder=p.featureSortOrder),p.hasTextData()&&p.text.opacityVertexBuffer&&p.text.opacityVertexBuffer.updateData(p.text.opacityVertexArray),p.hasIconData()&&p.icon.opacityVertexBuffer&&p.icon.opacityVertexBuffer.updateData(p.icon.opacityVertexArray),p.hasIconCollisionBoxData()&&p.iconCollisionBox.collisionVertexBuffer&&p.iconCollisionBox.collisionVertexBuffer.updateData(p.iconCollisionBox.collisionVertexArray),p.hasTextCollisionBoxData()&&p.textCollisionBox.collisionVertexBuffer&&p.textCollisionBox.collisionVertexBuffer.updateData(p.textCollisionBox.collisionVertexArray),p.bucketInstanceId in this.collisionCircleArrays){var Ce=this.collisionCircleArrays[p.bucketInstanceId];p.placementInvProjMatrix=Ce.invProjMatrix,p.placementViewportMatrix=Ce.viewportMatrix,p.collisionCircleArray=Ce.circles,delete this.collisionCircleArrays[p.bucketInstanceId]}},ko.prototype.symbolFadeChange=function(p){return this.fadeDuration===0?1:(p-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ko.prototype.zoomAdjustment=function(p){return Math.max(0,(this.transform.zoom-p)/1.5)},ko.prototype.hasTransitions=function(p){return this.stale||p-this.lastPlacementChangeTime<this.fadeDuration},ko.prototype.stillRecent=function(p,y){var g=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*g>p},ko.prototype.setStale=function(){this.stale=!0};var nu=Math.pow(2,25),Vu=Math.pow(2,24),ll=Math.pow(2,17),So=Math.pow(2,16),Cl=Math.pow(2,9),vc=Math.pow(2,8),bc=Math.pow(2,1);function xc(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;var y=p.placed?1:0,g=Math.floor(127*p.opacity);return g*nu+y*Vu+g*ll+y*So+g*Cl+y*vc+g*bc+y}var bs=0,ru=function(p){this._sortAcrossTiles=p.layout.get("symbol-z-order")!=="viewport-y"&&p.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ru.prototype.continuePlacement=function(p,y,g,w,L){for(var F=this._bucketParts;this._currentTileIndex<p.length;)if(y.getBucketParts(F,w,p[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,L())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort(function(N,H){return N.sortKey-H.sortKey}));this._currentPartIndex<F.length;)if(y.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,L())return!0;return!1};var ou=function(p,y,g,w,L,F,N){this.placement=new ko(p,L,F,N),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=w,this._done=!1};ou.prototype.isDone=function(){return this._done},ou.prototype.continuePlacement=function(p,y,g){for(var w=this,L=c.browser.now(),F=function(){var Q=c.browser.now()-L;return!w._forceFullPlacement&&Q>2};this._currentPlacementIndex>=0;){var N=y[p[this._currentPlacementIndex]],H=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=H)&&(!N.maxzoom||N.maxzoom>H)){if(this._inProgressLayer||(this._inProgressLayer=new ru(N)),this._inProgressLayer.continuePlacement(g[N.source],this.placement,this._showCollisionBoxes,N,F))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ou.prototype.commit=function(p){return this.placement.commit(p),this.placement};var ih=512/c.EXTENT/2,kl=function(p,y,g){this.tileID=p,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(var w=0;w<y.length;w++){var L=y.get(w),F=L.key;this.indexedSymbolInstances[F]||(this.indexedSymbolInstances[F]=[]),this.indexedSymbolInstances[F].push({crossTileID:L.crossTileID,coord:this.getScaledCoordinates(L,p)})}};kl.prototype.getScaledCoordinates=function(p,y){var g=ih/Math.pow(2,y.canonical.z-this.tileID.canonical.z);return{x:Math.floor((y.canonical.x*c.EXTENT+p.anchorX)*g),y:Math.floor((y.canonical.y*c.EXTENT+p.anchorY)*g)}},kl.prototype.findMatches=function(p,y,g){for(var w=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z),L=0;L<p.length;L++){var F=p.get(L);if(!F.crossTileID){var N=this.indexedSymbolInstances[F.key];if(N)for(var H=this.getScaledCoordinates(F,y),Q=0,oe=N;Q<oe.length;Q+=1){var ye=oe[Q];if(Math.abs(ye.coord.x-H.x)<=w&&Math.abs(ye.coord.y-H.y)<=w&&!g[ye.crossTileID]){g[ye.crossTileID]=!0,F.crossTileID=ye.crossTileID;break}}}}};var ga=function(){this.maxCrossTileID=0};ga.prototype.generate=function(){return++this.maxCrossTileID};var os=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};os.prototype.handleWrapJump=function(p){var y=Math.round((p-this.lng)/360);if(y!==0)for(var g in this.indexes){var w=this.indexes[g],L={};for(var F in w){var N=w[F];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+y),L[N.tileID.key]=N}this.indexes[g]=L}this.lng=p},os.prototype.addBucket=function(p,y,g){if(this.indexes[p.overscaledZ]&&this.indexes[p.overscaledZ][p.key]){if(this.indexes[p.overscaledZ][p.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(p.overscaledZ,this.indexes[p.overscaledZ][p.key])}for(var w=0;w<y.symbolInstances.length;w++)y.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[p.overscaledZ]||(this.usedCrossTileIDs[p.overscaledZ]={});var L=this.usedCrossTileIDs[p.overscaledZ];for(var F in this.indexes){var N=this.indexes[F];if(Number(F)>p.overscaledZ)for(var H in N){var Q=N[H];Q.tileID.isChildOf(p)&&Q.findMatches(y.symbolInstances,p,L)}else{var oe=N[p.scaledTo(Number(F)).key];oe&&oe.findMatches(y.symbolInstances,p,L)}}for(var ye=0;ye<y.symbolInstances.length;ye++){var be=y.symbolInstances.get(ye);be.crossTileID||(be.crossTileID=g.generate(),L[be.crossTileID]=!0)}return this.indexes[p.overscaledZ]===void 0&&(this.indexes[p.overscaledZ]={}),this.indexes[p.overscaledZ][p.key]=new kl(p,y.symbolInstances,y.bucketInstanceId),!0},os.prototype.removeBucketCrossTileIDs=function(p,y){for(var g in y.indexedSymbolInstances)for(var w=0,L=y.indexedSymbolInstances[g];w<L.length;w+=1)delete this.usedCrossTileIDs[p][L[w].crossTileID]},os.prototype.removeStaleBuckets=function(p){var y=!1;for(var g in this.indexes){var w=this.indexes[g];for(var L in w)p[w[L].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,w[L]),delete w[L],y=!0)}return y};var as=function(){this.layerIndexes={},this.crossTileIDs=new ga,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};as.prototype.addLayer=function(p,y,g){var w=this.layerIndexes[p.id];w===void 0&&(w=this.layerIndexes[p.id]=new os);var L=!1,F={};w.handleWrapJump(g);for(var N=0,H=y;N<H.length;N+=1){var Q=H[N],oe=Q.getBucket(p);oe&&p.id===oe.layerIds[0]&&(oe.bucketInstanceId||(oe.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(Q.tileID,oe,this.crossTileIDs)&&(L=!0),F[oe.bucketInstanceId]=!0)}return w.removeStaleBuckets(F)&&(L=!0),L},as.prototype.pruneUnusedLayers=function(p){var y={};for(var g in p.forEach(function(w){y[w]=!0}),this.layerIndexes)y[g]||delete this.layerIndexes[g]};var Ns=function(p,y){return c.emitValidationErrors(p,y&&y.filter(function(g){return g.identifier!=="source.canvas"}))},ir=c.pick(Pe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Vs=c.pick(Pe,["setCenter","setZoom","setBearing","setPitch"]),js=function(){var p={},y=c.styleSpec.$version;for(var g in c.styleSpec.$root){var w,L=c.styleSpec.$root[g];L.required&&(w=g==="version"?y:L.type==="array"?[]:{})!=null&&(p[g]=w)}return p}(),Uo=function(p){function y(g,w){var L=this;w===void 0&&(w={}),p.call(this),this.map=g,this.dispatcher=new Mt(xe(),this),this.imageManager=new se,this.imageManager.setEventedParent(this),this.glyphManager=new at(g._requestManager,w.localIdeographFontFamily),this.lineAtlas=new qe(256,512),this.crossTileSymbolIndex=new as,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());var F=this;this._rtlTextPluginCallback=y.registerForPluginStateChange(function(N){F.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:N.pluginStatus,pluginURL:N.pluginURL},function(H,Q){if(c.triggerPluginCompletionEvent(H),Q&&Q.every(function(ye){return ye}))for(var oe in F.sourceCaches)F.sourceCaches[oe].reload()})}),this.on("data",function(N){if(N.dataType==="source"&&N.sourceDataType==="metadata"){var H=L.sourceCaches[N.sourceId];if(H){var Q=H.getSource();if(Q&&Q.vectorLayerIds)for(var oe in L._layers){var ye=L._layers[oe];ye.source===Q.id&&L._validateLayer(ye)}}}})}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.loadURL=function(g,w){var L=this;w===void 0&&(w={}),this.fire(new c.Event("dataloading",{dataType:"style"}));var F=typeof w.validate=="boolean"?w.validate:!c.isMapboxURL(g);g=this.map._requestManager.normalizeStyleURL(g,w.accessToken);var N=this.map._requestManager.transformRequest(g,c.ResourceType.Style);this._request=c.getJSON(N,function(H,Q){L._request=null,H?L.fire(new c.ErrorEvent(H)):Q&&L._load(Q,F)})},y.prototype.loadJSON=function(g,w){var L=this;w===void 0&&(w={}),this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.browser.frame(function(){L._request=null,L._load(g,w.validate!==!1)})},y.prototype.loadEmpty=function(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(js,!1)},y.prototype._load=function(g,w){if(!w||!Ns(this,c.validateStyle(g))){for(var L in this._loaded=!0,this.stylesheet=g,g.sources)this.addSource(L,g.sources[L],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs);var F=Me(this.stylesheet.layers);this._order=F.map(function(oe){return oe.id}),this._layers={},this._serializedLayers={};for(var N=0,H=F;N<H.length;N+=1){var Q=H[N];(Q=c.createStyleLayer(Q)).setEventedParent(this,{layer:{id:Q.id}}),this._layers[Q.id]=Q,this._serializedLayers[Q.id]=Q.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Dt(this.stylesheet.light),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}},y.prototype._loadSprite=function(g){var w=this;this._spriteRequest=function(L,F,N){var H,Q,oe,ye=c.browser.devicePixelRatio>1?"@2x":"",be=c.getJSON(F.transformRequest(F.normalizeSpriteURL(L,ye,".json"),c.ResourceType.SpriteJSON),function(Re,We){be=null,oe||(oe=Re,H=We,Be())}),Ee=c.getImage(F.transformRequest(F.normalizeSpriteURL(L,ye,".png"),c.ResourceType.SpriteImage),function(Re,We){Ee=null,oe||(oe=Re,Q=We,Be())});function Be(){if(oe)N(oe);else if(H&&Q){var Re=c.browser.getImageData(Q),We={};for(var Ce in H){var Ve=H[Ce],et=Ve.width,dt=Ve.height,xt=Ve.x,Tt=Ve.y,kt=Ve.sdf,Ht=Ve.pixelRatio,oi=Ve.stretchX,ri=Ve.stretchY,Ti=Ve.content,Hi=new c.RGBAImage({width:et,height:dt});c.RGBAImage.copy(Re,Hi,{x:xt,y:Tt},{x:0,y:0},{width:et,height:dt}),We[Ce]={data:Hi,pixelRatio:Ht,sdf:kt,stretchX:oi,stretchY:ri,content:Ti}}N(null,We)}}return{cancel:function(){be&&(be.cancel(),be=null),Ee&&(Ee.cancel(),Ee=null)}}}(g,this.map._requestManager,function(L,F){if(w._spriteRequest=null,L)w.fire(new c.ErrorEvent(L));else if(F)for(var N in F)w.imageManager.addImage(N,F[N]);w.imageManager.setLoaded(!0),w._availableImages=w.imageManager.listImages(),w.dispatcher.broadcast("setImages",w._availableImages),w.fire(new c.Event("data",{dataType:"style"}))})},y.prototype._validateLayer=function(g){var w=this.sourceCaches[g.source];if(w){var L=g.sourceLayer;if(L){var F=w.getSource();(F.type==="geojson"||F.vectorLayerIds&&F.vectorLayerIds.indexOf(L)===-1)&&this.fire(new c.ErrorEvent(new Error('Source layer "'+L+'" does not exist on source "'+F.id+'" as specified by style layer "'+g.id+'"')))}}},y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var g in this.sourceCaches)if(!this.sourceCaches[g].loaded())return!1;return!!this.imageManager.isLoaded()},y.prototype._serializeLayers=function(g){for(var w=[],L=0,F=g;L<F.length;L+=1){var N=this._layers[F[L]];N.type!=="custom"&&w.push(N.serialize())}return w},y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var g in this.sourceCaches)if(this.sourceCaches[g].hasTransition())return!0;for(var w in this._layers)if(this._layers[w].hasTransition())return!0;return!1},y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},y.prototype.update=function(g){if(this._loaded){var w=this._changed;if(this._changed){var L=Object.keys(this._updatedLayers),F=Object.keys(this._removedLayers);for(var N in(L.length||F.length)&&this._updateWorkerLayers(L,F),this._updatedSources){var H=this._updatedSources[N];H==="reload"?this._reloadSource(N):H==="clear"&&this._clearSource(N)}for(var Q in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Q].updateTransitions(g);this.light.updateTransitions(g),this._resetUpdates()}var oe={};for(var ye in this.sourceCaches){var be=this.sourceCaches[ye];oe[ye]=be.used,be.used=!1}for(var Ee=0,Be=this._order;Ee<Be.length;Ee+=1){var Re=this._layers[Be[Ee]];Re.recalculate(g,this._availableImages),!Re.isHidden(g.zoom)&&Re.source&&(this.sourceCaches[Re.source].used=!0)}for(var We in oe){var Ce=this.sourceCaches[We];oe[We]!==Ce.used&&Ce.fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:We}))}this.light.recalculate(g),this.z=g.zoom,w&&this.fire(new c.Event("data",{dataType:"style"}))}},y.prototype._updateTilesForChangedImages=function(){var g=Object.keys(this._changedImages);if(g.length){for(var w in this.sourceCaches)this.sourceCaches[w].reloadTilesForDependencies(["icons","patterns"],g);this._changedImages={}}},y.prototype._updateWorkerLayers=function(g,w){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(g),removedIds:w})},y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},y.prototype.setState=function(g){var w=this;if(this._checkLoaded(),Ns(this,c.validateStyle(g)))return!1;(g=c.clone$1(g)).layers=Me(g.layers);var L=function(N,H){if(!N)return[{command:Pe.setStyle,args:[H]}];var Q=[];try{if(!c.deepEqual(N.version,H.version))return[{command:Pe.setStyle,args:[H]}];c.deepEqual(N.center,H.center)||Q.push({command:Pe.setCenter,args:[H.center]}),c.deepEqual(N.zoom,H.zoom)||Q.push({command:Pe.setZoom,args:[H.zoom]}),c.deepEqual(N.bearing,H.bearing)||Q.push({command:Pe.setBearing,args:[H.bearing]}),c.deepEqual(N.pitch,H.pitch)||Q.push({command:Pe.setPitch,args:[H.pitch]}),c.deepEqual(N.sprite,H.sprite)||Q.push({command:Pe.setSprite,args:[H.sprite]}),c.deepEqual(N.glyphs,H.glyphs)||Q.push({command:Pe.setGlyphs,args:[H.glyphs]}),c.deepEqual(N.transition,H.transition)||Q.push({command:Pe.setTransition,args:[H.transition]}),c.deepEqual(N.light,H.light)||Q.push({command:Pe.setLight,args:[H.light]});var oe={},ye=[];(function(Ee,Be,Re,We){var Ce;for(Ce in Be=Be||{},Ee=Ee||{})Ee.hasOwnProperty(Ce)&&(Be.hasOwnProperty(Ce)||st(Ce,Re,We));for(Ce in Be)Be.hasOwnProperty(Ce)&&(Ee.hasOwnProperty(Ce)?c.deepEqual(Ee[Ce],Be[Ce])||(Ee[Ce].type==="geojson"&&Be[Ce].type==="geojson"&&si(Ee,Be,Ce)?Re.push({command:Pe.setGeoJSONSourceData,args:[Ce,Be[Ce].data]}):_t(Ce,Be,Re,We)):yt(Ce,Be,Re))})(N.sources,H.sources,ye,oe);var be=[];N.layers&&N.layers.forEach(function(Ee){oe[Ee.source]?Q.push({command:Pe.removeLayer,args:[Ee.id]}):be.push(Ee)}),Q=Q.concat(ye),function(Ee,Be,Re){Be=Be||[];var We,Ce,Ve,et,dt,xt,Tt,kt=(Ee=Ee||[]).map(Yt),Ht=Be.map(Yt),oi=Ee.reduce(hi,{}),ri=Be.reduce(hi,{}),Ti=kt.slice(),Hi=Object.create(null);for(We=0,Ce=0;We<kt.length;We++)ri.hasOwnProperty(Ve=kt[We])?Ce++:(Re.push({command:Pe.removeLayer,args:[Ve]}),Ti.splice(Ti.indexOf(Ve,Ce),1));for(We=0,Ce=0;We<Ht.length;We++)Ti[Ti.length-1-We]!==(Ve=Ht[Ht.length-1-We])&&(oi.hasOwnProperty(Ve)?(Re.push({command:Pe.removeLayer,args:[Ve]}),Ti.splice(Ti.lastIndexOf(Ve,Ti.length-Ce),1)):Ce++,Re.push({command:Pe.addLayer,args:[ri[Ve],xt=Ti[Ti.length-We]]}),Ti.splice(Ti.length-We,0,Ve),Hi[Ve]=!0);for(We=0;We<Ht.length;We++)if(et=oi[Ve=Ht[We]],dt=ri[Ve],!Hi[Ve]&&!c.deepEqual(et,dt))if(c.deepEqual(et.source,dt.source)&&c.deepEqual(et["source-layer"],dt["source-layer"])&&c.deepEqual(et.type,dt.type)){for(Tt in De(et.layout,dt.layout,Re,Ve,null,Pe.setLayoutProperty),De(et.paint,dt.paint,Re,Ve,null,Pe.setPaintProperty),c.deepEqual(et.filter,dt.filter)||Re.push({command:Pe.setFilter,args:[Ve,dt.filter]}),c.deepEqual(et.minzoom,dt.minzoom)&&c.deepEqual(et.maxzoom,dt.maxzoom)||Re.push({command:Pe.setLayerZoomRange,args:[Ve,dt.minzoom,dt.maxzoom]}),et)et.hasOwnProperty(Tt)&&Tt!=="layout"&&Tt!=="paint"&&Tt!=="filter"&&Tt!=="metadata"&&Tt!=="minzoom"&&Tt!=="maxzoom"&&(Tt.indexOf("paint.")===0?De(et[Tt],dt[Tt],Re,Ve,Tt.slice(6),Pe.setPaintProperty):c.deepEqual(et[Tt],dt[Tt])||Re.push({command:Pe.setLayerProperty,args:[Ve,Tt,dt[Tt]]}));for(Tt in dt)dt.hasOwnProperty(Tt)&&!et.hasOwnProperty(Tt)&&Tt!=="layout"&&Tt!=="paint"&&Tt!=="filter"&&Tt!=="metadata"&&Tt!=="minzoom"&&Tt!=="maxzoom"&&(Tt.indexOf("paint.")===0?De(et[Tt],dt[Tt],Re,Ve,Tt.slice(6),Pe.setPaintProperty):c.deepEqual(et[Tt],dt[Tt])||Re.push({command:Pe.setLayerProperty,args:[Ve,Tt,dt[Tt]]}))}else Re.push({command:Pe.removeLayer,args:[Ve]}),xt=Ti[Ti.lastIndexOf(Ve)+1],Re.push({command:Pe.addLayer,args:[dt,xt]})}(be,H.layers,Q)}catch(Ee){console.warn("Unable to compute style diff:",Ee),Q=[{command:Pe.setStyle,args:[H]}]}return Q}(this.serialize(),g).filter(function(N){return!(N.command in Vs)});if(L.length===0)return!1;var F=L.filter(function(N){return!(N.command in ir)});if(F.length>0)throw new Error("Unimplemented: "+F.map(function(N){return N.command}).join(", ")+".");return L.forEach(function(N){N.command!=="setTransition"&&w[N.command].apply(w,N.args)}),this.stylesheet=g,!0},y.prototype.addImage=function(g,w){if(this.getImage(g))return this.fire(new c.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(g,w),this._afterImageUpdated(g)},y.prototype.updateImage=function(g,w){this.imageManager.updateImage(g,w)},y.prototype.getImage=function(g){return this.imageManager.getImage(g)},y.prototype.removeImage=function(g){if(!this.getImage(g))return this.fire(new c.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(g),this._afterImageUpdated(g)},y.prototype._afterImageUpdated=function(g){this._availableImages=this.imageManager.listImages(),this._changedImages[g]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))},y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},y.prototype.addSource=function(g,w,L){var F=this;if(L===void 0&&(L={}),this._checkLoaded(),this.sourceCaches[g]!==void 0)throw new Error("There is already a source with this ID");if(!w.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(w).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(w.type)>=0&&this._validate(c.validateStyle.source,"sources."+g,w,null,L))){this.map&&this.map._collectResourceTiming&&(w.collectResourceTiming=!0);var N=this.sourceCaches[g]=new Ne(g,w,this.dispatcher);N.style=this,N.setEventedParent(this,function(){return{isSourceLoaded:F.loaded(),source:N.serialize(),sourceId:g}}),N.onAdd(this.map),this._changed=!0}},y.prototype.removeSource=function(g){if(this._checkLoaded(),this.sourceCaches[g]===void 0)throw new Error("There is no source with this ID");for(var w in this._layers)if(this._layers[w].source===g)return this.fire(new c.ErrorEvent(new Error('Source "'+g+'" cannot be removed while layer "'+w+'" is using it.')));var L=this.sourceCaches[g];delete this.sourceCaches[g],delete this._updatedSources[g],L.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:g})),L.setEventedParent(null),L.clearTiles(),L.onRemove&&L.onRemove(this.map),this._changed=!0},y.prototype.setGeoJSONSourceData=function(g,w){this._checkLoaded(),this.sourceCaches[g].getSource().setData(w),this._changed=!0},y.prototype.getSource=function(g){return this.sourceCaches[g]&&this.sourceCaches[g].getSource()},y.prototype.addLayer=function(g,w,L){L===void 0&&(L={}),this._checkLoaded();var F=g.id;if(this.getLayer(F))this.fire(new c.ErrorEvent(new Error('Layer with id "'+F+'" already exists on this map')));else{var N;if(g.type==="custom"){if(Ns(this,c.validateCustomStyleLayer(g)))return;N=c.createStyleLayer(g)}else{if(typeof g.source=="object"&&(this.addSource(F,g.source),g=c.clone$1(g),g=c.extend(g,{source:F})),this._validate(c.validateStyle.layer,"layers."+F,g,{arrayIndex:-1},L))return;N=c.createStyleLayer(g),this._validateLayer(N),N.setEventedParent(this,{layer:{id:F}}),this._serializedLayers[N.id]=N.serialize()}var H=w?this._order.indexOf(w):this._order.length;if(w&&H===-1)this.fire(new c.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.')));else{if(this._order.splice(H,0,F),this._layerOrderChanged=!0,this._layers[F]=N,this._removedLayers[F]&&N.source&&N.type!=="custom"){var Q=this._removedLayers[F];delete this._removedLayers[F],Q.type!==N.type?this._updatedSources[N.source]="clear":(this._updatedSources[N.source]="reload",this.sourceCaches[N.source].pause())}this._updateLayer(N),N.onAdd&&N.onAdd(this.map)}}},y.prototype.moveLayer=function(g,w){if(this._checkLoaded(),this._changed=!0,this._layers[g]){if(g!==w){var L=this._order.indexOf(g);this._order.splice(L,1);var F=w?this._order.indexOf(w):this._order.length;w&&F===-1?this.fire(new c.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.'))):(this._order.splice(F,0,g),this._layerOrderChanged=!0)}}else this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be moved.")))},y.prototype.removeLayer=function(g){this._checkLoaded();var w=this._layers[g];if(w){w.setEventedParent(null);var L=this._order.indexOf(g);this._order.splice(L,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[g]=w,delete this._layers[g],delete this._serializedLayers[g],delete this._updatedLayers[g],delete this._updatedPaintProps[g],w.onRemove&&w.onRemove(this.map)}else this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be removed.")))},y.prototype.getLayer=function(g){return this._layers[g]},y.prototype.hasLayer=function(g){return g in this._layers},y.prototype.setLayerZoomRange=function(g,w,L){this._checkLoaded();var F=this.getLayer(g);F?F.minzoom===w&&F.maxzoom===L||(w!=null&&(F.minzoom=w),L!=null&&(F.maxzoom=L),this._updateLayer(F)):this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot have zoom extent.")))},y.prototype.setFilter=function(g,w,L){L===void 0&&(L={}),this._checkLoaded();var F=this.getLayer(g);if(F){if(!c.deepEqual(F.filter,w))return w==null?(F.filter=void 0,void this._updateLayer(F)):void(this._validate(c.validateStyle.filter,"layers."+F.id+".filter",w,null,L)||(F.filter=c.clone$1(w),this._updateLayer(F)))}else this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be filtered.")))},y.prototype.getFilter=function(g){return c.clone$1(this.getLayer(g).filter)},y.prototype.setLayoutProperty=function(g,w,L,F){F===void 0&&(F={}),this._checkLoaded();var N=this.getLayer(g);N?c.deepEqual(N.getLayoutProperty(w),L)||(N.setLayoutProperty(w,L,F),this._updateLayer(N)):this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},y.prototype.getLayoutProperty=function(g,w){var L=this.getLayer(g);if(L)return L.getLayoutProperty(w);this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style.")))},y.prototype.setPaintProperty=function(g,w,L,F){F===void 0&&(F={}),this._checkLoaded();var N=this.getLayer(g);N?c.deepEqual(N.getPaintProperty(w),L)||(N.setPaintProperty(w,L,F)&&this._updateLayer(N),this._changed=!0,this._updatedPaintProps[g]=!0):this.fire(new c.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},y.prototype.getPaintProperty=function(g,w){return this.getLayer(g).getPaintProperty(w)},y.prototype.setFeatureState=function(g,w){this._checkLoaded();var L=g.source,F=g.sourceLayer,N=this.sourceCaches[L];if(N!==void 0){var H=N.getSource().type;H==="geojson"&&F?this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):H!=="vector"||F?(g.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),N.setFeatureState(F,g.id,w)):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+L+"' does not exist in the map's style.")))},y.prototype.removeFeatureState=function(g,w){this._checkLoaded();var L=g.source,F=this.sourceCaches[L];if(F!==void 0){var N=F.getSource().type,H=N==="vector"?g.sourceLayer:void 0;N!=="vector"||H?w&&typeof g.id!="string"&&typeof g.id!="number"?this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):F.removeFeatureState(H,g.id,w):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+L+"' does not exist in the map's style.")))},y.prototype.getFeatureState=function(g){this._checkLoaded();var w=g.source,L=g.sourceLayer,F=this.sourceCaches[w];if(F!==void 0){if(F.getSource().type!=="vector"||L)return g.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),F.getFeatureState(L,g.id);this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+w+"' does not exist in the map's style.")))},y.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},y.prototype.serialize=function(){return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(g){return g.serialize()}),layers:this._serializeLayers(this._order)},function(g){return g!==void 0})},y.prototype._updateLayer=function(g){this._updatedLayers[g.id]=!0,g.source&&!this._updatedSources[g.source]&&this.sourceCaches[g.source].getSource().type!=="raster"&&(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause()),this._changed=!0},y.prototype._flattenAndSortRenderedFeatures=function(g){for(var w=this,L=function(oi){return w._layers[oi].type==="fill-extrusion"},F={},N=[],H=this._order.length-1;H>=0;H--){var Q=this._order[H];if(L(Q)){F[Q]=H;for(var oe=0,ye=g;oe<ye.length;oe+=1){var be=ye[oe][Q];if(be)for(var Ee=0,Be=be;Ee<Be.length;Ee+=1)N.push(Be[Ee])}}}N.sort(function(oi,ri){return ri.intersectionZ-oi.intersectionZ});for(var Re=[],We=this._order.length-1;We>=0;We--){var Ce=this._order[We];if(L(Ce))for(var Ve=N.length-1;Ve>=0;Ve--){var et=N[Ve].feature;if(F[et.layer.id]<We)break;Re.push(et),N.pop()}else for(var dt=0,xt=g;dt<xt.length;dt+=1){var Tt=xt[dt][Ce];if(Tt)for(var kt=0,Ht=Tt;kt<Ht.length;kt+=1)Re.push(Ht[kt].feature)}}return Re},y.prototype.queryRenderedFeatures=function(g,w,L){w&&w.filter&&this._validate(c.validateStyle.filter,"queryRenderedFeatures.filter",w.filter,null,w);var F={};if(w&&w.layers){if(!Array.isArray(w.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var N=0,H=w.layers;N<H.length;N+=1){var Q=H[N],oe=this._layers[Q];if(!oe)return this.fire(new c.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be queried for features."))),[];F[oe.source]=!0}}var ye=[];for(var be in w.availableImages=this._availableImages,this.sourceCaches)w.layers&&!F[be]||ye.push(ai(this.sourceCaches[be],this._layers,this._serializedLayers,g,w,L));return this.placement&&ye.push(function(Ee,Be,Re,We,Ce,Ve,et){for(var dt={},xt=Ve.queryRenderedSymbols(We),Tt=[],kt=0,Ht=Object.keys(xt).map(Number);kt<Ht.length;kt+=1)Tt.push(et[Ht[kt]]);Tt.sort(ht);for(var oi=function(){var Gi=Ti[ri],Xn=Gi.featureIndex.lookupSymbolFeatures(xt[Gi.bucketInstanceId],Be,Gi.bucketIndex,Gi.sourceLayerIndex,Ce.filter,Ce.layers,Ce.availableImages,Ee);for(var Li in Xn){var pn=dt[Li]=dt[Li]||[],Fn=Xn[Li];Fn.sort(function(wn,tn){var Yi=Gi.featureSortOrder;if(Yi){var $r=Yi.indexOf(wn.featureIndex);return Yi.indexOf(tn.featureIndex)-$r}return tn.featureIndex-wn.featureIndex});for(var cn=0,an=Fn;cn<an.length;cn+=1)pn.push(an[cn])}},ri=0,Ti=Tt;ri<Ti.length;ri+=1)oi();var Hi=function(Gi){dt[Gi].forEach(function(Xn){var Li=Xn.feature,pn=Re[Ee[Gi].source].getFeatureState(Li.layer["source-layer"],Li.id);Li.source=Li.layer.source,Li.layer["source-layer"]&&(Li.sourceLayer=Li.layer["source-layer"]),Li.state=pn})};for(var Qi in dt)Hi(Qi);return dt}(this._layers,this._serializedLayers,this.sourceCaches,g,w,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ye)},y.prototype.querySourceFeatures=function(g,w){w&&w.filter&&this._validate(c.validateStyle.filter,"querySourceFeatures.filter",w.filter,null,w);var L=this.sourceCaches[g];return L?function(F,N){for(var H=F.getRenderableIds().map(function(Be){return F.getTileByID(Be)}),Q=[],oe={},ye=0;ye<H.length;ye++){var be=H[ye],Ee=be.tileID.canonical.key;oe[Ee]||(oe[Ee]=!0,be.querySourceFeatures(Q,N))}return Q}(L,w):[]},y.prototype.addSourceType=function(g,w,L){return y.getSourceType(g)?L(new Error('A source type called "'+g+'" already exists.')):(y.setSourceType(g,w),w.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:g,url:w.workerSourceURL},L):L(null,null))},y.prototype.getLight=function(){return this.light.getLight()},y.prototype.setLight=function(g,w){w===void 0&&(w={}),this._checkLoaded();var L=this.light.getLight(),F=!1;for(var N in g)if(!c.deepEqual(g[N],L[N])){F=!0;break}if(F){var H={now:c.browser.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(g,w),this.light.updateTransitions(H)}},y.prototype._validate=function(g,w,L,F,N){return N===void 0&&(N={}),(!N||N.validate!==!1)&&Ns(this,g.call(c.validateStyle,c.extend({key:w,style:this.serialize(),value:L,styleSpec:c.styleSpec},F)))},y.prototype._remove=function(){for(var g in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[g].setEventedParent(null);for(var w in this.sourceCaches)this.sourceCaches[w].clearTiles(),this.sourceCaches[w].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},y.prototype._clearSource=function(g){this.sourceCaches[g].clearTiles()},y.prototype._reloadSource=function(g){this.sourceCaches[g].resume(),this.sourceCaches[g].reload()},y.prototype._updateSources=function(g){for(var w in this.sourceCaches)this.sourceCaches[w].update(g)},y.prototype._generateCollisionBoxes=function(){for(var g in this.sourceCaches)this._reloadSource(g)},y.prototype._updatePlacement=function(g,w,L,F,N){N===void 0&&(N=!1);for(var H=!1,Q=!1,oe={},ye=0,be=this._order;ye<be.length;ye+=1){var Ee=this._layers[be[ye]];if(Ee.type==="symbol"){if(!oe[Ee.source]){var Be=this.sourceCaches[Ee.source];oe[Ee.source]=Be.getRenderableIds(!0).map(function(et){return Be.getTileByID(et)}).sort(function(et,dt){return dt.tileID.overscaledZ-et.tileID.overscaledZ||(et.tileID.isLessThan(dt.tileID)?-1:1)})}var Re=this.crossTileSymbolIndex.addLayer(Ee,oe[Ee.source],g.center.lng);H=H||Re}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((N=N||this._layerOrderChanged||L===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.browser.now(),g.zoom))&&(this.pauseablePlacement=new ou(g,this._order,N,w,L,F,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,oe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.browser.now()),Q=!0),H&&this.pauseablePlacement.placement.setStale()),Q||H)for(var We=0,Ce=this._order;We<Ce.length;We+=1){var Ve=this._layers[Ce[We]];Ve.type==="symbol"&&this.placement.updateLayerOpacities(Ve,oe[Ve.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.browser.now())},y.prototype._releaseSymbolFadeTiles=function(){for(var g in this.sourceCaches)this.sourceCaches[g].releaseSymbolFadeTiles()},y.prototype.getImages=function(g,w,L){this.imageManager.getImages(w.icons,L),this._updateTilesForChangedImages();var F=this.sourceCaches[w.source];F&&F.setDependencies(w.tileID.key,w.type,w.icons)},y.prototype.getGlyphs=function(g,w,L){this.glyphManager.getGlyphs(w.stacks,L)},y.prototype.getResource=function(g,w,L){return c.makeRequest(w,L)},y}(c.Evented);Uo.getSourceType=function(p){return Jt[p]},Uo.setSourceType=function(p,y){Jt[p]=y},Uo.registerForPluginStateChange=c.registerForPluginStateChange;var so=c.createLayout([{name:"a_pos",type:"Int16",components:2}]),No=kr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),ju=kr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),qu=kr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Gu=kr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),au=kr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),su=kr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Ml=kr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),lu=kr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Hu=kr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),uu=kr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),nh=kr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Ll=kr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ss=kr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),rh=kr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Vo=kr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),wc=kr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),qs=kr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Gs=kr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ul=kr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),xs=kr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ls=kr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),ja=kr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Hs=kr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ws=kr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Zu=kr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Zs=kr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function kr(p,y){var g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=y.match(/attribute ([\w]+) ([\w]+)/g),L=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),N=F?F.concat(L):L,H={};return{fragmentSource:p=p.replace(g,function(Q,oe,ye,be,Ee){return H[Ee]=!0,oe==="define"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
varying `+ye+" "+be+" "+Ee+`;
#else
uniform `+ye+" "+be+" u_"+Ee+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Ee+`
    `+ye+" "+be+" "+Ee+" = u_"+Ee+`;
#endif
`}),vertexSource:y=y.replace(g,function(Q,oe,ye,be,Ee){var Be=be==="float"?"vec2":"vec4",Re=Ee.match(/color/)?"color":Be;return H[Ee]?oe==="define"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
uniform lowp float u_`+Ee+`_t;
attribute `+ye+" "+Be+" a_"+Ee+`;
varying `+ye+" "+be+" "+Ee+`;
#else
uniform `+ye+" "+be+" u_"+Ee+`;
#endif
`:Re==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+Ee+" = a_"+Ee+`;
#else
    `+ye+" "+be+" "+Ee+" = u_"+Ee+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+Ee+" = unpack_mix_"+Re+"(a_"+Ee+", u_"+Ee+`_t);
#else
    `+ye+" "+be+" "+Ee+" = u_"+Ee+`;
#endif
`:oe==="define"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
uniform lowp float u_`+Ee+`_t;
attribute `+ye+" "+Be+" a_"+Ee+`;
#else
uniform `+ye+" "+be+" u_"+Ee+`;
#endif
`:Re==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+ye+" "+be+" "+Ee+" = a_"+Ee+`;
#else
    `+ye+" "+be+" "+Ee+" = u_"+Ee+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ee+`
    `+ye+" "+be+" "+Ee+" = unpack_mix_"+Re+"(a_"+Ee+", u_"+Ee+`_t);
#else
    `+ye+" "+be+" "+Ee+" = u_"+Ee+`;
#endif
`}),staticAttributes:w,staticUniforms:N}}var cl=Object.freeze({__proto__:null,prelude:No,background:ju,backgroundPattern:qu,circle:Gu,clippingMask:au,heatmap:su,heatmapTexture:Ml,collisionBox:lu,collisionCircle:Hu,debug:uu,fill:nh,fillOutline:Ll,fillOutlinePattern:ss,fillPattern:rh,fillExtrusion:Vo,fillExtrusionPattern:wc,hillshadePrepare:qs,hillshade:Gs,line:ul,lineGradient:xs,linePattern:ls,lineSDF:ja,raster:Hs,symbolIcon:ws,symbolSDF:Zu,symbolTextAndIcon:Zs}),Es=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Ec(p){for(var y=[],g=0;g<p.length;g++)if(p[g]!==null){var w=p[g].split(" ");y.push(w.pop())}return y}Es.prototype.bind=function(p,y,g,w,L,F,N,H){this.context=p;for(var Q=this.boundPaintVertexBuffers.length!==w.length,oe=0;!Q&&oe<w.length;oe++)this.boundPaintVertexBuffers[oe]!==w[oe]&&(Q=!0);p.extVertexArrayObject&&this.vao&&this.boundProgram===y&&this.boundLayoutVertexBuffer===g&&!Q&&this.boundIndexBuffer===L&&this.boundVertexOffset===F&&this.boundDynamicVertexBuffer===N&&this.boundDynamicVertexBuffer2===H?(p.bindVertexArrayOES.set(this.vao),N&&N.bind(),L&&L.dynamicDraw&&L.bind(),H&&H.bind()):this.freshBind(y,g,w,L,F,N,H)},Es.prototype.freshBind=function(p,y,g,w,L,F,N){var H,Q=p.numAttributes,oe=this.context,ye=oe.gl;if(oe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=oe.extVertexArrayObject.createVertexArrayOES(),oe.bindVertexArrayOES.set(this.vao),H=0,this.boundProgram=p,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=w,this.boundVertexOffset=L,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=N;else{H=oe.currentNumAttributes||0;for(var be=Q;be<H;be++)ye.disableVertexAttribArray(be)}y.enableAttributes(ye,p);for(var Ee=0,Be=g;Ee<Be.length;Ee+=1)Be[Ee].enableAttributes(ye,p);F&&F.enableAttributes(ye,p),N&&N.enableAttributes(ye,p),y.bind(),y.setVertexAttribPointers(ye,p,L);for(var Re=0,We=g;Re<We.length;Re+=1){var Ce=We[Re];Ce.bind(),Ce.setVertexAttribPointers(ye,p,L)}F&&(F.bind(),F.setVertexAttribPointers(ye,p,L)),w&&w.bind(),N&&(N.bind(),N.setVertexAttribPointers(ye,p,L)),oe.currentNumAttributes=Q},Es.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Wu=function(p,y,g,w,L,F){var N=p.gl;this.program=N.createProgram();for(var H=Ec(g.staticAttributes),Q=w?w.getBinderAttributes():[],oe=H.concat(Q),ye=g.staticUniforms?Ec(g.staticUniforms):[],be=w?w.getBinderUniforms():[],Ee=[],Be=0,Re=ye.concat(be);Be<Re.length;Be+=1){var We=Re[Be];Ee.indexOf(We)<0&&Ee.push(We)}var Ce=w?w.defines():[];F&&Ce.push("#define OVERDRAW_INSPECTOR;");var Ve=Ce.concat(No.fragmentSource,g.fragmentSource).join(`
`),et=Ce.concat(No.vertexSource,g.vertexSource).join(`
`),dt=N.createShader(N.FRAGMENT_SHADER);if(N.isContextLost())this.failedToCreate=!0;else{N.shaderSource(dt,Ve),N.compileShader(dt),N.attachShader(this.program,dt);var xt=N.createShader(N.VERTEX_SHADER);if(N.isContextLost())this.failedToCreate=!0;else{N.shaderSource(xt,et),N.compileShader(xt),N.attachShader(this.program,xt),this.attributes={};var Tt={};this.numAttributes=oe.length;for(var kt=0;kt<this.numAttributes;kt++)oe[kt]&&(N.bindAttribLocation(this.program,kt,oe[kt]),this.attributes[oe[kt]]=kt);N.linkProgram(this.program),N.deleteShader(xt),N.deleteShader(dt);for(var Ht=0;Ht<Ee.length;Ht++){var oi=Ee[Ht];if(oi&&!Tt[oi]){var ri=N.getUniformLocation(this.program,oi);ri&&(Tt[oi]=ri)}}this.fixedUniforms=L(p,Tt),this.binderUniforms=w?w.getUniforms(p,Tt):[]}}};function Pn(p,y,g){var w=1/Br(g,1,y.transform.tileZoom),L=Math.pow(2,g.tileID.overscaledZ),F=g.tileSize*Math.pow(2,y.transform.tileZoom)/L,N=F*(g.tileID.canonical.x+g.tileID.wrap*L),H=F*g.tileID.canonical.y;return{u_image:0,u_texsize:g.imageAtlasTexture.size,u_scale:[w,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[N>>16,H>>16],u_pixel_coord_lower:[65535&N,65535&H]}}Wu.prototype.draw=function(p,y,g,w,L,F,N,H,Q,oe,ye,be,Ee,Be,Re,We){var Ce,Ve=p.gl;if(!this.failedToCreate){for(var et in p.program.set(this.program),p.setDepthMode(g),p.setStencilMode(w),p.setColorMode(L),p.setCullFace(F),this.fixedUniforms)this.fixedUniforms[et].set(N[et]);Be&&Be.setUniforms(p,this.binderUniforms,be,{zoom:Ee});for(var dt=(Ce={},Ce[Ve.LINES]=2,Ce[Ve.TRIANGLES]=3,Ce[Ve.LINE_STRIP]=1,Ce)[y],xt=0,Tt=ye.get();xt<Tt.length;xt+=1){var kt=Tt[xt],Ht=kt.vaos||(kt.vaos={});(Ht[H]||(Ht[H]=new Es)).bind(p,this,Q,Be?Be.getPaintVertexBuffers():[],oe,kt.vertexOffset,Re,We),Ve.drawElements(y,kt.primitiveLength*dt,Ve.UNSIGNED_SHORT,kt.primitiveOffset*dt*2)}}};var cu=function(p,y,g,w){var L=y.style.light,F=L.properties.get("position"),N=[F.x,F.y,F.z],H=c.create$1();L.properties.get("anchor")==="viewport"&&c.fromRotation(H,-y.transform.angle),c.transformMat3(N,N,H);var Q=L.properties.get("color");return{u_matrix:p,u_lightpos:N,u_lightintensity:L.properties.get("intensity"),u_lightcolor:[Q.r,Q.g,Q.b],u_vertical_gradient:+g,u_opacity:w}},lr=function(p,y,g,w,L,F,N){return c.extend(cu(p,y,g,w),Pn(F,y,N),{u_height_factor:-Math.pow(2,L.overscaledZ)/N.tileSize/8})},Xa=function(p){return{u_matrix:p}},Pr=function(p,y,g,w){return c.extend(Xa(p),Pn(g,y,w))},lo=function(p,y){return{u_matrix:p,u_world:y}},hu=function(p,y,g,w,L){return c.extend(Pr(p,y,g,w),{u_world:L})},du=function(p,y,g,w){var L,F,N=p.transform;if(w.paint.get("circle-pitch-alignment")==="map"){var H=Br(g,1,N.zoom);L=!0,F=[H,H]}else L=!1,F=N.pixelsToGLUnits;return{u_camera_to_center_distance:N.cameraToCenterDistance,u_scale_with_map:+(w.paint.get("circle-pitch-scale")==="map"),u_matrix:p.translatePosMatrix(y.posMatrix,g,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_pitch_with_map:+L,u_device_pixel_ratio:c.browser.devicePixelRatio,u_extrude_scale:F}},hl=function(p,y,g){var w=Br(g,1,y.zoom),L=Math.pow(2,y.zoom-g.tileID.overscaledZ),F=g.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:y.cameraToCenterDistance,u_pixels_to_tile_units:w,u_extrude_scale:[y.pixelsToGLUnits[0]/(w*L),y.pixelsToGLUnits[1]/(w*L)],u_overscale_factor:F}},Xu=function(p,y,g){return{u_matrix:p,u_inv_matrix:y,u_camera_to_center_distance:g.cameraToCenterDistance,u_viewport_size:[g.width,g.height]}},us=function(p,y,g){return g===void 0&&(g=1),{u_matrix:p,u_color:y,u_overlay:0,u_overlay_scale:g}},cs=function(p){return{u_matrix:p}},pu=function(p,y,g,w){return{u_matrix:p,u_extrude_scale:Br(y,1,g),u_intensity:w}},Ws=function(p,y,g){var w=p.transform;return{u_matrix:Ic(p,y,g),u_ratio:1/Br(y,1,w.zoom),u_device_pixel_ratio:c.browser.devicePixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},zr=function(p,y,g,w){return c.extend(Ws(p,y,g),{u_image:0,u_image_height:w})},Is=function(p,y,g,w){var L=p.transform,F=$o(y,L);return{u_matrix:Ic(p,y,g),u_texsize:y.imageAtlasTexture.size,u_ratio:1/Br(y,1,L.zoom),u_device_pixel_ratio:c.browser.devicePixelRatio,u_image:0,u_scale:[F,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]]}},Ku=function(p,y,g,w,L){var F=p.lineAtlas,N=$o(y,p.transform),H=g.layout.get("line-cap")==="round",Q=F.getDash(w.from,H),oe=F.getDash(w.to,H),ye=Q.width*L.fromScale,be=oe.width*L.toScale;return c.extend(Ws(p,y,g),{u_patternscale_a:[N/ye,-Q.height/2],u_patternscale_b:[N/be,-oe.height/2],u_sdfgamma:F.width/(256*Math.min(ye,be)*c.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Q.y,u_tex_y_b:oe.y,u_mix:L.t})};function $o(p,y){return 1/Br(p,1,y.tileZoom)}function Ic(p,y,g){return p.translatePosMatrix(y.tileID.posMatrix,y,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}var oh=function(p,y,g,w,L){return{u_matrix:p,u_tl_parent:y,u_scale_parent:g,u_buffer_scale:1,u_fade_t:w.mix,u_opacity:w.opacity*L.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:L.paint.get("raster-brightness-min"),u_brightness_high:L.paint.get("raster-brightness-max"),u_saturation_factor:(N=L.paint.get("raster-saturation"),N>0?1-1/(1.001-N):-N),u_contrast_factor:(F=L.paint.get("raster-contrast"),F>0?1/(1-F):1+F),u_spin_weights:Sc(L.paint.get("raster-hue-rotate"))};var F,N};function Sc(p){p*=Math.PI/180;var y=Math.sin(p),g=Math.cos(p);return[(2*g+1)/3,(-Math.sqrt(3)*y-g+1)/3,(Math.sqrt(3)*y-g+1)/3]}var Ss,Ts=function(p,y,g,w,L,F,N,H,Q,oe){var ye=L.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:y?y.uSizeT:0,u_size:y?y.uSize:0,u_camera_to_center_distance:ye.cameraToCenterDistance,u_pitch:ye.pitch/360*2*Math.PI,u_rotate_symbol:+g,u_aspect_ratio:ye.width/ye.height,u_fade_change:L.options.fadeDuration?L.symbolFadeChange:1,u_matrix:F,u_label_plane_matrix:N,u_coord_matrix:H,u_is_text:+Q,u_pitch_with_map:+w,u_texsize:oe,u_texture:0}},dl=function(p,y,g,w,L,F,N,H,Q,oe,ye){var be=L.transform;return c.extend(Ts(p,y,g,w,L,F,N,H,Q,oe),{u_gamma_scale:w?Math.cos(be._pitch)*be.cameraToCenterDistance:1,u_device_pixel_ratio:c.browser.devicePixelRatio,u_is_halo:+ye})},fu=function(p,y,g,w,L,F,N,H,Q,oe){return c.extend(dl(p,y,g,w,L,F,N,H,!0,Q,!0),{u_texsize_icon:oe,u_texture_icon:1})},Xs=function(p,y,g){return{u_matrix:p,u_opacity:y,u_color:g}},As=function(p,y,g,w,L,F){return c.extend(function(N,H,Q,oe){var ye=Q.imageManager.getPattern(N.from.toString()),be=Q.imageManager.getPattern(N.to.toString()),Ee=Q.imageManager.getPixelSize(),Be=Ee.width,Re=Ee.height,We=Math.pow(2,oe.tileID.overscaledZ),Ce=oe.tileSize*Math.pow(2,Q.transform.tileZoom)/We,Ve=Ce*(oe.tileID.canonical.x+oe.tileID.wrap*We),et=Ce*oe.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ye.tl,u_pattern_br_a:ye.br,u_pattern_tl_b:be.tl,u_pattern_br_b:be.br,u_texsize:[Be,Re],u_mix:H.t,u_pattern_size_a:ye.displaySize,u_pattern_size_b:be.displaySize,u_scale_a:H.fromScale,u_scale_b:H.toScale,u_tile_units_to_pixels:1/Br(oe,1,Q.transform.tileZoom),u_pixel_coord_upper:[Ve>>16,et>>16],u_pixel_coord_lower:[65535&Ve,65535&et]}}(w,F,g,L),{u_matrix:p,u_opacity:y})},Tc={fillExtrusion:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_lightpos:new c.Uniform3f(p,y.u_lightpos),u_lightintensity:new c.Uniform1f(p,y.u_lightintensity),u_lightcolor:new c.Uniform3f(p,y.u_lightcolor),u_vertical_gradient:new c.Uniform1f(p,y.u_vertical_gradient),u_opacity:new c.Uniform1f(p,y.u_opacity)}},fillExtrusionPattern:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_lightpos:new c.Uniform3f(p,y.u_lightpos),u_lightintensity:new c.Uniform1f(p,y.u_lightintensity),u_lightcolor:new c.Uniform3f(p,y.u_lightcolor),u_vertical_gradient:new c.Uniform1f(p,y.u_vertical_gradient),u_height_factor:new c.Uniform1f(p,y.u_height_factor),u_image:new c.Uniform1i(p,y.u_image),u_texsize:new c.Uniform2f(p,y.u_texsize),u_pixel_coord_upper:new c.Uniform2f(p,y.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(p,y.u_pixel_coord_lower),u_scale:new c.Uniform3f(p,y.u_scale),u_fade:new c.Uniform1f(p,y.u_fade),u_opacity:new c.Uniform1f(p,y.u_opacity)}},fill:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix)}},fillPattern:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_image:new c.Uniform1i(p,y.u_image),u_texsize:new c.Uniform2f(p,y.u_texsize),u_pixel_coord_upper:new c.Uniform2f(p,y.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(p,y.u_pixel_coord_lower),u_scale:new c.Uniform3f(p,y.u_scale),u_fade:new c.Uniform1f(p,y.u_fade)}},fillOutline:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_world:new c.Uniform2f(p,y.u_world)}},fillOutlinePattern:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_world:new c.Uniform2f(p,y.u_world),u_image:new c.Uniform1i(p,y.u_image),u_texsize:new c.Uniform2f(p,y.u_texsize),u_pixel_coord_upper:new c.Uniform2f(p,y.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(p,y.u_pixel_coord_lower),u_scale:new c.Uniform3f(p,y.u_scale),u_fade:new c.Uniform1f(p,y.u_fade)}},circle:function(p,y){return{u_camera_to_center_distance:new c.Uniform1f(p,y.u_camera_to_center_distance),u_scale_with_map:new c.Uniform1i(p,y.u_scale_with_map),u_pitch_with_map:new c.Uniform1i(p,y.u_pitch_with_map),u_extrude_scale:new c.Uniform2f(p,y.u_extrude_scale),u_device_pixel_ratio:new c.Uniform1f(p,y.u_device_pixel_ratio),u_matrix:new c.UniformMatrix4f(p,y.u_matrix)}},collisionBox:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_camera_to_center_distance:new c.Uniform1f(p,y.u_camera_to_center_distance),u_pixels_to_tile_units:new c.Uniform1f(p,y.u_pixels_to_tile_units),u_extrude_scale:new c.Uniform2f(p,y.u_extrude_scale),u_overscale_factor:new c.Uniform1f(p,y.u_overscale_factor)}},collisionCircle:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_inv_matrix:new c.UniformMatrix4f(p,y.u_inv_matrix),u_camera_to_center_distance:new c.Uniform1f(p,y.u_camera_to_center_distance),u_viewport_size:new c.Uniform2f(p,y.u_viewport_size)}},debug:function(p,y){return{u_color:new c.UniformColor(p,y.u_color),u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_overlay:new c.Uniform1i(p,y.u_overlay),u_overlay_scale:new c.Uniform1f(p,y.u_overlay_scale)}},clippingMask:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix)}},heatmap:function(p,y){return{u_extrude_scale:new c.Uniform1f(p,y.u_extrude_scale),u_intensity:new c.Uniform1f(p,y.u_intensity),u_matrix:new c.UniformMatrix4f(p,y.u_matrix)}},heatmapTexture:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_world:new c.Uniform2f(p,y.u_world),u_image:new c.Uniform1i(p,y.u_image),u_color_ramp:new c.Uniform1i(p,y.u_color_ramp),u_opacity:new c.Uniform1f(p,y.u_opacity)}},hillshade:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_image:new c.Uniform1i(p,y.u_image),u_latrange:new c.Uniform2f(p,y.u_latrange),u_light:new c.Uniform2f(p,y.u_light),u_shadow:new c.UniformColor(p,y.u_shadow),u_highlight:new c.UniformColor(p,y.u_highlight),u_accent:new c.UniformColor(p,y.u_accent)}},hillshadePrepare:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_image:new c.Uniform1i(p,y.u_image),u_dimension:new c.Uniform2f(p,y.u_dimension),u_zoom:new c.Uniform1f(p,y.u_zoom),u_unpack:new c.Uniform4f(p,y.u_unpack)}},line:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_ratio:new c.Uniform1f(p,y.u_ratio),u_device_pixel_ratio:new c.Uniform1f(p,y.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(p,y.u_units_to_pixels)}},lineGradient:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_ratio:new c.Uniform1f(p,y.u_ratio),u_device_pixel_ratio:new c.Uniform1f(p,y.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(p,y.u_units_to_pixels),u_image:new c.Uniform1i(p,y.u_image),u_image_height:new c.Uniform1f(p,y.u_image_height)}},linePattern:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_texsize:new c.Uniform2f(p,y.u_texsize),u_ratio:new c.Uniform1f(p,y.u_ratio),u_device_pixel_ratio:new c.Uniform1f(p,y.u_device_pixel_ratio),u_image:new c.Uniform1i(p,y.u_image),u_units_to_pixels:new c.Uniform2f(p,y.u_units_to_pixels),u_scale:new c.Uniform3f(p,y.u_scale),u_fade:new c.Uniform1f(p,y.u_fade)}},lineSDF:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_ratio:new c.Uniform1f(p,y.u_ratio),u_device_pixel_ratio:new c.Uniform1f(p,y.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(p,y.u_units_to_pixels),u_patternscale_a:new c.Uniform2f(p,y.u_patternscale_a),u_patternscale_b:new c.Uniform2f(p,y.u_patternscale_b),u_sdfgamma:new c.Uniform1f(p,y.u_sdfgamma),u_image:new c.Uniform1i(p,y.u_image),u_tex_y_a:new c.Uniform1f(p,y.u_tex_y_a),u_tex_y_b:new c.Uniform1f(p,y.u_tex_y_b),u_mix:new c.Uniform1f(p,y.u_mix)}},raster:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_tl_parent:new c.Uniform2f(p,y.u_tl_parent),u_scale_parent:new c.Uniform1f(p,y.u_scale_parent),u_buffer_scale:new c.Uniform1f(p,y.u_buffer_scale),u_fade_t:new c.Uniform1f(p,y.u_fade_t),u_opacity:new c.Uniform1f(p,y.u_opacity),u_image0:new c.Uniform1i(p,y.u_image0),u_image1:new c.Uniform1i(p,y.u_image1),u_brightness_low:new c.Uniform1f(p,y.u_brightness_low),u_brightness_high:new c.Uniform1f(p,y.u_brightness_high),u_saturation_factor:new c.Uniform1f(p,y.u_saturation_factor),u_contrast_factor:new c.Uniform1f(p,y.u_contrast_factor),u_spin_weights:new c.Uniform3f(p,y.u_spin_weights)}},symbolIcon:function(p,y){return{u_is_size_zoom_constant:new c.Uniform1i(p,y.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(p,y.u_is_size_feature_constant),u_size_t:new c.Uniform1f(p,y.u_size_t),u_size:new c.Uniform1f(p,y.u_size),u_camera_to_center_distance:new c.Uniform1f(p,y.u_camera_to_center_distance),u_pitch:new c.Uniform1f(p,y.u_pitch),u_rotate_symbol:new c.Uniform1i(p,y.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(p,y.u_aspect_ratio),u_fade_change:new c.Uniform1f(p,y.u_fade_change),u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(p,y.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(p,y.u_coord_matrix),u_is_text:new c.Uniform1i(p,y.u_is_text),u_pitch_with_map:new c.Uniform1i(p,y.u_pitch_with_map),u_texsize:new c.Uniform2f(p,y.u_texsize),u_texture:new c.Uniform1i(p,y.u_texture)}},symbolSDF:function(p,y){return{u_is_size_zoom_constant:new c.Uniform1i(p,y.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(p,y.u_is_size_feature_constant),u_size_t:new c.Uniform1f(p,y.u_size_t),u_size:new c.Uniform1f(p,y.u_size),u_camera_to_center_distance:new c.Uniform1f(p,y.u_camera_to_center_distance),u_pitch:new c.Uniform1f(p,y.u_pitch),u_rotate_symbol:new c.Uniform1i(p,y.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(p,y.u_aspect_ratio),u_fade_change:new c.Uniform1f(p,y.u_fade_change),u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(p,y.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(p,y.u_coord_matrix),u_is_text:new c.Uniform1i(p,y.u_is_text),u_pitch_with_map:new c.Uniform1i(p,y.u_pitch_with_map),u_texsize:new c.Uniform2f(p,y.u_texsize),u_texture:new c.Uniform1i(p,y.u_texture),u_gamma_scale:new c.Uniform1f(p,y.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(p,y.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(p,y.u_is_halo)}},symbolTextAndIcon:function(p,y){return{u_is_size_zoom_constant:new c.Uniform1i(p,y.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(p,y.u_is_size_feature_constant),u_size_t:new c.Uniform1f(p,y.u_size_t),u_size:new c.Uniform1f(p,y.u_size),u_camera_to_center_distance:new c.Uniform1f(p,y.u_camera_to_center_distance),u_pitch:new c.Uniform1f(p,y.u_pitch),u_rotate_symbol:new c.Uniform1i(p,y.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(p,y.u_aspect_ratio),u_fade_change:new c.Uniform1f(p,y.u_fade_change),u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(p,y.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(p,y.u_coord_matrix),u_is_text:new c.Uniform1i(p,y.u_is_text),u_pitch_with_map:new c.Uniform1i(p,y.u_pitch_with_map),u_texsize:new c.Uniform2f(p,y.u_texsize),u_texsize_icon:new c.Uniform2f(p,y.u_texsize_icon),u_texture:new c.Uniform1i(p,y.u_texture),u_texture_icon:new c.Uniform1i(p,y.u_texture_icon),u_gamma_scale:new c.Uniform1f(p,y.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(p,y.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(p,y.u_is_halo)}},background:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_opacity:new c.Uniform1f(p,y.u_opacity),u_color:new c.UniformColor(p,y.u_color)}},backgroundPattern:function(p,y){return{u_matrix:new c.UniformMatrix4f(p,y.u_matrix),u_opacity:new c.Uniform1f(p,y.u_opacity),u_image:new c.Uniform1i(p,y.u_image),u_pattern_tl_a:new c.Uniform2f(p,y.u_pattern_tl_a),u_pattern_br_a:new c.Uniform2f(p,y.u_pattern_br_a),u_pattern_tl_b:new c.Uniform2f(p,y.u_pattern_tl_b),u_pattern_br_b:new c.Uniform2f(p,y.u_pattern_br_b),u_texsize:new c.Uniform2f(p,y.u_texsize),u_mix:new c.Uniform1f(p,y.u_mix),u_pattern_size_a:new c.Uniform2f(p,y.u_pattern_size_a),u_pattern_size_b:new c.Uniform2f(p,y.u_pattern_size_b),u_scale_a:new c.Uniform1f(p,y.u_scale_a),u_scale_b:new c.Uniform1f(p,y.u_scale_b),u_pixel_coord_upper:new c.Uniform2f(p,y.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(p,y.u_pixel_coord_lower),u_tile_units_to_pixels:new c.Uniform1f(p,y.u_tile_units_to_pixels)}}};function hs(p,y,g,w,L,F,N){for(var H=p.context,Q=H.gl,oe=p.useProgram("collisionBox"),ye=[],be=0,Ee=0,Be=0;Be<w.length;Be++){var Re=w[Be],We=y.getTile(Re),Ce=We.getBucket(g);if(Ce){var Ve=Re.posMatrix;L[0]===0&&L[1]===0||(Ve=p.translatePosMatrix(Re.posMatrix,We,L,F));var et=N?Ce.textCollisionBox:Ce.iconCollisionBox,dt=Ce.collisionCircleArray;if(dt.length>0){var xt=c.create(),Tt=Ve;c.mul(xt,Ce.placementInvProjMatrix,p.transform.glCoordMatrix),c.mul(xt,xt,Ce.placementViewportMatrix),ye.push({circleArray:dt,circleOffset:Ee,transform:Tt,invTransform:xt}),Ee=be+=dt.length/4}et&&oe.draw(H,Q.LINES,Se.disabled,ze.disabled,p.colorModeForRenderPass(),tt.disabled,hl(Ve,p.transform,We),g.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,null,p.transform.zoom,null,null,et.collisionVertexBuffer)}}if(N&&ye.length){var kt=p.useProgram("collisionCircle"),Ht=new c.StructArrayLayout2f1f2i16;Ht.resize(4*be),Ht._trim();for(var oi=0,ri=0,Ti=ye;ri<Ti.length;ri+=1)for(var Hi=Ti[ri],Qi=0;Qi<Hi.circleArray.length/4;Qi++){var Gi=4*Qi,Xn=Hi.circleArray[Gi+0],Li=Hi.circleArray[Gi+1],pn=Hi.circleArray[Gi+2],Fn=Hi.circleArray[Gi+3];Ht.emplace(oi++,Xn,Li,pn,Fn,0),Ht.emplace(oi++,Xn,Li,pn,Fn,1),Ht.emplace(oi++,Xn,Li,pn,Fn,2),Ht.emplace(oi++,Xn,Li,pn,Fn,3)}(!Ss||Ss.length<2*be)&&(Ss=function(uo){var wo=2*uo,Ko=new c.StructArrayLayout3ui6;Ko.resize(wo),Ko._trim();for(var io=0;io<wo;io++){var er=6*io;Ko.uint16[er+0]=4*io+0,Ko.uint16[er+1]=4*io+1,Ko.uint16[er+2]=4*io+2,Ko.uint16[er+3]=4*io+2,Ko.uint16[er+4]=4*io+3,Ko.uint16[er+5]=4*io+0}return Ko}(be));for(var cn=H.createIndexBuffer(Ss,!0),an=H.createVertexBuffer(Ht,c.collisionCircleLayout.members,!0),wn=0,tn=ye;wn<tn.length;wn+=1){var Yi=tn[wn],$r=Xu(Yi.transform,Yi.invTransform,p.transform);kt.draw(H,Q.TRIANGLES,Se.disabled,ze.disabled,p.colorModeForRenderPass(),tt.disabled,$r,g.id,an,cn,c.SegmentVector.simpleSegment(0,2*Yi.circleOffset,Yi.circleArray.length,Yi.circleArray.length/2),null,p.transform.zoom,null,null,null)}an.destroy(),cn.destroy()}}var za=c.identity(new Float32Array(16));function mu(p,y,g,w,L,F){var N=c.getAnchorAlignment(p),H=-(N.horizontalAlign-.5)*y,Q=-(N.verticalAlign-.5)*g,oe=c.evaluateVariableOffset(p,w);return new c.Point((H/L+oe[0])*F,(Q/L+oe[1])*F)}function gu(p,y,g,w,L,F,N,H,Q,oe,ye){var be=p.text.placedSymbolArray,Ee=p.text.dynamicLayoutVertexArray,Be=p.icon.dynamicLayoutVertexArray,Re={};Ee.clear();for(var We=0;We<be.length;We++){var Ce=be.get(We),Ve=Ce.hidden||!Ce.crossTileID||p.allowVerticalPlacement&&!Ce.placedOrientation?null:w[Ce.crossTileID];if(Ve){var et=new c.Point(Ce.anchorX,Ce.anchorY),dt=Ii(et,g?H:N),xt=hn(F.cameraToCenterDistance,dt.signedDistanceFromCamera),Tt=L.evaluateSizeForFeature(p.textSizeData,oe,Ce)*xt/c.ONE_EM;g&&(Tt*=p.tilePixelRatio/Q);for(var kt=mu(Ve.anchor,Ve.width,Ve.height,Ve.textOffset,Ve.textBoxScale,Tt),Ht=g?Ii(et.add(kt),N).point:dt.point.add(y?kt.rotate(-F.angle):kt),oi=p.allowVerticalPlacement&&Ce.placedOrientation===c.WritingMode.vertical?Math.PI/2:0,ri=0;ri<Ce.numGlyphs;ri++)c.addDynamicAttributes(Ee,Ht,oi);ye&&Ce.associatedIconIndex>=0&&(Re[Ce.associatedIconIndex]={shiftedAnchor:Ht,angle:oi})}else Qo(Ce.numGlyphs,Ee)}if(ye){Be.clear();for(var Ti=p.icon.placedSymbolArray,Hi=0;Hi<Ti.length;Hi++){var Qi=Ti.get(Hi);if(Qi.hidden)Qo(Qi.numGlyphs,Be);else{var Gi=Re[Hi];if(Gi)for(var Xn=0;Xn<Qi.numGlyphs;Xn++)c.addDynamicAttributes(Be,Gi.shiftedAnchor,Gi.angle);else Qo(Qi.numGlyphs,Be)}}p.icon.dynamicLayoutVertexBuffer.updateData(Be)}p.text.dynamicLayoutVertexBuffer.updateData(Ee)}function pl(p,y,g){return g.iconsInText&&y?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function Ka(p,y,g,w,L,F,N,H,Q,oe,ye,be){for(var Ee=p.context,Be=Ee.gl,Re=p.transform,We=H==="map",Ce=Q==="map",Ve=We&&g.layout.get("symbol-placement")!=="point",et=We&&!Ce&&!Ve,dt=g.layout.get("symbol-sort-key").constantOr(1)!==void 0,xt=!1,Tt=p.depthModeForSublayer(0,Se.ReadOnly),kt=g.layout.get("text-variable-anchor"),Ht=[],oi=0,ri=w;oi<ri.length;oi+=1){var Ti=ri[oi],Hi=y.getTile(Ti),Qi=Hi.getBucket(g);if(Qi){var Gi=L?Qi.text:Qi.icon;if(Gi&&Gi.segments.get().length){var Xn=Gi.programConfigurations.get(g.id),Li=L||Qi.sdfIcons,pn=L?Qi.textSizeData:Qi.iconSizeData,Fn=Ce||Re.pitch!==0,cn=p.useProgram(pl(Li,L,Qi),Xn),an=c.evaluateSizeForZoom(pn,Re.zoom),wn=void 0,tn=[0,0],Yi=void 0,$r=void 0,uo=null,wo=void 0;if(L)Yi=Hi.glyphAtlasTexture,$r=Be.LINEAR,wn=Hi.glyphAtlasTexture.size,Qi.iconsInText&&(tn=Hi.imageAtlasTexture.size,uo=Hi.imageAtlasTexture,wo=Fn||p.options.rotating||p.options.zooming||pn.kind==="composite"||pn.kind==="camera"?Be.LINEAR:Be.NEAREST);else{var Ko=g.layout.get("icon-size").constantOr(0)!==1||Qi.iconsNeedLinear;Yi=Hi.imageAtlasTexture,$r=Li||p.options.rotating||p.options.zooming||Ko||Fn?Be.LINEAR:Be.NEAREST,wn=Hi.imageAtlasTexture.size}var io=Br(Hi,1,p.transform.zoom),er=nn(Ti.posMatrix,Ce,We,p.transform,io),ba=Fi(Ti.posMatrix,Ce,We,p.transform,io),ha=kt&&Qi.hasTextData(),Ga=g.layout.get("icon-text-fit")!=="none"&&ha&&Qi.hasIconData();Ve&&ho(Qi,Ti.posMatrix,p,L,er,ba,Ce,oe);var Mo=p.translatePosMatrix(Ti.posMatrix,Hi,F,N),Ha=Ve||L&&kt||Ga?za:er,Za=p.translatePosMatrix(ba,Hi,F,N,!0),Qu=Li&&g.paint.get(L?"text-halo-width":"icon-halo-width").constantOr(1)!==0,$u={program:cn,buffers:Gi,uniformValues:Li?Qi.iconsInText?fu(pn.kind,an,et,Ce,p,Mo,Ha,Za,wn,tn):dl(pn.kind,an,et,Ce,p,Mo,Ha,Za,L,wn,!0):Ts(pn.kind,an,et,Ce,p,Mo,Ha,Za,L,wn),atlasTexture:Yi,atlasTextureIcon:uo,atlasInterpolation:$r,atlasInterpolationIcon:wo,isSDF:Li,hasHalo:Qu};if(dt&&Qi.canOverlap){xt=!0;for(var vl=0,ec=Gi.segments.get();vl<ec.length;vl+=1){var wu=ec[vl];Ht.push({segments:new c.SegmentVector([wu]),sortKey:wu.sortKey,state:$u})}}else Ht.push({segments:Gi.segments,sortKey:0,state:$u})}}}xt&&Ht.sort(function(Vl,Rs){return Vl.sortKey-Rs.sortKey});for(var Ys=0,Eu=Ht;Ys<Eu.length;Ys+=1){var Ds=Eu[Ys],Lo=Ds.state;if(Ee.activeTexture.set(Be.TEXTURE0),Lo.atlasTexture.bind(Lo.atlasInterpolation,Be.CLAMP_TO_EDGE),Lo.atlasTextureIcon&&(Ee.activeTexture.set(Be.TEXTURE1),Lo.atlasTextureIcon&&Lo.atlasTextureIcon.bind(Lo.atlasInterpolationIcon,Be.CLAMP_TO_EDGE)),Lo.isSDF){var Wa=Lo.uniformValues;Lo.hasHalo&&(Wa.u_is_halo=1,Pl(Lo.buffers,Ds.segments,g,p,Lo.program,Tt,ye,be,Wa)),Wa.u_is_halo=0}Pl(Lo.buffers,Ds.segments,g,p,Lo.program,Tt,ye,be,Lo.uniformValues)}}function Pl(p,y,g,w,L,F,N,H,Q){var oe=w.context;L.draw(oe,oe.gl.TRIANGLES,F,N,H,tt.disabled,Q,g.id,p.layoutVertexBuffer,p.indexBuffer,y,g.paint,w.transform.zoom,p.programConfigurations.get(g.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function Ks(p,y,g,w,L,F,N){var H,Q,oe,ye,be,Ee=p.context.gl,Be=g.paint.get("fill-pattern"),Re=Be&&Be.constantOr(1),We=g.getCrossfadeParameters();N?(Q=Re&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",H=Ee.LINES):(Q=Re?"fillPattern":"fill",H=Ee.TRIANGLES);for(var Ce=0,Ve=w;Ce<Ve.length;Ce+=1){var et=Ve[Ce],dt=y.getTile(et);if(!Re||dt.patternsLoaded()){var xt=dt.getBucket(g);if(xt){var Tt=xt.programConfigurations.get(g.id),kt=p.useProgram(Q,Tt);Re&&(p.context.activeTexture.set(Ee.TEXTURE0),dt.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),Tt.updatePaintBuffers(We));var Ht=Be.constantOr(null);if(Ht&&dt.imageAtlas){var oi=dt.imageAtlas,ri=oi.patternPositions[Ht.to.toString()],Ti=oi.patternPositions[Ht.from.toString()];ri&&Ti&&Tt.setConstantPatternPositions(ri,Ti)}var Hi=p.translatePosMatrix(et.posMatrix,dt,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(N){ye=xt.indexBuffer2,be=xt.segments2;var Qi=[Ee.drawingBufferWidth,Ee.drawingBufferHeight];oe=Q==="fillOutlinePattern"&&Re?hu(Hi,p,We,dt,Qi):lo(Hi,Qi)}else ye=xt.indexBuffer,be=xt.segments,oe=Re?Pr(Hi,p,We,dt):Xa(Hi);kt.draw(p.context,H,L,p.stencilModeForClipping(et),F,tt.disabled,oe,g.id,xt.layoutVertexBuffer,ye,be,g.paint,p.transform.zoom,Tt)}}}}function Ju(p,y,g,w,L,F,N){for(var H=p.context,Q=H.gl,oe=g.paint.get("fill-extrusion-pattern"),ye=oe.constantOr(1),be=g.getCrossfadeParameters(),Ee=g.paint.get("fill-extrusion-opacity"),Be=0,Re=w;Be<Re.length;Be+=1){var We=Re[Be],Ce=y.getTile(We),Ve=Ce.getBucket(g);if(Ve){var et=Ve.programConfigurations.get(g.id),dt=p.useProgram(ye?"fillExtrusionPattern":"fillExtrusion",et);ye&&(p.context.activeTexture.set(Q.TEXTURE0),Ce.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),et.updatePaintBuffers(be));var xt=oe.constantOr(null);if(xt&&Ce.imageAtlas){var Tt=Ce.imageAtlas,kt=Tt.patternPositions[xt.to.toString()],Ht=Tt.patternPositions[xt.from.toString()];kt&&Ht&&et.setConstantPatternPositions(kt,Ht)}var oi=p.translatePosMatrix(We.posMatrix,Ce,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),ri=g.paint.get("fill-extrusion-vertical-gradient"),Ti=ye?lr(oi,p,ri,Ee,We,be,Ce):cu(oi,p,ri,Ee);dt.draw(H,H.gl.TRIANGLES,L,F,N,tt.backCCW,Ti,g.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,g.paint,p.transform.zoom,et)}}}function yu(p,y,g,w,L,F){var N=p.context,H=N.gl,Q=y.fbo;if(Q){var oe=p.useProgram("hillshade");N.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,Q.colorAttachment.get());var ye=function(be,Ee,Be){var Re=Be.paint.get("hillshade-shadow-color"),We=Be.paint.get("hillshade-highlight-color"),Ce=Be.paint.get("hillshade-accent-color"),Ve=Be.paint.get("hillshade-illumination-direction")*(Math.PI/180);Be.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ve-=be.transform.angle);var et,dt,xt,Tt=!be.options.moving;return{u_matrix:be.transform.calculatePosMatrix(Ee.tileID.toUnwrapped(),Tt),u_image:0,u_latrange:(et=Ee.tileID,dt=Math.pow(2,et.canonical.z),xt=et.canonical.y,[new c.MercatorCoordinate(0,xt/dt).toLngLat().lat,new c.MercatorCoordinate(0,(xt+1)/dt).toLngLat().lat]),u_light:[Be.paint.get("hillshade-exaggeration"),Ve],u_shadow:Re,u_highlight:We,u_accent:Ce}}(p,y,g);oe.draw(N,H.TRIANGLES,w,L,F,tt.disabled,ye,g.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}}function ah(p,y,g,w,L,F){var N=p.context,H=N.gl,Q=y.dem;if(Q&&Q.data){var oe=Q.dim,ye=Q.stride,be=Q.getPixels();if(N.activeTexture.set(H.TEXTURE1),N.pixelStoreUnpackPremultiplyAlpha.set(!1),y.demTexture=y.demTexture||p.getTileTexture(ye),y.demTexture){var Ee=y.demTexture;Ee.update(be,{premultiply:!1}),Ee.bind(H.NEAREST,H.CLAMP_TO_EDGE)}else y.demTexture=new c.Texture(N,be,H.RGBA,{premultiply:!1}),y.demTexture.bind(H.NEAREST,H.CLAMP_TO_EDGE);N.activeTexture.set(H.TEXTURE0);var Be=y.fbo;if(!Be){var Re=new c.Texture(N,{width:oe,height:oe,data:null},H.RGBA);Re.bind(H.LINEAR,H.CLAMP_TO_EDGE),(Be=y.fbo=N.createFramebuffer(oe,oe,!0)).colorAttachment.set(Re.texture)}N.bindFramebuffer.set(Be.framebuffer),N.viewport.set([0,0,oe,oe]),p.useProgram("hillshadePrepare").draw(N,H.TRIANGLES,w,L,F,tt.disabled,function(We,Ce){var Ve=Ce.stride,et=c.create();return c.ortho(et,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate(et,et,[0,-c.EXTENT,0]),{u_matrix:et,u_image:1,u_dimension:[Ve,Ve],u_zoom:We.overscaledZ,u_unpack:Ce.getUnpackVector()}}(y.tileID,Q),g.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),y.needsHillshadePrepare=!1}}function Cs(p,y,g,w,L){var F=w.paint.get("raster-fade-duration");if(F>0){var N=c.browser.now(),H=(N-p.timeAdded)/F,Q=y?(N-y.timeAdded)/F:-1,oe=g.getSource(),ye=L.coveringZoomLevel({tileSize:oe.tileSize,roundZoom:oe.roundZoom}),be=!y||Math.abs(y.tileID.overscaledZ-ye)>Math.abs(p.tileID.overscaledZ-ye),Ee=be&&p.refreshedUponExpiration?1:c.clamp(be?H:1-Q,0,1);return p.refreshedUponExpiration&&H>=1&&(p.refreshedUponExpiration=!1),y?{opacity:1,mix:1-Ee}:{opacity:Ee,mix:0}}return{opacity:1,mix:0}}var Yu=new c.Color(1,0,0,1),zl=new c.Color(0,1,0,1),Dl=new c.Color(0,0,1,1),ea=new c.Color(1,0,1,1),ta=new c.Color(0,1,1,1);function Ac(p,y,g,w){Rl(p,0,y+g/2,p.transform.width,g,w)}function ks(p,y,g,w){Rl(p,y-g/2,0,g,p.transform.height,w)}function Rl(p,y,g,w,L,F){var N=p.context,H=N.gl;H.enable(H.SCISSOR_TEST),H.scissor(y*c.browser.devicePixelRatio,g*c.browser.devicePixelRatio,w*c.browser.devicePixelRatio,L*c.browser.devicePixelRatio),N.clear({color:F}),H.disable(H.SCISSOR_TEST)}function fl(p,y,g){var w=p.context,L=w.gl,F=g.posMatrix,N=p.useProgram("debug"),H=Se.disabled,Q=ze.disabled,oe=p.colorModeForRenderPass();w.activeTexture.set(L.TEXTURE0),p.emptyTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),N.draw(w,L.LINE_STRIP,H,Q,oe,tt.disabled,us(F,c.Color.red),"$debug",p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments);var ye=y.getTileByID(g.key).latestRawTileData,be=Math.floor((ye&&ye.byteLength||0)/1024),Ee=y.getTile(g).tileSize,Be=512/Math.min(Ee,512)*(g.overscaledZ/p.transform.zoom)*.5,Re=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(Re+=" => "+g.overscaledZ),function(We,Ce){We.initDebugOverlayCanvas();var Ve=We.debugOverlayCanvas,et=We.context.gl,dt=We.debugOverlayCanvas.getContext("2d");dt.clearRect(0,0,Ve.width,Ve.height),dt.shadowColor="white",dt.shadowBlur=2,dt.lineWidth=1.5,dt.strokeStyle="white",dt.textBaseline="top",dt.font="bold 36px Open Sans, sans-serif",dt.fillText(Ce,5,5),dt.strokeText(Ce,5,5),We.debugOverlayTexture.update(Ve),We.debugOverlayTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE)}(p,Re+" "+be+"kb"),N.draw(w,L.TRIANGLES,H,Q,$e.alphaBlended,tt.disabled,us(F,c.Color.transparent,Be),"$debug",p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments)}var Da={symbol:function(p,y,g,w,L){if(p.renderPass==="translucent"){var F=ze.disabled,N=p.colorModeForRenderPass();g.layout.get("text-variable-anchor")&&function(H,Q,oe,ye,be,Ee,Be){for(var Re=Q.transform,We=be==="map",Ce=Ee==="map",Ve=0,et=H;Ve<et.length;Ve+=1){var dt=et[Ve],xt=ye.getTile(dt),Tt=xt.getBucket(oe);if(Tt&&Tt.text&&Tt.text.segments.get().length){var kt=c.evaluateSizeForZoom(Tt.textSizeData,Re.zoom),Ht=Br(xt,1,Q.transform.zoom),oi=nn(dt.posMatrix,Ce,We,Q.transform,Ht),ri=oe.layout.get("icon-text-fit")!=="none"&&Tt.hasIconData();if(kt){var Ti=Math.pow(2,Re.zoom-xt.tileID.overscaledZ);gu(Tt,We,Ce,Be,c.symbolSize,Re,oi,dt.posMatrix,Ti,kt,ri)}}}}(w,p,g,y,g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),L),g.paint.get("icon-opacity").constantOr(1)!==0&&Ka(p,y,g,w,!1,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),g.layout.get("icon-rotation-alignment"),g.layout.get("icon-pitch-alignment"),g.layout.get("icon-keep-upright"),F,N),g.paint.get("text-opacity").constantOr(1)!==0&&Ka(p,y,g,w,!0,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),g.layout.get("text-keep-upright"),F,N),y.map.showCollisionBoxes&&(hs(p,y,g,w,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),!0),hs(p,y,g,w,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),!1))}},circle:function(p,y,g,w){if(p.renderPass==="translucent"){var L=g.paint.get("circle-opacity"),F=g.paint.get("circle-stroke-width"),N=g.paint.get("circle-stroke-opacity"),H=g.layout.get("circle-sort-key").constantOr(1)!==void 0;if(L.constantOr(1)!==0||F.constantOr(1)!==0&&N.constantOr(1)!==0){for(var Q=p.context,oe=Q.gl,ye=p.depthModeForSublayer(0,Se.ReadOnly),be=ze.disabled,Ee=p.colorModeForRenderPass(),Be=[],Re=0;Re<w.length;Re++){var We=w[Re],Ce=y.getTile(We),Ve=Ce.getBucket(g);if(Ve){var et=Ve.programConfigurations.get(g.id),dt={programConfiguration:et,program:p.useProgram("circle",et),layoutVertexBuffer:Ve.layoutVertexBuffer,indexBuffer:Ve.indexBuffer,uniformValues:du(p,We,Ce,g)};if(H)for(var xt=0,Tt=Ve.segments.get();xt<Tt.length;xt+=1){var kt=Tt[xt];Be.push({segments:new c.SegmentVector([kt]),sortKey:kt.sortKey,state:dt})}else Be.push({segments:Ve.segments,sortKey:0,state:dt})}}H&&Be.sort(function(Hi,Qi){return Hi.sortKey-Qi.sortKey});for(var Ht=0,oi=Be;Ht<oi.length;Ht+=1){var ri=oi[Ht],Ti=ri.state;Ti.program.draw(Q,oe.TRIANGLES,ye,be,Ee,tt.disabled,Ti.uniformValues,g.id,Ti.layoutVertexBuffer,Ti.indexBuffer,ri.segments,g.paint,p.transform.zoom,Ti.programConfiguration)}}}},heatmap:function(p,y,g,w){if(g.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){var L=p.context,F=L.gl,N=ze.disabled,H=new $e([F.ONE,F.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(Be,Re,We){var Ce=Be.gl;Be.activeTexture.set(Ce.TEXTURE1),Be.viewport.set([0,0,Re.width/4,Re.height/4]);var Ve=We.heatmapFbo;if(Ve)Ce.bindTexture(Ce.TEXTURE_2D,Ve.colorAttachment.get()),Be.bindFramebuffer.set(Ve.framebuffer);else{var et=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,et),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR),Ve=We.heatmapFbo=Be.createFramebuffer(Re.width/4,Re.height/4,!1),function(dt,xt,Tt,kt){var Ht=dt.gl;Ht.texImage2D(Ht.TEXTURE_2D,0,Ht.RGBA,xt.width/4,xt.height/4,0,Ht.RGBA,dt.extRenderToTextureHalfFloat?dt.extTextureHalfFloat.HALF_FLOAT_OES:Ht.UNSIGNED_BYTE,null),kt.colorAttachment.set(Tt)}(Be,Re,et,Ve)}})(L,p,g),L.clear({color:c.Color.transparent});for(var Q=0;Q<w.length;Q++){var oe=w[Q];if(!y.hasRenderableParent(oe)){var ye=y.getTile(oe),be=ye.getBucket(g);if(be){var Ee=be.programConfigurations.get(g.id);p.useProgram("heatmap",Ee).draw(L,F.TRIANGLES,Se.disabled,N,H,tt.disabled,pu(oe.posMatrix,ye,p.transform.zoom,g.paint.get("heatmap-intensity")),g.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,g.paint,p.transform.zoom,Ee)}}}L.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(Be,Re){var We=Be.context,Ce=We.gl,Ve=Re.heatmapFbo;if(Ve){We.activeTexture.set(Ce.TEXTURE0),Ce.bindTexture(Ce.TEXTURE_2D,Ve.colorAttachment.get()),We.activeTexture.set(Ce.TEXTURE1);var et=Re.colorRampTexture;et||(et=Re.colorRampTexture=new c.Texture(We,Re.colorRamp,Ce.RGBA)),et.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),Be.useProgram("heatmapTexture").draw(We,Ce.TRIANGLES,Se.disabled,ze.disabled,Be.colorModeForRenderPass(),tt.disabled,function(dt,xt,Tt,kt){var Ht=c.create();c.ortho(Ht,0,dt.width,dt.height,0,0,1);var oi=dt.context.gl;return{u_matrix:Ht,u_world:[oi.drawingBufferWidth,oi.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:xt.paint.get("heatmap-opacity")}}(Be,Re),Re.id,Be.viewportBuffer,Be.quadTriangleIndexBuffer,Be.viewportSegments,Re.paint,Be.transform.zoom)}}(p,g))},line:function(p,y,g,w){if(p.renderPass==="translucent"){var L=g.paint.get("line-opacity"),F=g.paint.get("line-width");if(L.constantOr(1)!==0&&F.constantOr(1)!==0)for(var N=p.depthModeForSublayer(0,Se.ReadOnly),H=p.colorModeForRenderPass(),Q=g.paint.get("line-dasharray"),oe=g.paint.get("line-pattern"),ye=oe.constantOr(1),be=g.paint.get("line-gradient"),Ee=g.getCrossfadeParameters(),Be=ye?"linePattern":Q?"lineSDF":be?"lineGradient":"line",Re=p.context,We=Re.gl,Ce=!0,Ve=0,et=w;Ve<et.length;Ve+=1){var dt=et[Ve],xt=y.getTile(dt);if(!ye||xt.patternsLoaded()){var Tt=xt.getBucket(g);if(Tt){var kt=Tt.programConfigurations.get(g.id),Ht=p.context.program.get(),oi=p.useProgram(Be,kt),ri=Ce||oi.program!==Ht,Ti=oe.constantOr(null);if(Ti&&xt.imageAtlas){var Hi=xt.imageAtlas,Qi=Hi.patternPositions[Ti.to.toString()],Gi=Hi.patternPositions[Ti.from.toString()];Qi&&Gi&&kt.setConstantPatternPositions(Qi,Gi)}var Xn=ye?Is(p,xt,g,Ee):Q?Ku(p,xt,g,Q,Ee):be?zr(p,xt,g,Tt.lineClipsArray.length):Ws(p,xt,g);if(ye)Re.activeTexture.set(We.TEXTURE0),xt.imageAtlasTexture.bind(We.LINEAR,We.CLAMP_TO_EDGE),kt.updatePaintBuffers(Ee);else if(Q&&(ri||p.lineAtlas.dirty))Re.activeTexture.set(We.TEXTURE0),p.lineAtlas.bind(Re);else if(be){var Li=Tt.gradients[g.id],pn=Li.texture;if(g.gradientVersion!==Li.version){var Fn=256;if(g.stepInterpolant){var cn=y.getSource().maxzoom,an=dt.canonical.z===cn?Math.ceil(1<<p.transform.maxZoom-dt.canonical.z):1;Fn=c.clamp(c.nextPowerOfTwo(Tt.maxLineLength/c.EXTENT*1024*an),256,Re.maxTextureSize)}Li.gradient=c.renderColorRamp({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:Fn,image:Li.gradient||void 0,clips:Tt.lineClipsArray}),Li.texture?Li.texture.update(Li.gradient):Li.texture=new c.Texture(Re,Li.gradient,We.RGBA),Li.version=g.gradientVersion,pn=Li.texture}Re.activeTexture.set(We.TEXTURE0),pn.bind(g.stepInterpolant?We.NEAREST:We.LINEAR,We.CLAMP_TO_EDGE)}oi.draw(Re,We.TRIANGLES,N,p.stencilModeForClipping(dt),H,tt.disabled,Xn,g.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,g.paint,p.transform.zoom,kt,Tt.layoutVertexBuffer2),Ce=!1}}}}},fill:function(p,y,g,w){var L=g.paint.get("fill-color"),F=g.paint.get("fill-opacity");if(F.constantOr(1)!==0){var N=p.colorModeForRenderPass(),H=g.paint.get("fill-pattern"),Q=p.opaquePassEnabledForLayer()&&!H.constantOr(1)&&L.constantOr(c.Color.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===Q){var oe=p.depthModeForSublayer(1,p.renderPass==="opaque"?Se.ReadWrite:Se.ReadOnly);Ks(p,y,g,w,oe,N,!1)}if(p.renderPass==="translucent"&&g.paint.get("fill-antialias")){var ye=p.depthModeForSublayer(g.getPaintProperty("fill-outline-color")?2:0,Se.ReadOnly);Ks(p,y,g,w,ye,N,!0)}}},"fill-extrusion":function(p,y,g,w){var L=g.paint.get("fill-extrusion-opacity");if(L!==0&&p.renderPass==="translucent"){var F=new Se(p.context.gl.LEQUAL,Se.ReadWrite,p.depthRangeFor3D);if(L!==1||g.paint.get("fill-extrusion-pattern").constantOr(1))Ju(p,y,g,w,F,ze.disabled,$e.disabled),Ju(p,y,g,w,F,p.stencilModeFor3D(),p.colorModeForRenderPass());else{var N=p.colorModeForRenderPass();Ju(p,y,g,w,F,ze.disabled,N)}}},hillshade:function(p,y,g,w){if(p.renderPass==="offscreen"||p.renderPass==="translucent"){for(var L=p.context,F=p.depthModeForSublayer(0,Se.ReadOnly),N=p.colorModeForRenderPass(),H=p.renderPass==="translucent"?p.stencilConfigForOverlap(w):[{},w],Q=H[0],oe=0,ye=H[1];oe<ye.length;oe+=1){var be=ye[oe],Ee=y.getTile(be);Ee.needsHillshadePrepare&&p.renderPass==="offscreen"?ah(p,Ee,g,F,ze.disabled,N):p.renderPass==="translucent"&&yu(p,Ee,g,F,Q[be.overscaledZ],N)}L.viewport.set([0,0,p.width,p.height])}},raster:function(p,y,g,w){if(p.renderPass==="translucent"&&g.paint.get("raster-opacity")!==0&&w.length)for(var L=p.context,F=L.gl,N=y.getSource(),H=p.useProgram("raster"),Q=p.colorModeForRenderPass(),oe=N instanceof Xt?[{},w]:p.stencilConfigForOverlap(w),ye=oe[0],be=oe[1],Ee=be[be.length-1].overscaledZ,Be=!p.options.moving,Re=0,We=be;Re<We.length;Re+=1){var Ce=We[Re],Ve=p.depthModeForSublayer(Ce.overscaledZ-Ee,g.paint.get("raster-opacity")===1?Se.ReadWrite:Se.ReadOnly,F.LESS),et=y.getTile(Ce),dt=p.transform.calculatePosMatrix(Ce.toUnwrapped(),Be);et.registerFadeDuration(g.paint.get("raster-fade-duration"));var xt=y.findLoadedParent(Ce,0),Tt=Cs(et,xt,y,g,p.transform),kt=void 0,Ht=void 0,oi=g.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;L.activeTexture.set(F.TEXTURE0),et.texture.bind(oi,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),L.activeTexture.set(F.TEXTURE1),xt?(xt.texture.bind(oi,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),kt=Math.pow(2,xt.tileID.overscaledZ-et.tileID.overscaledZ),Ht=[et.tileID.canonical.x*kt%1,et.tileID.canonical.y*kt%1]):et.texture.bind(oi,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);var ri=oh(dt,Ht||[0,0],kt||1,Tt,g);N instanceof Xt?H.draw(L,F.TRIANGLES,Ve,ze.disabled,Q,tt.disabled,ri,g.id,N.boundsBuffer,p.quadTriangleIndexBuffer,N.boundsSegments):H.draw(L,F.TRIANGLES,Ve,ye[Ce.overscaledZ],Q,tt.disabled,ri,g.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,y,g){var w=g.paint.get("background-color"),L=g.paint.get("background-opacity");if(L!==0){var F=p.context,N=F.gl,H=p.transform,Q=H.tileSize,oe=g.paint.get("background-pattern");if(!p.isPatternMissing(oe)){var ye=!oe&&w.a===1&&L===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass===ye){var be=ze.disabled,Ee=p.depthModeForSublayer(0,ye==="opaque"?Se.ReadWrite:Se.ReadOnly),Be=p.colorModeForRenderPass(),Re=p.useProgram(oe?"backgroundPattern":"background"),We=H.coveringTiles({tileSize:Q});oe&&(F.activeTexture.set(N.TEXTURE0),p.imageManager.bind(p.context));for(var Ce=g.getCrossfadeParameters(),Ve=0,et=We;Ve<et.length;Ve+=1){var dt=et[Ve],xt=p.transform.calculatePosMatrix(dt.toUnwrapped()),Tt=oe?As(xt,L,p,oe,{tileID:dt,tileSize:Q},Ce):Xs(xt,L,w);Re.draw(F,N.TRIANGLES,Ee,be,Be,tt.disabled,Tt,g.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}}}}},debug:function(p,y,g){for(var w=0;w<g.length;w++)fl(p,y,g[w])},custom:function(p,y,g){var w=p.context,L=g.implementation;if(p.renderPass==="offscreen"){var F=L.prerender;F&&(p.setCustomLayerDefaults(),w.setColorMode(p.colorModeForRenderPass()),F.call(L,w.gl,p.transform.customLayerMatrix()),w.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),w.setColorMode(p.colorModeForRenderPass()),w.setStencilMode(ze.disabled);var N=L.renderingMode==="3d"?new Se(p.context.gl.LEQUAL,Se.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,Se.ReadOnly);w.setDepthMode(N),L.render(w.gl,p.transform.customLayerMatrix()),w.setDirty(),p.setBaseState(),w.bindFramebuffer.set(null)}}},Gr=function(p,y){this.context=new Ie(p),this.transform=y,this._tileTextures={},this.setup(),this.numSublayers=Ne.maxUnderzooming+Ne.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new as,this.gpuTimers={}};Gr.prototype.resize=function(p,y){if(this.width=p*c.browser.devicePixelRatio,this.height=y*c.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var g=0,w=this.style._order;g<w.length;g+=1)this.style._layers[w[g]].resize()},Gr.prototype.setup=function(){var p=this.context,y=new c.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(c.EXTENT,0),y.emplaceBack(0,c.EXTENT),y.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=p.createVertexBuffer(y,so.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);var g=new c.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(c.EXTENT,0),g.emplaceBack(0,c.EXTENT),g.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=p.createVertexBuffer(g,so.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);var w=new c.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(c.EXTENT,0,c.EXTENT,0),w.emplaceBack(0,c.EXTENT,0,c.EXTENT),w.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.rasterBoundsBuffer=p.createVertexBuffer(w,ni.members),this.rasterBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);var L=new c.StructArrayLayout2i4;L.emplaceBack(0,0),L.emplaceBack(1,0),L.emplaceBack(0,1),L.emplaceBack(1,1),this.viewportBuffer=p.createVertexBuffer(L,so.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);var F=new c.StructArrayLayout1ui2;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=p.createIndexBuffer(F);var N=new c.StructArrayLayout3ui6;N.emplaceBack(0,1,2),N.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=p.createIndexBuffer(N),this.emptyTexture=new c.Texture(p,{width:1,height:1,data:new Uint8Array([0,0,0,0])},p.gl.RGBA);var H=this.context.gl;this.stencilClearMode=new ze({func:H.ALWAYS,mask:0},0,255,H.ZERO,H.ZERO,H.ZERO)},Gr.prototype.clearStencil=function(){var p=this.context,y=p.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var g=c.create();c.ortho(g,0,this.width,this.height,0,0,1),c.scale(g,g,[y.drawingBufferWidth,y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(p,y.TRIANGLES,Se.disabled,this.stencilClearMode,$e.disabled,tt.disabled,cs(g),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Gr.prototype._renderTileClippingMasks=function(p,y){if(this.currentStencilSource!==p.source&&p.isTileClipped()&&y&&y.length){this.currentStencilSource=p.source;var g=this.context,w=g.gl;this.nextStencilID+y.length>256&&this.clearStencil(),g.setColorMode($e.disabled),g.setDepthMode(Se.disabled);var L=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var F=0,N=y;F<N.length;F+=1){var H=N[F],Q=this._tileClippingMaskIDs[H.key]=this.nextStencilID++;L.draw(g,w.TRIANGLES,Se.disabled,new ze({func:w.ALWAYS,mask:0},Q,255,w.KEEP,w.KEEP,w.REPLACE),$e.disabled,tt.disabled,cs(H.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Gr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var p=this.nextStencilID++,y=this.context.gl;return new ze({func:y.NOTEQUAL,mask:255},p,255,y.KEEP,y.KEEP,y.REPLACE)},Gr.prototype.stencilModeForClipping=function(p){var y=this.context.gl;return new ze({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[p.key],0,y.KEEP,y.KEEP,y.REPLACE)},Gr.prototype.stencilConfigForOverlap=function(p){var y,g=this.context.gl,w=p.sort(function(Q,oe){return oe.overscaledZ-Q.overscaledZ}),L=w[w.length-1].overscaledZ,F=w[0].overscaledZ-L+1;if(F>1){this.currentStencilSource=void 0,this.nextStencilID+F>256&&this.clearStencil();for(var N={},H=0;H<F;H++)N[H+L]=new ze({func:g.GEQUAL,mask:255},H+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=F,[N,w]}return[(y={},y[L]=ze.disabled,y),w]},Gr.prototype.colorModeForRenderPass=function(){var p=this.context.gl;return this._showOverdrawInspector?new $e([p.CONSTANT_COLOR,p.ONE],new c.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?$e.unblended:$e.alphaBlended},Gr.prototype.depthModeForSublayer=function(p,y,g){if(!this.opaquePassEnabledForLayer())return Se.disabled;var w=1-((1+this.currentLayer)*this.numSublayers+p)*this.depthEpsilon;return new Se(g||this.context.gl.LEQUAL,y,[w,w])},Gr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Gr.prototype.render=function(p,y){var g=this;this.style=p,this.options=y,this.lineAtlas=p.lineAtlas,this.imageManager=p.imageManager,this.glyphManager=p.glyphManager,this.symbolFadeChange=p.placement.symbolFadeChange(c.browser.now()),this.imageManager.beginFrame();var w=this.style._order,L=this.style.sourceCaches;for(var F in L){var N=L[F];N.used&&N.prepare(this.context)}var H,Q,oe={},ye={},be={};for(var Ee in L){var Be=L[Ee];oe[Ee]=Be.getVisibleCoordinates(),ye[Ee]=oe[Ee].slice().reverse(),be[Ee]=Be.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Re=0;Re<w.length;Re++)if(this.style._layers[w[Re]].is3D()){this.opaquePassCutoff=Re;break}this.renderPass="offscreen";for(var We=0,Ce=w;We<Ce.length;We+=1){var Ve=this.style._layers[Ce[We]];if(Ve.hasOffscreenPass()&&!Ve.isHidden(this.transform.zoom)){var et=ye[Ve.source];(Ve.type==="custom"||et.length)&&this.renderLayer(this,L[Ve.source],Ve,et)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:y.showOverdrawInspector?c.Color.black:c.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(p._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){var dt=this.style._layers[w[this.currentLayer]],xt=L[dt.source],Tt=oe[dt.source];this._renderTileClippingMasks(dt,Tt),this.renderLayer(this,xt,dt,Tt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){var kt=this.style._layers[w[this.currentLayer]],Ht=L[kt.source],oi=(kt.type==="symbol"?be:ye)[kt.source];this._renderTileClippingMasks(kt,oe[kt.source]),this.renderLayer(this,Ht,kt,oi)}this.options.showTileBoundaries&&(c.values(this.style._layers).forEach(function(ri){ri.source&&!ri.isHidden(g.transform.zoom)&&(ri.source!==(Q&&Q.id)&&(Q=g.style.sourceCaches[ri.source]),(!H||H.getSource().maxzoom<Q.getSource().maxzoom)&&(H=Q))}),H&&Da.debug(this,H,H.getVisibleCoordinates())),this.options.showPadding&&function(ri){var Ti=ri.transform.padding;Ac(ri,ri.transform.height-(Ti.top||0),3,Yu),Ac(ri,Ti.bottom||0,3,zl),ks(ri,Ti.left||0,3,Dl),ks(ri,ri.transform.width-(Ti.right||0),3,ea);var Hi=ri.transform.centerPoint;(function(Qi,Gi,Xn,Li){Rl(Qi,Gi-1,Xn-10,2,20,Li),Rl(Qi,Gi-10,Xn-1,20,2,Li)})(ri,Hi.x,ri.transform.height-Hi.y,ta)}(this),this.context.setDefault()},Gr.prototype.renderLayer=function(p,y,g,w){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="custom"||w.length)&&(this.id=g.id,this.gpuTimingStart(g),Da[g.type](p,y,g,w,this.style.placement.variableOffsets),this.gpuTimingEnd())},Gr.prototype.gpuTimingStart=function(p){if(this.options.gpuTiming){var y=this.context.extTimerQuery,g=this.gpuTimers[p.id];g||(g=this.gpuTimers[p.id]={calls:0,cpuTime:0,query:y.createQueryEXT()}),g.calls++,y.beginQueryEXT(y.TIME_ELAPSED_EXT,g.query)}},Gr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var p=this.context.extTimerQuery;p.endQueryEXT(p.TIME_ELAPSED_EXT)}},Gr.prototype.collectGpuTimers=function(){var p=this.gpuTimers;return this.gpuTimers={},p},Gr.prototype.queryGpuTimers=function(p){var y={};for(var g in p){var w=p[g],L=this.context.extTimerQuery,F=L.getQueryObjectEXT(w.query,L.QUERY_RESULT_EXT)/1e6;L.deleteQueryEXT(w.query),y[g]=F}return y},Gr.prototype.translatePosMatrix=function(p,y,g,w,L){if(!g[0]&&!g[1])return p;var F=L?w==="map"?this.transform.angle:0:w==="viewport"?-this.transform.angle:0;if(F){var N=Math.sin(F),H=Math.cos(F);g=[g[0]*H-g[1]*N,g[0]*N+g[1]*H]}var Q=[L?g[0]:Br(y,g[0],this.transform.zoom),L?g[1]:Br(y,g[1],this.transform.zoom),0],oe=new Float32Array(16);return c.translate(oe,p,Q),oe},Gr.prototype.saveTileTexture=function(p){var y=this._tileTextures[p.size[0]];y?y.push(p):this._tileTextures[p.size[0]]=[p]},Gr.prototype.getTileTexture=function(p){var y=this._tileTextures[p];return y&&y.length>0?y.pop():null},Gr.prototype.isPatternMissing=function(p){if(!p)return!1;if(!p.from||!p.to)return!0;var y=this.imageManager.getPattern(p.from.toString()),g=this.imageManager.getPattern(p.to.toString());return!y||!g},Gr.prototype.useProgram=function(p,y){this.cache=this.cache||{};var g=""+p+(y?y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[g]||(this.cache[g]=new Wu(this.context,p,cl[p],y,Tc[p],this._showOverdrawInspector)),this.cache[g]},Gr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Gr.prototype.setBaseState=function(){var p=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(p.FUNC_ADD)},Gr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=c.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Gr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Ol=function(p,y){this.points=p,this.planes=y};Ol.fromInvProjectionMatrix=function(p,y,g){var w=Math.pow(2,g),L=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(N){return c.transformMat4([],N,p)}).map(function(N){return c.scale$1([],N,1/N[3]/y*w)}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(N){var H=c.sub([],L[N[0]],L[N[1]]),Q=c.sub([],L[N[2]],L[N[1]]),oe=c.normalize([],c.cross([],H,Q)),ye=-c.dot(oe,L[N[1]]);return oe.concat(ye)});return new Ol(L,F)};var ml=function(p,y){this.min=p,this.max=y,this.center=c.scale$2([],c.add([],this.min,this.max),.5)};ml.prototype.quadrant=function(p){for(var y=[p%2==0,p<2],g=c.clone$2(this.min),w=c.clone$2(this.max),L=0;L<y.length;L++)g[L]=y[L]?this.min[L]:this.center[L],w[L]=y[L]?this.center[L]:this.max[L];return w[2]=this.max[2],new ml(g,w)},ml.prototype.distanceX=function(p){return Math.max(Math.min(this.max[0],p[0]),this.min[0])-p[0]},ml.prototype.distanceY=function(p){return Math.max(Math.min(this.max[1],p[1]),this.min[1])-p[1]},ml.prototype.intersects=function(p){for(var y=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],g=!0,w=0;w<p.planes.length;w++){for(var L=p.planes[w],F=0,N=0;N<y.length;N++)F+=c.dot$1(L,y[N])>=0;if(F===0)return 0;F!==y.length&&(g=!1)}if(g)return 2;for(var H=0;H<3;H++){for(var Q=Number.MAX_VALUE,oe=-Number.MAX_VALUE,ye=0;ye<p.points.length;ye++){var be=p.points[ye][H]-this.min[H];Q=Math.min(Q,be),oe=Math.max(oe,be)}if(oe<0||Q>this.max[H]-this.min[H])return 0}return 1};var Ms=function(p,y,g,w){if(p===void 0&&(p=0),y===void 0&&(y=0),g===void 0&&(g=0),w===void 0&&(w=0),isNaN(p)||p<0||isNaN(y)||y<0||isNaN(g)||g<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=p,this.bottom=y,this.left=g,this.right=w};Ms.prototype.interpolate=function(p,y,g){return y.top!=null&&p.top!=null&&(this.top=c.number(p.top,y.top,g)),y.bottom!=null&&p.bottom!=null&&(this.bottom=c.number(p.bottom,y.bottom,g)),y.left!=null&&p.left!=null&&(this.left=c.number(p.left,y.left,g)),y.right!=null&&p.right!=null&&(this.right=c.number(p.right,y.right,g)),this},Ms.prototype.getCenter=function(p,y){var g=c.clamp((this.left+p-this.right)/2,0,p),w=c.clamp((this.top+y-this.bottom)/2,0,y);return new c.Point(g,w)},Ms.prototype.equals=function(p){return this.top===p.top&&this.bottom===p.bottom&&this.left===p.left&&this.right===p.right},Ms.prototype.clone=function(){return new Ms(this.top,this.bottom,this.left,this.right)},Ms.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Bn=function(p,y,g,w,L){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=L===void 0||L,this._minZoom=p||0,this._maxZoom=y||22,this._minPitch=g==null?0:g,this._maxPitch=w==null?60:w,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ms,this._posMatrixCache={},this._alignedPosMatrixCache={}},vr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Bn.prototype.clone=function(){var p=new Bn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return p.tileSize=this.tileSize,p.latRange=this.latRange,p.width=this.width,p.height=this.height,p._center=this._center,p.zoom=this.zoom,p.angle=this.angle,p._fov=this._fov,p._pitch=this._pitch,p._unmodified=this._unmodified,p._edgeInsets=this._edgeInsets.clone(),p._calcMatrices(),p},vr.minZoom.get=function(){return this._minZoom},vr.minZoom.set=function(p){this._minZoom!==p&&(this._minZoom=p,this.zoom=Math.max(this.zoom,p))},vr.maxZoom.get=function(){return this._maxZoom},vr.maxZoom.set=function(p){this._maxZoom!==p&&(this._maxZoom=p,this.zoom=Math.min(this.zoom,p))},vr.minPitch.get=function(){return this._minPitch},vr.minPitch.set=function(p){this._minPitch!==p&&(this._minPitch=p,this.pitch=Math.max(this.pitch,p))},vr.maxPitch.get=function(){return this._maxPitch},vr.maxPitch.set=function(p){this._maxPitch!==p&&(this._maxPitch=p,this.pitch=Math.min(this.pitch,p))},vr.renderWorldCopies.get=function(){return this._renderWorldCopies},vr.renderWorldCopies.set=function(p){p===void 0?p=!0:p===null&&(p=!1),this._renderWorldCopies=p},vr.worldSize.get=function(){return this.tileSize*this.scale},vr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},vr.size.get=function(){return new c.Point(this.width,this.height)},vr.bearing.get=function(){return-this.angle/Math.PI*180},vr.bearing.set=function(p){var y=-c.wrap(p,-180,180)*Math.PI/180;this.angle!==y&&(this._unmodified=!1,this.angle=y,this._calcMatrices(),this.rotationMatrix=c.create$2(),c.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},vr.pitch.get=function(){return this._pitch/Math.PI*180},vr.pitch.set=function(p){var y=c.clamp(p,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==y&&(this._unmodified=!1,this._pitch=y,this._calcMatrices())},vr.fov.get=function(){return this._fov/Math.PI*180},vr.fov.set=function(p){p=Math.max(.01,Math.min(60,p)),this._fov!==p&&(this._unmodified=!1,this._fov=p/180*Math.PI,this._calcMatrices())},vr.zoom.get=function(){return this._zoom},vr.zoom.set=function(p){var y=Math.min(Math.max(p,this.minZoom),this.maxZoom);this._zoom!==y&&(this._unmodified=!1,this._zoom=y,this.scale=this.zoomScale(y),this.tileZoom=Math.floor(y),this.zoomFraction=y-this.tileZoom,this._constrain(),this._calcMatrices())},vr.center.get=function(){return this._center},vr.center.set=function(p){p.lat===this._center.lat&&p.lng===this._center.lng||(this._unmodified=!1,this._center=p,this._constrain(),this._calcMatrices())},vr.padding.get=function(){return this._edgeInsets.toJSON()},vr.padding.set=function(p){this._edgeInsets.equals(p)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,p,1),this._calcMatrices())},vr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Bn.prototype.isPaddingEqual=function(p){return this._edgeInsets.equals(p)},Bn.prototype.interpolatePadding=function(p,y,g){this._unmodified=!1,this._edgeInsets.interpolate(p,y,g),this._constrain(),this._calcMatrices()},Bn.prototype.coveringZoomLevel=function(p){var y=(p.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/p.tileSize));return Math.max(0,y)},Bn.prototype.getVisibleUnwrappedCoordinates=function(p){var y=[new c.UnwrappedTileID(0,p)];if(this._renderWorldCopies)for(var g=this.pointCoordinate(new c.Point(0,0)),w=this.pointCoordinate(new c.Point(this.width,0)),L=this.pointCoordinate(new c.Point(this.width,this.height)),F=this.pointCoordinate(new c.Point(0,this.height)),N=Math.floor(Math.min(g.x,w.x,L.x,F.x)),H=Math.floor(Math.max(g.x,w.x,L.x,F.x)),Q=N-1;Q<=H+1;Q++)Q!==0&&y.push(new c.UnwrappedTileID(Q,p));return y},Bn.prototype.coveringTiles=function(p){var y=this.coveringZoomLevel(p),g=y;if(p.minzoom!==void 0&&y<p.minzoom)return[];p.maxzoom!==void 0&&y>p.maxzoom&&(y=p.maxzoom);var w=c.MercatorCoordinate.fromLngLat(this.center),L=Math.pow(2,y),F=[L*w.x,L*w.y,0],N=Ol.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y),H=p.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(H=y);var Q=function(ri){return{aabb:new ml([ri*L,0,0],[(ri+1)*L,L,0]),zoom:0,x:0,y:0,wrap:ri,fullyVisible:!1}},oe=[],ye=[],be=y,Ee=p.reparseOverscaled?g:y;if(this._renderWorldCopies)for(var Be=1;Be<=3;Be++)oe.push(Q(-Be)),oe.push(Q(Be));for(oe.push(Q(0));oe.length>0;){var Re=oe.pop(),We=Re.x,Ce=Re.y,Ve=Re.fullyVisible;if(!Ve){var et=Re.aabb.intersects(N);if(et===0)continue;Ve=et===2}var dt=Re.aabb.distanceX(F),xt=Re.aabb.distanceY(F),Tt=Math.max(Math.abs(dt),Math.abs(xt));if(Re.zoom===be||Tt>3+(1<<be-Re.zoom)-2&&Re.zoom>=H)ye.push({tileID:new c.OverscaledTileID(Re.zoom===be?Ee:Re.zoom,Re.wrap,Re.zoom,We,Ce),distanceSq:c.sqrLen([F[0]-.5-We,F[1]-.5-Ce])});else for(var kt=0;kt<4;kt++){var Ht=(We<<1)+kt%2,oi=(Ce<<1)+(kt>>1);oe.push({aabb:Re.aabb.quadrant(kt),zoom:Re.zoom+1,x:Ht,y:oi,wrap:Re.wrap,fullyVisible:Ve})}}return ye.sort(function(ri,Ti){return ri.distanceSq-Ti.distanceSq}).map(function(ri){return ri.tileID})},Bn.prototype.resize=function(p,y){this.width=p,this.height=y,this.pixelsToGLUnits=[2/p,-2/y],this._constrain(),this._calcMatrices()},vr.unmodified.get=function(){return this._unmodified},Bn.prototype.zoomScale=function(p){return Math.pow(2,p)},Bn.prototype.scaleZoom=function(p){return Math.log(p)/Math.LN2},Bn.prototype.project=function(p){var y=c.clamp(p.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.Point(c.mercatorXfromLng(p.lng)*this.worldSize,c.mercatorYfromLat(y)*this.worldSize)},Bn.prototype.unproject=function(p){return new c.MercatorCoordinate(p.x/this.worldSize,p.y/this.worldSize).toLngLat()},vr.point.get=function(){return this.project(this.center)},Bn.prototype.setLocationAtPoint=function(p,y){var g=this.pointCoordinate(y),w=this.pointCoordinate(this.centerPoint),L=this.locationCoordinate(p),F=new c.MercatorCoordinate(L.x-(g.x-w.x),L.y-(g.y-w.y));this.center=this.coordinateLocation(F),this._renderWorldCopies&&(this.center=this.center.wrap())},Bn.prototype.locationPoint=function(p){return this.coordinatePoint(this.locationCoordinate(p))},Bn.prototype.pointLocation=function(p){return this.coordinateLocation(this.pointCoordinate(p))},Bn.prototype.locationCoordinate=function(p){return c.MercatorCoordinate.fromLngLat(p)},Bn.prototype.coordinateLocation=function(p){return p.toLngLat()},Bn.prototype.pointCoordinate=function(p){var y=[p.x,p.y,0,1],g=[p.x,p.y,1,1];c.transformMat4(y,y,this.pixelMatrixInverse),c.transformMat4(g,g,this.pixelMatrixInverse);var w=y[3],L=g[3],F=y[1]/w,N=g[1]/L,H=y[2]/w,Q=g[2]/L,oe=H===Q?0:(0-H)/(Q-H);return new c.MercatorCoordinate(c.number(y[0]/w,g[0]/L,oe)/this.worldSize,c.number(F,N,oe)/this.worldSize)},Bn.prototype.coordinatePoint=function(p){var y=[p.x*this.worldSize,p.y*this.worldSize,0,1];return c.transformMat4(y,y,this.pixelMatrix),new c.Point(y[0]/y[3],y[1]/y[3])},Bn.prototype.getBounds=function(){return new c.LngLatBounds().extend(this.pointLocation(new c.Point(0,0))).extend(this.pointLocation(new c.Point(this.width,0))).extend(this.pointLocation(new c.Point(this.width,this.height))).extend(this.pointLocation(new c.Point(0,this.height)))},Bn.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new c.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Bn.prototype.setMaxBounds=function(p){p?(this.lngRange=[p.getWest(),p.getEast()],this.latRange=[p.getSouth(),p.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Bn.prototype.calculatePosMatrix=function(p,y){y===void 0&&(y=!1);var g=p.key,w=y?this._alignedPosMatrixCache:this._posMatrixCache;if(w[g])return w[g];var L=p.canonical,F=this.worldSize/this.zoomScale(L.z),N=L.x+Math.pow(2,L.z)*p.wrap,H=c.identity(new Float64Array(16));return c.translate(H,H,[N*F,L.y*F,0]),c.scale(H,H,[F/c.EXTENT,F/c.EXTENT,1]),c.multiply(H,y?this.alignedProjMatrix:this.projMatrix,H),w[g]=new Float32Array(H),w[g]},Bn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Bn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var p,y,g,w,L=-90,F=90,N=-180,H=180,Q=this.size,oe=this._unmodified;if(this.latRange){var ye=this.latRange;L=c.mercatorYfromLat(ye[1])*this.worldSize,p=(F=c.mercatorYfromLat(ye[0])*this.worldSize)-L<Q.y?Q.y/(F-L):0}if(this.lngRange){var be=this.lngRange;N=c.mercatorXfromLng(be[0])*this.worldSize,y=(H=c.mercatorXfromLng(be[1])*this.worldSize)-N<Q.x?Q.x/(H-N):0}var Ee=this.point,Be=Math.max(y||0,p||0);if(Be)return this.center=this.unproject(new c.Point(y?(H+N)/2:Ee.x,p?(F+L)/2:Ee.y)),this.zoom+=this.scaleZoom(Be),this._unmodified=oe,void(this._constraining=!1);if(this.latRange){var Re=Ee.y,We=Q.y/2;Re-We<L&&(w=L+We),Re+We>F&&(w=F-We)}if(this.lngRange){var Ce=Ee.x,Ve=Q.x/2;Ce-Ve<N&&(g=N+Ve),Ce+Ve>H&&(g=H-Ve)}g===void 0&&w===void 0||(this.center=this.unproject(new c.Point(g!==void 0?g:Ee.x,w!==void 0?w:Ee.y))),this._unmodified=oe,this._constraining=!1}},Bn.prototype._calcMatrices=function(){if(this.height){var p=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var y=Math.PI/2+this._pitch,g=this._fov*(.5+p.y/this.height),w=Math.sin(g)*this.cameraToCenterDistance/Math.sin(c.clamp(Math.PI-y-g,.01,Math.PI-.01)),L=this.point,F=L.x,N=L.y,H=1.01*(Math.cos(Math.PI/2-this._pitch)*w+this.cameraToCenterDistance),Q=this.height/50,oe=new Float64Array(16);c.perspective(oe,this._fov,this.width/this.height,Q,H),oe[8]=2*-p.x/this.width,oe[9]=2*p.y/this.height,c.scale(oe,oe,[1,-1,1]),c.translate(oe,oe,[0,0,-this.cameraToCenterDistance]),c.rotateX(oe,oe,this._pitch),c.rotateZ(oe,oe,this.angle),c.translate(oe,oe,[-F,-N,0]),this.mercatorMatrix=c.scale([],oe,[this.worldSize,this.worldSize,this.worldSize]),c.scale(oe,oe,[1,1,c.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=oe,this.invProjMatrix=c.invert([],this.projMatrix);var ye=this.width%2/2,be=this.height%2/2,Ee=Math.cos(this.angle),Be=Math.sin(this.angle),Re=F-Math.round(F)+Ee*ye+Be*be,We=N-Math.round(N)+Ee*be+Be*ye,Ce=new Float64Array(oe);if(c.translate(Ce,Ce,[Re>.5?Re-1:Re,We>.5?We-1:We,0]),this.alignedProjMatrix=Ce,oe=c.create(),c.scale(oe,oe,[this.width/2,-this.height/2,1]),c.translate(oe,oe,[1,-1,0]),this.labelPlaneMatrix=oe,oe=c.create(),c.scale(oe,oe,[1,-1,1]),c.translate(oe,oe,[-1,-1,0]),c.scale(oe,oe,[2/this.width,2/this.height,1]),this.glCoordMatrix=oe,this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(oe=c.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=oe,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Bn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var p=this.pointCoordinate(new c.Point(0,0)),y=[p.x*this.worldSize,p.y*this.worldSize,0,1];return c.transformMat4(y,y,this.pixelMatrix)[3]/this.cameraToCenterDistance},Bn.prototype.getCameraPoint=function(){var p=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.Point(0,p))},Bn.prototype.getCameraQueryGeometry=function(p){var y=this.getCameraPoint();if(p.length===1)return[p[0],y];for(var g=y.x,w=y.y,L=y.x,F=y.y,N=0,H=p;N<H.length;N+=1){var Q=H[N];g=Math.min(g,Q.x),w=Math.min(w,Q.y),L=Math.max(L,Q.x),F=Math.max(F,Q.y)}return[new c.Point(g,w),new c.Point(L,w),new c.Point(L,F),new c.Point(g,F),new c.Point(g,w)]},Object.defineProperties(Bn.prototype,vr);var Si=function(p){var y,g,w,L;this._hashName=p&&encodeURIComponent(p),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(y=this._updateHashUnthrottled.bind(this),g=!1,w=null,L=function(){w=null,g&&(y(),w=setTimeout(L,300),g=!1)},function(){return g=!0,w||L(),w})};Si.prototype.addTo=function(p){return this._map=p,c.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Si.prototype.remove=function(){return c.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Si.prototype.getHashString=function(p){var y=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,w=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),L=Math.pow(10,w),F=Math.round(y.lng*L)/L,N=Math.round(y.lat*L)/L,H=this._map.getBearing(),Q=this._map.getPitch(),oe="";if(oe+=p?"/"+F+"/"+N+"/"+g:g+"/"+N+"/"+F,(H||Q)&&(oe+="/"+Math.round(10*H)/10),Q&&(oe+="/"+Math.round(Q)),this._hashName){var ye=this._hashName,be=!1,Ee=c.window.location.hash.slice(1).split("&").map(function(Be){var Re=Be.split("=")[0];return Re===ye?(be=!0,Re+"="+oe):Be}).filter(function(Be){return Be});return be||Ee.push(ye+"="+oe),"#"+Ee.join("&")}return"#"+oe},Si.prototype._getCurrentHash=function(){var p,y=this,g=c.window.location.hash.replace("#","");return this._hashName?(g.split("&").map(function(w){return w.split("=")}).forEach(function(w){w[0]===y._hashName&&(p=w)}),(p&&p[1]||"").split("/")):g.split("/")},Si.prototype._onHashChange=function(){var p=this._getCurrentHash();if(p.length>=3&&!p.some(function(g){return isNaN(g)})){var y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:y,pitch:+(p[4]||0)}),!0}return!1},Si.prototype._updateHashUnthrottled=function(){var p=c.window.location.href.replace(/(#.+)?$/,this.getHashString());try{c.window.history.replaceState(c.window.history.state,null,p)}catch{}};var gl={linearity:.3,easing:c.bezier(0,0,.3,1)},ds=c.extend({deceleration:2500,maxSpeed:1400},gl),Ja=c.extend({deceleration:20,maxSpeed:1400},gl),_u=c.extend({deceleration:1e3,maxSpeed:360},gl),Mi=c.extend({deceleration:1e3,maxSpeed:90},gl),yl=function(p){this._map=p,this.clear()};function Bl(p,y){(!p.duration||p.duration<y.duration)&&(p.duration=y.duration,p.easing=y.easing)}function Ls(p,y,g){var w=g.maxSpeed,L=g.linearity,F=g.deceleration,N=c.clamp(p*L/(y/1e3),-w,w),H=Math.abs(N)/(F*L);return{easing:g.easing,duration:1e3*H,amount:N*(H/2)}}yl.prototype.clear=function(){this._inertiaBuffer=[]},yl.prototype.record=function(p){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.browser.now(),settings:p})},yl.prototype._drainInertiaBuffer=function(){for(var p=this._inertiaBuffer,y=c.browser.now();p.length>0&&y-p[0].time>160;)p.shift()},yl.prototype._onMoveEnd=function(p){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var y={zoom:0,bearing:0,pitch:0,pan:new c.Point(0,0),pinchAround:void 0,around:void 0},g=0,w=this._inertiaBuffer;g<w.length;g+=1){var L=w[g].settings;y.zoom+=L.zoomDelta||0,y.bearing+=L.bearingDelta||0,y.pitch+=L.pitchDelta||0,L.panDelta&&y.pan._add(L.panDelta),L.around&&(y.around=L.around),L.pinchAround&&(y.pinchAround=L.pinchAround)}var F=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,N={};if(y.pan.mag()){var H=Ls(y.pan.mag(),F,c.extend({},ds,p||{}));N.offset=y.pan.mult(H.amount/y.pan.mag()),N.center=this._map.transform.center,Bl(N,H)}if(y.zoom){var Q=Ls(y.zoom,F,Ja);N.zoom=this._map.transform.zoom+Q.amount,Bl(N,Q)}if(y.bearing){var oe=Ls(y.bearing,F,_u);N.bearing=this._map.transform.bearing+c.clamp(oe.amount,-179,179),Bl(N,oe)}if(y.pitch){var ye=Ls(y.pitch,F,Mi);N.pitch=this._map.transform.pitch+ye.amount,Bl(N,ye)}if(N.zoom||N.bearing){var be=y.pinchAround===void 0?y.around:y.pinchAround;N.around=be?this._map.unproject(be):this._map.getCenter()}return this.clear(),c.extend(N,{noMoveStart:!0})}};var Jr=function(p){function y(w,L,F,N){N===void 0&&(N={});var H=S.mousePos(L.getCanvasContainer(),F),Q=L.unproject(H);p.call(this,w,c.extend({point:H,lngLat:Q,originalEvent:F},N)),this._defaultPrevented=!1,this.target=L}p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y;var g={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,g),y}(c.Event),Fl=function(p){function y(w,L,F){var N=w==="touchend"?F.changedTouches:F.touches,H=S.touchPos(L.getCanvasContainer(),N),Q=H.map(function(be){return L.unproject(be)}),oe=H.reduce(function(be,Ee,Be,Re){return be.add(Ee.div(Re.length))},new c.Point(0,0)),ye=L.unproject(oe);p.call(this,w,{points:H,point:oe,lngLats:Q,lngLat:ye,originalEvent:F}),this._defaultPrevented=!1}p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y;var g={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,g),y}(c.Event),Cc=function(p){function y(w,L,F){p.call(this,w,{originalEvent:F}),this._defaultPrevented=!1}p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y;var g={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,g),y}(c.Event),po=function(p,y){this._map=p,this._clickTolerance=y.clickTolerance};po.prototype.reset=function(){delete this._mousedownPos},po.prototype.wheel=function(p){return this._firePreventable(new Cc(p.type,this._map,p))},po.prototype.mousedown=function(p,y){return this._mousedownPos=y,this._firePreventable(new Jr(p.type,this._map,p))},po.prototype.mouseup=function(p){this._map.fire(new Jr(p.type,this._map,p))},po.prototype.click=function(p,y){this._mousedownPos&&this._mousedownPos.dist(y)>=this._clickTolerance||this._map.fire(new Jr(p.type,this._map,p))},po.prototype.dblclick=function(p){return this._firePreventable(new Jr(p.type,this._map,p))},po.prototype.mouseover=function(p){this._map.fire(new Jr(p.type,this._map,p))},po.prototype.mouseout=function(p){this._map.fire(new Jr(p.type,this._map,p))},po.prototype.touchstart=function(p){return this._firePreventable(new Fl(p.type,this._map,p))},po.prototype.touchmove=function(p){this._map.fire(new Fl(p.type,this._map,p))},po.prototype.touchend=function(p){this._map.fire(new Fl(p.type,this._map,p))},po.prototype.touchcancel=function(p){this._map.fire(new Fl(p.type,this._map,p))},po.prototype._firePreventable=function(p){if(this._map.fire(p),p.defaultPrevented)return{}},po.prototype.isEnabled=function(){return!0},po.prototype.isActive=function(){return!1},po.prototype.enable=function(){},po.prototype.disable=function(){};var Pi=function(p){this._map=p};Pi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Pi.prototype.mousemove=function(p){this._map.fire(new Jr(p.type,this._map,p))},Pi.prototype.mousedown=function(){this._delayContextMenu=!0},Pi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Jr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Pi.prototype.contextmenu=function(p){this._delayContextMenu?this._contextMenuEvent=p:this._map.fire(new Jr(p.type,this._map,p)),this._map.listens("contextmenu")&&p.preventDefault()},Pi.prototype.isEnabled=function(){return!0},Pi.prototype.isActive=function(){return!1},Pi.prototype.enable=function(){},Pi.prototype.disable=function(){};var Wo=function(p,y){this._map=p,this._el=p.getCanvasContainer(),this._container=p.getContainer(),this._clickTolerance=y.clickTolerance||1};function Ul(p,y){for(var g={},w=0;w<p.length;w++)g[p[w].identifier]=y[w];return g}Wo.prototype.isEnabled=function(){return!!this._enabled},Wo.prototype.isActive=function(){return!!this._active},Wo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Wo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Wo.prototype.mousedown=function(p,y){this.isEnabled()&&p.shiftKey&&p.button===0&&(S.disableDrag(),this._startPos=this._lastPos=y,this._active=!0)},Wo.prototype.mousemoveWindow=function(p,y){if(this._active){var g=y;if(!(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)){var w=this._startPos;this._lastPos=g,this._box||(this._box=S.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",p));var L=Math.min(w.x,g.x),F=Math.max(w.x,g.x),N=Math.min(w.y,g.y),H=Math.max(w.y,g.y);S.setTransform(this._box,"translate("+L+"px,"+N+"px)"),this._box.style.width=F-L+"px",this._box.style.height=H-N+"px"}}},Wo.prototype.mouseupWindow=function(p,y){var g=this;if(this._active&&p.button===0){var w=this._startPos,L=y;if(this.reset(),S.suppressClick(),w.x!==L.x||w.y!==L.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:p})),{cameraAnimation:function(F){return F.fitScreenCoordinates(w,L,g._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",p)}},Wo.prototype.keydown=function(p){this._active&&p.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",p))},Wo.prototype.blur=function(){this.reset()},Wo.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(S.remove(this._box),this._box=null),S.enableDrag(),delete this._startPos,delete this._lastPos},Wo.prototype._fireEvent=function(p,y){return this._map.fire(new c.Event(p,{originalEvent:y}))};var Js=function(p){this.reset(),this.numTouches=p.numTouches};Js.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Js.prototype.touchstart=function(p,y,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=p.timeStamp),g.length===this.numTouches&&(this.centroid=function(w){for(var L=new c.Point(0,0),F=0,N=w;F<N.length;F+=1)L._add(N[F]);return L.div(w.length)}(y),this.touches=Ul(g,y)))},Js.prototype.touchmove=function(p,y,g){if(!this.aborted&&this.centroid){var w=Ul(g,y);for(var L in this.touches){var F=w[L];(!F||F.dist(this.touches[L])>30)&&(this.aborted=!0)}}},Js.prototype.touchend=function(p,y,g){if((!this.centroid||p.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){var w=!this.aborted&&this.centroid;if(this.reset(),w)return w}};var Ra=function(p){this.singleTap=new Js(p),this.numTaps=p.numTaps,this.reset()};Ra.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ra.prototype.touchstart=function(p,y,g){this.singleTap.touchstart(p,y,g)},Ra.prototype.touchmove=function(p,y,g){this.singleTap.touchmove(p,y,g)},Ra.prototype.touchend=function(p,y,g){var w=this.singleTap.touchend(p,y,g);if(w){var L=p.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(w)<30;if(L&&F||this.reset(),this.count++,this.lastTime=p.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}};var Hr=function(){this._zoomIn=new Ra({numTouches:1,numTaps:2}),this._zoomOut=new Ra({numTouches:2,numTaps:1}),this.reset()};Hr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Hr.prototype.touchstart=function(p,y,g){this._zoomIn.touchstart(p,y,g),this._zoomOut.touchstart(p,y,g)},Hr.prototype.touchmove=function(p,y,g){this._zoomIn.touchmove(p,y,g),this._zoomOut.touchmove(p,y,g)},Hr.prototype.touchend=function(p,y,g){var w=this,L=this._zoomIn.touchend(p,y,g),F=this._zoomOut.touchend(p,y,g);return L?(this._active=!0,p.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(N){return N.easeTo({duration:300,zoom:N.getZoom()+1,around:N.unproject(L)},{originalEvent:p})}}):F?(this._active=!0,p.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(N){return N.easeTo({duration:300,zoom:N.getZoom()-1,around:N.unproject(F)},{originalEvent:p})}}):void 0},Hr.prototype.touchcancel=function(){this.reset()},Hr.prototype.enable=function(){this._enabled=!0},Hr.prototype.disable=function(){this._enabled=!1,this.reset()},Hr.prototype.isEnabled=function(){return this._enabled},Hr.prototype.isActive=function(){return this._active};var ps={0:1,2:2},pi=function(p){this.reset(),this._clickTolerance=p.clickTolerance||1};pi.prototype.blur=function(){this.reset()},pi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},pi.prototype._correctButton=function(p,y){return!1},pi.prototype._move=function(p,y){return{}},pi.prototype.mousedown=function(p,y){if(!this._lastPoint){var g=S.mouseButton(p);this._correctButton(p,g)&&(this._lastPoint=y,this._eventButton=g)}},pi.prototype.mousemoveWindow=function(p,y){var g=this._lastPoint;if(g){if(p.preventDefault(),function(w,L){var F=ps[L];return w.buttons===void 0||(w.buttons&F)!==F}(p,this._eventButton))this.reset();else if(this._moved||!(y.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=y,this._move(g,y)}},pi.prototype.mouseupWindow=function(p){this._lastPoint&&S.mouseButton(p)===this._eventButton&&(this._moved&&S.suppressClick(),this.reset())},pi.prototype.enable=function(){this._enabled=!0},pi.prototype.disable=function(){this._enabled=!1,this.reset()},pi.prototype.isEnabled=function(){return this._enabled},pi.prototype.isActive=function(){return this._active};var vu=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.mousedown=function(g,w){p.prototype.mousedown.call(this,g,w),this._lastPoint&&(this._active=!0)},y.prototype._correctButton=function(g,w){return w===0&&!g.ctrlKey},y.prototype._move=function(g,w){return{around:w,panDelta:w.sub(g)}},y}(pi),Ps=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype._correctButton=function(g,w){return w===0&&g.ctrlKey||w===2},y.prototype._move=function(g,w){var L=.8*(w.x-g.x);if(L)return this._active=!0,{bearingDelta:L}},y.prototype.contextmenu=function(g){g.preventDefault()},y}(pi),bu=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype._correctButton=function(g,w){return w===0&&g.ctrlKey||w===2},y.prototype._move=function(g,w){var L=-.5*(w.y-g.y);if(L)return this._active=!0,{pitchDelta:L}},y.prototype.contextmenu=function(g){g.preventDefault()},y}(pi),ua=function(p){this._minTouches=1,this._clickTolerance=p.clickTolerance||1,this.reset()};ua.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new c.Point(0,0)},ua.prototype.touchstart=function(p,y,g){return this._calculateTransform(p,y,g)},ua.prototype.touchmove=function(p,y,g){if(this._active&&!(g.length<this._minTouches))return p.preventDefault(),this._calculateTransform(p,y,g)},ua.prototype.touchend=function(p,y,g){this._calculateTransform(p,y,g),this._active&&g.length<this._minTouches&&this.reset()},ua.prototype.touchcancel=function(){this.reset()},ua.prototype._calculateTransform=function(p,y,g){g.length>0&&(this._active=!0);var w=Ul(g,y),L=new c.Point(0,0),F=new c.Point(0,0),N=0;for(var H in w){var Q=w[H],oe=this._touches[H];oe&&(L._add(Q),F._add(Q.sub(oe)),N++,w[H]=Q)}if(this._touches=w,!(N<this._minTouches)&&F.mag()){var ye=F.div(N);if(this._sum._add(ye),!(this._sum.mag()<this._clickTolerance))return{around:L.div(N),panDelta:ye}}},ua.prototype.enable=function(){this._enabled=!0},ua.prototype.disable=function(){this._enabled=!1,this.reset()},ua.prototype.isEnabled=function(){return this._enabled},ua.prototype.isActive=function(){return this._active};var Yr=function(){this.reset()};function Vr(p,y,g){for(var w=0;w<p.length;w++)if(p[w].identifier===g)return y[w]}function _l(p,y){return Math.log(p/y)/Math.LN2}Yr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Yr.prototype._start=function(p){},Yr.prototype._move=function(p,y,g){return{}},Yr.prototype.touchstart=function(p,y,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([y[0],y[1]]))},Yr.prototype.touchmove=function(p,y,g){if(this._firstTwoTouches){p.preventDefault();var w=this._firstTwoTouches,L=w[1],F=Vr(g,y,w[0]),N=Vr(g,y,L);if(F&&N){var H=this._aroundCenter?null:F.add(N).div(2);return this._move([F,N],H,p)}}},Yr.prototype.touchend=function(p,y,g){if(this._firstTwoTouches){var w=this._firstTwoTouches,L=w[1],F=Vr(g,y,w[0]),N=Vr(g,y,L);F&&N||(this._active&&S.suppressClick(),this.reset())}},Yr.prototype.touchcancel=function(){this.reset()},Yr.prototype.enable=function(p){this._enabled=!0,this._aroundCenter=!!p&&p.around==="center"},Yr.prototype.disable=function(){this._enabled=!1,this.reset()},Yr.prototype.isEnabled=function(){return this._enabled},Yr.prototype.isActive=function(){return this._active};var Xo=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.reset=function(){p.prototype.reset.call(this),delete this._distance,delete this._startDistance},y.prototype._start=function(g){this._startDistance=this._distance=g[0].dist(g[1])},y.prototype._move=function(g,w){var L=this._distance;if(this._distance=g[0].dist(g[1]),this._active||!(Math.abs(_l(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_l(this._distance,L),pinchAround:w}},y}(Yr);function Ya(p,y){return 180*p.angleWith(y)/Math.PI}var kc=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.reset=function(){p.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},y.prototype._start=function(g){this._startVector=this._vector=g[0].sub(g[1]),this._minDiameter=g[0].dist(g[1])},y.prototype._move=function(g,w){var L=this._vector;if(this._vector=g[0].sub(g[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ya(this._vector,L),pinchAround:w}},y.prototype._isBelowThreshold=function(g){this._minDiameter=Math.min(this._minDiameter,g.mag());var w=25/(Math.PI*this._minDiameter)*360,L=Ya(g,this._startVector);return Math.abs(L)<w},y}(Yr);function Nl(p){return Math.abs(p.y)>Math.abs(p.x)}var Mc=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.reset=function(){p.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},y.prototype._start=function(g){this._lastPoints=g,Nl(g[0].sub(g[1]))&&(this._valid=!1)},y.prototype._move=function(g,w,L){var F=g[0].sub(this._lastPoints[0]),N=g[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(F,N,L.timeStamp),this._valid)return this._lastPoints=g,this._active=!0,{pitchDelta:(F.y+N.y)/2*-.5}},y.prototype.gestureBeginsVertically=function(g,w,L){if(this._valid!==void 0)return this._valid;var F=g.mag()>=2,N=w.mag()>=2;if(F||N){if(!F||!N)return this._firstMove===void 0&&(this._firstMove=L),L-this._firstMove<100&&void 0;var H=g.y>0==w.y>0;return Nl(g)&&Nl(w)&&H}},y}(Yr),qa={panStep:100,bearingStep:15,pitchStep:10},ya=function(){var p=qa;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1};function Di(p){return p*(2-p)}ya.prototype.blur=function(){this.reset()},ya.prototype.reset=function(){this._active=!1},ya.prototype.keydown=function(p){var y=this;if(!(p.altKey||p.ctrlKey||p.metaKey)){var g=0,w=0,L=0,F=0,N=0;switch(p.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:p.shiftKey?w=-1:(p.preventDefault(),F=-1);break;case 39:p.shiftKey?w=1:(p.preventDefault(),F=1);break;case 38:p.shiftKey?L=1:(p.preventDefault(),N=-1);break;case 40:p.shiftKey?L=-1:(p.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(w=0,L=0),{cameraAnimation:function(H){var Q=H.getZoom();H.easeTo({duration:300,easeId:"keyboardHandler",easing:Di,zoom:g?Math.round(Q)+g*(p.shiftKey?2:1):Q,bearing:H.getBearing()+w*y._bearingStep,pitch:H.getPitch()+L*y._pitchStep,offset:[-F*y._panStep,-N*y._panStep],center:H.getCenter()},{originalEvent:p})}}}},ya.prototype.enable=function(){this._enabled=!0},ya.prototype.disable=function(){this._enabled=!1,this.reset()},ya.prototype.isEnabled=function(){return this._enabled},ya.prototype.isActive=function(){return this._active},ya.prototype.disableRotation=function(){this._rotationDisabled=!0},ya.prototype.enableRotation=function(){this._rotationDisabled=!1};var ci=function(p,y){this._map=p,this._el=p.getCanvasContainer(),this._handler=y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,c.bindAll(["_onTimeout"],this)};ci.prototype.setZoomRate=function(p){this._defaultZoomRate=p},ci.prototype.setWheelZoomRate=function(p){this._wheelZoomRate=p},ci.prototype.isEnabled=function(){return!!this._enabled},ci.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ci.prototype.isZooming=function(){return!!this._zooming},ci.prototype.enable=function(p){this.isEnabled()||(this._enabled=!0,this._aroundCenter=p&&p.around==="center")},ci.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ci.prototype.wheel=function(p){if(this.isEnabled()){var y=p.deltaMode===c.window.WheelEvent.DOM_DELTA_LINE?40*p.deltaY:p.deltaY,g=c.browser.now(),w=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,y!==0&&y%4.000244140625==0?this._type="wheel":y!==0&&Math.abs(y)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=y,this._timeout=setTimeout(this._onTimeout,40,p)):this._type||(this._type=Math.abs(w*y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,y+=this._lastValue)),p.shiftKey&&y&&(y/=4),this._type&&(this._lastWheelEvent=p,this._delta-=y,this._active||this._start(p)),p.preventDefault()}},ci.prototype._onTimeout=function(p){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},ci.prototype._start=function(p){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var y=S.mousePos(this._el,p);this._around=c.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ci.prototype.renderFrame=function(){var p=this;if(this._frameId&&(this._frameId=null,this.isActive())){var y=this._map.transform;if(this._delta!==0){var g=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,w=2/(1+Math.exp(-Math.abs(this._delta*g)));this._delta<0&&w!==0&&(w=1/w);var L=typeof this._targetZoom=="number"?y.zoomScale(this._targetZoom):y.scale;this._targetZoom=Math.min(y.maxZoom,Math.max(y.minZoom,y.scaleZoom(L*w))),this._type==="wheel"&&(this._startZoom=y.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var F,N=typeof this._targetZoom=="number"?this._targetZoom:y.zoom,H=this._startZoom,Q=this._easing,oe=!1;if(this._type==="wheel"&&H&&Q){var ye=Math.min((c.browser.now()-this._lastWheelEventTime)/200,1),be=Q(ye);F=c.number(H,N,be),ye<1?this._frameId||(this._frameId=!0):oe=!0}else F=N,oe=!0;return this._active=!0,oe&&(this._active=!1,this._finishTimeout=setTimeout(function(){p._zooming=!1,p._handler._triggerRenderFrame(),delete p._targetZoom,delete p._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!oe,zoomDelta:F-y.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ci.prototype._smoothOutEasing=function(p){var y=c.ease;if(this._prevEase){var g=this._prevEase,w=(c.browser.now()-g.start)/g.duration,L=g.easing(w+.01)-g.easing(w),F=.27/Math.sqrt(L*L+1e-4)*.01,N=Math.sqrt(.0729-F*F);y=c.bezier(F,N,.25,1)}return this._prevEase={start:c.browser.now(),duration:p,easing:y},y},ci.prototype.blur=function(){this.reset()},ci.prototype.reset=function(){this._active=!1};var _a=function(p,y){this._clickZoom=p,this._tapZoom=y};_a.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},_a.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},_a.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},_a.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ia=function(){this.reset()};ia.prototype.reset=function(){this._active=!1},ia.prototype.blur=function(){this.reset()},ia.prototype.dblclick=function(p,y){return p.preventDefault(),{cameraAnimation:function(g){g.easeTo({duration:300,zoom:g.getZoom()+(p.shiftKey?-1:1),around:g.unproject(y)},{originalEvent:p})}}},ia.prototype.enable=function(){this._enabled=!0},ia.prototype.disable=function(){this._enabled=!1,this.reset()},ia.prototype.isEnabled=function(){return this._enabled},ia.prototype.isActive=function(){return this._active};var To=function(){this._tap=new Ra({numTouches:1,numTaps:1}),this.reset()};To.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},To.prototype.touchstart=function(p,y,g){this._swipePoint||(this._tapTime&&p.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=y[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(p,y,g))},To.prototype.touchmove=function(p,y,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;var w=y[0],L=w.y-this._swipePoint.y;return this._swipePoint=w,p.preventDefault(),this._active=!0,{zoomDelta:L/128}}}else this._tap.touchmove(p,y,g)},To.prototype.touchend=function(p,y,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(p,y,g)&&(this._tapTime=p.timeStamp)},To.prototype.touchcancel=function(){this.reset()},To.prototype.enable=function(){this._enabled=!0},To.prototype.disable=function(){this._enabled=!1,this.reset()},To.prototype.isEnabled=function(){return this._enabled},To.prototype.isActive=function(){return this._active};var Qr=function(p,y,g){this._el=p,this._mousePan=y,this._touchPan=g};Qr.prototype.enable=function(p){this._inertiaOptions=p||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Qr.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Qr.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Qr.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var va=function(p,y,g){this._pitchWithRotate=p.pitchWithRotate,this._mouseRotate=y,this._mousePitch=g};va.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},va.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},va.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},va.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var to=function(p,y,g,w){this._el=p,this._touchZoom=y,this._touchRotate=g,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0};to.prototype.enable=function(p){this._touchZoom.enable(p),this._rotationDisabled||this._touchRotate.enable(p),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},to.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},to.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},to.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},to.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},to.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var na=function(p){return p.zoom||p.drag||p.pitch||p.rotate},zs=function(p){function y(){p.apply(this,arguments)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y}(c.Event);function gi(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}var fi=function(p,y){this._map=p,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yl(p),this._bearingSnap=y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(y),c.bindAll(["handleEvent","handleWindowEvent"],this);var g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[c.window.document,"mousemove",{capture:!0}],[c.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[c.window,"blur",void 0]];for(var w=0,L=this._listeners;w<L.length;w+=1){var F=L[w],N=F[0];S.addEventListener(N,F[1],N===c.window.document?this.handleWindowEvent:this.handleEvent,F[2])}};fi.prototype.destroy=function(){for(var p=0,y=this._listeners;p<y.length;p+=1){var g=y[p],w=g[0];S.removeEventListener(w,g[1],w===c.window.document?this.handleWindowEvent:this.handleEvent,g[2])}},fi.prototype._addDefaultHandlers=function(p){var y=this._map,g=y.getCanvasContainer();this._add("mapEvent",new po(y,p));var w=y.boxZoom=new Wo(y,p);this._add("boxZoom",w);var L=new Hr,F=new ia;y.doubleClickZoom=new _a(F,L),this._add("tapZoom",L),this._add("clickZoom",F);var N=new To;this._add("tapDragZoom",N);var H=y.touchPitch=new Mc;this._add("touchPitch",H);var Q=new Ps(p),oe=new bu(p);y.dragRotate=new va(p,Q,oe),this._add("mouseRotate",Q,["mousePitch"]),this._add("mousePitch",oe,["mouseRotate"]);var ye=new vu(p),be=new ua(p);y.dragPan=new Qr(g,ye,be),this._add("mousePan",ye),this._add("touchPan",be,["touchZoom","touchRotate"]);var Ee=new kc,Be=new Xo;y.touchZoomRotate=new to(g,Be,Ee,N),this._add("touchRotate",Ee,["touchPan","touchZoom"]),this._add("touchZoom",Be,["touchPan","touchRotate"]);var Re=y.scrollZoom=new ci(y,this);this._add("scrollZoom",Re,["mousePan"]);var We=y.keyboard=new ya;this._add("keyboard",We),this._add("blockableMapEvent",new Pi(y));for(var Ce=0,Ve=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ce<Ve.length;Ce+=1){var et=Ve[Ce];p.interactive&&p[et]&&y[et].enable(p[et])}},fi.prototype._add=function(p,y,g){this._handlers.push({handlerName:p,handler:y,allowed:g}),this._handlersById[p]=y},fi.prototype.stop=function(p){if(!this._updatingCamera){for(var y=0,g=this._handlers;y<g.length;y+=1)g[y].handler.reset();this._inertia.clear(),this._fireEvents({},{},p),this._changes=[]}},fi.prototype.isActive=function(){for(var p=0,y=this._handlers;p<y.length;p+=1)if(y[p].handler.isActive())return!0;return!1},fi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},fi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},fi.prototype.isMoving=function(){return Boolean(na(this._eventsInProgress))||this.isZooming()},fi.prototype._blockedByActive=function(p,y,g){for(var w in p)if(w!==g&&(!y||y.indexOf(w)<0))return!0;return!1},fi.prototype.handleWindowEvent=function(p){this.handleEvent(p,p.type+"Window")},fi.prototype._getMapTouches=function(p){for(var y=[],g=0,w=p;g<w.length;g+=1){var L=w[g];this._el.contains(L.target)&&y.push(L)}return y},fi.prototype.handleEvent=function(p,y){this._updatingCamera=!0;for(var g=p.type==="renderFrame"?void 0:p,w={needsRenderFrame:!1},L={},F={},N=p.touches?this._getMapTouches(p.touches):void 0,H=N?S.touchPos(this._el,N):S.mousePos(this._el,p),Q=0,oe=this._handlers;Q<oe.length;Q+=1){var ye=oe[Q],be=ye.handlerName,Ee=ye.handler,Be=ye.allowed;if(Ee.isEnabled()){var Re=void 0;this._blockedByActive(F,Be,be)?Ee.reset():Ee[y||p.type]&&(Re=Ee[y||p.type](p,H,N),this.mergeHandlerResult(w,L,Re,be,g),Re&&Re.needsRenderFrame&&this._triggerRenderFrame()),(Re||Ee.isActive())&&(F[be]=Ee)}}var We={};for(var Ce in this._previousActiveHandlers)F[Ce]||(We[Ce]=g);this._previousActiveHandlers=F,(Object.keys(We).length||gi(w))&&(this._changes.push([w,L,We]),this._triggerRenderFrame()),(Object.keys(F).length||gi(w))&&this._map._stop(!0),this._updatingCamera=!1;var Ve=w.cameraAnimation;Ve&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ve(this._map))},fi.prototype.mergeHandlerResult=function(p,y,g,w,L){if(g){c.extend(p,g);var F={handlerName:w,originalEvent:g.originalEvent||L};g.zoomDelta!==void 0&&(y.zoom=F),g.panDelta!==void 0&&(y.drag=F),g.pitchDelta!==void 0&&(y.pitch=F),g.bearingDelta!==void 0&&(y.rotate=F)}},fi.prototype._applyChanges=function(){for(var p={},y={},g={},w=0,L=this._changes;w<L.length;w+=1){var F=L[w],N=F[0],H=F[1],Q=F[2];N.panDelta&&(p.panDelta=(p.panDelta||new c.Point(0,0))._add(N.panDelta)),N.zoomDelta&&(p.zoomDelta=(p.zoomDelta||0)+N.zoomDelta),N.bearingDelta&&(p.bearingDelta=(p.bearingDelta||0)+N.bearingDelta),N.pitchDelta&&(p.pitchDelta=(p.pitchDelta||0)+N.pitchDelta),N.around!==void 0&&(p.around=N.around),N.pinchAround!==void 0&&(p.pinchAround=N.pinchAround),N.noInertia&&(p.noInertia=N.noInertia),c.extend(y,H),c.extend(g,Q)}this._updateMapTransform(p,y,g),this._changes=[]},fi.prototype._updateMapTransform=function(p,y,g){var w=this._map,L=w.transform;if(!gi(p))return this._fireEvents(y,g,!0);var F=p.panDelta,N=p.zoomDelta,H=p.bearingDelta,Q=p.pitchDelta,oe=p.around,ye=p.pinchAround;ye!==void 0&&(oe=ye),w._stop(!0),oe=oe||w.transform.centerPoint;var be=L.pointLocation(F?oe.sub(F):oe);H&&(L.bearing+=H),Q&&(L.pitch+=Q),N&&(L.zoom+=N),L.setLocationAtPoint(be,oe),this._map._update(),p.noInertia||this._inertia.record(p),this._fireEvents(y,g,!0)},fi.prototype._fireEvents=function(p,y,g){var w=this,L=na(this._eventsInProgress),F=na(p),N={};for(var H in p)this._eventsInProgress[H]||(N[H+"start"]=p[H].originalEvent),this._eventsInProgress[H]=p[H];for(var Q in!L&&F&&this._fireEvent("movestart",F.originalEvent),N)this._fireEvent(Q,N[Q]);for(var oe in F&&this._fireEvent("move",F.originalEvent),p)this._fireEvent(oe,p[oe].originalEvent);var ye,be={};for(var Ee in this._eventsInProgress){var Be=this._eventsInProgress[Ee],Re=Be.handlerName,We=Be.originalEvent;this._handlersById[Re].isActive()||(delete this._eventsInProgress[Ee],be[Ee+"end"]=ye=y[Re]||We)}for(var Ce in be)this._fireEvent(Ce,be[Ce]);var Ve=na(this._eventsInProgress);if(g&&(L||F)&&!Ve){this._updatingCamera=!0;var et=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),dt=function(xt){return xt!==0&&-w._bearingSnap<xt&&xt<w._bearingSnap};et?(dt(et.bearing||this._map.getBearing())&&(et.bearing=0),this._map.easeTo(et,{originalEvent:ye})):(this._map.fire(new c.Event("moveend",{originalEvent:ye})),dt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},fi.prototype._fireEvent=function(p,y){this._map.fire(new c.Event(p,y?{originalEvent:y}:{}))},fi.prototype._requestFrame=function(){var p=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(y){delete p._frameId,p.handleEvent(new zs("renderFrame",{timeStamp:y})),p._applyChanges()})},fi.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var xu=function(p){function y(g,w){p.call(this),this._moving=!1,this._zooming=!1,this.transform=g,this._bearingSnap=w.bearingSnap,c.bindAll(["_renderFrameCallback"],this)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.getCenter=function(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)},y.prototype.setCenter=function(g,w){return this.jumpTo({center:g},w)},y.prototype.panBy=function(g,w,L){return g=c.Point.convert(g).mult(-1),this.panTo(this.transform.center,c.extend({offset:g},w),L)},y.prototype.panTo=function(g,w,L){return this.easeTo(c.extend({center:g},w),L)},y.prototype.getZoom=function(){return this.transform.zoom},y.prototype.setZoom=function(g,w){return this.jumpTo({zoom:g},w),this},y.prototype.zoomTo=function(g,w,L){return this.easeTo(c.extend({zoom:g},w),L)},y.prototype.zoomIn=function(g,w){return this.zoomTo(this.getZoom()+1,g,w),this},y.prototype.zoomOut=function(g,w){return this.zoomTo(this.getZoom()-1,g,w),this},y.prototype.getBearing=function(){return this.transform.bearing},y.prototype.setBearing=function(g,w){return this.jumpTo({bearing:g},w),this},y.prototype.getPadding=function(){return this.transform.padding},y.prototype.setPadding=function(g,w){return this.jumpTo({padding:g},w),this},y.prototype.rotateTo=function(g,w,L){return this.easeTo(c.extend({bearing:g},w),L)},y.prototype.resetNorth=function(g,w){return this.rotateTo(0,c.extend({duration:1e3},g),w),this},y.prototype.resetNorthPitch=function(g,w){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},g),w),this},y.prototype.snapToNorth=function(g,w){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(g,w):this},y.prototype.getPitch=function(){return this.transform.pitch},y.prototype.setPitch=function(g,w){return this.jumpTo({pitch:g},w),this},y.prototype.cameraForBounds=function(g,w){g=c.LngLatBounds.convert(g);var L=w&&w.bearing||0;return this._cameraForBoxAndBearing(g.getNorthWest(),g.getSouthEast(),L,w)},y.prototype._cameraForBoxAndBearing=function(g,w,L,F){var N={top:0,bottom:0,right:0,left:0};if(typeof(F=c.extend({padding:N,offset:[0,0],maxZoom:this.transform.maxZoom},F)).padding=="number"){var H=F.padding;F.padding={top:H,bottom:H,right:H,left:H}}F.padding=c.extend(N,F.padding);var Q=this.transform,oe=Q.padding,ye=Q.project(c.LngLat.convert(g)),be=Q.project(c.LngLat.convert(w)),Ee=ye.rotate(-L*Math.PI/180),Be=be.rotate(-L*Math.PI/180),Re=new c.Point(Math.max(Ee.x,Be.x),Math.max(Ee.y,Be.y)),We=new c.Point(Math.min(Ee.x,Be.x),Math.min(Ee.y,Be.y)),Ce=Re.sub(We),Ve=(Q.width-(oe.left+oe.right+F.padding.left+F.padding.right))/Ce.x,et=(Q.height-(oe.top+oe.bottom+F.padding.top+F.padding.bottom))/Ce.y;if(!(et<0||Ve<0)){var dt=Math.min(Q.scaleZoom(Q.scale*Math.min(Ve,et)),F.maxZoom),xt=typeof F.offset.x=="number"?new c.Point(F.offset.x,F.offset.y):c.Point.convert(F.offset),Tt=new c.Point((F.padding.left-F.padding.right)/2,(F.padding.top-F.padding.bottom)/2).rotate(L*Math.PI/180),kt=xt.add(Tt).mult(Q.scale/Q.zoomScale(dt));return{center:Q.unproject(ye.add(be).div(2).sub(kt)),zoom:dt,bearing:L}}c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},y.prototype.fitBounds=function(g,w,L){return this._fitInternal(this.cameraForBounds(g,w),w,L)},y.prototype.fitScreenCoordinates=function(g,w,L,F,N){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.Point.convert(g)),this.transform.pointLocation(c.Point.convert(w)),L,F),F,N)},y.prototype._fitInternal=function(g,w,L){return g?(delete(w=c.extend(g,w)).padding,w.linear?this.easeTo(w,L):this.flyTo(w,L)):this},y.prototype.jumpTo=function(g,w){this.stop();var L=this.transform,F=!1,N=!1,H=!1;return"zoom"in g&&L.zoom!==+g.zoom&&(F=!0,L.zoom=+g.zoom),g.center!==void 0&&(L.center=c.LngLat.convert(g.center)),"bearing"in g&&L.bearing!==+g.bearing&&(N=!0,L.bearing=+g.bearing),"pitch"in g&&L.pitch!==+g.pitch&&(H=!0,L.pitch=+g.pitch),g.padding==null||L.isPaddingEqual(g.padding)||(L.padding=g.padding),this.fire(new c.Event("movestart",w)).fire(new c.Event("move",w)),F&&this.fire(new c.Event("zoomstart",w)).fire(new c.Event("zoom",w)).fire(new c.Event("zoomend",w)),N&&this.fire(new c.Event("rotatestart",w)).fire(new c.Event("rotate",w)).fire(new c.Event("rotateend",w)),H&&this.fire(new c.Event("pitchstart",w)).fire(new c.Event("pitch",w)).fire(new c.Event("pitchend",w)),this.fire(new c.Event("moveend",w))},y.prototype.easeTo=function(g,w){var L=this;this._stop(!1,g.easeId),((g=c.extend({offset:[0,0],duration:500,easing:c.ease},g)).animate===!1||!g.essential&&c.browser.prefersReducedMotion)&&(g.duration=0);var F=this.transform,N=this.getZoom(),H=this.getBearing(),Q=this.getPitch(),oe=this.getPadding(),ye="zoom"in g?+g.zoom:N,be="bearing"in g?this._normalizeBearing(g.bearing,H):H,Ee="pitch"in g?+g.pitch:Q,Be="padding"in g?g.padding:F.padding,Re=c.Point.convert(g.offset),We=F.centerPoint.add(Re),Ce=F.pointLocation(We),Ve=c.LngLat.convert(g.center||Ce);this._normalizeCenter(Ve);var et,dt,xt=F.project(Ce),Tt=F.project(Ve).sub(xt),kt=F.zoomScale(ye-N);g.around&&(et=c.LngLat.convert(g.around),dt=F.locationPoint(et));var Ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ye!==N,this._rotating=this._rotating||H!==be,this._pitching=this._pitching||Ee!==Q,this._padding=!F.isPaddingEqual(Be),this._easeId=g.easeId,this._prepareEase(w,g.noMoveStart,Ht),this._ease(function(oi){if(L._zooming&&(F.zoom=c.number(N,ye,oi)),L._rotating&&(F.bearing=c.number(H,be,oi)),L._pitching&&(F.pitch=c.number(Q,Ee,oi)),L._padding&&(F.interpolatePadding(oe,Be,oi),We=F.centerPoint.add(Re)),et)F.setLocationAtPoint(et,dt);else{var ri=F.zoomScale(F.zoom-N),Ti=ye>N?Math.min(2,kt):Math.max(.5,kt),Hi=Math.pow(Ti,1-oi),Qi=F.unproject(xt.add(Tt.mult(oi*Hi)).mult(ri));F.setLocationAtPoint(F.renderWorldCopies?Qi.wrap():Qi,We)}L._fireMoveEvents(w)},function(oi){L._afterEase(w,oi)},g),this},y.prototype._prepareEase=function(g,w,L){L===void 0&&(L={}),this._moving=!0,w||L.moving||this.fire(new c.Event("movestart",g)),this._zooming&&!L.zooming&&this.fire(new c.Event("zoomstart",g)),this._rotating&&!L.rotating&&this.fire(new c.Event("rotatestart",g)),this._pitching&&!L.pitching&&this.fire(new c.Event("pitchstart",g))},y.prototype._fireMoveEvents=function(g){this.fire(new c.Event("move",g)),this._zooming&&this.fire(new c.Event("zoom",g)),this._rotating&&this.fire(new c.Event("rotate",g)),this._pitching&&this.fire(new c.Event("pitch",g))},y.prototype._afterEase=function(g,w){if(!this._easeId||!w||this._easeId!==w){delete this._easeId;var L=this._zooming,F=this._rotating,N=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,L&&this.fire(new c.Event("zoomend",g)),F&&this.fire(new c.Event("rotateend",g)),N&&this.fire(new c.Event("pitchend",g)),this.fire(new c.Event("moveend",g))}},y.prototype.flyTo=function(g,w){var L=this;if(!g.essential&&c.browser.prefersReducedMotion){var F=c.pick(g,["center","zoom","bearing","pitch","around"]);return this.jumpTo(F,w)}this.stop(),g=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},g);var N=this.transform,H=this.getZoom(),Q=this.getBearing(),oe=this.getPitch(),ye=this.getPadding(),be="zoom"in g?c.clamp(+g.zoom,N.minZoom,N.maxZoom):H,Ee="bearing"in g?this._normalizeBearing(g.bearing,Q):Q,Be="pitch"in g?+g.pitch:oe,Re="padding"in g?g.padding:N.padding,We=N.zoomScale(be-H),Ce=c.Point.convert(g.offset),Ve=N.centerPoint.add(Ce),et=N.pointLocation(Ve),dt=c.LngLat.convert(g.center||et);this._normalizeCenter(dt);var xt=N.project(et),Tt=N.project(dt).sub(xt),kt=g.curve,Ht=Math.max(N.width,N.height),oi=Ht/We,ri=Tt.mag();if("minZoom"in g){var Ti=c.clamp(Math.min(g.minZoom,H,be),N.minZoom,N.maxZoom),Hi=Ht/N.zoomScale(Ti-H);kt=Math.sqrt(Hi/ri*2)}var Qi=kt*kt;function Gi(tn){var Yi=(oi*oi-Ht*Ht+(tn?-1:1)*Qi*Qi*ri*ri)/(2*(tn?oi:Ht)*Qi*ri);return Math.log(Math.sqrt(Yi*Yi+1)-Yi)}function Xn(tn){return(Math.exp(tn)-Math.exp(-tn))/2}function Li(tn){return(Math.exp(tn)+Math.exp(-tn))/2}var pn=Gi(0),Fn=function(tn){return Li(pn)/Li(pn+kt*tn)},cn=function(tn){return Ht*((Li(pn)*(Xn(Yi=pn+kt*tn)/Li(Yi))-Xn(pn))/Qi)/ri;var Yi},an=(Gi(1)-pn)/kt;if(Math.abs(ri)<1e-6||!isFinite(an)){if(Math.abs(Ht-oi)<1e-6)return this.easeTo(g,w);var wn=oi<Ht?-1:1;an=Math.abs(Math.log(oi/Ht))/kt,cn=function(){return 0},Fn=function(tn){return Math.exp(wn*kt*tn)}}return g.duration="duration"in g?+g.duration:1e3*an/("screenSpeed"in g?+g.screenSpeed/kt:+g.speed),g.maxDuration&&g.duration>g.maxDuration&&(g.duration=0),this._zooming=!0,this._rotating=Q!==Ee,this._pitching=Be!==oe,this._padding=!N.isPaddingEqual(Re),this._prepareEase(w,!1),this._ease(function(tn){var Yi=tn*an,$r=1/Fn(Yi);N.zoom=tn===1?be:H+N.scaleZoom($r),L._rotating&&(N.bearing=c.number(Q,Ee,tn)),L._pitching&&(N.pitch=c.number(oe,Be,tn)),L._padding&&(N.interpolatePadding(ye,Re,tn),Ve=N.centerPoint.add(Ce));var uo=tn===1?dt:N.unproject(xt.add(Tt.mult(cn(Yi))).mult($r));N.setLocationAtPoint(N.renderWorldCopies?uo.wrap():uo,Ve),L._fireMoveEvents(w)},function(){return L._afterEase(w)},g),this},y.prototype.isEasing=function(){return!!this._easeFrameId},y.prototype.stop=function(){return this._stop()},y.prototype._stop=function(g,w){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var L=this._onEaseEnd;delete this._onEaseEnd,L.call(this,w)}if(!g){var F=this.handlers;F&&F.stop(!1)}return this},y.prototype._ease=function(g,w,L){L.animate===!1||L.duration===0?(g(1),w()):(this._easeStart=c.browser.now(),this._easeOptions=L,this._onEaseFrame=g,this._onEaseEnd=w,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},y.prototype._renderFrameCallback=function(){var g=Math.min((c.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},y.prototype._normalizeBearing=function(g,w){g=c.wrap(g,-180,180);var L=Math.abs(g-w);return Math.abs(g-360-w)<L&&(g-=360),Math.abs(g+360-w)<L&&(g+=360),g},y.prototype._normalizeCenter=function(g){var w=this.transform;if(w.renderWorldCopies&&!w.lngRange){var L=g.lng-w.center.lng;g.lng+=L>180?-360:L<-180?360:0}},y}(c.Evented),xo=function(p){p===void 0&&(p={}),this.options=p,c.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};xo.prototype.getDefaultPosition=function(){return"bottom-right"},xo.prototype.onAdd=function(p){var y=this.options&&this.options.compact;return this._map=p,this._container=S.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=S.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=S.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),y&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),y===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},xo.prototype.onRemove=function(){S.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},xo.prototype._setElementTitle=function(p,y){var g=this._map._getUIString("AttributionControl."+y);p.title=g,p.setAttribute("aria-label",g)},xo.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},xo.prototype._updateEditLink=function(){var p=this._editLink;p||(p=this._editLink=this._container.querySelector(".mapbox-improve-map"));var y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||c.config.ACCESS_TOKEN}];if(p){var g=y.reduce(function(w,L,F){return L.value&&(w+=L.key+"="+L.value+(F<y.length-1?"&":"")),w},"?");p.href=c.config.FEEDBACK_URL+"/"+g+(this._map._hash?this._map._hash.getHashString(!0):""),p.rel="noopener nofollow",this._setElementTitle(p,"MapFeedback")}},xo.prototype._updateData=function(p){!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},xo.prototype._updateAttributions=function(){if(this._map.style){var p=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?p=p.concat(this.options.customAttribution.map(function(H){return typeof H!="string"?"":H})):typeof this.options.customAttribution=="string"&&p.push(this.options.customAttribution)),this._map.style.stylesheet){var y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}var g=this._map.style.sourceCaches;for(var w in g){var L=g[w];if(L.used){var F=L.getSource();F.attribution&&p.indexOf(F.attribution)<0&&p.push(F.attribution)}}p.sort(function(H,Q){return H.length-Q.length});var N=(p=p.filter(function(H,Q){for(var oe=Q+1;oe<p.length;oe++)if(p[oe].indexOf(H)>=0)return!1;return!0})).join(" | ");N!==this._attribHTML&&(this._attribHTML=N,p.length?(this._innerContainer.innerHTML=N,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},xo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ca=function(){c.bindAll(["_updateLogo"],this),c.bindAll(["_updateCompact"],this)};ca.prototype.onAdd=function(p){this._map=p,this._container=S.create("div","mapboxgl-ctrl");var y=S.create("a","mapboxgl-ctrl-logo");return y.target="_blank",y.rel="noopener nofollow",y.href="https://www.mapbox.com/",y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),y.setAttribute("rel","noopener nofollow"),this._container.appendChild(y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ca.prototype.onRemove=function(){S.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ca.prototype.getDefaultPosition=function(){return"bottom-left"},ca.prototype._updateLogo=function(p){p&&p.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ca.prototype._logoRequired=function(){if(this._map.style){var p=this._map.style.sourceCaches;for(var y in p)if(p[y].getSource().mapbox_logo)return!0;return!1}},ca.prototype._updateCompact=function(){var p=this._container.children;if(p.length){var y=p[0];this._map.getCanvasContainer().offsetWidth<250?y.classList.add("mapboxgl-compact"):y.classList.remove("mapboxgl-compact")}};var C=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};C.prototype.add=function(p){var y=++this._id;return this._queue.push({callback:p,id:y,cancelled:!1}),y},C.prototype.remove=function(p){for(var y=this._currentlyRunning,g=0,w=y?this._queue.concat(y):this._queue;g<w.length;g+=1){var L=w[g];if(L.id===p)return void(L.cancelled=!0)}},C.prototype.run=function(p){p===void 0&&(p=0);var y=this._currentlyRunning=this._queue;this._queue=[];for(var g=0,w=y;g<w.length;g+=1){var L=w[g];if(!L.cancelled&&(L.callback(p),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},C.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var l={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},_=c.window.HTMLImageElement,A=c.window.HTMLElement,k=c.window.ImageBitmap,B={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},j=function(p){function y(w){var L=this;if((w=c.extend({},B,w)).minZoom!=null&&w.maxZoom!=null&&w.minZoom>w.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(w.minPitch!=null&&w.maxPitch!=null&&w.minPitch>w.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(w.minPitch!=null&&w.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(w.maxPitch!=null&&w.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var F=new Bn(w.minZoom,w.maxZoom,w.minPitch,w.maxPitch,w.renderWorldCopies);if(p.call(this,F,w),this._interactive=w.interactive,this._maxTileCacheSize=w.maxTileCacheSize,this._failIfMajorPerformanceCaveat=w.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=w.preserveDrawingBuffer,this._antialias=w.antialias,this._trackResize=w.trackResize,this._bearingSnap=w.bearingSnap,this._refreshExpiredTiles=w.refreshExpiredTiles,this._fadeDuration=w.fadeDuration,this._crossSourceCollisions=w.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=w.collectResourceTiming,this._renderTaskQueue=new C,this._controls=[],this._mapId=c.uniqueId(),this._locale=c.extend({},l,w.locale),this._clickTolerance=w.clickTolerance,this._requestManager=new c.RequestManager(w.transformRequest,w.accessToken),typeof w.container=="string"){if(this._container=c.window.document.getElementById(w.container),!this._container)throw new Error("Container '"+w.container+"' not found.")}else{if(!(w.container instanceof A))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=w.container}if(w.maxBounds&&this.setMaxBounds(w.maxBounds),c.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return L._update(!1)}),this.on("moveend",function(){return L._update(!1)}),this.on("zoom",function(){return L._update(!0)}),c.window!==void 0&&(c.window.addEventListener("online",this._onWindowOnline,!1),c.window.addEventListener("resize",this._onWindowResize,!1),c.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new fi(this,w),this._hash=w.hash&&new Si(typeof w.hash=="string"&&w.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),w.bounds&&(this.resize(),this.fitBounds(w.bounds,c.extend({},w.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=w.localIdeographFontFamily,w.style&&this.setStyle(w.style,{localIdeographFontFamily:w.localIdeographFontFamily}),w.attributionControl&&this.addControl(new xo({customAttribution:w.customAttribution})),this.addControl(new ca,w.logoPosition),this.on("style.load",function(){L.transform.unmodified&&L.jumpTo(L.style.stylesheet)}),this.on("data",function(N){L._update(N.dataType==="style"),L.fire(new c.Event(N.dataType+"data",N))}),this.on("dataloading",function(N){L.fire(new c.Event(N.dataType+"dataloading",N))})}p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y;var g={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return y.prototype._getMapId=function(){return this._mapId},y.prototype.addControl=function(w,L){if(L===void 0&&(L=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var F=w.onAdd(this);this._controls.push(w);var N=this._controlPositions[L];return L.indexOf("bottom")!==-1?N.insertBefore(F,N.firstChild):N.appendChild(F),this},y.prototype.removeControl=function(w){if(!w||!w.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var L=this._controls.indexOf(w);return L>-1&&this._controls.splice(L,1),w.onRemove(this),this},y.prototype.hasControl=function(w){return this._controls.indexOf(w)>-1},y.prototype.resize=function(w){var L=this._containerDimensions(),F=L[0],N=L[1];if(F===this.transform.width&&N===this.transform.height)return this;this._resizeCanvas(F,N),this.transform.resize(F,N),this.painter.resize(F,N);var H=!this._moving;return H&&this.fire(new c.Event("movestart",w)).fire(new c.Event("move",w)),this.fire(new c.Event("resize",w)),H&&this.fire(new c.Event("moveend",w)),this},y.prototype.getBounds=function(){return this.transform.getBounds()},y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},y.prototype.setMaxBounds=function(w){return this.transform.setMaxBounds(c.LngLatBounds.convert(w)),this._update()},y.prototype.setMinZoom=function(w){if((w=w==null?-2:w)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},y.prototype.getMinZoom=function(){return this.transform.minZoom},y.prototype.setMaxZoom=function(w){if((w=w==null?22:w)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")},y.prototype.getMaxZoom=function(){return this.transform.maxZoom},y.prototype.setMinPitch=function(w){if((w=w==null?0:w)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},y.prototype.getMinPitch=function(){return this.transform.minPitch},y.prototype.setMaxPitch=function(w){if((w=w==null?60:w)>60)throw new Error("maxPitch must be less than or equal to 60");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")},y.prototype.getMaxPitch=function(){return this.transform.maxPitch},y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},y.prototype.setRenderWorldCopies=function(w){return this.transform.renderWorldCopies=w,this._update()},y.prototype.project=function(w){return this.transform.locationPoint(c.LngLat.convert(w))},y.prototype.unproject=function(w){return this.transform.pointLocation(c.Point.convert(w))},y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},y.prototype._createDelegatedListener=function(w,L,F){var N,H=this;if(w==="mouseenter"||w==="mouseover"){var Q=!1;return{layer:L,listener:F,delegates:{mousemove:function(ye){var be=H.getLayer(L)?H.queryRenderedFeatures(ye.point,{layers:[L]}):[];be.length?Q||(Q=!0,F.call(H,new Jr(w,H,ye.originalEvent,{features:be}))):Q=!1},mouseout:function(){Q=!1}}}}if(w==="mouseleave"||w==="mouseout"){var oe=!1;return{layer:L,listener:F,delegates:{mousemove:function(ye){(H.getLayer(L)?H.queryRenderedFeatures(ye.point,{layers:[L]}):[]).length?oe=!0:oe&&(oe=!1,F.call(H,new Jr(w,H,ye.originalEvent)))},mouseout:function(ye){oe&&(oe=!1,F.call(H,new Jr(w,H,ye.originalEvent)))}}}}return{layer:L,listener:F,delegates:(N={},N[w]=function(ye){var be=H.getLayer(L)?H.queryRenderedFeatures(ye.point,{layers:[L]}):[];be.length&&(ye.features=be,F.call(H,ye),delete ye.features)},N)}},y.prototype.on=function(w,L,F){if(F===void 0)return p.prototype.on.call(this,w,L);var N=this._createDelegatedListener(w,L,F);for(var H in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(N),N.delegates)this.on(H,N.delegates[H]);return this},y.prototype.once=function(w,L,F){if(F===void 0)return p.prototype.once.call(this,w,L);var N=this._createDelegatedListener(w,L,F);for(var H in N.delegates)this.once(H,N.delegates[H]);return this},y.prototype.off=function(w,L,F){var N=this;return F===void 0?p.prototype.off.call(this,w,L):(this._delegatedListeners&&this._delegatedListeners[w]&&function(H){for(var Q=H[w],oe=0;oe<Q.length;oe++){var ye=Q[oe];if(ye.layer===L&&ye.listener===F){for(var be in ye.delegates)N.off(be,ye.delegates[be]);return Q.splice(oe,1),N}}}(this._delegatedListeners),this)},y.prototype.queryRenderedFeatures=function(w,L){if(!this.style)return[];var F;if(L!==void 0||w===void 0||w instanceof c.Point||Array.isArray(w)||(L=w,w=void 0),L=L||{},(w=w||[[0,0],[this.transform.width,this.transform.height]])instanceof c.Point||typeof w[0]=="number")F=[c.Point.convert(w)];else{var N=c.Point.convert(w[0]),H=c.Point.convert(w[1]);F=[N,new c.Point(H.x,N.y),H,new c.Point(N.x,H.y),N]}return this.style.queryRenderedFeatures(F,L,this.transform)},y.prototype.querySourceFeatures=function(w,L){return this.style.querySourceFeatures(w,L)},y.prototype.setStyle=function(w,L){return(L=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},L)).diff!==!1&&L.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,L),this):(this._localIdeographFontFamily=L.localIdeographFontFamily,this._updateStyle(w,L))},y.prototype._getUIString=function(w){var L=this._locale[w];if(L==null)throw new Error("Missing UI string '"+w+"'");return L},y.prototype._updateStyle=function(w,L){return this.style&&(this.style.setEventedParent(null),this.style._remove()),w?(this.style=new Uo(this,L||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w):this.style.loadJSON(w),this):(delete this.style,this)},y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Uo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},y.prototype._diffStyle=function(w,L){var F=this;if(typeof w=="string"){var N=this._requestManager.normalizeStyleURL(w),H=this._requestManager.transformRequest(N,c.ResourceType.Style);c.getJSON(H,function(Q,oe){Q?F.fire(new c.ErrorEvent(Q)):oe&&F._updateDiff(oe,L)})}else typeof w=="object"&&this._updateDiff(w,L)},y.prototype._updateDiff=function(w,L){try{this.style.setState(w)&&this._update(!0)}catch(F){c.warnOnce("Unable to perform style diff: "+(F.message||F.error||F)+".  Rebuilding the style from scratch."),this._updateStyle(w,L)}},y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():c.warnOnce("There is no style added to the map.")},y.prototype.addSource=function(w,L){return this._lazyInitEmptyStyle(),this.style.addSource(w,L),this._update(!0)},y.prototype.isSourceLoaded=function(w){var L=this.style&&this.style.sourceCaches[w];if(L!==void 0)return L.loaded();this.fire(new c.ErrorEvent(new Error("There is no source with ID '"+w+"'")))},y.prototype.areTilesLoaded=function(){var w=this.style&&this.style.sourceCaches;for(var L in w){var F=w[L]._tiles;for(var N in F){var H=F[N];if(H.state!=="loaded"&&H.state!=="errored")return!1}}return!0},y.prototype.addSourceType=function(w,L,F){return this._lazyInitEmptyStyle(),this.style.addSourceType(w,L,F)},y.prototype.removeSource=function(w){return this.style.removeSource(w),this._update(!0)},y.prototype.getSource=function(w){return this.style.getSource(w)},y.prototype.addImage=function(w,L,F){F===void 0&&(F={});var N=F.pixelRatio;N===void 0&&(N=1);var H=F.sdf;H===void 0&&(H=!1);var Q=F.stretchX,oe=F.stretchY,ye=F.content;if(this._lazyInitEmptyStyle(),L instanceof _||k&&L instanceof k){var be=c.browser.getImageData(L);this.style.addImage(w,{data:new c.RGBAImage({width:be.width,height:be.height},be.data),pixelRatio:N,stretchX:Q,stretchY:oe,content:ye,sdf:H,version:0})}else{if(L.width===void 0||L.height===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ee=L;this.style.addImage(w,{data:new c.RGBAImage({width:L.width,height:L.height},new Uint8Array(L.data)),pixelRatio:N,stretchX:Q,stretchY:oe,content:ye,sdf:H,version:0,userImage:Ee}),Ee.onAdd&&Ee.onAdd(this,w)}},y.prototype.updateImage=function(w,L){var F=this.style.getImage(w);if(!F)return this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var N=L instanceof _||k&&L instanceof k?c.browser.getImageData(L):L,H=N.width,Q=N.height,oe=N.data;return H===void 0||Q===void 0?this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):H!==F.data.width||Q!==F.data.height?this.fire(new c.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(F.data.replace(oe,!(L instanceof _||k&&L instanceof k)),void this.style.updateImage(w,F))},y.prototype.hasImage=function(w){return w?!!this.style.getImage(w):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)},y.prototype.removeImage=function(w){this.style.removeImage(w)},y.prototype.loadImage=function(w,L){c.getImage(this._requestManager.transformRequest(w,c.ResourceType.Image),L)},y.prototype.listImages=function(){return this.style.listImages()},y.prototype.addLayer=function(w,L){return this._lazyInitEmptyStyle(),this.style.addLayer(w,L),this._update(!0)},y.prototype.moveLayer=function(w,L){return this.style.moveLayer(w,L),this._update(!0)},y.prototype.removeLayer=function(w){return this.style.removeLayer(w),this._update(!0)},y.prototype.getLayer=function(w){return this.style.getLayer(w)},y.prototype.setLayerZoomRange=function(w,L,F){return this.style.setLayerZoomRange(w,L,F),this._update(!0)},y.prototype.setFilter=function(w,L,F){return F===void 0&&(F={}),this.style.setFilter(w,L,F),this._update(!0)},y.prototype.getFilter=function(w){return this.style.getFilter(w)},y.prototype.setPaintProperty=function(w,L,F,N){return N===void 0&&(N={}),this.style.setPaintProperty(w,L,F,N),this._update(!0)},y.prototype.getPaintProperty=function(w,L){return this.style.getPaintProperty(w,L)},y.prototype.setLayoutProperty=function(w,L,F,N){return N===void 0&&(N={}),this.style.setLayoutProperty(w,L,F,N),this._update(!0)},y.prototype.getLayoutProperty=function(w,L){return this.style.getLayoutProperty(w,L)},y.prototype.setLight=function(w,L){return L===void 0&&(L={}),this._lazyInitEmptyStyle(),this.style.setLight(w,L),this._update(!0)},y.prototype.getLight=function(){return this.style.getLight()},y.prototype.setFeatureState=function(w,L){return this.style.setFeatureState(w,L),this._update()},y.prototype.removeFeatureState=function(w,L){return this.style.removeFeatureState(w,L),this._update()},y.prototype.getFeatureState=function(w){return this.style.getFeatureState(w)},y.prototype.getContainer=function(){return this._container},y.prototype.getCanvasContainer=function(){return this._canvasContainer},y.prototype.getCanvas=function(){return this._canvas},y.prototype._containerDimensions=function(){var w=0,L=0;return this._container&&(w=this._container.clientWidth||400,L=this._container.clientHeight||300),[w,L]},y.prototype._detectMissingCSS=function(){c.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&c.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},y.prototype._setupContainer=function(){var w=this._container;w.classList.add("mapboxgl-map"),(this._missingCSSCanary=S.create("div","mapboxgl-canary",w)).style.visibility="hidden",this._detectMissingCSS();var L=this._canvasContainer=S.create("div","mapboxgl-canvas-container",w);this._interactive&&L.classList.add("mapboxgl-interactive"),this._canvas=S.create("canvas","mapboxgl-canvas",L),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var F=this._containerDimensions();this._resizeCanvas(F[0],F[1]);var N=this._controlContainer=S.create("div","mapboxgl-control-container",w),H=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Q){H[Q]=S.create("div","mapboxgl-ctrl-"+Q,N)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},y.prototype._resizeCanvas=function(w,L){var F=c.browser.devicePixelRatio||1;this._canvas.width=F*w,this._canvas.height=F*L,this._canvas.style.width=w+"px",this._canvas.style.height=L+"px"},y.prototype._setupPainter=function(){var w=c.extend({},h.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),L=this._canvas.getContext("webgl",w)||this._canvas.getContext("experimental-webgl",w);L?(this.painter=new Gr(L,this.transform),c.webpSupported.testSupport(L)):this.fire(new c.ErrorEvent(new Error("Failed to initialize WebGL")))},y.prototype._contextLost=function(w){w.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:w}))},y.prototype._contextRestored=function(w){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:w}))},y.prototype._onMapScroll=function(w){if(w.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},y.prototype._update=function(w){return this.style?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this},y.prototype._requestRenderFrame=function(w){return this._update(),this._renderTaskQueue.add(w)},y.prototype._cancelRenderFrame=function(w){this._renderTaskQueue.remove(w)},y.prototype._render=function(w){var L,F=this,N=0,H=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(L=H.createQueryEXT(),H.beginQueryEXT(H.TIME_ELAPSED_EXT,L),N=c.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),!this._removed){var Q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var oe=this.transform.zoom,ye=c.browser.now();this.style.zoomHistory.update(oe,ye);var be=new c.EvaluationParameters(oe,{now:ye,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ee=be.crossFadingFactor();Ee===1&&Ee===this._crossFadingFactor||(Q=!0,this._crossFadingFactor=Ee),this.style.update(be)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new c.Event("load"))),this.style&&(this.style.hasTransitions()||Q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Be=c.browser.now()-N;H.endQueryEXT(H.TIME_ELAPSED_EXT,L),setTimeout(function(){var Ce=H.getQueryObjectEXT(L,H.QUERY_RESULT_EXT)/1e6;H.deleteQueryEXT(L),F.fire(new c.Event("gpu-timing-frame",{cpuTime:Be,gpuTime:Ce}))},50)}if(this.listens("gpu-timing-layer")){var Re=this.painter.collectGpuTimers();setTimeout(function(){var Ce=F.painter.queryGpuTimers(Re);F.fire(new c.Event("gpu-timing-layer",{layerTimes:Ce}))},50)}var We=this._sourcesDirty||this._styleDirty||this._placementDirty;return We||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.Event("idle")),!this._loaded||this._fullyLoaded||We||(this._fullyLoaded=!0),this}},y.prototype.remove=function(){this._hash&&this._hash.remove();for(var w=0,L=this._controls;w<L.length;w+=1)L[w].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),c.window!==void 0&&(c.window.removeEventListener("resize",this._onWindowResize,!1),c.window.removeEventListener("orientationchange",this._onWindowResize,!1),c.window.removeEventListener("online",this._onWindowOnline,!1));var F=this.painter.context.gl.getExtension("WEBGL_lose_context");F&&F.loseContext(),Z(this._canvasContainer),Z(this._controlContainer),Z(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new c.Event("remove"))},y.prototype.triggerRepaint=function(){var w=this;this.style&&!this._frame&&(this._frame=c.browser.frame(function(L){w._frame=null,w._render(L)}))},y.prototype._onWindowOnline=function(){this._update()},y.prototype._onWindowResize=function(w){this._trackResize&&this.resize({originalEvent:w})._update()},g.showTileBoundaries.get=function(){return!!this._showTileBoundaries},g.showTileBoundaries.set=function(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())},g.showPadding.get=function(){return!!this._showPadding},g.showPadding.set=function(w){this._showPadding!==w&&(this._showPadding=w,this._update())},g.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},g.showCollisionBoxes.set=function(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())},g.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},g.showOverdrawInspector.set=function(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())},g.repaint.get=function(){return!!this._repaint},g.repaint.set=function(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())},g.vertices.get=function(){return!!this._vertices},g.vertices.set=function(w){this._vertices=w,this._update()},y.prototype._setCacheLimits=function(w,L){c.setCacheLimits(w,L)},g.version.get=function(){return c.version},Object.defineProperties(y.prototype,g),y}(xu);function Z(p){p.parentNode&&p.parentNode.removeChild(p)}var J={showCompass:!0,showZoom:!0,visualizePitch:!1},ie=function(p){var y=this;this.options=c.extend({},J,p),this._container=S.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(g){return g.preventDefault()}),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(g){return y._map.zoomIn({},{originalEvent:g})}),S.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(g){return y._map.zoomOut({},{originalEvent:g})}),S.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(g){y.options.visualizePitch?y._map.resetNorthPitch({},{originalEvent:g}):y._map.resetNorth({},{originalEvent:g})}),this._compassIcon=S.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ie.prototype._updateZoomButtons=function(){var p=this._map.getZoom(),y=p===this._map.getMaxZoom(),g=p===this._map.getMinZoom();this._zoomInButton.disabled=y,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",y.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},ie.prototype._rotateCompassArrow=function(){var p=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=p},ie.prototype.onAdd=function(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ae(this._map,this._compass,this.options.visualizePitch)),this._container},ie.prototype.onRemove=function(){S.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ie.prototype._createButton=function(p,y){var g=S.create("button",p,this._container);return g.type="button",g.addEventListener("click",y),g},ie.prototype._setButtonTitle=function(p,y){var g=this._map._getUIString("NavigationControl."+y);p.title=g,p.setAttribute("aria-label",g)};var ae=function(p,y,g){g===void 0&&(g=!1),this._clickTolerance=10,this.element=y,this.mouseRotate=new Ps({clickTolerance:p.dragRotate._mouseRotate._clickTolerance}),this.map=p,g&&(this.mousePitch=new bu({clickTolerance:p.dragRotate._mousePitch._clickTolerance})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),S.addEventListener(y,"mousedown",this.mousedown),S.addEventListener(y,"touchstart",this.touchstart,{passive:!1}),S.addEventListener(y,"touchmove",this.touchmove),S.addEventListener(y,"touchend",this.touchend),S.addEventListener(y,"touchcancel",this.reset)};function ge(p,y,g){if(p=new c.LngLat(p.lng,p.lat),y){var w=new c.LngLat(p.lng-360,p.lat),L=new c.LngLat(p.lng+360,p.lat),F=g.locationPoint(p).distSqr(y);g.locationPoint(w).distSqr(y)<F?p=w:g.locationPoint(L).distSqr(y)<F&&(p=L)}for(;Math.abs(p.lng-g.center.lng)>180;){var N=g.locationPoint(p);if(N.x>=0&&N.y>=0&&N.x<=g.width&&N.y<=g.height)break;p.lng>g.center.lng?p.lng-=360:p.lng+=360}return p}ae.prototype.down=function(p,y){this.mouseRotate.mousedown(p,y),this.mousePitch&&this.mousePitch.mousedown(p,y),S.disableDrag()},ae.prototype.move=function(p,y){var g=this.map,w=this.mouseRotate.mousemoveWindow(p,y);if(w&&w.bearingDelta&&g.setBearing(g.getBearing()+w.bearingDelta),this.mousePitch){var L=this.mousePitch.mousemoveWindow(p,y);L&&L.pitchDelta&&g.setPitch(g.getPitch()+L.pitchDelta)}},ae.prototype.off=function(){var p=this.element;S.removeEventListener(p,"mousedown",this.mousedown),S.removeEventListener(p,"touchstart",this.touchstart,{passive:!1}),S.removeEventListener(p,"touchmove",this.touchmove),S.removeEventListener(p,"touchend",this.touchend),S.removeEventListener(p,"touchcancel",this.reset),this.offTemp()},ae.prototype.offTemp=function(){S.enableDrag(),S.removeEventListener(c.window,"mousemove",this.mousemove),S.removeEventListener(c.window,"mouseup",this.mouseup)},ae.prototype.mousedown=function(p){this.down(c.extend({},p,{ctrlKey:!0,preventDefault:function(){return p.preventDefault()}}),S.mousePos(this.element,p)),S.addEventListener(c.window,"mousemove",this.mousemove),S.addEventListener(c.window,"mouseup",this.mouseup)},ae.prototype.mousemove=function(p){this.move(p,S.mousePos(this.element,p))},ae.prototype.mouseup=function(p){this.mouseRotate.mouseupWindow(p),this.mousePitch&&this.mousePitch.mouseupWindow(p),this.offTemp()},ae.prototype.touchstart=function(p){p.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=S.touchPos(this.element,p.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return p.preventDefault()}},this._startPos))},ae.prototype.touchmove=function(p){p.targetTouches.length!==1?this.reset():(this._lastPos=S.touchPos(this.element,p.targetTouches)[0],this.move({preventDefault:function(){return p.preventDefault()}},this._lastPos))},ae.prototype.touchend=function(p){p.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ae.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ae={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ke(p,y,g){var w=p.classList;for(var L in Ae)w.remove("mapboxgl-"+g+"-anchor-"+L);w.add("mapboxgl-"+g+"-anchor-"+y)}var ke,Xe=function(p){function y(g,w){if(p.call(this),(g instanceof c.window.HTMLElement||w)&&(g=c.extend({element:g},w)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=g&&g.anchor||"center",this._color=g&&g.color||"#3FB1CE",this._scale=g&&g.scale||1,this._draggable=g&&g.draggable||!1,this._clickTolerance=g&&g.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=g&&g.rotation||0,this._rotationAlignment=g&&g.rotationAlignment||"auto",this._pitchAlignment=g&&g.pitchAlignment&&g.pitchAlignment!=="auto"?g.pitchAlignment:this._rotationAlignment,g&&g.element)this._element=g.element,this._offset=c.Point.convert(g&&g.offset||[0,0]);else{this._defaultMarker=!0,this._element=S.create("div"),this._element.setAttribute("aria-label","Map marker");var L=S.createNS("http://www.w3.org/2000/svg","svg");L.setAttributeNS(null,"display","block"),L.setAttributeNS(null,"height","41px"),L.setAttributeNS(null,"width","27px"),L.setAttributeNS(null,"viewBox","0 0 27 41");var F=S.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"stroke","none"),F.setAttributeNS(null,"stroke-width","1"),F.setAttributeNS(null,"fill","none"),F.setAttributeNS(null,"fill-rule","evenodd");var N=S.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill-rule","nonzero");var H=S.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(3.0, 29.0)"),H.setAttributeNS(null,"fill","#000000");for(var Q=0,oe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Q<oe.length;Q+=1){var ye=oe[Q],be=S.createNS("http://www.w3.org/2000/svg","ellipse");be.setAttributeNS(null,"opacity","0.04"),be.setAttributeNS(null,"cx","10.5"),be.setAttributeNS(null,"cy","5.80029008"),be.setAttributeNS(null,"rx",ye.rx),be.setAttributeNS(null,"ry",ye.ry),H.appendChild(be)}var Ee=S.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"fill",this._color);var Be=S.createNS("http://www.w3.org/2000/svg","path");Be.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ee.appendChild(Be);var Re=S.createNS("http://www.w3.org/2000/svg","g");Re.setAttributeNS(null,"opacity","0.25"),Re.setAttributeNS(null,"fill","#000000");var We=S.createNS("http://www.w3.org/2000/svg","path");We.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Re.appendChild(We);var Ce=S.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ce.setAttributeNS(null,"fill","#FFFFFF");var Ve=S.createNS("http://www.w3.org/2000/svg","g");Ve.setAttributeNS(null,"transform","translate(8.0, 8.0)");var et=S.createNS("http://www.w3.org/2000/svg","circle");et.setAttributeNS(null,"fill","#000000"),et.setAttributeNS(null,"opacity","0.25"),et.setAttributeNS(null,"cx","5.5"),et.setAttributeNS(null,"cy","5.5"),et.setAttributeNS(null,"r","5.4999962");var dt=S.createNS("http://www.w3.org/2000/svg","circle");dt.setAttributeNS(null,"fill","#FFFFFF"),dt.setAttributeNS(null,"cx","5.5"),dt.setAttributeNS(null,"cy","5.5"),dt.setAttributeNS(null,"r","5.4999962"),Ve.appendChild(et),Ve.appendChild(dt),N.appendChild(H),N.appendChild(Ee),N.appendChild(Re),N.appendChild(Ce),N.appendChild(Ve),L.appendChild(N),L.setAttributeNS(null,"height",41*this._scale+"px"),L.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(L),this._offset=c.Point.convert(g&&g.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(xt){xt.preventDefault()}),this._element.addEventListener("mousedown",function(xt){xt.preventDefault()}),Ke(this._element,this._anchor,"marker"),this._popup=null}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.addTo=function(g){return this.remove(),this._map=g,g.getCanvasContainer().appendChild(this._element),g.on("move",this._update),g.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),S.remove(this._element),this._popup&&this._popup.remove(),this},y.prototype.getLngLat=function(){return this._lngLat},y.prototype.setLngLat=function(g){return this._lngLat=c.LngLat.convert(g),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},y.prototype.getElement=function(){return this._element},y.prototype.setPopup=function(g){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),g){if(!("offset"in g.options)){var w=Math.sqrt(Math.pow(13.5,2)/2);g.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(24.6+w)],"bottom-right":[-w,-1*(24.6+w)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=g,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},y.prototype._onKeyPress=function(g){var w=g.code,L=g.charCode||g.keyCode;w!=="Space"&&w!=="Enter"&&L!==32&&L!==13||this.togglePopup()},y.prototype._onMapClick=function(g){var w=g.originalEvent.target,L=this._element;this._popup&&(w===L||L.contains(w))&&this.togglePopup()},y.prototype.getPopup=function(){return this._popup},y.prototype.togglePopup=function(){var g=this._popup;return g?(g.isOpen()?g.remove():g.addTo(this._map),this):this},y.prototype._update=function(g){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ge(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(w="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var L="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?L="rotateX(0deg)":this._pitchAlignment==="map"&&(L="rotateX("+this._map.getPitch()+"deg)"),g&&g.type!=="moveend"||(this._pos=this._pos.round()),S.setTransform(this._element,Ae[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+L+" "+w)}},y.prototype.getOffset=function(){return this._offset},y.prototype.setOffset=function(g){return this._offset=c.Point.convert(g),this._update(),this},y.prototype._onMove=function(g){if(!this._isDragging){var w=this._clickTolerance||this._map._clickTolerance;this._isDragging=g.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=g.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag")))},y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.Event("dragend")),this._state="inactive"},y.prototype._addDragHandler=function(g){this._element.contains(g.originalEvent.target)&&(g.preventDefault(),this._positionDelta=g.point.sub(this._pos).add(this._offset),this._pointerdownPos=g.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},y.prototype.setDraggable=function(g){return this._draggable=!!g,this._map&&(g?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},y.prototype.isDraggable=function(){return this._draggable},y.prototype.setRotation=function(g){return this._rotation=g||0,this._update(),this},y.prototype.getRotation=function(){return this._rotation},y.prototype.setRotationAlignment=function(g){return this._rotationAlignment=g||"auto",this._update(),this},y.prototype.getRotationAlignment=function(){return this._rotationAlignment},y.prototype.setPitchAlignment=function(g){return this._pitchAlignment=g&&g!=="auto"?g:this._rotationAlignment,this._update(),this},y.prototype.getPitchAlignment=function(){return this._pitchAlignment},y}(c.Evented),ct={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},lt=0,bt=!1,pt=function(p){function y(g){p.call(this),this.options=c.extend({},ct,g),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.onAdd=function(g){var w;return this._map=g,this._container=S.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),w=this._setupUI,ke!==void 0?w(ke):c.window.navigator.permissions!==void 0?c.window.navigator.permissions.query({name:"geolocation"}).then(function(L){w(ke=L.state!=="denied")}):w(ke=!!c.window.navigator.geolocation),this._container},y.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(c.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),S.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,lt=0,bt=!1},y.prototype._isOutOfMapMaxBounds=function(g){var w=this._map.getMaxBounds(),L=g.coords;return w&&(L.longitude<w.getWest()||L.longitude>w.getEast()||L.latitude<w.getSouth()||L.latitude>w.getNorth())},y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},y.prototype._onSuccess=function(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("geolocate",g)),this._finish()}},y.prototype._updateCamera=function(g){var w=new c.LngLat(g.coords.longitude,g.coords.latitude),L=g.coords.accuracy,F=this._map.getBearing(),N=c.extend({bearing:F},this.options.fitBoundsOptions);this._map.fitBounds(w.toBounds(L),N,{geolocateSource:!0})},y.prototype._updateMarker=function(g){if(g){var w=new c.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(w).addTo(this._map),this._userLocationDotMarker.setLngLat(w).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},y.prototype._updateCircleRadius=function(){var g=this._map._container.clientHeight/2,w=this._map.unproject([0,g]),L=this._map.unproject([1,g]),F=w.distanceTo(L),N=Math.ceil(2*this._accuracy/F);this._circleElement.style.width=N+"px",this._circleElement.style.height=N+"px"},y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},y.prototype._onError=function(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var w=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&bt)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("error",g)),this._finish()}},y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},y.prototype._setupUI=function(g){var w=this;if(this._container.addEventListener("contextmenu",function(N){return N.preventDefault()}),this._geolocateButton=S.create("button","mapboxgl-ctrl-geolocate",this._container),S.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",g===!1){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var L=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=L,this._geolocateButton.setAttribute("aria-label",L)}else{var F=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=F,this._geolocateButton.setAttribute("aria-label",F)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=S.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Xe(this._dotElement),this._circleElement=S.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xe({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(N){N.geolocateSource||w._watchState!=="ACTIVE_LOCK"||N.originalEvent&&N.originalEvent.type==="resize"||(w._watchState="BACKGROUND",w._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),w._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),w.fire(new c.Event("trackuserlocationend")))})},y.prototype.trigger=function(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":lt--,bt=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++lt>1?(g={maximumAge:6e5,timeout:0},bt=!0):(g=this.options.positionOptions,bt=!1),this._geolocationWatchID=c.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else c.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},y.prototype._clearWatch=function(){c.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},y}(c.Evented),jt={maxWidth:100,unit:"metric"},Rt=function(p){this.options=c.extend({},jt,p),c.bindAll(["_onMove","setUnit"],this)};function Ft(p,y,g){var w=g&&g.maxWidth||100,L=p._container.clientHeight/2,F=p.unproject([0,L]),N=p.unproject([w,L]),H=F.distanceTo(N);if(g&&g.unit==="imperial"){var Q=3.2808*H;Q>5280?ti(y,w,Q/5280,p._getUIString("ScaleControl.Miles")):ti(y,w,Q,p._getUIString("ScaleControl.Feet"))}else g&&g.unit==="nautical"?ti(y,w,H/1852,p._getUIString("ScaleControl.NauticalMiles")):H>=1e3?ti(y,w,H/1e3,p._getUIString("ScaleControl.Kilometers")):ti(y,w,H,p._getUIString("ScaleControl.Meters"))}function ti(p,y,g,w){var L,F,N,H=(L=g,(F=Math.pow(10,(""+Math.floor(L)).length-1))*(N=(N=L/F)>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:function(Q){var oe=Math.pow(10,Math.ceil(-Math.log(Q)/Math.LN10));return Math.round(Q*oe)/oe}(N)));p.style.width=y*(H/g)+"px",p.innerHTML=H+"&nbsp;"+w}Rt.prototype.getDefaultPosition=function(){return"bottom-left"},Rt.prototype._onMove=function(){Ft(this._map,this._container,this.options)},Rt.prototype.onAdd=function(p){return this._map=p,this._container=S.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Rt.prototype.onRemove=function(){S.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Rt.prototype.setUnit=function(p){this.options.unit=p,Ft(this._map,this._container,this.options)};var ui=function(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof c.window.HTMLElement?this._container=p.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),c.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in c.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in c.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in c.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in c.window.document&&(this._fullscreenchange="MSFullscreenChange")};ui.prototype.onAdd=function(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=S.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",c.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ui.prototype.onRemove=function(){S.remove(this._controlContainer),this._map=null,c.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ui.prototype._checkFullscreenSupport=function(){return!!(c.window.document.fullscreenEnabled||c.window.document.mozFullScreenEnabled||c.window.document.msFullscreenEnabled||c.window.document.webkitFullscreenEnabled)},ui.prototype._setupUI=function(){var p=this._fullscreenButton=S.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);S.create("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden",!0),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),c.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ui.prototype._updateTitle=function(){var p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p},ui.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ui.prototype._isFullscreen=function(){return this._fullscreen},ui.prototype._changeIcon=function(){(c.window.document.fullscreenElement||c.window.document.mozFullScreenElement||c.window.document.webkitFullscreenElement||c.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ui.prototype._onClickFullscreen=function(){this._isFullscreen()?c.window.document.exitFullscreen?c.window.document.exitFullscreen():c.window.document.mozCancelFullScreen?c.window.document.mozCancelFullScreen():c.window.document.msExitFullscreen?c.window.document.msExitFullscreen():c.window.document.webkitCancelFullScreen&&c.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var qt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},qi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ci=function(p){function y(g){p.call(this),this.options=c.extend(Object.create(qt),g),c.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return p&&(y.__proto__=p),(y.prototype=Object.create(p&&p.prototype)).constructor=y,y.prototype.addTo=function(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new c.Event("open")),this},y.prototype.isOpen=function(){return!!this._map},y.prototype.remove=function(){return this._content&&S.remove(this._content),this._container&&(S.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.Event("close")),this},y.prototype.getLngLat=function(){return this._lngLat},y.prototype.setLngLat=function(g){return this._lngLat=c.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},y.prototype.getElement=function(){return this._container},y.prototype.setText=function(g){return this.setDOMContent(c.window.document.createTextNode(g))},y.prototype.setHTML=function(g){var w,L=c.window.document.createDocumentFragment(),F=c.window.document.createElement("body");for(F.innerHTML=g;w=F.firstChild;)L.appendChild(w);return this.setDOMContent(L)},y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},y.prototype.setMaxWidth=function(g){return this.options.maxWidth=g,this._update(),this},y.prototype.setDOMContent=function(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=S.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this},y.prototype.addClassName=function(g){this._container&&this._container.classList.add(g)},y.prototype.removeClassName=function(g){this._container&&this._container.classList.remove(g)},y.prototype.setOffset=function(g){return this.options.offset=g,this._update(),this},y.prototype.toggleClassName=function(g){if(this._container)return this._container.classList.toggle(g)},y.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=S.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},y.prototype._onMouseUp=function(g){this._update(g.point)},y.prototype._onMouseMove=function(g){this._update(g.point)},y.prototype._onDrag=function(g){this._update(g.point)},y.prototype._update=function(g){var w=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=S.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=S.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(be){return w._container.classList.add(be)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ge(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||g)){var L=this._pos=this._trackPointer&&g?g:this._map.project(this._lngLat),F=this.options.anchor,N=function be(Ee){if(Ee){if(typeof Ee=="number"){var Be=Math.round(Math.sqrt(.5*Math.pow(Ee,2)));return{center:new c.Point(0,0),top:new c.Point(0,Ee),"top-left":new c.Point(Be,Be),"top-right":new c.Point(-Be,Be),bottom:new c.Point(0,-Ee),"bottom-left":new c.Point(Be,-Be),"bottom-right":new c.Point(-Be,-Be),left:new c.Point(Ee,0),right:new c.Point(-Ee,0)}}if(Ee instanceof c.Point||Array.isArray(Ee)){var Re=c.Point.convert(Ee);return{center:Re,top:Re,"top-left":Re,"top-right":Re,bottom:Re,"bottom-left":Re,"bottom-right":Re,left:Re,right:Re}}return{center:c.Point.convert(Ee.center||[0,0]),top:c.Point.convert(Ee.top||[0,0]),"top-left":c.Point.convert(Ee["top-left"]||[0,0]),"top-right":c.Point.convert(Ee["top-right"]||[0,0]),bottom:c.Point.convert(Ee.bottom||[0,0]),"bottom-left":c.Point.convert(Ee["bottom-left"]||[0,0]),"bottom-right":c.Point.convert(Ee["bottom-right"]||[0,0]),left:c.Point.convert(Ee.left||[0,0]),right:c.Point.convert(Ee.right||[0,0])}}return be(new c.Point(0,0))}(this.options.offset);if(!F){var H,Q=this._container.offsetWidth,oe=this._container.offsetHeight;H=L.y+N.bottom.y<oe?["top"]:L.y>this._map.transform.height-oe?["bottom"]:[],L.x<Q/2?H.push("left"):L.x>this._map.transform.width-Q/2&&H.push("right"),F=H.length===0?"bottom":H.join("-")}var ye=L.add(N[F]).round();S.setTransform(this._container,Ae[F]+" translate("+ye.x+"px,"+ye.y+"px)"),Ke(this._container,F,"popup")}},y.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var g=this._container.querySelector(qi);g&&g.focus()}},y.prototype._onClose=function(){this.remove()},y}(c.Evented),vn={version:c.version,supported:h,setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:j,NavigationControl:ie,GeolocateControl:pt,AttributionControl:xo,ScaleControl:Rt,FullscreenControl:ui,Popup:Ci,Marker:Xe,Style:Uo,LngLat:c.LngLat,LngLatBounds:c.LngLatBounds,Point:c.Point,MercatorCoordinate:c.MercatorCoordinate,Evented:c.Evented,config:c.config,prewarm:function(){xe().acquire(X)},clearPrewarmedResources:function(){var p=me;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(X),me=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return c.config.ACCESS_TOKEN},set accessToken(p){c.config.ACCESS_TOKEN=p},get baseApiUrl(){return c.config.API_URL},set baseApiUrl(p){c.config.API_URL=p},get workerCount(){return le.workerCount},set workerCount(p){le.workerCount=p},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){c.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage:function(p){c.clearTileCache(p)},workerUrl:""};return vn}),f})})(Ab);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.ContourType=o.Costing=void 0;const e=xP,n=Ab.exports;o.Costing={Walking:"pedestrian",Bicycle:"bicycle",Car:"auto"},o.ContourType={Time:"time",Distance:"distance"};class s{constructor(v,c,h){this.contourSources=[],this.contourLayers=[],this.contourMaker=void 0,this.contours=[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}],this.map=v,this.url=c,h&&(this.contours=h)}clearFeatures(){this.contourLayers&&this.contourLayers.length>0&&(this.contourLayers.forEach(v=>{var c;(c=this.map)===null||c===void 0||c.removeLayer(v)}),this.contourLayers=[]),this.contourSources&&this.contourSources.length>0&&(this.contourSources.forEach(v=>{var c;(c=this.map)===null||c===void 0||c.removeSource(v)}),this.contourSources=[]),this.contourMaker&&(this.contourMaker.remove(),this.contourMaker=void 0)}getIsochrone(v,c,h,S,P){this.clearFeatures();let D=JSON.parse(JSON.stringify(this.contours));P&&(D=P),D.forEach(O=>{h===o.ContourType.Time?delete O.distance:delete O.time});let R="km";return h===o.ContourType.Time&&(R="min"),new Promise((O,Y)=>{const ee={locations:[{lat:c,lon:v}],costing:S,contours:D,polygons:!0},he=`${this.url}/isochrone?json=${JSON.stringify(ee)}`;e.default.get(he).then(re=>{re.data.features.forEach(se=>{var we,Ge,Ue,He;const fe=`isochrone-${se.properties.contour}`;(we=this.map)===null||we===void 0||we.addSource(fe,{type:"geojson",data:se}),this.contourSources.push(fe),(Ge=this.map)===null||Ge===void 0||Ge.addLayer({id:`pg-${fe}`,type:"fill",source:fe,layout:{},paint:{"fill-color":se.properties.fillColor,"fill-opacity":.1}}),this.contourLayers.push(`pg-${fe}`),(Ue=this.map)===null||Ue===void 0||Ue.addLayer({id:`ls-${fe}`,type:"line",source:fe,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":se.properties.fillColor,"line-width":3}}),this.contourLayers.push(`ls-${fe}`),(He=this.map)===null||He===void 0||He.addLayer({id:`symbol-${fe}`,type:"symbol",source:fe,layout:{"symbol-placement":"line","text-pitch-alignment":"viewport","text-font":["Roboto Bold"],"text-field":["concat",["get","contour"],` ${R}`],"text-size":16},paint:{"text-color":"#000000","text-halo-width":1,"text-halo-color":"#FFFFFF"}}),this.contourLayers.push(`symbol-${fe}`)}),this.map&&(this.contourMaker=new n.Marker().setLngLat([v,c]).addTo(this.map)),O()}).catch(re=>Y(re))})}getContoursOption(){return this.contours}}o.default=s})(Wm);var Ym={};Object.defineProperty(Ym,"__esModule",{value:!0});class wP{constructor(e){this.color="#535353",this.map=e}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize.bind(this)),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var e,n;this.width=(e=this.map)===null||e===void 0?void 0:e.getCanvas().clientWidth,this.height=(n=this.map)===null||n===void 0?void 0:n.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const e=this.width/2,n=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1",`${0}px`),this.xLine.setAttribute("y1",`${n}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${n}px`)}}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="relative",n.setAttribute("width",`${this.width}px`),n.setAttribute("height",`${this.height}px`);const s=this.width/2,f=this.height/2;this.yLine=n.appendChild(this.createLine(s,0,s,this.height,this.color,"2px")),this.xLine=n.appendChild(this.createLine(0,f,this.width,f,this.color,"2px")),e==null||e.appendChild(n),this.svgCanvas=n}}createLine(e,n,s,f,v,c){const h=document.createElementNS("http://www.w3.org/2000/svg","line");return h.setAttribute("x1",e),h.setAttribute("y1",n),h.setAttribute("x2",s),h.setAttribute("y2",f),h.setAttribute("stroke-dasharray","5,5"),h.setAttribute("stroke",v),h.setAttribute("stroke-width",c),h}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}}Ym.default=wP;var Td={};Object.defineProperty(Td,"__esModule",{value:!0});Td.createTextbox=Td.createSelection=void 0;const EP=(o,e,n,s,f)=>{const v=document.createElement("label");v.textContent=e;const c=document.createElement("select");c.setAttribute("id",`mapbox-gl-valhalla-${n}`),c.style.width="100%",Object.keys(o).forEach(D=>{const R=document.createElement("option");R.setAttribute("value",f(o,D)),R.appendChild(document.createTextNode(D)),R.setAttribute("name",n),s===o[D]&&(R.selected=!0),c.appendChild(R)});const h=document.createElement("TR"),S=document.createElement("TD"),P=document.createElement("TD");return S.appendChild(v),P.appendChild(c),h.appendChild(S),h.appendChild(P),h};Td.createSelection=EP;const IP=(o,e,n,s,f)=>{const v=document.createElement("label");v.textContent=o,f||(f="text");const c=document.createElement("input");c.setAttribute("id",`mapbox-gl-valhalla-${e}`),c.setAttribute("type",f),c.setAttribute("value",n),c.readOnly=s;const h=document.createElement("TR"),S=document.createElement("TD"),P=document.createElement("TD");return S.appendChild(v),P.appendChild(c),h.appendChild(S),h.appendChild(P),h};Td.createTextbox=IP;Object.defineProperty(l_,"__esModule",{value:!0});const py=Wm,SP=Ym,mm=Td;class TP{constructor(e,n){this.map=e,this.valhalla=n,this.onDocumentClick=this.onDocumentClick.bind(this)}addTo(e){var n,s;this.map||console.error("map object is null"),this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.mainContainer=document.createElement("div"),this.mainContainer.classList.add("mapboxgl-valhalla-list"),this.mainButton=document.createElement("button"),this.mainButton.classList.add("mapboxgl-ctrl-icon"),this.mainButton.classList.add("mapboxgl-valhalla-time-isochrone-control"),this.mainButton.addEventListener("click",()=>{this.mainButton.style.display="none",this.mainContainer.style.display="block",this.toggleCrosshair(!0)}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.mainButton),this.controlContainer.appendChild(this.mainContainer);const f=document.createElement("TABLE");f.className="valhalla-table",this.mainContainer.appendChild(f);const v=mm.createSelection(py.Costing,"Means of transport","costing",py.Costing.Walking,(D,R)=>D[R]);f.appendChild(v);const c=(n=this.map)===null||n===void 0?void 0:n.getCenter();if(c){const D=mm.createTextbox("Longitude","lon-time",c.lng,!0);f.appendChild(D);const R=mm.createTextbox("Latitude","lat-time",c.lat,!0);f.appendChild(R)}const h=this.valhalla.getContoursOption();for(let D=0;D<h.length;D+=1){const R=h[D],O=mm.createTextbox(`Contour ${D+1} (min)`,`contour-time-${D}`,R.time,!1,"number");f.appendChild(O)}const S=document.createElement("button");S.textContent="Clear",S.classList.add("mapbox-valhalla-control-button"),S.addEventListener("click",()=>{this.valhalla.clearFeatures()}),this.mainContainer.appendChild(S);const P=document.createElement("button");return P.textContent="Calculate",P.classList.add("mapbox-valhalla-control-button"),P.addEventListener("click",()=>{const D=document.getElementById("mapbox-gl-valhalla-lon-time"),R=document.getElementById("mapbox-gl-valhalla-lat-time"),O=document.getElementById("mapbox-gl-valhalla-costing"),Y=this.valhalla.getContoursOption();for(let ee=0;ee<Y.length;ee+=1){const he=Y[ee],re=document.getElementById(`mapbox-gl-valhalla-contour-time-${ee}`);he.time=Number(re.value)}this.valhalla.getIsochrone(Number(D.value),Number(R.value),py.ContourType.Time,O.value,Y)}),this.mainContainer.appendChild(P),(s=this.map)===null||s===void 0||s.on("moveend",()=>{var D;const R=(D=this.map)===null||D===void 0?void 0:D.getCenter(),O=document.getElementById("mapbox-gl-valhalla-lon-time"),Y=document.getElementById("mapbox-gl-valhalla-lat-time");R||(O.setAttribute("value",""),Y.setAttribute("value",""));const ee=R,he=ee!=null&&ee.lng?ee.lng.toString():"";O.setAttribute("value",he);const re=ee!=null&&ee.lat?ee.lat.toString():"";Y.setAttribute("value",re)}),e.appendChild(this.controlContainer),e}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.hide()}hide(){this.mainContainer&&this.mainButton&&(this.mainContainer.style.display="none",this.mainButton.style.display="block",this.toggleCrosshair(!1))}destroy(){!this.mainContainer||!this.mainContainer.parentNode||!this.map||!this.mainButton||(this.mainButton.removeEventListener("click",this.onDocumentClick),this.mainContainer.parentNode.removeChild(this.mainContainer),document.removeEventListener("click",this.onDocumentClick),this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0),this.map=void 0)}toggleCrosshair(e){e===!1?this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0):(this.crosshair=new SP.default(this.map),this.crosshair.create())}}l_.default=TP;var m_={};Object.defineProperty(m_,"__esModule",{value:!0});const j0=Wm,AP=Ym,fy=Td;class CP{constructor(e,n){this.map=e,this.valhalla=n,this.onDocumentClick=this.onDocumentClick.bind(this)}addTo(e){var n,s;this.map||console.error("map object is null"),this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.mainContainer=document.createElement("div"),this.mainContainer.classList.add("mapboxgl-valhalla-list"),this.mainButton=document.createElement("button"),this.mainButton.classList.add("mapboxgl-ctrl-icon"),this.mainButton.classList.add("mapboxgl-valhalla-distance-isochrone-control"),this.mainButton.addEventListener("click",()=>{this.mainButton.style.display="none",this.mainContainer.style.display="block",this.toggleCrosshair(!0)}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.mainButton),this.controlContainer.appendChild(this.mainContainer);const f=document.createElement("TABLE");f.className="valhalla-table",this.mainContainer.appendChild(f);const v=(n=this.map)===null||n===void 0?void 0:n.getCenter();if(v){const P=fy.createTextbox("Longitude","lon-distance",v.lng,!0);f.appendChild(P);const D=fy.createTextbox("Latitude","lat-distance",v.lat,!0);f.appendChild(D)}const c=this.valhalla.getContoursOption();for(let P=0;P<c.length;P+=1){const D=c[P],R=fy.createTextbox(`Contour ${P+1} (km)`,`contour-distance-${P}`,D.distance,!1,"number");f.appendChild(R)}const h=document.createElement("button");h.textContent="Clear",h.classList.add("mapbox-valhalla-control-button"),h.addEventListener("click",()=>{this.valhalla.clearFeatures()}),this.mainContainer.appendChild(h);const S=document.createElement("button");return S.textContent="Calculate",S.classList.add("mapbox-valhalla-control-button"),S.addEventListener("click",()=>{const P=document.getElementById("mapbox-gl-valhalla-lon-distance"),D=document.getElementById("mapbox-gl-valhalla-lat-distance"),R=this.valhalla.getContoursOption();for(let O=0;O<R.length;O+=1){const Y=R[O],ee=document.getElementById(`mapbox-gl-valhalla-contour-distance-${O}`);Y.distance=Number(ee.value)}this.valhalla.getIsochrone(Number(P.value),Number(D.value),j0.ContourType.Distance,j0.Costing.Walking,R)}),this.mainContainer.appendChild(S),(s=this.map)===null||s===void 0||s.on("moveend",()=>{var P;const D=(P=this.map)===null||P===void 0?void 0:P.getCenter(),R=document.getElementById("mapbox-gl-valhalla-lon-distance"),O=document.getElementById("mapbox-gl-valhalla-lat-distance");D||(R.setAttribute("value",""),O.setAttribute("value",""));const Y=D,ee=Y!=null&&Y.lng?Y.lng.toString():"";R.setAttribute("value",ee);const he=Y!=null&&Y.lat?Y.lat.toString():"";O.setAttribute("value",he)}),e.appendChild(this.controlContainer),e}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.hide()}hide(){this.mainContainer&&this.mainButton&&(this.mainContainer.style.display="none",this.mainButton.style.display="block",this.toggleCrosshair(!1))}destroy(){!this.mainContainer||!this.mainContainer.parentNode||!this.map||!this.mainButton||(this.mainButton.removeEventListener("click",this.onDocumentClick),this.mainContainer.parentNode.removeChild(this.mainContainer),document.removeEventListener("click",this.onDocumentClick),this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0),this.map=void 0)}toggleCrosshair(e){e===!1?this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0):(this.crosshair=new AP.default(this.map),this.crosshair.create())}}m_.default=CP;Object.defineProperty(s_,"__esModule",{value:!0});const kP=l_,MP=m_,LP=Wm;class PP{constructor(e,n){this.options={Contours:[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}]},this.url=e,n&&(this.options=Object.assign(this.options,n)),this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(e){return this.map=e,this.map&&(this.valhalla=new LP.default(this.map,this.url,this.options.Contours)),this.controlContainer=document.createElement("div"),this.timeIsochroneControl=new kP.default(this.map,this.valhalla),this.controlContainer=this.timeIsochroneControl.addTo(this.controlContainer),this.distanceIsochroneControl=new MP.default(this.map,this.valhalla),this.controlContainer=this.distanceIsochroneControl.addTo(this.controlContainer),document.addEventListener("click",this.onDocumentClick),this.controlContainer}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.timeIsochroneControl&&this.distanceIsochroneControl&&(this.timeIsochroneControl.hide(),this.distanceIsochroneControl.hide())}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.timeIsochroneControl||!this.distanceIsochroneControl||(this.timeIsochroneControl.destroy(),this.distanceIsochroneControl.destroy(),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}}s_.default=PP;(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.MapboxValhallaControl=void 0;var e=s_;Object.defineProperty(o,"MapboxValhallaControl",{enumerable:!0,get:function(){return e.default}})})(db);class zP{constructor(e=[],n){this.targets=e,this.callback=n,this.isActive=!1}onAdd(e){return this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",this.button=document.createElement("button"),this.button.className="maplibre-identify-icon",this.button.type="button",this.button.addEventListener("click",()=>{this.changeButtonCondition()}),this.controlContainer.appendChild(this.button),this.controlContainer}changeButtonCondition(){this.isActive?(this.button.classList.remove("-active"),this.isActive=!1,this.map.off("click",this.onClick.bind(this))):(this.button.classList.add("-active"),this.isActive=!0,this.map.on("click",this.onClick.bind(this)))}onClick(e){if(!this.isActive){this.callback&&this.callback([]);return}const n=[];this.targets.forEach(f=>{this.map.getLayer(f)&&n.push(f)});const s=this.map.queryRenderedFeatures(e.point,{layers:n});this.callback&&this.callback(s)}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)}}function DP(o){let e,n;return{c(){e=_i("div"),n=_i("div"),this.h()},l(s){e=vi(s,"DIV",{class:!0});var f=mi(e);n=vi(f,"DIV",{class:!0,id:!0}),mi(n).forEach(Qe),f.forEach(Qe),this.h()},h(){ii(n,"class","map svelte-r1bal3"),ii(n,"id","map"),ii(e,"class","map-wrap svelte-r1bal3")},m(s,f){Ut(s,e,f),sn(e,n),o[1](n)},p:Yo,i:Yo,o:Yo,d(s){s&&Qe(e),o[1](null)}}}function RP(o,e,n){let s;Ho(o,Py,c=>n(2,s=c));let f;Fo(async()=>{const c=new wd.exports.Map({container:f,style:s.uri,center:Sr.center,zoom:Sr.zoom,hash:!0,attributionControl:!1});if(c.addControl(new wd.exports.NavigationControl({}),"top-right"),c.addControl(new wd.exports.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"top-right"),c.addControl(new wd.exports.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),c.addControl(new wd.exports.AttributionControl({compact:!0}),"bottom-right"),c.addControl(new zP(Sr.popup.target,ee=>{zy.update(()=>ee)})),c.addControl(new KM(Sr.areaSwitcher.areas),"top-right"),Sr.elevation){const ee=await(await H_(()=>import("./index-1fc998b9.js").then(function(he){return he.i}),[])).default;c.addControl(new ee(Sr.elevation.url,Sr.elevation.options),"top-right")}const{MaplibreExportControl:h,Size:S,PageOrientation:P,Format:D,DPI:R}=await H_(()=>import("./index-971258ba.js").then(function(ee){return ee.i}),[]);if(c.addControl(new h({PageSize:S.A4,PageOrientation:P.Landscape,Format:D.PNG,DPI:R[96],Crosshair:!0,PrintableArea:!0}),"top-right"),Sr.valhalla&&c.addControl(new db.MapboxValhallaControl(Sr.valhalla.url,Sr.valhalla.options),"top-right"),!Sr.search)return;const O=await fetch(Sr.search.url).then(ee=>ee.json());function Y(ee){for(var he=[],re=0;re<O.features.length;re++){var ve=O.features[re];Sr.search.target.forEach(se=>{var we=ve.properties[se];!we||we.toString().toLowerCase().search(ee.toString().toLowerCase())!==-1&&(ve.place_name=Sr.search.format(ve.properties),ve.center=ve.geometry.coordinates,ve.place_type=Sr.search.place_type,he.push(ve))})}return he}c.addControl(new XM({localGeocoder:Y,localGeocoderOnly:!0,zoom:Sr.search.zoom,placeholder:Sr.search.placeholder,mapboxgl:FC}),"top-left"),_f.update(()=>c)});function v(c){Zi[c?"unshift":"push"](()=>{f=c,n(0,f)})}return[f,v]}class OP extends Tn{constructor(e){super(),An(this,e,RP,DP,Sn,{})}}function BP(o){let e,n;return e=new OP({}),{c(){Ni(e.$$.fragment)},l(s){$i(e.$$.fragment,s)},m(s,f){Vi(e,s,f),n=!0},i(s){n||(rt(e.$$.fragment,s),n=!0)},o(s){ft(e.$$.fragment,s),n=!1},d(s){ji(e,s)}}}function FP(o){let e,n,s,f,v,c;function h(R){o[1](R)}let S={};o[0]!==void 0&&(S.drawerOpen=o[0]),e=new r2({props:S}),Zi.push(()=>$l(e,"drawerOpen",h));function P(R){o[2](R)}let D={$$slots:{default:[BP]},$$scope:{ctx:o}};return o[0]!==void 0&&(D.open=o[0]),f=new BC({props:D}),Zi.push(()=>$l(f,"open",P)),{c(){Ni(e.$$.fragment),s=qn(),Ni(f.$$.fragment)},l(R){$i(e.$$.fragment,R),s=Gn(R),$i(f.$$.fragment,R)},m(R,O){Vi(e,R,O),Ut(R,s,O),Vi(f,R,O),c=!0},p(R,[O]){const Y={};!n&&O&1&&(n=!0,Y.drawerOpen=R[0],eu(()=>n=!1)),e.$set(Y);const ee={};O&16&&(ee.$$scope={dirty:O,ctx:R}),!v&&O&1&&(v=!0,ee.open=R[0],eu(()=>v=!1)),f.$set(ee)},i(R){c||(rt(e.$$.fragment,R),rt(f.$$.fragment,R),c=!0)},o(R){ft(e.$$.fragment,R),ft(f.$$.fragment,R),c=!1},d(R){ji(e,R),R&&Qe(s),ji(f,R)}}}function UP(o,e,n){let s=!1;const f=Sr.styles[0];Py.update(()=>f);function v(h){s=h,n(0,s)}function c(h){s=h,n(0,s)}return[s,v,c]}class GP extends Tn{constructor(e){super(),An(this,e,UP,FP,Sn,{})}}export{GP as _,xP as a,qP as b,Xl as c,pC as g,wd as m};
